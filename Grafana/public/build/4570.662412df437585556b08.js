(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4570],{76287:(Y,I,e)=>{"use strict";e.d(I,{p:()=>r});var t=e(96540),n=e(94841);function r(s){const{children:o,instanceSettings:m}=s,l=(0,t.useMemo)(()=>({instanceSettings:m,meta:m.meta}),[m]);return t.createElement(n.o.Provider,{value:l},o)}},94841:(Y,I,e)=>{"use strict";e.d(I,{o:()=>n});var t=e(96540);const n=(0,t.createContext)(void 0)},13834:(Y,I,e)=>{"use strict";e.d(I,{a:()=>r});var t=e(96540),n=e(94841);function r(s){const{children:o,...m}=s;return t.createElement(n.o.Provider,{value:m},o)}},95187:(Y,I,e)=>{"use strict";e.d(I,{S:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},92470:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>r});var t=e(96540),n=e(94841);function r(){const s=(0,t.useContext)(n.o);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},33948:(Y,I,e)=>{"use strict";e.d(I,{I:()=>s,f:()=>r});var t=e(11261),n=e(14236);class r{constructor(i,c){return this.fields=[],this.length=0,s(i,c)}}function s(l,i){const c={fields:[],length:l.length};if(!l?.length)return c;if(i){if(!m(l))throw new Error("source is not an array of objects");for(const f of i)c.fields.push(o(f,l.map(d=>d&&d[f])));return c}if(l.find(f=>f)===null)return c;if(m(l)){const f=l.find(d=>d);c.fields=Object.keys(f||{}).map(d=>o(d,l.map(E=>E&&E[d])))}else c.fields.push(o(t.Bc,l));return c}function o(l,i){const c={name:l,config:{},values:i,type:t.PU.other};return c.type=(0,n.dF)(c)??t.PU.other,c}function m(l){const i=l.find(c=>c);return l.length>0&&typeof i=="object"}},33526:(Y,I,e)=>{"use strict";e.d(I,{x:()=>r});var t=e(36120),n=e(37471);class r extends n.k{constructor(o){super(void 0,m=>new t.$({...o,buffer:m}))}}},89667:(Y,I,e)=>{"use strict";e.d(I,{EL:()=>o,Nw:()=>i,or:()=>l,t:()=>s});var t=e(11261),n=e(14236);const r={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function s(c,u){for(const f in c){const d=r[f];for(const E of c[f])E<u.length&&(u[E]=d)}}function o(c,u){for(let f=0;f<u.length;f++)u[f]=c[Number(u[f])]}function m(c,u){for(const f of u)if(f!=null)return(0,n.by)(c,f);return t.PU.other}function l(c){const{schema:u,data:f}=c;if(!u||!u.fields)throw new Error("JSON needs a fields definition");const d=f?f.values.reduce((h,y)=>Math.max(h,y.length),0):0,E=u.fields.map((h,y)=>{let a=f?f.values[y]:[],v=a.length,g=h.type;v!==d&&(a.length=d,a.fill(void 0,v));let b=f?.entities?.[y];b&&s(b,a);let P=f?.enums?.[y];P&&(o(P,a),g=t.PU.string);const C=f?.nanos?.[y],D={...h,type:g??m(h.name,a),config:h.config??{},values:a,entities:b??{}};return C!=null&&(D.nanos=C),D});return{...u,fields:E,length:d}}function i(c){const u={values:[]},f=[];let d=!1;const E={refId:c.refId,meta:c.meta,name:c.name,fields:c.fields.map(h=>{const{values:y,nanos:a,state:v,display:g,...b}=h;return"entities"in b&&delete b.entities,u.values.push(y),a!=null?(f.push(a),d=!0):f.push(null),b})};return d&&(u.nanos=f),{schema:E,data:u}}},78368:(Y,I,e)=>{"use strict";e.d(I,{R:()=>n});var t=e(18008);class n extends t.F{constructor(s){super(),this.data=s,this.index=0;const o={},m={};for(let l=0;l<s.fields.length;l++){const i=s.fields[l];if(!i.name)continue;m[i.name]=i;const c=()=>i.values.get(this.index);o.hasOwnProperty(i.name)||Object.defineProperty(o,i.name,{enumerable:!0,get:c}),o.hasOwnProperty(l.toString())||Object.defineProperty(o,l,{enumerable:!1,get:c})}this.obj=o,this.fields=m}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const o=this.dataFrame.fields[s];if(!(!o||!o.display))return o.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,o)=>({...this.get(o)}))}}},85404:(Y,I,e)=>{"use strict";e.d(I,{L:()=>r});var t=e(11261),n=e(14236);class r{constructor(o){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=o.fields.map((m,l)=>({...m,index:l}));for(let m=0;m<o.fields.length;m++){const l=o.fields[m];if(l.type===t.PU.other){const i=(0,n.dF)(l);i&&(l.type=i)}this.fieldByType[l.type]||(this.fieldByType[l.type]=[]),this.fieldByType[l.type].push({...l,index:m}),this.fieldByName[l.name]?console.warn("Duplicate field names in DataFrame: ",l.name):this.fieldByName[l.name]={...l,index:m}}}getFields(o){if(!o)return[...this.fields];const m=this.fieldByType[o];return m?[...m]:[]}hasFieldOfType(o){const m=this.fieldByType[o];return m&&m.length>0}getFirstFieldOfType(o,m=!1){return this.fieldByType[o]?.find(c=>m||!c.config.custom?.hidden)}hasFieldNamed(o){return!!this.fieldByName[o]}hasFieldWithNameAndType(o,m){return!!this.fieldByName[o]&&this.fieldByType[m].filter(l=>l.name===o).length>0}getFieldByName(o){return this.fieldByName[o]}getFieldsByLabel(o,m){return Object.values(this.fieldByName).filter(l=>l.labels&&l.labels[o]===m)}}},37471:(Y,I,e)=>{"use strict";e.d(I,{p:()=>m,k:()=>l});var t=e(2543),n=e(11261),r=e(14236);function s(i,c){return c.type||(c.name==="time"||c.name==="Time"?c.type=n.PU.time:c.type=(0,r.HW)(i)),c.type===n.PU.number?u=>parseFloat(u):c.type===n.PU.boolean?u=>!(u[0]==="F"||u[0]==="f"||u[0]==="0"):u=>u}var o=e(18008);const m=void 0;class l extends o.F{constructor(c,u){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=u||(f=>f??[]),c){const{name:f,refId:d,meta:E,fields:h}=c;if(f&&(this.name=f),d&&(this.refId=d),E&&(this.meta=E),h)for(const y of h)this.addField(y)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(c,u){return this.addField({name:u||"",type:(0,r.HW)(c)})}addField(c,u){let f;c.values&&(f=c.values);let d=c.type;!d&&(c.name==="time"||c.name==="Time")?d=n.PU.time:(!d&&f&&f.length&&(d=(0,r.HW)(f[0])),d||(d=n.PU.other));let E=c.name;E||(E=`Field ${this.fields.length+1}`);const h={...c,name:E,type:d,config:c.config||{},values:this.creator(f)};if(d===n.PU.other&&(d=(0,r.dF)(h),d&&(h.type=d)),this.fields.push(h),this.first=this.fields[0].values,u)for(;h.values.length<u;)h.values.push(m);else this.validate();return h}validate(){const c=this.fields.reduce((u,f)=>Math.max(u,f.values.length),0);for(const u of this.fields)for(;u.values.length!==c;)u.values.push(m)}setParser(c,u){return this.parsers||(this.parsers=new Map),this.parsers.set(c,u),u}parseValue(c,u){let f=this.parsers?.get(c);return f||(f=this.setParser(c,s(u,c))),f(u)}appendRow(c){for(let u=this.fields.length;u<c.length;u++)this.addField({name:`Field ${u+1}`,type:(0,r.HW)(c[u])});if(this.length<1)for(let u=0;u<this.fields.length;u++){const f=this.fields[u];(!f.type||f.type===n.PU.other)&&(f.type=(0,r.HW)(c[u]))}for(let u=0;u<this.fields.length;u++){const f=this.fields[u];let d=c[u];f.type!==n.PU.string&&(0,t.isString)(d)&&(d=this.parseValue(f,d)),f.values.push(d)}}push(...c){for(const u of c)this.add(u);return this.length}reverse(){for(const c of this.fields)c.values.reverse();return this}add(c){const u=c;for(const f of this.fields){let d=u[f.name];f.type!==n.PU.string&&(0,t.isString)(d)&&(d=this.parseValue(f,d)),d===void 0&&(d=m),f.values.push(d)}}set(c,u){if(c>this.length)throw new Error("Unable to set value beyond current length");const f=u||{};for(const d of this.fields)d.values[c]=f[d.name]}get(c){const u={};for(const f of this.fields)u[f.name]=f.values[c];return u}toJSON(){return(0,r.Kl)(this)}}},9631:(Y,I,e)=>{"use strict";e.d(I,{Kh:()=>l,Ls:()=>E,k9:()=>u,m8:()=>f,wC:()=>y});var t=e(11261),n=e(8249),r=e(73060),s=e(43659),o=e(14236),m=e(89667),l=(P=>(P.Append="append",P.Replace="replace",P))(l||{});const i="__name__";var c=(P=>(P[P.wide=0]="wide",P[P.labels=1]="labels",P))(c||{});class u{constructor(C){this.options=C,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(D,T,M)=>{const O=T?Object.assign({},{...this.options,...T}):this.options,S=(0,o.By)(this,D),p=g(S.fields.map(A=>A.values),typeof M?.maxLength=="number"?Math.min(M.maxLength,O.maxLength):O.maxLength,this.timeFieldIndex,O.maxDelta);S.fields=S.fields.map(A=>({...A,values:A.values?.slice(p)}));const x=S.fields[0]?.values?.length??0;return{...S,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:x,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:O}},this.initFromSerialized=D=>{this.name=D.name,this.refId=D.refId,this.meta=D.meta,this.length=D.length,this.labels=D.labels,this.schemaFields=D.schemaFields,this.timeFieldIndex=D.timeFieldIndex,this.pushMode=D.pushMode,this.packetInfo.length=D.packetInfo.length,this.packetInfo.number=D.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=D.fields.map(T=>({...T,type:T.type??t.PU.other,config:T.config??{},values:T.values??[]})),v(this.fields.map(T=>T.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:D,maxDelta:T})=>{const M=D&&this.options.maxLength<D,O=T&&this.options.maxDelta<T,S=T&&this.options.maxDelta===1/0;return!!(M||O||S)},this.resize=({maxLength:D,maxDelta:T})=>{T&&(this.options.maxDelta===1/0?this.options.maxDelta=T:this.options.maxDelta=Math.max(T,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,D??0)},this.pushNewValues=D=>{if(!D?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=D[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?a(this.fields.map(M=>M.values),D,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(D.forEach((M,O)=>{this.fields[O]&&(this.fields[O].values=M)}),v(this.fields.map(M=>M.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const T=this.fields?.[0]?.values.length;T!==void 0&&(this.length=T)},this.resetStateCalculations=()=>{this.fields.forEach(D=>{D.state={...D.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=D=>this.fields.map((T,M)=>D(T)?M:void 0).filter(T=>T!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(D=>{const T=D.values;return T.slice(Math.max(T.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}static{this.deserialize=C=>{const D=new u(C.options);return D.initFromSerialized(C),D}}static{this.empty=C=>new u(f(C))}static{this.fromDataFrameJSON=(C,D)=>{const T=new u(f(D));return T.push(C),T}}get alwaysReplace(){return this.options.action==="replace"}push(C){const{schema:D,data:T}=C;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,D){this.pushMode=0,this.timeFieldIndex=D.fields.findIndex(p=>p.type===t.PU.time);const M=D.fields[0];this.timeFieldIndex===1&&M.type===t.PU.string&&(M.name==="labels"||M.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const O=this.pushMode===1?D.fields.slice(1):D.fields;this.refId=D.refId,D.meta&&(this.meta={...D.meta});const{displayNameFormat:S}=this.options;if(b(this.schemaFields,O)){const p=O.length;this.fields.forEach((x,A)=>{const R=O[A%p];x.config=R.config??{},x.labels=R.labels}),S&&this.fields.forEach(x=>{const A={[i]:x.name,...x.labels};x.config.displayNameFromDS=(0,s.j)(S,A)})}else{this.packetInfo.schemaChanged=!0;const p=this.pushMode===0;this.fields=O.map(x=>{const A=x.config??{};if(S){const R={[i]:x.name,...x.labels};A.displayNameFromDS=(0,s.j)(S,R)}return{config:A,name:x.name,labels:x.labels,type:x.type??t.PU.other,values:p?this.fields.find(R=>R.name===x.name&&x.type===R.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=O}if(T&&T.values.length&&T.values[0].length){let{values:M,entities:O}=T;if(O&&O.forEach((p,x)=>{p&&(0,m.t)(p,M[x])}),this.pushMode===1){const p=d(M);for(const R of p.keys())this.labels.has(R)||(this.packetInfo.schemaChanged=!0,this.addLabel(R));let x=Array(this.schemaFields.length).fill([]),A=[];this.labels.forEach(R=>{A.push(p.get(R)??x)}),M=(0,r.fj)(A)}if(M.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${M.length} (labels=${this.pushMode===1})`);this.fields=M.map((p,x)=>{let A=`Field ${x}`,R=(0,o.HW)(p[0]);return x===0&&R===t.PU.number&&p[0]>1600016688632&&(R=t.PU.time,A="Time"),{name:A,type:R,config:{},values:[]}})}let S=M;this.packetInfo.length=M[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",S=this.fields.map(p=>p.values),a(S,M,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),S.forEach((p,x)=>{const A=this.fields[x],{state:R}=A;A.values=p,R&&(R.calcs=void 0)}),this.length=S[0].length}return{...this.packetInfo}}addLabel(C){const{displayNameFormat:D}=this.options,T=this.labels.size,M=h(C);if(T===0)this.fields.forEach((O,S)=>{if(S>0&&(O.labels=M,D)){const p={[i]:O.name,...M};O.config.displayNameFromDS=(0,s.j)(D,p)}});else for(let O=1;O<this.schemaFields.length;O++){let S=this.schemaFields[O];const p=S.config??{};if(D){const x={[i]:S.name,...M};p.displayNameFromDS=(0,s.j)(D,x)}this.fields.push({...S,config:p,labels:M,values:Array(this.length).fill(void 0)})}this.labels.add(C)}}function f(P){return{maxLength:P?.maxLength??1e3,maxDelta:P?.maxDelta??1/0,action:P?.action??"append",displayNameFormat:P?.displayNameFormat}}function d(P){let C=new Set(P[0]),D=new Map;C.forEach(T=>{let M=Array(P.length-1).fill(null).map(()=>[]);D.set(T,M)});for(let T=0;T<P[0].length;T++){let M=D.get(P[0][T]);for(let O=1;O<P.length;O++)M[O-1].push(P[O][T])}return D}function E(P,C,D,T){let M;D=D||0,T=T||C.length-1;let O=T<=2147483647;for(;T-D>1;)M=O?D+T>>1:Math.floor((D+T)/2),C[M]<P?D=M:T=M;return P-C[D]<=C[T]-P?D:T}function h(P){if(!P.length)return{};if(P.charAt(0)==="{")return(0,n.Xy)(P);const C={};return P.split(",").forEach(D=>{const[T,M]=D.trim().split("=");C[T]=M}),C}function y(P){const C=P.packetInfo;return C?.action?C:void 0}function a(P,C,D=1/0,T=0,M=1/0){for(let O=0;O<P.length;O++)for(let S=0;S<C[O].length;S++)P[O].push(C[O][S]);return v(P,D,T,M)}function v(P,C=1/0,D=0,T=1/0){const M=g(P,C,D,T);if(M)for(let O=0;O<P.length;O++)P[O].splice(0,M);return M}function g(P,C=1/0,D=0,T=1/0){if(!P[0]?.length)return 0;const M=P[0].length;let O=0;if(M>C&&(O=M-C),T!==1/0&&D>=0){const S=P[D],p=S[O],x=S[M-1];x-p>T&&(O=E(x-T,S,O))}return O}function b(P,C){if(P?.length!==C.length)return!1;for(let D=0;D<P.length;D++){const T=P[D],M=C[D];if(T.name!==M.name||T.type!==M.type)return!1}return!0}},61443:(Y,I,e)=>{"use strict";e.d(I,{Km:()=>o,P4:()=>r,WK:()=>s,g6:()=>n,r4:()=>t,xB:()=>m});const t=(l,i)=>({name:l,columns:i}),n=l=>l.columns,r=(l,i)=>l.columns[i],s=(l,i,c)=>l.columns[i].values[c],o=(l,i,c)=>l.columns.map(u=>u.values[c]),m=(l,i)=>l[i]},21423:(Y,I,e)=>{"use strict";e.d(I,{J3:()=>s,ab:()=>m,bW:()=>r});var t=e(2543),n=e.n(t);function r(l,i,c){if(l===i)return!0;if(l?.fields?.length!==i?.fields?.length||l.name!==i.name)return!1;for(let u=0;u<l.fields.length;u++){const f=l.fields[u],d=i.fields[u];if(f.type!==d.type||f.name!==d.name)return!1;if(c)continue;if(f.labels&&d.labels&&!m(f.labels,d.labels))return!1;const E=f.config,h=d.config;let y=Object.keys(E),a=Object.keys(h);if(y.length!==a.length)return!1;for(const v of y){if(!(v in h))return!1;if(v!=="interval"&&!(0,t.isEqual)(E[v],h[v]))return!1}}return!0}function s(l,i,c){if(l===i)return!0;if(l?.length!==i?.length)return!1;for(let u=0;u<l.length;u++)if(!c(l[u],i[u]))return!1;return!0}const o=(l,i)=>l===i;function m(l,i,c=o){if(l===i)return!0;const u=Object.keys(l),f=Object.keys(i);if(u.length!==f.length)return!1;for(let d of u)if(!c(l[d],i[d]))return!1;return!0}},48120:(Y,I,e)=>{"use strict";e.d(I,{Bt:()=>s.Bt,By:()=>s.By,EI:()=>s.EI,EL:()=>l.EL,ES:()=>s.ES,HW:()=>s.HW,Ij:()=>m.I,J3:()=>i.J3,KR:()=>s.KR,Kh:()=>u.Kh,Kl:()=>s.Kl,Km:()=>o.Km,LI:()=>s.LI,Lc:()=>n.L,Ls:()=>u.Ls,N$:()=>s.N$,Nw:()=>l.Nw,P4:()=>o.P4,Rh:()=>t.R,S1:()=>c.S1,Vc:()=>s.Vc,WK:()=>o.WK,XQ:()=>s.XQ,Yn:()=>s.Yn,aH:()=>c.aH,ab:()=>i.ab,bW:()=>i.bW,by:()=>s.by,ci:()=>s.ci,dF:()=>s.dF,fG:()=>m.f,g6:()=>o.g6,hF:()=>c.hF,jq:()=>c.jq,k2:()=>r.k,k9:()=>u.k9,oE:()=>s.oE,or:()=>l.or,pH:()=>s.pH,pk:()=>r.p,q7:()=>s.q7,r4:()=>o.r4,t:()=>l.t,t9:()=>c.t9,tP:()=>c.tP,uY:()=>c.uY,w3:()=>s.w3,xB:()=>o.xB});var t=e(78368),n=e(85404),r=e(37471),s=e(14236),o=e(61443),m=e(33948),l=e(89667),i=e(21423),c=e(19845),u=e(9631)},14236:(Y,I,e)=>{"use strict";e.d(I,{Bt:()=>U,By:()=>A,EI:()=>K,ES:()=>O,HW:()=>v,KR:()=>R,Kl:()=>x,LI:()=>D,N$:()=>F,Vc:()=>T,XQ:()=>b,Yn:()=>p,by:()=>y,ci:()=>C,dF:()=>g,oE:()=>a,pH:()=>P,q7:()=>S,w3:()=>M});var t=e(2543),n=e.n(t),r=e(47232),s=e(48241),o=e(28240),m=e(11261),l=e(39070),i=e(33948),c=e(89667);function u(w){const L=w.columns.map(V=>{const{text:N,type:z,...J}=V,G=[];return{name:N?.length?N:V,config:J||{},values:G,type:z&&Object.values(m.PU).includes(z)?z:m.PU.other}});if(!(0,t.isArray)(w.rows))throw new Error(`Expected table rows to be array, got ${typeof w.rows}.`);for(const V of w.rows)for(let N=0;N<L.length;N++)L[N].values.push(V[N]);for(const V of L)if(V.type===m.PU.other){const N=g(V);N&&(V.type=N)}return{fields:L,refId:w.refId,meta:w.meta,name:w.name,length:w.rows.length}}function f(w){const L=[],V=[],N=w.datapoints||w.points;for(const J of N)V.push(J[0]),L.push(J[1]);const z=[{name:m.LE,type:m.PU.time,config:{},values:L},{name:m.Bc,type:m.PU.number,config:{unit:w.unit},values:V,labels:w.tags}];return w.title&&(z[1].config.displayNameFromDS=w.title),{name:w.target||w.name,refId:w.refId,meta:w.meta,fields:z,length:V.length}}function d(w){const L=[],V=[];for(let N=0;N<w.data.length;N++){const z=w.data[N];L.push(z[1]),V.push(z[0])}return{name:w.label,fields:[{name:w.label||m.Bc,type:m.PU.number,config:{},values:L},{name:m.LE,type:m.PU.time,config:{unit:"dateTimeAsIso"},values:V}],length:L.length}}function E(w){const L=[{name:w.target,type:m.PU.other,labels:w.tags,config:{unit:w.unit,filterable:w.filterable},values:[]}];for(const V of w.datapoints)L[0].values.push(V);return{name:w.target,refId:w.target,meta:{json:!0},fields:L,length:w.datapoints.length}}const h=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function y(w,L){return w&&(w=w.toLowerCase(),w==="date"||w==="time")?m.PU.time:v(L)}function a(w){return w instanceof Date||(0,r.Ar)(w)?m.PU.time:(0,t.isNumber)(w)?m.PU.number:(0,t.isString)(w)?m.PU.string:(0,t.isBoolean)(w)?m.PU.boolean:m.PU.other}function v(w){return w instanceof Date||(0,r.Ar)(w)?m.PU.time:(0,t.isNumber)(w)?m.PU.number:(0,t.isString)(w)?h.test(w)?m.PU.number:w==="true"||w==="TRUE"||w==="True"||w==="false"||w==="FALSE"||w==="False"?m.PU.boolean:m.PU.string:(0,t.isBoolean)(w)?m.PU.boolean:m.PU.other}function g(w){if(w.name){const L=w.name.toLowerCase();if(L==="date"||L==="time")return m.PU.time}for(let L=0;L<w.values.length;L++){const V=w.values[L];if(V!=null)return v(V)}}const b=(w,L=!1)=>{for(const V of w.fields)if(!V.type||V.type===m.PU.other||L)return{...w,fields:w.fields.map(N=>N.type&&N.type!==m.PU.other&&!L?N:{...N,type:g(N)||m.PU.other})};return w},P=w=>!!(w&&w.hasOwnProperty("columns")),C=w=>!!(w&&w.hasOwnProperty("fields")),D=w=>!!(C(w)&&w.hasOwnProperty("value"));function T(w){if("fields"in w)return"length"in w&&w.fields[0]?.values?.get?w:K(w);if(w.hasOwnProperty("type")&&w.type==="docs")return E(w);if(w.hasOwnProperty("datapoints")||w.hasOwnProperty("points"))return f(w);if(w.hasOwnProperty("data"))return w.hasOwnProperty("schema")?(0,c.or)(w):d(w);if(w.hasOwnProperty("columns"))return u(w);if(Array.isArray(w))return(0,i.I)(w);throw console.warn("Can not convert",w),new Error("Unsupported data format")}const M=w=>{const{fields:L}=w,V=w.length,N=[];if(L.length===2){const{timeField:z,timeIndex:J}=R(w);if(z){const H=L[J===0?1:0],q=L[J];for(let le=0;le<V;le++)N.push([H.values[le],q.values[le]]);return{alias:w.name,target:(0,o.Ct)(H,w),datapoints:N,unit:L[0].config?L[0].config.unit:void 0,refId:w.refId,meta:w.meta}}}for(let z=0;z<V;z++){const J=[];for(let G=0;G<L.length;G++)J.push(L[G].values[z]);N.push(J)}return w.meta&&w.meta.json?{alias:L[0].name||w.name,target:L[0].name||w.name,datapoints:L[0].values,filterable:L[0].config?L[0].config.filterable:void 0,type:"docs"}:{columns:L.map(z=>{const{name:J,config:G}=z;if(G){const{...H}=G;return H.text=J,H}return{text:J}}),type:"table",refId:w.refId,meta:w.meta,rows:N}};function O(w,L,V=!1){const N=w.fields[L];if(!N)return w;const z=[];for(let G=0;G<w.length;G++)z.push(G);const J=(0,s.i)(N,V);return z.sort(J),{...w,fields:w.fields.map(G=>{const H={...G,values:G.values.map((le,me)=>G.values[z[me]])},{nanos:q}=G;return q!==void 0&&(H.nanos=q.map((le,me)=>q[z[me]])),H})}}function S(w){return{...w,fields:w.fields.map(L=>{const V=[...L.values];V.reverse();const N={...L,values:V},{nanos:z}=L;if(z!==void 0){const J=[...z];J.reverse(),N.nanos=J}return N})}}function p(w,L){const V=[];for(const N of w.fields)V.push(N.values[L]);return V}function x(w){return A(w)}function A(w,L){return{fields:(L?w.fields.filter(L):w.fields).map(z=>{let J=z.values;return{name:z.name,type:z.type,config:z.config,values:J,labels:z.labels}}),refId:w.refId,meta:w.meta,name:w.name}}const R=w=>{for(let L=0;L<w.fields.length;L++)if(w.fields[L].type===m.PU.time)return{timeField:w.fields[L],timeIndex:L};return{}};function B(w){const L=b(T(w));if(L.fields&&L.fields.length)for(const V of L.fields)V.state=null;return L}function U(w){return!w||!(0,t.isArray)(w)?[]:w.map(L=>B(L))}function F(w,L){const{series:V,annotations:N}=w;if(w.state===l.Gu.Loading&&V.length===0)return L||(L=w),{...L,state:l.Gu.Loading,request:w.request};const z=performance.now(),J=V.map(q=>B(q)),G=U(N),H=performance.now();return{...w,series:J,annotations:G,timings:{dataProcessingTime:H-z}}}function K(w){let L=0;const V=w.fields.map((N,z)=>{const{state:J,...G}=N;return G.name||(G.name=`Field ${z+1}`),G.config||(G.config={}),G.values?G.values.length>L&&(L=G.values.length):G.values=new Array(L),G.type||(G.type=g(G)??m.PU.other),G});return{...w,fields:V,length:L}}},19845:(Y,I,e)=>{"use strict";e.d(I,{S1:()=>i,aH:()=>s,hF:()=>m,jq:()=>o,t9:()=>c,tP:()=>l,uY:()=>u});var t=e(11261),n=e(14236);const r=100;function s(f){if(f.fields.length<2)return!1;const d=f.fields.find(h=>h.type===t.PU.number);let E=!1;for(const h of f.fields)if(m(h)){E=!0;break}return E&&d!==void 0}function o(f){return!f.find(d=>!s(d))}function m(f){if(f.type!==t.PU.time)return!1;let d=null,E=f.values.length>r?r:f.values.length;for(let h=0;h<E;h++){const y=f.values[h];if(d===null||y!==null&&y>d)d=y;else return!1}return!0}function l(f){for(let d=0;d<f.length;d++){const E=(0,n.KR)(f[d]);if(E.timeField!==void 0&&E.timeIndex!==void 0)return!0}return!1}function i(f){return f.fields.some(d=>d.type===t.PU.time)}function c(f,d){if(f.meta?.uniqueRowIdFields!==void 0)return f.meta.uniqueRowIdFields.map(E=>f.fields[E].values[d]).join("-")}function u(f,d){if(d instanceof Array)for(let E=0;E<d.length;E++)f.fields[E].values.push(d[E]);else for(const E of f.fields)E.values.push(d[E.name]);try{f.length++}catch{}}},1933:(Y,I,e)=>{"use strict";e.d(I,{G:()=>o,O:()=>m});var t=e(2543),n=e.n(t),r=e(43127);let s=()=>r.lE;const o=l=>{s=l??s},m=l=>l?.timeZone&&!(0,t.isEmpty)(l.timeZone)?l.timeZone:s()??r.lE},85858:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{isMathString:()=>o,isValid:()=>l,parse:()=>m,parseDateMath:()=>i,roundToFiscal:()=>c});var t=e(2543),n=e.n(t),r=e(47232);const s=["y","M","w","d","h","m","s","Q"];function o(u){return u?!!(typeof u=="string"&&(u.substring(0,3)==="now"||u.includes("||"))):!1}function m(u,f,d,E){if(u){if(typeof u!="string")return(0,r.Ar)(u)?u:(0,t.isDate)(u)?(0,r.KQ)(u):void 0;{let h,y="",a,v;return u.substring(0,3)==="now"?(h=(0,r.oZ)(d),y=u.substring(3)):(a=u.indexOf("||"),a===-1?(v=u,y=""):(v=u.substring(0,a),y=u.substring(a+2)),h=(0,r.KQ)(v,r.mt)),y.length?i(y,h,f,E):h}}}function l(u){const f=m(u);return f&&(0,r.Ar)(f)?f.isValid():!1}function i(u,f,d,E=0){const h=u.replace(/\s/g,""),y=(0,r.KQ)(f);let a=0;const v=h.length;for(;a<v;){const g=h.charAt(a++);let b,P,C,D=!1;if(g==="/")b=0;else if(g==="+")b=1;else if(g==="-")b=2;else return;if(isNaN(parseInt(h.charAt(a),10)))P=1;else if(h.length===2)P=parseInt(h.charAt(a),10);else{const M=a;for(;!isNaN(parseInt(h.charAt(a),10));)if(a++,a>10)return;P=parseInt(h.substring(M,a),10)}if(b===0&&P!==1)return;C=h.charAt(a++),C==="f"&&(C=h.charAt(a++),D=!0);const T=C;if((0,t.includes)(s,T))b===0?D?c(E,y,T,d):d?y.endOf(T):y.startOf(T):b===1?y.add(P,T):b===2&&y.subtract(P,T);else return}return y}function c(u,f,d,E){switch(d){case"y":return E?c(u,f,d,!1).add(11,"M").endOf("M"):f.subtract((f.month()-u+12)%12,"M").startOf("M"),f;case"Q":return E?c(u,f,d,!1).add(2,"M").endOf("M"):f.subtract((f.month()-u+12)%3,"M").startOf("M"),f;default:return}}},70416:(Y,I,e)=>{"use strict";e.d(I,{E9:()=>m,Ri:()=>l,V3:()=>d,WT:()=>i,dU:()=>o,di:()=>u,pp:()=>f,vd:()=>c});var t=e(89369),n=e(68284),r=e(25579);const s={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function o(h,y=!0){if((0,t.d)(h.start,h.end))return"";const a=(0,n.F)(h);return Object.entries(a).reduce((v,[g,b])=>b&&b!==0&&!(g==="seconds"&&!y&&v)?v+`${v!==""?" ":""}${b}${s[g][0]}`:v,"")}function m(h){return h.split(" ").reduce((y,a)=>{const v=a.match(/(\d+)(.+)/),g=v?.[1],b=v?.[2];if(!(g&&b))return y;const P=Object.entries(s).find(([D,T])=>T?.includes(v[2])),C=parseInt(g,10);return P?{...y,[P[0]]:C}:y},{})}function l(h,y){return(0,r.W)(h,y)}function i(h){const y=new Date;return l(y,h).getTime()-y.getTime()}function c(h){return!isNaN(Date.parse(h))}function u(h){for(const y of h.trim().split(" ")){const a=y.match(/(\d+)(.+)/);if(a===null||a.length!==3||!Object.entries(s).find(([g,b])=>b?.includes(a[2]))?.[0])return!1}return!0}function f(h){return E(h,["h","m","s","ms","us","\xB5s","ns"])}function d(h){return E(h,["y","M","w","d","h","m","s","ms","us","\xB5s","ns"])}function E(h,y){for(const a of h.trim().split(" ")){const v=a.match(/([0-9]*[.]?[0-9]+)(.+)/);if(v===null||v.length!==3||!y.includes(v[2]))return!1}return!0}},42994:(Y,I,e)=>{"use strict";e.d(I,{JE:()=>r,Od:()=>s,WC:()=>o});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class r{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(i){this.fullDate=i.fullDate,this.interval=i.interval,i.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(i){return`time:${i?this.fullDateMS:this.fullDate}`}}function s(l,i,c){if(m())return c??t;!i&&navigator&&(i=[...navigator.languages]);const u=new Intl.DateTimeFormat(i||void 0,l),f=u.formatToParts(new Date),E={year:"YYYY",month:"MM",day:"DD",hour:u.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return f.map(h=>E[h.type]||h.value).join("")}const o=new r,m=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},72724:(Y,I,e)=>{"use strict";e.d(I,{LE:()=>o,M7:()=>m,_Q:()=>i,fq:()=>l,jw:()=>c});var t=e(84743),n=e.n(t),r=e(1933),s=e(42994);const o=(d,E)=>f(d,(0,r.O)(E)).format(u(E)),m=(d,E)=>f(d,(0,r.O)(E)).format(),l=(d,E)=>f(d,(0,r.O)(E)).fromNow(),i=(d,E)=>f(d,(0,r.O)(E)).format(`${s.WC.fullDate} z`),c=(d,E)=>f(d,(0,r.O)(E)).format("z"),u=d=>d?.defaultWithMS?d?.format??s.WC.fullDateMS:d?.format??s.WC.fullDate,f=(d,E)=>{const h=d,y=n().tz.zone(E);if(y&&y.name)return n().utc(h).tz(y.name);switch(E){case"utc":return n().utc(h);default:return n().utc(h).local()}}},38698:(Y,I,e)=>{"use strict";e.d(I,{$D:()=>r.$D,AN:()=>r.AN,Ah:()=>r.Ah,Ar:()=>r.Ar,E9:()=>i.E9,GZ:()=>c.G,HD:()=>s.HD,IM:()=>i.pp,Ii:()=>n,JE:()=>o.JE,JK:()=>r.JK,KQ:()=>r.KQ,LE:()=>m.LE,M7:()=>m.M7,O:()=>c.O,Od:()=>o.Od,P3:()=>s.P3,QZ:()=>s.QZ,Ri:()=>i.Ri,U3:()=>s.U3,V3:()=>i.V3,WC:()=>o.WC,WT:()=>i.WT,XN:()=>r.XN,_Q:()=>m._Q,bQ:()=>l.b,dU:()=>i.dU,di:()=>i.di,fq:()=>m.fq,g$:()=>s.g$,jw:()=>m.jw,le:()=>s.le,mt:()=>r.mt,ns:()=>t,oZ:()=>r.oZ,pp:()=>r.pp,u8:()=>r.u8,vd:()=>i.vd,xQ:()=>r.xQ,xS:()=>r.xS,yT:()=>r.yT});var t=e(85858),n=e(65879),r=e(47232),s=e(91410),o=e(42994),m=e(72724),l=e(53531),i=e(70416),c=e(1933)},47232:(Y,I,e)=>{"use strict";e.d(I,{$D:()=>a,AN:()=>d,Ah:()=>u,Ar:()=>i,JK:()=>o,KQ:()=>f,XN:()=>m,mt:()=>r,oZ:()=>E,pp:()=>y,u8:()=>l,xQ:()=>h,xS:()=>s,yT:()=>c});var t=e(95093),n=e.n(t);const r=n().ISO_8601,s=v=>{n().locale(v)},o=()=>n().locale(),m=()=>n().localeData(),l=v=>v===null||typeof v=="string"||typeof v=="number"||v instanceof Date||Array.isArray(v)&&v.every(g=>typeof g=="string"||typeof g=="number")||i(v),i=v=>n().isMoment(v),c=(v,g)=>n().utc(v,g),u=(v,g)=>n().duration(v,g),f=(v,g)=>n()(v,g),d=v=>f(v),E=(v,g,b)=>{if(v&&v!=="browser"){let P;if(typeof g=="string"&&b?P=n().tz(g,b,v):P=n().tz(g,v),i(P))return P}return f(g,b)},h=v=>n().weekdays().findIndex(g=>g.toLowerCase()===v.toLowerCase()),y=v=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(g=>g.toLowerCase()===v.toLowerCase()),a=v=>{const g="-weekStart",b=o().replace(g,""),P=v?y(v):-1;P!==-1?n().locale(b+g,{parentLocale:b,week:{dow:P}}):s(b)}},53531:(Y,I,e)=>{"use strict";e.d(I,{b:()=>c});var t=e(2543),n=e.n(t),r=e(84743),s=e.n(r),o=e(1933),m=e(85858),l=e(42994),i=e(47232);const c=(d,E)=>(0,i.Ar)(d)?d:typeof d=="string"?u(d,E):f(d,E),u=(d,E)=>{if(d.indexOf("now")!==-1)return(0,m.isValid)(d)&&(0,m.parse)(d,E?.roundUp,E?.timeZone,E?.fiscalYearStartMonth)||s()();const h=(0,o.O)(E),y=s().tz.zone(h),a=E?.format??l.WC.fullDate;if(y&&y.name)return s().tz(d,a,y.name);switch((0,t.lowerCase)(h)){case"utc":return s().utc(d,a);default:return s()(d,a)}},f=(d,E)=>{const h=d,y=(0,o.O)(E),a=s().tz.zone(y);if(a&&a.name)return s().tz(h,a.name);switch((0,t.lowerCase)(y)){case"utc":return s().utc(h);default:return s()(h)}}},65879:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{calculateInterval:()=>C,convertRawToRange:()=>y,describeInterval:()=>M,describeTextRange:()=>f,describeTimeRange:()=>d,describeTimeRangeAbbreviation:()=>h,intervalToMs:()=>S,intervalToSeconds:()=>O,isFiscal:()=>v,isRelativeTime:()=>a,isRelativeTimeRange:()=>g,isValidTimeSpan:()=>E,msRangeToTimeString:()=>P,relativeToTimeRange:()=>A,roundInterval:()=>p,secondsToHms:()=>b,timeRangeToRelative:()=>x});var t=e(2543),n=e.n(t),r=e(85858),s=e(72724),o=e(47232),m=e(53531);const l={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},i=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],c=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],u={};(0,t.each)(i,R=>{u[R.from+" to "+R.to]=R}),(0,t.each)(c,R=>{u[R.from+" to "+R.to]=R});function f(R){const B=R.indexOf("+")!==0;R.indexOf("now")===-1&&(R=(B?"now-":"now")+R);let U=u[R+" to now"];if(U)return U;B?U={from:R,to:"now",display:""}:U={from:"now",to:R,display:""};const F=/^now([-+])(\d+)(\w)/.exec(R);if(F){const K=F[3],w=parseInt(F[2],10),L=l[K];L&&(U.display=B?"Last ":"Next ",U.display+=w+" "+L.display,U.section=L.section,w>1&&(U.display+="s"))}else U.display=U.from+" to "+U.to,U.invalid=!0;return U}function d(R,B){const U=u[R.from.toString()+" to "+R.to.toString()];if(U)return U.display;const F={timeZone:B};if((0,o.Ar)(R.from)&&(0,o.Ar)(R.to))return(0,s.LE)(R.from,F)+" to "+(0,s.LE)(R.to,F);if((0,o.Ar)(R.from)){const K=r.parse(R.to,!0,"utc");return K?(0,s.LE)(R.from,F)+" to "+(0,s.fq)(K,F):""}if((0,o.Ar)(R.to)){const K=r.parse(R.from,!1,"utc");return K?(0,s.fq)(K,F)+" to "+(0,s.LE)(R.to,F):""}return R.to.toString()==="now"?f(R.from).display:R.from.toString()+" to "+R.to.toString()}const E=R=>R.indexOf("$")===0||R.indexOf("+$")===0?!0:f(R).invalid!==!0,h=(R,B)=>{if((0,o.Ar)(R.from))return(0,s.jw)(R.from,{timeZone:B});const U=r.parse(R.from,!0);return U?(0,s.jw)(U,{timeZone:B}):""},y=(R,B,U,F)=>{const K=(0,m.b)(R.from,{roundUp:!1,timeZone:B,fiscalYearStartMonth:U,format:F}),w=(0,m.b)(R.to,{roundUp:!0,timeZone:B,fiscalYearStartMonth:U,format:F});return r.isMathString(R.from)||r.isMathString(R.to)?{from:K,to:w,raw:R}:{from:K,to:w,raw:{from:K,to:w}}};function a(R){return typeof R=="string"?R.indexOf("now")>=0:!1}function v(R){return typeof R.raw.from=="string"&&R.raw.from.indexOf("f")>0?!0:typeof R.raw.to=="string"&&R.raw.to.indexOf("f")>0}function g(R){return a(R.from)||a(R.to)}function b(R){const B=Math.floor(R/31536e3);if(B)return B+"y";const U=Math.floor(R%31536e3/86400);if(U)return U+"d";const F=Math.floor(R%31536e3%86400/3600);if(F)return F+"h";const K=Math.floor(R%31536e3%86400%3600/60);if(K)return K+"m";const w=Math.floor(R%31536e3%86400%3600%60);if(w)return w+"s";const L=Math.floor(R*1e3);return L?L+"ms":"less than a millisecond"}function P(R){const B=Number((R/1e3).toFixed()),U=Math.floor(B/60/60),F=Math.floor(B/60)-U*60,K=Number((B%60).toFixed());let w=U?U+"h":"",L=F?F+"min":"",V=K?K+"sec":"";return w&&L?w=w+" ":w=w,(L||w)&&V?L=L+" ":L=L,w+L+V||"less than 1sec"}function C(R,B,U){let F=1;U&&(F=S(U));let K=p((R.to.valueOf()-R.from.valueOf())/B);return F>K&&(K=F),{intervalMs:K,interval:b(K/1e3)}}const D=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,T={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function M(R){if(Number(R))return{sec:T.s,type:"s",count:parseInt(R,10)};const B=R.match(D);if(!B||!(0,t.has)(T,B[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(T).join(", ")}"`);return{sec:T[B[2]],type:B[2],count:parseInt(B[1],10)}}function O(R){const B=M(R);return B.sec*B.count}function S(R){const B=M(R);return B.sec*1e3*B.count}function p(R){switch(!0){case R<10:return 1;case R<15:return 10;case R<35:return 20;case R<75:return 50;case R<150:return 100;case R<350:return 200;case R<750:return 500;case R<1500:return 1e3;case R<3500:return 2e3;case R<7500:return 5e3;case R<12500:return 1e4;case R<17500:return 15e3;case R<25e3:return 2e4;case R<45e3:return 3e4;case R<9e4:return 6e4;case R<21e4:return 12e4;case R<45e4:return 3e5;case R<75e4:return 6e5;case R<105e4:return 9e5;case R<15e5:return 12e5;case R<27e5:return 18e5;case R<54e5:return 36e5;case R<9e6:return 72e5;case R<162e5:return 108e5;case R<324e5:return 216e5;case R<864e5:return 432e5;case R<6048e5:return 864e5;case R<18144e5:return 6048e5;case R<36288e5:return 2592e6;default:return 31536e6}}function x(R,B=(0,o.KQ)()){const U=B.unix()-R.from.unix(),F=B.unix()-R.to.unix();return{from:U,to:F}}function A(R,B=(0,o.KQ)()){const U=(0,o.KQ)(B).subtract(R.from,"s"),F=R.to===0?(0,o.KQ)(B):(0,o.KQ)(B).subtract(R.to,"s");return{from:U,to:F,raw:{from:U,to:F}}}},91410:(Y,I,e)=>{"use strict";e.d(I,{HD:()=>i,P3:()=>u,QZ:()=>c,U3:()=>f,g$:()=>m,le:()=>l});var t=e(2543),n=e.n(t),r=e(84743),s=e.n(r),o=e(1933),m=(v=>(v.default="",v.localBrowserTime="browser",v.utc="utc",v))(m||{});const l=v=>{switch((0,o.O)({timeZone:v})){case"browser":return"Local browser time";case"utc":return"UTC";default:return v}},i=v=>s().tz.zone(v),c=(v,g)=>{const b=d(v,g);return b||h(v,g)},u=(0,t.memoize)((v=!1)=>{const g=[];return v===!0?g.push("","browser","utc"):v&&g.push(...v),s().tz.names().reduce((b,P)=>{const C=a[P];return!Array.isArray(C)||C.length===0||b.push(P),b},g)}),f=(0,t.memoize)((v=!1)=>{const b=u(v).reduce((P,C)=>{const D=C.indexOf("/");if(D===-1){const M="";return P[M]=P[M]??[],P[M].push(C),P}const T=C.slice(0,D);return P[T]=P[T]??[],P[T].push(C),P},{});return Object.keys(b).map(P=>({name:P,zones:b[P]}))}),d=(v,g)=>{switch(v){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:v,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const b=(0,o.O)(),C=b==="browser"||b==="utc"?d(b,g):h(b,g);return{countries:a[b]??[],abbreviation:"",offsetInMins:0,...C,ianaName:C?.ianaName??"",name:"Default",zone:v}}case"browser":{const b=s().tz.guess(!0),P=h(b,g);return{countries:a[b]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...P,name:"Browser Time",ianaName:P?.ianaName??"",zone:v}}default:return}},E=v=>/^(\+|\-).+/.test(v)?"":v,h=(v,g)=>{const b=s().tz.zone(v);if(b)return{name:v,ianaName:b.name,zone:v,countries:a[v]??[],abbreviation:E(b.abbr(g)),offsetInMins:b.utcOffset(g)}},y={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},a=s().tz.countries().reduce((v,g)=>s().tz.zonesForCountry(g).reduce((P,C)=>{P[C]||(P[C]=[]);const D=y[g];return D&&P[C].push({code:g,name:D}),P},v),{})},18226:(Y,I,e)=>{"use strict";e.d(I,{o:()=>s});var t=e(74486),n=e(88483),r=e(16126);class s{constructor(){this.subscribers=new Map,this.emitter=new t.A}publish(l){this.emitter.emit(l.type,l)}subscribe(l,i){return this.getStream(l).subscribe({next:i})}getStream(l){return new n.c(i=>{const c=u=>{i.next(u)};return this.emitter.on(l.type,c),this.subscribers.set(c,i),()=>{this.emitter.off(l.type,c),this.subscribers.delete(c)}})}newScopedBus(l,i){return new o([l],this,i)}emit(l,i){typeof l=="string"?this.emitter.emit(l,{type:l,payload:i}):this.emitter.emit(l.name,{type:l.name,payload:i})}on(l,i,c){if(i.wrapper=u=>{i(u.payload)},typeof l=="string"?this.emitter.on(l,i.wrapper):this.emitter.on(l.name,i.wrapper),c){const u=c.$on("$destroy",()=>{this.off(l,i),u()})}}off(l,i){if(typeof l=="string"){this.emitter.off(l,i.wrapper);return}this.emitter.off(l.name,i.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[l,i]of this.subscribers)i.complete(),this.subscribers.delete(l)}}class o{constructor(l,i,c){this.path=l,this.eventBus=i,this.filterConfig=c??{onlyLocal:!1}}publish(l){l.origin||(l.origin=this),this.eventBus.publish(l)}filter(l){return this.filterConfig.onlyLocal?l.origin===this:!0}getStream(l){return this.eventBus.getStream(l).pipe((0,r.p)(this.filter.bind(this)))}subscribe(l,i){return this.getStream(l).subscribe({next:i})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(l,i){return new o([...this.path,l],this,i)}}},69129:(Y,I,e)=>{"use strict";e.d(I,{LL:()=>c,LO:()=>s,NI:()=>i,We:()=>o,b_:()=>n,gc:()=>m,ql:()=>r,wE:()=>l});var t=e(65463);class n extends t.x{static{this.type="data-hover"}}class r extends t.a{static{this.type="data-hover-clear"}}class s extends t.x{static{this.type="data-select"}}class o extends t.x{static{this.type="annotation-event"}}class m extends t.x{static{this.type="dashboard-loaded"}}class l extends t.a{static{this.type="datasource-updated-successfully"}}class i extends t.a{static{this.type="datasource-test-succeeded"}}class c extends t.a{static{this.type="datasource-test-failed"}}},89550:(Y,I,e)=>{"use strict";e.d(I,{R:()=>n});const t=new Set;function n(r){if(t.has(r))throw new Error(`There is already an event defined with type '${r}'`);return t.add(r),{name:r}}},56302:(Y,I,e)=>{"use strict";e.d(I,{LL:()=>s.LL,LO:()=>s.LO,NI:()=>s.NI,Rb:()=>t.R,We:()=>s.We,aV:()=>n.a,b_:()=>s.b_,gc:()=>s.gc,or:()=>r.o,ql:()=>s.ql,wE:()=>s.wE,x$:()=>n.x});var t=e(89550),n=e(65463),r=e(18226),s=e(69129)},65463:(Y,I,e)=>{"use strict";e.d(I,{a:()=>t,x:()=>n});class t{constructor(){this.type=this.__proto__.constructor.type}setTags(s){return this.tags=new Set(s),this}}class n extends t{constructor(s){super(),this.payload=s}}},66670:(Y,I,e)=>{"use strict";e.d(I,{K:()=>n});var t=e(83077);class n extends t.O{}},57875:(Y,I,e)=>{"use strict";e.d(I,{H:()=>h,J:()=>d});var t=e(2543),n=e.n(t),r=e(14236),s=e(53531),o=e(47232),m=e(11261),l=e(28802),i=e(62398),c=e(83195),u=e(58563);const f={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function d(a){if(!a||(0,t.isEmpty)(a)||!a.field)return E;const v=a.field,g=v.config??{},{palette:b}=a.theme.visualization;let P=g.unit,C=P&&(f[P]||P.startsWith("time:")),D=!1;if(v.type===m.PU.time&&!C){if(P="dateTimeAsSystem",C=!0,v.values&&v.values.length>1){let R=v.values[0],B=v.values[v.values.length-1];typeof R=="string"?(R=(0,s.b)(R).unix(),B=(0,s.b)(B).unix()):(R/=1e3,B/=1e3),D=Math.abs(B-R)<60}}else v.type===m.PU.boolean?(0,c.j9)(P)||(P="bool"):!P&&v.type===m.PU.string&&(P="string");const T=P?.startsWith("currency"),M=(0,c.j9)(P),O=v.type===m.PU.number,p=!C&&!T&&!M&&!(P==="locale")&&O&&g.decimals==null,x=(0,c.j_)(P||"none"),A=(0,u.jc)(v,a.theme);return(R,B)=>{const{mappings:U}=g,F=P==="string";C&&typeof R=="string"&&(R=(0,o.yT)(R).valueOf());let K=F?NaN:(0,l.t)(R),w,L,V,N,z,J;if(U&&U.length>0){const H=(0,i.Zz)(U,R);H&&(H.text!=null&&(w=H.text),H.color!=null&&(N=a.theme.visualization.getColorByName(H.color)),H.icon!=null&&(z=H.icon))}else if(v.type===m.PU.enum){if(R==null)return{text:"",numeric:NaN};const H=+R;if(g&&g.type&&g.type.enum){const{text:q,color:le}=g.type.enum;if(w=q?q[H]:`${R}`,N=le?le[H]:void 0,N==null){const me=b[H%b.length];N=a.theme.visualization.getColorByName(me)}}}if(!Number.isNaN(K)){if(w==null&&!(0,t.isBoolean)(R)){let H;p&&B!=null?(H=x(K,B,null,a.timeZone,D),H.text=+H.text+""):H=x(K,g.decimals,null,a.timeZone,D),w=H.text,V=H.suffix,L=H.prefix}if(N==null){const H=A(K);N=H.color,J=H.percent}}if(w==null&&(0,t.isArray)(R)&&(w=(0,t.join)(R,", ")),w==null&&(w=(0,t.toString)(R),w||(g.noValue?w=g.noValue:w="")),!N){const H=A(-1/0);N=H.color,J=H.percent}const G={text:w,numeric:K,prefix:L,suffix:V,color:N};return z!=null&&(G.icon=z),J!=null&&(G.percent=J),G}}function E(a){return{text:(0,t.toString)(a),numeric:(0,l.t)(a)}}function h(){return a=>({text:(0,r.oE)(a)==="other"?`${JSON.stringify(a,y())}`:`${a}`,numeric:null})}const y=()=>{const a=new WeakSet;return(v,g)=>{if(typeof g=="object"&&g!==null){if(a.has(g))return;a.add(g)}return g}}},8066:(Y,I,e)=>{"use strict";e.d(I,{Hs:()=>h,Qi:()=>E,lz:()=>y,uf:()=>f});var t=e(21197),n=e(55459),r=e.n(n),s=e(84140),o=e(23596),m=e(75059),l=e(24293),i=e(83077),c=e(58563),u=e(47737);const f=new i.O(()=>[{id:l.Y.Fixed,name:"Single color",description:"Set a specific color",getCalculator:a},{id:l.Y.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:v},{id:l.Y.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(g,b)=>(P,C,D)=>{const T=D??u.QS;return b.visualization.getColorByName(T.color)}},new d({id:l.Y.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:g=>g.visualization.palette}),new d({id:l.Y.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:g=>g.visualization.palette.filter(b=>o.getContrastRatio(g.visualization.getColorByName(b),g.colors.background.primary)>=g.colors.contrastThreshold)}),new d({id:l.Y.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["green","yellow","red"]}),new d({id:l.Y.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:g=>["red","yellow","green"]}),new d({id:l.Y.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["dark-blue","super-light-yellow","dark-red"]}),new d({id:l.Y.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["super-light-yellow","dark-red"]}),new d({id:l.Y.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:g=>["blue","purple"]}),new d({id:l.Y.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:g=>["super-light-yellow","dark-blue"]}),new d({id:l.Y.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-blue"]}),new d({id:l.Y.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-red"]}),new d({id:l.Y.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-green"]}),new d({id:l.Y.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-purple"]})]);class d{constructor(b){this.id=b.id,this.name=b.name,this.description=b.description,this.getNamedColors=b.getColors,this.isContinuous=b.isContinuous,this.isByValue=b.isByValue,this.useSeriesName=b.useSeriesName}getColors(b){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===b?this.colorCache:(this.colorCache=this.getNamedColors(b).map(b.visualization.getColorByName),this.colorCacheTheme=b,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.Ik)(this.colorCache)),this.interpolator}getCalculator(b,P){const C=this.getColors(P);return this.isByValue?this.isContinuous?(D,T,M)=>this.getInterpolator()(T):(D,T,M)=>C[T*(C.length-1)]:this.useSeriesName?(D,T,M)=>C[Math.abs(r()(b.name))%C.length]:(D,T,M)=>{const O=b.state?.seriesIndex??0;return C[O%C.length]}}}function E(g){return f.get(g.config.color?.mode??l.Y.Thresholds)}function h(g){return f.get(g??l.Y.Thresholds)}function y(g,b){const P=E(g);if(!P.isByValue)return{color:P.getCalculator(g,b)(0,0),threshold:u.QS,percent:1};const C=(0,c.jc)(g,b),D=g.config.color?.seriesBy??"last",M=(0,m.Nw)({field:g,reducers:[D]})[D]??0;return C(M)}function a(g,b){return()=>b.visualization.getColorByName(g.config.color?.fixedColor??l.F)}function v(g,b){return()=>{const P=b.visualization.getColorByName(g.config.color?.fixedColor??l.F),C=[P],D=6,T=10,M=35,O=35;for(let p=1;p<D;p++)C.push((0,s.A)(P).spin(p/D*T).brighten(p/D*M).toHexString()),C.push((0,s.A)(P).spin(-(p/D)*T).darken(p/D*O).toHexString());const S=g.state?.seriesIndex??0;return C[S%C.length]}}},56323:(Y,I,e)=>{"use strict";e.d(I,{PI:()=>v,Pm:()=>a,XS:()=>D,Zo:()=>O,a_:()=>y,eG:()=>C,k3:()=>f,k_:()=>h,nF:()=>E,py:()=>d});var t=e(2543),n=e.n(t),r=e(78368),s=e(14236),o=e(85200),m=e(75059),l=e(1173),i=e(11261),c=e(57875),u=e(28240);const f="__series.name",d="__field.displayName",E="__field.labels",h="__calc",y="__cell_",a=25,v=p=>{const{replaceVariables:x,reduceOptions:A,timeZone:R,theme:B}=p,U=A.calcs.length?A.calcs:[m.gy.last],F=[],K=(0,o.NS)(A.fields?{id:l.Ct.byRegexp,options:A.fields}:{id:l.Ct.numeric}),w=p.data??[],L=A.limit?A.limit:a;let V=!1;for(let N=0;N<w.length&&!V;N++){const z=w[N],{timeField:J}=(0,s.KR)(z),G=new r.R(z);for(let H=0;H<z.fields.length&&!V;H++){const q=z.fields[H],le=q.getLinks;if(!K(q,z,w))continue;let me=q.config;q.state?.range&&(me={...me,...q.state?.range});let k=q.config.displayName??"";const ee=q.display??(0,c.J)({field:q,theme:p.theme,timeZone:R});if(A.values)for(let X=0;X<q.values.length;X++){q.state=b(q,F.length);const j=S(q,X),ne=ee(q.values[X]),te=g(z,q,X,x,j),oe=P(te,p.fieldConfig,B);if(F.push({name:"",field:me,display:{...ne,title:te,color:oe??ne.color},view:G,colIndex:H,rowIndex:X,getLinks:le?()=>le({valueRowIndex:X}):()=>[],hasLinks:C(q)}),F.length>=L){V=!0;break}}else{const X=(0,m.Nw)({field:q,reducers:U});for(const j of U){const ne=q.state?.scopedVars??{};ne[h]={value:j,text:j};const te=ee(X[j]);k!==""?te.title=x(k,ne):te.title=(0,u.Ct)(q,z,w),te.percentChange=p.percentChange?(0,m.Nw)({field:q,reducers:[m.gy.diffperc]}).diffperc:void 0;let oe;p.sparkline&&(oe={y:z.fields[H],x:J},j===m.gy.last?oe.highlightIndex=oe.y.values.length-1:j===m.gy.first&&(oe.highlightIndex=0));const ie=z.length===1?0:void 0;F.push({name:j,field:me,display:te,sparkline:oe,view:G,colIndex:H,getLinks:le?()=>le({calculatedValue:te,valueRowIndex:ie}):()=>[],hasLinks:C(q)})}}}}return F.length===0&&F.push(T(p)),F};function g(p,x,A,R,B){const U=x.config.displayName;if(U)return U.indexOf(y)?R(O(U),B):R(U,B);let F=[],K=0;for(const w of p.fields)if(w!==x)if(w.type===i.PU.string){const L=w.values[A]??"",V=w.display?w.display(L).text:L;V.length>0&&F.push(V)}else w.type===i.PU.number&&K++;return(K||F.length===0)&&F.push((0,u.Ct)(x,p)),F.join(" ")}function b(p,x){return{...p.state,seriesIndex:x}}function P(p,x,A){for(const R of x.overrides)if(R.matcher.id==="byName"&&R.matcher.options===p){for(const B of R.properties)if(B.id==="color"&&B.value)return A.visualization.getColorByName(B.value.fixedColor)}return null}function C(p){return p.config?.links?.length?p.config.links.length>0:!1}function D(p){let x="",A="",R="",B="";for(let U=0;U<p.length;U++){const F=p[U].display;F.text&&F.text.length>A.length&&(A=F.text),F.title&&F.title.length>x.length&&(x=F.title),F.prefix&&F.prefix.length>R.length&&(R=F.prefix),F.suffix&&F.suffix.length>B.length&&(B=F.suffix)}return{text:A,title:x,suffix:B,prefix:R}}function T(p){const x="No data",{fieldConfig:A,timeZone:R}=p,{defaults:B}=A,F=(0,c.J)({field:{type:i.PU.other,config:B},theme:p.theme,timeZone:R})(null),K=M(F,x);return{name:x,field:{...B,max:B.max??0,min:B.min??0},display:{text:K,numeric:0,color:F.color},hasLinks:!1}}function M(p,x){return!p||(0,t.isEmpty)(p.text)?x:p.text}function O(p){return p.replace(/\${__cell_(\d+)(.*?)}|\[\[__cell_(\d+)(.*?)\]\]|\$__cell_(\d+)(\S*)/g,(x,A,R,B,U,F,K)=>`\${__data.fields[${A??B??F}]${R??U??K}}`)}function S(p,x){return p.state?.scopedVars?.__dataContext?{...p.state?.scopedVars,__dataContext:{value:{...p.state?.scopedVars?.__dataContext.value,rowIndex:x}}}:p.state?.scopedVars}},90708:(Y,I,e)=>{"use strict";e.d(I,{BF:()=>O,K3:()=>x,_M:()=>p,nJ:()=>g,rJ:()=>A,we:()=>b});var t=e(2543),n=e.n(t),r=e(96540),s=e(80292),o=e(52622),m=e(14236),l=e(21423),i=e(23596),c=e(75059),u=e(85200),f=e(11261),d=e(24293),E=e(71733),h=e(6709),y=e(57875),a=e(58563),v=e(69550);function g(B){let U=null,F=null;const K=[c.gy.min,c.gy.max];for(const w of B)for(const L of w.fields)if(L.type===f.PU.number){const V=(0,c.Nw)({field:L,reducers:K}),N=V[c.gy.min],z=V[c.gy.max];(U===null||N<U)&&(U=N),(F===null||z>F)&&(F=z)}return{min:U,max:F,delta:(F??0)-(U??0)}}function b(B){if(!B.data)return[];const U=B.fieldConfig;if(!U)return B.data;const F=B.fieldConfigRegistry??v.G;let K=0,w;const L=[];if(U.overrides)for(const V of U.overrides){const N=u.sJ.get(V.matcher.id);N&&L.push({match:N.get(V.matcher.options),properties:V.properties})}return B.data.map((V,N)=>{const z={...V};z.fields=z.fields.map(J=>({...J,config:(0,t.cloneDeep)(J.config),state:{...J.state}}));for(const J of z.fields){const G=J.config;J.state.scopedVars={__dataContext:{value:{data:B.data,frame:z,frameIndex:N,field:J}}};const H={field:J,data:B.data,dataFrameIndex:N,replaceVariables:B.replaceVariables,fieldConfigRegistry:F};T(G,U.defaults,H);for(const k of L)if(k.match(J,z,B.data))for(const ee of k.properties)D(G,ee,H);let q=J.type;if(!q||q===f.PU.other){const k=(0,m.dF)(J);k&&(q=k)}const{range:le,newGlobalRange:me}=P(G,J,w,B.data);if(w=me,J.state.seriesIndex=K,J.state.range=le,J.type=q,J.type!==f.PU.time&&K++,J.display=(0,y.J)({field:J,theme:B.theme,timeZone:B.timeZone}),J.config.unit!=="dateTimeFromNow"&&(J.display=C(J.display,2500)),J.getLinks=p(z,J,J.state.scopedVars,H.replaceVariables,B.timeZone,B.dataLinkPostProcessor),J.type===f.PU.nestedFrames)for(const k of J.values)for(let ee=0;ee<k.length;ee++)for(const X of k[ee].fields)X.display=(0,y.J)({field:X,theme:B.theme,timeZone:B.timeZone}),X.state={scopedVars:{__dataContext:{value:{data:k,frame:k[ee],frameIndex:ee,field:X}}}},X.getLinks=p(k[ee],X,X.state.scopedVars,H.replaceVariables,B.timeZone,B.dataLinkPostProcessor)}return z})}function P(B,U,F,K){if(U.type!==f.PU.number||(0,t.isNumber)(B.min)&&(0,t.isNumber)(B.max))return{newGlobalRange:F};if(B.fieldMinMax){const N=(0,a.AP)(U),z=B.min??N.min,J=B.max??N.max;return{range:{min:z,max:J,delta:J-z},newGlobalRange:F}}const w=F??g(K),L=B.min??w.min,V=B.max??w.max;return{range:{min:L,max:V,delta:V-L},newGlobalRange:w}}function C(B,U=2500){const F=new Map;for(let K=-1;K<=15;K++)F.set(K,new Map);return(K,w)=>{let L=F.get(w??-1),V=L.get(K);return V||(L.size===U&&L.clear(),V=B(K,w),V.color&&(V.color=(0,i.asHexString)(V.color)),L.set(K,V)),V}}function D(B,U,F){const w=F.fieldConfigRegistry.getIfExists(U.id);if(!w)return;const L=w.process(U.value,F,w.settings);L==null?w.isCustom&&B.custom?(0,t.unset)(B.custom,w.path):(0,t.unset)(B,w.path):w.isCustom?(B.custom||(B.custom={}),(0,t.set)(B.custom,w.path,L)):(0,t.set)(B,w.path,L)}function T(B,U,F){B.links&&U.links&&(B.links=[...B.links,...U.links]);for(const K of F.fieldConfigRegistry.list())K.isCustom&&!B.custom&&(B.custom={}),M(K.isCustom?B.custom:B,K.isCustom?U.custom:U,K,F);O(B)}function M(B,U,F,K){const w=(0,t.get)(B,F.path);if(w==null){const L=K.fieldConfigRegistry.getIfExists(F.id);if(!L)return;if(L&&L.shouldApply(K.field)){const V=L.process((0,t.get)(U,L.path),K,L.settings);V!=null&&(0,t.set)(B,L.path,V)}}}function O(B){const{thresholds:U}=B;if(B.color?B.color.mode||delete B.color:U&&(B.color={mode:d.Y.Thresholds}),B.hasOwnProperty("min")&&B.hasOwnProperty("max")&&B.min>B.max){const F=B.max;B.max=B.min,B.min=F}}const S=B=>{const{link:U,linkModel:F,dataLinkScopedVars:K,field:w,replaceVariables:L}=B;return U.internal?(0,h.u)({link:U,internalLink:U.internal,scopedVars:K,field:w,range:U.internal.range,replaceVariables:L}):F},p=(B,U,F,K,w,L)=>V=>!U.config.links||U.config.links.length===0?[]:U.config.links.map(z=>{const J=R(B,U,F),G={...F,__dataContext:J},H=(le,me,k)=>K(le,{...G,...me},k);V.valueRowIndex!==void 0&&!isNaN(V.valueRowIndex)?J.value.rowIndex=V.valueRowIndex:J.value.calculatedValue=V.calculatedValue;let q;if(z.onClick)q={href:z.url,title:K(z.title||"",G),target:z.targetBlank?"_blank":void 0,onClick:(le,me)=>{z.onClick({origin:me??U,e:le,replaceVariables:H})},origin:U};else{let le=z.onBuildUrl?z.onBuildUrl({origin:U,replaceVariables:H}):z.url;le&&(le=E.I.assureBaseUrl(le.replace(/\n/g,"")),le=K(le,G,o.$m.UriEncode),le=E.I.processUrl(le)),q={href:le,title:K(z.title||"",G),target:z.targetBlank?"_blank":void 0,origin:U}}return(L||S)({frame:B,field:U,dataLinkScopedVars:G,replaceVariables:K,config:V,link:z,linkModel:q})}).filter(z=>!!z);function x(B){if(!B||B.length===0)return[];const U=[...B],F=(0,y.H)();for(let K=0;K<U.length;K++){const w={...U[K]},L=[...w.fields];for(let V=0;V<L.length;V++)L[V]={...L[V],display:F};U[K]={...w,fields:L}}return U}function A(B,U,F,K,w,L,V){const N=B?.fieldConfigRegistry,z=(0,r.useRef)(0),J=(0,s.A)(F?.series);return(0,r.useMemo)(()=>{if(!N||!U||!F)return;const G=F?.series;F.structureRev==null&&G&&J&&!(0,l.J3)(G,J,l.bW)&&z.current++;const H={structureRev:z.current,...F,series:b({data:G,fieldConfig:U,fieldConfigRegistry:N,replaceVariables:L,theme:w,timeZone:K,dataLinkPostProcessor:V})};return F.annotations&&F.annotations.length>0&&(H.annotations=b({data:F.annotations,fieldConfig:{defaults:{},overrides:[]},replaceVariables:L,theme:w,timeZone:K,dataLinkPostProcessor:V})),H},[N,U,F,J,K,w,L,V])}function R(B,U,F){return F?.__dataContext?{value:{...F.__dataContext.value}}:{value:{frame:B,field:U,data:[B]}}}},28240:(Y,I,e)=>{"use strict";e.d(I,{Ct:()=>l,Fm:()=>o,Ri:()=>s,fk:()=>c,j2:()=>m});var t=e(85200),n=e(11261),r=e(8249);function s(f,d){if(f.name)return f.name;const E=[];for(const h of f.fields)if(h.type!==n.PU.time){if(E.length>1)break;E.push(l(h,f))}return E.length===1?E[0]:d===void 0&&f.fields.length>0?f.fields.filter(h=>h.type!==n.PU.time).map(h=>l(h,f)).join(", "):f.refId?`Series (${f.refId})`:`Series (${d})`}function o(f){f.forEach(d=>{d.fields.forEach(E=>{l(E,d,f)})})}function m(f,d){f.forEach(E=>{E.fields.forEach(h=>{const y={legend:!1,tooltip:!1,viz:!1,...d.defaults.custom?.hideFrom},a=h.config.custom?.hideFrom;d.overrides.forEach(v=>{if("__systemRef"in v)return;if((0,t.NS)(v.matcher)(h,E,f))for(const b of v.properties)b.id==="custom.hideFrom"&&Object.assign(y,b.value)}),h.state={...h.state,hideFrom:{...a}},h.config.custom.hideFrom=y})})}function l(f,d,E){const h=f.state?.displayName,y=!!(E&&E.length>1);if(h&&y===f.state?.multipleFrames)return h;const a=i(f,d,E);return f.state=f.state||{},f.state.displayName=a,f.state.multipleFrames=y,a}function i(f,d,E){const h=f.config?.displayName&&f.config?.displayName.length,y=!!d?.meta?.timeCompare?.isTimeShiftQuery;let a=h?f.config.displayName:f.name;if(h)return y?`${a} (comparison)`:a;if(d&&f.config?.displayNameFromDS)return y?`${f.config.displayNameFromDS} (comparison)`:f.config.displayNameFromDS;if(f.type===n.PU.time&&!f.labels)return a??n.LE;let v=[],g=!1;if(E&&E.length>1){for(let C=1;C<E.length;C++)if(E[C].name!==E[C-1].name){g=!0;break}}let b=!1,P=!1;if(g&&d?.name&&(v.push(d.name),b=!0),f.name&&f.name!==n.Bc&&v.push(f.name),f.labels&&d){let C=u(E??[d]);if(C)f.labels[C]&&(v.push(f.labels[C]),P=!0);else{let D=(0,r.h6)(f.labels);D&&(v.push(D),P=!0)}}return d&&!b&&!P&&f.name===n.Bc&&d.name&&d.name.length>0&&(v.push(d.name),b=!0),v.length?a=v.join(" "):f.name?a=f.name:a=n.Bc,a===f.name&&(a=c(f,d)),y&&(a=`${a} (comparison)`),a}function c(f,d){let E=0,h=!1;if(d)for(let y=0;y<d.fields.length;y++){const a=d.fields[y];if(f===a){if(h=!0,E>0){E++;break}}else if(f.name===a.name&&(E++,h))break}return E?`${f.name} ${E}`:f.name}function u(f){let d=null;for(let E=0;E<f.length;E++){const h=f[E];for(const y of h.fields)if(y.labels){for(const a in y.labels)if(d===null)d=a;else if(a!==d)return null}}return d}},92461:(Y,I,e)=>{"use strict";e.d(I,{F:()=>o});var t=e(2543),n=e.n(t),r=e(83195),s=e(57875);function o(m){return new Proxy({},{get:(l,i)=>{let c=m.frame.fields.find(E=>i===E.name);if(!c){const E=(0,t.toNumber)(i);c=m.frame.fields[E]}if(c||(c=m.frame.fields.find(E=>i===E.config.displayName)),c||(c=m.frame.fields.find(E=>E.labels?i===E.labels.name:!1)),!c)return;const u=c.display??(0,s.J)(),f=c.values[m.rowIndex],d=u(f);return d.toString=()=>(0,r.cN)(d),d}})}},63877:(Y,I,e)=>{"use strict";e.d(I,{AM:()=>s.AM,AP:()=>f.AP,BF:()=>i.BF,Ch:()=>s.Ch,Ct:()=>u.Ct,DJ:()=>r.D,FM:()=>s.FM,FU:()=>c.F,Fm:()=>u.Fm,Gs:()=>r.G,HB:()=>n.H,Hs:()=>o.Hs,JO:()=>n.J,K3:()=>i.K3,Kr:()=>m.K,N7:()=>s.N7,OU:()=>s.OU,PI:()=>t.PI,Pm:()=>t.Pm,Qi:()=>o.Qi,RU:()=>l.RU,Ri:()=>u.Ri,X4:()=>s.X4,XS:()=>t.XS,Zo:()=>t.Zo,a_:()=>t.a_,eG:()=>t.eG,fk:()=>u.fk,hL:()=>s.hL,hS:()=>s.hS,jc:()=>f.jc,k3:()=>t.k3,k_:()=>t.k_,lG:()=>s.lG,lz:()=>o.lz,m0:()=>s.m0,nF:()=>t.nF,py:()=>t.py,rJ:()=>i.rJ,uf:()=>o.uf,we:()=>i.we,xT:()=>s.xT,xg:()=>f.xg,yQ:()=>l.yQ});var t=e(56323),n=e(57875),r=e(69550),s=e(27310),o=e(8066),m=e(66670),l=e(47737),i=e(90708),c=e(92461),u=e(28240),f=e(58563)},27310:(Y,I,e)=>{"use strict";e.d(I,{AM:()=>r,Ch:()=>s,FM:()=>u,N7:()=>i,OU:()=>l,X4:()=>f,hL:()=>m,hS:()=>t,lG:()=>c,m0:()=>n,xT:()=>o});const t=d=>d,n=(d,E,h)=>{if(d!=null)return parseFloat(d)},r=(d,E,h)=>(delete E.field?.state?.displayName,l(d,E,h)),s=(d,E,h)=>d,o=(d,E,h)=>d,m=(d,E,h)=>d,l=(d,E,h)=>d==null?d:h&&h.expandTemplateVars&&E.replaceVariables&&typeof d=="string"?E.replaceVariables(d,E.field.state.scopedVars):`${d}`,i=(d,E,h)=>d,c=(d,E,h)=>d,u=(d,E,h)=>d;var f=(d=>(d.IncludeAll="all",d.ExcludeBaseNames="exclude",d.OnlyBaseNames="only",d))(f||{})},58563:(Y,I,e)=>{"use strict";e.d(I,{AP:()=>c,jc:()=>l,xg:()=>u});var t=e(2543),n=e.n(t),r=e(75059),s=e(11261),o=e(8066),m=e(47737);function l(f,d){if(f.type===s.PU.boolean)return i(f,d);const h=(0,o.Qi)(f).getCalculator(f,d),y=f.state?.range??c(f);return a=>{let v=0;a!==-1/0&&(v=(a-y.min)/y.delta,Number.isNaN(v)&&(v=0));const g=(0,m.k5)(f,a,v);return{percent:v,threshold:g,color:h(a,v,g)}}}function i(f,d){const E={color:d.visualization.getColorByName("green"),percent:1,threshold:void 0},h={color:d.visualization.getColorByName("red"),percent:0,threshold:void 0},y=(0,o.Qi)(f);if(y.isContinuous&&y.getColors){const a=y.getColors(d);E.color=a[a.length-1],h.color=a[0]}return a=>a?E:h}function c(f){if(f.type!==s.PU.number)return{min:0,max:100,delta:100};let d=f.config.min,E=f.config.max;if(!(0,t.isNumber)(d)||!(0,t.isNumber)(E))if(f.values&&f.values.length){const h=(0,r.Nw)({field:f,reducers:[r.gy.min,r.gy.max]});(0,t.isNumber)(d)||(d=h[r.gy.min]),(0,t.isNumber)(E)||(E=h[r.gy.max])}else d=0,E=100;return{min:d,max:E,delta:E-d}}function u(f,d){const{config:E}=f;let{min:h,max:y}=E;return(0,t.isNumber)(h)&&(0,t.isNumber)(y)?E:d||!f.state?.range?{...E,...c(f)}:{...E,...f.state.range}}},69550:(Y,I,e)=>{"use strict";e.d(I,{D:()=>s,G:()=>r});var t=e(83077),n=e(66670);const r=new n.K,s=new t.O},47737:(Y,I,e)=>{"use strict";e.d(I,{QS:()=>r,RU:()=>m,k5:()=>o,yQ:()=>s});var t=e(24293),n=e(50082);const r={value:0,color:t.F};function s(l,i){if(!i||i.length===0)return r;let c=i[0];for(const u of i)if(l>=u.value)c=u;else break;return c}function o(l,i,c){const{thresholds:u}=l.config;return u?.mode===n.O.Percentage?s(c*100,u?.steps):s(i,u?.steps)}function m(l){return l.sort((i,c)=>i.value-c.value)}},10361:(Y,I,e)=>{"use strict";e.d(I,{a:()=>t.aG});var t=e(52622)},39954:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{AnnotationChangeEvent:()=>u.We,ArrayDataFrame:()=>s.fG,ArrayVector:()=>S.L,BinaryOperationID:()=>t.kP,BusEventBase:()=>u.aV,BusEventWithPayload:()=>u.x$,ByNamesMatcherMode:()=>o.PP,CSVHeaderStyle:()=>t.F7,CSVReader:()=>t.i8,CircularDataFrame:()=>p.x,CircularVector:()=>M.$,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>c.Pm,DashboardLoadedEvent:()=>u.gc,DataFrameView:()=>s.Rh,DataHoverClearEvent:()=>u.ql,DataHoverEvent:()=>u.b_,DataLinkBuiltInVars:()=>t.cI,DataSelectEvent:()=>u.LO,DataSourcePluginContextProvider:()=>P.p,DataSourceTestFailed:()=>u.LL,DataSourceTestSucceeded:()=>u.NI,DataSourceUpdatedSuccessfully:()=>u.wE,DataTransformerID:()=>o.Fy,DocsId:()=>t.fu,EventBusSrv:()=>u.or,FieldCache:()=>s.Lc,FieldConfigEditorBuilder:()=>t.bk,FieldConfigOptionsRegistry:()=>c.Kr,FieldMatcherID:()=>o.Ct,FieldNamePickerBaseNameMode:()=>c.X4,FrameGeometrySourceMode:()=>E.a,FrameMatcherID:()=>o.jR,ISO_8601:()=>m.mt,InternalTimeZones:()=>m.g$,LayoutModes:()=>y.R,LegacyMappingType:()=>t.An,MISSING_VALUE:()=>s.pk,MatcherID:()=>o.cV,MutableDataFrame:()=>s.k2,NodeGraphDataFrameFieldNames:()=>t.uc,PanelOptionsEditorBuilder:()=>t.pv,PanelPlugin:()=>a.m,PluginContextProvider:()=>b.a,ReducerID:()=>o.gy,Registry:()=>t.OR,StreamingDataFrame:()=>s.k9,StreamingFrameAction:()=>s.Kh,SystemDateFormatsState:()=>m.JE,ThemeContext:()=>f.Dx,TransformerCategory:()=>o.m_,UnaryOperationID:()=>t._G,VAR_CALC:()=>c.k_,VAR_CELL_PREFIX:()=>c.a_,VAR_FIELD_LABELS:()=>c.nF,VAR_FIELD_NAME:()=>c.py,VAR_SERIES_NAME:()=>c.k3,ValueMatcherID:()=>o.Js,addDurationToDate:()=>m.Ri,addRow:()=>s.uY,anySeriesWithTimeField:()=>s.tP,anyToNumber:()=>t.to,applyFieldOverrides:()=>c.we,applyNullInsertThreshold:()=>o.MS,applyRawFieldOverrides:()=>c.K3,arrayToDataFrame:()=>s.Ij,arrayUtils:()=>t.XC,binaryOperators:()=>t.bP,booleanOverrideProcessor:()=>c.FM,booleanValueFormatter:()=>i.Qc,buildHistogram:()=>o.p3,cacheFieldDisplayNames:()=>c.Fm,classicColors:()=>t.tj,closestIdx:()=>s.Ls,colorManipulator:()=>f.MV,compareArrayValues:()=>s.J3,compareDataFrameStructures:()=>s.bW,containsSearchFilter:()=>t.Eg,convertOldAngularValueMappings:()=>t.bh,createDataFrame:()=>s.EI,createDimension:()=>s.r4,createFieldConfigRegistry:()=>g.O,createTheme:()=>f.an,dataFrameFromJSON:()=>s.or,dataFrameToJSON:()=>s.Nw,dataLinksOverrideProcessor:()=>c.Ch,dateMath:()=>m.ns,dateTime:()=>m.KQ,dateTimeAsMoment:()=>m.AN,dateTimeForTimeZone:()=>m.oZ,dateTimeFormat:()=>m.LE,dateTimeFormatISO:()=>m.M7,dateTimeFormatTimeAgo:()=>m.fq,dateTimeFormatWithAbbrevation:()=>m._Q,dateTimeParse:()=>m.bQ,decodeFieldValueEntities:()=>s.t,decodeFieldValueEnums:()=>s.EL,defaultCalcs:()=>o.C6,deprecationWarning:()=>t.lt,displayNameOverrideProcessor:()=>c.AM,doStandardCalcs:()=>o.H3,durationToMilliseconds:()=>m.WT,ensureTimeField:()=>o.ks,escapeRegex:()=>l.$f,escapeStringForRegex:()=>l.jD,eventFactory:()=>u.Rb,fieldColorModeRegistry:()=>c.uf,fieldMatchers:()=>o.sJ,fieldReducers:()=>o.AS,filterFieldConfigOverrides:()=>v.aW,findCommonLabels:()=>t.yO,findHighlightChunksInText:()=>l.Oq,findMatchesInText:()=>l.bs,findUniqueLabels:()=>t.s6,fixCellTemplateExpressions:()=>c.Zo,formatLabels:()=>t.h6,formattedValueToString:()=>i.cN,frameMatchers:()=>o.RE,getActiveThreshold:()=>c.yQ,getAllValuesFromDimension:()=>s.Km,getBuiltInThemes:()=>f.k7,getColumnFromDimension:()=>s.P4,getColumnsFromDimension:()=>s.g6,getDataFrameRow:()=>s.Yn,getDataSourceRef:()=>t.p$,getDataSourceUID:()=>t.Iz,getDimensionByName:()=>s.xB,getDisplayProcessor:()=>c.JO,getDisplayValueAlignmentFactors:()=>c.XS,getFieldColorMode:()=>c.Hs,getFieldColorModeForField:()=>c.Qi,getFieldConfigWithMinMax:()=>c.xg,getFieldDisplayName:()=>c.Ct,getFieldDisplayValues:()=>c.PI,getFieldDisplayValuesProxy:()=>c.FU,getFieldMatcher:()=>o.NS,getFieldSeriesColor:()=>c.lz,getFieldTypeFromValue:()=>s.oE,getFlotPairs:()=>t.RZ,getFlotPairsConstant:()=>t.rG,getFrameDisplayName:()=>c.Ri,getFrameMatchers:()=>o.Dq,getHistogramFields:()=>o.ix,getLinksSupplier:()=>T._M,getLocale:()=>m.JK,getLocaleData:()=>m.XN,getMinMaxAndDelta:()=>c.AP,getNextRefId:()=>h.M,getPanelOptionsWithDefaults:()=>v.F,getProcessedDataFrames:()=>s.Bt,getRawDisplayProcessor:()=>c.HB,getRowUniqueId:()=>s.t9,getScaleCalculator:()=>c.jc,getSearchFilterScopedVar:()=>t.cs,getSeriesTimeStep:()=>t.tY,getThemeById:()=>f.gh,getTimeField:()=>s.KR,getTimeZone:()=>m.O,getTimeZoneGroups:()=>m.U3,getTimeZoneInfo:()=>m.QZ,getTimeZones:()=>m.P3,getUniqueFieldName:()=>c.fk,getValueFormat:()=>i.j_,getValueFormats:()=>i.Ke,getValueFormatterIndex:()=>i.uH,getValueFromDimension:()=>s.WK,getValueMatcher:()=>o.kK,getWeekdayIndex:()=>m.xQ,getWeekdayIndexByEnglishName:()=>m.pp,getZone:()=>m.HD,guessDecimals:()=>t.E6,guessFieldTypeForField:()=>s.dF,guessFieldTypeFromNameAndValue:()=>s.by,guessFieldTypeFromValue:()=>s.HW,guessFieldTypes:()=>s.XQ,hasLinks:()=>c.eG,hasMsResolution:()=>t.dO,hasTimeField:()=>s.S1,histogramBucketSizes:()=>o.rW,histogramFieldInfo:()=>o.Rt,histogramFieldsToFrame:()=>o.cg,histogramFrameBucketMaxFieldName:()=>o.dA,histogramFrameBucketMinFieldName:()=>o.d$,histogramTransformer:()=>o.OA,identityOverrideProcessor:()=>c.hS,incrRound:()=>o.ZU,incrRoundDn:()=>o.rs,incrRoundUp:()=>o.Uh,intervalToAbbreviatedDurationString:()=>m.dU,isBooleanUnit:()=>i.j9,isCustomFieldProp:()=>v.TQ,isDataFrame:()=>s.ci,isDataFrameWithValue:()=>s.LI,isDataSourcePluginContext:()=>D.S,isDataSourceRef:()=>t.fN,isDateTime:()=>m.Ar,isDateTimeInput:()=>m.u8,isEmptyObject:()=>t.RI,isHistogramFrameBucketMaxFieldName:()=>o.H1,isHistogramFrameBucketMinFieldName:()=>o.NX,isLikelyAscendingVector:()=>o.g2,isReducerID:()=>o.Em,isStandardFieldProp:()=>v.nx,isTableData:()=>s.pH,isTimeSeriesField:()=>s.hF,isTimeSeriesFrame:()=>s.aH,isTimeSeriesFrames:()=>s.jq,isValidDate:()=>m.vd,isValidDuration:()=>m.di,isValidGoDuration:()=>m.IM,isValidGrafanaDuration:()=>m.V3,localTimeFormat:()=>m.Od,locale:()=>i.Hg,locationUtil:()=>t.Ig,makeClassES5Compatible:()=>t.Yi,mapInternalLinkToExplore:()=>t.uS,matchAllLabels:()=>t._p,matchPluginId:()=>t._8,monacoLanguageRegistry:()=>d.l,nullToValue:()=>o.CF,numberOverrideProcessor:()=>c.m0,objRemoveUndefined:()=>t.wm,onUpdateDatasourceJsonDataOption:()=>t.PG,onUpdateDatasourceJsonDataOptionChecked:()=>t.EX,onUpdateDatasourceJsonDataOptionSelect:()=>t.BD,onUpdateDatasourceOption:()=>t.zX,onUpdateDatasourceResetOption:()=>t.yV,onUpdateDatasourceSecureJsonDataOption:()=>t.mn,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.wY,outerJoinDataFrames:()=>o.KP,parseDuration:()=>m.E9,parseFlags:()=>l.bQ,parseLabels:()=>t.Xy,preProcessPanelData:()=>s.N$,rangeUtil:()=>m.Ii,readCSV:()=>t.Jh,reduceField:()=>o.Nw,renderLegendFormat:()=>t.j_,renderMarkdown:()=>l.Gc,renderTextPanelMarkdown:()=>l.Pn,restoreCustomOverrideRules:()=>v.H9,reverseDataFrame:()=>s.q7,roundDecimals:()=>t.hB,scaledUnits:()=>i.yP,selectOverrideProcessor:()=>c.hL,serializeStateToUrlParam:()=>t.Pp,setLocale:()=>m.xS,setTimeZoneResolver:()=>m.GZ,setWeekStart:()=>m.$D,shallowCompare:()=>s.ab,simpleCountUnit:()=>i.UR,sortDataFrame:()=>s.ES,sortThresholds:()=>c.RU,standardEditorsRegistry:()=>c.DJ,standardFieldConfigEditorRegistry:()=>c.Gs,standardTransformers:()=>o.c9,standardTransformersRegistry:()=>o.h9,stringFormater:()=>i.cH,stringOverrideProcessor:()=>c.OU,stringStartsAsRegEx:()=>l.AP,stringToJsRegex:()=>l.dO,stringToMs:()=>l.dc,systemDateFormats:()=>m.WC,textUtil:()=>l.sQ,thresholdsOverrideProcessor:()=>c.N7,timeZoneAbbrevation:()=>m.jw,timeZoneFormatUserFriendly:()=>m.le,toCSV:()=>t._O,toDataFrame:()=>s.Vc,toDataFrameDTO:()=>s.Kl,toDuration:()=>m.Ah,toFilteredDataFrameDTO:()=>s.By,toFixed:()=>i.Mg,toFixedScaled:()=>i.gZ,toFixedUnit:()=>i.G8,toFloatOrUndefined:()=>l.$D,toIntegerOrUndefined:()=>l.vb,toLegacyResponseData:()=>s.w3,toNumberString:()=>l.kT,toOption:()=>t.zL,toPascalCase:()=>l.MX,toURLRange:()=>t.sQ,toUtc:()=>m.yT,transformDataFrame:()=>o.m6,unEscapeStringFromRegex:()=>l.xb,unaryOperators:()=>t.j7,unitOverrideProcessor:()=>c.lG,updateDatasourcePluginJsonDataOption:()=>t.lO,updateDatasourcePluginOption:()=>t.pN,updateDatasourcePluginResetOption:()=>t.QP,updateDatasourcePluginSecureJsonDataOption:()=>t.wp,urlUtil:()=>t.kM,useFieldOverrides:()=>c.rJ,usePluginContext:()=>C.Q,validateFieldConfig:()=>c.BF,valueMappingsOverrideProcessor:()=>c.xT,valueMatchers:()=>o.hI,vectorator:()=>O.E,withLoadingIndicator:()=>t.kz});var t=e(94032),n=e(64572),r={};for(const x in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","CircularVector","vectorator","ArrayVector","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","UnaryOperationID","anyToNumber","arrayUtils","binaryOperators","classicColors","containsSearchFilter","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSearchFilterScopedVar","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","matchPluginId","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","renderLegendFormat","roundDecimals","serializeStateToUrlParam","toCSV","toOption","toURLRange","unaryOperators","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(x)<0&&(r[x]=()=>n[x]);e.d(I,r);var s=e(48120),o=e(34687),m=e(38698),l=e(40672),i=e(56496),c=e(63877),u=e(56302),f=e(74529),d=e(58612),E=e(10361),h=e(21809),y=e(19484),a=e(65158),v=e(581),g=e(28528),b=e(13834),P=e(76287),C=e(92470),D=e(95187),T=e(90708),M=e(36120),O=e(18008),S=e(79178),p=e(33526)},58612:(Y,I,e)=>{"use strict";e.d(I,{l:()=>t.l});var t=e(96915)},96915:(Y,I,e)=>{"use strict";e.d(I,{l:()=>n});var t=e(83077);const n=new t.O},65158:(Y,I,e)=>{"use strict";e.d(I,{m:()=>i});var t=e(2543),n=e.n(t),r=e(66670),s=e(43429),o=e(95344),m=e(60264),l=e(28528);class i extends s.Ud{constructor(u){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new r.K,this.dataSupport={annotations:!1,alertStates:!1},this.panel=u}get defaults(){let u=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const f=new m.pv;this.optionsSupplier(f,{data:[]});for(const d of f.getItems())d.defaultValue!=null&&(0,t.set)(u,d.path,d.defaultValue)}return u}get fieldConfigDefaults(){const u=this._fieldConfigDefaults.defaults;u.custom={};for(const f of this.fieldConfigRegistry.list())f.defaultValue!==void 0&&(0,t.set)(u,f.id,f.defaultValue);return{defaults:{...u},overrides:this._fieldConfigDefaults.overrides}}setDefaults(u){return(0,o.l)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=u,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(u){return(0,o.l)("PanelPlugin","setEditor","setPanelOptions"),this.editor=u,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(u){return this.onPanelMigration=u,this}setPanelChangeHandler(u){return this.onPanelTypeChanged=u,this}setPanelOptions(u){return this.optionsSupplier=u,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(u){return this.dataSupport={...this.dataSupport,...u},this}useFieldConfig(u={}){return this._initConfigRegistry=()=>(0,l.O)(u,this.meta.name),this}setSuggestionsSupplier(u){return this.suggestionsSupplier=u,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(u){return this.meta.id===u}}},581:(Y,I,e)=>{"use strict";e.d(I,{F:()=>l,H9:()=>E,TQ:()=>h,aW:()=>c,nx:()=>y});var t=e(2543),n=e.n(t),r=e(8066),s=e(24293),o=e(37055),m=e(50082);function l({plugin:a,currentOptions:v,currentFieldConfig:g,isAfterPluginChange:b}){const P=(0,t.mergeWith)({},a.defaults,v||{},(T,M)=>{if((0,t.isArray)(M))return M}),C=i(g,a),D=f(a,C,b);return{options:P,fieldConfig:D}}function i(a,v){const g=v.fieldConfigDefaults,b={defaults:(0,t.mergeWith)({},g.defaults,a?a.defaults:{},(P,C)=>{if((0,t.isArray)(C))return C}),overrides:a?.overrides??[]};u(b.defaults,"",v.fieldConfigRegistry),b.defaults.thresholds&&d(b.defaults.thresholds),b.overrides=c(b.overrides,P=>v.fieldConfigRegistry.getIfExists(P.id)!==void 0);for(const P of b.overrides)for(const C of P.properties)C.id==="thresholds"&&d(C.value);return b}function c(a,v){return a.map(g=>{const b=g.properties.filter(v);return{...g,properties:b}}).filter(g=>g.properties.length>0)}function u(a,v,g){let b=!1;for(const[P,C]of Object.entries(a)){const D=`${v}${P}`,T=!!g.getIfExists(D);if(T){b=!0;continue}(0,t.isArray)(C)||!(0,t.isObject)(C)?T||(0,t.unset)(a,P):u(C,`${D}.`,g)||(0,t.unset)(a,P)}return b}function f(a,v,g){if(!g)return v;const b=a.fieldConfigRegistry.getIfExists(o.uo.Color);if(b&&b.settings){const P=b.settings,C=r.uf.getIfExists(v.defaults.color?.mode);if(!P.byValueSupport&&(!C||C.isByValue))return v.defaults.color={mode:s.Y.PaletteClassic},v;if(P.byValueSupport&&P.preferThresholdsMode&&C?.id!==s.Y.Fixed&&(!C||!C.isByValue))return v.defaults.color={mode:s.Y.Thresholds},v;if(P.bySeriesSupport&&C?.isByValue)return v.defaults.color={mode:s.Y.PaletteClassic},v}return v}function d(a){a.mode||(a.mode=m.O.Absolute),a.steps?a.steps.length&&(a.steps[0].value=-1/0):a.steps=[]}function E(a,v){const g={defaults:{...a.defaults,custom:v.defaults.custom},overrides:[...a.overrides]};for(const b of v.overrides)for(const P of b.properties)if(h(P)){const C=g.overrides.find(D=>(0,t.isEqual)(D.matcher,b.matcher));C?C!==b&&C.properties.push(P):g.overrides.push(b)}return g}function h(a){return a.id.startsWith("custom.")}function y(a){return!h(a)}},28528:(Y,I,e)=>{"use strict";e.d(I,{O:()=>s});var t=e(66670),n=e(69550),r=e(60264);function s(m={},l){const i=new t.K,c=n.G.list(),u={};if(m.useCustomConfig){const f=new r.bk;m.useCustomConfig(f);for(const d of f.getRegistry().list())if(d.isCustom=!0,d.id="custom."+d.id,o(d,c)){const E=u[d.category[0]]??[];E.push(d),u[d.category[0]]=E}else i.register(d)}for(let f of c){const d=f.id;if(!(m.disableStandardOptions&&m.disableStandardOptions.indexOf(d)>-1)){if(m.standardOptions){const E=m.standardOptions[d]?.hideFromDefaults,h=m.standardOptions[d]?.defaultValue,y=m.standardOptions[d]?.settings;E&&(f={...f,hideFromDefaults:E}),h&&(f={...f,defaultValue:h}),y&&(f={...f,settings:f.settings?{...f.settings,...y}:y})}if(i.register(f),f.category&&u[f.category[0]])for(let E of u[f.category[0]])i.register(E)}}for(const f of i.list())if(f.path.indexOf("[")>0)throw new Error(`[${l}] Field config paths do not support arrays: ${f.id}`);return i}function o(m,l){return!!l.find(i=>m.category&&i.category&&m.category[0]===i.category[0])}},21809:(Y,I,e)=>{"use strict";e.d(I,{M:()=>t.M});var t=e(77789)},77789:(Y,I,e)=>{"use strict";e.d(I,{M:()=>t});const t=r=>{for(let s=0;;s++){const o=n(s);if(!r.some(m=>m.refId===o))return o}};function n(r){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return r<s.length?s[r]:n(Math.floor(r/s.length)-1)+s[r%s.length]}},40672:(Y,I,e)=>{"use strict";e.d(I,{$D:()=>t.$D,$f:()=>t.$f,AP:()=>t.AP,Gc:()=>n.G,MX:()=>t.MX,Oq:()=>r.Oq,Pn:()=>n.P,bQ:()=>r.bQ,bs:()=>r.bs,dO:()=>t.dO,dc:()=>t.dc,jD:()=>t.jD,kT:()=>t.kT,sQ:()=>o,vb:()=>t.vb,xb:()=>t.xb});var t=e(54479),n=e(36663),r=e(21),s=e(80997);const o={escapeHtml:s.ZD,hasAnsiCodes:s.kE,sanitize:s.aj,sanitizeTextPanelContent:s.G$,sanitizeUrl:s.Jf,sanitizeSVGContent:s.rX,sanitizeTrustedTypes:s.oI,sanitizeTrustedTypesRSS:s.kc}},36663:(Y,I,e)=>{"use strict";e.d(I,{G:()=>m,P:()=>l});var t=e(60023),n=e(33836),r=e(80997);let s=!1;const o={pedantic:!1,gfm:!0,breaks:!1};function m(i,c){s||(t.xI.use((0,n.z)()),t.xI.setOptions({...o}),s=!0);let u;c?.breaks&&(u={...o,breaks:!0});const f=(0,t.xI)(i||"",u);if(typeof f!="string")throw new Error("Failed to process markdown synchronously.");return c?.noSanitize?f:(0,r.G$)(f)}function l(i,c){s||(t.xI.use((0,n.z)()),t.xI.setOptions({...o}),s=!0);const u=(0,t.xI)(i||"");if(typeof u!="string")throw new Error("Failed to process markdown synchronously.");return c?.noSanitize?u:(0,r.G$)(u)}},80997:(Y,I,e)=>{"use strict";e.d(I,{G$:()=>f,Jf:()=>E,ZD:()=>y,aj:()=>i,kE:()=>h,kc:()=>c,oI:()=>u,rX:()=>d});var t=e(16750),n=e(42838),r=e.n(n),s=e(34005),o=e.n(s);const m=Object.keys(s.whiteList).reduce((a,v)=>(a[v]=s.whiteList[v]?.concat(["class","style"]),a),{}),l=new s.FilterXSS({whiteList:m,css:{whiteList:{...s.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function i(a){try{return r().sanitize(a,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",a),y(a)}}function c(a){return r().sanitize(a,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function u(a){return r().sanitize(a,{RETURN_TRUSTED_TYPE:!0})}function f(a){try{return l.process(a)}catch{return console.error("String could not be sanitized",a),"Text string could not be sanitized"}}function d(a){return r().sanitize(a,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function E(a){return(0,t.J)(a)}function h(a){return/\u001b\[\d{1,2}m/.test(a)}function y(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},54479:(Y,I,e)=>{"use strict";e.d(I,{$D:()=>h,$f:()=>a,AP:()=>c,MX:()=>y,dO:()=>u,dc:()=>f,jD:()=>l,kT:()=>d,vb:()=>E,xb:()=>i});var t=e(2543),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",o=new RegExp(s,"g"),m=new RegExp("(\\\\)"+s,"g");function l(v){return v&&v.replace(o,"\\$1")}function i(v){return v&&v.replace(m,"$2")}function c(v){return v?v[0]==="/":!1}function u(v){if(!c(v))return new RegExp(`^${v}$`);const g=v.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!g)throw new Error(`'${v}' is not a valid regular expression.`);return new RegExp(g[1],g[2])}function f(v){if(!v)return 0;const g=parseInt(v,10),b=v.slice(String(g).length),P=1e3,C=P*60,D=C*60,T=D*24;switch(b){case"s":return g*P;case"m":return g*C;case"h":return g*D;case"d":return g*T;default:if(!b)return isNaN(g)?0:g;throw new Error("Not supported unit: "+b)}}function d(v){return v!=null&&Number.isFinite(v)?v.toString():""}function E(v){if(!v)return;const g=parseInt(v,10);return isNaN(g)?void 0:g}function h(v){if(!v)return;const g=parseFloat(v);return isNaN(g)?void 0:g}function y(v){const g=(0,t.camelCase)(v);return g.charAt(0).toUpperCase()+g.substring(1)}function a(v){return v.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},21:(Y,I,e)=>{"use strict";e.d(I,{Oq:()=>t,bQ:()=>m,bs:()=>r});function t({searchWords:l,textToHighlight:i}){const c=[];for(const u of l)typeof u=="string"&&c.push(...r(i,u));return c}const n=l=>l.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function r(l,i){if(!l||!i)return[];const c=[],{cleaned:u,flags:f}=m(n(i));let d;try{d=new RegExp(`(?:${u})`,f)}catch{return c}return l.replace(d,(E,...h)=>{if(E){const y=h[h.length-2];c.push({text:E,start:y,length:E.length,end:y+E.length})}return""}),c}const s="-",o=/\(\?([ims-]+)\)/g;function m(l){const i=new Set(["g"]);return{cleaned:l.replace(o,(u,f)=>{const d=f.startsWith(s);for(let E=0;E<f.length;++E){const h=f.charAt(E);d||f.charAt(E-1)===s?i.delete(h):h!==s&&i.add(h)}return""}),flags:Array.from(i).join("")}}},23596:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{alpha:()=>h,asHexString:()=>m,asRgbString:()=>l,darken:()=>y,decomposeColor:()=>c,emphasize:()=>E,getContrastRatio:()=>f,getLuminance:()=>d,hexToRgb:()=>r,hslToRgb:()=>i,lighten:()=>a,recomposeColor:()=>u,rgbToHex:()=>o});var t=e(84140);function n(v,g=0,b=1){return Math.min(Math.max(g,v),b)}function r(v){v=v.slice(1);const g=new RegExp(`.{1,${v.length>=6?2:1}}`,"g");let b=v.match(g);if(!b)return"";let P=Array.from(b);return P[0].length===1&&(P=P.map(C=>C+C)),P?`rgb${P.length===4?"a":""}(${P.map((C,D)=>D<3?parseInt(C,16):Math.round(parseInt(C,16)/255*1e3)/1e3).join(", ")})`:""}function s(v){const g=v.toString(16);return g.length===1?`0${g}`:g}function o(v){if(v.indexOf("#")===0)return v;const{values:g}=c(v);return`#${g.map(b=>s(b)).join("")}`}function m(v){if(v[0]==="#")return v;const g=(0,t.A)(v);return g.getAlpha()===1?g.toHexString():g.toHex8String()}function l(v){return v.startsWith("rgb")?v:(0,t.A)(v).toRgbString()}function i(v){const g=c(v),{values:b}=g,P=b[0],C=b[1]/100,D=b[2]/100,T=C*Math.min(D,1-D),M=(p,x=(p+P/30)%12)=>D-T*Math.max(Math.min(x-3,9-x,1),-1);let O="rgb";const S=[Math.round(M(0)*255),Math.round(M(8)*255),Math.round(M(4)*255)];return g.type==="hsla"&&(O+="a",S.push(b[3])),u({type:O,values:S})}function c(v){if(typeof v!="string")return v;if(v.charAt(0)==="#")return c(r(v));const g=v.indexOf("("),b=v.substring(0,g);if(["rgb","rgba","hsl","hsla","color"].indexOf(b)===-1)throw new Error(`Unsupported '${v}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let P=v.substring(g+1,v.length-1),C;if(b==="color"){if(P=P.split(" "),C=P.shift(),P.length===4&&P[3].charAt(0)==="/"&&(P[3]=P[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(C)===-1)throw new Error(`Unsupported ${C} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else P=P.split(",");return P=P.map(D=>parseFloat(D)),{type:b,values:P,colorSpace:C}}function u(v){const{type:g,colorSpace:b}=v;let P=v.values;return g.indexOf("rgb")!==-1?P=P.map((C,D)=>D<3?parseInt(C,10):C):g.indexOf("hsl")!==-1&&(P[1]=`${P[1]}%`,P[2]=`${P[2]}%`),g.indexOf("color")!==-1?P=`${b} ${P.join(" ")}`:P=`${P.join(", ")}`,`${g}(${P})`}function f(v,g,b){const P=d(v),C=d(g,b);return(Math.max(P,C)+.05)/(Math.min(P,C)+.05)}function d(v,g){const b=c(v);let P=b.type==="hsl"?c(i(v)).values:b.values;if(g&&b.type==="rgba"){const D=c(g),T=P[3];P[0]=P[0]*T+D.values[0]*(1-T),P[1]=P[1]*T+D.values[1]*(1-T),P[2]=P[2]*T+D.values[2]*(1-T)}const C=P.map(D=>(b.type!=="color"&&(D/=255),D<=.03928?D/12.92:((D+.055)/1.055)**2.4));return Number((.2126*C[0]+.7152*C[1]+.0722*C[2]).toFixed(3))}function E(v,g=.15){return d(v)>.5?y(v,g):a(v,g)}function h(v,g){if(v==="")return"#000000";if(g=n(g),v[0]==="#"){if(v.length===9)v=v.substring(0,7);else if(v.length<=5){let P="#";for(let C=1;C<4;C++)P+=v[C]+v[C];v=P}return v+Math.round(g*255).toString(16).padStart(2,"0")}else{if(v[3]==="(")return v.replace(")",`, ${g})`);if(v[4]==="(")return v.substring(0,v.lastIndexOf(","))+`, ${g})`}const b=c(v);return b.type==="color"?b.values[3]=`/${g}`:b.values[3]=g,u(b)}function y(v,g){const b=c(v);if(g=n(g),b.type.indexOf("hsl")!==-1)b.values[2]*=1-g;else if(b.type.indexOf("rgb")!==-1||b.type.indexOf("color")!==-1)for(let P=0;P<3;P+=1)b.values[P]*=1-g;return u(b)}function a(v,g){const b=c(v);if(g=n(g),b.type.indexOf("hsl")!==-1)b.values[2]+=(100-b.values[2])*g;else if(b.type.indexOf("rgb")!==-1)for(let P=0;P<3;P+=1)b.values[P]+=(255-b.values[P])*g;else if(b.type.indexOf("color")!==-1)for(let P=0;P<3;P+=1)b.values[P]+=(1-b.values[P])*g;return u(b)}},60578:(Y,I,e)=>{"use strict";e.d(I,{D:()=>r});var t=e(96540),n=e(75972);const r=t.createContext((0,n.a)());r.displayName="ThemeContext"},75972:(Y,I,e)=>{"use strict";e.d(I,{a:()=>U});function t(){const K=["xs","sm","md","lg","xl","xxl"],w="px",L={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function V(z){return`@media (min-width:${typeof z=="number"?z:L[z]}${w})`}function N(z){return`@media (max-width:${(typeof z=="number"?z:L[z])-5/100}${w})`}return{values:L,up:V,down:N,keys:K,unit:w}}var n=e(2543),r=e(23596);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class o{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,selectedBorder:s.orangeDarkMain,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class m{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,selectedBorder:s.orangeLightMain,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function l(F){const K=new o,w=new m,L=(F.mode??"dark")==="dark"?K:w,{primary:V=L.primary,secondary:N=L.secondary,info:z=L.info,warning:J=L.warning,success:G=L.success,error:H=L.error,tonalOffset:q=L.tonalOffset,hoverFactor:le=L.hoverFactor,contrastThreshold:me=L.contrastThreshold,...k}=F;function ee(j,ne=me){return(0,r.getContrastRatio)(K.text.maxContrast,j,L.background.primary)>=ne?K.text.maxContrast:w.text.maxContrast}const X=({color:j,name:ne})=>{if(j={...j,name:ne},!j.main)throw new Error(`Missing main color for ${ne}`);return j.text||(j.text=j.main),j.border||(j.border=j.text),j.shade||(j.shade=L.mode==="light"?(0,r.darken)(j.main,q):(0,r.lighten)(j.main,q)),j.transparent||(j.transparent=(0,r.alpha)(j.main,.15)),j.contrastText||(j.contrastText=ee(j.main)),j.borderTransparent||(j.borderTransparent=(0,r.alpha)(j.border,.25)),j};return(0,n.merge)({...L,primary:X({color:V,name:"primary"}),secondary:X({color:N,name:"secondary"}),info:X({color:z,name:"info"}),error:X({color:H,name:"error"}),success:X({color:G,name:"success"}),warning:X({color:J,name:"warning"}),getContrastText:ee,emphasize:(j,ne)=>(0,r.emphasize)(j,ne??le)},k)}function i(F,K){const w={padding:1,headerHeight:4,background:F.background.primary,borderColor:F.border.weak,boxShadow:"none"},L={borderColor:F.border.medium,borderHover:F.border.strong,text:F.text.primary,background:F.mode==="dark"?F.background.canvas:F.background.primary};return{height:{sm:3,md:4,lg:6},input:L,panel:w,dropdown:{background:L.background},tooltip:{background:F.background.secondary,text:F.text.primary},dashboard:{background:F.background.canvas,padding:1},overlay:{background:F.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:42},textHighlight:{text:F.warning.contrastText,background:F.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:F.emphasize(F.background.primary,.03)}}}function c(F){return F.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function u(F){const K=F.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:V=>`${(V??1)*K}px`}}function f(F={}){const{gridSize:K=8}=F,w=V=>typeof V=="string"?V:V*K,L=(...V)=>(V.length===0&&(V[0]=1),V.map(N=>{const z=w(N);return typeof z=="number"?`${z}px`:z}).join(" "));return L.gridSize=K,L.x0="0px",L.x0_25="2px",L.x0_5="4px",L.x1="8px",L.x1_5="12px",L.x2="16px",L.x2_5="20px",L.x3="24px",L.x4="32px",L.x5="40px",L.x6="48px",L.x8="64px",L.x10="80px",L}const d={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},E={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function h(F=["all"],K={}){const{duration:w=E.standard,easing:L=d.easeInOut,delay:V=0}=K;return(Array.isArray(F)?F:[F]).map(N=>`${N} ${typeof w=="string"?w:a(w)} ${L} ${typeof V=="string"?V:a(V)}`).join(",")}function y(F){if(!F)return 0;const K=F/36;return Math.round((4+15*K**.25+K/5)*10)}function a(F){return`${Math.round(F)}ms`}function v(){return{create:h,duration:E,easing:d,getAutoHeightDuration:y}}const g='"Inter", "Helvetica", "Arial", sans-serif',b="'Roboto Mono', monospace";function P(F,K={}){const{fontFamily:w=g,fontFamilyMonospace:L=b,fontSize:V=14,fontWeightLight:N=300,fontWeightRegular:z=400,fontWeightMedium:J=500,fontWeightBold:G=500,htmlFontSize:H=14}=K,q=V/14,le=X=>`${X/H*q}rem`,me=(X,j,ne,te,oe)=>{if(ne%2!==0||j%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:w,fontWeight:X,fontSize:le(j),lineHeight:ne/j,...w===g?{letterSpacing:`${C(te/j)}em`}:{},...oe}},k={h1:me(z,28,32,-.25),h2:me(z,24,28,0),h3:me(z,22,24,0),h4:me(z,18,22,.25),h5:me(z,16,22,0),h6:me(J,14,22,.15),body:me(z,V,22,.15),bodySmall:me(z,12,18,.15),code:{...me(z,14,16,.15),fontFamily:L}};return{htmlFontSize:H,pxToRem:le,fontFamily:w,fontFamilyMonospace:L,fontSize:V,fontWeightLight:N,fontWeightRegular:z,fontWeightMedium:J,fontWeightBold:G,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...k}}function C(F){return Math.round(F*1e5)/1e5}var D=e(25137);function T(F){const K={name:"Grafana Default",typography:{fontFamily:{sansSerif:F.typography.fontFamily,monospace:F.typography.fontFamilyMonospace},size:{base:`${F.typography.fontSize}px`,xs:F.typography.size.xs,sm:F.typography.size.sm,md:F.typography.size.md,lg:F.typography.size.lg},heading:{h1:F.typography.h1.fontSize,h2:F.typography.h2.fontSize,h3:F.typography.h3.fontSize,h4:F.typography.h4.fontSize,h5:F.typography.h5.fontSize,h6:F.typography.h6.fontSize},weight:{light:F.typography.fontWeightLight,regular:F.typography.fontWeightRegular,semibold:F.typography.fontWeightMedium,bold:F.typography.fontWeightBold},lineHeight:{xs:F.typography.bodySmall.lineHeight,sm:F.typography.bodySmall.lineHeight,md:F.typography.body.lineHeight,lg:F.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${F.breakpoints.values.xs}px`,sm:`${F.breakpoints.values.sm}px`,md:`${F.breakpoints.values.md}px`,lg:`${F.breakpoints.values.lg}px`,xl:`${F.breakpoints.values.xl}px`,xxl:`${F.breakpoints.values.xxl}px`},spacing:{base:F.spacing.gridSize,insetSquishMd:F.spacing(.5,1),d:F.spacing(2),xxs:F.spacing(.25),xs:F.spacing(.5),sm:F.spacing(1),md:F.spacing(2),lg:F.spacing(3),xl:F.spacing(4),gutter:F.spacing(4),formSpacingBase:F.spacing.gridSize,formMargin:`${F.spacing.gridSize*4}px`,formFieldsetMargin:`${F.spacing.gridSize*2}px`,formInputHeight:F.spacing.gridSize*4,formButtonHeight:F.spacing.gridSize*4,formInputPaddingHorizontal:`${F.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${F.spacing.gridSize/2}px`,formInputMargin:`${F.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${F.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:F.shape.borderRadius(1),md:F.shape.borderRadius(2),lg:F.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:F.spacing.gridSize*F.components.height.sm,md:F.spacing.gridSize*F.components.height.md,lg:F.spacing.gridSize*F.components.height.lg},panelPadding:F.components.panel.padding*F.spacing.gridSize,panelHeaderHeight:F.spacing.gridSize*F.components.panel.headerHeight,zIndex:F.zIndex},w={...M,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},L={bg1:F.colors.background.primary,bg2:F.colors.background.secondary,bg3:F.colors.action.hover,dashboardBg:F.colors.background.canvas,bgBlue1:F.colors.primary.main,bgBlue2:F.colors.primary.shade},V={border1:F.colors.border.weak,border2:F.colors.border.medium,border3:F.colors.border.strong},N={textStrong:F.colors.text.maxContrast,textHeading:F.colors.text.primary,text:F.colors.text.primary,textSemiWeak:F.colors.text.secondary,textWeak:F.colors.text.secondary,textFaint:F.colors.text.disabled,textBlue:F.colors.primary.text},z={formLabel:F.colors.text.primary,formDescription:F.colors.text.secondary,formInputBg:F.components.input.background,formInputBgDisabled:F.colors.action.disabledBackground,formInputBorder:F.components.input.borderColor,formInputBorderHover:F.components.input.borderHover,formInputBorderActive:F.colors.primary.border,formInputBorderInvalid:F.colors.error.border,formInputPlaceholderText:F.colors.text.disabled,formInputText:F.components.input.text,formInputDisabledText:F.colors.action.disabledText,formFocusOutline:F.colors.primary.main,formValidationMessageText:F.colors.error.contrastText,formValidationMessageBg:F.colors.error.main};return{...K,type:F.colors.mode==="dark"?D.I.Dark:D.I.Light,isDark:F.isDark,isLight:F.isLight,name:F.name,palette:{...w,brandPrimary:w.orange,brandSuccess:F.colors.success.main,brandWarning:F.colors.warning.main,brandDanger:F.colors.error.main,queryRed:F.colors.error.text,queryGreen:F.colors.success.text,queryPurple:"#fe85fc",queryOrange:w.orange,online:F.colors.success.main,warn:F.colors.success.main,critical:F.colors.success.main},colors:{...L,...V,...z,...N,bodyBg:F.colors.background.canvas,panelBg:F.components.panel.background,panelBorder:F.components.panel.borderColor,pageHeaderBg:F.colors.background.canvas,pageHeaderBorder:F.colors.background.canvas,dropdownBg:z.formInputBg,dropdownShadow:w.black,dropdownOptionHoverBg:L.bg2,link:F.colors.text.primary,linkDisabled:F.colors.text.disabled,linkHover:F.colors.text.maxContrast,linkExternal:F.colors.text.link},shadows:{listItem:"none"},visualization:F.visualization}}const M={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var O=e(24293);function S(F){const K=F.mode==="light"?x():p(),w={};for(const N of K)for(const z of N.shades)if(w[z.name]=z.color,z.aliases)for(const J of z.aliases)w[J]=z.color;w.transparent=F.mode==="light"?"rgba(255, 255, 255, 0)":"rgba(0,0,0,0)",w["panel-bg"]=F.background.primary,w.text=F.text.primary;const L=N=>{if(!N)return O.F;const z=w[N];if(z)return z;if(N[0]==="#"||N.indexOf("rgb")>-1)return N;const J=R[N.toLowerCase()];return J?(w[N]=J,J):N},V=A();return{hues:K,palette:V,getColorByName:L}}function p(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function x(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function A(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const R={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},B={activePanel:999,navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function U(F={}){const{colors:K={},spacing:w={},shape:L={},typography:V={}}=F,N=l(K),z=t(),J=f(w),G=u(L),H=P(N,V),q=c(N),le=v(),me=i(N,q),k=S(N),ee={name:N.mode==="dark"?"Dark":"Light",isDark:N.mode==="dark",isLight:N.mode==="light",colors:N,breakpoints:z,spacing:J,shape:G,components:me,typography:H,shadows:q,transitions:le,visualization:k,zIndex:{...B},flags:{}};return{...ee,v1:T(ee)}}},74529:(Y,I,e)=>{"use strict";e.d(I,{Dx:()=>s.D,MV:()=>r,an:()=>t.a,gh:()=>n.g,k7:()=>n.k});var t=e(75972),n=e(97594),r=e(23596),s=e(60578)},97594:(Y,I,e)=>{"use strict";e.d(I,{g:()=>r,k:()=>s});var t=e(83077),n=e(75972);function r(c){return(o.getIfExists(c)??o.get("dark")).build()}function s(c){return o.list().filter(u=>c?!0:!u.isExtra)}const o=new t.O(()=>[{id:"system",name:"System preference",build:m},{id:"dark",name:"Dark",build:()=>(0,n.a)({colors:{mode:"dark"}})},{id:"light",name:"Light",build:()=>(0,n.a)({colors:{mode:"light"}})},{id:"blue-night",name:"Blue night",build:i,isExtra:!0},{id:"midnight",name:"Midnight",build:l,isExtra:!0}]);function m(){const u=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return r(u)}function l(){const c="204, 204, 220";return(0,n.a)({name:"Midnight",colors:{mode:"dark",background:{canvas:"#000000",primary:"#000000",secondary:"#181818"},border:{weak:`rgba(${c}, 0.17)`,medium:`rgba(${c}, 0.25)`,strong:`rgba(${c}, 0.35)`}}})}function i(){return(0,n.a)({name:"Blue night",colors:{mode:"dark",background:{canvas:"#15161d",primary:"#15161d",secondary:"#1d1f2e"},border:{weak:"#2e304f",medium:"#2e304f",strong:"#2e304f"}}})}},75059:(Y,I,e)=>{"use strict";e.d(I,{AS:()=>c,C6:()=>u,Em:()=>l,H3:()=>f,Nw:()=>i,gy:()=>m});var t=e(2543),n=e.n(t),r=e(39070),s=e(11261),o=e(83077),m=(b=>(b.sum="sum",b.max="max",b.min="min",b.logmin="logmin",b.mean="mean",b.variance="variance",b.stdDev="stdDev",b.last="last",b.first="first",b.count="count",b.range="range",b.diff="diff",b.diffperc="diffperc",b.delta="delta",b.step="step",b.firstNotNull="firstNotNull",b.lastNotNull="lastNotNull",b.changeCount="changeCount",b.distinctCount="distinctCount",b.allIsZero="allIsZero",b.allIsNull="allIsNull",b.allValues="allValues",b.uniqueValues="uniqueValues",b))(m||{});function l(b){return Object.keys(m).includes(b)}function i(b){const{field:P,reducers:C}=b;if(!P||!C||C.length<1)return{};if(P.state?.calcs){const x=[];for(const A of C)P.state.calcs.hasOwnProperty(A)||x.push(A);if(x.length<1)return{...P.state.calcs}}P.state||(P.state={});const D=c.list(C),T=P.values;if(T&&T.length<1){const x={...P.state.calcs};for(const A of D)x[A.id]=A.emptyInputResult!==null?A.emptyInputResult:null;return P.state.calcs=x}const{nullValueMode:M=r.UW.Ignore}=P.config,O=M===r.UW.Ignore,S=M===r.UW.AsZero;if(D.length===1&&D[0].reduce){const x=D[0].reduce(P,O,S);return P.state.calcs={...P.state.calcs,...x},x}let p=f(P,O,S);for(const x of D)!p.hasOwnProperty(x.id)&&x.reduce&&(p={...p,...x.reduce(P,O,S)});return P.state.calcs={...P.state.calcs,...p},p}const c=new o.O(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value (also excludes NaNs)",standard:!0,aliasIds:["current"],reduce:y,preservesUnits:!0},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:h,preservesUnits:!0},{id:"firstNotNull",name:"First *",description:"First non-null value (also excludes NaNs)",standard:!0,reduce:E,preservesUnits:!0},{id:"first",name:"First",description:"First Value",standard:!0,reduce:d,preservesUnits:!0},{id:"min",name:"Min",description:"Minimum Value",standard:!0,preservesUnits:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0,preservesUnits:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"],preservesUnits:!0},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:a,preservesUnits:!0},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:a,preservesUnits:!0},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"],preservesUnits:!0},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0,preservesUnits:!1},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0,preservesUnits:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0,preservesUnits:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0,preservesUnits:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0,preservesUnits:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0,preservesUnits:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0,preservesUnits:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0,preservesUnits:!1},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:v,preservesUnits:!1},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:g,preservesUnits:!1},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0,preservesUnits:!1},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:b=>({allValues:[...b.values]}),preservesUnits:!1},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:b=>({uniqueValues:[...new Set(b.values)]}),preservesUnits:!1}]),u={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0};function f(b,P,C){const D={...u},T=b.values;if(!T)return D;const M=b.type===s.PU.number||b.type===s.PU.time;for(let O=0;O<T.length;O++){let S=T[O];if(O===0&&(D.first=S),D.last=S,S==null){if(P)continue;C&&(S=0)}if(D.count++,S!=null&&!Number.isNaN(S)){const p=D.firstNotNull===null;if(p&&(D.firstNotNull=S),M){if(D.sum+=S,D.allIsNull=!1,D.nonNullCount++,!p){const x=S-D.lastNotNull;D.step>x&&(D.step=x),D.lastNotNull>S?(D.previousDeltaUp=!1,O===T.length-1&&(D.delta+=S)):(D.previousDeltaUp?D.delta+=x:D.delta+=S,D.previousDeltaUp=!0)}S>D.max&&(D.max=S),S<D.min&&(D.min=S),S<D.logmin&&S>0&&(D.logmin=S)}S!==0&&(D.allIsZero=!1),D.lastNotNull=S}}return D.max===-Number.MAX_VALUE&&(D.max=null),D.min===Number.MAX_VALUE&&(D.min=null),D.step===Number.MAX_VALUE&&(D.step=null),D.nonNullCount>0&&(D.mean=D.sum/D.nonNullCount),D.allIsNull&&(D.allIsZero=!1),D.max!==null&&D.min!==null&&(D.range=D.max-D.min),(0,t.isNumber)(D.firstNotNull)&&(0,t.isNumber)(D.lastNotNull)&&(D.diff=D.lastNotNull-D.firstNotNull),(0,t.isNumber)(D.firstNotNull)&&(0,t.isNumber)(D.diff)&&(D.diffperc=D.diff/D.firstNotNull),D}function d(b,P,C){return{first:b.values[0]}}function E(b,P,C){const D=b.values;for(let T=0;T<D.length;T++){const M=D[T];if(M!=null&&!Number.isNaN(M))return{firstNotNull:M}}return{firstNotNull:null}}function h(b,P,C){const D=b.values;return{last:D[D.length-1]}}function y(b,P,C){const D=b.values;let T=D.length-1;for(;T>=0;){const M=D[T--];if(M!=null&&!Number.isNaN(M))return{lastNotNull:M}}return{lastNotNull:null}}function a(b,P,C){if(!(b.type===s.PU.number||b.type===s.PU.time))return{variance:0,stdDev:0};let D=0,T=0,M=0;const O=b.values;for(let S=0;S<O.length;S++){const p=O[S];if(p!=null){M++;let x=T;T+=(p-x)/M,D+=(p-x)*(p-T)}}if(M>0){const S=D/M;return{variance:S,stdDev:Math.sqrt(S)}}return{variance:0,stdDev:0}}function v(b,P,C){const D=b.values;let T=0,M=!0,O=null;for(let S=0;S<D.length;S++){let p=D[S];if(p===null){if(P)continue;C&&(p=0)}!M&&O!==p&&T++,M=!1,O=p}return{changeCount:T}}function g(b,P,C){const D=b.values,T=new Set;for(let M=0;M<D.length;M++){let O=D[M];if(O===null){if(P)continue;C&&(O=0)}T.add(O)}return{distinctCount:T.size}}},34687:(Y,I,e)=>{"use strict";e.d(I,{AS:()=>o.AS,C6:()=>o.C6,CF:()=>E.C,Ct:()=>t.Ct,Dq:()=>r.Dq,Em:()=>o.Em,Fy:()=>n.F,H1:()=>u.H1,H3:()=>o.H3,Js:()=>t.Js,KP:()=>c.Fd,MS:()=>d.M,NS:()=>r.NS,NX:()=>u.NX,Nw:()=>o.Nw,OA:()=>u.OA,PP:()=>i.PP,RE:()=>r.RE,Rt:()=>u.Rt,Uh:()=>u.Uh,ZU:()=>u.ZU,c9:()=>s.c,cV:()=>t.cV,cg:()=>u.cg,d$:()=>u.d$,dA:()=>u.dA,g2:()=>c.g2,gy:()=>o.gy,h9:()=>l.h,hI:()=>r.hI,ix:()=>u.ix,jR:()=>t.jR,kK:()=>r.kK,ks:()=>f.ks,m6:()=>m.m,m_:()=>l.m,p3:()=>u.p3,rW:()=>u.rW,rs:()=>u.rs,sJ:()=>r.sJ});var t=e(1173),n=e(18282),r=e(85200),s=e(57934),o=e(75059),m=e(2514),l=e(97497),i=e(58972),c=e(73060),u=e(77678),f=e(50311),d=e(46294),E=e(39624)},85200:(Y,I,e)=>{"use strict";e.d(I,{Dq:()=>g,NS:()=>v,RE:()=>y,hI:()=>a,kK:()=>b,sJ:()=>h});var t=e(83077),n=e(7029),r=e(24814),s=e(58972),o=e(72693),m=e(8549),l=e(83855),i=e(60005),c=e(21262),u=e(70218),f=e(55008),d=e(16378),E=e(75754);const h=new t.O(()=>[...(0,o.nz)(),...(0,n._)(),...(0,s.P7)(),...(0,l.W)(),r.u]),y=new t.O(()=>[...(0,o.UM)(),...(0,s.Y7)(),...(0,m.i)()]),a=new t.O(()=>[...(0,c._)(),...(0,u.E)(),...(0,i.d)(),...(0,E.m)(),...(0,f.G)(),...(0,d.z)()]);function v(P){const C=h.get(P.id);if(!C)throw new Error("Unknown field matcher: "+P.id);return C.get(P.options)}function g(P){const C=y.get(P.id);if(!C)throw new Error("Unknown frame matcher: "+P.id);return C.get(P.options)}function b(P){const C=a.get(P.id);if(!C)throw new Error("Unknown value matcher: "+P.id);return C.get(P.options)}},58972:(Y,I,e)=>{"use strict";e.d(I,{P7:()=>h,PP:()=>o,Y7:()=>y});var t=e(28240),n=e(54479),r=e(11261),s=e(1173),o=(a=>(a.exclude="exclude",a.include="include",a))(o||{});const m={id:s.Ct.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:a=>{const g=i(new Set([a]));return(b,P,C)=>a===b.name||a===(0,t.Ct)(b,P,C)||!!(g&&g(b,P,C))},getOptionsDisplayText:a=>`Field name: ${a}`},l={id:s.Ct.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:a=>{const{names:v,mode:g="include"}=a,b=new Set(v??[]),P=i(b),C=(D,T,M)=>b.has(D.name)||b.has((0,t.Ct)(D,T,M))||!!(P&&P(D,T,M));return g==="exclude"?(D,T,M)=>!C(D,T,M):C},getOptionsDisplayText:a=>{const{names:v,mode:g}=a,b=(v??[]).join(", ");return g==="exclude"?`All except: ${b}`:`All of: ${b}`}};function i(a){let v;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(a.has(r.Bc)?v=(b,P)=>!!b.labels&&b.labels?.__name__===b.name:(a.has("Time")||a.has("time"))&&(v=(b,P)=>P.meta?.typeVersion==null&&b.type===r.PU.time)),v}const c={id:s.Ct.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:a=>{const v=d(a);return(g,b,P)=>{const C=(0,t.Ct)(g,b,P);return!!v&&v.test(C)}},getOptionsDisplayText:a=>`Field name by pattern: ${a}`},u={id:s.Ct.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:a=>(v,g,b)=>g.refId===a,getOptionsDisplayText:a=>`Math all fields returned by query with reference ID: ${a}`},f={id:s.Ct.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:a=>{const v=c.get(a?.pattern||""),g=l.get({mode:"include",names:a?.names??[]});return(b,P,C)=>g(b,P,C)||v(b,P,C)},getOptionsDisplayText:a=>{const v=a?.pattern??"",g=a?.names?.join(",")??"";return`Field name by pattern: ${v} or names: ${g}`}},d=a=>{if(a)try{return(0,n.dO)(a)}catch(v){console.error(v);return}},E={id:s.jR.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:a=>{const v=(0,n.dO)(a);return g=>v.test(g.name||"")},getOptionsDisplayText:a=>`Frame name: ${a}`};function h(){return[m,c,l,f,u]}function y(){return[E]}},72693:(Y,I,e)=>{"use strict";e.d(I,{UM:()=>P,Yg:()=>u,nz:()=>b,zx:()=>E});var t=e(11261),n=e(85200),r=e(1173);const s={id:r.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const D=C.map(T=>(0,n.NS)(T));return(T,M,O)=>{for(const S of D)if(S(T,M,O))return!0;return!1}},getOptionsDisplayText:C=>{let D="";for(const T of C){D.length>0&&(D+=" OR ");const M=n.sJ.get(T.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return D}},o={id:r.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const D=C.map(T=>(0,n.Dq)(T));return T=>{for(const M of D)if(M(T))return!0;return!1}},getOptionsDisplayText:C=>{let D="";for(const T of C){D.length>0&&(D+=" OR ");const M=n.RE.get(T.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return D}},m={id:r.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const D=C.map(T=>(0,n.NS)(T));return(T,M,O)=>{for(const S of D)if(!S(T,M,O))return!1;return!0}},getOptionsDisplayText:C=>{let D="";for(const T of C){D.length>0&&(D+=" AND ");const M=n.sJ.get(T.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return D}},l={id:r.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const D=C.map(T=>(0,n.Dq)(T));return T=>{for(const M of D)if(!M(T))return!1;return!0}},getOptionsDisplayText:C=>{let D="";for(const T of C){D.length>0&&(D+=" AND ");const M=n.RE.get(T.id);D+=M.getOptionsDisplayText?M.getOptionsDisplayText(T):M.name}return D}},i={id:r.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const D=(0,n.NS)(C);return(T,M,O)=>!D(T,M,O)},getOptionsDisplayText:C=>{const D=n.sJ.get(C.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(C.options):D.name)}},c={id:r.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const D=(0,n.Dq)(C);return T=>!D(T)},getOptionsDisplayText:C=>{const D=n.RE.get(C.id);return"NOT "+(D.getOptionsDisplayText?D.getOptionsDisplayText(C.options):D.name)}},u=C=>!0,f=C=>!0,d=C=>!1,E=C=>C.type!==t.PU.time,h=C=>!1,y={id:r.cV.alwaysMatch,name:"All Fields",description:"Always Match",get:C=>u,getOptionsDisplayText:C=>"Always"},a={id:r.cV.alwaysMatch,name:"All Frames",description:"Always Match",get:C=>f,getOptionsDisplayText:C=>"Always"},v={id:r.cV.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:C=>d,getOptionsDisplayText:C=>"Never"},g={id:r.cV.neverMatch,name:"No Frames",description:"Never Match",get:C=>h,getOptionsDisplayText:C=>"Never"};function b(){return[s,m,i,y,v]}function P(){return[o,l,c,a,g]}},97497:(Y,I,e)=>{"use strict";e.d(I,{h:()=>r,m:()=>n});var t=e(83077),n=(s=>(s.Combine="combine",s.CalculateNewFields="calculateNewFields",s.CreateNewVisualization="createNewVisualization",s.Filter="filter",s.PerformSpatialOperations="performSpatialOperations",s.Reformat="reformat",s.ReorderAndRename="reorderAndRename",s))(n||{});const r=new t.O},2514:(Y,I,e)=>{"use strict";e.d(I,{m:()=>c});var t=e(62467),n=e(69862),r=e(81160),s=e(85200),o=e(97497);const m=(f,d)=>E=>{const h=o.h.get(f.id);if(!h)return E;const a={...h.transformation.defaultOptions??{},...f.options},v=f.filter?.options?(0,s.Dq)(f.filter):void 0;return E.pipe((0,n.Z)(g=>(0,t.of)(l(g,v)).pipe(h.transformation.operator(a,d),i(g,h,v))))};function l(f,d){return d?f.filter(E=>d(E)):f}const i=(f,d,E)=>h=>h.pipe((0,r.T)(y=>{if(y===f)return y;if(E){let a=0;const v=f.filter((g,b)=>{const P=!E(g);return P&&!a&&(a=b),P});v.length&&y.splice(a,0,...v)}return y}));function c(f,d,E){const h=(0,t.of)(d);if(!f.length)return h;const y=[],a=E??{interpolate:v=>v};for(let v=0;v<f.length;v++){const g=f[v];if(u(g))y.push(g(a));else{if(g.disabled)continue;y.push(m(g,a))}}return h.pipe.apply(h,y)}function u(f){return typeof f=="function"}},57934:(Y,I,e)=>{"use strict";e.d(I,{c:()=>ge});var t=e(66350),n=e(82150),r=e(50311),s=e(34125),o=e(64224),m=e(35602),l=e(1173),i=e(18282);const c={id:i.F.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(re,ye)=>Be=>{const ve={};return re.include&&(ve.include={id:l.jR.byRefId,options:re.include}),re.exclude&&(ve.exclude={id:l.jR.byRefId,options:re.exclude}),Be.pipe(o.I.operator(ve,ye))}};var u=e(73376),f=e(15400),d=e(81160),E=e(28240),h=e(81010);const y={id:i.F.formatTime,name:"Format time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},isApplicable:re=>{for(const ye of re)for(const Be of ye.fields)if(Be.type==="time")return h.M.Applicable;return h.M.NotApplicable},isApplicableDescription:"The Format time transformation requires a time field to work. No time field could be found.",operator:(re,ye)=>Be=>Be.pipe((0,d.T)(ve=>a(re,ve,ye)))},a=({timeField:re,outputFormat:ye,timezone:Be},ve,Me)=>!Array.isArray(ve)||ve.length===0?ve:((0,E.Fm)(ve),ye=Me?.interpolate(ye)??ye,ve.map(ke=>({...ke,fields:ke.fields.map(Se=>(Se.state?.displayName===re&&(Se=(0,r.Xv)(Se,ye,{timeZone:Be})),Se))})));var v=e(25094),g=e(68133),b=e(11261),P=e(85200);const C="Time",D="Time",T="Value",M=h.N.Empty,O=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,S={id:i.F.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:C,rowField:D,valueField:T},isApplicable:re=>{let ye=0;for(const Be of re)ye+=Be.fields.length;return ye>=3?h.M.Applicable:h.M.NotApplicable},isApplicableDescription:re=>{let ye=0;for(const Be of re)ye+=Be.fields.length;return`Grouping to matrix requiers at least 3 fields to work. Currently there are ${ye} fields.`},operator:re=>ye=>ye.pipe((0,d.T)(Be=>{const ve=re.columnField||C,Me=re.rowField||D,ke=re.valueField||T,Se=re.emptyValue||M;if(Be.length!==1)return Be;const We=Be[0],De=x(We,ve),pe=x(We,Me),Ne=x(We,ke),Le=`${Me}\\${ve}`;if(!De||!pe||!Ne)return Be;const He=p(De.values),je=p(pe.values),at={};for(let $e=0;$e<Ne.values.length;$e++){const xe=De.values[$e],Fe=pe.values[$e],Ee=Ne.values[$e];at[xe]||(at[xe]={}),at[xe][Fe]=Ee}const Ye=[{name:Le,values:je,type:b.PU.string,config:{}}];for(const $e of He){let xe=[];for(const Fe of je){const Ee=at[$e][Fe]??A(Se);xe.push(Ee)}O&&typeof $e=="number"&&(Ne.config={...Ne.config,displayNameFromDS:void 0}),Ye.push({name:$e.toString(),values:xe,config:Ne.config,type:Ne.type})}return[{fields:Ye,length:je.length}]}))};function p(re){const ye=new Set;for(let Be=0;Be<re.length;Be++)ye.add(re[Be]);return Array.from(ye)}function x(re,ye){for(let Be=0;Be<re.fields.length;Be++){const ve=re.fields[Be];let Me;if(O?Me=P.sJ.get(l.Ct.byName).get(ye)(ve,re,[re]):Me=ye===(0,E.Ct)(ve),Me)return ve}return null}function A(re){switch(re){case h.N.False:return!1;case h.N.True:return!0;case h.N.Null:return null;case h.N.Empty:default:return""}}var R=e(77678),B=e(41511),U=e(6829),F=e(67641);const K=10,w={id:i.F.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:K},operator:(re,ye)=>Be=>Be.pipe((0,d.T)(ve=>{let Me=K;return re.limitField!==void 0&&(typeof re.limitField=="string"?(0,F.w)()?Me=parseInt(ye.interpolate(re.limitField),10):Me=parseInt(re.limitField,10):Me=re.limitField),ve.map(ke=>ke.length>Me?{...ke,fields:ke.fields.map(Se=>({...Se,values:Se.values.slice(0,Me)})),length:Me}:ke)}))};var L=e(58140),V=e(64586),N=e(82280);const z={id:i.F.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:re=>ye=>ye.pipe((0,d.T)(Be=>{const ve=J(re.renameByName);return!Array.isArray(Be)||Be.length===0?Be:Be.map(Me=>({...Me,fields:ve(Me)}))}))},J=re=>ye=>!re||Object.keys(re).length===0?ye.fields:ye.fields.map(Be=>{const ve=(0,E.Ct)(Be,ye),Me=re[ve];return typeof Me!="string"||Me.length===0?Be:{...Be,config:{...Be.config,displayName:Me},state:{...Be.state,displayName:Me}}}),G={id:i.F.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{},includeByName:{}},isApplicable:re=>re.length>1?h.M.NotPossible:h.M.Applicable,operator:(re,ye)=>Be=>Be.pipe(m.D.operator({include:re.includeByName?{names:H(re.includeByName)}:void 0,exclude:{names:H(re.excludeByName)}},ye),N.x.operator(re,ye),z.operator(re,ye))},H=re=>re?Object.keys(re).filter(ye=>re[ye]):[];var q=e(21128),le=e(54479);const me={id:i.F.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:re=>ye=>ye.pipe((0,d.T)(Be=>!Array.isArray(Be)||Be.length===0?Be:Be.map(k(re))))},k=re=>ye=>{const Be=(0,le.dO)(re.regex),ve=ye.fields.map(Me=>{const ke=(0,E.Ct)(Me,ye);if(!Be.test(ke))return Me;const Se=ke.replace(Be,re.renamePattern);return{...Me,config:{...Me.config,displayName:Se},state:{...Me.state,displayName:Se}}});return{...ye,fields:ve}};var ee=e(2543),X=e(37471),j=e(14236),ne=e(19845);const te={id:i.F.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:re=>ye=>ye.pipe((0,d.T)(Be=>{if(!Array.isArray(Be)||Be.length===0||(Be=Be.filter(We=>We.length>0),!(0,ne.jq)(Be)))return Be;const ve={},Me=new Set,ke=new X.k,Se={name:b.aI,values:[],config:{},type:b.PU.string};for(let We=0;We<Be.length;We++){const De=Be[We];for(let pe=0;pe<De.fields.length;pe++){const Ne=De.fields[pe];if(Ne.type===b.PU.time){ve[We]=pe,Me.has(b.LE)||(ke.addField(oe(Ne,b.LE)),ke.addField(Se),Me.add(b.LE));continue}Me.has(b.Bc)||(ke.addField(oe(Ne,b.Bc)),Me.add(b.Bc))}}for(let We=0;We<Be.length;We++){const De=Be[We];for(let pe=0;pe<De.length;pe++){const Ne=ve[We],Le=Ne===0?1:0;ke.add({[b.LE]:De.fields[Ne].values[pe],[b.aI]:(0,E.Ri)(De),[b.Bc]:De.fields[Le].values[pe]})}}return[(0,j.ES)(ke,0,!0)]}))},oe=(re,ye)=>({...(0,ee.omit)(re,["values","state","labels","config","name"]),name:ye,values:[],config:{...(0,ee.omit)(re.config,["displayName","displayNameFromDS"])}}),ie={id:i.F.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:(re,ye)=>Be=>Be.pipe((0,d.T)(ve=>!Array.isArray(ve)||ve.length===0||!re?.sort?.length?ve:ue(ve,re.sort,ye)))};function ue(re,ye,Be){return re.map(ve=>{const Me=be(ve,ye,Be);return Me.length&&Me[0].index!=null?(0,j.ES)(ve,Me[0].index,Me[0].desc):ve})}function be(re,ye,Be){return ye.map(ve=>ve.index!=null?ve:(0,F.w)()?{...ve,index:re.fields.findIndex(Me=>Be.interpolate(ve.field)===(0,E.Ct)(Me,re))}:{...ve,index:re.fields.findIndex(Me=>ve.field===(0,E.Ct)(Me,re))})}const ge={noopTransformer:V.W,filterFieldsTransformer:o.z,filterFieldsByNameTransformer:m.D,filterFramesTransformer:o.I,filterFramesByRefIdTransformer:c,filterByValueTransformer:u.Sv,formatStringTransformer:f.yt,formatTimeTransformer:y,orderFieldsTransformer:N.x,organizeFieldsTransformer:G,reduceTransformer:q.Wj,concatenateTransformer:n.vz,calculateFieldTransformer:t.SC,joinByFieldTransformer:B.L,seriesToColumnsTransformer:B.L,seriesToRowsTransformer:te,renameFieldsTransformer:z,labelsToFieldsTransformer:U.V,ensureColumnsTransformer:s.b,groupByTransformer:v.of,sortByTransformer:ie,mergeTransformer:L.o,renameByRegexTransformer:me,histogramTransformer:R.OA,convertFieldTypeTransformer:r.zM,groupingToMatrixTransformer:S,limitTransformer:w,groupToNestedTable:g._}},66350:(Y,I,e)=>{"use strict";e.d(I,{Bp:()=>v,SC:()=>T,UY:()=>a,Uj:()=>P,ip:()=>g,sw:()=>K});var t=e(2543),n=e.n(t),r=e(81160),s=e(14236),o=e(28240),m=e(11261),l=e(39070),i=e(11710),c=e(27618),u=e(75059),f=e(85200),d=e(1173),E=e(34125),h=e(18282),y=e(64586),a=(w=>(w.ReduceRow="reduceRow",w.CumulativeFunctions="cumulativeFunctions",w.WindowFunctions="windowFunctions",w.BinaryOperation="binary",w.UnaryOperation="unary",w.Index="index",w))(a||{}),v=(w=>(w.Percentage="percentage",w.Fixed="fixed",w))(v||{}),g=(w=>(w.Trailing="trailing",w.Centered="centered",w))(g||{});const b={reducer:u.gy.sum},P={reducer:u.gy.mean,windowAlignment:"trailing",windowSizeMode:"percentage",windowSize:.1},C={left:"",operator:i.k.Add,right:""},D={operator:c._.Abs,fieldName:""},T={id:h.F.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:u.gy.sum}},operator:(w,L)=>V=>{const N=w&&w.timeSeries!==!1?E.b.operator(null,L):y.W.operator({},L);return w.alias!=null&&(w.alias=L.interpolate(w.alias)),V.pipe(N,(0,r.T)(z=>{const J=w.mode??"reduceRow";let G;switch(J){case"reduceRow":G=R((0,t.defaults)(w.reduce,b),z);break;case"cumulativeFunctions":G=A((0,t.defaults)(w.cumulative,b),z);break;case"windowFunctions":G=M((0,t.defaults)(w.window,P),z);break;case"unary":G=F((0,t.defaults)(w.unary,D),z);break;case"binary":const H={...w.binary,left:L.interpolate(w.binary?.left),right:L.interpolate(w.binary?.right)};G=U((0,t.defaults)(H,C),z);break;case"index":return z.map(q=>{const le=[...Array(q.length).keys()];if(w.index?.asPercentile)for(let k=0;k<le.length;k++)le[k]=le[k]/le.length;const me={name:w.alias??"Row",type:m.PU.number,values:le,config:w.index?.asPercentile?{unit:"percentunit"}:{}};return{...q,fields:w.replaceFields?[me]:[...q.fields,me]}})}return G?z.map(H=>{const q=G(H);if(!q)return H;const le={name:K(w),type:m.PU.number,config:{},values:q};let me=[];if(w.replaceFields){const{timeField:k}=(0,s.KR)(H);k&&w.timeSeries!==!1?me=[k,le]:me=[le]}else me=[...H.fields,le];return{...H,fields:me}}):z}))}};function M(w,L){if(w.windowSize<=0)throw new Error("Add field from calculation transformation - Window size must be larger than 0");let V=(0,f.NS)({id:d.Ct.numeric});return w.field&&(V=(0,f.NS)({id:d.Ct.byNames,options:{names:[w.field]}})),N=>{const z=Math.ceil(w.windowSize*(w.windowSizeMode==="percentage"?N.length:1));let J=null;for(const G of N.fields)if(V(G,N,L)){J=G;break}if(J){if(![u.gy.mean,u.gy.stdDev,u.gy.variance].includes(w.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${w.reducer}`);return w.windowAlignment==="centered"?S(N,w.reducer,J,z):O(N,w.reducer,J,z)}}}function O(w,L,V,N){const z=[];let J=0,G=0;for(let H=0;H<w.length;H++)if(L===u.gy.mean){const q=V.values[H];q!=null&&(G++,J+=q,H>N-1&&(J-=V.values[H-N],G--)),z.push(G===0?0:J/G)}else if(L===u.gy.variance){const q=Math.max(0,H-N+1),le=H+1;z.push(p(V.values.slice(q,le)))}else if(L===u.gy.stdDev){const q=Math.max(0,H-N+1),le=H+1;z.push(x(V.values.slice(q,le)))}return z}function S(w,L,V,N){const z=[];let J=0,G=0;const H=Math.ceil(N/2)-1,q=Math.floor(N/2);for(let le=0;le<w.length;le++){const me=le-q,k=le+H;if(L===u.gy.mean){if(le===0)for(let ee=0;ee<H+1&&ee<V.values.length;ee++)V.values[ee]!=null&&(J+=V.values[ee],G++);else k<V.values.length&&V.values[k]!=null&&(J+=V.values[k],G++),me>0&&V.values[me-1]!=null&&(J-=V.values[me-1],G--);z.push(G===0?0:J/G)}else if(L===u.gy.variance){const ee=V.values.slice(Math.max(0,me),Math.min(k+1,V.values.length));z.push(p(ee))}else if(L===u.gy.stdDev){const ee=V.values.slice(Math.max(0,me),Math.min(k+1,V.values.length));z.push(x(ee))}}return z}function p(w){if(w.length<1)return 0;let L=0,V=0,N=0;for(let J=0;J<w.length;J++){const G=w[J];if(G!=null){N++;let H=V;V+=(G-H)/N,L+=(G-H)*(G-V)}}return N===0?0:L/N}function x(w){return Math.sqrt(p(w))}function A(w,L){let V=(0,f.NS)({id:d.Ct.numeric});if(w.field&&(V=(0,f.NS)({id:d.Ct.byNames,options:{names:[w.field]}})),![u.gy.mean,u.gy.sum].includes(w.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${w.reducer}`);return N=>{let z=null;for(const H of N.fields)if(V(H,N,L)){z=H;break}if(!z)return;const J=[];let G=0;for(let H=0;H<N.length;H++)G+=z.values[H]??0,w.reducer===u.gy.sum?J.push(G):w.reducer===u.gy.mean&&J.push(G/(H+1));return J}}function R(w,L){let V=(0,f.NS)({id:d.Ct.numeric});w.include&&w.include.length&&(V=(0,f.NS)({id:d.Ct.byNames,options:{names:w.include}}));const N=u.AS.get(w.reducer);if(!N)throw new Error(`Unknown reducer: ${w.reducer}`);const z=N.reduce??u.H3,J=w.nullValueMode===l.UW.Ignore,G=w.nullValueMode===l.UW.AsZero;return H=>{const q=[];for(const ee of H.fields)V(ee,H,L)&&q.push(ee.values);const le=q.length,me={name:"temp",values:new Array(le),type:m.PU.number,config:{}},k=[];for(let ee=0;ee<H.length;ee++){for(let X=0;X<le;X++)me.values[X]=q[X][ee];k.push(z(me,J,G)[w.reducer])}return k}}function B(w,L,V){if(!L)return;for(const z of w.fields)if(L===(0,o.Ct)(z,w,V))return z.type===m.PU.boolean?z.values.map(J=>J?1:0):z.values;const N=parseFloat(L);if(!isNaN(N))return new Array(w.length).fill(N)}function U(w,L){const V=i.b.getIfExists(w.operator);return N=>{const z=B(N,w.left,L),J=B(N,w.right,L);if(!z||!J||!V)return;const G=new Array(z.length);for(let H=0;H<G.length;H++)G[H]=V.operation(z[H],J[H]);return G}}function F(w,L){const V=c.j.getIfExists(w.operator);return N=>{let z=[];for(const G of N.fields)w.fieldName===(0,o.Ct)(G,N,L)&&G.type===m.PU.number&&(z=G.values);if(!z.length||!V)return;const J=new Array(z.length);for(let G=0;G<J.length;G++)J[G]=V.operation(z[G]);return J}}function K(w){if(w.alias?.length)return w.alias;switch(w.mode){case"cumulativeFunctions":{const{cumulative:L}=w;return`cumulative ${L?.reducer??""}${L?.field?`(${L.field})`:""}`}case"windowFunctions":{const{window:L}=w;return`${L?.windowAlignment??""} moving ${L?.reducer??""}${L?.field?`(${L.field})`:""}`}case"unary":{const{unary:L}=w;return`${L?.operator??""}${L?.fieldName?`(${L.fieldName})`:""}`}case"binary":{const{binary:L}=w;return`${L?.left??""} ${L?.operator??""} ${L?.right??""}`.replace(/\$/g,"")}case"reduceRow":{const L=u.AS.getIfExists(w.reduce?.reducer);if(L)return L.name}break;case"index":return"Row"}return"math"}},82150:(Y,I,e)=>{"use strict";e.d(I,{vz:()=>o,x1:()=>s});var t=e(81160),n=e(11261),r=e(18282),s=(l=>(l.Drop="drop",l.FieldName="field",l.Label="label",l))(s||{});const o={id:r.F.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:l=>i=>i.pipe((0,t.T)(c=>!Array.isArray(c)||c.length<2?c:[m(c,l)]))};function m(l,i){let c=!0,u=l[0].length;const f=i.frameNameLabel??"frame";let d=[];for(const E of l){u!==E.length&&(c=!1,u=Math.max(u,E.length));for(const h of E.fields){const y={...h};y.state=void 0,E.name&&(i.frameNameMode==="drop"||(i.frameNameMode==="label"?(y.labels={...h.labels},y.labels[f]=E.name):!y.name||y.name===n.Bc?y.name=E.name:y.name=`${E.name} \xB7 ${h.name}`)),d.push(y)}}return c||(d=d.map(E=>{if(E.values.length===u)return E;const h=E.values.slice();return h.length=u,{...E,values:h}})),{fields:d,length:u}}},50311:(Y,I,e)=>{"use strict";e.d(I,{Xv:()=>h,ks:()=>a,s7:()=>c,zM:()=>l});var t=e(81160),n=e(53531),r=e(11261),s=e(85200),o=e(1173),m=e(18282);const l={id:m.F.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(g,b)=>P=>P.pipe((0,t.T)(C=>l.transformer(g,b)(C))),transformer:g=>b=>!Array.isArray(b)||b.length===0?b:i(g,b)??[]};function i(g,b){if(!g.conversions.length)return b;const P=b.map(C=>({...C}));for(const C of g.conversions){if(!C.targetField)continue;const D=s.sJ.get(o.Ct.byName).get(C.targetField);for(const T of P)T.fields=T.fields.map(M=>D(M,T,P)?c(M,C):M)}return P}function c(g,b){switch(b.destinationType){case r.PU.time:return a(g,b.dateFormat);case r.PU.number:return d(g);case r.PU.string:return h(g,b.dateFormat,{timeZone:b.timezone},b.joinWith);case r.PU.boolean:return E(g);case r.PU.enum:return v(g,b.enumConfig);case r.PU.other:return y(g);default:return g}}const u=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function f(g,b){let P=b?{format:b}:void 0;const C=g.values.slice();let D=C.find(M=>M!=null),T=typeof D=="string"&&u.test(D);for(let M=0;M<C.length;M++)if(C[M]){let O=T?Date.parse(C[M]):(0,n.b)(C[M],P).valueOf();C[M]=Number.isFinite(O)?O:null}else C[M]=null;return{...g,type:r.PU.time,values:C}}function d(g){const b=g.values.slice(),P=b.some(C=>typeof C=="string");for(let C=0;C<b.length;C++){let D=b[C];P&&D!=null&&typeof D=="string"&&(D=D.replace(/,/g,""));const T=+D;b[C]=Number.isFinite(T)?T:null}return{...g,type:r.PU.number,values:b}}function E(g){const b=g.values.slice();for(let P=0;P<b.length;P++)b[P]=!!b[P];return{...g,type:r.PU.boolean,values:b}}function h(g,b,P,C){let D=g.values;switch(g.type){case r.PU.time:D=D.map(T=>(0,n.b)(T,P).format(b));break;case r.PU.other:D=D.map(T=>C?.length&&Array.isArray(T)?T.join(C):JSON.stringify(T));break;default:D=D.map(T=>`${T}`)}return{...g,type:r.PU.string,values:D}}function y(g){const b=g.values.slice();for(let P=0;P<b.length;P++)try{b[P]=JSON.parse(b[P])}catch{b[P]=null}return{...g,type:r.PU.other,values:b}}function a(g,b){const P=typeof g.values[0]=="number";return g.type===r.PU.time&&P?g:P?{...g,type:r.PU.time}:f(g,b)}function v(g,b){const P={...b},C=g.values.slice(),D=new Map;if(P.text&&P.text.length>0)for(let T=0;T<P.text.length;T++)D.set(P.text[T],T);else return g;for(let T=0;T<C.length;T++){const M=C[T];C[T]=D.get(M)}return{...g,config:{...g.config,type:{enum:P}},type:r.PU.enum,values:C}}},34125:(Y,I,e)=>{"use strict";e.d(I,{b:()=>o});var t=e(81160),n=e(14236),r=e(18282),s=e(41511);const o={id:r.F.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(l,i)=>c=>c.pipe((0,t.T)(u=>o.transformer(l,i)(u))),transformer:(l,i)=>c=>{const u=m(c);return c.length>1&&u?s.L.transformer({byField:u},i)(c):c}};function m(l){let i;for(const c of l){const{timeField:u}=(0,n.KR)(c);if(!u)return;if(!i)i=u.name;else if(i!==u.name)return}return i}},64224:(Y,I,e)=>{"use strict";e.d(I,{I:()=>m,z:()=>o});var t=e(81160),n=e(85200),r=e(18282),s=e(64586);const o={id:r.F.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(l,i)=>c=>!l.include&&!l.exclude?c.pipe(s.W.operator({},i)):(typeof l.include?.options=="string"?l.include.options=i.interpolate(l.include?.options):typeof l.include?.options?.pattern=="string"&&(l.include.options.pattern=i.interpolate(l.include?.options.pattern)),typeof l.exclude?.options=="string"?l.exclude.options=i.interpolate(l.exclude?.options):typeof l.exclude?.options?.pattern=="string"&&(l.exclude.options.pattern=i.interpolate(l.exclude?.options.pattern)),c.pipe((0,t.T)(u=>{const f=l.include?(0,n.NS)(l.include):null,d=l.exclude?(0,n.NS)(l.exclude):null,E=[];for(const h of u){const y=[];for(let v=0;v<h.fields.length;v++){const g=h.fields[v];if(d){if(d(g,h,u))continue;f||y.push(g)}f&&f(g,h,u)&&y.push(g)}if(!y.length)continue;const a={...h,fields:y};E.push(a)}return E})))},m={id:r.F.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(l,i)=>c=>!l.include&&!l.exclude?c.pipe(s.W.operator({},i)):c.pipe((0,t.T)(u=>{const f=l.include?(0,n.Dq)(l.include):null,d=l.exclude?(0,n.Dq)(l.exclude):null,E=[];for(const h of u){if(d){if(d(h))continue;f||E.push(h)}f&&f(h)&&E.push(h)}return E}))}},35602:(Y,I,e)=>{"use strict";e.d(I,{D:()=>s,R:()=>o});var t=e(1173),n=e(64224),r=e(18282);const s={id:r.F.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(m,l)=>i=>i.pipe(n.z.operator({include:o(l,m.include,m.byVariable),exclude:o(l,m.exclude,m.byVariable)},l))},o=(m,l,i)=>{if(!l)return;const{names:c,pattern:u,variable:f}=l;if(i&&f){const d=m.interpolate(f);if(/\{.*\}/.test(d)){const E=d.slice(1).slice(0,-1).split(",");return{id:t.Ct.byNames,options:{names:E}}}return{id:t.Ct.byNames,options:{names:d.split(",")}}}if(!((!Array.isArray(c)||c.length===0)&&!u))return u?!Array.isArray(c)||c.length===0?{id:t.Ct.byRegexp,options:u}:{id:t.Ct.byRegexpOrNames,options:l}:{id:t.Ct.byNames,options:{names:c}}}},73376:(Y,I,e)=>{"use strict";e.d(I,{Sm:()=>c,Sv:()=>u,j4:()=>i});var t=e(81160),n=e(28240),r=e(85200),s=e(1173),o=e(18282),m=e(64586),l=e(67641),i=(E=>(E.exclude="exclude",E.include="include",E))(i||{}),c=(E=>(E.all="all",E.any="any",E))(c||{});const u={id:o.F.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(E,h)=>y=>{const a=E.filters,v=E.match==="all",g=E.type==="include";if(!Array.isArray(a)||a.length===0)return y.pipe(m.W.operator({},h));const b=[];return(0,l.w)()&&b.push(...a.map(P=>{if(P.config.id===s.Js.between){const C=h.interpolate(P.config.options.from),D=h.interpolate(P.config.options.to);return{...P,config:{...P.config,options:{...P.config.options,to:D,from:C}}}}else{if(P.config.id===s.Js.regex)return P;if(P.config.options.value){const C=h.interpolate(P.config.options.value),D={...P,config:{...P.config,options:{...P.config.options,value:C}}};return D.config.options.value=C,D}}return P})),y.pipe((0,t.T)(P=>{if(P.length===0)return P;const C=[],D=d(P);for(const T of P){const M=new Set;let O;(0,l.w)()?O=f(b,D):O=f(a,D);for(let x=0;x<T.length;x++){if(M.has(x))continue;let A=!0;for(const R of O){const B=R(x,T,P);if(!v&&B){A=!0;break}if(v&&!B){A=!1;break}A=B}A&&M.add(x)}const S=[],p=g?M.size:P[0].length-M.size;for(const x of T.fields){const A=[];for(let R=0;R<T.length;R++){if(g&&M.has(R)){A.push(x.values[R]);continue}if(!g&&!M.has(R)){A.push(x.values[R]);continue}}S.push({...x,values:A,state:{}})}C.push({...T,fields:S,length:p})}return C}))}},f=(E,h)=>{const y=()=>!1;return E.map(a=>{const v=h[a.fieldName]??-1;if(v<0)return console.warn(`[FilterByValue] Could not find index for field name: ${a.fieldName}`),y;const g=(0,r.kK)(a.config);return(b,P,C)=>g(b,P.fields[v],P,C)})},d=E=>{const h={};for(const y of E)y.fields.forEach((a,v)=>{const g=(0,n.Ct)(a,y,E);h[g]=v});return h}},15400:(Y,I,e)=>{"use strict";e.d(I,{gs:()=>m,yt:()=>c});var t=e(81160),n=e(11261),r=e(85200),s=e(1173),o=e(18282),m=(f=>(f.UpperCase="Upper Case",f.LowerCase="Lower Case",f.SentenceCase="Sentence Case",f.TitleCase="Title Case",f.PascalCase="Pascal Case",f.CamelCase="Camel Case",f.SnakeCase="Snake Case",f.KebabCase="Kebab Case",f.Trim="Trim",f.Substring="Substring",f))(m||{});const l=f=>{const d=f.split(" ");for(let E=0;E<d.length;E++)d[E]=d[E].charAt(0).toUpperCase()+d[E].slice(1).toLowerCase();return d},i=f=>d=>d.values.map(E=>{switch(f.outputFormat){case"Upper Case":return E.toUpperCase();case"Lower Case":return E.toLowerCase();case"Sentence Case":return E.charAt(0).toUpperCase()+E.slice(1);case"Title Case":return l(E).join(" ");case"Pascal Case":return l(E).join("");case"Camel Case":return E=l(E).join(""),E.charAt(0).toLowerCase()+E.slice(1);case"Snake Case":return E.toLowerCase().split(" ").join("_");case"Kebab Case":return E.toLowerCase().split(" ").join("-");case"Trim":return E.trim();case"Substring":return E.substring(f.substringStart,f.substringEnd)}}),c={id:o.F.formatString,name:"Format string",description:"Manipulate string fields formatting",defaultOptions:{stringField:"",outputFormat:"Upper Case"},operator:f=>d=>d.pipe((0,t.T)(E=>{if(E.length===0)return E;const h=r.sJ.get(s.Ct.byName).get(f.stringField),y=i(f),a=u(h,y);return E.map(v=>({...v,fields:a(v,E)}))}))},u=(f,d)=>(E,h)=>E.fields.map(y=>{if(f(y,E,h)){const a=d(y);return{...y,type:n.PU.string,values:a}}return y})},25094:(Y,I,e)=>{"use strict";e.d(I,{Ce:()=>h,R3:()=>i,Y2:()=>E,of:()=>c});var t=e(81160),n=e(14236),r=e(28240),s=e(81010),o=e(11261),m=e(75059),l=e(18282),i=(y=>(y.aggregate="aggregate",y.groupBy="groupby",y))(i||{});const c={id:l.F.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},isApplicable:y=>{let a=0;for(const v of y)v.fields.length>a&&(a=v.fields.length);return a>=2?s.M.Applicable:s.M.NotApplicable},isApplicableDescription:y=>{let a=0;for(const v of y)v.fields.length>a&&(a=v.fields.length);return`The Group by transformation requires a series with at least two fields to work. The maximum number of fields found on a series is ${a}`},operator:y=>a=>a.pipe((0,t.T)(v=>{if(!Object.keys(y.fields).find(P=>y.fields[P].operation==="groupby"))return v;const b=[];for(const P of v){const C=P.fields.filter(M=>u(M,y));if(C.length===0)continue;const D=E(P,C),T=h(C,D);for(const M of P.fields){if(!f(M,y))continue;const O=(0,r.Ct)(M),S=y.fields[O].aggregations,p={};D.forEach(x=>{const A=x[O],R=(0,m.Nw)({field:A,reducers:S});for(const B of S)Array.isArray(p[B])||(p[B]=[]),p[B].push(R[B])});for(const x of S){const A={name:`${O} (${x})`,values:p[x]??[],type:o.PU.other,config:{}};A.type=d(x,M,A),T.push(A)}}b.push({fields:T,length:D.size})}return b}))},u=(y,a)=>{const v=(0,r.Ct)(y);return a?.fields[v]?.operation==="groupby"},f=(y,a)=>{const v=(0,r.Ct)(y);return a?.fields[v]?.operation==="aggregate"&&Array.isArray(a?.fields[v].aggregations)&&a?.fields[v].aggregations.length>0};function d(y,a,v){switch(y){case m.gy.allIsNull:return o.PU.boolean;case m.gy.last:case m.gy.lastNotNull:case m.gy.first:case m.gy.firstNotNull:return a.type;default:return(0,n.dF)(v)??o.PU.string}}function E(y,a){const v=new Map;for(let g=0;g<y.length;g++){const b=String(a.map(C=>C.values[g])),P=v.get(b)??{};v.has(b)||v.set(b,P);for(let C of y.fields){const D=(0,r.Ct)(C);P[D]||(P[D]={name:D,type:C.type,config:{...C.config},values:[]}),P[D].values.push(C.values[g])}}return v}function h(y,a){const v=[];for(const g of y){const b=[],P=(0,r.Ct)(g);a.forEach(C=>{b.push(C[P].values[0])}),v.push({name:g.name,type:g.type,config:{...g.config},values:b})}return v}},68133:(Y,I,e)=>{"use strict";e.d(I,{_:()=>u,l:()=>i});var t=e(81160),n=e(14236),r=e(28240),s=e(11261),o=e(75059),m=e(25094),l=e(18282);const i=!0;var c=(a=>(a.aggregate="aggregate",a.groupBy="groupby",a))(c||{});const u={id:l.F.groupToNestedTable,name:"Group to nested tables",description:"Group data by a field value and create nested tables with the grouped data",defaultOptions:{showSubframeHeaders:i,fields:{}},operator:a=>v=>v.pipe((0,t.T)(g=>{if(!Object.keys(a.fields).find(C=>a.fields[C].operation==="groupby"))return g;const P=[];for(const C of g){const D=C.fields.filter(S=>d(S,a));if(D.length===0)continue;const T=(0,m.Y2)(C,D),M=(0,m.Ce)(D,T),O=y(T,a);for(let S=0;S<C.fields.length;S++){const p=C.fields[S];if(!E(p,a))continue;const x=(0,r.Ct)(p),A=a.fields[x].aggregations,R={};T.forEach(B=>{const U=B[x],F=(0,o.Nw)({field:U,reducers:A});for(const K of A)Array.isArray(R[K])||(R[K]=[]),R[K].push(F[K])});for(const B of A){const U={name:`${x} (${B})`,values:R[B],type:s.PU.other,config:{}};U.type=h(B,p,U),M.push(U)}}M.push({config:{},name:"Nested frames",type:s.PU.nestedFrames,values:O}),P.push({fields:M,length:T.size})}return P}))};function f(a,v,g){return{meta:{custom:{noHeader:!(g.showSubframeHeaders===void 0?i:g.showSubframeHeaders)}},length:v,fields:a}}const d=(a,v)=>{const g=(0,r.Ct)(a);return v?.fields[g]?.operation==="groupby"},E=(a,v)=>{const g=(0,r.Ct)(a);return v?.fields[g]?.operation==="aggregate"&&Array.isArray(v?.fields[g].aggregations)&&v?.fields[g].aggregations.length>0},h=(a,v,g)=>{switch(a){case o.gy.allIsNull:return s.PU.boolean;case o.gy.last:case o.gy.lastNotNull:case o.gy.first:case o.gy.firstNotNull:return v.type;default:return(0,n.dF)(g)??s.PU.string}};function y(a,v){const g=[];for(const[,b]of a){const P=[];for(const[C,D]of Object.entries(b)){const T=v.fields[C];(T===void 0||T.aggregations===void 0||T.operation==="aggregate"&&T.aggregations.length===0||T.operation===null||T.operation===void 0)&&P.push(D)}P.length>0?g.push([f(P,P[0].values.length,v)]):g.push([f([],0,v)])}return g}},77678:(Y,I,e)=>{"use strict";e.d(I,{H1:()=>P,NX:()=>g,OA:()=>a,Rt:()=>y,Uh:()=>M,ZU:()=>T,cg:()=>p,d$:()=>v,dA:()=>b,ix:()=>C,p3:()=>D,rW:()=>f,rs:()=>O});var t=e(81160),n=e(57875),r=e(75972),s=e(41260),o=e(11261),m=e(97706),l=e(18282),i=e(73060),c=e(39624),u=e(67641);const f=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],d=30,E=[],h=(x,A)=>x-A,y={bucketCount:{name:"Bucket count",description:"approx bucket count"},bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},a={id:l.F.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(x,A)=>R=>R.pipe((0,t.T)(B=>a.transformer(x,A)(B))),transformer:(x,A)=>R=>{if(!Array.isArray(R)||R.length===0)return R;let B,U;x.bucketSize&&((0,u.w)()&&(x.bucketSize=A.interpolate(x.bucketSize.toString())),typeof x.bucketSize=="string"?B=parseFloat(x.bucketSize):B=x.bucketSize,isNaN(B)&&(B=void 0)),x.bucketOffset&&((0,u.w)()&&(x.bucketOffset=A.interpolate(x.bucketOffset.toString())),typeof x.bucketOffset=="string"?U=parseFloat(x.bucketOffset):U=x.bucketOffset,isNaN(U)&&(U=void 0));const F={bucketSize:B,bucketOffset:U,combine:x.combine},K=D(R,F);return K==null?[]:[p(K)]}},v="xMin";function g(x){return x===v||x==="BucketMin"}const b="xMax";function P(x){return x===b||x==="BucketMax"}function C(x){if(x.meta?.type===s.m.HeatmapCells){let U=x.fields.find(z=>z.name==="yMin"),F=x.fields.find(z=>z.name==="yMax"),K=x.fields.find(z=>z.name==="count"),w=[...new Set(F.values)].sort((z,J)=>z-J),L=[...new Set(U.values)].sort((z,J)=>z-J),V=new Map;w.forEach(z=>V.set(z,0));for(let z=0;z<F.values.length;z++){let J=F.values[z];V.set(J,V.get(J)+K.values[z])}return{xMin:{...U,name:"xMin",values:L},xMax:{...F,name:"xMax",values:w},counts:[{...K,values:[...V.values()]}]}}else if(x.meta?.type===s.m.HeatmapRows){let U=[],F=[],K=[],w="0";return x.fields.forEach(V=>{if(V.type===o.PU.number){let N=V.values.reduce((z,J)=>z+J,0);K.push(N),U.push(w),F.push(w=V.name)}}),K.push(0),U.push(w),F.push(w),{xMin:{...x.fields[1],name:"xMin",type:o.PU.string,values:U},xMax:{...x.fields[1],name:"xMax",type:o.PU.string,values:F},counts:[{...x.fields[1],name:"count",type:o.PU.number,values:K}]}}let A,R;const B=[];for(const U of x.fields)g(U.name)?A=U:P(U.name)?R=U:U.type===o.PU.number&&B.push(U);if(!R&&A&&A.values.length>1){let U=A.values,F=(0,m.h)(U[1]-U[0],6);R={...A,name:b,values:U.map(K=>K+F)}}if(!A&&R&&R?.values.length>1){let U=R.values,F=(0,m.h)(U[1]-U[0],6);A={...R,name:v,values:U.map(K=>K-F)}}if(A&&R&&B.length)return{xMin:A,xMax:R,counts:B}}function D(x,A){let R=A?.bucketSize,B=A?.bucketCount??d,U=A?.bucketOffset??0;if(x=x.map(G=>({...G,fields:G.fields.map(H=>{if(H.type===o.PU.number){const q=Number(H.config.noValue);Number.isNaN(q)?H={...H,values:H.values.filter(le=>le!=null)}:H=(0,c.A)(H,q)}return H})})),!R||R<0){let G=[];for(const ee of x)for(const X of ee.fields)X.type===o.PU.number&&(G=G.concat(X.values));G.sort((ee,X)=>ee-X);let H=1/0;if(G.length===1)H=1;else for(let ee=1;ee<G.length;ee++){let X=G[ee]-G[ee-1];X!==0&&(H=Math.min(H,X))}let q=G[0];const k=(G[G.length-1]-q)/B;for(let ee=0;ee<f.length;ee++){let X=f[ee];if(k<X&&X>=H){R=X;break}}}const F=G=>(0,m.h)(O(G-U,R)+U,9);let K=((""+R).match(/\.\d+$/)??["."])[0].length-1,w=[],L=[],V;for(const G of x)for(const H of G.fields)if(H.type===o.PU.number){let q=S(H.values,F,E,h);w.push(q),L.push({...H,config:{...H.config,unit:H.config.unit==="short"?"short":void 0}}),!V&&H.config.unit&&(V=H.config)}if(!L.length)return null;let N=(0,i.fj)(w);for(let G=1;G<N.length;G++){let H=N[G];for(let q=0;q<H.length;q++)H[q]==null&&(H[q]=0)}const z={name:v,values:N[0],type:o.PU.number,state:void 0,config:K===0?V??{}:{...V,decimals:K}},J={...z,name:b,values:N[0].map(G=>G+R)};if(A?.combine){const G=new Array(N[0].length).fill(0);for(let H=1;H<N.length;H++)for(let q=0;q<G.length;q++)G[q]+=N[H][q];L=[{...L[0],name:"count",values:G,type:o.PU.number,state:{...L[0].state,displayName:"Count",multipleFrames:!1,origin:{frameIndex:0,fieldIndex:2}}}]}else L.forEach((G,H)=>{G.values=N[H+1]});return{xMin:z,xMax:J,counts:L}}function T(x,A){return Math.round(x/A)*A}function M(x,A){return Math.ceil(x/A)*A}function O(x,A){return Math.floor(x/A)*A}function S(x,A,R,B){let U=new Map;for(let L=0;L<x.length;L++){let V=x[L];V!=null&&(V=A(V));let N=U.get(V);N?N.count++:U.set(V,{value:V,count:1})}R&&R.forEach(L=>U.delete(L));let F=[...U.values()];B&&F.sort((L,V)=>B(L.value,V.value));let K=Array(F.length),w=Array(F.length);for(let L=0;L<F.length;L++)K[L]=F[L].value,w[L]=F[L].count;return[K,w]}function p(x,A){if(!x.xMin.display){const R=(0,n.J)({field:x.xMin,theme:A??(0,r.a)()});x.xMin.display=R,x.xMax.display=R}return x.counts[0].display=(0,n.J)({field:x.counts[0],theme:A??(0,r.a)()}),{length:x.xMin.values.length,meta:{type:s.m.Histogram},fields:[x.xMin,x.xMax,...x.counts]}}},41511:(Y,I,e)=>{"use strict";e.d(I,{L:()=>l,W:()=>m});var t=e(81160),n=e(85200),r=e(1173),s=e(18282),o=e(73060),m=(i=>(i.outer="outer",i.inner="inner",i.outerTabular="outerTabular",i))(m||{});const l={id:s.F.joinByField,aliasIds:[s.F.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(i,c)=>u=>u.pipe((0,t.T)(f=>l.transformer(i,c)(f))),transformer:(i,c)=>{let u;return f=>{if(f.length>1){i.byField&&!u&&(u=n.sJ.get(r.Ct.byName).get(c.interpolate(i.byField)));const d=(0,o.Fd)({frames:f,joinBy:u,mode:i.mode});if(d)return[d]}return f}}}},73060:(Y,I,e)=>{"use strict";e.d(I,{Fd:()=>u,JI:()=>h,RC:()=>d,WO:()=>E,Yj:()=>c,fj:()=>a,g2:()=>v});var t=e(86643),n=e(14236),r=e(11261),s=e(85200),o=e(1173),m=e(41511);function l(g){const{timeField:b}=(0,n.KR)(g[0]);if(b)return s.sJ.get(o.Ct.firstTimeField).get({});let P=[];for(const C of g[0].fields)C.type===r.PU.number&&P.push(C.name);for(let C=1;C<g.length;C++){const D=[];for(const T of g[0].fields)T.type===r.PU.number&&D.push(T.name);P=P.filter(T=>!D.includes(T))}return s.sJ.get(o.Ct.byName).get(P[0])}function i(g){return g.joinBy??l(g.frames)}function c(g,b){if(b>=0){let P=g.fields[b];P.type!==r.PU.string&&!v(P.values)&&(g=(0,n.ES)(g,b))}return g}function u(g){if(!g.frames?.length)return;const b=g.nullMode??(p=>{let x=p.config.custom?.spanNulls;return x===!0?d:x===-1?E:h});if(g.frames.length===1){let p=g.frames[0],x=p;const A=i(g);let R=x.fields.findIndex(B=>A(B,x,g.frames));if(g.keepOriginIndices&&(x={...p,fields:p.fields.map((B,U)=>{const F={...B},K={frameIndex:0,fieldIndex:U};return F.state?F.state.origin=K:F.state={origin:K},F})},R>0)){const B=x.fields[R],U=x.fields.filter((F,K)=>K!==R);U.unshift(B),x.fields=U,R=0}if(R>=0&&(x=c(x,R)),g.keep){let B=x.fields.filter((U,F)=>F===R||g.keep(U,x,g.frames));p!==x?x.fields=B:x={...p,fields:B}}return x}const P=[],C=[],D=[],T=[];let M=1;const O=i(g);for(let p=0;p<g.frames.length;p++){const x=g.frames[p];if(!x||!x.fields?.length)continue;const A=[d];let R,B=[],U=[];for(let K=0;K<x.fields.length;K++){const w=x.fields[K];if(w.state=w.state||{},!R&&O(w,x,g.frames))R=w;else{if(g.keep&&!g.keep(w,x,g.frames))continue;A.push(b(w));let L=w.labels??{},V=w.name;x.name&&(w.name===r.Bc?V=x.name:L.name==null&&(L={...L,name:x.name})),B.push({...w,name:V,labels:L})}g.keepOriginIndices&&(w.state.origin={frameIndex:p,fieldIndex:K})}if(!R)continue;D.length===0&&D.push(R),P.push(A);const F=[R.values];for(const K of B)F.push(K.values),D.push(K),g.keepDisplayNames||delete K.state?.displayName,U.push(M),M++;T.push(U),C.push(F)}let S=[];return g.mode===m.W.outerTabular?S=f(C,T,D.length,P):S=a(C,P,g.mode),{length:S[0]?S[0].length:0,fields:D.map((p,x)=>({...p,values:S[x]}))}}function f(g,b,P,C){let D={};for(let M=0;M<g.length;M++){let O=g[M],S=O[0];for(let p=0;p<g.length;p++){if(p===M)continue;let x=g[p],A=x[0];for(let R=0;R<S.length;R++){const B=S[R],U=P-1;let F=[B].concat(new Array(U)),K=0;for(let w=1;w<O.length;w++){const L=b[M][K];F[L]=O[w][R],K++}for(let w=0;w<A.length;w++)if(S[R]===A[w]){let L=0;for(let V=1;V<x.length;V++){const N=b[p][L];F[N]=x[V][w],L++}break}D[JSON.stringify(F)]=F}}}let T=[];for(let M=0;M<P;M++)T.push(new Array(0));for(let M in D){const O=D[M];for(let S=0;S<O.length;S++)T[S].push(O[S])}return T}const d=0,E=1,h=2;function y(g,b,P){for(let C=0,D,T=-1;C<b.length;C++){let M=b[C];if(M>T){for(D=M-1;D>=0&&g[D]==null;)g[D--]=null;for(D=M+1;D<P&&g[D]==null;)g[T=D++]=null}}}function a(g,b,P=m.W.outer){let C;if(P===m.W.inner)C=new Set((0,t.A)(g.map(O=>O[0])));else{C=new Set;for(let O=0;O<g.length;O++){let p=g[O][0],x=p.length;for(let A=0;A<x;A++)C.add(p[A])}}let D=[Array.from(C).sort((O,S)=>O-S)],T=D[0].length,M=new Map;for(let O=0;O<T;O++)M.set(D[0][O],O);for(let O=0;O<g.length;O++){let S=g[O],p=S[0];for(let x=1;x<S.length;x++){let A=S[x],R=Array(T).fill(void 0),B=b?b[O][x]:E,U=[];for(let F=0;F<A.length;F++){let K=A[F],w=M.get(p[F]);K===null?B!==d&&(R[w]=K,B===h&&U.push(w)):R[w]=K}y(R,U,T),D.push(R)}}return D}function v(g,b=50){const P=g.length;if(P<=1)return!0;let C=0,D=P-1;for(;C<=D&&g[C]==null;)C++;for(;D>=C&&g[D]==null;)D--;if(D<=C)return!0;const T=Math.max(1,Math.floor((D-C+1)/b));for(let M=g[C],O=C+T;O<=D;O+=T){const S=g[O];if(S!=null){if(S<=M)return!1;M=S}}return!0}},6829:(Y,I,e)=>{"use strict";e.d(I,{V:()=>m,n:()=>o});var t=e(81160),n=e(28240),r=e(11261),s=e(18282),o=(i=>(i.Columns="columns",i.Rows="rows",i))(o||{});const m={id:s.F.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(i,c)=>u=>u.pipe((0,t.T)(f=>m.transformer(i,c)(f))),transformer:i=>c=>{if(i.mode==="rows")return l(c,i.keepLabels);const u=[],f=i.keepLabels?.length?new Set(i.keepLabels):void 0;for(const d of c){const E=[],h={};for(const y of d.fields){if(!y.labels){E.push(y);continue}const a={...y,config:{...y.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};E.push(a);for(const v of Object.keys(y.labels)){if(f&&!f.has(v))continue;if(i.valueLabel===v){a.name=y.labels[v];continue}(h[v]??(h[v]=new Set)).add(y.labels[v])}}for(const y in h)for(const a of h[y]){const v=new Array(d.length).fill(a);E.push({name:y,type:r.PU.string,values:v,config:{}})}u.push({...d,fields:E,length:d.length})}return u}};function l(i,c){const u=[];for(const f of i)for(const d of f.fields)if(d.labels){const E=[],h=[];if(c)for(const y of c)E.push(y),h.push(d.labels[y]);else for(const[y,a]of Object.entries(d.labels))E.push(y),h.push(a);h.length&&u.push({...f,name:(0,n.Ct)(d,f,i),fields:[{name:"label",type:r.PU.string,config:{},values:E},{name:"value",type:r.PU.string,config:{},values:h}],length:h.length})}return u}},58140:(Y,I,e)=>{"use strict";e.d(I,{o:()=>l});var t=e(2543),n=e.n(t),r=e(81160),s=e(37471),o=e(81010),m=e(18282);const l={id:m.F.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},isApplicable:h=>h.length>1?o.M.Applicable:o.M.NotApplicable,isApplicableDescription:h=>`The merge transformation requires at least 2 data series to work. There is currently ${h.length} data series.`,operator:h=>y=>y.pipe((0,r.T)(a=>{if(!Array.isArray(a)||a.length<=1)return a;const v=a.filter(S=>S.fields.length>0);if(v.length===0)return[a[0]];const g=new Set,b={},P=[],C=new s.k;for(let S=0;S<v.length;S++){const p=v[S];for(let x=0;x<p.fields.length;x++){const A=p.fields[x];g.has(A.name)||(C.addField(i(A)),g.add(A.name)),b[A.name]=b[A.name]||{},b[A.name][S]=x,v.length-1===S&&d(b,A,v)&&P.push(A.name)}}if(P.length===0)return a;const D={},T=[],M=c(v,b,P),O=u(v,g,b);for(let S=0;S<v.length;S++){const p=v[S];for(let x=0;x<p.length;x++){const A=M(S,x),R=O(S,x);if(!Array.isArray(D[A])){D[A]=[R],T.push(E(A,D));continue}let B=!1;D[A]=D[A].map(U=>f(U,R)?(B=!0,{...U,...R}):U),B||(D[A].push(R),T.push(E(A,D)))}}for(const S of T){const p=D[S.key][S.index];p&&C.add(p)}return[C]}))},i=h=>({...(0,t.omit)(h,["values","state","labels","config"]),values:[],config:{...(0,t.omit)(h.config,"displayName")}}),c=(h,y,a)=>{const v=a.reduce((g,b)=>Object.keys(y[b]).reduce((P,C)=>(P[C]=P[C]||[],P[C].push(y[b][C]),P),g),{});return(g,b)=>v[g].reduce((P,C)=>P+h[g].fields[C].values[b],"")},u=(h,y,a)=>(v,g)=>{const b={},P=Array.from(y);for(const C of P){const D=a[C];if(!D)continue;const T=D[v];if(typeof T!="number")continue;const M=h[v];if(!M||!M.fields)continue;const O=M.fields[T];!O||!O.values||(b[C]=O.values[g])}return b},f=(h,y)=>{let a=!0;for(const v in y)if(!(typeof h[v]>"u")&&h[v]!==null&&h[v]!==y[v]){a=!1;break}return a},d=(h,y,a)=>Object.keys(h[y.name]).length===a.length,E=(h,y)=>({key:h,index:y[h].length-1})},64586:(Y,I,e)=>{"use strict";e.d(I,{W:()=>n});var t=e(18282);const n={id:t.F.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:r=>s=>s,transformer:r=>s=>s}},46294:(Y,I,e)=>{"use strict";e.d(I,{M:()=>s});var t=e(11261);const n={threshold:(m,l,i)=>m+i,midpoint:(m,l,i)=>(m+l)/2,plusone:(m,l,i)=>m+1};function r(m,l){return m.fields.find(i=>l!=null?i.name===l:i.type===t.PU.time)}function s(m){if(m.frame.length===0)return m.frame;let l=!0,{frame:i,refFieldName:c,refFieldPseudoMax:u,refFieldPseudoMin:f,insertMode:d}=m;d||(d=n.threshold);const E=r(i,c);if(E==null)return i;E.state={...E.state,nullThresholdApplied:!0};const h=i.fields.map(a=>a.config.custom?.insertNulls||E.config.interval||null),y=new Set(h);if(y.delete(null),y.size===0)return i;if(y.size===1){const a=y.values().next().value;if(a<=0)return i;const v=E.values,g=i.fields.map(P=>P.values),b=o(v,g,a,f,u,d,l);return b===g?i:{...i,length:b[0].length,fields:i.fields.map((P,C)=>({...P,values:b[C]}))}}return i}function o(m,l,i,c=null,u=null,f,d){const E=m.length,h=[];if(c!=null&&c<m[0]){let g=Math.ceil((m[0]-c)/i),b=m[0]-g*i;for(;b<m[0];)h.push(f(b-i,b,i)),b+=i}h.push(m[0]);let y=m[0];for(let g=1;g<E;g++){const b=m[g];for(;b-y>i&&(h.push(f(y,b,i)),y+=i,!!d););h.push(b),y=b}if(u!=null&&u>y)for(;y+i<u;)h.push(f(y,u,i)),y+=i;const a=h.length;if(a===E)return l;const v=[];for(let g of l){let b;if(g!==m){b=Array(a);for(let P=0,C=0;P<a;P++)b[P]=m[C]===h[P]?g[C++]:null}else b=h;v.push(b)}return v}},39624:(Y,I,e)=>{"use strict";e.d(I,{A:()=>n,C:()=>t});function t(r){return{...r,fields:r.fields.map(s=>{const o=Number(s.config.noValue);return Number.isNaN(o)?s:n(s,o)})}}function n(r,s){const o=r.values.slice();for(let m=0;m<o.length;m++)o[m]===null&&(o[m]=s);return{...r,values:o}}},82280:(Y,I,e)=>{"use strict";e.d(I,{X:()=>l,x:()=>m});var t=e(2543),n=e.n(t),r=e(81160),s=e(28240),o=e(18282);const m={id:o.F.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:u=>f=>f.pipe((0,r.T)(d=>{const E=i(u.indexByName);return!Array.isArray(d)||d.length===0?d:d.map(h=>({...h,fields:E(h.fields,d,h)}))}))},l=u=>(f,d)=>c(f,u)-c(d,u),i=u=>(f,d,E)=>{if(!Array.isArray(f)||f.length===0||!u||Object.keys(u).length===0)return f;const h=l(u);return(0,t.clone)(f).sort((y,a)=>h((0,s.Ct)(y,E,d),(0,s.Ct)(a,E,d)))},c=(u,f)=>Number.isInteger(f[u])?f[u]:Number.MAX_SAFE_INTEGER},21128:(Y,I,e)=>{"use strict";e.d(I,{Wj:()=>u,rV:()=>c});var t=e(81160),n=e(14236),r=e(28240),s=e(11261),o=e(75059),m=e(85200),l=e(72693),i=e(18282),c=(a=>(a.SeriesToRows="seriesToRows",a.ReduceFields="reduceFields",a))(c||{});const u={id:i.F.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[o.gy.max]},operator:a=>v=>v.pipe((0,t.T)(g=>{if(!a?.reducers?.length)return g;const b=a.fields?(0,m.NS)(a.fields):a.includeTimeField&&a.mode==="reduceFields"?l.Yg:l.zx;if(a.mode==="reduceFields")return h(g,b,a.reducers);const P=f(g,b,a.reducers,a.labelsToFields);return P?[P]:[]}))};function f(a,v,g,b){const P=o.AS.list(g),C=P.map(M=>M.id),D=[],T=b?d(a):[];for(const M of a){const O=M.fields.filter(B=>v(B,M,a)),S=O.length,p=[],x=new Array(S);p.push({name:"Field",type:s.PU.string,values:x,config:{}});const A={};if(b)for(const B of T)A[B]=new Array(S),p.push({name:B,type:s.PU.string,values:A[B],config:{}});const R={};for(const B of P)R[B.id]=new Array(S),p.push({name:B.name,type:s.PU.other,values:R[B.id],config:{}});for(let B=0;B<O.length;B++){const U=O[B],F=(0,o.Nw)({field:U,reducers:C});if(b){if(x[B]=U.name,U.labels)for(const K of Object.keys(U.labels))A[K][B]=U.labels[K]}else x[B]=(0,r.Ct)(U,M,a);for(const K of P){const w=F[K.id];R[K.id][B]=w}}for(const B of p)if(B.type===s.PU.other){const U=(0,n.dF)(B);U&&(B.type=U)}D.push({...M,fields:p,length:S})}return E(D)}function d(a){const v=new Set;for(const g of a)for(const b of g.fields)if(b.labels)for(const P of Object.keys(b.labels))v.add(P);return[...v]}function E(a){if(!a?.length)return;const v=a[0];for(let g=1;g<a.length;g++){const b=a[g];for(let P=0;P<v.fields.length;P++){const C=v.fields[P];for(let D=0;D<b.fields.length;D++){const T=b.fields[D],M=P===0&&D===0,O=C.type===T.type&&C.name===T.name;if(M||O){const S=C.values,p=T.values;C.values=S.concat(p)}}}}return v.name=void 0,v.length=v.fields[0].values.length,v}function h(a,v,g){const P=o.AS.list(g).map(D=>D.id),C=[];for(const D of a){const T=[];for(const M of D.fields)if(v(M,D,a)){const O=(0,o.Nw)({field:M,reducers:P});for(const S of P){const p=O[S],x={...M,type:y(S,M),values:[p]};x.state=void 0,P.length>1&&(x.labels||(x.labels={}),x.labels.reducer=o.AS.get(S).name),T.push(x)}}T.length&&C.push({...D,fields:T,length:1})}return C}function y(a,v){switch(a){case o.gy.allValues:case o.gy.uniqueValues:return s.PU.other;case o.gy.first:case o.gy.firstNotNull:case o.gy.last:case o.gy.lastNotNull:return v.type;default:return s.PU.number}}},67641:(Y,I,e)=>{"use strict";e.d(I,{w:()=>t});const t=()=>window?.grafanaBootData?.settings?.featureToggles?.transformationsVariableSupport},22544:()=>{"use strict"},12463:()=>{"use strict"},43585:(Y,I,e)=>{"use strict";e.d(I,{O:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},8790:(Y,I,e)=>{"use strict";e.d(I,{V:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},41987:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>o,Jk:()=>r,hX:()=>s});var t=e(43429),n=e(74135),r=(m=>(m.CloudAlerting="cloud-alerting",m.UnifiedAlerting="unified-alerting",m.Dashboard="dashboard",m.Explore="explore",m.Correlations="correlations",m.Unknown="unknown",m.PanelEditor="panel-editor",m.PanelViewer="panel-viewer",m))(r||{});class s extends t.Ud{constructor(){super(...arguments),this._extensionConfigs=[]}init(l){}setRootPage(l){return this.root=l,this}setComponentsFromLegacyExports(l){if(l.ConfigCtrl&&(this.angularConfigCtrl=l.ConfigCtrl),this.meta&&this.meta.includes){for(const i of this.meta.includes)if(i.type===t.ib.page&&i.component&&!l[i.component]){console.warn("App Page uses unknown component: ",i.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(l){return this._extensionConfigs.push({...l,type:n.u.link}),this}configureExtensionComponent(l){return this._extensionConfigs.push({...l,type:n.u.component}),this}}var o=(m=>(m.alpha="alpha",m.beta="beta",m))(o||{})},61268:(Y,I,e)=>{"use strict";e.d(I,{r:()=>t});var t=(n=>(n.OpenSource="Open Source",n.Pro="Pro",n.Enterprise="Enterprise",n))(t||{})},58649:(Y,I,e)=>{"use strict";e.d(I,{En:()=>r,d1:()=>n,tw:()=>t});const t=0,n=100,r="SAML"},94624:(Y,I,e)=>{"use strict";e.d(I,{y:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},39070:(Y,I,e)=>{"use strict";e.d(I,{Gu:()=>t,Gv:()=>m,Nx:()=>n,UW:()=>r,zz:()=>s});var t=(l=>(l.NotStarted="NotStarted",l.Loading="Loading",l.Streaming="Streaming",l.Done="Done",l.Error="Error",l))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var r=(l=>(l.Null="null",l.Ignore="connected",l.AsZero="null as zero",l))(r||{});const s=l=>!!l;function o(l){return l}function m(l){return typeof l=="object"&&l!==null?!0:!1}},11261:(Y,I,e)=>{"use strict";e.d(I,{Bc:()=>n,LE:()=>r,PU:()=>t,aI:()=>s});var t=(o=>(o.time="time",o.number="number",o.string="string",o.boolean="boolean",o.trace="trace",o.geo="geo",o.enum="enum",o.other="other",o.frame="frame",o.nestedFrames="nestedFrames",o))(t||{});const n="Value",r="Time",s="Metric"},41260:(Y,I,e)=>{"use strict";e.d(I,{m:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.NumericWide="numeric-wide",n.NumericMulti="numeric-multi",n.NumericLong="numeric-long",n.LogLines="log-lines",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},91890:(Y,I,e)=>{"use strict";e.d(I,{$0:()=>r,CC:()=>n,uP:()=>s,x0:()=>t});var t=(o=>(o.Datasource="Datasource",o.Correlations="Correlations",o.ExploreCorrelationsEditor="CorrelationsEditor",o))(t||{}),n=(o=>(o.Regex="regex",o.Logfmt="logfmt",o))(n||{}),r=(o=>(o.Series="series",o.Field="field",o.Fields="fields",o.Value="value",o.BuiltIn="built-in",o.Template="template",o))(r||{}),s=(o=>(o.Values="values",o))(s||{})},40187:(Y,I,e)=>{"use strict";e.d(I,{Is:()=>l,ZF:()=>o,mA:()=>s,tD:()=>r,v2:()=>m});var t=e(92341),n=e(43429);class r extends n.Ud{constructor(c){super(),this.DataSourceClass=c,this.components={}}setConfigEditor(c){return this.components.ConfigEditor=c,this}setConfigCtrl(c){return this.angularConfigCtrl=c,this}setQueryCtrl(c){return this.components.QueryCtrl=c,this}setAnnotationQueryCtrl(c){return this.components.AnnotationsQueryCtrl=c,this}setQueryEditor(c){return this.components.QueryEditor=c,this}setExploreQueryField(c){return this.components.ExploreQueryField=c,this}setExploreMetricsQueryField(c){return this.components.ExploreMetricsQueryField=c,this}setExploreLogsQueryField(c){return this.components.ExploreLogsQueryField=c,this}setQueryEditorHelp(c){return this.components.QueryEditorHelp=c,this}setExploreStartPage(c){return this.setQueryEditorHelp(c)}setVariableQueryEditor(c){return this.components.VariableQueryEditor=c,this}setMetadataInspector(c){return this.components.MetadataInspector=c,this}setComponentsFromLegacyExports(c){this.angularConfigCtrl=c.ConfigCtrl,this.components.QueryCtrl=c.QueryCtrl,this.components.AnnotationsQueryCtrl=c.AnnotationsQueryCtrl,this.components.ExploreQueryField=c.ExploreQueryField,this.components.QueryEditor=c.QueryEditor,this.components.QueryEditorHelp=c.QueryEditorHelp,this.components.VariableQueryEditor=c.VariableQueryEditor}}class s{constructor(c){this.name=c.name,this.id=c.id,this.type=c.type,this.meta=c.meta,this.cachingConfig=c.cachingConfig,this.uid=c.uid}filterQuery(c){return!0}getRef(){return{type:this.type,uid:this.uid}}}var o=(i=>(i.Logs="Logs",i.Metrics="Metrics",i.Tracing="Tracing",i))(o||{}),m=(i=>(i.Cancelled="cancelled",i.Timeout="timeout",i.Unknown="unknown",i))(m||{});class l{}l=(0,t.Y)(l),s=(0,t.Y)(s)},50349:()=>{"use strict"},50219:()=>{"use strict"},24293:(Y,I,e)=>{"use strict";e.d(I,{F:()=>n,Y:()=>t});var t=(r=>(r.Thresholds="thresholds",r.PaletteClassic="palette-classic",r.PaletteClassicByName="palette-classic-by-name",r.PaletteSaturated="palette-saturated",r.ContinuousGrYlRd="continuous-GrYlRd",r.ContinuousRdYlGr="continuous-RdYlGr",r.ContinuousBlYlRd="continuous-BlYlRd",r.ContinuousYlRd="continuous-YlRd",r.ContinuousBlPu="continuous-BlPu",r.ContinuousYlBl="continuous-YlBl",r.ContinuousBlues="continuous-blues",r.ContinuousReds="continuous-reds",r.ContinuousGreens="continuous-greens",r.ContinuousPurples="continuous-purples",r.Fixed="fixed",r.Shades="shades",r))(t||{});const n="#808080"},37055:(Y,I,e)=>{"use strict";e.d(I,{Ow:()=>n,ZW:()=>t,uo:()=>r});function t(s){return o=>"__systemRef"in o&&o.__systemRef===s}const n=s=>"__systemRef"in s&&typeof s.__systemRef=="string";var r=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s.Filterable="filterable",s))(r||{})},93015:()=>{"use strict"},58318:()=>{"use strict"},49812:()=>{"use strict"},8887:(Y,I,e)=>{"use strict";e.d(I,{Uo:()=>r,az:()=>t,n6:()=>n});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,amazon:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,"align-left":!0,"align-right":!0,"application-observability":!0,apps:!0,"archive-alt":!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,asserts:!0,"expand-arrows":!0,at:!0,ai:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,docker:!0,"document-info":!0,"document-layout-left":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,enter:!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,"file-edit-alt":!0,"file-landscape-alt":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"frontend-observability":!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-ml":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,"gf-pin":!0,"gf-prometheus":!0,"gf-traces":!0,globe:!0,grafana:!0,"graph-bar":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,"map-marker-plus":!0,"map-marker-minus":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,paragraph:!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,spinner:!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,stopwatch:!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"table-collapse-all":!0,"table-expand-all":!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unarchive:!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"web-section-alt":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function r(s){if(n(s))return s}},64572:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{AbstractLabelOperator:()=>l.D_,AlertState:()=>me.O,AnnotationEventFieldSource:()=>i.V,AppEvents:()=>z.r1,AppPlugin:()=>O.hX,CoreApp:()=>O.Jk,CustomVariableSupport:()=>G.f5,DEFAULT_SAML_NAME:()=>t.En,DashboardCursorSync:()=>m.y,DataFrameType:()=>s.m,DataLinkConfigOrigin:()=>o.x0,DataQueryErrorType:()=>S.v2,DataSourceApi:()=>S.mA,DataSourcePlugin:()=>S.tD,DataSourceVariableSupport:()=>G.ZV,DataTopic:()=>l.QR,DefaultTimeZone:()=>E.lE,ExploreMode:()=>S.ZF,FALLBACK_COLOR:()=>R.F,FeatureState:()=>O.Ay,FieldColorModeId:()=>R.Y,FieldConfigProperty:()=>T.uo,FieldType:()=>r.PU,GAUGE_DEFAULT_MAXIMUM:()=>t.d1,GAUGE_DEFAULT_MINIMUM:()=>t.tw,GrafanaPlugin:()=>x.Ud,GrafanaThemeType:()=>B.I,LanguageProvider:()=>S.Is,LegacyGraphHoverClearEvent:()=>z.Tq,LegacyGraphHoverEvent:()=>z.kb,LiveChannelConnectionState:()=>J.ZF,LiveChannelEventType:()=>J.o4,LiveChannelScope:()=>J.qD,LiveChannelType:()=>J.os,LoadingState:()=>n.Gu,LogLevel:()=>c.$b,LogRowContextQueryDirection:()=>c.ZF,LogsDedupDescription:()=>c._C,LogsDedupStrategy:()=>c.fY,LogsMetaKind:()=>c.tG,LogsSortOrder:()=>c.uH,LogsVolumeType:()=>c.Aj,MappingType:()=>y.d,NullValueMode:()=>n.UW,OrgRole:()=>U.X,PageLayoutType:()=>u.k,PanelEvents:()=>z.ee,PluginErrorCode:()=>x.ZK,PluginExtensionPoints:()=>te.S,PluginExtensionTypes:()=>te.u,PluginIncludeType:()=>x.ib,PluginSignatureStatus:()=>x.Ac,PluginSignatureType:()=>x.kv,PluginState:()=>x.pn,PluginType:()=>x.QE,SpecialValue:()=>D.N,SpecialValueMatch:()=>y.W,StandardVariableSupport:()=>G.J$,SupplementaryQueryType:()=>c.cF,SupportedTransformationType:()=>o.CC,TIME_FORMAT:()=>E.G$,TIME_SERIES_METRIC_FIELD_NAME:()=>r.aI,TIME_SERIES_TIME_FIELD_NAME:()=>r.LE,TIME_SERIES_VALUE_FIELD_NAME:()=>r.Bc,ThresholdsMode:()=>h.O,TransformationApplicabilityLevels:()=>D.M,VariableHide:()=>A.zL,VariableOrigin:()=>o.$0,VariableRefresh:()=>A.CO,VariableSort:()=>A.ZG,VariableSuggestionsScope:()=>o.uP,VariableSupportBase:()=>G.xi,VariableSupportType:()=>G.Qz,VisualizationSuggestionScore:()=>p.nQ,VisualizationSuggestionsBuilder:()=>p.v2,VisualizationSuggestionsListAppender:()=>p.NV,VizOrientation:()=>p.wV,availableIconsIndex:()=>ne.az,getDefaultRelativeTimeRange:()=>E.Cn,getDefaultTimeRange:()=>E.E2,hasLogsContextSupport:()=>c.Ol,hasLogsContextUiSupport:()=>c.wj,hasQueryExportSupport:()=>l.Ee,hasQueryImportSupport:()=>l.FL,hasQueryModificationSupport:()=>c._0,hasSupplementaryQuerySupport:()=>c.Nc,hasToggleableQueryFiltersSupport:()=>c.FP,isIconName:()=>ne.n6,isLiveChannelJoinEvent:()=>J.Cz,isLiveChannelLeaveEvent:()=>J.jQ,isLiveChannelMessageEvent:()=>J.Z7,isLiveChannelStatusEvent:()=>J.ew,isObject:()=>n.Gv,isSystemOverride:()=>T.Ow,isSystemOverrideWithRef:()=>T.ZW,isTruthy:()=>n.zz,isUnsignedPluginSignature:()=>le.x,isValidLiveChannelAddress:()=>J.aj,parseLiveChannelAddress:()=>J.DG,patchArrayVectorProrotypeMethods:()=>M.V,preferredVisualizationTypes:()=>n.Nx,toIconName:()=>ne.Uo,toLiveChannelId:()=>J.Qp});var t=e(58649),n=e(39070),r=e(11261),s=e(41260),o=e(91890),m=e(94624),l=e(73372),i=e(8790),c=e(9557),u=e(64388),f=e(98102),d=e.n(f),ue={};for(const be in f)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType"].indexOf(be)<0&&(ue[be]=()=>f[be]);e.d(I,ue);var E=e(43127),h=e(50082),y=e(25019),a=e(50349),v=e.n(a),ue={};for(const be in a)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(be)<0&&(ue[be]=()=>a[be]);e.d(I,ue);var g=e(49812),b=e.n(g),ue={};for(const be in g)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(be)<0&&(ue[be]=()=>g[be]);e.d(I,ue);var P=e(22544),C=e.n(P),ue={};for(const be in P)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(be)<0&&(ue[be]=()=>P[be]);e.d(I,ue);var D=e(81010),T=e(37055),M=e(35853),O=e(41987),S=e(40187),p=e(47070),x=e(43429),A=e(12470),R=e(24293),B=e(25137),U=e(62625),F=e(93015),K=e.n(F),ue={};for(const be in F)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(be)<0&&(ue[be]=()=>F[be]);e.d(I,ue);var w=e(38893),L=e.n(w),ue={};for(const be in w)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(be)<0&&(ue[be]=()=>w[be]);e.d(I,ue);var V=e(50219),N=e.n(V),ue={};for(const be in V)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(be)<0&&(ue[be]=()=>V[be]);e.d(I,ue);var z=e(26272),J=e(55004),G=e(29505),H=e(58318),q=e.n(H),ue={};for(const be in H)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(be)<0&&(ue[be]=()=>H[be]);e.d(I,ue);var le=e(51527),me=e(43585),k=e(64367),ee=e.n(k),ue={};for(const be in k)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(be)<0&&(ue[be]=()=>k[be]);e.d(I,ue);var X=e(12463),j=e.n(X),ue={};for(const be in X)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(be)<0&&(ue[be]=()=>X[be]);e.d(I,ue);var ne=e(8887),te=e(74135),oe=e(37891),ie=e.n(oe),ue={};for(const be in oe)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isObject","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasQueryModificationSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","TransformationApplicabilityLevels","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","patchArrayVectorProrotypeMethods","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState","availableIconsIndex","isIconName","toIconName"].indexOf(be)<0&&(ue[be]=()=>oe[be]);e.d(I,ue)},19484:(Y,I,e)=>{"use strict";e.d(I,{R:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},26272:(Y,I,e)=>{"use strict";e.d(I,{Tq:()=>m,ee:()=>s,kb:()=>o,r1:()=>r});var t=e(89550),n=e(65463);const r={alertSuccess:(0,t.R)("alert-success"),alertWarning:(0,t.R)("alert-warning"),alertError:(0,t.R)("alert-error")},s={refresh:(0,t.R)("refresh"),componentDidMount:(0,t.R)("component-did-mount"),dataReceived:(0,t.R)("data-received"),dataError:(0,t.R)("data-error"),dataFramesReceived:(0,t.R)("data-frames-received"),dataSnapshotLoad:(0,t.R)("data-snapshot-load"),editModeInitialized:(0,t.R)("init-edit-mode"),initPanelActions:(0,t.R)("init-panel-actions"),initialized:(0,t.R)("panel-initialized"),panelTeardown:(0,t.R)("panel-teardown"),render:(0,t.R)("render")};class o extends n.x{static{this.type="graph-hover"}}class m extends n.a{constructor(){super(...arguments),this.payload={point:{}}}static{this.type="graph-hover-clear"}}},55004:(Y,I,e)=>{"use strict";e.d(I,{Cz:()=>m,DG:()=>c,Qp:()=>f,Z7:()=>i,ZF:()=>r,aj:()=>u,ew:()=>o,jQ:()=>l,o4:()=>s,os:()=>n,qD:()=>t});var t=(d=>(d.DataSource="ds",d.Plugin="plugin",d.Grafana="grafana",d.Stream="stream",d))(t||{}),n=(d=>(d.DataStream="stream",d.DataFrame="frame",d.JSON="json",d))(n||{}),r=(d=>(d.Pending="pending",d.Connected="connected",d.Connecting="connecting",d.Disconnected="disconnected",d.Shutdown="shutdown",d.Invalid="invalid",d))(r||{}),s=(d=>(d.Status="status",d.Join="join",d.Leave="leave",d.Message="message",d))(s||{});function o(d){return d.type==="status"}function m(d){return d.type==="join"}function l(d){return d.type==="leave"}function i(d){return d.type==="message"}function c(d){if(d?.length){let E=d.trim().split("/");if(E.length>=3)return{scope:E[0],namespace:E[1],path:E.slice(2).join("/")}}}function u(d){return!!(d?.path&&d.namespace&&d.scope)}function f(d){if(!d.scope)return"";let E=d.scope;return!d.namespace||(E+="/"+d.namespace,!d.path)?E:E+"/"+d.path}},9557:(Y,I,e)=>{"use strict";e.d(I,{$b:()=>n,Aj:()=>i,FP:()=>f,Nc:()=>c,Ol:()=>m,ZF:()=>o,_0:()=>d,_C:()=>s,cF:()=>l,fY:()=>t.fY,tG:()=>r,uH:()=>t.uH,wj:()=>u});var t=e(52622),n=(E=>(E.emerg="critical",E.fatal="critical",E.alert="critical",E.crit="critical",E.critical="critical",E.warn="warning",E.warning="warning",E.err="error",E.eror="error",E.error="error",E.info="info",E.information="info",E.informational="info",E.notice="info",E.dbug="debug",E.debug="debug",E.trace="trace",E.unknown="unknown",E))(n||{}),r=(E=>(E[E.Number=0]="Number",E[E.String=1]="String",E[E.LabelsMap=2]="LabelsMap",E[E.Error=3]="Error",E))(r||{}),s=(E=>(E.none="No de-duplication",E.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",E.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",E.signature="De-duplication of successive lines that have identical punctuation and whitespace.",E))(s||{}),o=(E=>(E.Backward="BACKWARD",E.Forward="FORWARD",E))(o||{});const m=E=>!E||typeof E!="object"?!1:"getLogRowContext"in E;var l=(E=>(E.LogsVolume="LogsVolume",E.LogsSample="LogsSample",E))(l||{}),i=(E=>(E.FullRange="FullRange",E.Limited="Limited",E))(i||{});const c=(E,h)=>E?("getDataProvider"in E||"getSupplementaryRequest"in E)&&"getSupplementaryQuery"in E&&"getSupportedSupplementaryQueryTypes"in E&&E.getSupportedSupplementaryQueryTypes().includes(h):!1,u=E=>!E||typeof E!="object"?!1:"getLogRowContextUi"in E,f=E=>E!=null&&typeof E=="object"&&"toggleQueryFilter"in E&&"queryHasFilter"in E,d=E=>E!=null&&typeof E=="object"&&"modifyQuery"in E&&"getSupportedQueryModifications"in E},64388:(Y,I,e)=>{"use strict";e.d(I,{k:()=>t});var t=(n=>(n[n.Standard=0]="Standard",n[n.Canvas=1]="Canvas",n[n.Custom=2]="Custom",n))(t||{})},62625:(Y,I,e)=>{"use strict";e.d(I,{X:()=>t});var t=(n=>(n.None="None",n.Viewer="Viewer",n.Editor="Editor",n.Admin="Admin",n))(t||{})},47070:(Y,I,e)=>{"use strict";e.d(I,{NV:()=>l,nQ:()=>o,v2:()=>m,wV:()=>s});var t=e(2543),n=e.n(t),r=e(11261),s=(i=>(i.Auto="auto",i.Vertical="vertical",i.Horizontal="horizontal",i))(s||{}),o=(i=>(i[i.Best=100]="Best",i[i.Good=70]="Good",i[i.OK=50]="OK",i))(o||{});class m{constructor(c,u){this.list=[],this.data=c,this.panel=u,this.dataSummary=this.computeDataSummary()}getListAppender(c){return new l(this.list,c)}computeDataSummary(){const c=this.data?.series||[];let u=0,f=0,d=0,E=0,h=0,y=0,a;for(const v of c){E+=v.length,v.meta?.preferredVisualisationType&&(a=v.meta.preferredVisualisationType);for(const g of v.fields)switch(y++,g.type){case r.PU.number:u+=1;break;case r.PU.time:f+=1;break;case r.PU.string:d+=1;break}v.length>h&&(h=v.length)}return{numberFieldCount:u,timeFieldCount:f,stringFieldCount:d,rowCountTotal:E,rowCountMax:h,fieldCount:y,preferredVisualisationType:a,frameCount:c.length,hasData:E>0,hasTimeField:f>0,hasNumberField:u>0,hasStringField:d>0}}getList(){return this.list}}class l{constructor(c,u){this.list=c,this.defaults=u}append(c){this.list.push((0,t.defaultsDeep)(c,this.defaults))}}},43429:(Y,I,e)=>{"use strict";e.d(I,{Ac:()=>r,QE:()=>n,Ud:()=>l,ZK:()=>o,ib:()=>m,kv:()=>s,pn:()=>t});var t=(i=>(i.alpha="alpha",i.beta="beta",i.stable="stable",i.deprecated="deprecated",i))(t||{}),n=(i=>(i.panel="panel",i.datasource="datasource",i.app="app",i.renderer="renderer",i.secretsmanager="secretsmanager",i))(n||{}),r=(i=>(i.internal="internal",i.valid="valid",i.invalid="invalid",i.modified="modified",i.missing="missing",i))(r||{}),s=(i=>(i.grafana="grafana",i.commercial="commercial",i.community="community",i.private="private",i.core="core",i))(s||{}),o=(i=>(i.missingSignature="signatureMissing",i.invalidSignature="signatureInvalid",i.modifiedSignature="signatureModified",i))(o||{}),m=(i=>(i.dashboard="dashboard",i.page="page",i.panel="panel",i.datasource="datasource",i))(m||{});class l{addConfigPage(c){return this.configPages||(this.configPages=[]),this.configPages.push(c),this}setChannelSupport(){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},74135:(Y,I,e)=>{"use strict";e.d(I,{S:()=>n,u:()=>t});var t=(r=>(r.link="link",r.component="component",r))(t||{}),n=(r=>(r.AlertInstanceAction="grafana/alerting/instance/action",r.CommandPalette="grafana/commandpalette/action",r.DashboardPanelMenu="grafana/dashboard/panel/menu",r.DataSourceConfig="grafana/datasources/config",r.ExploreToolbarAction="grafana/explore/toolbar/action",r.UserProfileTab="grafana/user/profile/tab",r))(n||{})},51527:(Y,I,e)=>{"use strict";e.d(I,{x:()=>n});var t=e(43429);function n(r){return r&&r!==t.Ac.valid&&r!==t.Ac.internal}},73372:(Y,I,e)=>{"use strict";e.d(I,{D_:()=>n,Ee:()=>s,FL:()=>r,QR:()=>t.QR});var t=e(52622),n=(o=>(o.Equal="Equal",o.NotEqual="NotEqual",o.EqualRegEx="EqualRegEx",o.NotEqualRegEx="NotEqualRegEx",o))(n||{});const r=o=>!o||typeof o!="object"?!1:"importFromAbstractQueries"in o,s=o=>!o||typeof o!="object"?!1:"exportToAbstractQueries"in o},37891:()=>{"use strict"},98102:()=>{"use strict"},64367:()=>{"use strict"},12470:(Y,I,e)=>{"use strict";e.d(I,{CO:()=>t,ZG:()=>n,zL:()=>r});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s[s.naturalAsc=7]="naturalAsc",s[s.naturalDesc=8]="naturalDesc",s))(n||{}),r=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(r||{})},25137:(Y,I,e)=>{"use strict";e.d(I,{I:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},50082:(Y,I,e)=>{"use strict";e.d(I,{O:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},43127:(Y,I,e)=>{"use strict";e.d(I,{Cn:()=>m,E2:()=>o,G$:()=>s,lE:()=>r});var t=e(52622),n=e(47232);const r=t.vp,s="YYYY-MM-DD HH:mm:ss";function o(){const l=(0,n.KQ)();return{from:(0,n.KQ)(l).subtract(6,"hour"),to:l,raw:{from:"now-6h",to:"now"}}}function m(){return{from:600,to:0}}},38893:()=>{"use strict"},81010:(Y,I,e)=>{"use strict";e.d(I,{M:()=>t,N:()=>n});var t=(r=>(r[r.NotPossible=-1]="NotPossible",r[r.NotApplicable=0]="NotApplicable",r[r.Applicable=1]="Applicable",r[r.HighlyApplicable=2]="HighlyApplicable",r))(t||{}),n=(r=>(r.True="true",r.False="false",r.Null="null",r.Empty="empty",r))(n||{})},25019:(Y,I,e)=>{"use strict";e.d(I,{W:()=>n,d:()=>t});var t=(r=>(r.ValueToText="value",r.RangeToText="range",r.RegexToText="regex",r.SpecialValue="special",r))(t||{}),n=(r=>(r.True="true",r.False="false",r.Null="null",r.NaN="nan",r.NullAndNaN="null+nan",r.Empty="empty",r))(n||{})},29505:(Y,I,e)=>{"use strict";e.d(I,{J$:()=>r,Qz:()=>t,ZV:()=>o,f5:()=>s,xi:()=>n});var t=(m=>(m.Legacy="legacy",m.Standard="standard",m.Custom="custom",m.Datasource="datasource",m))(t||{});class n{}class r extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class o extends n{getType(){return"datasource"}}},35853:(Y,I,e)=>{"use strict";e.d(I,{V:()=>t});function t(){Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(n){return this[n]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(n,r){this[n]=r},writable:!0,enumerable:!1,configurable:!0},add:{value:function(n){this.push(n)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}})}t()},60264:(Y,I,e)=>{"use strict";e.d(I,{bk:()=>l,pv:()=>u,iF:()=>c});var t=e(2543),n=e(69550),r=e(27310),s=e(39070),o=e(83077);class m{constructor(){this.properties=[]}addCustomEditor(d){return this.properties.push(d),this}getRegistry(){return new o.O(()=>this.properties)}getItems(){return this.properties}}class l extends m{addNumberInput(d){return this.addCustomEditor({...d,id:d.path,override:n.D.get("number").editor,editor:n.D.get("number").editor,process:r.m0,shouldApply:d.shouldApply??(()=>!0),settings:d.settings||{}})}addSliderInput(d){return this.addCustomEditor({...d,id:d.path,override:n.D.get("slider").editor,editor:n.D.get("slider").editor,process:r.m0,shouldApply:d.shouldApply??(()=>!0),settings:d.settings||{}})}addTextInput(d){return this.addCustomEditor({...d,id:d.path,override:n.D.get("text").editor,editor:n.D.get("text").editor,process:r.OU,shouldApply:d.shouldApply??(()=>!0),settings:d.settings||{}})}addSelect(d){return this.addCustomEditor({...d,id:d.path,override:n.D.get("select").editor,editor:n.D.get("select").editor,process:r.hL,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{options:[]}})}addRadio(d){return this.addCustomEditor({...d,id:d.path,override:n.D.get("radio").editor,editor:n.D.get("radio").editor,process:r.hL,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{options:[]}})}addBooleanSwitch(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("boolean").editor,override:n.D.get("boolean").editor,process:r.FM,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}addColorPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("color").editor,override:n.D.get("color").editor,process:r.hS,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}addUnitPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("unit").editor,override:n.D.get("unit").editor,process:r.lG,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}addFieldNamePicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("field-name").editor,override:n.D.get("field-name").editor,process:r.hS,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}addGenericEditor(d,E){return this.addCustomEditor({...d,id:d.path,editor:E,override:E,process:r.hS,shouldApply:d.shouldApply?d.shouldApply:()=>!0,settings:d.settings||{}})}}class i{constructor(d){this.cfg=d,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=E=>{const h=this.cfg.values;return h?h(E):{getValue:y=>E.getValue(`${this.path}.${y}`),onChange:(y,a)=>E.onChange(`${this.path}.${y}`,a)}},this.path=d.path,this.category=d.category,this.defaultValue=this.getDefaultValue(d)}getDefaultValue(d){let E=(0,s.Gv)(d.defaultValue)?(0,t.cloneDeep)(d.defaultValue):{};const h=new u;d.build(h,{data:[]});for(const y of h.getItems())y.defaultValue!=null&&(0,t.set)(E,y.path,y.defaultValue);return E}}function c(f){return(0,s.Gv)(f)&&"id"in f&&f.id==="nested-panel-options"}class u extends m{addNestedOptions(d){const E=new i(d);return this.addCustomEditor(E)}addNumberInput(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("number").editor})}addSliderInput(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("slider").editor})}addTextInput(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("text").editor})}addStringArray(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("strings").editor})}addSelect(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("select").editor})}addMultiSelect(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("multi-select").editor})}addRadio(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("radio").editor})}addBooleanSwitch(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("boolean").editor})}addColorPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("color").editor,settings:d.settings||{}})}addTimeZonePicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("timezone").editor,settings:d.settings||{}})}addUnitPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("unit").editor})}addFieldNamePicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("field-name").editor})}addDashboardPicker(d){return this.addCustomEditor({...d,id:d.path,editor:n.D.get("dashboard-uid").editor})}}},28802:(Y,I,e)=>{"use strict";e.d(I,{t:()=>r});var t=e(2543),n=e.n(t);function r(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},14588:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{insertAfterImmutably:()=>s,insertBeforeImmutably:()=>r,moveItemImmutably:()=>n,sortValues:()=>l});var t=e(52622);function n(i,c,u){const f=[...i];return Array.prototype.splice.call(f,u,0,Array.prototype.splice.call(f,c,1)[0]),f}function r(i,c,u){if(u<0||u>i.length)throw new Error("Index out of bounds");const f=[...i];return f.splice(u,0,c),f}function s(i,c,u){if(u<0||u>i.length)throw new Error("Index out of bounds");const f=[...i];return f.splice(u+1,0,c),f}const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),m=(i,c)=>i-c;function l(i){return(c,u)=>{if(c===u)return 0;if(u==null||typeof u=="string"&&u.trim()==="")return-1;if(c==null||typeof c=="string"&&c?.trim()==="")return 1;let f=o.compare;return typeof c=="number"&&typeof u=="number"&&(f=m),i===t.xB.Descending?f(u,c):f(c,u)}}},11710:(Y,I,e)=>{"use strict";e.d(I,{b:()=>r,k:()=>n});var t=e(83077),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const r=new t.O(()=>[{id:"+",name:"Add",operation:(s,o)=>s+o,binaryOperationID:"+"},{id:"-",name:"Subtract",operation:(s,o)=>s-o,binaryOperationID:"-"},{id:"*",name:"Multiply",operation:(s,o)=>s*o,binaryOperationID:"*"},{id:"/",name:"Divide",operation:(s,o)=>s/o,binaryOperationID:"/"}])},72436:(Y,I,e)=>{"use strict";e.d(I,{F7:()=>u,Jh:()=>f,_O:()=>g,i8:()=>E});var t=e(2543),n=e.n(t),r=e(44809),s=e.n(r),o=e(37471),m=e(14236),l=e(28240),i=e(11261),c=e(83195),u=(b=>(b[b.full=0]="full",b[b.name=1]="name",b[b.none=2]="none",b))(u||{});function f(b,P){return new E(P).readCSV(b)}var d=(b=>(b[b.Starting=0]="Starting",b[b.InHeader=1]="InHeader",b[b.ReadingRows=2]="ReadingRows",b))(d||{});class E{constructor(P){this.chunk=(C,D)=>{for(let T=0;T<C.data.length;T++){const M=C.data[T];if(M.length<1)continue;const O=M[0];if(O){if(O.startsWith("#")){const S=O.indexOf("#",2);if(S>0){const p=O.slice(1,S),x=p==="name";if(x||{unit:"#"}.hasOwnProperty(p)){this.state===2&&(this.current=new o.k({fields:[]}),this.data.push(this.current));const R=O.slice(S+1);if(x){this.current.addFieldFor(void 0,R);for(let B=1;B<M.length;B++)this.current.addFieldFor(void 0,M[B])}else{const{fields:B}=this.current;for(let U=0;U<B.length;U++){B[U].config||(B[U].config={});const F=B[U].config;F[p]=U===0?R:M[U]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,m.HW)(O)===i.PU.string){for(const p of M)this.current.addFieldFor(void 0,p);this.state=1;continue}this.state=1}}if(this.state,this.state=2,M.length>this.current.fields.length){const{fields:S}=this.current;for(let p=S.length;p<M.length;p++)this.current.addFieldFor(M[p]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(M),this.callback&&this.callback.onRow(M)}},P||(P={}),this.config=P.config||{},this.callback=P.callback,this.current=new o.k({fields:[]}),this.state=0,this.data=[]}readCSV(P){this.current=new o.k({fields:[]}),this.data=[this.current];const C={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(P,C),this.data}}function h(b,P){if(b==null)return"";const C=b.toString();return C.includes('"')?P.quoteChar+C.replace(/"/gi,'""')+P.quoteChar:C.includes(`
`)||P.delimiter&&C.includes(P.delimiter)?P.quoteChar+C+P.quoteChar:C}function y(b,P){return b.display?C=>{const D=b.display(C);return h((0,c.cN)(D),P)}:C=>h(C,P)}function a(b,P,C){const D=b==="name",T=b==="type";for(const M of P){const O=M.config;if(D||T||O&&O.hasOwnProperty(b)){let S="#"+b+"#";for(let p=0;p<P.length;p++){p>0&&(S=S+C.delimiter);let x=P[p].name;T?x=P[p].type:D||(x=P[p].config[b]),x&&(S=S+h(x,C))}return S+C.newline}}return""}function v(){const b=["x","y"];return b.toLocaleString?b.toLocaleString().charAt(1):","}function g(b,P){if(!b)return"";P=(0,t.defaults)(P,{delimiter:v(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let C=P.useExcelHeader?`sep=${P.delimiter}${P.newline}`:"";for(let D=0;D<b.length;D++){const T=b[D],{fields:M}=T;if(M.length===0)continue;if(P.headerStyle===0)C=C+a("name",M,P)+a("type",M,P)+a("unit",M,P)+a("dateFormat",M,P);else if(P.headerStyle===1){for(let S=0;S<M.length;S++)S>0&&(C+=P.delimiter),C+=`"${(0,l.Ct)(M[S],T).replace(/"/g,'""')}"`;C+=P.newline}const O=M[0].values.length;if(O>0){const S=M.map(p=>y(p,P));for(let p=0;p<O;p++){for(let x=0;x<M.length;x++){x>0&&(C=C+P.delimiter);const A=M[x].values[p];A!==null&&(C=C+S[x](A))}p!==O-1&&(C=C+P.newline)}}D!==b.length-1&&(C=C+P.newline)}return C}},6709:(Y,I,e)=>{"use strict";e.d(I,{c:()=>r,u:()=>s});var t=e(71733),n=e(76885);const r={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(i){const{onClickFn:c,replaceVariables:u,link:f,scopedVars:d,range:E,field:h,internalLink:y}=i,a=m(f.internal?.query,d,u),v=m(f.internal?.panelsState,d,u),g=m(f.internal?.meta?.correlationData,d,u),b=f.title?f.title:y.datasourceName;return{title:u(b,d),href:o(y.datasourceUid,a,E,v),onClick:c?P=>{P.preventDefault&&P.preventDefault(),c({datasourceUid:y.datasourceUid,queries:[a],panelsState:v,correlationHelperData:g,range:E})}:void 0,target:f?.targetBlank?"_blank":"_self",origin:h}}function o(i,c,u,f){return t.I.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.Pp)({...u?.raw?{range:(0,n.sQ)(u.raw)}:{},datasource:i,queries:[c],panelsState:f}))}`)}function m(i,c,u){if(!i)return i;if(typeof i=="string")return u(i,c);const f=JSON.parse(JSON.stringify(i));return l(f,c,u)}function l(i,c,u){for(const f of Object.keys(i))typeof i[f]=="string"?i[f]=u(i[f],c):typeof i[f]=="object"&&i[f]!==null&&(i[f]=l(i[f],c,u));return i}},22391:(Y,I,e)=>{"use strict";e.d(I,{BD:()=>c,EX:()=>u,Iz:()=>o,PG:()=>l,QP:()=>a,fN:()=>s,lO:()=>h,mn:()=>i,p$:()=>r,pN:()=>E,wY:()=>f,wp:()=>y,yV:()=>d,zX:()=>m});var t=e(2543),n=e.n(t);function r(v){return{uid:v.uid,type:v.type}}function s(v){return typeof v=="object"&&typeof v?.uid=="string"}function o(v){if(s(v))return v.uid;if((0,t.isString)(v))return v}const m=(v,g)=>b=>{E(v,g,b.currentTarget.value)},l=(v,g)=>b=>{h(v,g,b.currentTarget.value)},i=(v,g)=>b=>{y(v,g,b.currentTarget.value)},c=(v,g)=>b=>{h(v,g,b.value)},u=(v,g)=>b=>{h(v,g,b.currentTarget.checked)},f=(v,g)=>b=>{y(v,g,b.value)},d=(v,g)=>b=>{a(v,g)};function E(v,g,b){const P=v.options;v.onOptionsChange({...P,[g]:b})}const h=(v,g,b)=>{const P=v.options;v.onOptionsChange({...P,jsonData:{...P.jsonData,[g]:b}})},y=(v,g,b)=>{const P=v.options;v.onOptionsChange({...P,secureJsonData:{...P.secureJsonData?P.secureJsonData:{},[g]:b}})},a=(v,g)=>{const b=v.options;v.onOptionsChange({...b,secureJsonData:{...b.secureJsonData?b.secureJsonData:{},[g]:""},secureJsonFields:{...b.secureJsonFields,[g]:!1}})}},95344:(Y,I,e)=>{"use strict";e.d(I,{l:()=>n});const t={},n=(r,s,o)=>{let m=`[Deprecation warning] ${r}: ${s} is deprecated`;o&&(m+=`. Use ${o} instead`);const l=Date.now(),i=t[m];(!i||l-i>1e4)&&(console.warn(m),t[m]=l)}},87885:(Y,I,e)=>{"use strict";e.d(I,{f:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},39306:(Y,I,e)=>{"use strict";e.d(I,{R:()=>n,r:()=>r});var t=e(39070);function n({xField:s,yField:o,nullValueMode:m}){const l=s.values,i=o.values,c=l.length;if(i.length!==c)throw new Error("Unexpected field length");const u=m===t.UW.Ignore,f=m===t.UW.AsZero,d=[];for(let E=0;E<c;E++){const h=l[E];let y=i[E];if(y===null){if(u)continue;f&&(y=0)}h!==null&&d.push([h,y])}return d}function r(s,o){if(!o.from||!o.to||!s||s.length===0)return[];const m=o.from.valueOf(),l=o.to.valueOf(),i=s[0][1];return[[m,i],[l,i]]}},94032:(Y,I,e)=>{"use strict";e.d(I,{kP:()=>d.k,F7:()=>o.F7,i8:()=>o.i8,cI:()=>P.c,fu:()=>C.f,bk:()=>a.bk,An:()=>O.An,uc:()=>h.u,pv:()=>a.pv,OR:()=>n.O,_G:()=>E._,to:()=>T.t,XC:()=>t,bP:()=>d.b,tj:()=>c,Eg:()=>S.E,bh:()=>O.bh,lt:()=>s.l,yO:()=>m.yO,s6:()=>m.s6,h6:()=>m.h6,p$:()=>r.p$,Iz:()=>r.Iz,RZ:()=>v.R,rG:()=>v.r,cs:()=>S.c,tY:()=>u,E6:()=>l.E,dO:()=>f,fN:()=>r.fN,RI:()=>i.R,Ig:()=>g.I,Yi:()=>D.Y,uS:()=>P.u,_p:()=>m._p,_8:()=>x._,wm:()=>i.w,PG:()=>r.PG,EX:()=>r.EX,BD:()=>r.BD,zX:()=>r.zX,yV:()=>r.yV,mn:()=>r.mn,wY:()=>r.wY,Xy:()=>m.Xy,Jh:()=>o.Jh,j_:()=>p.j,hB:()=>l.h,Pp:()=>b.Pp,_O:()=>o._O,zL:()=>y.z,sQ:()=>b.sQ,j7:()=>E.j,lO:()=>r.lO,pN:()=>r.pN,QP:()=>r.QP,wp:()=>r.wp,kM:()=>b.kM,kz:()=>M.k});var t=e(14588),n=e(83077),r=e(22391),s=e(95344),o=e(72436),m=e(8249),l=e(97706),i=e(92041);const c=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],u=A=>{let R,B,U=Number.MAX_VALUE;for(let F=0;F<A.values.length;F++){const K=A.values[F];if(R!==void 0){const w=K-R;B===void 0&&(U=w),w<U&&(U=w)}R=K}return U},f=A=>{for(let R=0;R<A.values.length;R++){const B=A.values[R];if(B!=null){const U=B.toString();if(U.length===13&&U%1e3!==0)return!0}}return!1};var d=e(11710),E=e(27618),h=e(25352),y=e(50877),a=e(60264),v=e(39306),g=e(71733),b=e(76885),P=e(6709),C=e(87885),D=e(92341),T=e(28802),M=e(72495),O=e(62398),S=e(92053),p=e(43659),x=e(80147)},8249:(Y,I,e)=>{"use strict";e.d(I,{Xy:()=>n,_p:()=>o,h6:()=>m,s6:()=>s,yO:()=>r});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(l){const i={};return l.replace(t,(c,u,f,d)=>(i[u]=d,"")),i}function r(l){return l.reduce((i,c)=>{if(!c)throw new Error("Need parsed labels to find common labels.");return Object.keys(c).forEach(u=>{(i[u]===void 0||i[u]!==c[u])&&delete i[u]}),Object.keys(i).forEach(u=>{c[u]===void 0&&delete i[u]}),i},{...l[0]})}function s(l,i){const c={...l};return Object.keys(i).forEach(u=>{delete c[u]}),c}function o(l,i){if(!l)return!0;for(const[c,u]of Object.entries(l))if(!i||i[c]!==u)return!1;return!0}function m(l,i="",c){if(!l||Object.keys(l).length===0)return i;const f=Object.keys(l).sort().map(d=>`${d}="${l[d]}"`).join(", ");return c?f:["{",f,"}"].join("")}},71733:(Y,I,e)=>{"use strict";e.d(I,{I:()=>f});var t=e(40672),n=e(76885);let r={appSubUrl:""},s,o;const m=d=>{try{return new URL(d)}catch{return}},l=d=>{const E=m(d);if(E&&E.origin!==window.location.origin)return d;const h=r.appSubUrl??"",y=h.endsWith("/")?1:0,a=d.startsWith("http");let v=h;return(!d.startsWith("/")||a)&&(v=`${window.location.origin}${h}`),d.length>0&&(d.indexOf(v+"/")===0||d===v)?d.slice(v.length-y):d},i=d=>d.startsWith("/")?`${r.appSubUrl}${l(d)}`:d,f={initialize:d=>{r=d.config,s=d.getTimeRangeForUrl,o=d.getVariablesUrlParams},stripBaseFromUrl:l,assureBaseUrl:i,updateSearchParams:(d,E)=>{const h=new URLSearchParams(E);try{const y=new URL(d);return h.forEach((a,v)=>y.searchParams.set(v,a)),y.href}catch{const y=new URLSearchParams(d);return h.forEach((a,v)=>{y.set(v,a)}),"?"+y.toString()}},getTimeRangeUrlParams:()=>s?n.kM.toUrlParams(s()):null,getVariablesUrlParams:d=>{if(!o)return null;const E=o(d);return n.kM.toUrlParams(E)},getUrlForPartial:(d,E)=>{const h=n.kM.parseKeyValue(d.search.startsWith("?")?d.search.substring(1):d.search);for(const y of Object.keys(E))E[y]===null||E[y]===void 0?delete h[y]:h[y]=E[y];return i(n.kM.renderUrl(d.pathname,h))},processUrl:d=>r.disableSanitizeHtml?d:t.sQ.sanitizeUrl(d)}},92341:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>t});function t(n){return new Proxy(n,{apply(r,s,o){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(r,o,s.constructor)}})}},80147:(Y,I,e)=>{"use strict";e.d(I,{_:()=>t});function t(n,r){return r.id===n?!0:r.aliasIDs?r.aliasIDs.includes(n):!1}},25352:(Y,I,e)=>{"use strict";e.d(I,{u:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.arc="arc__",n.icon="icon",n.color="color",n.source="source",n.target="target",n.detail="detail__",n.nodeRadius="noderadius",n.thickness="thickness",n.highlighted="highlighted",n.strokeDasharray="strokedasharray",n))(t||{})},97706:(Y,I,e)=>{"use strict";e.d(I,{E:()=>n,h:()=>t});function t(r,s=0){if(Number.isInteger(r))return r;let o=10**s,m=r*o*(1+Number.EPSILON);return Math.round(m)/o}function n(r){return((""+r).split(".")[1]||"").length}},92041:(Y,I,e)=>{"use strict";e.d(I,{R:()=>n,w:()=>t});const t=r=>Object.keys(r).reduce((s,o)=>(r[o]!==void 0&&(s[o]=r[o]),s),{}),n=r=>typeof r=="object"&&r!==null&&Object.keys(r).length===0},50877:(Y,I,e)=>{"use strict";e.d(I,{z:()=>t});const t=n=>({label:n,value:n})},27618:(Y,I,e)=>{"use strict";e.d(I,{_:()=>n,j:()=>r});var t=e(83077),n=(s=>(s.Abs="abs",s.Exp="exp",s.Ln="ln",s.Floor="floor",s.Ceil="ceil",s))(n||{});const r=new t.O(()=>[{id:"abs",name:"Absolute value",operation:s=>Math.abs(s),unaryOperationID:"abs"},{id:"exp",name:"Natural exponent",operation:s=>Math.exp(s),unaryOperationID:"exp"},{id:"ln",name:"Natural logarithm",operation:s=>Math.log(s),unaryOperationID:"ln"},{id:"floor",name:"Floor",operation:s=>Math.floor(s),unaryOperationID:"floor"},{id:"ceil",name:"Ceiling",operation:s=>Math.ceil(s),unaryOperationID:"ceil"}])},76885:(Y,I,e)=>{"use strict";e.d(I,{Pp:()=>f,kM:()=>u,sQ:()=>d});var t=e(47232);/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function n(E,h){return h&&Object.keys(h).length>0&&(E+="?"+s(h)),E}function r(E,h){return encodeURIComponent(E).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,h?"%20":"+").replace(/[!'()*]/g,function(y){return"%"+y.charCodeAt(0).toString(16).toUpperCase()})}function s(E,h=!0){const y=[],a=/\[\]$/,v=h?(C,D)=>r(C,D):(C,D)=>encodeURIComponent(C),g=C=>Object.prototype.toString.call(C)==="[object Array]",b=(C,D)=>{if(D=typeof D=="function"?D():D===null||D===void 0?"":D,typeof D!="boolean")y[y.length]=v(C,!0)+"="+v(D,!0);else{const T=D?"":"="+v("false",!0);y[y.length]=v(C,!0)+T}},P=(C,D)=>{let T,M,O;if(C)if(g(D))for(T=0,M=D.length;T<M;T++)a.test(C)?b(C,D[T]):P(C,D[T]);else if(D&&String(D)==="[object Object]")for(O in D)P(C+"["+O+"]",D[O]);else b(C,D);else if(g(D))for(T=0,M=D.length;T<M;T++)b(D[T].name,D[T].value);else for(O in D)P(O,D[O]);return y};return P("",E).join("&")}function o(E){return s(E,!1)}function m(E,h){if(h!=null&&h!==""){const y=E.indexOf("?");y!==-1?E.length-y>1&&(E+="&"):E+="?",E+=h}return E}function l(){const h=window.location.search.substring(1).split("&"),y={};for(const a of h){const v=a.split("=");if(v.length>1){const g=decodeURIComponent(v[0]),b=decodeURIComponent(v[1]);g in y?y[g]=[...y[g],b]:y[g]=[b]}else if(v.length===1){const g=decodeURIComponent(v[0]);y[g]=!0}}return y}function i(E){const h={},y=(E||"").split("&");for(let a of y){let v,g,b;if(a&&(g=a=a.replace(/\+/g,"%20"),v=a.indexOf("="),v!==-1&&(g=a.substring(0,v),b=a.substring(v+1)),g=c(g),g!==void 0)){b=b!==void 0?c(b):!0;let P;typeof b=="string"&&b!==""?P=b==="true"||b==="false"?b==="true":b:P=b,h.hasOwnProperty(g)?Array.isArray(h[g])?h[g].push(b):h[g]=[h[g],isNaN(P)?b:P]:h[g]=isNaN(P)?b:P}}return h}function c(E){try{return decodeURIComponent(E)}catch{return}}const u={renderUrl:n,toUrlParams:s,appendQueryToUrl:m,getUrlSearchParams:l,parseKeyValue:i,serializeParams:o};function f(E,h){return h!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(E)}const d=E=>{let h=E.from;(0,t.Ar)(h)&&(h=h.valueOf().toString());let y=E.to;return(0,t.Ar)(y)&&(y=y.valueOf().toString()),{from:h,to:y}}},62398:(Y,I,e)=>{"use strict";e.d(I,{An:()=>m,Zz:()=>s,bh:()=>l});var t=e(47737),n=e(54479),r=e(25019);function s(c,u){for(const f of c)switch(f.type){case r.d.ValueToText:if(u==null)continue;const d=f.options[u];if(d)return d;break;case r.d.RangeToText:if(u==null)continue;const E=parseFloat(u);if(isNaN(E)||!isNaN(f.options.from)&&E<f.options.from||!isNaN(f.options.to)&&E>f.options.to)continue;return f.options.result;case r.d.RegexToText:if(u==null||typeof u!="string")continue;const a=(0,n.dO)(f.options.pattern);if(u.match(a)){const v={...f.options.result};return v.text!=null&&(v.text=u.replace(a,f.options.result.text||"")),v}case r.d.SpecialValue:switch(f.options.match){case r.W.Null:{if(u==null)return f.options.result;break}case r.W.NaN:{if(typeof u=="number"&&isNaN(u))return f.options.result;break}case r.W.NullAndNaN:{if(typeof u=="number"&&isNaN(u)||u==null)return f.options.result;break}case r.W.True:{if(u===!0||u==="true")return f.options.result;break}case r.W.False:{if(u===!1||u==="false")return f.options.result;break}case r.W.Empty:{if(u==="")return f.options.result;break}}}return null}function o(c){return(typeof c=="number"||typeof c=="string"&&c.trim()!=="")&&!isNaN(c)}var m=(c=>(c[c.ValueToText=1]="ValueToText",c[c.RangeToText=2]="RangeToText",c))(m||{});function l(c,u){const f=[];let d=c.mappingType;if(c.mappingType||(c.valueMaps&&c.valueMaps.length?d=1:c.rangeMaps&&c.rangeMaps.length&&(d=2)),d===1)for(let E=0;E<c.valueMaps.length;E++){const h=c.valueMaps[E];f.push(i({...h,id:E,type:r.d.ValueToText},c.fieldConfig?.defaults?.thresholds||u))}else if(d===2)for(let E=0;E<c.rangeMaps.length;E++){const h=c.rangeMaps[E];f.push(i({...h,id:E,type:r.d.RangeToText},c.fieldConfig?.defaults?.thresholds||u))}return f}function i(c,u){const f={type:r.d.ValueToText,options:{}},d=[];let E;const h=parseFloat(c.text);if(u&&!isNaN(h)){const y=(0,t.yQ)(h,u.steps);y&&y.color&&(E=y.color)}switch(c.type){case 1:case r.d.ValueToText:c.value!=null&&(c.value==="null"?d.push({type:r.d.SpecialValue,options:{match:r.W.Null,result:{text:c.text,color:E}}}):f.options[String(c.value)]={text:c.text,color:E});break;case 2:case r.d.RangeToText:c.from==="null"||c.to==="null"?d.push({type:r.d.SpecialValue,options:{match:r.W.Null,result:{text:c.text,color:E}}}):d.push({type:r.d.RangeToText,options:{from:+c.from,to:+c.to,result:{text:c.text,color:E}}});break}return Object.keys(f.options).length>0&&d.unshift(f),d[0]}},92053:(Y,I,e)=>{"use strict";e.d(I,{E:()=>n,c:()=>r});const t="__searchFilter",n=s=>s&&typeof s=="string"?s.indexOf(t)!==-1:!1,r=s=>{const{query:o,wildcardChar:m}=s;if(!n(o))return{};let{options:l}=s;return l=l||{searchFilter:""},{__searchFilter:{value:l.searchFilter?`${l.searchFilter}${m}`:`${m}`,text:""}}}},72495:(Y,I,e)=>{"use strict";e.d(I,{k:()=>o});var t=e(44240),n=e(39697),r=e(65961),s=e(67791);function o({whileLoading:m,source:l}){return(0,t.h)((0,n.O)(200).pipe((0,r.u)(m),(0,s.Q)(l)),l)}},56496:(Y,I,e)=>{"use strict";e.d(I,{G8:()=>t.G8,Hg:()=>t.Hg,Ke:()=>t.Ke,Mg:()=>t.Mg,Qc:()=>t.Qc,UR:()=>t.UR,cH:()=>t.cH,cN:()=>t.cN,gZ:()=>t.gZ,j9:()=>t.j9,j_:()=>t.j_,uH:()=>t.uH,yP:()=>t.yP});var t=e(83195)},26517:(Y,I,e)=>{"use strict";e.d(I,{Gl:()=>n,cL:()=>o,rT:()=>i,yW:()=>l});var t=e(83195);function n(c,u){const f=["","K","M","B","T"],d=(0,t.yP)(1e3,f);return(E,h,y)=>{if(E==null)return{text:""};const a=E<0;a&&(E=Math.abs(E));const v=d(E,h,y);return u?v.suffix=v.suffix!==void 0?`${v.suffix}${c}`:void 0:v.prefix=c,a&&(v.prefix=`-${v.prefix?.length?v.prefix:""}`),v}}const r=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=r.indexOf("");function o(c){const u=r.findIndex(f=>f.normalize("NFKD")===c.normalize("NFKD"));return u<0?0:u-s}const m=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function l(c,u=0){const f=m.map(d=>" "+d+c);return(0,t.yP)(1024,f,u)}function i(c,u=0){const f=r.map(d=>" "+d+c);return(0,t.yP)(1e3,f,s+u)}},83195:(Y,I,e)=>{"use strict";e.d(I,{Qc:()=>ne,cN:()=>J,j_:()=>re,Ke:()=>Be,uH:()=>ye,j9:()=>j,Hg:()=>ie,yP:()=>oe,UR:()=>ue,cH:()=>be,Mg:()=>le,gZ:()=>k,G8:()=>X});var t=e(2543);function n(ve,Me){return ve===null?{text:""}:{text:le(ve,Me),suffix:"%"}}function r(ve,Me){return ve===null?{text:""}:{text:le(100*ve,Me),suffix:"%"}}function s(ve,Me){if(ve==null)return{text:""};const ke=o(ve,Me);return ke.text.substring(0,1)==="-"?ke.text="-0x"+ke.text.substring(1):ke.text="0x"+ke.text,ke}function o(ve,Me){return ve==null?{text:""}:{text:parseFloat(le(ve,Me)).toString(16).toUpperCase()}}function m(ve,Me){return ve==null?{text:""}:{text:ve.toExponential(Me??void 0)}}var l=e(72724),i=e(42994),c=e(47232),u=(ve=>(ve.Year="year",ve.Month="month",ve.Week="week",ve.Day="day",ve.Hour="hour",ve.Minute="minute",ve.Second="second",ve.Millisecond="millisecond",ve))(u||{});const f=["year","month","week","day","hour","minute","second","millisecond"],d={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function E(ve,Me){return ve===null?{text:""}:Math.abs(ve)<1e3?{text:le(ve,Me),suffix:" ns"}:Math.abs(ve)<1e6?k(ve/1e3,Me," \xB5s"):Math.abs(ve)<1e9?k(ve/1e6,Me," ms"):Math.abs(ve)<6e10?k(ve/1e9,Me," s"):Math.abs(ve)<36e11?k(ve/6e10,Me," min"):Math.abs(ve)<864e11?k(ve/36e11,Me," hour"):k(ve/864e11,Me," day")}function h(ve,Me){return ve===null?{text:""}:Math.abs(ve)<1e3?{text:le(ve,Me),suffix:" \xB5s"}:Math.abs(ve)<1e6?k(ve/1e3,Me," ms"):k(ve/1e6,Me," s")}function y(ve,Me,ke){return ve===null?{text:""}:Math.abs(ve)<1e3?{text:le(ve,Me),suffix:" ms"}:Math.abs(ve)<6e4?k(ve/1e3,Me," s"):Math.abs(ve)<36e5?k(ve/6e4,Me," min"):Math.abs(ve)<864e5?k(ve/36e5,Me," hour"):Math.abs(ve)<31536e6?k(ve/864e5,Me," day"):k(ve/31536e6,Me," year")}function a(ve,Me){return ve===null?{text:""}:ve===0?{text:"0",suffix:" s"}:Math.abs(ve)<1e-6?k(ve*1e9,Me," ns"):Math.abs(ve)<.001?k(ve*1e6,Me," \xB5s"):Math.abs(ve)<1?k(ve*1e3,Me," ms"):Math.abs(ve)<60?{text:le(ve,Me),suffix:" s"}:Math.abs(ve)<3600?k(ve/60,Me," min"):Math.abs(ve)<86400?k(ve/3600,Me," hour"):Math.abs(ve)<604800?k(ve/86400,Me," day"):Math.abs(ve)<31536e3?k(ve/604800,Me," week"):k(ve/31556900,Me," year")}function v(ve,Me){return ve===null?{text:""}:Math.abs(ve)<60?{text:le(ve,Me),suffix:" min"}:Math.abs(ve)<1440?k(ve/60,Me," hour"):Math.abs(ve)<10080?k(ve/1440,Me," day"):Math.abs(ve)<604800?k(ve/10080,Me," week"):k(ve/525948,Me," year")}function g(ve,Me){return ve===null?{text:""}:Math.abs(ve)<24?{text:le(ve,Me),suffix:" hour"}:Math.abs(ve)<168?k(ve/24,Me," day"):Math.abs(ve)<8760?k(ve/168,Me," week"):k(ve/8760,Me," year")}function b(ve,Me){return ve===null?{text:""}:Math.abs(ve)<7?{text:le(ve,Me),suffix:" day"}:Math.abs(ve)<365?k(ve/7,Me," week"):k(ve/365,Me," year")}function P(ve,Me,ke){if(ve===null)return{text:""};if(ve===0)return{text:"0",suffix:" "+ke+"s"};if(ve<0){const pe=P(-ve,Me,ke);return pe.suffix||(pe.suffix=""),pe.suffix+=" ago",pe}ve*=d[ke]*1e3;const Se=[];let We=!1,De=0;Me!=null&&(De=Me);for(let pe=0;pe<f.length&&De>=0;pe++){const Ne=d[f[pe]]*1e3,Le=ve/Ne;if(Le>=1||We){We=!0;const He=Math.floor(Le),je=f[pe]+(He!==1?"s":"");Se.push(He+" "+je),ve=ve%Ne,De--}}return{text:Se.join(", ")}}function C(ve,Me){if(ve===null)return{text:""};if(ve<1e3)return{text:(0,c.yT)(ve).format("SSS\\m\\s")};if(ve<6e4){let De="ss\\s:SSS\\m\\s";return Me===0&&(De="ss\\s"),{text:(0,c.yT)(ve).format(De)}}if(ve<36e5){let De="mm\\m:ss\\s:SSS\\m\\s";return Me===0?De="mm\\m":Me===1&&(De="mm\\m:ss\\s"),{text:(0,c.yT)(ve).format(De)}}let ke="mm\\m:ss\\s:SSS\\m\\s";const Se=`${("0"+Math.floor((0,c.Ah)(ve,"milliseconds").asHours())).slice(-2)}h`;return Me===0?ke="":Me===1?ke="mm\\m":Me===2&&(ke="mm\\m:ss\\s"),{text:ke?`${Se}:${(0,c.yT)(ve).format(ke)}`:Se}}function D(ve,Me){return P(ve,Me,"millisecond")}function T(ve,Me){return P(ve,Me,"second")}function M(ve){if(ve<0){const De=M(-ve);return De.suffix||(De.suffix=""),De.suffix+=" ago",De}const Me=[],ke=Math.floor(ve/3600),Se=Math.floor(ve%3600/60),We=Math.floor(ve%3600%60);return ke>9?Me.push(""+ke):Me.push("0"+ke),Se>9?Me.push(""+Se):Me.push("0"+Se),We>9?Me.push(""+We):Me.push("0"+We),{text:Me.join(":")}}function O(ve){if(ve<0){const We=O(-ve);return We.suffix||(We.suffix=""),We.suffix+=" ago",We}let Me="";const ke=Math.floor(ve/(24*3600));ke>0&&(Me=ke+" d ");const Se=M(ve-ke*24*3600);return{text:Me+Se.text}}function S(ve,Me){return a(ve/100,Me)}function p(ve,Me){return C(ve,Me)}function x(ve,Me){return C(ve*1e3,Me)}function A(ve,Me){return(ke,Se,We,De)=>Me&&(0,c.KQ)().isSame(ke,"day")?{text:(0,l.LE)(ke,{format:Me,timeZone:De})}:{text:(0,l.LE)(ke,{format:ve,timeZone:De})}}const R=A("YYYY-MM-DD HH:mm:ss"),B=A("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),U=A("MM/DD/YYYY h:mm:ss a"),F=A("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function K(){return A((0,i.Od)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function w(){return A((0,i.Od)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,i.Od)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function L(ve,Me,ke,Se,We){return{text:(0,l.LE)(ve,{format:We?i.WC.fullDateMS:i.WC.fullDate,timeZone:Se})}}function V(ve,Me,ke,Se){return{text:(0,l.fq)(ve,{timeZone:Se})}}var N=e(26517);const z=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:X("")},{name:"String",id:"string",fn:be},{name:"short",id:"short",fn:oe(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"SI short",id:"sishort",fn:(0,N.rT)("")},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:r},{name:"Humidity (%H)",id:"humidity",fn:X("%H")},{name:"Decibel",id:"dB",fn:X("dB")},{name:"Candela (cd)",id:"candela",fn:(0,N.rT)("cd")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:o},{name:"Scientific notation",id:"sci",fn:m},{name:"Locale format",id:"locale",fn:ie},{name:"Pixels",id:"pixel",fn:X("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:X("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:X("f/sec\xB2")},{name:"G unit",id:"accG",fn:X("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:X("\xB0")},{name:"Radians",id:"radian",fn:X("rad")},{name:"Gradian",id:"grad",fn:X("grad")},{name:"Arc Minutes",id:"arcmin",fn:X("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:X("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:X("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:X("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:X("mi\xB2")},{name:"Acres (ac)",id:"acres",fn:X("ac")},{name:"Hectares (ha)",id:"hectares",fn:X("ha")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,N.rT)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,N.rT)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,N.rT)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,N.rT)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,N.rT)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,N.rT)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,N.rT)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,N.rT)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:X("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:X("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:X("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:X("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:X("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:X("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:X("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:X("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:X("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:X("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:X("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:X("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,N.Gl)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,N.Gl)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,N.Gl)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,N.Gl)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,N.Gl)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,N.Gl)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,N.Gl)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,N.Gl)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,N.Gl)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,N.Gl)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,N.Gl)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,N.Gl)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,N.Gl)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,N.Gl)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,N.Gl)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,N.Gl)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,N.Gl)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,N.Gl)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,N.Gl)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,N.Gl)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,N.Gl)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,N.Gl)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,N.Gl)("\u0111",!0)},{name:"Turkish Lira (\u20BA)",id:"currencyTRY",fn:(0,N.Gl)("\u20BA",!0)},{name:"Malaysian Ringgit (RM)",id:"currencyMYR",fn:(0,N.Gl)("RM")},{name:"CFP franc (XPF)",id:"currencyXPF",fn:(0,N.Gl)("XPF")},{name:"Bulgarian Lev (BGN)",id:"currencyBGN",fn:(0,N.Gl)("BGN")},{name:"Guaran\xED (\u20B2)",id:"currencyPYG",fn:(0,N.Gl)("\u20B2")}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,N.yW)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,N.rT)("B")},{name:"bits(IEC)",id:"bits",fn:(0,N.yW)("b")},{name:"bits(SI)",id:"decbits",fn:(0,N.rT)("b")},{name:"kibibytes",id:"kbytes",fn:(0,N.yW)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,N.rT)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,N.yW)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,N.rT)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,N.yW)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,N.rT)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,N.yW)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,N.rT)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,N.yW)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,N.rT)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,N.rT)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,N.yW)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,N.rT)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,N.yW)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,N.rT)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,N.yW)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,N.yW)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,N.rT)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,N.rT)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,N.yW)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,N.yW)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,N.rT)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,N.rT)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,N.yW)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,N.yW)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,N.rT)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,N.rT)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,N.yW)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,N.yW)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,N.rT)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,N.rT)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,N.yW)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,N.yW)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,N.rT)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,N.rT)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:R},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:B},{name:"Datetime US",id:"dateTimeAsUS",fn:U},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:F},{name:"Datetime local",id:"dateTimeAsLocal",fn:K()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:w()},{name:"Datetime default",id:"dateTimeAsSystem",fn:L},{name:"From Now",id:"dateTimeFromNow",fn:V}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,N.rT)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,N.rT)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,N.rT)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,N.rT)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,N.rT)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:X("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,N.rT)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,N.rT)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,N.rT)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,N.rT)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,N.rT)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,N.rT)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,N.rT)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,N.rT)("W-Min",1)},{name:"Megawatt-hour (MWh)",id:"mwatth",fn:(0,N.rT)("Wh",2)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,N.rT)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,N.rT)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,N.rT)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,N.rT)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,N.rT)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,N.rT)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,N.rT)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,N.rT)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,N.rT)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,N.rT)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,N.rT)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,N.rT)("dBm")},{name:"Milliohm (m\u03A9)",id:"mohm",fn:(0,N.rT)("\u03A9",-1)},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,N.rT)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,N.rT)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,N.rT)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,N.rT)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,N.rT)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,N.rT)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,N.rT)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,N.rT)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,N.rT)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,N.rT)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,N.rT)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,N.rT)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:X("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:X("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:X("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:X("cfm")},{name:"Litre/hour",id:"litreh",fn:X("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:X("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:X("mL/min")},{name:"Lux (lx)",id:"lux",fn:X("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,N.rT)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,N.rT)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,N.rT)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,N.rT)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,N.rT)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,N.rT)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,N.rT)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,N.rT)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,N.rT)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,N.rT)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,N.rT)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,N.rT)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,N.rT)("g")},{name:"pound (lb)",id:"masslb",fn:X("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,N.rT)("g",1)},{name:"metric ton (t)",id:"masst",fn:X("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,N.rT)("m",-1)},{name:"inch (in)",id:"lengthin",fn:X("in")},{name:"feet (ft)",id:"lengthft",fn:X("ft")},{name:"meter (m)",id:"lengthm",fn:(0,N.rT)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,N.rT)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:X("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,N.rT)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,N.rT)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,N.rT)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,N.rT)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:X("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:X("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:X('"Hg')},{name:"PSI",id:"pressurepsi",fn:oe(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,N.rT)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,N.rT)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,N.rT)("Gy")},{name:"rad",id:"radrad",fn:(0,N.rT)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,N.rT)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,N.rT)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,N.rT)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,N.rT)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,N.rT)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,N.rT)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,N.rT)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,N.rT)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,N.rT)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:X("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,N.rT)("Hz")},{name:"Kilohertz (kHz)",id:"rotkhz",fn:(0,N.rT)("Hz",1)},{name:"Megahertz (MHz)",id:"rotmhz",fn:(0,N.rT)("Hz",2)},{name:"Gigahertz (GHz)",id:"rotghz",fn:(0,N.rT)("Hz",3)},{name:"Radians per second (rad/s)",id:"rotrads",fn:X("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:X("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:X("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:X("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:X("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,N.rT)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:E},{name:"microseconds (\xB5s)",id:"\xB5s",fn:h},{name:"milliseconds (ms)",id:"ms",fn:y},{name:"seconds (s)",id:"s",fn:a},{name:"minutes (m)",id:"m",fn:v},{name:"hours (h)",id:"h",fn:g},{name:"days (d)",id:"d",fn:b},{name:"duration (ms)",id:"dtdurationms",fn:D},{name:"duration (s)",id:"dtdurations",fn:T},{name:"duration (hh:mm:ss)",id:"dthms",fn:M},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:O},{name:"Timeticks (s/100)",id:"timeticks",fn:S},{name:"clock (ms)",id:"clockms",fn:p},{name:"clock (s)",id:"clocks",fn:x}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:ue("c/s")},{name:"ops/sec (ops)",id:"ops",fn:ue("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:ue("req/s")},{name:"reads/sec (rps)",id:"rps",fn:ue("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:ue("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:ue("io/s")},{name:"events/sec (eps)",id:"eps",fn:ue("evt/s")},{name:"messages/sec (mps)",id:"mps",fn:ue("msg/s")},{name:"records/sec (rps)",id:"recps",fn:ue("rec/s")},{name:"rows/sec (rps)",id:"rowsps",fn:ue("rows/s")},{name:"counts/min (cpm)",id:"cpm",fn:ue("c/m")},{name:"ops/min (opm)",id:"opm",fn:ue("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:ue("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:ue("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:ue("wr/m")},{name:"events/min (epm)",id:"epm",fn:ue("evts/m")},{name:"messages/min (mpm)",id:"mpm",fn:ue("msgs/m")},{name:"records/min (rpm)",id:"recpm",fn:ue("rec/m")},{name:"rows/min (rpm)",id:"rowspm",fn:ue("rows/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:X("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:X("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:X("mph")},{name:"knot (kn)",id:"velocityknot",fn:X("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,N.rT)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,N.rT)("L")},{name:"cubic meter",id:"m3",fn:X("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:X("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:X("dm\xB3")},{name:"gallons",id:"gallons",fn:X("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:ne("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:ne("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:ne("On","Off")}]}];function J(ve){return`${ve.prefix??""}${ve.text}${ve.suffix??""}`}let G=[];const H={};let q=!1;function le(ve,Me){if(ve===null)return"";if(ve===Number.NEGATIVE_INFINITY||ve===Number.POSITIVE_INFINITY)return ve.toLocaleString();if(Me==null&&(Me=me(ve)),ve===0)return ve.toFixed(Me);const ke=Me?Math.pow(10,Math.max(0,Me)):1,Se=String(Math.round(ve*ke)/ke);if(Se.indexOf("e")!==-1||ve===0)return Se;const We=Se.indexOf("."),De=We===-1?0:Se.length-We-1;return De<Me?(De?Se:Se+".")+String(ke).slice(1,Me-De+1):Se}function me(ve){const Me=Math.abs(ve);let Se=-Math.floor(Math.log(Me)/Math.LN10)+1;const We=Math.pow(10,-Se);return Me/We>2.25&&++Se,ve%1===0&&(Se=0),Math.max(0,Se)}function k(ve,Me,ke){return{text:le(ve,Me),suffix:ee(ke,Math.abs(ve)>1)}}function ee(ve,Me){if(!Me)return ve;switch(ve){case" min":case" hour":case" day":case" week":case" year":return`${ve}s`;default:return ve}}function X(ve,Me){return(ke,Se)=>{if(ke===null)return{text:""};const We=le(ke,Se);return ve?Me?{text:We,prefix:ve}:{text:We,suffix:" "+ve}:{text:We}}}function j(ve){return ve&&ve.startsWith("bool")}function ne(ve,Me){return ke=>({text:ke?ve:Me})}const te=(ve,Me)=>Math.log10(Me)/Math.log10(ve);function oe(ve,Me,ke=0){return(Se,We)=>{if(Se==null)return{text:""};if(Se===Number.NEGATIVE_INFINITY||Se===Number.POSITIVE_INFINITY||isNaN(Se))return{text:Se.toLocaleString()};const De=Se===0?0:Math.floor(te(ve,Math.abs(Se))),pe=Me[(0,t.clamp)(ke+De,0,Me.length-1)];return{text:le(Se/ve**(0,t.clamp)(De,-ke,Me.length-ke-1),We),suffix:pe}}}function ie(ve,Me){return ve==null?{text:""}:{text:ve.toLocaleString(void 0,{maximumFractionDigits:Me??void 0})}}function ue(ve){const ke=oe(1e3,["","K","M","B","T"]);return(Se,We,De)=>{if(Se===null)return{text:""};const pe=ke(Se,We,De);return pe.suffix+=" "+ve,pe}}function be(ve){return{text:`${ve}`}}function ge(){G=z();for(const ve of G)for(const Me of ve.formats)H[Me.id]=Me.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(ve=>{const Me=H[ve.to];Me&&(H[ve.from]=Me)}),q=!0}function re(ve){if(!ve)return X("");q||ge();const Me=H[ve];if(!Me&&ve){let ke=ve.indexOf(":");if(ke>0){const Se=ve.substring(0,ke),We=ve.substring(ke+1);if(Se==="prefix")return X(We,!0);if(Se==="suffix")return X(We,!1);if(Se==="time")return A(We);if(Se==="si"){const De=(0,N.cL)(We.charAt(0)),pe=De===0?We:We.substring(1);return(0,N.rT)(pe,De)}if(Se==="count")return ue(We);if(Se==="currency")return(0,N.Gl)(We);if(Se==="bool"){if(ke=We.indexOf("/"),ke>=0){const De=We.substring(0,ke),pe=We.substring(ke+1);return ne(De,pe)}return ne(We,"-")}}return X(ve)}return Me}function ye(){return q||ge(),H}function Be(){return q||ge(),G.map(ve=>({text:ve.name,submenu:ve.formats.map(Me=>({text:Me.name,value:Me.id}))}))}},79178:(Y,I,e)=>{"use strict";e.d(I,{L:()=>r});const t="ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.";let n=!1;class r extends Array{get buffer(){return this}set buffer(o){this.length=0;const m=o?.length;if(m){let l=65e3,i=Math.ceil(m/l);for(let c=0;c<i;c++)this.push.apply(this,o.slice(c*l,(c+1)*l))}}constructor(o){super(),this.buffer=o??[],n||(console.warn(t),n=!0)}toJSON(){return[...this]}}},36120:(Y,I,e)=>{"use strict";e.d(I,{$:()=>n});var t=e(18008);class n extends t.F{constructor(s){return super(),this.buffer=s.buffer||[],this.capacity=this.buffer.length,this.tail=s.append!=="head",this.index=0,this.add=this.getAddFunction(),s.capacity&&this.setCapacity(s.capacity),new Proxy(this,{get(o,m,l){if(typeof m!="symbol"){const i=+m;if(String(i)===m)return o.get(i)}return Reflect.get(o,m,l)},set(o,m,l,i){if(typeof m!="symbol"){const c=+m;if(String(c)===m)return o.set(c,l),!0}return Reflect.set(o,m,l,i)}})}getAddFunction(){return this.capacity>this.buffer.length?this.tail?s=>{this.buffer.push(s),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:s=>{this.buffer.unshift(s),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?s=>{this.buffer[this.index]=s,this.index=(this.index+1)%this.buffer.length}:s=>{let o=this.index-1;o<0&&(o=this.buffer.length-1),this.buffer[o]=s,this.index=o}}setCapacity(s){if(this.capacity===s)return;const o=this.toArray();if(s>this.length)this.buffer=o;else if(s<this.capacity){const m=this.length-s;this.tail?this.buffer=o.slice(m,o.length):this.buffer=o.slice(0,o.length-m)}this.capacity=s,this.index=0,this.add=this.getAddFunction()}setAppendMode(s){const o=s!=="head";o!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=o,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(s){return this.buffer[(s+this.index)%this.buffer.length]}set(s,o){this.buffer[(s+this.index)%this.buffer.length]=o}get length(){return this.buffer.length}}},18008:(Y,I,e)=>{"use strict";e.d(I,{E:()=>s,F:()=>n});var t;class n{constructor(){this[t]={}}static{t=Symbol.unscopables}*iterator(){for(let m=0;m<this.length;m++)yield this.get(m)}set(m,l){throw"unsupported operation"}add(m){throw"unsupported operation"}push(...m){for(const l of m)this.add(l);return this.length}[Symbol.iterator](){return this.iterator()}forEach(m){return s(this).forEach(m)}map(m){return s(this).map(m)}filter(m){return s(this).filter(m)}at(m){return this.get(m)}toArray(){const m=new Array(this.length);for(let l=0;l<this.length;l++)m[l]=this.get(l);return m}join(m){return this.toArray().join(m)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...m){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(m){throw new Error("Method not implemented.")}splice(m,l,...i){throw new Error("Method not implemented.")}unshift(...m){throw new Error("Method not implemented.")}fill(m,l,i){throw new Error("Method not implemented.")}copyWithin(m,l,i){throw new Error("Method not implemented.")}slice(m,l){return this.toArray().slice(m,l)}indexOf(m,l){return this.toArray().indexOf(m,l)}lastIndexOf(m,l){return this.toArray().lastIndexOf(m,l)}every(m,l){return this.toArray().every(m,l)}some(m,l){return this.toArray().some(m,l)}reduce(m,l){throw new Error("Method not implemented.")}reduceRight(m,l){throw new Error("Method not implemented.")}find(m,l){return this.toArray().find(m,l)}findIndex(m,l){return this.toArray().findIndex(m,l)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(m,l){return this.toArray().includes(m,l)}flatMap(m,l){return this.toArray().flatMap(m,l)}flat(m){throw new Error("Method not implemented.")}}const r=[];function s(o){return{*[Symbol.iterator](){for(let m=0;m<o.length;m++)yield o.get(m)},forEach(m){for(let l=0;l<o.length;l++)m(o.get(l),l,r)},map(m){const l=[];for(let i=0;i<o.length;i++)l.push(m(o.get(i),i,r));return l},filter(m){const l=[];let i=0;for(const c of this)m(c,i++,r)&&l.push(c);return l}}}},13390:(Y,I,e)=>{"use strict";e.d(I,{X:()=>t});const t={RadioButton:{container:"data-testid radio-button"},Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",overlayContent:"data-testid TimePicker Overlay Content",fromField:"data-testid Time Range from field",toField:"data-testid Time Range to field",applyTimeRange:"data-testid TimePicker submit button",copyTimeRange:"data-testid TimePicker copy button",pasteTimeRange:"data-testid TimePicker paste button",calendar:{label:"data-testid Time Range calendar",openButton:"data-testid Open time range calendar",closeButton:"data-testid Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DateTimePicker:{input:"data-testid date-time-input"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"data-testid Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{connectionSettings:"Data source connection URL",manageAlerts:"prometheus-alerts-manager",scrapeInterval:"data-testid scrape interval",queryTimeout:"data-testid query timeout",defaultEditor:"data-testid default editor",disableMetricLookup:"disable-metric-lookup",prometheusType:"data-testid prometheus type",prometheusVersion:"data-testid prometheus version",cacheLevel:"data-testid cache level",incrementalQuerying:"prometheus-incremental-querying",queryOverlapWindow:"data-testid query overlap window",disableRecordingRules:"disable-recording-rules",customQueryParameters:"data-testid custom query parameters",httpMethod:"data-testid http method",exemplarsAddButton:"data-testid Add exemplar config button",internalLinkSwitch:"data-testid Internal link switch"},queryEditor:{explain:"data-testid prometheus explain switch wrapper",editorToggle:"data-testid QueryEditorModeToggle",options:"data-testid prometheus options",legend:"data-testid prometheus legend wrapper",format:"data-testid prometheus format",step:"prometheus-step",type:"data-testid prometheus type",exemplars:"prometheus-exemplars",builder:{metricSelect:"data-testid metric select",hints:"data-testid prometheus hints",metricsExplorer:"data-testid metrics explorer",queryAdvisor:"data-testid query advisor"},code:{queryField:"data-testid prometheus query field",metricsBrowser:{openButton:"data-testid open metrics browser",selectMetric:"data-testid select a metric",metricList:"data-testid metric list",labelNamesFilter:"data-testid label names filter",labelValuesFilter:"data-testid label values filter",useQuery:"data-testid use query",useAsRateQuery:"data-testid use as rate query",validateSelector:"data-testid validate selector",clear:"data-testid clear"}}},exemplarMarker:"data-testid Exemplar marker",variableQueryEditor:{queryType:"data-testid query type",labelnames:{metricRegex:"data-testid label names metric regex"},labelValues:{labelSelect:"data-testid label values label select"},metricNames:{metricRegex:"data-testid metric names metric regex"},varQueryResult:"data-testid variable query result",seriesQuery:"data-testid prometheus series query",classicQuery:"data-testid prometheus classic query"},annotations:{minStep:"prometheus-annotation-min-step",title:"data-testid prometheus annotation title",tags:"data-testid prometheus annotation tags",text:"data-testid prometheus annotation text",seriesValueAsTimestamp:"data-testid prometheus annotation series value as timestamp"}}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"data-testid SubMenu container",icon:"data-testid SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`data-testid Panel header item ${n}`,menuItems:n=>`data-testid Panel menu item ${n}`,menu:n=>`data-testid Panel menu ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`,status:n=>`data-testid Panel status ${n}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"},PanelDataErrorMessage:"data-testid Panel data error message"},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"data testid Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer",body:"data-testid table body"}}},VizLegend:{seriesName:n=>`data-testid VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"data-testid Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper",subtitle:"data-testid drawer subtitle"},DashboardSaveDrawer:{saveButton:"data-testid Save dashboard drawer button",saveAsButton:"data-testid Save as dashboard drawer button",saveAsTitleInput:"Save dashboard title field"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`,fieldInput:n=>`data-testid Panel editor option pane field input ${n}`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",showZoomField:"Map controls Show zoom control field property editor",showAttributionField:"Map controls Show attribution field property editor",showScaleField:"Map controls Show scale field property editor",showMeasureField:"Map controls Show measure tools field property editor",showDebugField:"Map controls Show debug field property editor",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"data-testid query-history-button",addQuery:"data-testid query-tab-add-query",queryGroupTopSection:"data-testid query group top section",addExpression:"data-testid query-tab-add-expression"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`data-testid ${n}`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"data-testid Alert editor tab content"},AlertRules:{groupToggle:"data-testid group-collapse-toggle",toggle:"data-testid collapse-toggle",expandedContent:"data-testid expanded-content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:n=>`data-testid New transform ${n}`,transformationEditor:n=>`data-testid Transformation editor ${n}`,transformationEditorDebugger:n=>`data-testid Transformation editor debugger ${n}`},Transforms:{card:n=>`data-testid New transform ${n}`,disableTransformationButton:"data-testid Disable transformation button",Reduce:{modeLabel:"data-testid Transform mode label",calculationsLabel:"data-testid Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location Mode field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"data-testid search transformations",noTransformationsMessage:"data-testid no transformations message",addTransformationButton:"data-testid add transformation button",removeAllTransformationsButton:"data-testid remove all transformations button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"data-testid Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{Menu:"data-testid navigation mega-menu",item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar",shareDashboard:"data-testid Share dashboard",markAsFavorite:"data-testid Mark as favorite",editDashboard:{editButton:"data-testid Edit dashboard button",saveButton:"data-testid Save dashboard button",exitButton:"data-testid Exit edit mode button",settingsButton:"data-testid Dashboard settings",addRowButton:"data-testid Add row button",addLibraryPanelButton:"data-testid Add a panel from the panel library button",addVisualizationButton:"data-testid Add new visualization menu item",pastePanelButton:"data-testid Paste panel button",discardChangesButton:"data-testid Discard changes button",discardLibraryPanelButton:"data-testid Discard library panel button",unlinkLibraryPanelButton:"data-testid Unlink library panel button",saveLibraryPanelButton:"data-testid Save library panel button",backToDashboardButton:"data-testid Back to dashboard button"}},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`,itemButton:n=>`data-testid ${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"data-testid Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"data-testid folder-picker-input"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source",dataSourceList:"data-testid Data source list dropdown",advancedModal:{dataSourceList:"data-testid Data source list",builtInDataSourceList:"data-testid Built in data source list"}},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container",changeTimeSettingsButton:"data-testid Time zone picker Change time settings button"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"data-testid Query field"},QueryBuilder:{queryPatterns:"data-testid Query patterns",labelSelect:"data-testid Select label",valueSelect:"data-testid Select value",matchOperatorSelect:"data-testid Select match operator"},ValuePicker:{button:n=>`data-testid Value picker button ${n}`,select:n=>`data-testid Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"data-testid Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"data-testid Data link"},CodeEditor:{container:"data-testid Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"data-testid Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table",extensionPointTabs:"data-testid-extension-point-tabs",extensionPointTab:n=>`data-testid-extension-point-tab-${n}`},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input",editor:{testButton:"data-testid annotations-test-button",resultContainer:"data-testid annotations-query-result-container"}},Tooltip:{container:"data-testid tooltip"},ReturnToPrevious:{buttonGroup:"data-testid dismissable button group",backButton:"data-testid back",dismissButton:"data-testid dismiss"},SQLQueryEditor:{selectColumn:"data-testid select-column",selectAggregation:"data-testid select-aggregation",selectAlias:"data-testid select-alias",filterConjunction:"data-testid filter-conjunction",filterField:"data-testid filter-field",filterOperator:"data-testid filter-operator",headerTableSelector:"data-testid header-table-selector",headerFilterSwitch:"data-testid header-filter-switch",headerGroupSwitch:"data-testid header-group-switch",headerOrderSwitch:"data-testid header-order-switch",headerPreviewSwitch:"data-testid header-preview-switch"}}},13544:(Y,I,e)=>{"use strict";e.d(I,{Tp:()=>r});var t=e(13390);const r={pages:{Login:{url:"/login",username:"data-testid Username input field",password:"data-testid Password input field",submit:"data-testid Login button",skip:"data-testid Skip change password button"},Home:{url:"/"},DataSource:{name:"data-testid Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"data-testid Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"data-testid Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},EditDataSource:{url:s=>`/datasources/edit/${s}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:s=>`data-testid ${s}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag",shareButton:"data-testid share-button",scrollContainer:"data-testid Dashboard canvas scroll container",playlistControls:{prev:"data-testid playlist previous dashboard button",stop:"data-testid playlist stop dashboard button",next:"data-testid playlist next dashboard button"}},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:s=>`data-testid Dashboard annotations submenu Label ${s}`,annotationToggle:s=>`data-testid Dashboard annotations submenu Toggle ${s}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.X.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.X.CallToActionCard.buttonV2("Add annotation query"),annotations:"data-testid list-annotations"},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview",delete:"data-testid annotations-delete",apply:"data-testid annotations-apply",enable:"data-testid annotation-enable",hide:"data-testid annotation-hide"}},Variables:{List:{addVariableCTA:t.X.CallToActionCard.button("Add variable"),addVariableCTAV2:t.X.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"data-testid Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"data-testid Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"data-testid Variable editor Preview of Values option",submitButton:"data-testid Variable editor Run Query button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.X.DataSourcePicker.inputV2,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"data-testid Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input",autoEnabledCheckbox:"data-testid interval variable auto value checkbox",stepCountIntervalSelect:"data-testid interval variable step count input",minIntervalInput:"data-testid interval variable mininum interval input"},GroupByVariable:{dataSourceSelect:t.X.DataSourcePicker.inputV2,infoText:"data-testid group by variable info text",modeToggle:"data-testid group by variable mode toggle"},AdHocFiltersVariable:{datasourceSelect:t.X.DataSourcePicker.inputV2,infoText:"data-testid ad-hoc filters variable info text",modeToggle:"data-testid ad-hoc filters variable mode toggle"}}}},Annotations:{marker:"data-testid annotation-marker"},Rows:{Repeated:{ConfigSection:{warningMessage:"data-testid Repeated rows warning message"}}}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox",saveRefresh:"Dashboard settings Save Dashboard Modal Save refresh checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}},PublicDashboardScene:{Tab:"Tab Public Dashboard"}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"},footer:"public-dashboard-footer"},PublicDashboardScene:{loadingPage:"public-dashboard-scene-loading-page",page:"public-dashboard-scene-page",controls:"public-dashboard-controls"},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},PublicDashboardConfirmAccess:{submitButton:"data-testid confirm-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"data-testid Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"data-testid Plugin signature info",disabledInfo:"data-testid Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"data-testid playlist-form-delete-item"},BrowseDashboards:{table:{body:"data-testid browse-dashboards-table",row:s=>`data-testid browse dashboards row ${s}`,checkbox:s=>`data-testid ${s} checkbox`},NewFolderForm:{form:"data-testid new folder form",nameInput:"data-testid new-folder-name-input",createButton:"data-testid new-folder-create-button"}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",anonUserDevices:"data-testid anon-user-devices-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UserAnonListPage:{container:"data-testid user-anon-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:s=>`data-testid dashboards-list-item-${s}`}}},ProfilePage:{url:"/profile"}},components:t.X}},76365:(Y,I,e)=>{"use strict";e.d(I,{Jz:()=>E,oA:()=>d,Ik:()=>f});var t=e(11261),n=e(75972),r=e(57875),s=e(5546),o=e(2543);function m(y,a){const v=l(y);return i(v,a,"parents")}function l(y){return y.map(a=>{if(!a.parents?.length)return a;const v={...a,children:[]},g=[{child:v,parent:a.parents[0]}];for(;g.length;){const b=g.shift(),P={...b.parent,children:b.child?[b.child]:[],parents:[]};b.child&&(P.value=b.child.value,b.child.parents=[P]),b.parent.parents?.length&&g.push({child:P,parent:b.parent.parents[0]})}return v})}function i(y,a,v="children"){const g=v==="parents"?"children":"parents",b=[],P=[{previous:void 0,items:y,level:0}];for(;P.length;){const C=P.shift(),D=C.items.flatMap(S=>S.itemIndexes),T={value:C.items.reduce((S,p)=>S+p.value,0),itemIndexes:D,children:[],parents:[],start:0,level:C.level};if(b[C.level]=b[C.level]||[],b[C.level].push(T),C.previous){T[g]=[C.previous];const S=C.previous[v]?.reduce((p,x)=>p+x.value,0)||0;T.start=C.previous.start+S,C.previous[v].push(T)}const M=C.items.flatMap(S=>S[v]||[]),O=(0,o.groupBy)(M,S=>a.getLabel(S.itemIndexes[0]));for(const S of Object.values(O))P.push({previous:T,items:S,level:C.level+1})}return v==="parents"&&(b.reverse(),b.forEach((C,D)=>{C.forEach(T=>{T.level=D})})),b}function c(y,a){const v=[];let g=0,b;const P={};for(let D=0;D<y.data.length;D++){const T=y.getLevel(D),M=D>0?y.getLevel(D-1):void 0;if(v[T]=v[T]||[],M&&M>=T){const S=v[T][v[T].length-1];g=S.start+y.getValue(S.itemIndexes[0])+y.getValueRight(S.itemIndexes[0]),b=S.parents[0]}const O={itemIndexes:[D],value:y.getValue(D)+y.getValueRight(D),valueRight:y.isDiffFlamegraph()?y.getValueRight(D):void 0,start:g,parents:b&&[b],children:[],level:T};P[y.getLabel(D)]?P[y.getLabel(D)].push(O):P[y.getLabel(D)]=[O],b&&b.children.push(O),b=O,v[T].push(O)}const C=new u(a?.collapsingThreshold);return a?.collapsing&&C.addTree(v[0][0]),[v,P,C.getMap()]}class u{constructor(a){this.map=new Map,this.threshold=.99,a!==void 0&&(this.threshold=a)}addTree(a){const v=[a];for(;v.length;){const g=v.shift();g.parents?.length&&this.addItem(g,g.parents[0]),g.children.length&&v.unshift(...g.children)}}addItem(a,v){if(v&&a.value>v.value*this.threshold&&v.children.length===1)if(this.map.has(v)){const g=this.map.get(v);this.map.set(a,g),g.items.push(a)}else{const g={items:[v,a],collapsed:!0};this.map.set(v,g),this.map.set(a,g)}}getMap(){return new Map(this.map)}}function f(y){return y.missingFields.length?`Data is missing fields: ${y.missingFields.join(", ")}`:y.wrongTypeFields.length?`Data has fields of wrong type: ${y.wrongTypeFields.map(a=>`${a.name} has type ${a.type} but should be ${a.expectedTypes.join(" or ")}`).join(", ")}`:""}function d(y){const a=[["label",[t.PU.string,t.PU.enum]],["level",[t.PU.number]],["value",[t.PU.number]],["self",[t.PU.number]]],v=[],g=[];for(const b of a){const[P,C]=b,D=y.fields.find(T=>T.name===P);if(!D){v.push(P);continue}C.includes(D.type)||g.push({name:P,expectedTypes:C,type:D.type})}if(v.length>0||g.length>0)return{wrongTypeFields:g,missingFields:v}}class E{constructor(a,v,g=(0,n.a)()){this.data=a,this.options=v;const b=d(a);if(b)throw new Error(f(b));if(this.labelField=a.fields.find(C=>C.name==="label"),this.levelField=a.fields.find(C=>C.name==="level"),this.valueField=a.fields.find(C=>C.name==="value"),this.selfField=a.fields.find(C=>C.name==="self"),this.valueRightField=a.fields.find(C=>C.name==="valueRight"),this.selfRightField=a.fields.find(C=>C.name==="selfRight"),(this.valueField||this.selfField)&&!(this.valueField&&this.selfField))throw new Error("Malformed dataFrame: both valueRight and selfRight has to be present if one of them is present.");const P=this.labelField?.config?.type?.enum;P?(this.labelDisplayProcessor=(0,r.J)({field:this.labelField,theme:g}),this.uniqueLabels=P.text||[]):(this.labelDisplayProcessor=C=>({text:C+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,r.J)({field:this.valueField,theme:g})}isDiffFlamegraph(){return!!(this.valueRightField&&this.selfRightField)}getLabel(a){return this.labelDisplayProcessor(this.labelField.values[a]).text}getLevel(a){return this.levelField.values[a]}getValue(a){return h(this.valueField,a)}getValueRight(a){return h(this.valueRightField,a)}getSelf(a){return h(this.selfField,a)}getSelfRight(a){return h(this.selfRightField,a)}getSelfDisplay(a){return this.valueDisplayProcessor(this.getSelf(a))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case s.Zk.Bytes:return"RAM";case s.Zk.Nanoseconds:return"Time"}return"Count"}getLevels(){return this.initLevels(),this.levels}getSandwichLevels(a){const v=this.getNodesWithLabel(a);if(!v?.length)return[[],[]];const g=m(v,this),b=i(v,this);return[g,b]}getNodesWithLabel(a){return this.initLevels(),this.uniqueLabelsMap[a]}getCollapsedMap(){return this.initLevels(),this.collapsedMap}initLevels(){if(!this.levels){const[a,v,g]=c(this,this.options);this.levels=a,this.uniqueLabelsMap=v,this.collapsedMap=g}}}function h(y,a){return y?(typeof a=="number"?[a]:a).reduce((g,b)=>g+y.values[b],0):0}},85194:(Y,I,e)=>{"use strict";e.d(I,{A:()=>na});var t=e(32196),n=e(53076),r=e(96540),s=e(49185),o=e(60578),m=e(14578);const l=22*window.devicePixelRatio,i=10*window.devicePixelRatio,c=.5*window.devicePixelRatio,u=20*window.devicePixelRatio,f=.5*window.devicePixelRatio,d=4*window.devicePixelRatio,E=3*window.devicePixelRatio,h=3*window.devicePixelRatio,y=4*window.devicePixelRatio,a=2*window.devicePixelRatio,v=800,g=120;var b=e(64539),P=e(59093),C=e(28122);const T=({data:Bt,itemData:ln,onMenuItemClick:mn,onItemFocus:Dn,onSandwich:hn,collapseConfig:Fn,onExpandGroup:wn,onCollapseGroup:Hn,onExpandAllGroups:An,onCollapseAllGroups:In,getExtraContextMenuButtons:kn,collapsing:Vt,allGroupsExpanded:zt,allGroupsCollapsed:kt,selectedView:rn,search:yn})=>{function gn(){const Rn=kn?.(ln,Bt.data,{selectedView:rn,isDiff:Bt.isDiffFlamegraph(),search:yn,collapseConfig:Fn})||[];return r.createElement(r.Fragment,null,r.createElement(b.D,{label:"Focus block",icon:"eye",onClick:()=>{Dn(),mn()}}),r.createElement(b.D,{label:"Copy function name",icon:"copy",onClick:()=>{navigator.clipboard.writeText(ln.label).then(()=>{mn()})}}),r.createElement(b.D,{label:"Sandwich view",icon:"gf-show-context",onClick:()=>{hn(),mn()}}),Rn.map(({label:Kt,icon:mt,onClick:pt})=>r.createElement(b.D,{label:Kt,icon:mt,onClick:()=>pt(),key:Kt})),Vt&&r.createElement(P.r,{label:"Grouping"},Fn?Fn.collapsed?r.createElement(b.D,{label:"Expand group",icon:"angle-double-down",onClick:()=>{wn(),mn()}}):r.createElement(b.D,{label:"Collapse group",icon:"angle-double-up",onClick:()=>{Hn(),mn()}}):null,!zt&&r.createElement(b.D,{label:"Expand all groups",icon:"angle-double-down",onClick:()=>{An(),mn()}}),!kt&&r.createElement(b.D,{label:"Collapse all groups",icon:"angle-double-up",onClick:()=>{In(),mn()}})))}return r.createElement("div",{"data-testid":"contextMenu"},r.createElement(C.t,{renderMenuItems:gn,x:ln.posX+10,y:ln.posY,focusOnOpen:!1}))};var M=e(83195),O=e(40845),S=e(48840),p=e(17464),x=e(69503);const A=({data:Bt,item:ln,totalTicks:mn,position:Dn,collapseConfig:hn})=>{const Fn=(0,O.of)(F);if(!(ln&&Dn))return null;let wn;if(Bt.isDiffFlamegraph()){const Hn=B(Bt,ln,mn);wn=r.createElement(S.j,{className:Fn.tooltipTable,columns:[{id:"label",header:""},{id:"baseline",header:"Baseline"},{id:"comparison",header:"Comparison"},{id:"diff",header:"Diff"}],data:Hn,getRowId:An=>An.rowId})}else{const Hn=R(Bt,ln,mn);wn=r.createElement("p",{className:Fn.lastParagraph},Hn.unitTitle,r.createElement("br",null),"Total: ",r.createElement("b",null,Hn.unitValue)," (",Hn.percentValue,"%)",r.createElement("br",null),"Self: ",r.createElement("b",null,Hn.unitSelf)," (",Hn.percentSelf,"%)",r.createElement("br",null),"Samples: ",r.createElement("b",null,Hn.samples))}return r.createElement(p.ZL,null,r.createElement(x.o,{className:Fn.tooltipContainer,position:Dn,offset:{x:15,y:0}},r.createElement("div",{className:Fn.tooltipContent},r.createElement("p",{className:Fn.tooltipName},Bt.getLabel(ln.itemIndexes[0]),hn&&hn.collapsed?r.createElement("span",null,r.createElement("br",null),"and ",hn.items.length," similar items"):""),wn)))},R=(Bt,ln,mn)=>{const Dn=Bt.valueDisplayProcessor(ln.value),hn=Bt.getSelfDisplay(ln.itemIndexes),Fn=Math.round(1e4*(Dn.numeric/mn))/100,wn=Math.round(1e4*(hn.numeric/mn))/100;let Hn=Dn.text+Dn.suffix,An=hn.text+hn.suffix;const In=Bt.getUnitTitle();return In==="Count"&&(Dn.suffix||(Hn=Dn.text),hn.suffix||(An=hn.text)),{percentValue:Fn,percentSelf:wn,unitTitle:In,unitValue:Hn,unitSelf:An,samples:Dn.numeric.toLocaleString()}},B=(Bt,ln,mn)=>{const hn=Bt.getLevels()[0][0].valueRight,Fn=mn-hn,wn=ln.value-ln.valueRight,Hn=Math.round(1e4*wn/Fn)/100,An=Math.round(1e4*ln.valueRight/hn)/100,In=(An-Hn)/Hn*100,kn=U(Bt,Bt.valueDisplayProcessor(wn)),Vt=U(Bt,Bt.valueDisplayProcessor(ln.valueRight)),zt=(0,M.j_)("short");return[{rowId:"1",label:"% of total",baseline:Hn+"%",comparison:An+"%",diff:zt(In).text+"%"},{rowId:"2",label:"Value",baseline:kn,comparison:Vt,diff:U(Bt,Bt.valueDisplayProcessor(ln.valueRight-wn))},{rowId:"3",label:"Samples",baseline:zt(wn).text,comparison:zt(ln.valueRight).text,diff:zt(ln.valueRight-wn).text}]};function U(Bt,ln){let mn=ln.text+ln.suffix;return Bt.getUnitTitle()==="Count"&&(ln.suffix||(mn=ln.text)),mn}const F=Bt=>({tooltipContainer:(0,t.css)`
    title: tooltipContainer;
    overflow: hidden;
  `,tooltipContent:(0,t.css)`
    title: tooltipContent;
    font-size: ${Bt.typography.bodySmall.fontSize};
    width: 100%;
  `,tooltipName:(0,t.css)`
    title: tooltipName;
    margin-top: 0;
    word-break: break-all;
  `,lastParagraph:(0,t.css)`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:(0,t.css)`
    title: name;
    margin-bottom: 10px;
  `,tooltipTable:(0,t.css)`
    title: tooltipTable;
    max-width: 400px;
  `}),K=A;var w=e(84140),L=e(5546),V=e(21313);function N(Bt,ln=0){let mn,Dn,hn,Fn,wn,Hn,An,In;for(mn=Bt.length&3,Dn=Bt.length-mn,hn=ln,wn=3432918353,Hn=461845907,In=0;In<Dn;)An=Bt.charCodeAt(In)&255|(Bt.charCodeAt(++In)&255)<<8|(Bt.charCodeAt(++In)&255)<<16|(Bt.charCodeAt(++In)&255)<<24,++In,An=(An&65535)*wn+(((An>>>16)*wn&65535)<<16)&4294967295,An=An<<15|An>>>17,An=(An&65535)*Hn+(((An>>>16)*Hn&65535)<<16)&4294967295,hn^=An,hn=hn<<13|hn>>>19,Fn=(hn&65535)*5+(((hn>>>16)*5&65535)<<16)&4294967295,hn=(Fn&65535)+27492+(((Fn>>>16)+58964&65535)<<16);switch(An=0,mn){case 3:An^=(Bt.charCodeAt(In+2)&255)<<16;case 2:An^=(Bt.charCodeAt(In+1)&255)<<8;case 1:An^=Bt.charCodeAt(In)&255;default:An=(An&65535)*wn+(((An>>>16)*wn&65535)<<16)&4294967295,An=An<<15|An>>>17,An=(An&65535)*Hn+(((An>>>16)*Hn&65535)<<16)&4294967295,hn^=An}return hn^=Bt.length,hn^=hn>>>16,hn=(hn&65535)*2246822507+(((hn>>>16)*2246822507&65535)<<16)&4294967295,hn^=hn>>>13,hn=(hn&65535)*3266489909+(((hn>>>16)*3266489909&65535)<<16)&4294967295,hn^=hn>>>16,hn>>>0}const z=[(0,w.A)({h:24,s:69,l:60}),(0,w.A)({h:34,s:65,l:65}),(0,w.A)({h:194,s:52,l:61}),(0,w.A)({h:163,s:45,l:55}),(0,w.A)({h:211,s:48,l:60}),(0,w.A)({h:246,s:40,l:65}),(0,w.A)({h:305,s:63,l:79}),(0,w.A)({h:47,s:100,l:73}),(0,w.A)({r:183,g:219,b:171}),(0,w.A)({r:244,g:213,b:152}),(0,w.A)({r:78,g:146,b:249}),(0,w.A)({r:249,g:186,b:143}),(0,w.A)({r:242,g:145,b:145}),(0,w.A)({r:130,g:181,b:216}),(0,w.A)({r:229,g:168,b:226}),(0,w.A)({r:174,g:162,b:224}),(0,w.A)({r:154,g:196,b:138}),(0,w.A)({r:242,g:201,b:109}),(0,w.A)({r:101,g:197,b:219}),(0,w.A)({r:249,g:147,b:78}),(0,w.A)({r:234,g:100,b:96}),(0,w.A)({r:81,g:149,b:206}),(0,w.A)({r:214,g:131,b:206}),(0,w.A)({r:128,g:110,b:183})],J=le(1,100,0,1),G=le(100,100,0,1),H=`linear-gradient(90deg, ${J} 0%, ${G} 100%)`,q=`linear-gradient(90deg, ${z[0]} 0%, ${z[2]} 30%, ${z[6]} 50%, ${z[7]} 70%, ${z[8]} 100%)`;function le(Bt,ln,mn,Dn){const hn=Math.min(1,Bt/ln/(Dn-mn)),Fn=50-50*hn,wn=65+7*hn;return(0,w.A)({h:Fn,s:100,l:wn})}function me(Bt,ln){const mn=oe(Bt),hn=N(mn||"",0)%z.length;let Fn=z[hn].clone();return ln.isLight&&(Fn=Fn.brighten(15)),Fn}const k=["rgb(0, 170, 0)","rgb(148, 142, 142)","rgb(200, 0, 0)"],ee=`linear-gradient(90deg, ${k[0]} 0%, ${k[1]} 50%, ${k[2]} 100%)`,X=["rgb(26, 133, 255)","rgb(148, 142, 142)","rgb(220, 50, 32)"],j=`linear-gradient(90deg, ${X[0]} 0%, ${X[1]} 50%, ${X[2]} 100%)`;function ne(Bt,ln,mn,Dn,hn){const Fn=hn===L.yU.Default?k:X,wn=(0,V.scaleLinear)().domain([-100,0,100]).range(Fn),Hn=Bt-ln,An=mn-Dn;if(Dn===0||An===0){const kt=wn(0);return(0,w.A)(kt)}const In=Math.round(1e4*Hn/An)/100,Vt=(Math.round(1e4*ln/Dn)/100-In)/In*100,zt=wn(Vt);return(0,w.A)(zt)}const te=[["phpspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.php+)(?<line_info>.*)$/],["pyspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.py+)(?<line_info>.*)$/],["rbspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.rb+)(?<line_info>.*)$/],["nodespy",/^(\.\/node_modules\/)?(?<packageName>[^/]*)(?<filename>.*\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$/],["gospy",/^(?<packageName>.*?\/.*?\.|.*?\.|.+)(?<functionName>.*)$/],["javaspy",/^(?<packageName>.+\/)(?<filename>.+\.)(?<functionName>.+)$/],["dotnetspy",/^(?<packageName>.+)\.(.+)\.(.+)\(.*\)$/],["tracing",/^(?<packageName>.+?):.*$/],["pyroscope-rs",/^(?<packageName>[^::]+)/],["ebpfspy",/^(?<packageName>.+)$/],["unknown",/^(?<packageName>.+)$/]];function oe(Bt){for(const[ln,mn]of te){const Dn=Bt.match(mn);if(Dn)return Dn.groups?.packageName||""}}function ie(Bt){const{canvasRef:ln,data:mn,root:Dn,depth:hn,direction:Fn,wrapperWidth:wn,rangeMin:Hn,rangeMax:An,matchedLabels:In,textAlign:kn,totalViewTicks:Vt,totalColorTicks:zt,totalTicksRight:kt,colorScheme:rn,focusedItemData:yn,collapsedMap:gn}=Bt,Rn=ye(ln,wn,hn),Kt=(0,O.$j)(),mt=(0,r.useMemo)(()=>{const on=(0,w.A)(Kt.colors.background.secondary);return Kt.isLight?on.darken(10).toHexString():on.lighten(10).toHexString()},[Kt]),pt=re(zt,kt,rn,Kt,mt,Hn,An,In,yn?yn.item.level:0),Qt=ue(Rn,mn,pt,kn,gn);(0,r.useEffect)(()=>{if(!Rn)return;Rn.clearRect(0,0,Rn.canvas.width,Rn.canvas.height);const on=new Path2D;ge(Dn,Fn,mn,Vt,Hn,An,wn,gn,(pn,fn,zn,aa,Zn,jn,ga)=>{ga?on.rect(fn,zn,aa,Zn):Qt(pn,fn,zn,aa,Zn,jn)}),Rn.fillStyle=mt,Rn.fill(on)},[Rn,mn,Dn,wn,Hn,An,Vt,Fn,Qt,gn,mt])}function ue(Bt,ln,mn,Dn,hn){return(0,r.useMemo)(()=>Bt?(wn,Hn,An,In,kn,Vt)=>{Bt.beginPath(),Bt.rect(Hn+f,An,In,kn),Bt.fillStyle=mn(wn,Vt,!1),Bt.stroke(),Bt.fill();const zt=hn.get(wn);let kt=Vt;zt&&zt.collapsed&&(kt=`(${zt.items.length}) `+Vt),In>=u&&(zt?(Be(Bt,ln,kt,wn,In,Dn==="left"?Hn+y+a:Hn,An,Dn),be(Bt,Hn,An,kn,wn,zt)):Be(Bt,ln,kt,wn,In,Hn,An,Dn))}:()=>{},[Bt,mn,Dn,ln,hn])}function be(Bt,ln,mn,Dn,hn,Fn){const wn=ln+y;Bt.beginPath(),Bt.rect(ln,mn,wn-ln+E+h,Dn),Bt.fill(),Bt.beginPath(),Fn.collapsed?Bt.rect(wn,mn+Dn/4,E,Dn/2):Fn.items[0]===hn?Bt.rect(wn,mn+Dn/2,E,Dn/2):Fn.items[Fn.items.length-1]===hn?Bt.rect(wn,mn,E,Dn/2):Bt.rect(wn,mn,E,Dn),Bt.fillStyle="#666",Bt.fill()}function ge(Bt,ln,mn,Dn,hn,Fn,wn,Hn,An){const In=[];In.push({item:Bt,levelOffset:0});const kn=wn*window.devicePixelRatio/Dn/(Fn-hn);let Vt;for(;In.length>0;){const{item:zt,levelOffset:kt}=In.shift();let rn=zt.value;const yn=rn*kn<=i,gn=rn*kn-(yn?0:f*2),Rn=l;if(gn<c)continue;let Kt=0,mt=!1;const pt=Hn.get(zt),Qt=pt&&pt.collapsed;if(Qt&&Vt===pt.items[0]?(Kt=ln==="children"?-1:1,mt=!0):Vt=void 0,!mt){const pn=ve(zt.start,Dn,hn,kn),fn=(zt.level+kt)*l;let zn=mn.getLabel(zt.itemIndexes[0]);Qt&&(Vt=zt),An(zt,pn,fn,gn,Rn,zn,yn)}const on=ln==="children"?zt.children:zt.parents;on&&In.unshift(...on.map(pn=>({item:pn,levelOffset:kt+Kt})))}}function re(Bt,ln,mn,Dn,hn,Fn,wn,Hn,An){return(0,r.useCallback)(function(kn,Vt,zt){if(zt&&!Hn)return hn;const kt=kn.valueRight!==void 0&&(mn===L.yU.Default||mn===L.yU.DiffColorBlind)?ne(kn.value,kn.valueRight,Bt,ln,mn):mn===L.zM.ValueBased?le(kn.value,Bt,Fn,wn):me(Vt,Dn);return Hn?Hn.has(Vt)?kt.toHslString():hn:kn.level>An-1?kt.toHslString():kt.lighten(15).toHslString()},[Bt,ln,mn,Dn,Fn,wn,Hn,An,hn])}function ye(Bt,ln,mn){const[Dn,hn]=(0,r.useState)();return(0,r.useEffect)(()=>{if(!(mn&&Bt.current))return;const Fn=Bt.current.getContext("2d"),wn=l*mn;Bt.current.width=Math.round(ln*window.devicePixelRatio),Bt.current.height=Math.round(wn),Bt.current.style.width=`${ln}px`,Bt.current.style.height=`${wn/window.devicePixelRatio}px`,Fn.textBaseline="middle",Fn.font=12*window.devicePixelRatio+"px monospace",Fn.strokeStyle="white",hn(Fn)},[Bt,hn,ln,mn]),Dn}function Be(Bt,ln,mn,Dn,hn,Fn,wn,Hn){Bt.save(),Bt.clip(),Bt.fillStyle="#222";const An=ln.valueDisplayProcessor(Dn.value),In=An.suffix?An.text+An.suffix:An.text,kn=Bt.measureText(mn),Vt=hn-d;let zt=`${mn} (${In})`,kt=Math.max(Fn,0)+d;kn.width>Vt&&(Bt.textAlign=Hn,Hn==="right"&&(zt=mn,kt=Fn+hn-d)),Bt.fillText(zt,kt,wn+l/2+2),Bt.restore()}function ve(Bt,ln,mn,Dn){return(Bt-ln*mn)*Dn}const Me=({data:Bt,rangeMin:ln,rangeMax:mn,matchedLabels:Dn,setRangeMin:hn,setRangeMax:Fn,onItemFocused:wn,focusedItemData:Hn,textAlign:An,onSandwich:In,colorScheme:kn,totalProfileTicks:Vt,totalProfileTicksRight:zt,totalViewTicks:kt,root:rn,direction:yn,depth:gn,showFlameGraphOnly:Rn,collapsedMap:Kt,setCollapsedMap:mt,collapsing:pt,getExtraContextMenuButtons:Qt,selectedView:on,search:pn})=>{const fn=We(),[zn,{width:aa}]=(0,s.A)(),Zn=(0,r.useRef)(null),[jn,ga]=(0,r.useState)(),[Ra,_a]=(0,r.useState)();ie({canvasRef:Zn,colorScheme:kn,data:Bt,focusedItemData:Hn,root:rn,direction:yn,depth:gn,rangeMax:mn,rangeMin:ln,matchedLabels:Dn,textAlign:An,totalViewTicks:kt,totalColorTicks:Bt.isDiffFlamegraph()?Vt:kt,totalTicksRight:zt,wrapperWidth:aa,collapsedMap:Kt});const Za=(0,r.useCallback)(ls=>{ga(void 0);const cs=Zn.current.clientWidth/kt/(mn-ln),ds=De({x:ls.nativeEvent.offsetX,y:ls.nativeEvent.offsetY},rn,yn,gn,cs,kt,ln,Kt);_a(ds?{posY:ls.clientY,posX:ls.clientX,item:ds,label:Bt.getLabel(ds.itemIndexes[0])}:void 0)},[Bt,ln,mn,kt,rn,yn,gn,Kt]),[ms,rs]=(0,r.useState)(),Ja=(0,r.useCallback)(ls=>{if(Ra===void 0){ga(void 0),rs(void 0);const cs=Zn.current.clientWidth/kt/(mn-ln),ds=De({x:ls.nativeEvent.offsetX,y:ls.nativeEvent.offsetY},rn,yn,gn,cs,kt,ln,Kt);ds&&(rs({x:ls.clientX,y:ls.clientY}),ga(ds))}},[ln,mn,kt,Ra,rs,rn,yn,gn,Kt]),Ns=(0,r.useCallback)(()=>{ga(void 0)},[]);return(0,r.useEffect)(()=>{const ls=cs=>{cs.target instanceof HTMLElement&&cs.target.parentElement?.id!=="flameGraphCanvasContainer_clickOutsideCheck"&&_a(void 0)};return window.addEventListener("click",ls),()=>window.removeEventListener("click",ls)},[_a]),r.createElement("div",{className:fn.graph},r.createElement("div",{className:fn.canvasWrapper,id:"flameGraphCanvasContainer_clickOutsideCheck",ref:zn},r.createElement("canvas",{ref:Zn,"data-testid":"flameGraph",onClick:Za,onMouseMove:Ja,onMouseLeave:Ns})),r.createElement(K,{position:ms,item:jn,data:Bt,totalTicks:kt,collapseConfig:jn?Kt.get(jn):void 0}),!Rn&&Ra&&r.createElement(T,{data:Bt,itemData:Ra,collapsing:pt,collapseConfig:Kt.get(Ra.item),onMenuItemClick:()=>{_a(void 0)},onItemFocus:()=>{hn(Ra.item.start/kt),Fn((Ra.item.start+Ra.item.value)/kt),wn(Ra)},onSandwich:()=>{In(Bt.getLabel(Ra.item.itemIndexes[0]))},onExpandGroup:()=>{mt(ke(Kt,Ra.item,!1))},onCollapseGroup:()=>{mt(ke(Kt,Ra.item,!0))},onExpandAllGroups:()=>{mt(Se(Kt,!1))},onCollapseAllGroups:()=>{mt(Se(Kt,!0))},allGroupsCollapsed:Array.from(Kt.values()).every(ls=>ls.collapsed),allGroupsExpanded:Array.from(Kt.values()).every(ls=>!ls.collapsed),getExtraContextMenuButtons:Qt,selectedView:on,search:pn}))};function ke(Bt,ln,mn){const Dn=new Map(Bt),hn=Bt.get(ln),Fn={...hn,collapsed:mn};for(const wn of hn.items)Dn.set(wn,Fn);return Dn}function Se(Bt,ln){const mn=new Map(Bt);for(const Dn of Bt.keys()){const Fn={...Bt.get(Dn),collapsed:ln};mn.set(Dn,Fn)}return mn}const We=()=>({graph:(0,t.css)({label:"graph",overflow:"auto",flexGrow:1,flexBasis:"50%"}),canvasContainer:(0,t.css)({label:"canvasContainer",display:"flex"}),canvasWrapper:(0,t.css)({label:"canvasWrapper",cursor:"pointer",flex:1,overflow:"hidden"}),sandwichMarker:(0,t.css)({label:"sandwichMarker",writingMode:"vertical-lr",transform:"rotate(180deg)",overflow:"hidden",whiteSpace:"nowrap"}),sandwichMarkerIcon:(0,t.css)({label:"sandwichMarkerIcon",verticalAlign:"baseline"})}),De=(Bt,ln,mn,Dn,hn,Fn,wn,Hn)=>{let An=ln,In=mn==="children"?0:Dn-1;const kn=Math.floor(Bt.y/(l/window.devicePixelRatio));let Vt;for(;An;){const zt=An;if(An=void 0,In===kn){Vt=zt;break}const kt=mn==="children"?zt.children:zt.parents||[];for(const rn of kt){const yn=ve(rn.start,Fn,wn,hn),gn=ve(rn.start+rn.value,Fn,wn,hn);if(yn<=Bt.x&&Bt.x<gn){An=rn;const Rn=Hn.get(rn);(!Rn||!Rn.collapsed||Rn.items[0]===rn)&&(In=In+(mn==="children"?1:-1));break}}}return Vt},pe=Me;var Ne=e(29158);const Le=r.memo(({data:Bt,focusedItem:ln,totalTicks:mn,sandwichedLabel:Dn,onFocusPillClick:hn,onSandwichPillClick:Fn})=>{const wn=(0,O.of)(He),Hn=[],An=(0,M.j_)("short")(mn),In=Bt.valueDisplayProcessor(mn);let kn=In.text+In.suffix;const Vt=Bt.getUnitTitle();if(Vt==="Count"&&(In.suffix||(kn=In.text)),Hn.push(r.createElement("div",{className:wn.metadataPill,key:"default"},kn," | ",An.text,An.suffix," samples (",Vt,")")),Dn&&Hn.push(r.createElement("span",{key:"sandwich"},r.createElement(m.I,{size:"sm",name:"angle-right"}),r.createElement("div",{className:wn.metadataPill},r.createElement(m.I,{size:"sm",name:"gf-show-context"})," ",r.createElement("span",{className:wn.metadataPillName},Dn.substring(Dn.lastIndexOf("/")+1)),r.createElement(Ne.K,{className:wn.pillCloseButton,name:"times",size:"sm",onClick:Fn,tooltip:"Remove sandwich view","aria-label":"Remove sandwich view"})))),ln){const zt=Math.round(1e4*(ln.item.value/mn))/100;Hn.push(r.createElement("span",{key:"focus"},r.createElement(m.I,{size:"sm",name:"angle-right"}),r.createElement("div",{className:wn.metadataPill},r.createElement(m.I,{size:"sm",name:"eye"})," ",zt,"% of total",r.createElement(Ne.K,{className:wn.pillCloseButton,name:"times",size:"sm",onClick:hn,tooltip:"Remove focus","aria-label":"Remove focus"}))))}return r.createElement(r.Fragment,null,r.createElement("div",{className:wn.metadata},Hn))});Le.displayName="FlameGraphMetadata";const He=Bt=>({metadataPill:(0,t.css)`
    label: metadataPill;
    display: inline-flex;
    align-items: center;
    background: ${Bt.colors.background.secondary};
    border-radius: ${Bt.shape.borderRadius(8)};
    padding: ${Bt.spacing(.5,1)};
    font-size: ${Bt.typography.bodySmall.fontSize};
    font-weight: ${Bt.typography.fontWeightMedium};
    line-height: ${Bt.typography.bodySmall.lineHeight};
    color: ${Bt.colors.text.secondary};
  `,pillCloseButton:(0,t.css)`
    label: pillCloseButton;
    vertical-align: text-bottom;
    margin: ${Bt.spacing(0,.5)};
  `,metadata:(0,t.css)`
    margin: 8px 0;
    text-align: center;
  `,metadataPillName:(0,t.css)`
    label: metadataPillName;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: ${Bt.spacing(.5)};
  `}),je=Le,at=({data:Bt,rangeMin:ln,rangeMax:mn,matchedLabels:Dn,setRangeMin:hn,setRangeMax:Fn,onItemFocused:wn,focusedItemData:Hn,textAlign:An,onSandwich:In,sandwichItem:kn,onFocusPillClick:Vt,onSandwichPillClick:zt,colorScheme:kt,showFlameGraphOnly:rn,getExtraContextMenuButtons:yn,collapsing:gn,selectedView:Rn,search:Kt})=>{const mt=Ye(),[pt,Qt]=(0,r.useState)(new Map),[on,pn]=(0,r.useState)(),[fn,zn]=(0,r.useState)(),[aa,Zn]=(0,r.useState)(0),[jn,ga]=(0,r.useState)(),[Ra,_a]=(0,r.useState)(0);if((0,r.useEffect)(()=>{if(Bt){Qt(Bt.getCollapsedMap());let rs=Bt.getLevels(),Ja=rs.length?rs[0][0].value:0,Ns=rs.length?rs[0][0].valueRight:void 0,ls=Ja,cs;if(kn){const[ds,ps]=Bt.getSandwichLevels(kn);rs=ps,cs=ds,ls=ps[0]?.[0]?.value??0}pn(rs),zn(cs),Zn(Ja),ga(Ns),_a(ls)}},[Bt,kn]),!on)return null;const Za={data:Bt,rangeMin:ln,rangeMax:mn,matchedLabels:Dn,setRangeMin:hn,setRangeMax:Fn,onItemFocused:wn,focusedItemData:Hn,textAlign:An,onSandwich:In,colorScheme:kt,totalProfileTicks:aa,totalProfileTicksRight:jn,totalViewTicks:Ra,showFlameGraphOnly:rn,collapsedMap:pt,setCollapsedMap:Qt,getExtraContextMenuButtons:yn,collapsing:gn,search:Kt,selectedView:Rn},ms=fn?r.createElement(r.Fragment,null,r.createElement("div",{className:mt.sandwichCanvasWrapper},r.createElement("div",{className:mt.sandwichMarker},"Callers",r.createElement(m.I,{className:mt.sandwichMarkerIcon,name:"arrow-down"})),r.createElement(pe,{...Za,root:fn[fn.length-1][0],depth:fn.length,direction:"parents",collapsing:!1})),r.createElement("div",{className:mt.sandwichCanvasWrapper},r.createElement("div",{className:(0,t.cx)(mt.sandwichMarker,mt.sandwichMarkerCalees)},r.createElement(m.I,{className:mt.sandwichMarkerIcon,name:"arrow-up"}),"Callees"),r.createElement(pe,{...Za,root:on[0][0],depth:on.length,direction:"children",collapsing:!1}))):r.createElement(pe,{...Za,root:on[0][0],depth:on.length,direction:"children"});return r.createElement("div",{className:mt.graph},r.createElement(je,{data:Bt,focusedItem:Hn,sandwichedLabel:kn,totalTicks:Ra,onFocusPillClick:Vt,onSandwichPillClick:zt}),ms)},Ye=()=>({graph:(0,t.css)`
    label: graph;
    overflow: auto;
    flex-grow: 1;
    flex-basis: 50%;
  `,sandwichCanvasWrapper:(0,t.css)`
    label: sandwichCanvasWrapper;
    display: flex;
    margin-bottom: ${l/window.devicePixelRatio}px;
  `,sandwichMarker:(0,t.css)`
    label: sandwichMarker;
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    overflow: hidden;
    white-space: nowrap;
  `,sandwichMarkerCalees:(0,t.css)`
    label: sandwichMarkerCalees;
    text-align: right;
  `,sandwichMarkerIcon:(0,t.css)`
    label: sandwichMarkerIcon;
    vertical-align: baseline;
  `}),$e=at;var xe=e(76365),Fe=e(75198),Ee=e(80292),se=e(55852),ae=e(10354),fe=e(94354),Ce=e(38138),Re=e(83122);const Oe=({search:Bt,setSearch:ln,selectedView:mn,setSelectedView:Dn,containerWidth:hn,onReset:Fn,textAlign:wn,onTextAlignChange:Hn,showResetButton:An,colorScheme:In,onColorSchemeChange:kn,stickyHeader:Vt,extraHeaderElements:zt,vertical:kt,isDiffMode:rn})=>{const yn=(0,O.of)(nt,Vt),[gn,Rn]=et(Bt,ln),Kt=gn!==""?r.createElement(se.$n,{icon:"times",fill:"text",size:"sm",onClick:()=>{ln(""),Rn("")}},"Clear"):null;return r.createElement("div",{className:yn.header},r.createElement("div",{className:yn.inputContainer},r.createElement(ae.p,{value:gn||"",onChange:mt=>{Rn(mt.currentTarget.value)},placeholder:"Search...",suffix:Kt})),r.createElement("div",{className:yn.rightContainer},An&&r.createElement(se.$n,{variant:"secondary",fill:"outline",size:"sm",icon:"history-alt",tooltip:"Reset focus and sandwich state",onClick:()=>{Fn()},className:yn.buttonSpacing,"aria-label":"Reset focus and sandwich state"}),r.createElement(ze,{value:In,onChange:kn,isDiffMode:rn}),r.createElement(fe.z,{size:"sm",disabled:mn===L.F8.TopTable,options:Xe,value:wn,onChange:Hn,className:yn.buttonSpacing}),r.createElement(fe.z,{size:"sm",options:Ze(hn,kt),value:mn,onChange:Dn}),zt&&r.createElement("div",{className:yn.extraElements},zt)))};function ze(Bt){const ln=(0,O.of)(nt,!1);let mn=r.createElement(Ce.W,null,r.createElement(Ce.W.Item,{label:"By package name",onClick:()=>Bt.onChange(L.zM.PackageBased)}),r.createElement(Ce.W.Item,{label:"By value",onClick:()=>Bt.onChange(L.zM.ValueBased)}));Bt.isDiffMode&&(mn=r.createElement(Ce.W,null,r.createElement(Ce.W.Item,{label:"Default (green to red)",onClick:()=>Bt.onChange(L.yU.Default)}),r.createElement(Ce.W.Item,{label:"Color blind (blue to red)",onClick:()=>Bt.onChange(L.yU.DiffColorBlind)})));const Dn={[L.zM.ValueBased]:ln.colorDotByValue,[L.zM.PackageBased]:ln.colorDotByPackage,[L.yU.DiffColorBlind]:ln.colorDotDiffColorBlind,[L.yU.Default]:ln.colorDotDiffDefault}[Bt.value]||ln.colorDotByValue;return r.createElement(Re.m,{overlay:mn},r.createElement(se.$n,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Change color scheme",onClick:()=>{},className:ln.buttonSpacing,"aria-label":"Change color scheme"},r.createElement("span",{className:(0,t.cx)(ln.colorDot,Dn)})))}const Xe=[{value:"left",description:"Align text left",icon:"align-left"},{value:"right",description:"Align text right",icon:"align-right"}];function Ze(Bt,ln){let mn=[{value:L.F8.TopTable,label:"Top Table",description:"Only show top table"},{value:L.F8.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return(Bt>=v||ln)&&mn.push({value:L.F8.Both,label:"Both",description:"Show both the top table and flame graph"}),mn}function et(Bt,ln){const[mn,Dn]=(0,r.useState)(Bt),hn=(0,Ee.A)(Bt);return(0,Fe.A)(()=>{ln(mn)},250,[mn]),(0,r.useEffect)(()=>{hn!==Bt&&Bt!==mn&&Dn(Bt)},[Bt,hn,mn]),[mn,Dn]}const nt=(Bt,ln)=>({header:(0,t.css)`
    label: header;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    width: 100%;
    top: 0;
    ${ln?(0,t.css)`
          z-index: ${Bt.zIndex.navbarFixed};
          position: sticky;
          padding-bottom: ${Bt.spacing(1)};
          padding-top: ${Bt.spacing(1)};
          background: ${Bt.colors.background.primary};
        `:""};
  `,inputContainer:(0,t.css)`
    label: inputContainer;
    margin-right: 20px;
    flex-grow: 1;
    min-width: 150px;
    max-width: 350px;
  `,rightContainer:(0,t.css)`
    label: rightContainer;
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
  `,buttonSpacing:(0,t.css)`
    label: buttonSpacing;
    margin-right: ${Bt.spacing(1)};
  `,resetButton:(0,t.css)`
    label: resetButton;
    display: flex;
    margin-right: ${Bt.spacing(2)};
  `,resetButtonIconWrapper:(0,t.css)`
    label: resetButtonIcon;
    padding: 0 5px;
    color: ${Bt.colors.text.disabled};
  `,colorDot:(0,t.css)`
    label: colorDot;
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
  `,colorDotByValue:(0,t.css)`
    label: colorDotByValue;
    background: ${H};
  `,colorDotByPackage:(0,t.css)`
    label: colorDotByPackage;
    background: ${q};
  `,colorDotDiffDefault:(0,t.css)`
    label: colorDotDiffDefault;
    background: ${ee};
  `,colorDotDiffColorBlind:(0,t.css)`
    label: colorDotDiffColorBlind;
    background: ${j};
  `,extraElements:(0,t.css)`
    label: extraElements;
    margin-left: ${Bt.spacing(1)};
  `}),lt=Oe;var rt=e(70713),ut=e(11261),Et=e(25019),Ct=e(90708),Ut=e(77093),Gt=e(52622);const Wt=r.memo(({data:Bt,onSymbolClick:ln,search:mn,matchedLabels:Dn,onSearch:hn,sandwichItem:Fn,onSandwich:wn,onTableSort:Hn})=>{const An=(0,r.useMemo)(()=>{let kt={};for(let rn=0;rn<Bt.data.length;rn++){const yn=Bt.getValue(rn),gn=Bt.getValueRight(rn),Rn=Bt.getSelf(rn),Kt=Bt.getLabel(rn);(!Dn||Dn.has(Kt))&&(kt[Kt]=kt[Kt]||{},kt[Kt].self=kt[Kt].self?kt[Kt].self+Rn:Rn,kt[Kt].total=kt[Kt].total?kt[Kt].total+yn:yn,kt[Kt].totalRight=kt[Kt].totalRight?kt[Kt].totalRight+gn:gn)}return kt},[Bt,Dn]),In=(0,O.of)(_t),kn=(0,O.$j)(),[Vt,zt]=(0,r.useState)([{displayName:"Self",desc:!0}]);return r.createElement("div",{className:In.topTableContainer,"data-testid":"topTable"},r.createElement(rt.Ay,{style:{width:"100%"}},({width:kt,height:rn})=>{if(kt<3||rn<3)return null;const yn=ot(Bt,An,kt,ln,hn,wn,kn,mn,Fn);return r.createElement(Ut.X,{initialSortBy:Vt,onSortByChange:gn=>{gn&&gn.length&&Hn?.(gn[0].displayName+"_"+(gn[0].desc?"desc":"asc")),zt(gn)},data:yn,width:kt,height:rn})}))});Wt.displayName="FlameGraphTopTableContainer";function ot(Bt,ln,mn,Dn,hn,Fn,wn,Hn,An){const In=ft(Fn,hn,Hn,An),kn={type:ut.PU.string,name:"Symbol",values:[],config:{custom:{width:mn-Pn-g*2},links:[{title:"Highlight symbol",url:"",onClick:kt=>{const yn=kt.origin.field.values[kt.origin.rowIndex];Dn(yn)}}]}};let Vt;if(Bt.isDiffFlamegraph()){kn.config.custom.width=mn-Pn-g*3;const kt=Tt("Baseline","percent"),rn=Tt("Comparison","percent"),yn=Tt("Diff","percent");yn.config.custom.cellOptions.type=Gt.ob.ColorText,yn.config.mappings=[{type:Et.d.ValueToText,options:{[1/0]:{text:"new",color:"red"}}},{type:Et.d.ValueToText,options:{[-100]:{text:"removed",color:"green"}}},{type:Et.d.RangeToText,options:{from:0,to:1/0,result:{color:"red"}}},{type:Et.d.RangeToText,options:{from:-1/0,to:0,result:{color:"green"}}}];const gn=Bt.getLevels(),Rn=gn.length?gn[0][0].value:0,Kt=gn.length?gn[0][0].valueRight:void 0;for(let mt in ln){In.values.push(null),kn.values.push(mt);const pt=ln[mt].total,Qt=ln[mt].totalRight,on=Rn-Kt,pn=Math.round(1e4*pt/on)/100,fn=Math.round(1e4*Qt/Kt)/100,zn=(fn-pn)/pn*100;yn.values.push(zn),kt.values.push(pn),rn.values.push(fn)}Vt={fields:[In,kn,kt,rn,yn],length:kn.values.length}}else{const kt=Tt("Self",Bt.selfField.config.unit),rn=Tt("Total",Bt.valueField.config.unit);for(let yn in ln)In.values.push(null),kn.values.push(yn),kt.values.push(ln[yn].self),rn.values.push(ln[yn].total);Vt={fields:[In,kn,kt,rn],length:kn.values.length}}return(0,Ct.we)({data:[Vt],fieldConfig:{defaults:{},overrides:[]},replaceVariables:kt=>kt,theme:wn})[0]}function Tt(Bt,ln){const mn={width:g,align:"auto",inspect:!1,cellOptions:{type:Gt.ob.Auto}};return{type:ut.PU.number,name:Bt,values:[],config:{unit:ln,custom:mn}}}const Pn=61;function ft(Bt,ln,mn,Dn){const hn={type:Gt.ob.Custom,cellComponent:wn=>r.createElement(Mt,{frame:wn.frame,onSandwich:Bt,onSearch:ln,search:mn,sandwichItem:Dn,rowIndex:wn.rowIndex})},Fn={filterable:!1,width:Pn,hideHeader:!0,inspect:!1,align:"auto",cellOptions:hn};return{type:ut.PU.number,name:"actions",values:[],config:{custom:Fn}}}function Mt(Bt){const ln=nn(),mn=Bt.frame.fields.find(Fn=>Fn.name==="Symbol")?.values[Bt.rowIndex],Dn=Bt.search===mn,hn=Bt.sandwichItem===mn;return r.createElement("div",{className:ln.actionCellWrapper},r.createElement(Ne.K,{className:ln.actionCellButton,name:"search",variant:Dn?"primary":"secondary",tooltip:Dn?"Clear from search":"Search for symbol","aria-label":Dn?"Clear from search":"Search for symbol",onClick:()=>{Bt.onSearch(Dn?"":mn)}}),r.createElement(Ne.K,{className:ln.actionCellButton,name:"gf-show-context",tooltip:hn?"Remove from sandwich view":"Show in sandwich view",variant:hn?"primary":"secondary","aria-label":hn?"Remove from sandwich view":"Show in sandwich view",onClick:()=>{Bt.onSandwich(hn?void 0:mn)}}))}const _t=Bt=>({topTableContainer:(0,t.css)({label:"topTableContainer",padding:Bt.spacing(1),backgroundColor:Bt.colors.background.secondary,height:"100%"})}),nn=()=>({actionCellWrapper:(0,t.css)`
      label: actionCellWrapper;
      display: flex;
      height: 24px;
    `,actionCellButton:(0,t.css)`
      label: actionCellButton;
      margin-right: 0;
      width: 24px;
    `}),dn=Wt,en=new n.A,Xt=({data:Bt,onTableSymbolClick:ln,onViewSelected:mn,onTextAlignSelected:Dn,onTableSort:hn,getTheme:Fn,stickyHeader:wn,extraHeaderElements:Hn,vertical:An,showFlameGraphOnly:In,disableCollapsing:kn,getExtraContextMenuButtons:Vt})=>{const[zt,kt]=(0,r.useState)(),[rn,yn]=(0,r.useState)(0),[gn,Rn]=(0,r.useState)(1),[Kt,mt]=(0,r.useState)(""),[pt,Qt]=(0,r.useState)(L.F8.Both),[on,{width:pn}]=(0,s.A)(),[fn,zn]=(0,r.useState)("left"),[aa,Zn]=(0,r.useState)(),jn=Fn(),ga=(0,r.useMemo)(()=>{if(Bt)return new xe.Jz(Bt,{collapsing:!kn},jn)},[Bt,jn,kn]),[Ra,_a]=En(ga),Za=Wn(jn),ms=Vn(Kt,ga);(0,r.useEffect)(()=>{pn>0&&pn<v&&pt===L.F8.Both&&!An&&Qt(L.F8.FlameGraph)},[pt,Qt,pn,An]);const rs=(0,r.useCallback)(()=>{kt(void 0),yn(0),Rn(1)},[kt,Rn,yn]);function Ja(){Zn(void 0)}(0,r.useEffect)(()=>{rs(),Ja()},[Bt,rs]);const Ns=(0,r.useCallback)(ps=>{Kt===ps?mt(""):(ln?.(ps),mt(ps),rs())},[mt,rs,ln,Kt]);if(!ga)return null;const ls=r.createElement($e,{data:ga,rangeMin:rn,rangeMax:gn,matchedLabels:ms,setRangeMin:yn,setRangeMax:Rn,onItemFocused:ps=>kt(ps),focusedItemData:zt,textAlign:fn,sandwichItem:aa,onSandwich:ps=>{rs(),Zn(ps)},onFocusPillClick:rs,onSandwichPillClick:Ja,colorScheme:Ra,showFlameGraphOnly:In,collapsing:!kn,getExtraContextMenuButtons:Vt,selectedView:pt,search:Kt}),cs=r.createElement(dn,{data:ga,onSymbolClick:Ns,search:Kt,matchedLabels:ms,sandwichItem:aa,onSandwich:Zn,onSearch:mt,onTableSort:hn});let ds;return In||pt===L.F8.FlameGraph?ds=ls:pt===L.F8.TopTable?ds=r.createElement("div",{className:Za.tableContainer},cs):pt===L.F8.Both&&(An?ds=r.createElement("div",null,r.createElement("div",{className:Za.verticalGraphContainer},ls),r.createElement("div",{className:Za.verticalTableContainer},cs)):ds=r.createElement("div",{className:Za.horizontalContainer},r.createElement("div",{className:Za.horizontalTableContainer},cs),r.createElement("div",{className:Za.horizontalGraphContainer},ls))),r.createElement(o.D.Provider,{value:jn},r.createElement("div",{ref:on,className:Za.container},!In&&r.createElement(lt,{search:Kt,setSearch:mt,selectedView:pt,setSelectedView:ps=>{Qt(ps),mn?.(ps)},containerWidth:pn,onReset:()=>{rs(),Ja()},textAlign:fn,onTextAlignChange:ps=>{zn(ps),Dn?.(ps)},showResetButton:!!(zt||aa),colorScheme:Ra,onColorSchemeChange:_a,stickyHeader:!!wn,extraHeaderElements:Hn,vertical:An,isDiffMode:ga.isDiffFlamegraph()}),r.createElement("div",{className:Za.body},ds)))};function En(Bt){const ln=Bt?.isDiffFlamegraph()?L.yU.Default:L.zM.PackageBased,[mn,Dn]=(0,r.useState)(ln);return(0,r.useEffect)(()=>{Dn(ln)},[ln]),[mn,Dn]}function Vn(Bt,ln){return(0,r.useMemo)(()=>{if(Bt&&ln){const mn=new Set;let Dn=en.filter(ln.getUniqueLabels(),Bt);if(Dn)for(let hn of Dn)mn.add(ln.getUniqueLabels()[hn]);return mn}},[Bt,ln])}function Wn(Bt){return{container:(0,t.css)({label:"container",overflow:"auto",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:Bt.spacing(1)}),body:(0,t.css)({label:"body",flexGrow:1}),tableContainer:(0,t.css)({height:800}),horizontalContainer:(0,t.css)({label:"horizontalContainer",display:"flex",minHeight:0,flexDirection:"row",columnGap:Bt.spacing(1),width:"100%"}),horizontalGraphContainer:(0,t.css)({flexBasis:"50%"}),horizontalTableContainer:(0,t.css)({flexBasis:"50%",maxHeight:800}),verticalGraphContainer:(0,t.css)({marginBottom:Bt.spacing(1)}),verticalTableContainer:(0,t.css)({height:800})}}const na=Xt},5546:(Y,I,e)=>{"use strict";e.d(I,{F8:()=>n,Zk:()=>t,yU:()=>s,zM:()=>r});var t=(o=>(o.Bytes="bytes",o.Short="short",o.Nanoseconds="ns",o))(t||{}),n=(o=>(o.TopTable="topTable",o.FlameGraph="flameGraph",o.Both="both",o))(n||{}),r=(o=>(o.ValueBased="valueBased",o.PackageBased="packageBased",o))(r||{}),s=(o=>(o.Default="default",o.DiffColorBlind="diffColorBlind",o))(s||{})},80822:(Y,I,e)=>{"use strict";e.d(I,{Wn:()=>o,_k:()=>s});var t=e(41260),n=e(11261),r=e(21423);function s(d,E){const h=o({data:d.series},{data:E.series}).data;return{...d,series:h}}function o(d,E){if(!d)return c(E);E.data.forEach(v=>{const g=d.data.find(b=>f(b,v));if(!g){d.data.push(u(v));return}m(g,v)});const h=[...d.errors??[],...E.errors??[]];h.length>0&&(d.errors=h);const y=d.error??E.error;y!=null&&(d.error=y);const a=[...d.traceIds??[],...E.traceIds??[]];return a.length>0&&(d.traceIds=a),d}function m(d,E){const h=Math.max(d.fields.length,E.fields.length);for(let y=0;y<h;y++){if(!d.fields[y])continue;const a=d.fields[y].name?E.fields.find(v=>v.name===d.fields[y].name):E.fields[y];if(a&&(d.fields[y].values=[].concat.apply(a.values,d.fields[y].values),a.nanos)){const v=d.fields[y].nanos?.slice()||[];d.fields[y].nanos=E.fields[y].nanos?.concat(v)}}d.length+=E.length,d.meta={...d.meta,stats:i(d.meta?.stats??[],E.meta?.stats??[])}}const l="Summary: total bytes processed";function i(d,E){const h=d.find(v=>v.displayName===l),y=E.find(v=>v.displayName===l);if(y!=null&&h!=null)return[{value:y.value+h.value,displayName:l,unit:h.unit}];const a=y??h;return a!=null?[a]:[]}function c(d){return{...d,data:d.data.map(u)}}function u(d){return{...d,fields:d.fields.map(E=>({...E,values:E.values}))}}function f(d,E){if(d.refId!==E.refId)return!1;const h=d.meta?.type,y=E.meta?.type;if(h!==y)return!1;if(h===t.m.TimeSeriesMulti){const g=d.fields.find(P=>P.type===n.PU.number),b=E.fields.find(P=>P.type===n.PU.number);return g===void 0||b===void 0?!1:(0,r.ab)(g.labels??{},b.labels??{})}const a=d.meta?.custom?.frameType,v=E.meta?.custom?.frameType;return a==="LabeledTimeValues"&&v==="LabeledTimeValues"}},20719:(Y,I,e)=>{"use strict";e.d(I,{AW:()=>m,Ay:()=>c,n6:()=>i});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],r=null,s=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],m=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...s,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],l=m.map(u=>u.label),i={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${m.map(u=>u.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/},c=i},32370:(Y,I,e)=>{"use strict";e.d(I,{l:()=>P,z:()=>C});var t=e(20719),n=e(1220),r=e(75161),s=e(38961),o=e(15145);function m(){return[{id:o.jN.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:o.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},{id:o.jN.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:o.Ag.Functions,defaultParams:["","$1","","(.*)"],renderer:n.kf,addOperationHandler:n.iZ},{id:o.jN.Ln,name:"Ln",params:[],defaultParams:[],category:o.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},i(o.jN.Changes),i(o.jN.Rate,!0),i(o.jN.Irate),i(o.jN.Increase,!0),i(o.jN.Idelta),i(o.jN.Delta),l({id:o.jN.HoltWinters,params:[(0,n.z2)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:f,changeTypeHandler:c}),l({id:o.jN.PredictLinear,params:[(0,n.z2)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:f,changeTypeHandler:c}),l({id:o.jN.QuantileOverTime,params:[(0,n.z2)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:n.Kl,addOperationHandler:f,changeTypeHandler:c}),...r.Iu,{id:o.jN.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:o.Ag.BinaryOps,renderer:(T,M,O)=>O,addOperationHandler:d},l({id:o.jN.Abs}),l({id:o.jN.Absent}),l({id:o.jN.Acos,category:o.Ag.Trigonometric}),l({id:o.jN.Acosh,category:o.Ag.Trigonometric}),l({id:o.jN.Asin,category:o.Ag.Trigonometric}),l({id:o.jN.Asinh,category:o.Ag.Trigonometric}),l({id:o.jN.Atan,category:o.Ag.Trigonometric}),l({id:o.jN.Atanh,category:o.Ag.Trigonometric}),l({id:o.jN.Ceil}),l({id:o.jN.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),l({id:o.jN.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),l({id:o.jN.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),l({id:o.jN.Cos,category:o.Ag.Trigonometric}),l({id:o.jN.Cosh,category:o.Ag.Trigonometric}),l({id:o.jN.DayOfMonth,category:o.Ag.Time}),l({id:o.jN.DayOfWeek,category:o.Ag.Time}),l({id:o.jN.DayOfYear,category:o.Ag.Time}),l({id:o.jN.DaysInMonth,category:o.Ag.Time}),l({id:o.jN.Deg}),i(o.jN.Deriv),l({id:o.jN.Exp}),l({id:o.jN.Floor}),l({id:o.jN.Group}),l({id:o.jN.Hour}),l({id:o.jN.LabelJoin,params:[{name:"Destination Label",type:"string",editor:s.r},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:s.r}],defaultParams:["",",",""],renderer:E,addOperationHandler:h}),l({id:o.jN.Log10}),l({id:o.jN.Log2}),l({id:o.jN.Minute}),l({id:o.jN.Month}),l({id:o.jN.Pi,renderer:T=>`${T.id}()`}),l({id:o.jN.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:n.jY}),l({id:o.jN.Rad}),i(o.jN.Resets),l({id:o.jN.Round,category:o.Ag.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),l({id:o.jN.Scalar}),l({id:o.jN.Sgn}),l({id:o.jN.Sin,category:o.Ag.Trigonometric}),l({id:o.jN.Sinh,category:o.Ag.Trigonometric}),l({id:o.jN.Sort}),l({id:o.jN.SortDesc}),l({id:o.jN.Sqrt}),l({id:o.jN.Stddev}),l({id:o.jN.Tan,category:o.Ag.Trigonometric}),l({id:o.jN.Tanh,category:o.Ag.Trigonometric}),l({id:o.jN.Time,renderer:T=>`${T.id}()`}),l({id:o.jN.Timestamp}),l({id:o.jN.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:T=>`${T.id}(${T.params[0]})`}),l({id:o.jN.Year})]}function l(D){return{...D,id:D.id,name:D.name??(0,n.DQ)(D.id),params:D.params??[],defaultParams:D.defaultParams??[],category:D.category??o.Ag.Functions,renderer:D.renderer??(D.params?n.kf:n.jY),addOperationHandler:D.addOperationHandler??n.iZ}}function i(D,T=!1){return{id:D,name:(0,n.DQ)(D),params:[(0,n.z2)(T)],defaultParams:[T?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:u,addOperationHandler:f,changeTypeHandler:c}}function c(D,T){return(D.params[0]==="$__rate_interval"&&T.defaultParams[0]!=="$__rate_interval"||D.params[0]==="$__interval"&&T.defaultParams[0]!=="$__interval")&&(D.params=T.defaultParams),D}function u(D,T,M){let O=(D.params??[])[0]??"5m";return`${T.id}(${M}[${O}])`}function f(D,T,M){const O={id:D.id,params:D.defaultParams};return T.operations.length>0&&M.getOperationDef(T.operations[0].id).addOperationHandler===f?{...T,operations:[O,...T.operations.slice(1)]}:{...T,operations:[O,...T.operations]}}function d(D,T){return{...T,binaryQueries:[...T.binaryQueries??[],{operator:"/",query:T}]}}function E(D,T,M){if(typeof D.params[1]!="string")throw"The separator must be a string";const O=`"${D.params[1]}"`;return`${D.id}(${M}, "${D.params[0]}", ${O}, "${D.params.slice(2).join(O)}")`}function h(D,T){const M={id:D.id,params:D.defaultParams};return{...T,operations:[...T.operations,M]}}function y(){return[...(0,n.G3)(o.jN.Sum),...(0,n.G3)(o.jN.Avg),...(0,n.G3)(o.jN.Min),...(0,n.G3)(o.jN.Max),...(0,n.G3)(o.jN.Count),...(0,n.jC)(o.jN.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(o.jN.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(o.jN.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),a(o.jN.SumOverTime),a(o.jN.AvgOverTime),a(o.jN.MinOverTime),a(o.jN.MaxOverTime),a(o.jN.CountOverTime),a(o.jN.LastOverTime),a(o.jN.PresentOverTime),a(o.jN.AbsentOverTime),a(o.jN.StddevOverTime)]}function a(D){return{id:D,name:(0,n.DQ)(D),params:[(0,n.z2)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:v,addOperationHandler:f}}function v(D,T,M){let O=(D.params??[])[0]??"$__interval";return`${T.id}(${M}[${O}])`}var g=e(83077);class b{constructor(T){this.categories=[],this.operationsRegistry=new g.O(T)}setOperationCategories(T){this.categories=T}getOperationsForCategory(T){return this.operationsRegistry.list().filter(M=>M.category===T&&!M.hideFromList)}getAlternativeOperations(T){return this.operationsRegistry.list().filter(M=>M.alternativesKey&&M.alternativesKey===T)}getCategories(){return this.categories}getOperationDef(T){return this.operationsRegistry.getIfExists(T)}renderOperations(T,M){for(const O of M){const S=this.operationsRegistry.getIfExists(O.id);if(!S)throw new Error(`Could not find operation ${O.id} in the registry`);T=S.renderer(O,S,T)}return T}renderBinaryQueries(T,M){if(M)for(const O of M)T=`${this.renderBinaryQuery(T,O)}`;return T}renderBinaryQuery(T,M){let O=T+` ${M.operator} `;return M.vectorMatches&&(O+=`${M.vectorMatchesType}(${M.vectorMatches}) `),O+this.renderQuery(M.query,!0)}renderLabels(T){if(T.length===0)return"";let M="{";for(const O of T)M!=="{"&&(M+=", "),M+=`${O.label}${O.op}"${O.value}"`;return M+"}"}renderQuery(T,M){let O=`${T.metric??""}${this.renderLabels(T.labels)}`;return O=this.renderOperations(O,T.operations),!M&&this.hasBinaryOp(T)&&T.binaryQueries?.length&&(O=`(${O})`),O=this.renderBinaryQueries(O,T.binaryQueries),M&&(this.hasBinaryOp(T)||T.binaryQueries?.length)&&(O=`(${O})`),O}hasBinaryOp(T){return T.operations.find(M=>this.getOperationDef(M.id)?.category===o.Ag.BinaryOps)!==void 0}}class P extends b{constructor(){super(()=>{const T=[...m(),...y()];for(const M of T){const O=t.AW.find(S=>S.insertText===M.id);O&&(M.documentation=O.documentation)}return T}),this.setOperationCategories([o.Ag.Aggregations,o.Ag.RangeFunctions,o.Ag.Functions,o.Ag.BinaryOps,o.Ag.Trigonometric,o.Ag.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:o.n5.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:o.n5.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:o.n5.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const C=new P},75161:(Y,I,e)=>{"use strict";e.d(I,{AE:()=>s,C8:()=>r,Iu:()=>o});var t=e(1220),n=e(15145);const r=[{id:n.jN.Addition,name:"Add scalar",sign:"+"},{id:n.jN.Subtraction,name:"Subtract scalar",sign:"-"},{id:n.jN.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:n.jN.DivideBy,name:"Divide by scalar",sign:"/"},{id:n.jN.Modulo,name:"Modulo by scalar",sign:"%"},{id:n.jN.Exponent,name:"Exponent",sign:"^"},{id:n.jN.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:n.jN.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:n.jN.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:n.jN.LessThan,name:"Less than",sign:"<",comparison:!0},{id:n.jN.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:n.jN.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],s=r.reduce((l,i)=>(l[i.sign]={id:i.id,comparison:i.comparison},l),{}),o=r.map(l=>{const i=[{name:"Value",type:"number"}],c=[2];return l.comparison&&(i.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),c.push(!1)),{id:l.id,name:l.name,params:i,defaultParams:c,alternativesKey:"binary scalar operations",category:n.Ag.BinaryOps,renderer:m(l.sign),addOperationHandler:t.iZ}});function m(l){return function(c,u,f){let d=c.params[0],E="";return c.params.length===2&&(E=c.params[1]?" bool":""),`${f} ${l}${E} ${d}`}}},38961:(Y,I,e)=>{"use strict";e.d(I,{r:()=>m});var t=e(96540),n=e(50877),r=e(88323),s=e(32370),o=e(1220);function m({onChange:i,index:c,operationId:u,value:f,query:d,datasource:E}){const[h,y]=(0,t.useState)({});return t.createElement(r.l6,{inputId:(0,o.OS)(u,c),autoFocus:f===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{y({isLoading:!0});const a=await l(d,E);y({options:a,isLoading:void 0})},isLoading:h.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:h.options,value:(0,n.z)(f),onChange:a=>i(c,a.value)})}async function l(i,c){let u=i.labels;c.type==="prometheus"&&(u=[{label:"__name__",op:"=",value:i.metric},...i.labels]);const f=s.z.renderLabels(u),d=await c.languageProvider.fetchLabelsWithMatch(f);return Object.keys(d).map(E=>({label:E,value:E}))}},1220:(Y,I,e)=>{"use strict";e.d(I,{DQ:()=>h,G3:()=>v,Kl:()=>f,OS:()=>y,iZ:()=>E,jC:()=>g,jY:()=>l,kf:()=>i,nU:()=>u,z2:()=>a});var t=e(2543),n=e.n(t),r=e(55127),s=e.n(r),o=e(38961),m=e(15145);function l(S,p,x){const A=d(S,p,x),R=S.id+"(";return x&&A.push(x),R+A.join(", ")+")"}function i(S,p,x){const A=d(S,p,x),R=S.id+"(";return x&&A.unshift(x),R+A.join(", ")+")"}function c(S,p,x,A){if(p.params.length<2)throw`Cannot render a function with params of length [${p.params.length}]`;let R=(S.params??[])[0]??"5m";const B=d({...S,params:S.params.slice(1)},{...p,params:p.params.slice(1),defaultParams:p.defaultParams.slice(1)},x),U=S.id+"(";return x&&(A?B.push(`${x}[${R}]`):B.unshift(`${x}[${R}]`)),U+B.join(", ")+")"}function u(S,p,x){return c(S,p,x,!1)}function f(S,p,x){return c(S,p,x,!0)}function d(S,p,x){return(S.params??[]).map((A,R)=>p.params[R].type==="string"?'"'+A+'"':A)}function E(S,p){const x={id:S.id,params:S.defaultParams};return{...p,operations:[...p.operations,x]}}function h(S){return(0,t.capitalize)(S.replace(/_/g," "))}function y(S,p){return`operations.${S}.param.${p}`}function a(S=!1){const p={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return S&&p.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),p}function v(S,p={}){return[{id:S,name:h(S),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:m.Ag.Aggregations,renderer:l,paramChangedHandler:M(`__${S}_by`),explainHandler:C(S,""),addOperationHandler:E,...p},{id:`__${S}_by`,name:`${h(S)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.r}],defaultParams:[""],alternativesKey:"aggregations by",category:m.Ag.Aggregations,renderer:b(S),paramChangedHandler:T(S),explainHandler:C(S,"by"),addOperationHandler:E,hideFromList:!0,...p},{id:`__${S}_without`,name:`${h(S)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.r}],defaultParams:[""],alternativesKey:"aggregations by",category:m.Ag.Aggregations,renderer:P(S),paramChangedHandler:T(S),explainHandler:C(S,"without"),addOperationHandler:E,hideFromList:!0,...p}]}function g(S,p,x={}){const A=v(S,x);return A[0].params.unshift(...p.params),A[1].params.unshift(...p.params),A[2].params.unshift(...p.params),A[0].defaultParams=p.defaultParams,A[1].defaultParams=[...p.defaultParams,""],A[2].defaultParams=[...p.defaultParams,""],A[1].renderer=D(S),A[2].renderer=D(S),A}function b(S){return function(x,A,R){return`${S} by(${x.params.join(", ")}) (${R})`}}function P(S){return function(x,A,R){return`${S} without(${x.params.join(", ")}) (${R})`}}function C(S,p){return function(A){const R=A.params.map(U=>`\`${U}\``).join(" and "),B=s()("label",A.params.length);switch(p){case"by":return`Calculates ${S} over dimensions while preserving ${B} ${R}.`;case"without":return`Calculates ${S} over the dimensions ${R}. All other labels are preserved.`;default:return`Calculates ${S} over the dimensions.`}}}function D(S){return function(x,A,R){const B=A.params.findIndex(K=>K.restParam),U=x.params.slice(0,B),F=x.params.slice(B);return`${S} by(${F.join(", ")}) (${U.map((K,w)=>A.params[w].type==="string"?`"${K}"`:K).join(", ")}, ${R})`}}function T(S){return function(x,A,R){return A.params.length<R.params.length?{...A,id:S}:A}}function M(S){return function(x,A,R){return A.params.length===R.params.length?{...A,id:S}:A}}function O(S,p){if(!S.label||!S.op||!S.value||p.length<2)return!1;const x=S.op.toString().startsWith("!");return p.filter(B=>B.label===S.label&&B.value===S.value&&B.op!==S.op).some(B=>!!(x&&B?.op?.toString().startsWith("!")===!1||x===!1&&B?.op?.toString().startsWith("!")))}},76040:(Y,I,e)=>{"use strict";e.d(I,{u:()=>s});var t=e(21489),n=e(75161),r=e(26115);function s(a){const v=(0,r.qk)(a),b=t.K3.parse(v).topNode,C={query:{metric:"",labels:[],operations:[]},errors:[]};try{m(v,b,C)}catch(D){console.error(D),D instanceof Error&&C.errors.push({text:D.message})}return y(C.query)&&(C.errors=[]),o(a)&&(C.errors=[]),C}function o(a){const v={query:{metric:"",labels:[],operations:[]},errors:[]};a=a.replace(/\$__interval/g,"1s"),a=a.replace(/\$__interval_ms/g,"1000"),a=a.replace(/\$__rate_interval/g,"1s"),a=a.replace(/\$__range_ms/g,"1000"),a=a.replace(/\$__range_s/g,"1"),a=a.replace(/\$__range/g,"1s");const b=t.K3.parse(a).topNode;try{m(a,b,v)}catch{return!1}return v.errors.length===0}function m(a,v,g){const b=g.query;switch(v.type.id){case t.iP:{b.metric=(0,r.AA)(a,v);break}case t.BG:{b.labels.push(i(a,v));const P=v.getChild(r.Ql);P&&g.errors.push((0,r.xz)(a,P));break}case t.R6:{u(a,v,g);break}case t.Fn:{f(a,v,g);break}case t.df:{E(a,v,g);break}case r.Ql:{if(l(v))break;g.errors.push((0,r.xz)(a,v));break}default:{v.type.id===t.ek&&g.errors.push((0,r.xz)(a,v));let P=v.firstChild;for(;P;)m(a,P,g),P=P.nextSibling}}}function l(a){return a.prevSibling?.type.id===t.GN&&a.prevSibling?.firstChild?.type.id===t.Fb}function i(a,v){const g=(0,r.AA)(a,v.getChild(t.IC)),b=(0,r.AA)(a,v.getChild(t.Lf)),P=(0,r.AA)(a,v.getChild(t.LW)).replace(/"/g,"");return{label:g,op:b,value:P}}const c=["changes","rate","irate","increase","delta"];function u(a,v,g){const b=g.query,P=v.getChild(t.m3),C=(0,r.AA)(a,P),T=v.getChild(t.Dh).getChild(t.qI),M=[];let O="";if(c.includes(C)||C.endsWith("_over_time")){let p=(0,r.AA)(a,v).match(/\[(.+)\]/);p?.[1]&&(O=p[1],M.push(p[1]))}const S={id:C,params:M};if(b.operations.unshift(S),T){if((0,r.AA)(a,T)===O+"]")return;d(a,T,g,S)}}function f(a,v,g){const b=g.query,P=v.getChild(t.xb);let C=(0,r.AA)(a,P);const D=v.getChild(t.hI),T=[];D&&(D.getChild("By")&&C&&(C=`__${C}_by`),D.getChild(t.xB)&&(C=`__${C}_without`),T.push(...(0,r.R1)(a,D,t._p)));const O=v.getChild(t.Dh).getChild(t.qI),p=O?.getChild(t.GN)?.getChild(t.df);p&&g.errors.push({text:"Query parsing is ambiguous.",from:p.from,to:p.to});const x={id:C,params:[]};b.operations.unshift(x),d(a,O,g,x),x.params.push(...T)}function d(a,v,g,b){if(v)switch(v.type.id){case t.GN:case t.qI:{let P=v.firstChild;for(;P;){const D=P.getChild(t.GN)?.getChild(t.df);D&&g.errors.push({text:"Query parsing is ambiguous.",from:D.from,to:D.to}),d(a,P,g,b),P=P.nextSibling}break}case t.Po:{b.params.push(parseFloat((0,r.AA)(a,v)));break}case t.LW:{b.params.push((0,r.AA)(a,v).replace(/"/g,""));break}default:m(a,v,g)}}function E(a,v,g){const b=g.query,P=v.firstChild,C=(0,r.AA)(a,P.nextSibling),D=h(a,v.getChild(t.Wy)),T=v.lastChild,M=n.AE[C],O=P.getChild(t.Po),S=T.getChild(t.Po),p=T.getChild(t.df);if(O||m(a,P,g),S)b.operations.push((0,r.rq)(M,a,T,!!D?.isBool));else if(p){const x=(0,r.z9)(T);x?.type.id===t.Po&&b.operations.push((0,r.rq)(M,a,x,!!D?.isBool)),m(a,T,g)}else{b.binaryQueries=b.binaryQueries||[];const x={operator:C,query:{metric:"",labels:[],operations:[]}};D?.isMatcher&&(x.vectorMatchesType=D.matchType,x.vectorMatches=D.matches),b.binaryQueries.push(x),m(a,T,{query:x.query,errors:g.errors})}}function h(a,v){if(v){if(v.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const g=v.getChild(t.UX);return g?{isMatcher:!0,isBool:!1,matches:(0,r.AA)(a,g.getChild(t.x$)?.getChild(t.qJ)),matchType:g.getChild(t.On)?"on":"ignoring"}:void 0}}}function y(a){return a.labels.length===0&&a.operations.length===0&&!a.metric}},26115:(Y,I,e)=>{"use strict";e.d(I,{AA:()=>i,Ql:()=>t,R1:()=>u,b4:()=>f,qk:()=>o,rq:()=>c,xz:()=>r,z9:()=>n});const t=0;function n(d){return d.firstChild?n(d.firstChild):d}function r(d,E){return{text:i(d,E),from:E.from,to:E.to,parentType:E.parent?.name}}const s=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function o(d){return d.replace(s,(E,h,y,a,v,g,b)=>{const P=a||b;let C=h,D="0";return y&&(C=y,D="1"),v&&(C=v,D="2"),`__V_${D}__`+C+"__V__"+(P?"__F__"+P+"__F__":"")})}const m=[(d,E)=>`$${d}`,(d,E)=>`[[${d}${E?`:${E}`:""}]]`,(d,E)=>`\${${d}${E?`:${E}`:""}}`];function l(d){return d.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(E,h,y,a)=>m[parseInt(h,10)](y,a))}function i(d,E){return E?l(d.substring(E.from,E.to)):""}function c(d,E,h,y){const a=[parseFloat(i(E,h))];return d.comparison&&a.push(y),{id:d.id,params:a}}function u(d,E,h){if(E.type.id===h||E.name===h)return[i(d,E)];const y=[];let a=0,v=E.childAfter(a);for(;v;)y.push(...u(d,v,h)),a=v.to,v=E.childAfter(a);return y}const f=d=>d.split(" ").map(h=>`${h}.*`).join("")},15145:(Y,I,e)=>{"use strict";e.d(I,{Ag:()=>t,jN:()=>n,n5:()=>r});var t=(s=>(s.Aggregations="Aggregations",s.RangeFunctions="Range functions",s.Functions="Functions",s.BinaryOps="Binary operations",s.Trigonometric="Trigonometric",s.Time="Time Functions",s))(t||{}),n=(s=>(s.Abs="abs",s.Absent="absent",s.AbsentOverTime="absent_over_time",s.Acos="acos",s.Acosh="acosh",s.Asin="asin",s.Asinh="asinh",s.Atan="atan",s.Atanh="atanh",s.Avg="avg",s.AvgOverTime="avg_over_time",s.BottomK="bottomk",s.Ceil="ceil",s.Changes="changes",s.Clamp="clamp",s.ClampMax="clamp_max",s.ClampMin="clamp_min",s.Cos="cos",s.Cosh="cosh",s.Count="count",s.CountOverTime="count_over_time",s.CountScalar="count_scalar",s.CountValues="count_values",s.DayOfMonth="day_of_month",s.DayOfWeek="day_of_week",s.DayOfYear="day_of_year",s.DaysInMonth="days_in_month",s.Deg="deg",s.Delta="delta",s.Deriv="deriv",s.DropCommonLabels="drop_common_labels",s.Exp="exp",s.Floor="floor",s.Group="group",s.HistogramQuantile="histogram_quantile",s.HoltWinters="holt_winters",s.Hour="hour",s.Idelta="idelta",s.Increase="increase",s.Irate="irate",s.LabelJoin="label_join",s.LabelReplace="label_replace",s.Last="last",s.LastOverTime="last_over_time",s.Ln="ln",s.Log10="log10",s.Log2="log2",s.Max="max",s.MaxOverTime="max_over_time",s.Min="min",s.MinOverTime="min_over_time",s.Minute="minute",s.Month="month",s.Pi="pi",s.PredictLinear="predict_linear",s.Present="present",s.PresentOverTime="present_over_time",s.Quantile="quantile",s.QuantileOverTime="quantile_over_time",s.Rad="rad",s.Rate="rate",s.Resets="resets",s.Round="round",s.Scalar="scalar",s.Sgn="sgn",s.Sin="sin",s.Sinh="sinh",s.Sort="sort",s.SortDesc="sort_desc",s.Sqrt="sqrt",s.Stddev="stddev",s.StddevOverTime="stddev_over_time",s.Sum="sum",s.SumOverTime="sum_over_time",s.Tan="tan",s.Tanh="tanh",s.Time="time",s.Timestamp="timestamp",s.TopK="topk",s.Vector="vector",s.Year="year",s.Addition="__addition",s.Subtraction="__subtraction",s.MultiplyBy="__multiply_by",s.DivideBy="__divide_by",s.Modulo="__modulo",s.Exponent="__exponent",s.NestedQuery="__nested_query",s.EqualTo="__equal_to",s.NotEqualTo="__not_equal_to",s.GreaterThan="__greater_than",s.LessThan="__less_than",s.GreaterOrEqual="__greater_or_equal",s.LessOrEqual="__less_or_equal",s))(n||{}),r=(s=>(s.Rate="rate",s.Histogram="histogram",s.Binary="binary",s))(r||{})},5261:(Y,I,e)=>{"use strict";e.d(I,{L:()=>n,y:()=>r});var t=e(32264);function n(s){return{grafana_version:t.$.buildInfo.version,plugin_type:String(s.type),plugin_version:s.info.version,plugin_id:s.id,plugin_name:s.name}}function r(s){return{...n(s.meta),datasource_uid:s.uid}}},44027:(Y,I,e)=>{"use strict";e.d(I,{G:()=>l});var t=e(96540),n=e(92470),r=e(95187),s=e(14110),o=e(5261);const m="grafana_plugin_";function l(){const c=(0,n.Q)();return(0,t.useMemo)(()=>{const u=(0,r.S)(c)?(0,o.y)(c.instanceSettings):(0,o.L)(c.meta);return(f,d)=>{if(!i(f))throw new Error(`Interactions reported in plugins should start with: "${m}".`);return(0,s.rR)(f,{...d,...u})}},[c])}function i(c){return c.startsWith(m)&&c.length>m.length}},61298:(Y,I,e)=>{"use strict";e.d(I,{fX:()=>r,nB:()=>n,n_:()=>t,p6:()=>s});var t=(o=>(o.DashboardView="dashboard-view",o.DataRequest="data-request",o))(t||{});const n=o=>!!o.payload.page,r=o=>!!o.payload.interactionName,s=o=>!!o.payload.experimentId},14110:(Y,I,e)=>{"use strict";e.d(I,{G$:()=>s,Jy:()=>o,Xp:()=>l,rR:()=>m});var t=e(32264),n=e(12131),r=e(63415);const s=i=>{(0,r.x$)().addEvent({type:r.on.MetaAnalytics,payload:i})},o=()=>{const i=n.Ny.getLocation(),c=`${t.$.appSubUrl??""}${i.pathname}${i.search}${i.hash}`;(0,r.x$)().addEvent({type:r.on.Pageview,payload:{page:c}})},m=(i,c)=>{(0,r.x$)().addEvent({type:r.on.Interaction,payload:{interactionName:i,properties:c}})},l=(i,c,u)=>{(0,r.x$)().addEvent({type:r.on.ExperimentView,payload:{experimentId:i,experimentGroup:c,experimentVariant:u}})}},55882:(Y,I,e)=>{"use strict";e.d(I,{s:()=>u});var t=e(96540),n=e(22391),r=e(51527),s=e(13544),o=e(88323),m=e(66864),l=e(98624),i=e(19347),c=e(26657);class u extends t.PureComponent{constructor(d){super(d),this.dataSourceSrv=(0,i.l)(),this.state={},this.onChange=(E,h)=>{if(h.action==="clear"&&this.props.onClear){this.props.onClear();return}const y=this.dataSourceSrv.getInstanceSettings(E.value);y&&(this.props.onChange(y),this.setState({error:void 0}))}}static{this.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}}componentDidMount(){const{current:d}=this.props;this.dataSourceSrv.getInstanceSettings(d)||this.setState({error:"Could not find data source "+d})}getCurrentValue(){const{current:d,hideTextValue:E,noDefault:h}=this.props;if(!d&&h)return;const y=this.dataSourceSrv.getInstanceSettings(d);if(y)return{label:y.name.slice(0,37),value:y.uid,imgUrl:y.meta.info.logos.small,hideText:E,meta:y.meta};const a=(0,n.Iz)(d);return a===c.dR.uid||a===c.dR.name?{label:a,value:a,hideText:E}:{label:(a??"no name")+" - not found",value:a??void 0,imgUrl:"",hideText:E}}getDataSourceOptions(){const{alerting:d,tracing:E,metrics:h,mixed:y,dashboard:a,variables:v,annotations:g,pluginId:b,type:P,filter:C,logs:D}=this.props;return this.dataSourceSrv.getList({alerting:d,tracing:E,metrics:h,logs:D,dashboard:a,mixed:y,variables:v,annotations:g,pluginId:b,filter:C,type:P}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:d,onBlur:E,onClear:h,openMenuOnFocus:y,placeholder:a,width:v,inputId:g,disabled:b=!1,isLoading:P=!1}=this.props,{error:C}=this.state,D=this.getDataSourceOptions(),T=this.getCurrentValue(),M=typeof h=="function";return t.createElement("div",{"aria-label":"Data source picker select container","data-testid":s.Tp.components.DataSourcePicker.container},t.createElement(o.l6,{isLoading:P,disabled:b,"aria-label":"Select a data source","data-testid":s.Tp.components.DataSourcePicker.inputV2,inputId:g||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:D,autoFocus:d,onBlur:E,width:v,openMenuOnFocus:y,maxMenuHeight:500,placeholder:a,noOptionsMessage:"No datasources found",value:T??null,invalid:!!C||!!this.props.invalid,getOptionLabel:O=>O.meta&&(0,r.x)(O.meta.signature)&&O!==T?t.createElement(m.Gy,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,O.label)," ",t.createElement(l.B,{status:O.meta.signature})):O.label||""}))}}},96937:(Y,I,e)=>{"use strict";e.d(I,{f:()=>t,p:()=>n});let t=()=>{throw new Error("EmbeddedDashboard requires runtime initialization")};function n(r){t=r}},97152:(Y,I,e)=>{"use strict";e.d(I,{a:()=>n,e:()=>r});var t=e(96540);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function r(s){n=s}},24308:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>r,m:()=>n});var t=e(96540);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function r(s){n=s}},46235:(Y,I,e)=>{"use strict";e.d(I,{V:()=>n,l:()=>r});var t=e(96540);let n=({children:s})=>t.createElement("div",null,s);function r(s){n=s}},32264:(Y,I,e)=>{"use strict";e.d(I,{$:()=>u,p:()=>o});var t=e(2543),n=e.n(t),r=e(42994),s=e(97594);class o{constructor(d){this.publicDashboardsEnabled=!0,this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.namespace="default",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.newsFeedEnabled=!0,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.anonymousDeviceLimit=void 0,this.licenseInfo={},this.rendererAvailable=!1,this.rendererVersion="",this.rendererDefaultImageWidth=1e3,this.rendererDefaultImageHeight=500,this.rendererDefaultImageScale=1,this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1,workloadIdentityEnabled:!1,userIdentityEnabled:!1,userIdentityFallbackCredentialsEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.analytics={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.disableFrontendSandboxForPlugins=[],this.bootData=d.bootData;const E={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,E,d),this.buildInfo=d.buildInfo||E.buildInfo,this.dateFormats&&r.WC.update(this.dateFormats),this.buildInfo.env==="development"&&l(this),m(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,s.g)(this.bootData.user.theme),this.bootData.user.lightTheme=this.theme2.isLight,this.theme=this.theme2.v1}}function m(f){const d=f.featureToggles,h=window.localStorage.getItem("grafana.featureToggles");if(h){const y=h.split(",");for(const a of y){const[v,g]=a.split("="),b=g==="true"||g==="1";d[v]=b,console.log(`Setting feature toggle ${v} = ${b} via localstorage`)}}}function l(f){if(window.location.href.indexOf("__feature")===-1)return;const d=new Set(["autoMigrateOldPanels","autoMigrateGraphPanel","autoMigrateTablePanel","autoMigratePiechartPanel","autoMigrateWorldmapPanel","autoMigrateStatPanel","disableAngular"]);new URLSearchParams(window.location.search).forEach((h,y)=>{if(y.startsWith("__feature.")){const a=f.featureToggles,v=y.substring(10);if(d.has(v))return;const g=h==="true"||h==="";g!==a[y]&&(a[v]=g,console.log(`Setting feature toggle ${v} = ${g} via url`))}})}const i=window.grafanaBootData||{settings:{},user:{},navTree:[]},c=i.settings;c.bootData=i;const u=new o(c)},13303:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{CopyPanelEvent:()=>u.ah,DataSourcePicker:()=>S.s,DataSourceWithBackend:()=>b.iy,EchoEventType:()=>o.on,EmbeddedDashboard:()=>R.f,FakeEchoSrv:()=>o.c_,GrafanaBootConfig:()=>E.p,HealthCheckError:()=>b.b1,HealthStatus:()=>b.VQ,HistoryWrapper:()=>c.K9,MetaAnalyticsEventName:()=>h.n_,PanelDataErrorView:()=>D.a,PanelRenderer:()=>C.m,PluginPage:()=>O.V,RefreshEvent:()=>u._,StreamingFrameAction:()=>i.Kh,ThemeChangedEvent:()=>u.E8,TimeRangeUpdatedEvent:()=>u.sR,config:()=>E.$,createDataSourcePluginEventProperties:()=>p.y,createMonitoringLogger:()=>g.DW,createPluginEventProperties:()=>p.L,createQueryRunner:()=>M.d,featureEnabled:()=>v.a,frameToMetricFindValue:()=>P.$h,getAngularLoader:()=>n.E,getAppEvents:()=>u.J7,getBackendSrv:()=>t.AI,getDataSourceSrv:()=>r.l,getEchoSrv:()=>o.x$,getGrafanaLiveSrv:()=>i.oF,getLegacyAngularInjector:()=>l.C,getLocationSrv:()=>s.X,getPluginComponentExtensions:()=>f.Dp,getPluginExtensions:()=>f.O3,getPluginImportUtils:()=>y.o,getPluginLinkExtensions:()=>f.Kf,getRunRequest:()=>M.XJ,getTemplateSrv:()=>m.w,isExperimentViewEvent:()=>h.p6,isExpressionReference:()=>b.s9,isFetchError:()=>t.NF,isInteractionEvent:()=>h.fX,isPageviewEvent:()=>h.nB,isPluginExtensionComponent:()=>d.a,isPluginExtensionLink:()=>d.D,loadPluginCss:()=>y.PL,locationSearchToObject:()=>c.SE,locationService:()=>c.Ny,logDebug:()=>g.MD,logError:()=>g.vV,logInfo:()=>g.fH,logWarning:()=>g.FF,navigationLogger:()=>c.Lc,registerEchoBackend:()=>o.pl,reportExperimentView:()=>a.Xp,reportInteraction:()=>a.rR,reportMetaAnalytics:()=>a.G$,reportPageview:()=>a.Jy,setAngularLoader:()=>n.w,setAppEvents:()=>u.H8,setBackendSrv:()=>t.u5,setDataSourceSrv:()=>r.h,setEchoSrv:()=>o.H2,setEmbeddedDashboard:()=>R.p,setGrafanaLiveSrv:()=>i.S8,setLegacyAngularInjector:()=>l.j,setLocationService:()=>c.vG,setLocationSrv:()=>s.T,setPluginExtensionGetter:()=>f.cE,setPluginImportUtils:()=>y.se,setQueryRunnerFactory:()=>M.HC,setReturnToPreviousHook:()=>A._,setRunRequest:()=>M.pC,setTemplateSrv:()=>m.d,toDataQueryError:()=>T.u,toDataQueryResponse:()=>P.bE,usePluginInteractionReporter:()=>x.G,useReturnToPrevious:()=>A.i});var t=e(17172),n=e(7376),r=e(19347),s=e(23509),o=e(63415),m=e(72574),l=e(81634),i=e(78731),c=e(12131),u=e(3591),f=e(4402),d=e(80882),E=e(32264),h=e(61298),y=e(89191),a=e(14110),v=e(33378),g=e(34867),b=e(26657),P=e(47773),C=e(24308),D=e(97152),T=e(12091),M=e(63639),O=e(46235),S=e(55882),p=e(5261),x=e(44027),A=e(14778),R=e(96937)},7376:(Y,I,e)=>{"use strict";e.d(I,{E:()=>r,w:()=>n});let t;function n(s){t=s}function r(){return t}},63415:(Y,I,e)=>{"use strict";e.d(I,{H2:()=>r,c_:()=>m,on:()=>t,pl:()=>o,x$:()=>s});var t=(l=>(l.Performance="performance",l.MetaAnalytics="meta-analytics",l.Pageview="pageview",l.Interaction="interaction",l.ExperimentView="experimentview",l.GrafanaJavascriptAgent="grafana-javascript-agent",l))(t||{});let n;function r(l){if(n instanceof m)for(const i of n.buffer)l.addEvent(i.event,i.meta);n=l}function s(){return n||(n=new m),n}const o=l=>{s().addBackend(l)};class m{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(i){}addEvent(i,c){this.buffer.push({event:i,meta:c})}}},12131:(Y,I,e)=>{"use strict";e.d(I,{K9:()=>l,Lc:()=>d,Ny:()=>c,SE:()=>i,vG:()=>u});var t=e(69235),n=e(76885),r=e(95344),s=e(91040),o=e(40621),m=e(32264);class l{constructor(h){this.history=h||t.zR({basename:m.$.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(h,y){const a=this.history.location,v=this.getSearchObject();for(const b of Object.keys(h))h[b]===null||h[b]===void 0?delete v[b]:v[b]=h[b];const g=n.kM.renderUrl(a.pathname,v);y?this.history.replace(g,this.history.location.state):this.history.push(g,this.history.location.state)}push(h){this.history.push(h)}replace(h){this.history.replace(h)}reload(){const h=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:h?h+1:1}})}getLocation(){return this.history.location}getSearchObject(){return i(this.history.location.search)}update(h){if((0,r.l)("LocationSrv","update","partial, push or replace"),h.partial&&h.query)this.partial(h.query,h.partial);else{const y={pathname:h.path};h.query&&(y.search=n.kM.toUrlParams(h.query)),h.replace?this.replace(y):this.push(y)}}}function i(E){let h=typeof E=="number"?String(E):E;return h.length>0?h.startsWith("?")?n.kM.parseKeyValue(h.substring(1)):n.kM.parseKeyValue(h):{}}let c=new l;const u=E=>{throw new Error("locationService can be only overriden in test environment")},f=(0,s.h)("Router"),d=f.logger;(0,o.h)("location",c,f)},23509:(Y,I,e)=>{"use strict";e.d(I,{T:()=>n,X:()=>r});let t;function n(s){t=s}function r(){return t}},63639:(Y,I,e)=>{"use strict";e.d(I,{HC:()=>n,XJ:()=>m,d:()=>r,pC:()=>o});let t;const n=l=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=l},r=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function o(l){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=l}function m(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},3591:(Y,I,e)=>{"use strict";e.d(I,{E8:()=>r,H8:()=>l,J7:()=>i,_:()=>n,ah:()=>o,sR:()=>s});var t=e(65463);class n extends t.a{static{this.type="refresh"}}class r extends t.x{static{this.type="theme-changed"}}class s extends t.x{static{this.type="time-range-updated"}}class o extends t.x{static{this.type="copy-panel"}}let m;function l(c){m=c}function i(){return m}},17172:(Y,I,e)=>{"use strict";e.d(I,{AI:()=>s,NF:()=>t,u5:()=>r});function t(o){return typeof o=="object"&&o!==null&&"status"in o&&"data"in o}let n;const r=o=>{n=o},s=()=>n},19347:(Y,I,e)=>{"use strict";e.d(I,{h:()=>n,l:()=>r});let t;function n(s){t=s}function r(){return t}},81634:(Y,I,e)=>{"use strict";e.d(I,{C:()=>r,j:()=>n});let t;const n=s=>{t=s},r=()=>t},78731:(Y,I,e)=>{"use strict";e.d(I,{Kh:()=>t.Kh,S8:()=>r,oF:()=>s});var t=e(9631);let n;const r=o=>{n=o},s=()=>n},4402:(Y,I,e)=>{"use strict";e.d(I,{Dp:()=>l,Kf:()=>m,O3:()=>o,cE:()=>r});var t=e(80882);let n;function r(i){if(n)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");n=i}function s(){if(!n)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return n}const o=i=>s()(i),m=i=>{const{extensions:c}=o(i);return{extensions:c.filter(t.D)}},l=i=>{const{extensions:c}=o(i);return{extensions:c.filter(t.a)}}},80882:(Y,I,e)=>{"use strict";e.d(I,{D:()=>n,a:()=>r});var t=e(74135);function n(s){return s?s.type===t.u.link&&("path"in s||"onClick"in s):!1}function r(s){return s?s.type===t.u.component&&"component"in s:!1}},72574:(Y,I,e)=>{"use strict";e.d(I,{d:()=>n,w:()=>r});let t;const n=s=>{t=s},r=()=>t},26657:(Y,I,e)=>{"use strict";e.d(I,{iy:()=>T,dR:()=>g,b1:()=>P,VQ:()=>C,s9:()=>b,ph:()=>O,x7:()=>M});var t=e(62467),n=e(75505),r=e(44240),s=e(63720),o=e(66847),m=e(40187),l=e(22391),i=e(55004),c=e(89667),u=e(92341),f=e(32264),d=e(19347),E=e(78731),h=e(17172),y=e(9631),a=e(47773);function v(S){const{intervalMs:p,maxDataPoints:x,requestId:A,panelId:R,queryCachingTTL:B,range:{from:U,to:F}}=S;if(!S.targets.length)return(0,t.of)({data:[]});const K={intervalMs:p,maxDataPoints:x,queryCachingTTL:B,timeRange:{from:U.valueOf().toString(),to:F.valueOf().toString(),timezone:S.timezone}};return(0,h.AI)().fetch({url:`/api/public/dashboards/${f.$.publicDashboardAccessToken}/panels/${R}/query`,method:"POST",data:K,requestId:A}).pipe((0,s.n)(w=>(0,t.of)((0,a.bE)(w,S.targets))),(0,o.W)(w=>(0,t.of)((0,a.bE)(w))))}const g=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function b(S){if(!S)return!1;const p=typeof S=="string"?S:S.type;return p===g.type||p===g.name||p==="-100"}class P extends Error{constructor(p,x){super(p),this.details=x,this.name="HealthCheckError"}}var C=(S=>(S.Unknown="UNKNOWN",S.OK="OK",S.Error="ERROR",S))(C||{}),D=(S=>(S.PluginID="X-Plugin-Id",S.DatasourceUID="X-Datasource-Uid",S.DashboardUID="X-Dashboard-Uid",S.PanelID="X-Panel-Id",S.PanelPluginId="X-Panel-Plugin-Id",S.QueryGroupID="X-Query-Group-Id",S.FromExpression="X-Grafana-From-Expr",S.SkipQueryCache="X-Cache-Skip",S))(D||{});class T extends m.mA{constructor(p){super(p),this.streamOptionsProvider=O}query(p){if(f.$.publicDashboardAccessToken)return v(p);const{intervalMs:x,maxDataPoints:A,queryCachingTTL:R,range:B,requestId:U,hideFromInspector:F=!1}=p;let K=p.targets,w=!1;const L=new Set,V=new Set,N=K.map(H=>{let q=this.getRef(),le=this.id,me=!0;if(b(H.datasource))return w=!0,{...H,datasource:g};if(H.datasource){const k=(0,d.l)().getInstanceSettings(H.datasource,p.scopedVars);if(!k)throw new Error(`Unknown Datasource: ${JSON.stringify(H.datasource)}`);const ee=k.rawRef??(0,l.p$)(k),X=k.id;(ee.uid!==q.uid||le!==X)&&(q=ee,le=X,me=!1)}return q.type?.length&&L.add(q.type),q.uid?.length&&V.add(q.uid),{...me?this.applyTemplateVariables(H,p.scopedVars,p.filters):H,datasource:q,datasourceId:le,intervalMs:x,maxDataPoints:A,queryCachingTTL:R}});if(!N.length)return(0,t.of)({data:[]});const z={queries:N,from:B?.from.valueOf().toString(),to:B?.to.valueOf().toString()};if(f.$.featureToggles.queryOverLive)return(0,E.oF)().getQueryData({request:p,body:z});const J={};J["X-Plugin-Id"]=Array.from(L).join(", "),J["X-Datasource-Uid"]=Array.from(V).join(", ");let G="/api/ds/query?ds_type="+this.type;return w&&(J["X-Grafana-From-Expr"]="true",G+="&expression=true"),U&&(G+=`&requestId=${U}`),p.dashboardUID&&(J["X-Dashboard-Uid"]=p.dashboardUID),p.panelId&&(J["X-Panel-Id"]=`${p.panelId}`),p.panelPluginId&&(J["X-Panel-Plugin-Id"]=`${p.panelPluginId}`),p.queryGroupId&&(J["X-Query-Group-Id"]=`${p.queryGroupId}`),p.skipQueryCache&&(J["X-Cache-Skip"]="true"),(0,h.AI)().fetch({url:G,method:"POST",data:z,requestId:U,hideFromInspector:F,headers:J}).pipe((0,s.n)(H=>{const q=(0,a.bE)(H,N);return q.data?.length&&q.data.find(le=>le.meta?.channel)?M(q,p,this.streamOptionsProvider):(0,t.of)(q)}),(0,o.W)(H=>(0,t.of)((0,a.bE)(H))))}getRequestHeaders(){const p={};return p["X-Plugin-Id"]=this.type,p["X-Datasource-Uid"]=this.uid,p}interpolateVariablesInQueries(p,x,A){return p.map(R=>this.applyTemplateVariables(R,x,A))}applyTemplateVariables(p,x,A){return p}async getResource(p,x,A){const R=this.getRequestHeaders();return(await(0,n.s)((0,h.AI)().fetch({...A,method:"GET",headers:A?.headers?{...A.headers,...R}:R,params:x??A?.params,url:`/api/datasources/uid/${this.uid}/resources/${p}`}))).data}async postResource(p,x,A){const R=this.getRequestHeaders();return(await(0,n.s)((0,h.AI)().fetch({...A,method:"POST",headers:A?.headers?{...A.headers,...R}:R,data:x??{...x},url:`/api/datasources/uid/${this.uid}/resources/${p}`}))).data}async callHealthCheck(){return(0,n.s)((0,h.AI)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(p=>p.data).catch(p=>p.data)}async testDatasource(){return this.callHealthCheck().then(p=>p.status==="OK"?{status:"success",message:p.message}:Promise.reject({status:"error",message:p.message,error:new P(p.message,p.details)}))}}function M(S,p,x){const A=(0,E.oF)();if(!A)return(0,t.of)(S);const R=[],B=[];for(const U of S.data){const F=(0,i.DG)(U.meta?.channel);if(F){const K=U;B.push(A.getDataStream({addr:F,buffer:x(p,K),frame:(0,c.Nw)(U)}))}else R.push(U)}return R.length&&B.push((0,t.of)({...S,data:R})),B.length===1?B[0]:(0,r.h)(...B)}const O=(S,p)=>{const x={maxLength:S.maxDataPoints??500,action:y.Kh.Append};return S.rangeRaw?.to==="now"&&(x.maxDelta=S.range.to.valueOf()-S.range.from.valueOf()),x};T=(0,u.Y)(T)},33378:(Y,I,e)=>{"use strict";e.d(I,{a:()=>n});var t=e(32264);const n=r=>{const{enabledFeatures:s}=t.$.licenseInfo;return s&&s[r]}},34867:(Y,I,e)=>{"use strict";e.d(I,{DW:()=>c,FF:()=>o,MD:()=>m,fH:()=>s,l$:()=>i,vV:()=>l});var t=e(50138),n=e(84299),r=e(32264);function s(u,f){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushLog([u],{level:n.$b.INFO,context:f})}function o(u,f){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushLog([u],{level:n.$b.WARN,context:f})}function m(u,f){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushLog([u],{level:n.$b.DEBUG,context:f})}function l(u,f){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushError(u,{context:f})}function i(u,f,d){r.$.grafanaJavascriptAgent.enabled&&t.P.api.pushMeasurement({type:u,values:f,context:d})}function c(u,f){const d=E=>({source:u,...f,...E});return{logDebug:(E,h)=>m(E,d(h)),logInfo:(E,h)=>s(E,d(h)),logWarning:(E,h)=>o(E,d(h)),logError:(E,h)=>l(E,d(h)),logMeasurement:(E,h,y)=>i(E,h,d(y))}}},89191:(Y,I,e)=>{"use strict";e.d(I,{PL:()=>n,o:()=>o,se:()=>s});var t=e(32264);async function n(m){try{const l=t.$.bootData.user.theme==="light"?m.light:m.dark;return window.System.import(l)}catch(l){console.error(l)}}let r;function s(m){if(r)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");r=m}function o(){if(!r)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return r}},47773:(Y,I,e)=>{"use strict";e.d(I,{$h:()=>f,bE:()=>l});var t=e(39070),n=e(89667),r=e(14236),s=e(11261),o=e(12091);const m={severity:"info",text:"Cached response"};function l(d,E){const h={data:[],state:t.Gu.Done},y="traceId"in d?d.traceId:void 0;y!=null&&(h.traceIds=[y]);const a=d;if(a.data?.results){const v=a.data.results,g=E?.length?E.map(C=>C.refId):Object.keys(v),b=i(a),P=[];for(const C of g){const D=v[C];D&&(D.refId=C,P.push(D))}for(const C of P){if(C.error){const D={refId:C.refId,message:C.error,status:C.status};y!=null&&(D.traceId=y),h.error||(h.error={...D}),h.errors?h.errors.push({...D}):h.errors=[{...D}],h.state=t.Gu.Error}if(C.frames?.length){for(let D of C.frames){b&&(D=c(D));const T=(0,n.or)(D);T.refId||(T.refId=C.refId),h.data.push(T)}continue}if(C.series?.length)for(const D of C.series)D.refId||(D.refId=C.refId),h.data.push((0,r.Vc)(D));if(C.tables?.length)for(const D of C.tables)D.refId||(D.refId=C.refId),h.data.push((0,r.Vc)(D))}}return a.status&&a.status!==200&&(h.state!==t.Gu.Error&&(h.state=t.Gu.Error),h.error||(h.error=(0,o.u)(d))),h}function i(d){const E=d?.headers;return!E||!E.get?!1:E.get("X-Cache")==="HIT"}function c(d){return{...d,schema:{...d.schema,fields:[...d.schema?.fields??[]],meta:{...d.schema?.meta,notices:[...d.schema?.meta?.notices??[],m],isCachedResponse:!0}}}}function u(d){const E=l(d);if(E.error?.data?.message)return{status:"error",message:E.error.data.message,details:E.error?.data?.error?{message:E.error.data.error}:void 0};if(E.error?.refId&&E.error?.message)return{status:"error",message:E.error.message};throw d}function f(d){if(!d||!d.length)return[];const E=[];let h=d.fields.find(y=>y.type===s.PU.string);if(h||(h=d.fields.find(y=>y.type!==s.PU.time)),h)for(let y=0;y<h.values.length;y++)E.push({text:""+h.values[y]});return E}},14778:(Y,I,e)=>{"use strict";e.d(I,{_:()=>n,i:()=>r});let t;const n=s=>{t=s},r=()=>t?t():()=>console.error("ReturnToPrevious hook not found")},52622:(Y,I,e)=>{"use strict";e.d(I,{$N:()=>U,$l:()=>L,$m:()=>q,$p:()=>A,D7:()=>i,F8:()=>R,GR:()=>E,J1:()=>l,L4:()=>a,Lt:()=>P,Ly:()=>T,NU:()=>h,Nj:()=>b,ON:()=>C,QH:()=>n,QR:()=>t,RU:()=>s,SV:()=>B,T6:()=>N,TZ:()=>V,WQ:()=>r,Wq:()=>J,Y$:()=>f,aG:()=>m,dx:()=>y,eX:()=>w,fY:()=>le,gs:()=>g,lm:()=>M,ob:()=>z,on:()=>v,qM:()=>H,q_:()=>o,uH:()=>c,vM:()=>u,vp:()=>ee,wV:()=>S,xB:()=>F,yL:()=>d,yp:()=>x,zT:()=>me});var t=(X=>(X.AlertStates="alertStates",X.Annotations="annotations",X.Series="series",X))(t||{}),n=(X=>(X.Linear="linear",X.Quad="quad",X))(n||{}),r=(X=>(X.Clamped="clamped",X.Mod="mod",X))(r||{}),s=(X=>(X.Field="field",X.Fixed="fixed",X.Template="template",X))(s||{}),o=(X=>(X.Field="field",X.Fixed="fixed",X.Mapping="mapping",X))(o||{}),m=(X=>(X.Auto="auto",X.Coords="coords",X.Geohash="geohash",X.Lookup="lookup",X))(m||{}),l=(X=>(X.Count="count",X.Size="size",X))(l||{}),i=(X=>(X.auto="auto",X.ge="ge",X.le="le",X.unknown="unknown",X))(i||{}),c=(X=>(X.Ascending="Ascending",X.Descending="Descending",X))(c||{}),u=(X=>(X.Auto="auto",X.Bottom="bottom",X.Hidden="hidden",X.Left="left",X.Right="right",X.Top="top",X))(u||{}),f=(X=>(X.Series="series",X.Text="text",X))(f||{}),d=(X=>(X.Always="always",X.Auto="auto",X.Never="never",X))(d||{}),E=(X=>(X.Bars="bars",X.Line="line",X.Points="points",X))(E||{}),h=(X=>(X.Constant="constant",X.NegativeY="negative-Y",X))(h||{}),y=(X=>(X.Linear="linear",X.Smooth="smooth",X.StepAfter="stepAfter",X.StepBefore="stepBefore",X))(y||{}),a=(X=>(X.Linear="linear",X.Log="log",X.Ordinal="ordinal",X.Symlog="symlog",X))(a||{}),v=(X=>(X.Hue="hue",X.None="none",X.Opacity="opacity",X.Scheme="scheme",X))(v||{}),g=(X=>(X.None="none",X.Normal="normal",X.Percent="percent",X))(g||{}),b=(X=>(X[X.After=1]="After",X[X.Before=-1]="Before",X[X.Center=0]="Center",X))(b||{}),P=(X=>(X[X.Horizontal=0]="Horizontal",X[X.Vertical=1]="Vertical",X))(P||{}),C=(X=>(X[X.Down=-1]="Down",X[X.Left=-1]="Left",X[X.Right=1]="Right",X[X.Up=1]="Up",X))(C||{});const D={dash:[]};var T=(X=>(X.Area="area",X.Dashed="dashed",X.DashedAndArea="dashed+area",X.Line="line",X.LineAndArea="line+area",X.Off="off",X.Series="series",X))(T||{}),M=(X=>(X.Hidden="hidden",X.List="list",X.Table="table",X))(M||{});const O={calcs:[]};var S=(X=>(X.Auto="auto",X.Horizontal="horizontal",X.Vertical="vertical",X))(S||{});const p={timezone:[]};var x=(X=>(X.Background="background",X.BackgroundSolid="background_solid",X.None="none",X.Value="value",X))(x||{}),A=(X=>(X.Area="area",X.Line="line",X.None="none",X))(A||{}),R=(X=>(X.Auto="auto",X.Center="center",X))(R||{}),B=(X=>(X.Auto="auto",X.Name="name",X.None="none",X.Value="value",X.ValueAndName="value_and_name",X))(B||{}),U=(X=>(X.Multi="multi",X.None="none",X.Single="single",X))(U||{}),F=(X=>(X.Ascending="asc",X.Descending="desc",X.None="none",X))(F||{});const K={calcs:[]};var w=(X=>(X.Basic="basic",X.Gradient="gradient",X.Lcd="lcd",X))(w||{}),L=(X=>(X.Color="color",X.Hidden="hidden",X.Text="text",X))(L||{}),V=(X=>(X.Auto="auto",X.Left="left",X.Top="top",X))(V||{}),N=(X=>(X.Auto="auto",X.Manual="manual",X))(N||{}),z=(X=>(X.Auto="auto",X.BasicGauge="basic",X.ColorBackground="color-background",X.ColorBackgroundSolid="color-background-solid",X.ColorText="color-text",X.Custom="custom",X.DataLinks="data-links",X.Gauge="gauge",X.GradientGauge="gradient-gauge",X.Image="image",X.JSONView="json-view",X.LcdGauge="lcd-gauge",X.Sparkline="sparkline",X))(z||{}),J=(X=>(X.Basic="basic",X.Gradient="gradient",X))(J||{});const G={fields:[],reducer:[]};var H=(X=>(X.Lg="lg",X.Md="md",X.Sm="sm",X))(H||{}),q=(X=>(X.CSV="csv",X.Date="date",X.Distributed="distributed",X.DoubleQuote="doublequote",X.Glob="glob",X.HTML="html",X.JSON="json",X.Lucene="lucene",X.PercentEncode="percentencode",X.Pipe="pipe",X.QueryParam="queryparam",X.Raw="raw",X.Regex="regex",X.SQLString="sqlstring",X.SingleQuote="singlequote",X.Text="text",X.UriEncode="uriencode",X))(q||{}),le=(X=>(X.exact="exact",X.none="none",X.numbers="numbers",X.signature="signature",X))(le||{}),me=(X=>(X.EQ="eq",X.GT="gt",X.GTE="gte",X.LT="lt",X.LTE="lte",X.NEQ="neq",X))(me||{});const k={align:"auto",inspect:!1},ee="browser"},33623:(Y,I,e)=>{"use strict";e.d(I,{KQ:()=>r,QB:()=>s});var t=e(52622);const n="11.0.1",r={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:t.wV.Auto,showValue:t.yL.Auto,stacking:t.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},s={fillOpacity:80,gradientMode:t.on.None,lineWidth:1}},16371:(Y,I,e)=>{"use strict";e.d(I,{K:()=>r});var t=e(52622);const n="11.0.1",r={displayMode:t.eX.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:t.TZ.Auto,showUnfilled:!0,sizing:t.T6.Auto,valueMode:t.$l.Color}},37827:(Y,I,e)=>{"use strict";e.d(I,{K:()=>n});const t="11.0.1",n={selectedSeries:0}},44955:(Y,I,e)=>{"use strict";e.d(I,{K:()=>r});var t=e(52622);const n="11.0.1",r={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:t.T6.Auto}},87487:(Y,I,e)=>{"use strict";e.d(I,{KQ:()=>n});const t="11.0.1",n={layers:[]},r={allLayers:!0,id:"zero",lat:0,lon:0,zoom:1};var s=(m=>(m.Details="details",m.None="none",m))(s||{}),o=(m=>(m.Coords="coords",m.Fit="fit",m.Zero="zero",m))(o||{})},96529:(Y,I,e)=>{"use strict";e.d(I,{KQ:()=>o});var t=e(52622);const n="11.0.1";var r=(m=>(m.Opacity="opacity",m.Scheme="scheme",m))(r||{}),s=(m=>(m.Exponential="exponential",m.Linear="linear",m))(s||{});const o={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:t.yL.Auto,tooltip:{mode:t.$N.Single,yHistogram:!1,showColorScale:!1}}},42226:(Y,I,e)=>{"use strict";e.d(I,{KQ:()=>r,QB:()=>s});var t=e(52622);const n="11.0.1",r={bucketCount:30,bucketOffset:0},s={fillOpacity:80,gradientMode:t.on.None,lineWidth:1}},69383:(Y,I,e)=>{"use strict";e.d(I,{K:()=>n});const t="11.0.1",n={showImage:!0}},65391:(Y,I,e)=>{"use strict";e.d(I,{KQ:()=>m});const t="11.0.1";var n=(l=>(l.Donut="donut",l.Pie="pie",l))(n||{}),r=(l=>(l.Name="name",l.Percent="percent",l.Value="value",l))(r||{}),s=(l=>(l.Percent="percent",l.Value="value",l))(s||{});const o={values:[]},m={displayLabels:[]}},89607:(Y,I,e)=>{"use strict";e.d(I,{K:()=>r});var t=e(52622);const n="11.0.1",r={colorMode:t.yp.Value,graphMode:t.$p.Area,justifyMode:t.F8.Auto,showPercentChange:!1,textMode:t.SV.Auto,wideLayout:!0}},15821:(Y,I,e)=>{"use strict";e.d(I,{KQ:()=>r,QB:()=>s});var t=e(52622);const n="11.0.1",r={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:t.yL.Auto},s={fillOpacity:70,lineWidth:0}},64337:(Y,I,e)=>{"use strict";e.d(I,{KQ:()=>r,QB:()=>s});var t=e(52622);const n="11.0.1",r={colWidth:.9,rowHeight:.9,showValue:t.yL.Auto},s={fillOpacity:70,lineWidth:1}},52037:(Y,I,e)=>{"use strict";e.d(I,{K:()=>r});var t=e(52622);const n="11.0.1",r={cellHeight:t.qM.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},12183:(Y,I,e)=>{"use strict";e.d(I,{KQ:()=>m});const t="11.0.1";var n=(l=>(l.Code="code",l.HTML="html",l.Markdown="markdown",l))(n||{}),r=(l=>(l.Go="go",l.Html="html",l.Json="json",l.Markdown="markdown",l.Plaintext="plaintext",l.Sql="sql",l.Typescript="typescript",l.Xml="xml",l.Yaml="yaml",l))(r||{});const s="plaintext",o={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},m={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},10055:(Y,I,e)=>{"use strict";e.d(I,{KQ:()=>l,QB:()=>m});var t=e(52622);const n="11.0.1";var r=(i=>(i.Auto="auto",i.Manual="manual",i))(r||{}),s=(i=>(i.Lines="lines",i.Points="points",i.PointsAndLines="points+lines",i))(s||{});const o={exclude:[]},m={label:t.yL.Auto,show:"points"},l={series:[]}},73134:(Y,I,e)=>{"use strict";e.d(I,{CO:()=>m,GW:()=>T,OA:()=>b,Ol:()=>d,QB:()=>D,Ye:()=>M,ZG:()=>i,aD:()=>r,bf:()=>s,bt:()=>P,dM:()=>h,lt:()=>a,rw:()=>o,ss:()=>C,yV:()=>v});const t={tags:[]},n={exclude:!1,ids:[]},r={list:[]},s={builtIn:0,enable:!0,hide:!1},o={includeAll:!1,multi:!1,options:[],skipUrlSync:!1};var m=(O=>(O[O.never=0]="never",O[O.onDashboardLoad=1]="onDashboardLoad",O[O.onTimeRangeChanged=2]="onTimeRangeChanged",O))(m||{}),l=(O=>(O[O.dontHide=0]="dontHide",O[O.hideLabel=1]="hideLabel",O[O.hideVariable=2]="hideVariable",O))(l||{}),i=(O=>(O[O.alphabeticalAsc=1]="alphabeticalAsc",O[O.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",O[O.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",O[O.alphabeticalDesc=2]="alphabeticalDesc",O[O.disabled=0]="disabled",O[O.naturalAsc=7]="naturalAsc",O[O.naturalDesc=8]="naturalDesc",O[O.numericalAsc=3]="numericalAsc",O[O.numericalDesc=4]="numericalDesc",O))(i||{});const c={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var u=(O=>(O.ContinuousBlPu="continuous-BlPu",O.ContinuousBlYlRd="continuous-BlYlRd",O.ContinuousBlues="continuous-blues",O.ContinuousGrYlRd="continuous-GrYlRd",O.ContinuousGreens="continuous-greens",O.ContinuousPurples="continuous-purples",O.ContinuousRdYlGr="continuous-RdYlGr",O.ContinuousReds="continuous-reds",O.ContinuousYlBl="continuous-YlBl",O.ContinuousYlRd="continuous-YlRd",O.Fixed="fixed",O.PaletteClassic="palette-classic",O.PaletteClassicByName="palette-classic-by-name",O.Shades="shades",O.Thresholds="thresholds",O))(u||{});const f={h:9,w:12,x:0,y:0};var d=(O=>(O.Absolute="absolute",O.Percentage="percentage",O))(d||{});const E={steps:[]};var h=(O=>(O.RangeToText="range",O.RegexToText="regex",O.SpecialValue="special",O.ValueToText="value",O))(h||{}),y=(O=>(O.Empty="empty",O.False="false",O.NaN="nan",O.Null="null",O.NullAndNan="null+nan",O.True="true",O))(y||{});const a={hidden:!1,refresh_intervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],time_options:["5m","15m","1h","6h","12h","24h","2d","7d","30d"]};var v=(O=>(O[O.Crosshair=1]="Crosshair",O[O.Off=0]="Off",O[O.Tooltip=2]="Tooltip",O))(v||{});const g=0,b={links:[],repeatDirection:"h",targets:[],transformations:[],transparent:!1},P={overrides:[]},C={id:""},D={links:[],mappings:[]},T={collapsed:!1,panels:[]},M={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,tags:[],timezone:"browser"}},39651:(Y,I,e)=>{"use strict";e.d(I,{Gu:()=>r,gB:()=>n});var t=e(52622);const n={align:"auto",inspect:!1,cellOptions:{type:t.ob.Auto}};var r=(s=>(s.NotStarted="NotStarted",s.Loading="Loading",s.Streaming="Streaming",s.Done="Done",s.Error="Error",s))(r||{})},79422:(Y,I,e)=>{"use strict";e.d(I,{Ye:()=>r,lt:()=>o,rw:()=>s,zL:()=>n});var t=e(73134),n=(E=>(E[E.dontHide=0]="dontHide",E[E.hideLabel=1]="hideLabel",E[E.hideVariable=2]="hideVariable",E))(n||{});const r=t.Ye,s={...t.rw},o=t.lt,m=t.OA,l=t.GW,i=t.QB,c=t.bt,u=t.ss,f=t.bf,d=t.aD},11807:(Y,I,e)=>{"use strict";e.d(I,{l:()=>u});var t=e(32196),n=e(96540),r=e(73287),s=e(14110),o=e(40845),m=e(29158),l=e(88575),i=e(32372),c=e(94471);function u({rawSql:d,datasourceType:E}){const[h,y]=(0,r.A)(),a=(0,o.of)(f),v=b=>{y(b),(0,s.rR)("grafana_sql_preview_copied",{datasource:E})},g=n.createElement("div",{className:a.labelWrapper},n.createElement("span",{className:a.label},"Preview"),n.createElement(m.K,{tooltip:"Copy to clipboard",onClick:()=>v(d),name:"copy"}));return n.createElement(l.D,{label:g,className:a.grow},n.createElement(i.B,{language:"sql",height:80,value:(0,c.s)(d),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1}))}function f(d){return{grow:(0,t.css)({flexGrow:1}),label:(0,t.css)({fontSize:12,fontWeight:d.typography.fontWeightMedium}),labelWrapper:(0,t.css)({display:"flex",justifyContent:"space-between",paddingBottom:d.spacing(.5)})}}},94471:(Y,I,e)=>{"use strict";e.d(I,{s:()=>n});var t=e(27633);function n(r){return t.Ay.format(r).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,s=>s.replace(/\s/g,""))}},42418:(Y,I,e)=>{"use strict";e.d(I,{F:()=>c});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(55852),m=e(14578),l=e(90613),i=e(94753);const c=n.forwardRef(({title:d,onRemove:E,children:h,buttonContent:y,elevated:a,bottomSpacing:v,topSpacing:g,className:b,severity:P="error",...C},D)=>{const T=(0,s.$j)(),O=f(T,P,!!d,a,v,g),S={error:"alert",warning:"alert",info:"status",success:"status"},p=C.role||S[P],x=C["aria-label"]||d;return n.createElement("div",{ref:D,className:(0,t.cx)(O.wrapper,b),role:p,"aria-label":x,...C},n.createElement(l.a,{"data-testid":r.Tp.components.Alert.alertV2(P),display:"flex",backgroundColor:P,borderRadius:"default",paddingY:1,paddingX:2,borderStyle:"solid",borderColor:P,alignItems:"stretch",boxShadow:a?"z3":void 0},n.createElement(l.a,{paddingTop:1,paddingRight:2},n.createElement("div",{className:O.icon},n.createElement(m.I,{size:"xl",name:u(P)}))),n.createElement(l.a,{paddingY:1,grow:1},n.createElement(i.E,{color:"primary",weight:"medium"},d),h&&n.createElement("div",{className:O.content},h)),E&&!y&&n.createElement("div",{className:O.close},n.createElement(o.$n,{"aria-label":"Close alert",icon:"times",onClick:E,type:"button",fill:"text",variant:"secondary"})),E&&y&&n.createElement(l.a,{marginLeft:1,display:"flex",alignItems:"center"},n.createElement(o.$n,{"aria-label":"Close alert",variant:"secondary",onClick:E,type:"button"},y))))});c.displayName="Alert";const u=d=>{switch(d){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},f=(d,E,h,y,a,v)=>{const g=d.colors[E];return{wrapper:(0,t.css)({flexGrow:1,marginBottom:d.spacing(a??2),marginTop:d.spacing(v??0),position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:d.colors.background.primary,zIndex:-1}}),icon:(0,t.css)({color:g.text}),content:(0,t.css)({color:d.colors.text.primary,paddingTop:h?d.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),close:(0,t.css)({position:"relative",color:d.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},28270:(Y,I,e)=>{"use strict";e.d(I,{p:()=>E});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(88575),m=e(32982);const l=r.memo(()=>{const y=(0,s.of)(i);return r.createElement("div",{className:y.ellipsis},r.createElement("span",{className:y.firstDot},"."),r.createElement("span",{className:y.secondDot},"."),r.createElement("span",{className:y.thirdDot},"."))});l.displayName="EllipsisAnimated";const i=()=>({ellipsis:(0,t.css)({display:"inline"}),firstDot:(0,t.css)({animation:`${c} 2s linear infinite`}),secondDot:(0,t.css)({animation:`${u} 2s linear infinite`}),thirdDot:(0,t.css)({animation:`${f} 2s linear infinite`})}),c=(0,t.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,u=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,f=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,d=2*1e3;function E(y){const{invalid:a,loading:v,onFinishChange:g,saveErrorMessage:b="Error saving this value",error:P,children:C,disabled:D,...T}=y,[M,O]=r.useState({isLoading:!1,showSuccess:!1,showError:a}),S=(0,r.useRef)(null);r.useEffect(()=>{let B;if(M.showSuccess){const U=M.showError?0:d;B=setTimeout(()=>{O({...M,showSuccess:!1})},U)}return()=>{window.clearTimeout(B)}},[M]);const p=(0,r.useCallback)(B=>{a||(O({...M,isLoading:!0,showSuccess:!1}),g(B).then(()=>{O({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{O({...M,isLoading:!1,showError:!0})}))},[a,M,g]),x=(0,r.useMemo)(()=>(0,n.debounce)(p,600,{leading:!1}),[p]),A=a||M.showError||void 0,R=(0,s.of)(h);return r.createElement(r.Fragment,null,r.createElement(o.D,{...T,loading:v||void 0,invalid:A,disabled:D,error:P||M.showError&&b,ref:S,className:R.widthFitContent},r.cloneElement(C(B=>{x(B)}))),M.isLoading&&r.createElement(m.r,{referenceElement:S.current,placement:"right"},"Saving ",r.createElement(l,null)),M.showSuccess&&r.createElement(m.r,{suffixIcon:"check",referenceElement:S.current,placement:"right"},"Saved!"))}E.displayName="AutoSaveField";const h=()=>({widthFitContent:(0,t.css)({width:"fit-content"})})},39938:(Y,I,e)=>{"use strict";e.d(I,{E:()=>f});var t=e(32196),n=e(96540),r=e(70255),s=e(84140),o=e(40845),m=e(72129),l=e(14578),i=e(56034);const c=n.memo(({icon:h,color:y,text:a,tooltip:v,className:g,...b})=>{const P=(0,o.of)(E,y),C=n.createElement("div",{className:(0,t.cx)(P.wrapper,g),...b},h&&n.createElement(l.I,{name:h,size:"sm"}),a);return v?n.createElement(i.m,{content:v,placement:"auto"},C):C});c.displayName="Badge";const u=({rootProps:h})=>{const y=(0,o.of)(d);return n.createElement(r.A,{width:60,height:22,containerClassName:y.container,...h})},f=(0,m.j)(c,u),d=()=>({container:(0,t.css)({lineHeight:1})}),E=(h,y)=>{let a=h.visualization.getColorByName(y),v="",g="",b="";return h.isDark?(g=(0,s.A)(a).setAlpha(.15).toString(),v=(0,s.A)(a).setAlpha(.25).toString(),b=(0,s.A)(a).lighten(15).toString()):(g=(0,s.A)(a).setAlpha(.15).toString(),v=(0,s.A)(a).setAlpha(.25).toString(),b=(0,s.A)(a).darken(20).toString()),{wrapper:(0,t.css)({display:"inline-flex",padding:"1px 4px",borderRadius:h.shape.radius.default,background:g,border:`1px solid ${v}`,color:b,fontWeight:h.typography.fontWeightRegular,gap:"2px",fontSize:h.typography.bodySmall.fontSize,lineHeight:h.typography.bodySmall.lineHeight,alignItems:"center"})}}},97696:(Y,I,e)=>{"use strict";e.d(I,{xE:()=>C});var t=e(32196),n=e(96540),r=e(84140),s=e(47070),o=e(50082),m=e(58649),l=e(83195),i=e(24293),c=e(8066),u=e(13544),f=e(52622),d=e(29413),E=e(55852),h=e(9286);const y=18,a=50,v=150,g=1.5,b=1,P=10;class C extends n.PureComponent{static{this.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:f.eX.Gradient,orientation:s.wV.Horizontal,field:{min:0,max:100,thresholds:{mode:o.O.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0}}render(){const{onClick:F,className:K,theme:w}=this.props,{title:L}=this.props.value,V=M(this.props);return F?n.createElement("button",{type:"button",style:V.wrapper,onClick:F,className:(0,t.cx)((0,E.my)(w),K)},n.createElement("div",{style:V.title},L),this.renderBarAndValue()):n.createElement("div",{style:V.wrapper,className:K},L&&n.createElement("div",{style:V.title},L),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:F,showUnfilled:K,valueDisplayMode:w}=this.props,L=x(this.props);return n.createElement("div",{style:L.wrapper},w!==f.$l.Hidden&&n.createElement(h.i,{"data-testid":u.Tp.components.Panels.Visualization.BarGauge.valueV2,value:F,style:L.value}),K&&n.createElement("div",{style:L.emptyBar}),n.createElement("div",{style:L.bar}))}renderRetroBars(){const{display:F,field:K,value:w,itemSpacing:L,alignmentFactors:V,orientation:N,lcdCellWidth:z,text:J,valueDisplayMode:G,theme:H}=this.props,{valueHeight:q,valueWidth:le,maxBarHeight:me,maxBarWidth:k,wrapperWidth:ee,wrapperHeight:X}=O(this.props),j=K.min??m.tw,ne=K.max??m.d1,te=D(N),oe=ne-j,ie=te?me:k,ue=L,be=Math.floor(ie/z),ge=Math.floor((ie-ue*be)/be),re=R(this.props),Be=B(V||w,re,le,q,N,J),ve={width:`${ee}px`,height:`${X}px`,display:"flex"};te?(ve.flexDirection="column-reverse",ve.alignItems="center"):(ve.flexDirection="row",ve.alignItems="center",Be.justifyContent="flex-end");const Me=[];for(let ke=0;ke<be;ke++){const Se=j+oe/be*ke,We=S(Se,w,F),De={borderRadius:H.shape.radius.default};We.isLit?De.backgroundImage=`radial-gradient(${We.background} 10%, ${We.backgroundShade})`:De.backgroundColor=We.background,te?(De.height=`${ge}px`,De.width=`${k}px`,De.marginTop=`${ue}px`):(De.width=`${ge}px`,De.height=`${me}px`,De.marginRight=`${ue}px`),Me.push(n.createElement("div",{key:ke.toString(),style:De}))}return n.createElement("div",{style:ve},Me,G!==f.$l.Hidden&&n.createElement(h.i,{"data-testid":u.Tp.components.Panels.Visualization.BarGauge.valueV2,value:w,style:Be}))}}function D(U){return U===s.wV.Vertical}function T(U){const{height:F,width:K,alignmentFactors:w,orientation:L,text:V,namePlacement:N}=U,z=w?w.title:U.value.title;if(!z)return{fontSize:0,width:0,height:0,placement:"above"};if(D(L)){const k=V?.titleSize??14;return{fontSize:k,width:K,height:k*g,placement:"below"}}if(F>40&&N===f.TZ.Auto||N===f.TZ.Top){if(V?.titleSize)return{fontSize:V?.titleSize,width:0,height:V.titleSize*g,placement:"above"};const ee=Math.max(Math.min(F*.45,a),17);return{fontSize:ee/g,width:0,height:ee,placement:"above"}}const q=Math.max(F*.6,y)/g,le=(0,d.kD)(z,q),me=Math.min(le.width+15,K*.4);return{fontSize:V?.titleSize??q,height:0,width:me,placement:"left"}}function M(U){const F={display:"flex",overflow:"hidden",width:"100%"},K=T(U),w={fontSize:`${K.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return D(U.orientation)?(F.flexDirection="column-reverse",w.textAlign="center"):K.placement==="above"?F.flexDirection="column":(F.flexDirection="row",w.width=`${K.width}px`,w.textAlign="right",w.paddingRight="10px"),{wrapper:F,title:w}}function O(U){const{height:F,width:K,orientation:w,text:L,alignmentFactors:V,valueDisplayMode:N}=U,z=T(U),J=V??U.value,G=(0,l.cN)(J);let H=0,q=0,le=0,me=0,k=0,ee=0;const X=L?.valueSize??Math.max(z.fontSize,12),ne=(0,d.kD)(G,X).width+P*2;return D(w)?(L?.valueSize?le=L.valueSize*b:le=Math.min(Math.max(F*.1,y),a),me=K,N===f.$l.Hidden&&(le=0,me=0),H=F-(z.height+le),q=K,k=K,ee=F-z.height):(N===f.$l.Hidden?(le=0,me=0):(le=F-z.height,me=Math.max(Math.min(K*.2,v),ne)),H=F-z.height,q=K-me-z.width,z.placement==="above"?(k=K,ee=F-z.height):(k=K-z.width,ee=F)),{valueWidth:me,valueHeight:le,maxBarWidth:q,maxBarHeight:H,wrapperHeight:ee,wrapperWidth:k}}function S(U,F,K){if(U===null)return{background:i.F,border:i.F};const w=K?K(U).color:null;return w?F===null||isNaN(F.numeric)||U!==null&&U>F.numeric?{background:(0,r.A)(w).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,r.A)(w).setAlpha(.95).toRgbString(),backgroundShade:(0,r.A)(w).setAlpha(.55).toRgbString(),border:(0,r.A)(w).setAlpha(.9).toRgbString(),isLit:!0}:{background:i.F,border:i.F}}function p(U,F,K){const w=Math.min((U-F)/(K-F),1);return isNaN(w)?0:w}function x(U){const{displayMode:F,field:K,value:w,alignmentFactors:L,orientation:V,theme:N,text:z}=U,{valueWidth:J,valueHeight:G,maxBarHeight:H,maxBarWidth:q}=O(U),le=K.min??m.tw,me=K.max??m.d1,k=p(w.numeric,le,me),ee=R(U),X=w.color??i.F,ne=B(L||w,ee,J,G,V,z),te=F==="basic",oe={display:"flex",flexGrow:1},ie={borderRadius:N.shape.radius.default,position:"relative",zIndex:1},ue={background:N.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:N.shape.radius.default,position:"relative"};if(D(V)){const be=Math.max(k*H,1);oe.flexDirection="column",oe.justifyContent="flex-end",ie.transition="height 1s",ie.height=`${be}px`,ie.width=`${q}px`,ue.bottom="-3px",ue.width=`${J}px`,te?(ie.background=`${(0,r.A)(X).setAlpha(.35).toRgbString()}`,ie.borderTop=`2px solid ${X}`):ie.background=A(U,H)}else{const be=Math.max(k*q,1);oe.flexDirection="row-reverse",oe.justifyContent="flex-end",oe.alignItems="stretch",ie.transition="width 1s",ie.height=`${H}px`,ie.width=`${be}px`,ue.left="-3px",ue.height=`${G}px`,te?(ie.background=`${(0,r.A)(X).setAlpha(.35).toRgbString()}`,ie.borderRight=`2px solid ${X}`):ie.background=A(U,q)}return{wrapper:oe,bar:ie,value:ne,emptyBar:ue}}function A(U,F){const{field:K,value:w,orientation:L,theme:V}=U,N=D(L)?"0deg":"90deg",z=K.min,J=K.max;let G="",H=0,q=(0,c.Hs)(K.color?.mode);if(q.id===i.Y.Thresholds){const le=K.thresholds;for(let me=0;me<le.steps.length;me++){const k=le.steps[me],ee=U.theme.visualization.getColorByName(k.color),X=le.mode===o.O.Percentage?k.value/100:p(k.value,z,J),j=X*F,ne=Math.round(j-(j-H)/2),te=le.mode===o.O.Percentage?z+(J-z)*X:k.value;if(G==="")G=`linear-gradient(${N}, ${ee}, ${ee}`;else{if(w.numeric<te)break;H=j,G+=` ${ne}px, ${ee}`}}return G+")"}if(q.isContinuous&&q.getColors){const le=q.getColors(V);for(let me=0;me<le.length;me++){const k=le[me];if(G==="")G=`linear-gradient(${N}, ${k} 0px`;else{const X=me/(le.length-1)*F;G+=`, ${k} ${X}px`}}return G+")"}return w.color??i.F}function R(U){if(U.valueDisplayMode==="text")return U.theme.colors.text.primary;const{value:F}=U;return F.color?F.color:i.F}function B(U,F,K,w,L,V){const N={color:F,height:`${w}px`,width:`${K}px`,display:"flex",alignItems:"center",lineHeight:b};let z=K;const J=(0,l.cN)(U);return D(L)?(N.fontSize=V?.valueSize??(0,d.Vr)(J,z,w,b),N.justifyContent="center"):(N.fontSize=V?.valueSize??(0,d.Vr)(J,z-P*2,w,b),N.justifyContent="flex-end",N.paddingLeft=`${P}px`,N.paddingRight=`${P}px`,z-=P),N}},37494:(Y,I,e)=>{"use strict";e.d(I,{yV:()=>R,yp:()=>S,$p:()=>p,F8:()=>x,SV:()=>A});var t=e(32196),n=e(96540),r=e(55852),s=e(9286),o=e(84140),m=e(11261),l=e(83195),i=e(52622),c=e(24284),u=e(29413),f=e(5926),d=e(14578);const E=({percentChange:B,styles:U})=>{const F=B&&(B>0?"arrow-up":B<0?"arrow-down":void 0);return n.createElement("div",{style:U.containerStyles},F&&n.createElement(d.I,{name:F,height:U.iconSize,width:U.iconSize,viewBox:"6 6 12 12"}),h(B))},h=B=>B?.toLocaleString(void 0,{style:"percent",maximumSignificantDigits:3})??"",y=1.2,a=30,v=500;class g{constructor(U){this.props=U;const{width:F,height:K,value:w,text:L}=U;this.valueColor=w.color??"gray",this.panelPadding=K>100?12:8,this.textValues=O(U),this.justifyCenter=M(U.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=F-this.panelPadding*2,this.maxTextHeight=K-this.panelPadding*2,L&&(L.titleSize&&(this.titleFontSize=L.titleSize,this.titleToAlignTo=void 0),L.valueSize&&(this.valueFontSize=L.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const U={fontSize:`${this.titleFontSize}px`,lineHeight:y};return(this.props.colorMode===S.Background||this.props.colorMode===S.BackgroundSolid)&&(U.color=(0,c.mZ)(this.valueColor,this.props.theme.isDark)),U}getValueStyles(){const U={fontSize:this.valueFontSize,fontWeight:v,lineHeight:y,position:"relative",zIndex:1};switch(this.justifyCenter&&(U.textAlign="center"),this.props.colorMode){case S.Value:U.color=this.valueColor;break;case S.Background:case S.BackgroundSolid:U.color=(0,c.mZ)(this.valueColor,this.props.theme.isDark);break;case S.None:U.color=this.props.theme.colors.text.primary;break}return U}getPercentChangeStyles(U){const K=this.getValueAndTitleContainerStyles(),w=Math.max(this.valueFontSize/2.5,12);let L=Math.max(this.valueFontSize/3,10);const V=U>0?this.props.theme.visualization.getColorByName("green"):this.props.theme.visualization.getColorByName("red"),N={fontSize:w,fontWeight:v,lineHeight:y,position:"relative",display:"flex",alignItems:"center",gap:Math.max(w/3,4),zIndex:1,color:V};switch(this.justifyCenter&&(N.textAlign="center"),K.flexDirection==="column"&&w>12&&(N.marginTop=-(w/4)),K.flexDirection==="row"&&(N.alignItems="baseline",N.lineHeight=y*2.5),this.props.colorMode){case S.Background:case S.BackgroundSolid:N.color=(0,c.mZ)(this.valueColor,this.props.theme.isDark);break}return this.props.textMode===A.None&&(N.fontSize=(0,u.Vr)(h(U),this.maxTextWidth*.8,this.maxTextHeight*.8,y,void 0,v),L=N.fontSize*.8),{containerStyles:N,iconSize:L}}getValueAndTitleContainerStyles(){const U={display:"flex",flexWrap:"wrap"};return this.justifyCenter&&(U.alignItems="center",U.justifyContent="center",U.flexGrow=1,U.gap="0.75ch"),U}getPanelStyles(){const{width:U,height:F,theme:K,colorMode:w,textMode:L}=this.props,V={width:`${U}px`,height:`${F}px`,padding:`${L===A.None?2:this.panelPadding}px`,borderRadius:K.shape.radius.default,position:"relative",display:"flex"},N=K.isDark?1:-.7;switch(w){case S.Background:const z=(0,o.A)(this.valueColor).darken(15*N).spin(8).toRgbString(),J=(0,o.A)(this.valueColor).darken(5*N).spin(-8).toRgbString();V.background=`linear-gradient(120deg, ${z}, ${J})`;break;case S.BackgroundSolid:V.background=(0,o.A)(this.valueColor).toString();break;case S.Value:V.background="transparent";break}return this.justifyCenter&&(V.alignItems="center",V.flexDirection="row"),V}renderChart(){const{sparkline:U,colorMode:F}=this.props;if(!U||U.y?.type!==m.PU.number)return null;let K,w;switch(F){case S.Background:case S.BackgroundSolid:K="rgba(255,255,255,0.4)",w=(0,o.A)(this.valueColor).brighten(40).toRgbString();break;case S.None:case S.Value:default:w=this.valueColor,K=(0,o.A)(this.valueColor).setAlpha(.2).toRgbString();break}const L={custom:{drawStyle:i.GR.Line,lineWidth:1,fillColor:K,lineColor:w}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(f.O,{height:this.chartHeight,width:this.chartWidth,sparkline:U,config:L,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class b extends g{constructor(U){super(U);const F=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,u.Vr)(this.valueToAlignTo,this.maxTextWidth*F,this.maxTextHeight,y,void 0,v)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.Vr)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,y,a),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const U=super.getValueAndTitleContainerStyles();return U.flexDirection="row",U.alignItems="center",U.flexGrow=1,this.justifyCenter||(U.justifyContent="space-between"),U}renderChart(){return null}getPanelStyles(){const U=super.getPanelStyles();return U.alignItems="center",U}}class P extends g{constructor(U){super(U);const{width:F,height:K}=U,w=.5,L=.6,V=1-L,N=.4;this.chartWidth=F,this.chartHeight=K*w,this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.Vr)(this.titleToAlignTo,this.maxTextWidth*L,this.maxTextHeight*N,y,a)),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.Vr)(this.valueToAlignTo,this.maxTextWidth*V,this.maxTextHeight*w,y,void 0,v))}getValueAndTitleContainerStyles(){const U=super.getValueAndTitleContainerStyles();return U.flexDirection="row",U.flexGrow=1,this.justifyCenter||(U.justifyContent="space-between"),U}getPanelStyles(){const U=super.getPanelStyles();return U.flexDirection="row",U.justifyContent="space-between",U}}class C extends g{constructor(U){super(U);const{width:F,height:K}=U,w=.15,L=.25;let V=0;this.chartHeight=K*L,this.chartWidth=F,this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.Vr)(this.titleToAlignTo,this.maxTextWidth,K*w,y,a),V=this.titleFontSize*y),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-V,y,void 0,v)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=K-this.titleFontSize*y-this.valueFontSize*y}getValueAndTitleContainerStyles(){const U=super.getValueAndTitleContainerStyles();return U.flexDirection="column",U.justifyContent="center",U}getPanelStyles(){const U=super.getPanelStyles();return U.flexDirection="column",U}}class D extends g{constructor(U){super(U);const{height:F}=U,K=.15;let w=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.Vr)(this.titleToAlignTo,this.maxTextWidth,F*K,y,a),w=this.titleFontSize*y),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-w,y,void 0,v)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const U=super.getValueAndTitleContainerStyles();return U.flexDirection="column",U.flexGrow=1,U}renderChart(){return null}getPanelStyles(){const U=super.getPanelStyles();return U.alignItems="center",U}}function T(B){const{width:U,height:F,sparkline:K}=B;return U/F>2.5&&!B.disableWideLayout?F>50&&K&&K.y.values.length>1?new P(B):new b(B):F>100&&K&&K.y.values.length>1?new C(B):new D(B)}function M(B,U){return B===x.Center?!0:(U??"").length===0}function O(B){const{value:U,alignmentFactors:F,count:K}=B;let{textMode:w}=B;const L=F?F.title:U.title,V=(0,l.cN)(F||U);switch(w===A.Auto&&(K??1)===1&&(w=A.Value),w){case A.Name:return{...U,title:void 0,prefix:void 0,suffix:void 0,text:U.title||"",titleToAlignTo:void 0,valueToAlignTo:L??"",tooltip:(0,l.cN)(U)};case A.Value:return{...U,title:void 0,titleToAlignTo:void 0,valueToAlignTo:V,tooltip:U.title};case A.None:return{numeric:U.numeric,color:U.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${U.title}
Value: ${(0,l.cN)(U)}`};case A.ValueAndName:default:return{...U,titleToAlignTo:L,valueToAlignTo:V}}}var S=(B=>(B.Background="background",B.BackgroundSolid="background_solid",B.None="none",B.Value="value",B))(S||{}),p=(B=>(B.None="none",B.Line="line",B.Area="area",B))(p||{}),x=(B=>(B.Auto="auto",B.Center="center",B))(x||{}),A=(B=>(B.Auto="auto",B.Value="value",B.ValueAndName="value_and_name",B.Name="name",B.None="none",B))(A||{});class R extends n.PureComponent{static{this.defaultProps={justifyMode:"auto"}}render(){const{onClick:U,className:F,hasLinks:K,theme:w}=this.props,L=T(this.props),V=L.getPanelStyles(),N=L.getValueAndTitleContainerStyles(),z=L.getValueStyles(),J=L.getTitleStyles(),G=L.textValues,H=this.props.value.percentChange,q=H!=null&&!Number.isNaN(H),le=K?void 0:G.tooltip;return U?n.createElement("button",{type:"button",className:(0,t.cx)((0,r.my)(w),F),style:V,onClick:U,title:le},n.createElement("div",{style:N},G.title&&n.createElement("div",{style:J},G.title),n.createElement(s.i,{value:G,style:z})),L.renderChart()):n.createElement("div",{className:F,style:V,title:le},n.createElement("div",{style:N},G.title&&n.createElement("div",{style:J},G.title),n.createElement(s.i,{value:G,style:z}),q&&n.createElement(E,{percentChange:H,styles:L.getPercentChangeStyles(H)})),L.renderChart())}}},54438:(Y,I,e)=>{"use strict";e.d(I,{J:()=>l});var t=e(32196),n=e(96540),r=e(23257),s=e.n(r),o=e(40845),m=e(5313);const l=(0,n.forwardRef)(({name:c,value:u,hidden:f,facets:d,onClick:E,className:h,loading:y,searchTerm:a,active:v,style:g,title:b,highlightParts:P,...C},D)=>{const T=(0,o.$j)(),M=i(T),O=a?[a]:[],S=(0,n.useCallback)(x=>{E&&!f&&E(c,u,x)},[E,c,f,u]);let p=u||c;return d&&(p=`${p} (${d})`),n.createElement("button",{key:p,ref:D,onClick:S,style:g,title:b||p,type:"button",role:"option","aria-selected":!!v,className:(0,t.cx)(M.base,v&&M.active,y&&M.loading,f&&M.hidden,h,E&&!f&&M.hover),...C},P!==void 0?n.createElement(m.z,{text:p,highlightClassName:M.matchHighLight,highlightParts:P}):n.createElement(s(),{textToHighlight:p,searchWords:O,autoEscape:!0,highlightClassName:M.matchHighLight}))});l.displayName="Label";const i=c=>({base:(0,t.css)({display:"inline-block",cursor:"pointer",fontSize:c.typography.size.sm,lineHeight:c.typography.bodySmall.lineHeight,backgroundColor:c.colors.background.secondary,color:c.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:c.spacing(.5),borderRadius:c.shape.radius.default,border:"none",marginRight:c.spacing(1),marginBottom:c.spacing(.5)}),loading:(0,t.css)({fontWeight:c.typography.fontWeightMedium,backgroundColor:c.colors.primary.shade,color:c.colors.text.primary,animation:"pulse 3s ease-out 0s infinite normal forwards","@keyframes pulse":{"0%":{color:c.colors.text.primary},"50%":{color:c.colors.text.secondary},"100%":{color:c.colors.text.disabled}}}),active:(0,t.css)({fontWeight:c.typography.fontWeightMedium,backgroundColor:c.colors.primary.main,color:c.colors.primary.contrastText}),matchHighLight:(0,t.css)({background:"inherit",color:c.components.textHighlight.text,backgroundColor:c.components.textHighlight.background}),hidden:(0,t.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,t.css)({"&:hover":{opacity:.85,cursor:"pointer"}})})},55852:(Y,I,e)=>{"use strict";e.d(I,{$n:()=>u,Ez:()=>v,U_:()=>y,hs:()=>d,my:()=>a,z9:()=>f});var t=e(32196),n=e(96540),r=e(40845),s=e(16797),o=e(87266),m=e(14578),l=e(56034);const i=null,c=null,u=n.forwardRef(({variant:g="primary",size:b="md",fill:P="solid",icon:C,fullWidth:D,children:T,className:M,type:O="button",tooltip:S,tooltipPlacement:p,...x},A)=>{const R=(0,r.$j)(),B=d({theme:R,size:b,variant:g,fill:P,fullWidth:D,iconOnly:!T}),U=n.createElement("button",{className:(0,t.cx)(B.button,M),type:O,...x,ref:S?void 0:A},C&&n.createElement(m.I,{name:C,size:b,className:B.icon}),T&&n.createElement("span",{className:B.content},T));return S?n.createElement(l.m,{ref:A,content:S,placement:p},U):U});u.displayName="Button";const f=n.forwardRef(({variant:g="primary",size:b="md",fill:P="solid",icon:C,fullWidth:D,children:T,className:M,onBlur:O,onFocus:S,disabled:p,tooltip:x,tooltipPlacement:A,...R},B)=>{const U=(0,r.$j)(),F=d({theme:U,fullWidth:D,size:b,variant:g,fill:P,iconOnly:!T}),K=(0,t.cx)(F.button,{[(0,t.css)(F.disabled,{pointerEvents:"none"})]:p},M),w=n.createElement("a",{className:K,...R,tabIndex:p?-1:0,"aria-disabled":p,ref:x?void 0:B},C&&n.createElement(m.I,{name:C,size:b,className:F.icon}),T&&n.createElement("span",{className:F.content},T));return x?n.createElement(l.m,{ref:B,content:x,placement:A},w):w});f.displayName="LinkButton";const d=g=>{const{theme:b,variant:P,fill:C="solid",size:D,iconOnly:T,fullWidth:M}=g,{height:O,padding:S,fontSize:p}=(0,o.SM)(D,b),x=y(b,P,C),A=h(b,P,C),R=(0,s.getFocusStyles)(b),B=b.spacing.gridSize*S-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:p,fontWeight:b.typography.fontWeightMedium,fontFamily:b.typography.fontFamily,padding:`0 ${B}px`,height:b.spacing(O),lineHeight:`${b.spacing.gridSize*O-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:b.shape.radius.default,"&:focus":R,"&:focus-visible":R,"&:focus:not(:focus-visible)":(0,s.getMouseFocusStyles)(b),...M&&{flexGrow:1,justifyContent:"center"},...x,":disabled":A,"&[disabled]":A}),disabled:(0,t.css)(A),img:(0,t.css)({width:"16px",height:"16px",margin:b.spacing(0,1,0,.5)}),icon:T?(0,t.css)({marginRight:b.spacing(-S/2),marginLeft:b.spacing(-S/2)}):(0,t.css)({marginRight:b.spacing(S/2)}),content:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",height:"100%"})}};function E(g,b,P){let C=b.border,D="transparent",T="transparent";return b.name==="secondary"&&(D=b.border,T=g.colors.emphasize(b.border,.25),C=g.colors.border.strong),P==="outline"?{background:"transparent",color:b.text,border:`1px solid ${C}`,transition:g.transitions.create(["background-color","border-color","color"],{duration:g.transitions.duration.short}),"&:hover":{background:b.transparent,borderColor:g.colors.emphasize(C,.25),color:b.text}}:P==="text"?{background:"transparent",color:b.text,border:"1px solid transparent",transition:g.transitions.create(["background-color","color"],{duration:g.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:b.transparent,textDecoration:"none"}}:{background:b.main,color:b.contrastText,border:`1px solid ${D}`,transition:g.transitions.create(["background-color","box-shadow","border-color","color"],{duration:g.transitions.duration.short}),"&:hover":{background:b.shade,color:b.contrastText,boxShadow:g.shadows.z1,borderColor:T}}}function h(g,b,P){const C={cursor:"not-allowed",boxShadow:"none",color:g.colors.text.disabled,transition:"none"};return P==="text"?{...C,background:"transparent",border:"1px solid transparent"}:P==="outline"?{...C,background:"transparent",border:`1px solid ${g.colors.border.weak}`}:{...C,background:g.colors.action.disabledBackground,border:"1px solid transparent"}}function y(g,b,P){switch(b){case"secondary":return E(g,g.colors.secondary,P);case"destructive":return E(g,g.colors.error,P);case"success":return E(g,g.colors.success,P);case"primary":default:return E(g,g.colors.primary,P)}}const a=g=>(0,t.css)({background:"transparent",color:g.colors.text.primary,border:"none",padding:0}),v=g=>(0,t.css)({background:"transparent",border:"none",padding:0,fontFamily:"inherit",color:"inherit",height:"100%","&:hover":{background:"transparent",color:"inherit"}})},19727:(Y,I,e)=>{"use strict";e.d(I,{e:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=(0,n.forwardRef)(({className:m,children:l,...i},c)=>{const u=(0,r.of)(o);return n.createElement("div",{ref:c,className:(0,t.cx)("button-group",u.wrapper,m),...i},l)});s.displayName="ButtonGroup";const o=m=>({wrapper:(0,t.css)({display:"flex","> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRightWidth:0}})})},61458:(Y,I,e)=>{"use strict";e.d(I,{V:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({className:m,children:l})=>{const i=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(i,m)},l)},o=()=>(0,t.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}})},32012:(Y,I,e)=>{"use strict";e.d(I,{H:()=>i});var t=e(32196),n=e(6979),r=e(96540),s=e(40845),o=e(55852),m=e(58898),l=e(14578);const i=u=>{const{onChange:f,className:d,loadData:E,icon:h,buttonProps:y,hideDownIcon:a,variant:v,disabled:g,...b}=u,P=(0,s.of)(c);let C=u.children;return a||(C=[u.children,r.createElement(l.I,{key:"down-icon",name:"angle-down",className:P.icons.right})]),r.createElement(n.A,{onChange:(0,m.k)(f),loadData:(0,m.W)(E),dropdownClassName:P.popup,...b,expandIcon:null},r.createElement(o.$n,{icon:h,disabled:g,variant:v,...y??{}},C))};i.displayName="ButtonCascader";const c=u=>({popup:(0,t.css)({label:"popup",zIndex:u.zIndex.dropdown}),icons:{right:(0,t.css)({margin:"1px 0 0 4px"}),left:(0,t.css)({margin:"-1px 4px 0 0"})}})},76442:(Y,I,e)=>{"use strict";e.d(I,{c:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({message:m,callToActionElement:l,footer:i,className:c})=>{const u=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)([u.wrapper,c])},m&&n.createElement("div",{className:u.message},m),l,i&&n.createElement("div",{className:u.footer},i))},o=m=>({wrapper:(0,t.css)({label:"call-to-action-card",background:m.colors.background.secondary,borderRadius:m.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,padding:m.spacing(3),[m.breakpoints.down("sm")]:{padding:m.spacing(3,1)}}),message:(0,t.css)({marginBottom:m.spacing(3),fontStyle:"italic"}),footer:(0,t.css)({marginTop:m.spacing(3)})})},10860:(Y,I,e)=>{"use strict";e.d(I,{H:()=>D,Z:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(16797),o=e(81507);const m=n.createContext(null),l=({disabled:T,href:M,onClick:O,children:S,isSelected:p,isCompact:x,className:A,...R})=>{const B=(0,n.useMemo)(()=>n.Children.toArray(S).some(w=>n.isValidElement(w)&&w.type===i),[S]),U=T||!O&&!M,F=O&&!T?O:void 0,K=(0,r.of)(o.i,T,U,p,x);return n.createElement(o.Q,{disableEvents:T,disableHover:U,isSelected:p,className:(0,t.cx)(K.container,A),...R},n.createElement(m.Provider,{value:{href:M,onClick:F,disabled:T,isSelected:p}},!B&&n.createElement(i,null),S))},i=({children:T,className:M,"aria-label":O})=>{const S=(0,n.useContext)(m),p=(0,r.of)(c),{href:x,onClick:A,isSelected:R}=S??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(p.heading,M)},x?n.createElement("a",{href:x,className:p.linkHack,"aria-label":O,onClick:A},T):A?n.createElement("button",{onClick:A,className:p.linkHack,"aria-label":O,type:"button"},T):n.createElement(n.Fragment,null,T),R!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",checked:R,readOnly:!0}))};i.displayName="Heading";const c=T=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:T.typography.size.md,letterSpacing:"inherit",lineHeight:T.typography.body.lineHeight,color:T.colors.text.primary,fontWeight:T.typography.fontWeightMedium,"& input[readonly]":{cursor:"inherit"}}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:T.shape.radius.default},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(T),zIndex:1}}})}),u=({children:T,className:M})=>{const O=(0,r.of)(f);return n.createElement("div",{className:(0,t.cx)(O.tagList,M)},T)};u.displayName="Tags";const f=T=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),d=({children:T,className:M})=>{const O=(0,r.of)(E);return n.createElement("p",{className:(0,t.cx)(O.description,M)},T)};d.displayName="Description";const E=T=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:T.spacing(1,0,0),color:T.colors.text.secondary,lineHeight:T.typography.body.lineHeight})}),h=({children:T,align:M="start",className:O})=>{const S=(0,r.of)(y);return n.createElement("div",{className:(0,t.cx)(S.media,O,(0,t.css)({alignSelf:M}))},T)};h.displayName="Figure";const y=T=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:T.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),a=(0,n.memo)(({children:T,className:M,separator:O="|"})=>{const S=(0,r.of)(v);let p=T;const x=n.Children.toArray(T).filter(Boolean);return x.length?(p=x.map((A,R)=>n.createElement("div",{key:`element_${R}`,className:S.metadataItem},A)),x.length>1&&O&&(p=x.reduce((A,R,B)=>[A,n.createElement("span",{key:`separator_${B}`,className:S.separator},O),R])),n.createElement("div",{className:(0,t.cx)(S.metadata,M)},p)):null});a.displayName="Meta";const v=T=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:T.typography.size.sm,color:T.colors.text.secondary,margin:T.spacing(.5,0,0),lineHeight:T.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${T.spacing(1)}`})}),g=({children:T,disabled:M,variant:O,className:S})=>{const p=(0,r.of)(b),A=(0,n.useContext)(m)?.disabled||M,R=O==="primary"?p.actions:p.secondaryActions;return n.createElement("div",{className:(0,t.cx)(R,S)},n.Children.map(T,B=>n.isValidElement(B)?(0,n.cloneElement)(B,{disabled:A,...B.props}):null))},b=T=>({actions:(0,t.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:T.spacing(1),gridArea:"Actions",marginTop:T.spacing(2)}),secondaryActions:(0,t.css)({alignSelf:"center",color:T.colors.text.secondary,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:T.spacing(1),gridArea:"Secondary",marginTop:T.spacing(2)})}),P=({children:T,disabled:M,className:O})=>n.createElement(g,{variant:"primary",disabled:M,className:O},T);P.displayName="Actions";const C=({children:T,disabled:M,className:O})=>n.createElement(g,{variant:"secondary",disabled:M,className:O},T);C.displayName="SecondaryActions";const D=T=>({inner:(0,t.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...c(T),...v(T),...E(T),...y(T),...b(T),...f(T)});l.Heading=i,l.Tags=u,l.Figure=h,l.Meta=a,l.Actions=P,l.SecondaryActions=C,l.Description=d},81507:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>l,i:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(16797);const o=({children:c,href:u})=>{const{inner:f}=(0,r.of)(m);return u?n.createElement("a",{className:f,href:u},c):n.createElement(n.Fragment,null,c)},m=c=>({inner:(0,t.css)({display:"flex",width:"100%",padding:c.spacing(2)})}),l=({children:c,disableEvents:u,disableHover:f,isSelected:d,className:E,href:h,...y})=>{const{oldContainer:a}=(0,r.of)(i,u,f,d);return n.createElement("div",{...y,className:(0,t.cx)(a,E)},n.createElement(o,{href:h},c))},i=(c,u=!1,f=!1,d,E)=>{const h=d!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:c.spacing(E?1:2),background:c.colors.background.secondary,borderRadius:c.shape.radius.default,marginBottom:"8px",pointerEvents:u?"none":"auto",transition:c.transitions.create(["background-color","box-shadow","border-color","color"],{duration:c.transitions.duration.short}),...!f&&{"&:hover":{background:c.colors.emphasize(c.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":s.getFocusStyles(c)},...h&&{cursor:"pointer"},...d&&{outline:`solid 2px ${c.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:c.colors.background.secondary,borderRadius:c.shape.radius.default,position:"relative",pointerEvents:u?"none":"auto",marginBottom:c.spacing(1),transition:c.transitions.create(["background-color","box-shadow","border-color","color"],{duration:c.transitions.duration.short}),...!f&&{"&:hover":{background:c.colors.emphasize(c.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":s.getFocusStyles(c)}})}}},3988:(Y,I,e)=>{"use strict";e.d(I,{v:()=>h});var t=e(32196),n=e(47078),r=e.n(n),s=e(6979),o=e(96540),m=e(14578),l=e(29158),i=e(10354),c=e(67061),u=e(88323),f=e(58898);const d=(0,t.css)({"&:focus":{outline:"none"}}),E=" / ";class h extends o.PureComponent{constructor(a){super(a),this.flattenOptions=(P,C=[])=>{let D=[];for(const T of P){const M=[...C];M.push(T),!T.items||T.items.length===0?D.push({singleLabel:M[M.length-1].label,label:M.map(O=>O.label).join(this.props.separator||E),value:M.map(O=>O.value)}):D=[...D,...this.flattenOptions(T.items,M)]}return D},this.getSearchableOptions=r()(P=>this.flattenOptions(P)),this.onChange=(P,C)=>{const D=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?C.map(M=>M.label).join(this.props.separator||E):C[C.length-1].label,T={rcValue:{value:P,label:D},focusCascade:!0,activeLabel:D,isSearching:!1,inputValue:D};this.setState(T),this.props.onSelect(C[C.length-1].value)},this.onSelect=P=>{const C=P.value||[],D=this.props.displayAllSelectedLevels?P.label:P.singleLabel||"",T={activeLabel:D,inputValue:D,rcValue:{value:C,label:D},isSearching:!1,focusCascade:!1};this.setState(T),this.props.onSelect(C[C.length-1])},this.onCreateOption=P=>{this.setState({activeLabel:P,inputValue:P,rcValue:[],isSearching:!1}),this.props.onSelect(P)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=P=>{if(["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight"].includes(P.key))return;const{activeLabel:C}=this.state;this.setState({focusCascade:!1,isSearching:!0,inputValue:C})},this.onSelectInputChange=P=>{this.setState({inputValue:P})};const v=this.getSearchableOptions(a.options),{rcValue:g,activeLabel:b}=this.setInitialValue(v,a.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:g,activeLabel:b,inputValue:""}}static{this.defaultProps={changeOnSelect:!0}}setInitialValue(a,v){if(!v)return{rcValue:[],activeLabel:""};for(const g of a){const b=g.value||[];if(b[b.length-1]===v)return{rcValue:b,activeLabel:this.props.displayAllSelectedLevels?g.label:g.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:v}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:a,formatCreateLabel:v,placeholder:g,width:b,changeOnSelect:P,options:C,disabled:D,id:T,isClearable:M}=this.props,{focusCascade:O,isSearching:S,rcValue:p,activeLabel:x,inputValue:A}=this.state,R=this.getSearchableOptions(C);return o.createElement("div",null,S?o.createElement(u.l6,{allowCustomValue:a,placeholder:g,autoFocus:!O,onChange:this.onSelect,onBlur:this.onBlur,options:R,onCreateOption:this.onCreateOption,formatCreateLabel:v,width:b,onInputChange:this.onSelectInputChange,disabled:D,inputValue:A,inputId:T}):o.createElement(s.A,{onChange:(0,f.k)(this.onChange),options:C,changeOnSelect:P,value:p.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen,disabled:D},o.createElement("div",{className:d},o.createElement(i.p,{autoFocus:this.props.autoFocus,width:b,placeholder:g,onBlur:this.onBlurCascade,value:x,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:o.createElement(c.B,{gap:.5},M&&x!==""&&o.createElement(l.K,{name:"times","aria-label":"Clear selection",onClick:B=>{B.preventDefault(),B.stopPropagation(),this.setState({rcValue:[],activeLabel:"",inputValue:""}),this.props.onSelect("")}}),o.createElement(m.I,{name:O?"angle-up":"angle-down"})),disabled:D,id:T}))))}}},58898:(Y,I,e)=>{"use strict";e.d(I,{W:()=>n,k:()=>t});const t=o=>(m,l)=>{o&&o(m.map(i=>String(i)),r(l))},n=o=>m=>{o&&o(r(m))},r=o=>o.map(s),s=o=>({value:o.value??"",label:o.label})},8866:(Y,I,e)=>{"use strict";e.d(I,{N:()=>n});var t=e(96540);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const o=this.myRef.current;(!o||s.target instanceof Node&&!o.contains(s.target))&&this.props.onClick()}}static{this.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:void 0,useCapture:!1}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}},10534:(Y,I,e)=>{"use strict";e.d(I,{b:()=>c});var t=e(32196),n=e(96540),r=e(76412),s=e(40845),o=e(55852),m=e(14578),l=e(32982);const i=2*1e3;function c({onClipboardCopy:d,onClipboardError:E,children:h,getText:y,icon:a,variant:v,...g}){const b=(0,s.of)(f),[P,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let M;return P&&(M=setTimeout(()=>{C(!1)},i)),()=>{window.clearTimeout(M)}},[P]);const D=(0,n.useRef)(null),T=(0,n.useCallback)(async()=>{const M=y();try{await u(M,D),C(!0),d?.(M)}catch(O){E?.(M,O)}},[y,d,E]);return n.createElement(n.Fragment,null,P&&n.createElement(l.r,{placement:"top",referenceElement:D.current},n.createElement(r.x,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(o.$n,{onClick:T,icon:a,variant:P?"success":v,"aria-label":P?"Copied":void 0,...g,className:(0,t.cx)(b.button,P&&b.successButton,g.className),ref:D},h,P&&n.createElement("div",{className:b.successOverlay},n.createElement(m.I,{name:"check"}))))}const u=async(d,E)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(d);{const h=document.createElement("textarea");E.current?.appendChild(h),h.value=d,h.focus(),h.select(),document.execCommand("copy"),h.remove()}},f=d=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},57418:(Y,I,e)=>{"use strict";e.d(I,{M:()=>c});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(16797),l=e(14578),i=e(62930);const c=({label:f,isOpen:d,onToggle:E,className:h,contentClassName:y,children:a,labelId:v,loading:g=!1,headerDataTestId:b,contentDataTestId:P})=>{const[C,D]=(0,s.useState)(d),T=(0,o.of)(u),M=p=>{p.target instanceof HTMLElement&&p.target.tagName==="A"||(p.preventDefault(),p.stopPropagation(),E?.(!C),D(!C))},{current:O}=(0,s.useRef)((0,n.uniqueId)()),S=v??`collapse-label-${O}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:M,className:(0,t.cx)(T.header,h)},s.createElement("button",{type:"button",id:`collapse-button-${O}`,className:T.button,onClick:M,"aria-expanded":C&&!g,"aria-controls":`collapse-content-${O}`,"aria-labelledby":S},g?s.createElement(i.y,{className:T.spinner}):s.createElement(l.I,{name:C?"angle-up":"angle-down",className:T.icon})),s.createElement("div",{className:T.label,id:`collapse-label-${O}`,"data-testid":b},f)),C&&s.createElement("div",{id:`collapse-content-${O}`,className:(0,t.cx)(T.content,y),"data-testid":P},a))},u=f=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:f.typography.size.lg,padding:`${f.spacing(.5)} 0`,"&:focus-within":(0,m.getFocusStyles)(f)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:f.colors.text.secondary}),content:(0,t.css)({padding:`${f.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:f.spacing(2)}),label:(0,t.css)({display:"flex"})})},82762:(Y,I,e)=>{"use strict";e.d(I,{S:()=>i,a:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(14578);const m=c=>({collapse:(0,t.css)({label:"collapse",marginBottom:c.spacing(1),backgroundColor:c.colors.background.primary,border:`1px solid ${c.colors.border.weak}`,position:"relative",borderRadius:c.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,t.css)({label:"collapse__body",padding:c.spacing(c.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,t.css)({label:"bodyContentWrapper",flex:1,overflow:"hidden"}),loader:(0,t.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:c.spacing(.5)}),loaderActive:(0,t.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100,left:"-25%",background:c.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,t.css)({label:"collapse__header",padding:c.spacing(1,2,1,2),display:"flex",transition:"all 0.1s linear"}),headerCollapsed:(0,t.css)({label:"collapse__header--collapsed",padding:c.spacing(1,2,1,2)}),headerLabel:(0,t.css)({label:"collapse__header-label",fontWeight:c.typography.fontWeightMedium,marginRight:c.spacing(1),fontSize:c.typography.size.md,display:"flex",flex:"0 0 100%"}),icon:(0,t.css)({label:"collapse__icon",margin:c.spacing(.25,1,0,-1)})}),l=({isOpen:c,onToggle:u,...f})=>{const[d,E]=(0,n.useState)(c);return n.createElement(i,{isOpen:d,collapsible:!0,...f,onToggle:()=>{E(!d),u&&u(!d)}})},i=({isOpen:c,label:u,loading:f,collapsible:d,onToggle:E,className:h,children:y})=>{const a=(0,r.of)(s.my),v=(0,r.of)(m),g=()=>{E&&E(!c)},b=(0,t.cx)([v.collapse,h]),P=f?(0,t.cx)([v.loader,v.loaderActive]):(0,t.cx)([v.loader]),C=d?(0,t.cx)([v.header]):(0,t.cx)([v.headerCollapsed]);return n.createElement("div",{className:b},n.createElement("button",{type:"button",className:(0,t.cx)(a,C),onClick:g},d&&n.createElement(o.I,{className:v.icon,name:c?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([v.headerLabel])},u)),c&&n.createElement("div",{className:(0,t.cx)([v.collapseBody])},n.createElement("div",{className:P}),n.createElement("div",{className:v.bodyContentWrapper},y)))};i.displayName="Collapse"},36314:(Y,I,e)=>{"use strict";e.d(I,{A:()=>c});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(84140),m=e(40845),l=e(10354);const i=(0,s.forwardRef)(({color:d,onChange:E,isClearable:h=!1,onClick:y,onBlur:a,disabled:v,buttonAriaLabel:g,...b},P)=>{const[C,D]=(0,s.useState)(d),[T,M]=(0,s.useState)(d),O=(0,s.useMemo)(()=>(0,n.debounce)(E,100),[]);(0,s.useEffect)(()=>{const x=(0,o.A)(d);x.isValid()&&d!==T&&(D(x.toString()),M(d))},[d,T]);const S=x=>{const{value:A}=x.currentTarget;if(D(A),A===""&&h){O(A);return}const R=(0,o.A)(A);R.isValid()&&O(R.toString())},p=x=>{(0,o.A)(C).isValid()||D(d),a?.(x)};return s.createElement(l.p,{...b,value:C,onChange:S,disabled:v,onClick:y,onBlur:p,addonBefore:s.createElement(u,{onClick:y,ariaLabel:g,disabled:v,color:d}),ref:P})});i.displayName="ColorInput";const c=i,u=({color:d,onClick:E,disabled:h,ariaLabel:y})=>{const a=(0,m.of)(f);return s.createElement("button",{type:"button",onClick:E,"aria-label":y,disabled:h||!E,className:(0,t.cx)(a,(0,t.css)({backgroundColor:d}))})},f=d=>(0,t.css)({height:"100%",width:`${d.spacing.gridSize*4}px`,borderRadius:`${d.shape.radius.default} 0 0 ${d.shape.radius.default}`,border:`1px solid ${d.colors.border.medium}`})},83598:(Y,I,e)=>{"use strict";e.d(I,{Dp:()=>E,sk:()=>d});var t=e(32196),n=e(96540),r=e(40845),s=e(3911),o=e(40321),m=e(13840),l=e(95868),i=e(70045),c=e(83876),u=e(70104);const f=(y,a="ColorPicker")=>class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}static{this.displayName=a}render(){const{theme:g,children:b,onChange:P,color:C}=this.props,D=h(g),T=n.createElement(y,{...this.props,children:null,onChange:P});return n.createElement(l.I,{content:T,hideAfter:300},(M,O,S)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(m.A,{...S,referenceElement:this.pickerTriggerRef.current,wrapperClassName:D.colorPicker,onMouseLeave:O,onMouseEnter:M,onKeyDown:p=>(0,o.Q)(p,O)}),b?b({ref:this.pickerTriggerRef,showColorPicker:M,hideColorPicker:O}):n.createElement(c.q,{ref:this.pickerTriggerRef,onClick:M,onMouseLeave:O,color:g.visualization.getColorByName(C||"#000000"),"aria-label":C})))}},d=(0,r.cV)(f(i.$,"ColorPicker")),E=(0,r.cV)(f(u.o,"SeriesColorPicker")),h=(0,s.N)(y=>({colorPicker:(0,t.css)({position:"absolute",zIndex:y.zIndex.tooltip,color:y.colors.text.primary,maxWidth:"400px",fontSize:y.typography.size.sm})}))},99128:(Y,I,e)=>{"use strict";e.d(I,{i:()=>u});var t=e(32196),n=e(96540),r=e(7612),s=e(65229),o=e(23596),m=e(40845),l=e(8866),i=e(36314),c=e(95151);const u=(0,n.forwardRef)(({value:d="",onChange:E,returnColorAs:h="rgb",...y},a)=>{const[v,g]=(0,n.useState)(d),[b,P]=(0,n.useState)(!1),C=(0,m.$j)(),D=(0,m.of)(f),T=(0,m.of)(c.$);return(0,s.A)(M=>{if(M===d)return;if(!M){E("");return}const O=C.visualization.getColorByName(M);E(h==="rgb"?o.asRgbString(O):o.asHexString(O))},500,[v]),n.createElement(l.N,{onClick:()=>P(!1)},n.createElement("div",{className:D.wrapper},b&&!y.disabled&&n.createElement(r.p9,{"data-testid":"color-popover",color:v,onChange:g,className:(0,t.cx)(T.root,D.picker)}),n.createElement(i.A,{...y,theme:C,color:v,onChange:g,buttonAriaLabel:"Open color picker",onClick:()=>P(!0),onBlur:()=>P(!1),ref:a,isClearable:!0})))});u.displayName="ColorPickerInput";const f=d=>({wrapper:(0,t.css)({position:"relative"}),picker:(0,t.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,t.css)({position:"absolute"})})},70045:(Y,I,e)=>{"use strict";e.d(I,{$:()=>v});var t=e(32196),n=e(7887),r=e(96540),s=e(23596),o=e(40845),m=e(3911),l=e(83876),i=e(2543);function c(b,P){const C=new Array(b.length);for(let D=0;D<b.length;D++){const T=b.length-1-D;C[D]=P(b[T],T,b)}return C}const f=({hue:b,selectedColor:P,onColorSelect:C,...D})=>{const T=(0,i.upperFirst)(b.name),M=(0,o.of)(d);return r.createElement("div",{className:M.colorRow},r.createElement("div",{className:M.colorLabel},T),r.createElement("div",{...D,className:M.swatchRow},c(b.shades,O=>r.createElement(l.q,{key:O.name,"aria-label":O.name,variant:O.primary?l.h.Large:l.h.Small,isSelected:O.name===P,color:O.color,onClick:()=>C(O.name)}))))},d=b=>({colorRow:(0,t.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:b.spacing(2),padding:b.spacing(.5,0),"&:hover":{background:b.colors.background.secondary}}),colorLabel:(0,t.css)({paddingLeft:b.spacing(2),display:"flex",alignItems:"center"}),swatchRow:(0,t.css)({display:"flex",gap:b.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),E=({color:b,onChange:P})=>{const C=(0,o.$j)(),D=(0,o.of)(h),T=[];for(const M of C.visualization.hues)T.push(r.createElement(f,{key:M.name,selectedColor:b,hue:M,onColorSelect:P}));return r.createElement(r.Fragment,null,r.createElement("div",{className:D.swatches},T),r.createElement("div",{className:D.extraColors},r.createElement(l.q,{isSelected:b==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>P("transparent")}),r.createElement(l.q,{isSelected:b==="text",color:C.colors.text.primary,label:"Text color",onClick:()=>P("text")})))},h=b=>({container:(0,t.css)({display:"flex",flexDirection:"column"}),extraColors:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:b.spacing(1),padding:b.spacing(1,0)}),swatches:(0,t.css)({display:"grid",flexGrow:1})});var y=e(95151);class a extends r.Component{constructor(P){super(P),this.getTabClassName=C=>{const{activePicker:D}=this.state;return`ColorPickerPopover__tab ${D===C&&"ColorPickerPopover__tab--active"}`},this.handleChange=C=>{const{onChange:D,enableNamedColors:T,theme:M}=this.props;if(T)return D(C);D(s.asHexString(M.visualization.getColorByName(C)))},this.onTabChange=C=>()=>this.setState({activePicker:C}),this.renderPicker=()=>{const{activePicker:C}=this.state,{color:D}=this.props;switch(C){case"spectrum":return r.createElement(y.A,{color:D,onChange:this.handleChange});case"palette":return r.createElement(E,{color:D,onChange:this.handleChange});default:return this.renderCustomPicker(C)}},this.renderCustomPicker=C=>{const{customPickers:D,color:T,theme:M}=this.props;return D?r.createElement(D[C].tabComponent,{color:T,theme:M,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:C}=this.props;return C?r.createElement(r.Fragment,null,Object.keys(C).map(D=>r.createElement("button",{className:this.getTabClassName(D),onClick:this.onTabChange(D),key:D,type:"button"},C[D].name))):null},this.state={activePicker:"palette"}}render(){const{theme:P}=this.props,C=g(P);return r.createElement(n.n1,{contain:!0,restoreFocus:!0,autoFocus:!0},r.createElement("div",{tabIndex:-1,className:C.colorPickerPopover},r.createElement("div",{className:C.colorPickerPopoverTabs},r.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),type:"button"},"Colors"),r.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),type:"button"},"Custom"),this.renderCustomPickerTabs()),r.createElement("div",{className:C.colorPickerPopoverContent},this.renderPicker())))}}const v=(0,o.cV)(a);v.displayName="ColorPickerPopover";const g=(0,m.N)(b=>({colorPickerPopover:(0,t.css)({borderRadius:b.shape.radius.default,boxShadow:b.shadows.z3,background:b.colors.background.primary,border:`1px solid ${b.colors.border.weak}`,".ColorPickerPopover__tab":{width:"50%",textAlign:"center",padding:b.spacing(1,0),background:b.colors.background.secondary,color:b.colors.text.secondary,fontSize:b.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}},".ColorPickerPopover__tab--active":{color:b.colors.text.primary,fontWeight:b.typography.fontWeightMedium,background:b.colors.background.primary}}),colorPickerPopoverContent:(0,t.css)({width:"246px",fontSize:b.typography.bodySmall.fontSize,minHeight:"184px",padding:b.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,t.css)({display:"flex",width:"100%",borderRadius:`${b.shape.radius.default} ${b.shape.radius.default} 0 0`})}))},83876:(Y,I,e)=>{"use strict";e.d(I,{h:()=>l,q:()=>i});var t=e(32196),n=e(7887),r=e(96540),s=e(84140),o=e(13544),m=e(40845),l=(u=>(u.Small="small",u.Large="large",u))(l||{});const i=r.forwardRef(({color:u,label:f,variant:d="small",isSelected:E,"aria-label":h,...y},a)=>{const v=(0,m.$j)(),{isFocusVisible:g,focusProps:b}=(0,n.og)(),P=c(v,d,u,g,E),C=!!f,D=h||f;return r.createElement("div",{ref:a,className:P.wrapper,"data-testid":o.Tp.components.ColorSwatch.name,...y},C&&r.createElement("span",{className:P.label},f),r.createElement("button",{className:P.swatch,...b,"aria-label":D?`${D} color`:"Pick a color",type:"button"}))}),c=(u,f,d,E,h)=>{const y=(0,s.A)(d),v=f==="small"?"16px":"32px";let g="none";return y.getAlpha()<.1&&(g=`2px solid ${u.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:u.spacing(1)}),swatch:(0,t.css)({width:v,height:v,background:`${d}`,border:g,borderRadius:u.shape.radius.circle,outlineOffset:"1px",outline:E?`2px solid  ${u.colors.primary.main}`:"none",boxShadow:h?`inset 0 0 0 2px ${d}, inset 0 0 0 4px ${u.colors.getContrastText(d)}`:"none",transition:u.transitions.create(["transform"],{duration:u.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};i.displayName="ColorSwatch"},70104:(Y,I,e)=>{"use strict";e.d(I,{o:()=>m,t:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(74716),o=e(70045);const m=c=>{const u=(0,r.of)(i),{yaxis:f,onToggleAxis:d,color:E,...h}=c,y=d?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.d,{key:"yaxisSwitch",label:"Use right y-axis",className:u.colorPickerAxisSwitch,labelClass:u.colorPickerAxisSwitchLabel,checked:f===2,onChange:()=>{d&&d()}})}}}:void 0;return n.createElement(o.$,{...h,color:E||"#000000",customPickers:y})},l=(0,r.cV)(m),i=()=>({colorPickerAxisSwitch:(0,t.css)({width:"100%"}),colorPickerAxisSwitchLabel:(0,t.css)({display:"flex",flexGrow:1})})},95151:(Y,I,e)=>{"use strict";e.d(I,{$:()=>u,A:()=>f});var t=e(32196),n=e(96540),r=e(7612),s=e(65229),o=e(84140),m=e(23596),l=e(40845),i=e(36314);const c=({color:d,onChange:E})=>{const[h,y]=(0,n.useState)(d);(0,s.A)(b=>{E(m.asHexString(a.visualization.getColorByName(b)))},500,[h]);const a=(0,l.$j)(),v=(0,l.of)(u),g=(0,n.useMemo)(()=>h.startsWith("rgba")?h:(0,o.A)(a.visualization.getColorByName(d)).toRgbString(),[h,a,d]);return n.createElement("div",{className:v.wrapper},n.createElement(r.p9,{className:v.root,color:g,onChange:y}),n.createElement(i.A,{theme:a,color:g,onChange:y,className:v.colorInput}))},u=d=>({wrapper:(0,t.css)({flexGrow:1}),root:(0,t.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${d.shape.radius.default} ${d.shape.radius.default} 0 0`},"&__alpha":{borderRadius:`0 0 ${d.shape.radius.default} ${d.shape.radius.default}`},"&__alpha, &__hue":{height:d.spacing(2),position:"relative"},"&__pointer":{height:d.spacing(2),width:d.spacing(2)}}}),colorInput:(0,t.css)({marginTop:d.spacing(2)})}),f=c},82702:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(55852);const o=({children:l,className:i,closeOnConfirm:c,confirmText:u="Save",confirmVariant:f="primary",disabled:d=!1,onCancel:E,onClick:h,onConfirm:y,size:a="md"})=>{const v=(0,n.useRef)(null),g=(0,n.useRef)(null),[b,P]=(0,n.useState)(!1),[C,D]=(0,n.useState)(!1),T=(0,r.of)(m);(0,n.useEffect)(()=>{b?(g.current?.focus(),D(!0)):C&&(v.current?.focus(),D(!1))},[C,b]);const M=R=>{R&&R.preventDefault(),P(!0),h?.()},O=R=>{R&&R.preventDefault(),P(!1),v.current?.focus(),E?.()},S=R=>{R&&R.preventDefault(),y?.(),c&&P(!1)},p=(0,t.cx)(i,T.mainButton,{[T.mainButtonHide]:b}),x=(0,t.cx)(T.confirmButton,{[T.confirmButtonHide]:!b}),A=(0,t.cx)(T.confirmButtonContainer,{[T.confirmButtonContainerHide]:!b});return n.createElement("div",{className:T.container},n.createElement("span",{className:p},typeof l=="string"?n.createElement(s.$n,{disabled:d,size:a,fill:"text",onClick:M,ref:v},l):n.cloneElement(l,{disabled:d,onClick:M,ref:v})),n.createElement("div",{className:A},n.createElement("span",{className:x},n.createElement(s.$n,{size:a,variant:f,onClick:S,ref:g},u),n.createElement(s.$n,{size:a,fill:"text",onClick:O},"Cancel"))))};o.displayName="ConfirmButton";const m=l=>({container:(0,t.css)({alignItems:"center",display:"flex",justifyContent:"flex-end",position:"relative"}),mainButton:(0,t.css)({opacity:1,transition:l.transitions.create(["opacity"],{duration:l.transitions.duration.shortest,easing:l.transitions.easing.easeOut}),zIndex:2}),mainButtonHide:(0,t.css)({opacity:0,transition:l.transitions.create(["opacity","visibility"],{duration:l.transitions.duration.shortest,easing:l.transitions.easing.easeIn}),visibility:"hidden",zIndex:0}),confirmButtonContainer:(0,t.css)({overflow:"visible",position:"absolute",pointerEvents:"all",right:0}),confirmButtonContainerHide:(0,t.css)({overflow:"hidden",pointerEvents:"none"}),confirmButton:(0,t.css)({alignItems:"flex-start",background:l.colors.background.primary,display:"flex",opacity:1,transform:"translateX(0)",transition:l.transitions.create(["opacity","transform"],{duration:l.transitions.duration.shortest,easing:l.transitions.easing.easeOut}),zIndex:1}),confirmButtonHide:(0,t.css)({opacity:0,transform:"translateX(100%)",transition:l.transitions.create(["opacity","transform","visibility"],{duration:l.transitions.duration.shortest,easing:l.transitions.easing.easeIn}),visibility:"hidden"})})},91605:(Y,I,e)=>{"use strict";e.d(I,{e:()=>s});var t=e(96540),n=e(55852),r=e(82702);const s=({size:o,disabled:m,onConfirm:l,"aria-label":i,closeOnConfirm:c})=>t.createElement(r.Z,{confirmText:"Delete",confirmVariant:"destructive",size:o||"md",disabled:m,onConfirm:l,closeOnConfirm:c},t.createElement(n.$n,{"aria-label":i,variant:"destructive",icon:"times",size:o||"sm"}))},96374:(Y,I,e)=>{"use strict";e.d(I,{u:()=>f});var t=e(32196),n=e(96540),r=e(49785),s=e(13544),o=e(40845),m=e(55852),l=e(10354),i=e(90613),c=e(67061),u=e(37390);const f=({isOpen:E,title:h,body:y,description:a,confirmText:v,confirmVariant:g="destructive",confirmationText:b,dismissText:P="Cancel",dismissVariant:C="secondary",alternativeText:D,modalClass:T,icon:M="exclamation-triangle",onConfirm:O,onDismiss:S,onAlternative:p,confirmButtonVariant:x="destructive"})=>{const[A,R]=(0,n.useState)(!!b),B=(0,o.of)(d),U=(0,n.useRef)(null),F=L=>{R(b?.toLowerCase().localeCompare(L.currentTarget.value.toLowerCase())!==0)};(0,n.useEffect)(()=>{E&&U.current?.focus()},[E]),(0,n.useEffect)(()=>{E&&R(!!b)},[E,b]);const K=async()=>{R(!0);try{await O()}finally{R(!1)}},{handleSubmit:w}=(0,r.mN)();return n.createElement(u.a,{className:(0,t.cx)(B.modal,T),title:h,icon:M,isOpen:E,onDismiss:S},n.createElement("form",{onSubmit:w(K)},n.createElement("div",{className:B.modalText},y,a?n.createElement("div",{className:B.modalDescription},a):null,b?n.createElement("div",{className:B.modalConfirmationInput},n.createElement(c.B,{alignItems:"flex-start"},n.createElement(i.a,null,n.createElement(l.p,{placeholder:`Type "${b}" to confirm`,onChange:F})))):null),n.createElement(u.a.ButtonRow,null,n.createElement(m.$n,{variant:C,onClick:S,fill:"outline"},P),n.createElement(m.$n,{type:"submit",variant:x,disabled:A,ref:U,"data-testid":s.Tp.pages.ConfirmModal.delete},v),p?n.createElement(m.$n,{variant:"primary",onClick:p},D):null)))},d=E=>({modal:(0,t.css)({width:"500px"}),modalText:(0,t.css)({fontSize:E.typography.h5.fontSize,color:E.colors.text.primary}),modalDescription:(0,t.css)({fontSize:E.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:E.spacing(1)})})},28122:(Y,I,e)=>{"use strict";e.d(I,{t:()=>m});var t=e(96540),n=e(29647),r=e(13544),s=e(38138),o=e(17464);const m=t.memo(({x:l,y:i,onClose:c,focusOnOpen:u=!0,renderMenuItems:f,renderHeader:d})=>{const E=(0,t.useRef)(null),[h,y]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const P=E.current;if(P){const C=P.getBoundingClientRect(),D=5,T={right:window.innerWidth<l+C.width,bottom:window.innerHeight<i+C.height+D};y({position:"fixed",left:T.right?l-C.width-D:l-D,top:Math.max(0,T.bottom?i-C.height-D:i+D)})}},[l,i]),(0,n.A)(E,()=>{c?.()});const a=d?.(),v=f?.(),g=P=>{u&&P(0)},b=P=>{P.key==="Escape"&&(P.preventDefault(),P.stopPropagation(),c?.())};return t.createElement(o.ZL,null,t.createElement(s.W,{header:a,ref:E,style:h,ariaLabel:r.Tp.components.Menu.MenuComponent("Context"),onOpen:g,onClick:c,onKeyDown:b},v))});m.displayName="ContextMenu"},51686:(Y,I,e)=>{"use strict";e.d(I,{n:()=>r});var t=e(96540),n=e(28122);const r=({children:s,renderMenuItems:o,focusOnOpen:m=!0})=>{const[l,i]=(0,t.useState)(!1),[c,u]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:f=>{i(!0),u({x:f.pageX,y:f.pageY})}}),l&&t.createElement(n.t,{onClose:()=>i(!1),x:c.x,y:c.y,renderMenuItems:o,focusOnOpen:m}))}},40276:(Y,I,e)=>{"use strict";e.d(I,{E:()=>l,A:()=>i});var t=e(32196),n=e(96540),r=e(62295),s=e(40845);const o=({children:u})=>{const[f,d]=(0,n.useState)(!1),[E,h]=(0,n.useState)(!1),y=(0,n.useRef)(null),a=(0,n.useRef)(null),v=(0,s.of)(m);return(0,n.useEffect)(()=>{const g=new IntersectionObserver(b=>{b.forEach(P=>{P.target===y.current?d(!P.isIntersecting):P.target===a.current&&h(!P.isIntersecting)})});return[y,a].forEach(b=>{b.current&&g.observe(b.current)}),()=>g.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(v.scrollIndicator,v.scrollTopIndicator,{[v.scrollIndicatorVisible]:f})}),n.createElement("div",{className:v.scrollContent},n.createElement("div",{ref:y}),u,n.createElement("div",{ref:a})),n.createElement("div",{className:(0,t.cx)(v.scrollIndicator,v.scrollBottomIndicator,{[v.scrollIndicatorVisible]:E})}))},m=u=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:u.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:u.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${u.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${u.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1})}),l=({autoHide:u=!1,autoHideTimeout:f=200,setScrollTop:d,className:E,testId:h,autoHeightMin:y="0",autoHeightMax:a="100%",hideTracksWhenNotNeeded:v=!1,hideHorizontalTrack:g,hideVerticalTrack:b,scrollRefCallback:P,showScrollIndicators:C=!1,updateAfterMountMs:D,scrollTop:T,onScroll:M,children:O})=>{const S=(0,n.useRef)(null),p=(0,s.of)(c);(0,n.useEffect)(()=>{S.current&&P&&P(S.current.view)},[S,P]),(0,n.useEffect)(()=>{S.current&&T!=null&&S.current.scrollTop(T)},[T]),(0,n.useEffect)(()=>{D&&setTimeout(()=>{const w=S.current;w?.update&&w.update()},D)},[D]);function x(w,L,V){return V.style&&L&&(V.style.display="none"),n.createElement("div",{...V,className:w})}const A=(0,n.useCallback)(w=>x("track-horizontal",g,w),[g]),R=(0,n.useCallback)(w=>x("track-vertical",b,w),[b]),B=(0,n.useCallback)(w=>n.createElement("div",{...w,className:"thumb-horizontal"}),[]),U=(0,n.useCallback)(w=>n.createElement("div",{...w,className:"thumb-vertical"}),[]),F=(0,n.useCallback)(w=>(w.style&&w.style.WebkitOverflowScrolling==="touch"&&(w.style.WebkitOverflowScrolling="auto"),n.createElement("div",{...w,className:"scrollbar-view"})),[]),K=(0,n.useCallback)(()=>{S.current&&d&&d(S.current.getValues())},[d]);return n.createElement(r.Ay,{"data-testid":h,ref:S,className:(0,t.cx)(p.customScrollbar,E,{[p.scrollbarWithScrollIndicators]:C}),onScrollStop:K,autoHeight:!0,autoHide:u,autoHideTimeout:f,hideTracksWhenNotNeeded:v,autoHeightMax:a,autoHeightMin:y,renderTrackHorizontal:A,renderTrackVertical:R,renderThumbHorizontal:B,renderThumbVertical:U,renderView:F,onScroll:M},C?n.createElement(o,null,O):O)},i=l,c=u=>({customScrollbar:(0,t.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:u.shape.borderRadius(2),width:`${u.spacing(1)} !important`,right:0,bottom:u.spacing(.25),top:u.spacing(.25)},".track-horizontal":{borderRadius:u.shape.borderRadius(2),height:`${u.spacing(1)} !important`,right:u.spacing(.25),bottom:u.spacing(.25),left:u.spacing(.25)},".thumb-vertical":{background:u.colors.action.focus,borderRadius:u.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:u.colors.action.focus,borderRadius:u.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,t.css)({".scrollbar-view":{position:"static !important"}})})},14689:(Y,I,e)=>{"use strict";e.d(I,{R:()=>r});var t=e(96540),n=e(55852);function r({link:s,buttonProps:o}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?m=>{!(m.ctrlKey||m.metaKey||m.shiftKey)&&s.onClick&&(m.preventDefault(),s.onClick(m))}:void 0},t.createElement(n.$n,{icon:s.target==="_blank"?"external-link-alt":void 0,variant:"primary",size:"sm",...o},s.title))}},64078:(Y,I,e)=>{"use strict";e.d(I,{l:()=>O});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(28848),m=e.n(o),l=e(96540),i=e(80292),c=e(52845),u=e(29317),f=e(91890),d=e(6709),E=e(41781),h=e(40845),y=e(72307),a=e(40276),v=e(10354),g=e(17464),b=e(43538);class P{getBoundingClientRect(){const x=window.getSelection(),A=x&&x.anchorNode;return A&&A.parentElement?A.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const C=(p,x)=>p-x*Math.floor(p/x),D={builtInVariable:{pattern:/(\${\S+?})/}},T=[(0,E.D)({onlyIn:p=>"type"in p&&p.type==="code_block",getSyntax:()=>"links"},{...m().languages,links:D})],M=p=>({input:(0,v.n)({theme:p,invalid:!1}).input,editor:(0,t.css)({".token.builtInVariable":{color:p.colors.success.text},".token.variable":{color:p.colors.primary.text}}),suggestionsWrapper:(0,t.css)({boxShadow:p.shadows.z2}),wrapperOverrides:(0,t.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),O=(0,l.memo)(({value:p,onChange:x,suggestions:A,placeholder:R="http://your-grafana.com/d/000000010/annotations"})=>{const B=(0,l.useRef)(null),U=(0,h.of)(M),[F,K]=(0,l.useState)(!1),[w,L]=(0,l.useState)(0),[V,N]=(0,l.useState)((0,y.mO)(p)),z=(0,i.A)(V),[J,G]=(0,l.useState)(0),H=[(0,n.cY)(({rects:te})=>({alignmentAxis:te.reference.width})),(0,r.UU)({fallbackAxisSideDirection:"start",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{refs:q,floatingStyles:le}=(0,s.we)({open:F,placement:"bottom-start",onOpenChange:K,middleware:H,whileElementsMounted:r.ll,strategy:"fixed"}),me=(0,l.useRef)({showingSuggestions:F,suggestions:A,suggestionsIndex:w,linkUrl:V,onChange:x});me.current={showingSuggestions:F,suggestions:A,suggestionsIndex:w,linkUrl:V,onChange:x};const k=(0,l.useRef)(null);(0,l.useEffect)(()=>{G(S(k.current,w))},[w]);const ee=l.useCallback((te,oe)=>{if(!me.current.showingSuggestions){if(te.key==="="||te.key==="$"||te.keyCode===32&&te.ctrlKey){const ie=new P;return q.setReference(ie),K(!0)}return oe()}switch(te.key){case"Backspace":case"Escape":return K(!1),L(0);case"Enter":return te.preventDefault(),j(me.current.suggestions[me.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":te.preventDefault();const ie=te.key==="ArrowDown"?1:-1;return L(ue=>C(ue+ie,me.current.suggestions.length));default:return oe()}},[]);(0,l.useEffect)(()=>{z&&z.selection.isFocused&&!V.selection.isFocused&&me.current.onChange(c.A.serialize(V))},[V,z]);const X=l.useCallback(({value:te})=>{N(te)},[]),j=(te,oe=B.current)=>{const ue=ne()==="$";te.origin!==f.$0.Template||te.value===d.c.includeVars?oe.insertText(`${ue?"":"$"}{${te.value}}`):oe.insertText(`${ue?"":"$"}{${te.value}:queryparam}`),N(oe.value),K(!1),L(0),me.current.onChange(c.A.serialize(oe.value))},ne=()=>{const te=document.getElementById("data-link-input");let oe="",ie,ue;return window.getSelection&&(ie=window.getSelection(),ie&&ie.rangeCount>0&&(ue=ie.getRangeAt(0).cloneRange(),ue.collapse(!0),ue.setStart(te,0),oe=ue.toString().slice(-1))),oe};return l.createElement("div",{className:U.wrapperOverrides},l.createElement("div",{className:"slate-query-field__wrapper"},l.createElement("div",{id:"data-link-input",className:"slate-query-field"},F&&l.createElement(g.ZL,null,l.createElement("div",{ref:q.setFloating,style:le},l.createElement(a.A,{scrollTop:J,autoHeightMax:"300px",setScrollTop:({scrollTop:te})=>G(te)},l.createElement(b.k,{activeRef:k,suggestions:me.current.suggestions,onSuggestionSelect:j,onClose:()=>K(!1),activeIndex:w})))),l.createElement(u.KE,{schema:y.yx,ref:B,placeholder:R,value:me.current.linkUrl,onChange:X,onKeyDown:(te,oe,ie)=>ee(te,ie),plugins:T,className:(0,t.cx)(U.editor,U.input,(0,t.css)({padding:"3px 8px"}))}))))});O.displayName="DataLinkInput";function S(p,x){return(p?.clientHeight??0)*x}},43538:(Y,I,e)=>{"use strict";e.d(I,{k:()=>c});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(37151),m=e(40845),l=e(33552);const i=f=>({list:(0,t.css)({borderBottom:`1px solid ${f.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,t.css)({background:f.colors.background.primary,width:"250px"}),item:(0,t.css)({background:"none",padding:"2px 8px",userSelect:"none",color:f.colors.text.primary,cursor:"pointer","&:hover":{background:f.colors.action.hover}}),label:(0,t.css)({color:f.colors.text.secondary}),activeItem:(0,t.css)({background:f.colors.background.secondary,"&:hover":{background:f.colors.background.secondary}}),itemValue:(0,t.css)({fontFamily:f.typography.fontFamilyMonospace,fontSize:f.typography.size.sm})}),c=({suggestions:f,...d})=>{const E=(0,s.useRef)(null);(0,o.A)(E,()=>{d.onClose&&d.onClose()});const h=(0,s.useMemo)(()=>(0,n.groupBy)(f,a=>a.origin),[f]),y=(0,m.of)(i);return s.createElement("div",{role:"menu",ref:E,className:y.wrapper},Object.keys(h).map((a,v)=>{const g=v===0?0:Object.keys(h).reduce((b,P,C)=>C>=v?b:b+h[P].length,0);return s.createElement(u,{...d,suggestions:h[a],label:`${(0,n.capitalize)(a)}`,activeIndex:d.activeIndex,activeIndexOffset:g,key:a})}))};c.displayName="DataLinkSuggestions";const u=s.memo(({activeIndex:f,activeIndexOffset:d,label:E,onClose:h,onSuggestionSelect:y,suggestions:a,activeRef:v})=>{const g=(0,m.of)(i);return s.createElement(s.Fragment,null,s.createElement(l.B,{className:g.list,items:a,renderItem:(b,P)=>{const C=P+d===f;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(g.item,C&&g.activeItem),ref:C?v:void 0,onClick:()=>{y(b)},title:b.documentation},s.createElement("span",{className:g.itemValue},s.createElement("span",{className:g.label},E)," ",b.label))}}))});u.displayName="DataLinkSuggestionsList"},59796:(Y,I,e)=>{"use strict";e.d(I,{e:()=>i});var t=e(32196),n=e(96540),r=e(13544),s=e(14555),o=e(51686),m=e(59093),l=e(64539);const i=({children:c,links:u,style:f})=>{const d=[{items:(0,s.J)(u),label:"Data links"}],E=d[0].items.length,h=()=>d.map((a,v)=>n.createElement(m.r,{key:`${a.label}${v}`,label:a.label},(a.items||[]).map((g,b)=>n.createElement(l.D,{key:`${a.label}-${v}-${b}}`,url:g.url,label:g.label,target:g.target,icon:g.icon,active:g.active,onClick:g.onClick})))),y=(0,t.css)({cursor:"context-menu"});if(E>1)return n.createElement(o.n,{renderMenuItems:h},({openMenu:a})=>c({openMenu:a,targetClassName:y}));{const a=u()[0];return n.createElement("a",{href:a.href,onClick:a.onClick,target:a.target,title:a.title,style:{...f,overflow:"hidden",display:"flex"},"data-testid":r.Tp.components.DataLinksContextMenu.singleLink},c({}))}}},64919:(Y,I,e)=>{"use strict";e.d(I,{e:()=>b});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(55852),m=e(37390),l=e(14555),i=e(88575),c=e(10354),u=e(15292),f=e(64078);const d=C=>({listItem:(0,t.css)({marginBottom:C.spacing()}),infoText:(0,t.css)({paddingBottom:C.spacing(2),marginLeft:"66px",color:C.colors.text.secondary})}),E=r.memo(({index:C,value:D,onChange:T,suggestions:M,isLast:O})=>{const S=(0,s.of)(d),p=(R,B)=>{T(C,{...D,url:R},B)},x=R=>{T(C,{...D,title:R.target.value})},A=()=>{T(C,{...D,targetBlank:!D.targetBlank})};return r.createElement("div",{className:S.listItem},r.createElement(i.D,{label:"Title"},r.createElement(c.p,{value:D.title,onChange:x,placeholder:"Show details"})),r.createElement(i.D,{label:"URL",invalid:(0,l.F)(D.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},r.createElement(f.l,{value:D.url,onChange:p,suggestions:M})),r.createElement(i.D,{label:"Open in new tab"},r.createElement(u.d,{value:D.targetBlank||!1,onChange:A})),O&&r.createElement("div",{className:S.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});E.displayName="DataLinkEditor";const h=({link:C,index:D,getSuggestions:T,onSave:M,onCancel:O})=>{const[S,p]=(0,r.useState)(C);return r.createElement(r.Fragment,null,r.createElement(E,{value:S,index:D,isLast:!1,suggestions:T(),onChange:(x,A)=>{p(A)}}),r.createElement(m.a.ButtonRow,null,r.createElement(o.$n,{variant:"secondary",onClick:()=>O(D),fill:"outline"},"Cancel"),r.createElement(o.$n,{onClick:()=>{M(D,S)}},"Save")))};var y=e(72093),a=e(29158);const v=({link:C,onEdit:D,onRemove:T})=>{const M=(0,s.of)(g),{title:O="",url:S=""}=C,p=O.trim()!=="",x=S.trim()!=="",A=(0,l.F)(S);return r.createElement("div",{className:M.wrapper},r.createElement("div",{className:M.titleWrapper},r.createElement("div",{className:(0,t.cx)(M.url,!x&&M.notConfigured,A&&M.errored)},p?O:"Data link title not provided"),r.createElement("div",{className:M.actionButtons},r.createElement(a.K,{name:"pen",onClick:D,tooltip:"Edit data link title"}),r.createElement(a.K,{name:"times",onClick:T,tooltip:"Remove data link title"}))),r.createElement("div",{className:(0,t.cx)(M.url,!x&&M.notConfigured,A&&M.errored),title:S},x?S:"Data link url not provided"),A&&r.createElement(y.P,null,"Explore data link may not work in the future. Please edit."))},g=C=>({wrapper:(0,t.css)({marginBottom:C.spacing(2),width:"100%","&:last-child":{marginBottom:0},display:"flex",flexDirection:"column"}),titleWrapper:(0,t.css)({label:"data-links-list-item-title",justifyContent:"space-between",display:"flex",width:"100%",alignItems:"center"}),actionButtons:(0,t.css)({marginLeft:C.spacing(1),display:"flex"}),errored:(0,t.css)({color:C.colors.error.text,fontStyle:"italic"}),notConfigured:(0,t.css)({fontStyle:"italic"}),title:(0,t.css)({color:C.colors.text.primary,fontSize:C.typography.size.sm,fontWeight:C.typography.fontWeightMedium}),url:(0,t.css)({color:C.colors.text.secondary,fontSize:C.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"})}),b=({links:C,onChange:D,getSuggestions:T,data:M})=>{const[O,S]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),A=(0,s.of)(P),R=C??[],B=O!==null,U=(L,V)=>{if(p)if(V.title.trim()===""&&V.url.trim()===""){x(!1),S(null);return}else S(null),x(!1);const N=(0,n.cloneDeep)(R);N[L]=V,D(N),S(null)},F=()=>{let L=(0,n.cloneDeep)(R);S(L.length),x(!0)},K=L=>{p&&x(!1),S(null)},w=L=>{const V=(0,n.cloneDeep)(R);V.splice(L,1),D(V)};return r.createElement(r.Fragment,null,R.length>0&&r.createElement("div",{className:A.wrapper},R.map((L,V)=>r.createElement(v,{key:`${L.title}/${V}`,index:V,link:L,onChange:U,onEdit:()=>S(V),onRemove:()=>w(V),data:M}))),B&&O!==null&&r.createElement(m.a,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{K(O)}},r.createElement(h,{index:O,link:p?{title:"",url:""}:R[O],data:M,onSave:U,onCancel:K,getSuggestions:T})),r.createElement(o.$n,{size:"sm",icon:"plus",onClick:F,variant:"secondary"},"Add link"))},P=C=>({wrapper:(0,t.css)({marginBottom:C.spacing(2)})})},79961:(Y,I,e)=>{"use strict";e.d(I,{n:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(14578),o=e(14689);function m({links:i}){const c=(0,r.of)(l);if(i.length===1)return n.createElement(o.R,{link:i[0]});const u=i.filter(d=>d.target==="_blank"),f=i.filter(d=>d.target==="_self");return n.createElement(n.Fragment,null,f.map((d,E)=>n.createElement(o.R,{key:E,link:d})),n.createElement("div",{className:c.wrapper},n.createElement("p",{className:c.externalLinksHeading},"External links"),u.map((d,E)=>n.createElement("a",{key:E,href:d.href,target:d.target,className:c.externalLink},n.createElement(s.I,{name:"external-link-alt"}),d.title))))}const l=i=>({wrapper:(0,t.css)({flexBasis:"150px",width:"100px",marginTop:i.spacing(1)}),externalLinksHeading:(0,t.css)({color:i.colors.text.secondary,fontWeight:i.typography.fontWeightRegular,fontSize:i.typography.size.sm,margin:0}),externalLink:(0,t.css)({color:i.colors.text.link,fontWeight:i.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:i.spacing(1)}})})},19849:(Y,I,e)=>{"use strict";e.d(I,{i:()=>s});var t=e(96540),n=e(15292),r=e(14186);function s({options:o,onOptionsChange:m}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(r.I,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:o.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},t.createElement(n.K,{value:o.jsonData.manageAlerts!==!1,onChange:l=>m({...o,jsonData:{...o.jsonData,manageAlerts:l.currentTarget.checked}})}))))))}},28623:(Y,I,e)=>{"use strict";e.d(I,{K:()=>l});var t=e(96540),n=e(55852),r=e(14186),s=e(39268),o=e(10354),m=e(21744);const l=({hasCert:i,label:c,onChange:u,onClick:f,placeholder:d})=>t.createElement(s.C,null,t.createElement(r.I,{label:c,labelWidth:14,disabled:i},i?t.createElement(o.p,{type:"text",value:"configured",width:24}):t.createElement(m.f,{rows:7,onChange:u,placeholder:d,required:!0})),i&&t.createElement(n.$n,{variant:"secondary",onClick:f,style:{marginLeft:4}},"Reset"))},11184:(Y,I,e)=>{"use strict";e.d(I,{P:()=>d});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(55852),l=e(90090),i=e(14578),c=e(56286);const u=()=>({layout:(0,t.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})}),f=({header:h,onBlur:y,onChange:a,onRemove:v,onReset:g})=>{const b=(0,o.of)(u);return s.createElement("div",{className:b.layout},s.createElement(l.z,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:h.name||"",onChange:P=>a({...h,name:P.target.value}),onBlur:y}),s.createElement(c.L,{label:"Value","aria-label":"Value",name:"value",isConfigured:h.configured,value:h.value,labelWidth:5,inputWidth:h.configured?11:12,placeholder:"Header Value",onReset:()=>g(h.id),onChange:P=>a({...h,value:P.target.value}),onBlur:y}),s.createElement(m.$n,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:P=>v(h.id)},s.createElement(i.I,{name:"trash-alt"})))};f.displayName="CustomHeaderRow";class d extends s.PureComponent{constructor(y){super(y),this.state={headers:[]},this.updateSettings=()=>{const{headers:b}=this.state,P=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([D,T])=>!D.startsWith("httpHeaderName"))),C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([D,T])=>!D.startsWith("httpHeaderValue")));for(const[D,T]of b.entries())P[`httpHeaderName${D+1}`]=T.name,T.configured||(C[`httpHeaderValue${D+1}`]=T.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:P,secureJsonData:C})},this.onHeaderAdd=()=>{this.setState(b=>({headers:[...b.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(b,P)=>{this.setState(({headers:C})=>({headers:C.map((D,T)=>b!==T?D:{...P})}))},this.onHeaderReset=b=>{this.setState(({headers:P})=>({headers:P.map((C,D)=>C.id!==b?C:{...C,value:"",configured:!1})}))},this.onHeaderRemove=b=>{this.setState(({headers:P})=>({headers:P.filter(C=>C.id!==b)}),this.updateSettings)};const{jsonData:a,secureJsonData:v,secureJsonFields:g}=this.props.dataSourceConfig;this.state={headers:Object.keys(a).sort().filter(b=>b.startsWith("httpHeaderName")).map((b,P)=>({id:(0,n.uniqueId)(),name:a[b],value:v!==void 0?v[b]:"",configured:g&&g[`httpHeaderValue${P+1}`]||!1}))}}render(){const{headers:y}=this.state,{dataSourceConfig:a}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,y.map((v,g)=>s.createElement(f,{key:v.id,header:v,onChange:b=>{this.onHeaderChange(g,b)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!a.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(m.$n,{variant:"secondary",icon:"plus",type:"button",onClick:v=>{this.onHeaderAdd()}},"Add header")))}}var E=null},91409:(Y,I,e)=>{"use strict";e.d(I,{t:()=>M});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(90090),m=e(38894),l=e(14186),i=e(91634),c=e(14578),u=e(88323),f=e(15292),d=e(79924),E=e(56286);const h=({dataSourceConfig:O,onChange:S})=>{const p=O.secureJsonData?O.secureJsonData.basicAuthPassword:"",x=()=>{S({...O,secureJsonData:{...O.secureJsonData,basicAuthPassword:""},secureJsonFields:{...O.secureJsonFields,basicAuthPassword:!1}})},A=R=>{S({...O,secureJsonData:{...O.secureJsonData,basicAuthPassword:R.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(l.I,{disabled:O.readOnly},n.createElement(o.z,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:O.basicAuthUser,onChange:R=>S({...O,basicAuthUser:R.currentTarget.value})})),n.createElement(l.I,{disabled:O.readOnly},n.createElement(E.L,{isConfigured:!!(O.secureJsonFields&&O.secureJsonFields.basicAuthPassword),value:p||"",inputWidth:18,labelWidth:10,onReset:x,onChange:A})))};var y=e(11184);const a=26,v=({dataSourceConfig:O,onChange:S,showForwardOAuthIdentityOption:p=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(l.I,{label:"TLS Client Auth",labelWidth:a,disabled:O.readOnly},n.createElement(f.K,{id:"http-settings-tls-client-auth",value:O.jsonData.tlsAuth||!1,onChange:x=>S({...O.jsonData,tlsAuth:x.currentTarget.checked})})),n.createElement(l.I,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:a,disabled:O.readOnly},n.createElement(f.K,{id:"http-settings-ca-cert",value:O.jsonData.tlsAuthWithCACert||!1,onChange:x=>S({...O.jsonData,tlsAuthWithCACert:x.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(l.I,{label:"Skip TLS Verify",labelWidth:a,disabled:O.readOnly},n.createElement(f.K,{id:"http-settings-skip-tls-verify",value:O.jsonData.tlsSkipVerify||!1,onChange:x=>S({...O.jsonData,tlsSkipVerify:x.currentTarget.checked})}))),p&&n.createElement("div",{className:"gf-form-inline"},n.createElement(l.I,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:a,disabled:O.readOnly},n.createElement(f.K,{id:"http-settings-forward-oauth",value:O.jsonData.oauthPassThru||!1,onChange:x=>S({...O.jsonData,oauthPassThru:x.currentTarget.checked})}))));var g=e(17081),b=e(95180);const P=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],C={label:"Server (default)",value:"proxy"},D=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),T=26,M=O=>{const{defaultUrl:S,dataSourceConfig:p,onChange:x,showAccessOptions:A,sigV4AuthToggleEnabled:R,showForwardOAuthIdentityOption:B,azureAuthSettings:U,renderSigV4Editor:F,secureSocksDSProxyEnabled:K,urlLabel:w,urlDocs:L}=O,[V,N]=(0,n.useState)(!1),[z,J]=(0,n.useState)(!1),G=(0,s.$j)();let H;const q=(0,n.useCallback)(ne=>{const te=U?.azureAuthSupported&&U.getAzureAuthEnabled(p)||!1;if(J(te),te){const oe=p.jsonData.oauthPassThru!==void 0?p.jsonData.oauthPassThru:!1;ne={...ne,jsonData:{...p.jsonData,oauthPassThru:te?!1:oe}}}x({...p,...ne})},[U,p,x]);switch(p.access){case"direct":H=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",L);break;case"proxy":H=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",L);break;default:H=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",L)}const le=n.createElement(u.l6,{"aria-label":"Access",className:"width-20 gf-form-input",options:P,value:P.filter(ne=>ne.value===p.access)[0]||C,onChange:ne=>q({access:ne.value}),disabled:p.readOnly}),me=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(p.url),k=(0,t.css)({boxShadow:`inset 0 0px 5px ${G.v1.palette.red}`}),ee=(0,t.cx)({"width-20":!0,[k]:!me}),X=(0,n.useId)(),j=n.createElement(i.p,{id:X,className:ee,placeholder:S,value:p.url,"data-testid":r.Tp.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ne=>q({url:ne.currentTarget.value}),disabled:p.readOnly});return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(o.z,{interactive:!!L,label:w??"URL",labelWidth:13,tooltip:H,inputEl:j})),A&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(o.z,{label:"Access",labelWidth:13,inputWidth:20,inputEl:le})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>N(ne=>!ne)},"Help\xA0",n.createElement(c.I,{name:V?"angle-down":"angle-right",style:{marginBottom:0}})))),V&&n.createElement(D,null)),p.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(m.I,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(d.u,{tags:p.jsonData.keepCookies,width:40,onChange:ne=>q({jsonData:{...p.jsonData,keepCookies:ne}}),disabled:p.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(o.z,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:p.jsonData.timeout,onChange:ne=>{q({jsonData:{...p.jsonData,timeout:parseInt(ne.currentTarget.value,10)}})},disabled:p.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(l.I,{label:"Basic auth",labelWidth:T,disabled:p.readOnly},n.createElement(f.K,{id:"http-settings-basic-auth",value:p.basicAuth,onChange:ne=>{q({basicAuth:ne.currentTarget.checked})}})),n.createElement(l.I,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:T,disabled:p.readOnly},n.createElement(f.K,{id:"http-settings-with-credentials",value:p.withCredentials,onChange:ne=>{q({withCredentials:ne.currentTarget.checked})}}))),U?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(l.I,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:T,disabled:p.readOnly},n.createElement(f.K,{id:"http-settings-azure-auth",value:z,onChange:ne=>{q(U.setAzureAuthEnabled(p,ne.currentTarget.checked))}}))),R&&n.createElement("div",{className:"gf-form-inline"},n.createElement(l.I,{label:"SigV4 auth",labelWidth:T,disabled:p.readOnly},n.createElement(f.K,{id:"http-settings-sigv4-auth",value:p.jsonData.sigV4Auth||!1,onChange:ne=>{q({jsonData:{...p.jsonData,sigV4Auth:ne.currentTarget.checked}})}}))),p.access==="proxy"&&n.createElement(v,{dataSourceConfig:p,onChange:ne=>q({jsonData:ne}),showForwardOAuthIdentityOption:z?!1:B})),p.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(h,{...O}))),U?.azureAuthSupported&&z&&U.azureSettingsUI&&n.createElement(U.azureSettingsUI,{dataSourceConfig:p,onChange:x}),p.jsonData.sigV4Auth&&R&&F,(p.jsonData.tlsAuth||p.jsonData.tlsAuthWithCACert)&&n.createElement(b.j,{dataSourceConfig:p,onChange:x}),p.access==="proxy"&&n.createElement(y.P,{dataSourceConfig:p,onChange:x})),K&&n.createElement(g.Y,{options:p,onOptionsChange:x}))}},17081:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>s});var t=e(96540),n=e(15292),r=e(14186);function s({options:o,onOptionsChange:m}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(r.I,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.K,{value:o.jsonData.enableSecureSocksProxy??!1,onChange:l=>m({...o,jsonData:{...o.jsonData,enableSecureSocksProxy:l.currentTarget.checked}})}))))))}},95180:(Y,I,e)=>{"use strict";e.d(I,{j:()=>l});var t=e(32196),n=e(96540),r=e(90090),s=e(14578),o=e(56034),m=e(28623);const l=({dataSourceConfig:i,onChange:c})=>{const u=i.secureJsonFields&&i.secureJsonFields.tlsCACert,f=i.secureJsonFields&&i.secureJsonFields.tlsClientCert,d=i.secureJsonFields&&i.secureJsonFields.tlsClientKey,E=i.jsonData&&i.jsonData.serverName,h=v=>g=>{g.preventDefault();const b={...i.secureJsonFields};b[v]=!1,c({...i,secureJsonFields:b})},y=v=>g=>{const b={...i.secureJsonData};b[v]=g.currentTarget.value,c({...i,secureJsonData:b})},a=v=>{const g={...i.jsonData,serverName:v.currentTarget.value};c({...i,jsonData:g})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",(0,t.css)({alignItems:"baseline"}))},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(o.m,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement(s.I,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}}))),n.createElement("div",null,i.jsonData.tlsAuthWithCACert&&n.createElement(m.K,{hasCert:!!u,onChange:y("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:h("tlsCACert")}),i.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(r.z,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:E&&i.jsonData.serverName,onChange:a})),n.createElement(m.K,{hasCert:!!f,label:"Client Cert",onChange:y("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:h("tlsClientCert")}),n.createElement(m.K,{hasCert:!!d,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:y("tlsClientKey"),onClick:h("tlsClientKey")}))))}},56181:(Y,I,e)=>{"use strict";e.d(I,{l:()=>i});var t=e(32196),n=e(96540),r=e(29426),s=e(40845),o=e(8866),m=e(14578),l=e(72265);const i=(0,n.memo)(f=>{const d=(0,s.of)(u),{isOpen:E,onClose:h}=f;return E?n.createElement(o.N,{useCapture:!0,includeButtonPress:!1,onClick:h},n.createElement("div",{className:d.modal,"data-testid":"date-picker"},n.createElement(c,{...f}))):null});i.displayName="DatePicker";const c=(0,n.memo)(({value:f,minDate:d,maxDate:E,onChange:h})=>{const y=(0,s.of)(l.h2);return n.createElement(r.Ay,{className:y.body,tileClassName:y.title,value:f||new Date,minDate:d,maxDate:E,nextLabel:n.createElement(m.I,{name:"angle-right"}),prevLabel:n.createElement(m.I,{name:"angle-left"}),onChange:a=>{a&&!Array.isArray(a)&&h(a)},locale:"en"})});c.displayName="Body";const u=f=>({modal:(0,t.css)({zIndex:f.zIndex.modal,boxShadow:f.shadows.z3,backgroundColor:f.colors.background.primary,border:`1px solid ${f.colors.border.weak}`,borderTopLeftRadius:f.shape.radius.default,borderBottomLeftRadius:f.shape.radius.default,"button:disabled":{color:f.colors.text.disabled}})})},98239:(Y,I,e)=>{"use strict";e.d(I,{l:()=>u});var t=e(32196),n=e(18491),r=e(36376),s=e(96540),o=e(47232),m=e(40845),l=e(10354),i=e(56181);const c=d=>(0,o.KQ)(d).format("L"),u=({value:d,minDate:E,maxDate:h,onChange:y,closeOnSelect:a,placeholder:v="Date",...g})=>{const[b,P]=(0,s.useState)(!1),C=(0,m.of)(f),D=[(0,n.UU)({crossAxis:!1,boundary:document.body}),(0,n.BN)()],{context:T,refs:M,floatingStyles:O}=(0,r.we)({open:b,placement:"bottom-start",onOpenChange:P,middleware:D,whileElementsMounted:n.ll,strategy:"fixed"}),S=(0,r.kp)(T),p=(0,r.s9)(T),{getReferenceProps:x,getFloatingProps:A}=(0,r.bv)([p,S]);return s.createElement("div",{className:C.container},s.createElement(l.p,{ref:M.setReference,type:"text",autoComplete:"off",placeholder:v,value:d&&c(d),onChange:R=>{R.target.value===""&&y("")},className:C.input,...g,...x()}),s.createElement("div",{className:C.popover,ref:M.setFloating,style:O,...A()},s.createElement(i.l,{isOpen:b,value:d&&typeof d!="string"?d:(0,o.KQ)().toDate(),minDate:E,maxDate:h,onChange:R=>{y(R),a&&P(!1)},onClose:()=>P(!1)})))},f=d=>({container:(0,t.css)({position:"relative"}),input:(0,t.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}}),popover:(0,t.css)({zIndex:d.zIndex.tooltip})})},63383:(Y,I,e)=>{"use strict";e.d(I,{K:()=>S});var t=e(32196),n=e(18491),r=e(36376),s=e(80279),o=e(7887),m=e(87073),l=e(96540),i=e(29426),c=e(49045),u=e(72724),f=e(47232),d=e(1933),E=e(13390),h=e(40845),y=e(55852),a=e(14186),v=e(14578),g=e(10354),b=e(66864),P=e(88448),C=e(17464),D=e(66070),T=e(72265),M=e(47619),O=e(99225);const S=({date:R,maxDate:B,minDate:U,label:F,onChange:K,disabledHours:w,disabledMinutes:L,disabledSeconds:V,showSeconds:N=!0})=>{const[z,J]=(0,l.useState)(!1),G=(0,l.useRef)(null),{overlayProps:H,underlayProps:q}=(0,m.e)({onClose:()=>J(!1),isDismissable:!0,isOpen:z,shouldCloseOnInteractOutside:ue=>{const be=document.getElementsByClassName(D.i)[0];return!(be&&be.contains(ue))}},G),{dialogProps:le}=(0,s.s)({},G),me=(0,h.$j)(),{modalBackdrop:k}=(0,h.of)(P.o),ee=(0,c.A)(`(min-width: ${me.breakpoints.values.lg}px)`),X=(0,h.of)(A),j=[(0,n.UU)({crossAxis:!1,boundary:document.body}),(0,n.BN)()],{refs:ne,floatingStyles:te}=(0,r.we)({open:z,placement:"bottom-start",onOpenChange:J,middleware:j,whileElementsMounted:n.ll,strategy:"fixed"}),oe=(0,l.useCallback)(ue=>{J(!1),K(ue)},[K]),ie=(0,l.useCallback)(ue=>{ue.preventDefault(),J(!0)},[J]);return l.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},l.createElement(p,{date:R,onChange:K,isFullscreen:ee,onOpen:ie,label:F,ref:ne.setReference,showSeconds:N}),z?ee?l.createElement(C.ZL,null,l.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("div",{ref:G,...H,...le},l.createElement(x,{date:R,onChange:oe,isFullscreen:!0,onClose:()=>J(!1),maxDate:B,minDate:U,ref:ne.setFloating,style:te,showSeconds:N,disabledHours:w,disabledMinutes:L,disabledSeconds:V})))):l.createElement(C.ZL,null,l.createElement("div",{className:k,...q}),l.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("div",{ref:G,...H,...le},l.createElement("div",{className:X.modal},l.createElement(x,{date:R,maxDate:B,minDate:U,onChange:oe,isFullscreen:!1,onClose:()=>J(!1),showSeconds:N,disabledHours:w,disabledMinutes:L,disabledSeconds:V}))))):null)},p=l.forwardRef(({date:R,label:B,onChange:U,onOpen:F,showSeconds:K=!0},w)=>{const L=K?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[V,N]=(0,l.useState)(()=>({value:R?(0,u.LE)(R):(0,u.LE)((0,f.KQ)()),invalid:!1}));(0,l.useEffect)(()=>{R&&N({invalid:!(0,M.f)((0,u.LE)(R,{format:L})),value:(0,f.Ar)(R)?(0,u.LE)(R,{format:L}):R})},[R,L]);const z=(0,l.useCallback)(H=>{const q=!(0,M.f)(H.currentTarget.value);N({value:H.currentTarget.value,invalid:q})},[]),J=(0,l.useCallback)(()=>{if(!V.invalid){const H=(0,f.oZ)((0,d.O)(),V.value);U(H)}},[V,U]),G=l.createElement(y.$n,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:F});return l.createElement(a.I,{label:B,invalid:!!(V.value&&V.invalid),className:(0,t.css)({marginBottom:0})},l.createElement(g.p,{onChange:z,addonAfter:G,value:V.value,onBlur:J,"data-testid":E.X.DateTimePicker.input,placeholder:"Select date/time",ref:w}))});p.displayName="DateTimeInput";const x=l.forwardRef(({date:R,onClose:B,onChange:U,isFullscreen:F,maxDate:K,minDate:w,style:L,showSeconds:V=!0,disabledHours:N,disabledMinutes:z,disabledSeconds:J},G)=>{const H=(0,h.of)(T.h2),q=(0,h.of)(A),[le,me]=(0,l.useState)(()=>R&&R.isValid()?(0,f.oZ)((0,d.O)(),R):(0,f.oZ)((0,d.O)(),new Date)),[k,ee]=(0,l.useState)(()=>R&&R.isValid()?(0,O.Q)(R.toDate(),(0,d.O)()):new Date),X=(0,l.useCallback)(te=>{te&&!Array.isArray(te)&&ee(te)},[]),j=(0,l.useCallback)(te=>{me(te)},[]),ne=()=>{const te=(0,f.KQ)(le);te.set("date",k.getDate()),te.set("month",k.getMonth()),te.set("year",k.getFullYear()),U(te)};return l.createElement("div",{className:(0,t.cx)(q.container,{[q.fullScreen]:F}),style:L,ref:G},l.createElement(i.Ay,{next2Label:null,prev2Label:null,value:k,nextLabel:l.createElement(v.I,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:l.createElement(v.I,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:X,locale:"en",className:H.body,tileClassName:H.title,maxDate:K,minDate:w}),l.createElement("div",{className:q.time},l.createElement(D.R,{showSeconds:V,onChange:j,value:le,disabledHours:N,disabledMinutes:z,disabledSeconds:J})),l.createElement(b.Gy,null,l.createElement(y.$n,{type:"button",onClick:ne},"Apply"),l.createElement(y.$n,{variant:"secondary",type:"button",onClick:B},"Cancel")))});x.displayName="DateTimeCalendar";const A=R=>({container:(0,t.css)({padding:R.spacing(1),border:`1px ${R.colors.border.weak} solid`,borderRadius:R.shape.radius.default,backgroundColor:R.colors.background.primary,zIndex:R.zIndex.modal}),fullScreen:(0,t.css)({position:"absolute"}),time:(0,t.css)({marginBottom:R.spacing(2)}),modal:(0,t.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:R.zIndex.modal,maxWidth:"280px"})})},5308:(Y,I,e)=>{"use strict";e.d(I,{N:()=>x});var t=e(32196),n=e(18491),r=e(36376),s=e(80279),o=e(7887),m=e(87073),l=e(96540),i=e(40845),c=e(76412),u=e(55852),f=e(40276),d=e(88575),E=e(14578),h=e(10354),y=e(56034),a=e(42617),v=e(65172),g=e(32432);const b=/^now$|^now\-(\d{1,10})([wdhms])$/,P=F=>({from:M(F.from),to:M(F.to)}),C=F=>{const K=S(F.from),w=S(F.to);return{from:K,to:w,display:`${K} to ${w}`}},D=(F,K=Date.now())=>T(F)?M(F)>Math.ceil(K/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},T=F=>b.test(F),M=F=>{const K=b.exec(F);if(!K||K.length!==3)return 0;const[,w,L]=K,V=parseInt(w,10);return isNaN(V)?0:V*O[L]},O={w:604800,d:86400,h:3600,m:60,s:1},S=F=>F<=0?"now":F>=O.w&&F%O.w===0?`now-${F/O.w}w`:F>=O.d&&F%O.d===0?`now-${F/O.d}d`:F>=O.h&&F%O.h===0?`now-${F/O.h}h`:F>=O.m&&F%O.m===0?`now-${F/O.m}m`:`now-${F}s`,p=g.o.filter(F=>T(F.from));function x(F){const{timeRange:K,onChange:w}=F,[L,V]=(0,l.useState)(!1),N=(0,l.useCallback)(()=>V(!1),[]),z=C(K),[J,G]=(0,l.useState)({value:z.from,validation:D(z.from)}),[H,q]=(0,l.useState)({value:z.to,validation:D(z.to)}),le=(0,l.useRef)(null),{overlayProps:me,underlayProps:k}=(0,m.e)({onClose:()=>V(!1),isDismissable:!0,isOpen:L},le),{dialogProps:ee}=(0,s.s)({},le),X=[(0,n.UU)({crossAxis:!1,boundary:document.body}),(0,n.BN)()],{context:j,refs:ne,floatingStyles:te}=(0,r.we)({open:L,placement:"bottom-start",onOpenChange:V,middleware:X,whileElementsMounted:n.ll,strategy:"fixed"}),oe=(0,r.kp)(j),ie=(0,r.s9)(j),{getReferenceProps:ue,getFloatingProps:be}=(0,r.bv)([ie,oe]),ge=(0,i.of)(B(J.validation.errorMessage,H.validation.errorMessage)),re=ve=>{const Me=P(ve);Me&&(N(),G({...J,value:ve.from}),q({...H,value:ve.to}),w(Me))},ye=(0,l.useCallback)(ve=>{ve.stopPropagation(),ve.preventDefault(),V(!L)},[L]),Be=ve=>{if(ve.preventDefault(),!H.validation.isValid||!J.validation.isValid)return;const Me=P({from:J.value,to:H.value,display:""});Me&&(w(Me),V(!1))};return l.createElement("div",{className:ge.container},l.createElement("button",{ref:ne.setReference,className:ge.pickerInput,type:"button",onClick:ye,...ue()},l.createElement("span",{className:ge.clockIcon},l.createElement(E.I,{name:"clock-nine"})),l.createElement("span",null,z.from," to ",z.to),l.createElement("span",{className:ge.caretIcon},l.createElement(E.I,{name:L?"angle-up":"angle-down",size:"lg"}))),L&&l.createElement("div",null,l.createElement("div",{role:"presentation",className:ge.backdrop,...k}),l.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},l.createElement("div",{ref:le,...me,...ee},l.createElement("div",{className:ge.content,ref:ne.setFloating,style:te,...be()},l.createElement("div",{className:ge.body},l.createElement(f.A,{className:ge.leftSide,hideHorizontalTrack:!0},l.createElement(v.l,{title:(0,c.t)("time-picker.time-range.example-title","Example time ranges"),options:p,onChange:re,value:z})),l.createElement("div",{className:ge.rightSide},l.createElement("div",{className:ge.title},l.createElement(a.e,null,l.createElement(y.m,{content:l.createElement(A,null),placement:"bottom",theme:"info"},l.createElement("div",null,l.createElement(c.x,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",l.createElement(E.I,{name:"info-circle"})))))),l.createElement(d.D,{label:"From",invalid:!J.validation.isValid,error:J.validation.errorMessage},l.createElement(h.p,{onClick:ve=>ve.stopPropagation(),onBlur:()=>G({...J,validation:D(J.value)}),onChange:ve=>G({...J,value:ve.currentTarget.value}),value:J.value})),l.createElement(d.D,{label:"To",invalid:!H.validation.isValid,error:H.validation.errorMessage},l.createElement(h.p,{onClick:ve=>ve.stopPropagation(),onBlur:()=>q({...H,validation:D(H.value)}),onChange:ve=>q({...H,value:ve.currentTarget.value}),value:H.value})),l.createElement(u.$n,{"aria-label":"TimePicker submit button",onClick:Be},"Apply time range"))))))))}const A=()=>{const F=(0,i.of)(R);return l.createElement(l.Fragment,null,l.createElement("div",{className:F.supported},"Supported formats: ",l.createElement("code",{className:F.tooltip},"now-[digit]s/m/h/d/w")),l.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),l.createElement("code",{className:F.tooltip},"From: now-10m To: now"),l.createElement("div",{className:F.link},"For more information see"," ",l.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",l.createElement(E.I,{name:"external-link-alt"})),"."))},R=F=>({supported:(0,t.css)({marginBottom:F.spacing(1)}),tooltip:(0,t.css)({margin:0}),link:(0,t.css)({marginTop:F.spacing(1)})}),B=(F,K)=>w=>{const L=(0,h.n)({theme:w,invalid:!1}),N=250+U(w,F)+U(w,K);return{backdrop:(0,t.css)({position:"fixed",zIndex:w.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,t.css)({display:"flex",position:"relative"}),pickerInput:(0,t.cx)(L.input,L.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${w.spacing.gridSize*w.components.height.md-2}px`})),caretIcon:(0,t.cx)(L.suffix,(0,t.css)({position:"relative",marginLeft:w.spacing(.5)})),clockIcon:(0,t.cx)(L.prefix,(0,t.css)({position:"relative",marginRight:w.spacing(.5)})),content:(0,t.css)({background:w.colors.background.primary,boxShadow:w.shadows.z3,position:"absolute",zIndex:w.zIndex.modal,width:"500px",top:"100%",borderRadius:w.shape.radius.default,border:`1px solid ${w.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,t.css)({display:"flex",height:`${N}px`}),description:(0,t.css)({color:w.colors.text.secondary,fontSize:w.typography.size.sm}),leftSide:(0,t.css)({width:"50% !important",borderRight:`1px solid ${w.colors.border.medium}`}),rightSide:(0,t.css)({width:"50%",padding:w.spacing(1)}),title:(0,t.css)({marginBottom:w.spacing(1)})}};function U(F,K){return K?K.length>34?F.spacing.gridSize*6.5:F.spacing.gridSize*4:0}},66070:(Y,I,e)=>{"use strict";e.d(I,{R:()=>u,i:()=>c});var t=e(32196),n=e(79770),r=e(96540),s=e(47232),o=e(40845),m=e(16797),l=e(87266),i=e(14578);const c="time-of-day-picker-panel",u=({minuteStep:E=1,showHour:h=!0,showSeconds:y=!1,onChange:a,value:v,size:g="auto",disabled:b,disabledHours:P,disabledMinutes:C,disabledSeconds:D})=>{const T=(0,o.of)(d);return r.createElement(n.A,{className:(0,t.cx)((0,l.lH)()[g],T.input),popupClassName:(0,t.cx)(T.picker,c),defaultValue:(0,s.AN)(),onChange:M=>{if((0,s.u8)(M))return a((0,s.KQ)(M))},allowEmpty:!1,showSecond:y,value:(0,s.AN)(v),showHour:h,minuteStep:E,inputIcon:r.createElement(f,{wrapperStyle:T.caretWrapper}),disabled:b,disabledHours:P,disabledMinutes:C,disabledSeconds:D})},f=({wrapperStyle:E=""})=>r.createElement("div",{className:E},r.createElement(i.I,{name:"angle-down"})),d=E=>{const h=E.components.input.background,y=E.v1.palette.black,a=E.colors.background.secondary,v=E.shape.radius.default,g=E.components.input.borderColor;return{caretWrapper:(0,t.css)({position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"inline-block",textAlign:"right",color:E.colors.text.secondary}),picker:(0,t.css)({".rc-time-picker-panel-select":{fontSize:"14px",backgroundColor:h,color:E.colors.text.secondary,borderColor:g,li:{outlineWidth:"2px","&.rc-time-picker-panel-select-option-selected":{backgroundColor:"inherit",border:`1px solid ${E.v1.palette.orange}`,borderRadius:v,color:E.colors.text.primary},"&:hover":{background:a,color:E.colors.text.primary},"&.rc-time-picker-panel-select-option-disabled":{color:E.colors.action.disabledText}}},".rc-time-picker-panel-inner":{boxShadow:`0px 4px 4px ${y}`,backgroundColor:h,borderColor:g,borderRadius:v,marginTop:"3px",".rc-time-picker-panel-input-wrap":{marginRight:"2px","&, .rc-time-picker-panel-input":{backgroundColor:h,paddingTop:"2px"}},".rc-time-picker-panel-combobox":{display:"flex"}}}),input:(0,t.css)({".rc-time-picker-input":{backgroundColor:h,borderRadius:v,borderColor:g,color:E.colors.text.primary,height:E.spacing(4),"&:focus":(0,m.getFocusStyles)(E),"&:disabled":{backgroundColor:E.colors.action.disabledBackground,color:E.colors.action.disabledText,border:`1px solid ${E.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}}})}}},54230:(Y,I,e)=>{"use strict";e.d(I,{b:()=>y});var t=e(32196),n=e(96540),r=e(47232),s=e(43127),o=e(13544),m=e(40845),l=e(8866),i=e(14578),c=e(10354),u=e(85068),f=e(3799),d=e(32432),E=e(47619);const h=()=>{},y=({value:v,onChange:g,onChangeTimeZone:b=h,clearable:P,hideTimeZone:C=!0,timeZone:D="browser",placeholder:T="Select time range",isReversed:M=!0,hideQuickRanges:O=!1,disabled:S=!1,showIcon:p=!1})=>{const[x,A]=(0,n.useState)(!1),R=(0,m.of)(a,S),B=w=>{w.stopPropagation(),w.preventDefault(),!S&&A(!x)},U=()=>{A(!1)},F=w=>{U(),g(w)},K=w=>{w.stopPropagation();const L=(0,r.KQ)(null),V=(0,r.KQ)(null);g({from:L,to:V,raw:{from:L,to:V}})};return n.createElement("div",{className:R.container},n.createElement("button",{type:"button",className:R.pickerInput,"data-testid":o.Tp.components.TimePicker.openButton,onClick:B},p&&n.createElement(i.I,{name:"clock-nine",size:"sm",className:R.icon}),n.createElement(f.f,{value:v,timeZone:D,placeholder:T}),!S&&n.createElement("span",{className:R.caretIcon},(0,E.X)(v)&&P&&n.createElement(i.I,{className:R.clearIcon,name:"times",size:"lg",onClick:K}),n.createElement(i.I,{name:x?"angle-up":"angle-down",size:"lg"}))),x&&n.createElement(l.N,{includeButtonPress:!1,onClick:U},n.createElement(u.r,{timeZone:D,value:(0,E.X)(v)?v:(0,s.E2)(),onChange:F,quickOptions:d.o,onChangeTimeZone:b,className:R.content,hideTimeZone:C,isReversed:M,hideQuickRanges:O})))},a=(v,g=!1)=>{const b=(0,c.n)({theme:v,invalid:!1});return{container:(0,t.css)({display:"flex",position:"relative"}),content:(0,t.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:v.zIndex.dropdown}),pickerInput:(0,t.cx)(b.input,g&&b.inputDisabled,b.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${v.spacing.gridSize*4-2}px`})),caretIcon:(0,t.cx)(b.suffix,(0,t.css)({position:"relative",top:"-1px",marginLeft:v.spacing(.5)})),clearIcon:(0,t.css)({marginRight:v.spacing(.5),"&:hover":{color:v.colors.text.maxContrast}}),placeholder:(0,t.css)({color:v.colors.text.disabled,opacity:1}),icon:(0,t.css)({marginRight:v.spacing(.5)})}}},15666:(Y,I,e)=>{"use strict";e.d(I,{$6:()=>b,_8:()=>D,xS:()=>C});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(96540),m=e(65879),l=e(72724),i=e(91410),c=e(85858),u=e(13544),f=e(40845),d=e(76412),E=e(19727),h=e(88448),y=e(27746),a=e(56034),v=e(85068),g=e(32432);function b(S){const[p,x]=(0,o.useState)(!1),{value:A,onMoveBackward:R,onMoveForward:B,onZoom:U,onError:F,timeZone:K,fiscalYearStartMonth:w,timeSyncButton:L,isSynced:V,history:N,onChangeTimeZone:z,onChangeFiscalYearStartMonth:J,hideQuickRanges:G,widthOverride:H,isOnCanvas:q,onToolbarTimePickerClick:le}=S,me=ve=>{S.onChange(ve),x(!1)};(0,o.useEffect)(()=>{p&&le&&le()},[p,le]);const k=()=>{x(ve=>!ve)},ee=()=>{x(!1)},X=(0,o.createRef)(),j=(0,o.createRef)(),{overlayProps:ne,underlayProps:te}=(0,s.e)({onClose:ee,isDismissable:!0,isOpen:p,shouldCloseOnInteractOutside:ve=>!j.current?.contains(ve)},X),{dialogProps:oe}=(0,n.s)({},X),ie=(0,f.of)(M),{modalBackdrop:ue}=(0,f.of)(h.o),be=!m.isRelativeTime(A.raw.from)||!m.isRelativeTime(A.raw.to),ge=V?"active":q?"canvas":"default",ye=A?.to?.isBefore(A.from)?"exclamation-triangle":"clock-nine",Be=T(A,K);return o.createElement(E.e,{className:ie.container},be&&o.createElement(y.I,{"aria-label":(0,d.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:ge,onClick:R,icon:"angle-left",narrow:!0}),o.createElement(a.m,{ref:j,content:o.createElement(C,{timeRange:A,timeZone:K}),placement:"bottom",interactive:!0},o.createElement(y.I,{"data-testid":u.Tp.components.TimePicker.openButton,"aria-label":(0,d.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:Be}),"aria-controls":"TimePickerContent",onClick:k,icon:ye,isOpen:p,variant:ge},o.createElement(D,{...S}))),p&&o.createElement("div",{"data-testid":u.Tp.components.TimePicker.overlayContent},o.createElement("div",{role:"presentation",className:(0,t.cx)(ue,ie.backdrop),...te}),o.createElement(r.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("section",{className:ie.content,ref:X,...ne,...oe},o.createElement(v.r,{timeZone:K,fiscalYearStartMonth:w,value:A,onChange:me,quickOptions:g.o,history:N,showHistory:!0,widthOverride:H,onChangeTimeZone:z,onChangeFiscalYearStartMonth:J,hideQuickRanges:G,onError:F})))),L,be&&o.createElement(y.I,{"aria-label":(0,d.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:B,icon:"angle-right",narrow:!0,variant:ge}),o.createElement(a.m,{content:P,placement:"bottom"},o.createElement(y.I,{"aria-label":(0,d.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:U,icon:"search-minus",variant:ge})))}b.displayName="TimeRangePicker";const P=()=>o.createElement(o.Fragment,null,o.createElement(d.x,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",o.createElement("br",null)," CTRL+Z")),C=({timeRange:S,timeZone:p})=>{const x=(0,f.of)(O);return o.createElement(o.Fragment,null,(0,l.LE)(S.from,{timeZone:p}),o.createElement("div",{className:"text-center"},o.createElement(d.x,{i18nKey:"time-picker.range-picker.to"},"to")),(0,l.LE)(S.to,{timeZone:p}),o.createElement("div",{className:"text-center"},o.createElement("span",{className:x.utc},(0,i.le)(p))))},D=(0,o.memo)(({hideText:S,value:p,timeZone:x})=>{const A=(0,f.of)(O);return S?null:o.createElement("span",{className:A.container},o.createElement("span",null,T(p,x)),o.createElement("span",{className:A.utc},m.describeTimeRangeAbbreviation(p,x)))});D.displayName="TimePickerButtonLabel";const T=(S,p)=>{const x={to:c.isMathString(S.raw.to)?S.raw.to:S.to,from:c.isMathString(S.raw.from)?S.raw.from:S.from};return m.describeTimeRange(x,p)},M=S=>({container:(0,t.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,t.css)({display:"none",[S.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:S.zIndex.dropdown,[S.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:S.zIndex.modal}})}),O=S=>({container:(0,t.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap"}),utc:(0,t.css)({color:S.v1.palette.orange,fontSize:S.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:S.typography.fontWeightMedium})})},72265:(Y,I,e)=>{"use strict";e.d(I,{h2:()=>d,nB:()=>i});var t=e(32196),n=e(96540),r=e(29426),s=e(53531),o=e(40845),m=e(14578),l=e(99225);function i({onChange:E,from:h,to:y,timeZone:a}){const v=c(h,y,new Date,a),g=u(E,a),b=(0,o.of)(d);return n.createElement(r.Ay,{selectRange:!0,next2Label:null,prev2Label:null,className:b.body,tileClassName:b.title,value:v,nextLabel:n.createElement(m.I,{name:"angle-right"}),prevLabel:n.createElement(m.I,{name:"angle-left"}),onChange:g,locale:"en"})}i.displayName="Body";function c(E,h,y=new Date,a){let v=E.isValid()?E.toDate():y,g=h.isValid()?h.toDate():y;return a&&(v=(0,l.Q)(v,a),g=(0,l.Q)(g,a)),v>g?[g,v]:[v,g]}function u(E,h){return(0,n.useCallback)(y=>{if(!Array.isArray(y))return console.error("onCalendarChange: should be run in selectRange={true}");if(y[0]&&y[1]){const a=(0,s.b)(f(y[0]),{timeZone:h}),v=(0,s.b)(f(y[1]),{timeZone:h});E(a,v)}},[E,h])}function f(E){return[E.getFullYear(),E.getMonth(),E.getDate(),E.getHours(),E.getMinutes(),E.getSeconds()]}const d=E=>{const h=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,t.css)({color:E.colors.text.primary,backgroundColor:E.colors.background.primary,fontSize:E.typography.size.md,border:"1px solid transparent","&:hover":{position:"relative"},"&:disabled":{color:E.colors.action.disabledText}}),body:(0,t.css)({zIndex:E.zIndex.modal,backgroundColor:E.colors.background.primary,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:E.colors.text.primary,border:0,fontWeight:E.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:E.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},[`${h}, .react-calendar__tile--active, .react-calendar__tile--active:hover`]:{color:E.colors.primary.contrastText,fontWeight:E.typography.fontWeightMedium,background:E.colors.primary.main,boxShadow:"none",border:"0px"},".react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart":{padding:0,border:"0px",color:E.colors.primary.contrastText,fontWeight:E.typography.fontWeightMedium,background:E.colors.primary.main,abbr:{backgroundColor:E.colors.primary.main,borderRadius:"100px",display:"block",paddingTop:"2px",height:"26px"}},[`${h}, .react-calendar__tile--rangeStart`]:{borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px"},[`${h}, .react-calendar__tile--rangeEnd`]:{borderTopRightRadius:"20px",borderBottomRightRadius:"20px"}})}}},85068:(Y,I,e)=>{"use strict";e.d(I,{r:()=>ie});var t=e(32196),n=e(96540),r=e(47232),s=e(65879),o=e(13544),m=e(40845),l=e(16797),i=e(76412),c=e(40276),u=e(67647),f=e(14578),d=e(2543),E=e(91410),h=e(55852),y=e(88575),a=e(94354),v=e(88323),g=e(20333),b=e(79451),P=e(17624),C=e(67459),D=e(32432);const T=Se=>{const{timeZone:We,fiscalYearStartMonth:De,timestamp:pe=Date.now(),onChangeTimeZone:Ne,onChangeFiscalYearStartMonth:Le}=Se,[He,je]=(0,n.useState)(!1),[at,Ye]=(0,n.useState)("tz"),$e=(0,n.useCallback)(Ee=>{Ee&&Ee.stopPropagation(),je(!He)},[He,je]),xe=(0,m.of)(M);if(!(0,d.isString)(We))return null;const Fe=(0,E.QZ)(We,pe);return Fe?n.createElement("div",null,n.createElement("section",{"aria-label":(0,i.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:xe.container},n.createElement("div",{className:xe.timeZoneContainer},n.createElement("div",{className:xe.timeZone},n.createElement(C.U,{title:Fe.name}),n.createElement("div",{className:xe.spacer}),n.createElement(b.E,{info:Fe})),n.createElement(P.X,{timeZone:We,timestamp:pe})),n.createElement("div",{className:xe.spacer}),n.createElement(h.$n,{"data-testid":o.Tp.components.TimeZonePicker.changeTimeSettingsButton,variant:"secondary",onClick:$e,size:"sm"},n.createElement(i.x,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),He?n.createElement("div",{className:xe.editContainer},n.createElement("div",null,n.createElement(a.z,{value:at,options:[{label:(0,i.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,i.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:Ye})),at==="tz"?n.createElement("section",{"data-testid":o.Tp.components.TimeZonePicker.containerV2,className:(0,t.cx)(xe.timeZoneContainer,xe.timeSettingContainer)},n.createElement(g.U,{includeInternal:!0,onChange:Ee=>{$e(),(0,d.isString)(Ee)&&Ne(Ee)},onBlur:$e,menuShouldPortal:!1})):n.createElement("section",{"data-testid":o.Tp.components.TimeZonePicker.containerV2,className:(0,t.cx)(xe.timeZoneContainer,xe.timeSettingContainer)},n.createElement(y.D,{className:xe.fiscalYearField,label:(0,i.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(v.l6,{value:De,menuShouldPortal:!1,options:D.Z,onChange:Ee=>{Le&&Le(Ee.value??0)}})))):null):null},M=Se=>({container:(0,t.css)({borderTop:`1px solid ${Se.colors.border.weak}`,padding:"11px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,t.css)({borderTop:`1px solid ${Se.colors.border.weak}`,padding:"11px",justifyContent:"space-between",alignItems:"center"}),spacer:(0,t.css)({marginLeft:"7px"}),timeSettingContainer:(0,t.css)({paddingTop:Se.spacing(1)}),fiscalYearField:(0,t.css)({marginBottom:0}),timeZoneContainer:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})});var O=e(42617),S=e(53531),p=e(72724),x=e(10354),A=e(56034),R=e(47619),B=e(80279),U=e(7887),F=e(87073),K=e(88448),w=e(72265),L=e(67061);function V({onClose:Se,onApply:We}){return n.createElement(L.B,{gap:2,justifyContent:"space-between"},n.createElement(h.$n,{variant:"secondary",onClick:Se},n.createElement(i.x,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")),n.createElement(h.$n,{onClick:We},n.createElement(i.x,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")))}V.displayName="Footer";var N=e(29158);function z({onClose:Se}){return n.createElement(L.B,{justifyContent:"space-between"},n.createElement(O.e,null,n.createElement(i.x,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(N.K,{"data-testid":o.Tp.components.TimePicker.calendar.closeButton,tooltip:(0,i.t)("time-picker.calendar.close","Close calendar"),name:"times",variant:"secondary",onClick:Se}))}z.displayName="Header";const J=(Se,We=!1)=>({container:(0,t.css)({top:0,position:"absolute",[`${We?"left":"right"}`]:"546px"}),modalContainer:(0,t.css)({label:"modalContainer",margin:"0 auto"}),calendar:(0,t.css)({display:"flex",flexDirection:"column",gap:Se.spacing(1),padding:Se.spacing(1),label:"calendar",boxShadow:Se.shadows.z3,backgroundColor:Se.colors.background.primary,border:`1px solid ${Se.colors.border.weak}`,borderRadius:Se.shape.radius.default}),modal:(0,t.css)({label:"modal",boxShadow:Se.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:Se.zIndex.modal})});function G(Se){const We=(0,m.$j)(),{modalBackdrop:De}=(0,m.of)(K.o),pe=J(We,Se.isReversed),{isOpen:Ne,isFullscreen:Le,onClose:He}=Se,je=n.createRef(),{dialogProps:at}=(0,B.s)({"aria-label":o.Tp.components.TimePicker.calendar.label},je),{overlayProps:Ye}=(0,F.e)({isDismissable:!0,isOpen:Ne,onClose:He},je),$e=!Le;if(!Ne)return null;const xe=n.createElement("section",{className:pe.calendar,ref:je,...Ye,...at,"data-testid":o.Tp.components.TimePicker.calendar.label},n.createElement(z,{...Se}),n.createElement(w.nB,{...Se}),$e&&n.createElement(V,{...Se}));return $e?n.createElement(F.Sf,null,n.createElement("div",{className:De}),n.createElement(U.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("div",{className:pe.modal},n.createElement("div",{className:pe.modalContainer},xe)))):n.createElement(U.n1,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("div",{className:pe.container},xe))}const H=(0,n.memo)(G);G.displayName="TimePickerCalendar";const q={default:()=>(0,i.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,i.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},le=Se=>{const{value:We,isFullscreen:De=!1,timeZone:pe,onApply:Ne,isReversed:Le,fiscalYearStartMonth:He,onError:je}=Se,[at,Ye]=k(We.raw.from,We.raw.to,pe),$e=(0,m.of)(X),[xe,Fe]=(0,n.useState)(at),[Ee,se]=(0,n.useState)(Ye),[ae,fe]=(0,n.useState)(!1),Ce=(0,n.useId)(),Re=(0,n.useId)();(0,n.useEffect)(()=>{const[Ct,Ut]=k(We.raw.from,We.raw.to,pe);Fe(Ct),se(Ut)},[We.raw.from,We.raw.to,pe]);const Oe=(0,n.useCallback)(Ct=>{Ct.preventDefault(),fe(!0)},[fe]),ze=(0,n.useCallback)(()=>{if(Ee.invalid||xe.invalid)return;const Ct={from:xe.value,to:Ee.value},Ut=s.convertRawToRange(Ct,pe,He);Ne(Ut)},[xe.invalid,xe.value,Ne,pe,Ee.invalid,Ee.value,He]),Xe=(0,n.useCallback)((Ct,Ut)=>{const[Gt,Wt]=k(Ct,Ut,pe);Fe(Gt),se(Wt)},[pe]),Ze=Ct=>{Ct.key==="Enter"&&ze()},et=()=>{const Ct={from:xe.value,to:Ee.value};navigator.clipboard.writeText(JSON.stringify(Ct))},nt=async()=>{const Ct=await navigator.clipboard.readText();let Ut;try{Ut=JSON.parse(Ct)}catch{je&&je(Ct);return}const[Gt,Wt]=k(Ut.from,Ut.to,pe);Fe(Gt),se(Wt)},lt=s.convertRawToRange({from:"now/fy",to:"now/fy"},pe,He),rt=(0,i.t)("time-picker.range-content.fiscal-year","Fiscal year"),ut=n.createElement("div",{className:$e.tooltip},s.isFiscal(We)?n.createElement(A.m,{content:`${rt}: ${lt.from.format("MMM-DD")} - ${lt.to.format("MMM-DD")}`},n.createElement(f.I,{name:"info-circle"})):null),Et=n.createElement(h.$n,{"aria-label":(0,i.t)("time-picker.range-content.open-input-calendar","Open calendar"),"data-testid":o.Tp.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:Oe});return n.createElement("div",null,n.createElement("div",{className:$e.fieldContainer},n.createElement(y.D,{label:(0,i.t)("time-picker.range-content.from-input","From"),invalid:xe.invalid,error:xe.errorMessage},n.createElement(x.p,{id:Ce,onClick:Ct=>Ct.stopPropagation(),onChange:Ct=>Xe(Ct.currentTarget.value,Ee.value),addonAfter:Et,onKeyDown:Ze,"data-testid":o.Tp.components.TimePicker.fromField,value:xe.value})),ut),n.createElement("div",{className:$e.fieldContainer},n.createElement(y.D,{label:(0,i.t)("time-picker.range-content.to-input","To"),invalid:Ee.invalid,error:Ee.errorMessage},n.createElement(x.p,{id:Re,onClick:Ct=>Ct.stopPropagation(),onChange:Ct=>Xe(xe.value,Ct.currentTarget.value),addonAfter:Et,onKeyDown:Ze,"data-testid":o.Tp.components.TimePicker.toField,value:Ee.value})),ut),n.createElement("div",{className:$e.buttonsContainer},n.createElement(h.$n,{"data-testid":o.Tp.components.TimePicker.copyTimeRange,icon:"copy",variant:"secondary",tooltip:(0,i.t)("time-picker.copy-paste.tooltip-copy","Copy time range to clipboard"),type:"button",onClick:et}),n.createElement(h.$n,{"data-testid":o.Tp.components.TimePicker.pasteTimeRange,icon:"clipboard-alt",variant:"secondary",tooltip:(0,i.t)("time-picker.copy-paste.tooltip-paste","Paste time range"),type:"button",onClick:nt}),n.createElement(h.$n,{"data-testid":o.Tp.components.TimePicker.applyTimeRange,type:"button",onClick:ze},n.createElement(i.x,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range"))),n.createElement(H,{isFullscreen:De,isOpen:ae,from:(0,S.b)(xe.value,{timeZone:pe}),to:(0,S.b)(Ee.value,{timeZone:pe}),onApply:ze,onClose:()=>fe(!1),onChange:Xe,timeZone:pe,isReversed:Le}))};function me(Se,We,De){const pe={from:Se,to:We},Ne=s.convertRawToRange(pe,De);return!(Ne.from.isSame(Ne.to)||Ne.from.isBefore(Ne.to))}function k(Se,We,De){const pe=ee(Se,De),Ne=ee(We,De),Le=!(0,R.f)(pe,!1,De),He=!(0,R.f)(Ne,!0,De),je=me(pe,Ne,De)&&!He;return[{value:pe,invalid:Le||je,errorMessage:je&&!Le?q.range():q.default()},{value:Ne,invalid:He,errorMessage:q.default()}]}function ee(Se,We){return(0,r.Ar)(Se)?(0,p.LE)(Se,{timeZone:We}):Se}function X(Se){return{fieldContainer:(0,t.css)({display:"flex"}),buttonsContainer:(0,t.css)({display:"flex",gap:Se.spacing(.5),marginTop:Se.spacing(1)}),tooltip:(0,t.css)({paddingLeft:Se.spacing(1),paddingTop:Se.spacing(3)})}}var j=e(65172);const ne=(Se,We)=>s.convertRawToRange({from:Se.from,to:Se.to},We),te=(Se,We)=>{const De=(0,p.LE)(Se.from,{timeZone:We}),pe=(0,p.LE)(Se.to,{timeZone:We});return{from:De,to:pe,display:`${De} to ${pe}`}},oe=Se=>{const{quickOptions:We=[],isReversed:De,isFullscreen:pe,hideQuickRanges:Ne,timeZone:Le,fiscalYearStartMonth:He,value:je,onChange:at,history:Ye,showHistory:$e,className:xe,hideTimeZone:Fe,onChangeTimeZone:Ee,onChangeFiscalYearStartMonth:se}=Se,ae=!Ye?.length,fe=pe&&$e||!pe&&($e&&!ae||!Ne),Ce=(0,m.of)(Be,De,Ne,fe,pe),Re=re(Ye,Le),Oe=ye(je.raw,We),[ze,Xe]=(0,n.useState)(""),Ze=We.filter(nt=>nt.display.toLowerCase().includes(ze.toLowerCase())),et=nt=>at(ne(nt));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(Ce.container,xe)},n.createElement("div",{className:Ce.body},(!pe||!Ne)&&n.createElement("div",{className:Ce.rightSide},n.createElement("div",{className:Ce.timeRangeFilter},n.createElement(u.Z,{width:0,value:ze,onChange:Xe,placeholder:(0,i.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(c.E,null,!pe&&n.createElement(ue,{...Se,historyOptions:Re}),!Ne&&n.createElement(j.l,{options:Ze,onChange:et,value:Oe}))),pe&&n.createElement("div",{className:Ce.leftSide},n.createElement(be,{...Se,historyOptions:Re}))),!Fe&&pe&&n.createElement(T,{timeZone:Le,fiscalYearStartMonth:He,onChangeTimeZone:Ee,onChangeFiscalYearStartMonth:se}))},ie=Se=>{const{widthOverride:We}=Se,De=(0,m.$j)(),pe=(We||window.innerWidth)>=De.breakpoints.values.lg;return n.createElement(oe,{...Se,isFullscreen:pe})},ue=Se=>{const{value:We,hideQuickRanges:De,onChange:pe,timeZone:Ne,historyOptions:Le=[],showHistory:He,onError:je}=Se,at=(0,m.of)(ve),Ye=(0,r.Ar)(We.raw.from)||(0,r.Ar)(We.raw.to),[$e,xe]=(0,n.useState)(!Ye),Fe=De?!1:$e,Ee=se=>pe(ne(se,Ne));return n.createElement("fieldset",null,n.createElement("div",{className:at.header},n.createElement("button",{type:"button",className:at.expandButton,onClick:()=>{De||xe(!Fe)},"data-testid":o.Tp.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!Fe,"aria-controls":"expanded-timerange"},n.createElement(O.e,null,n.createElement(i.x,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!De&&n.createElement(f.I,{name:Fe?"angle-down":"angle-up"}))),!Fe&&n.createElement("div",{className:at.body,id:"expanded-timerange"},n.createElement("div",{className:at.form},n.createElement(le,{value:We,onApply:pe,timeZone:Ne,isFullscreen:!1,onError:je})),He&&n.createElement(j.l,{title:(0,i.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Le,onChange:Ee,placeholderEmpty:null})))},be=Se=>{const{onChange:We,value:De,timeZone:pe,fiscalYearStartMonth:Ne,isReversed:Le,historyOptions:He,onError:je}=Se,at=(0,m.of)(Me,Se.hideQuickRanges),Ye=$e=>We(ne($e,pe));return n.createElement(n.Fragment,null,n.createElement("div",{className:at.container},n.createElement("div",{className:at.title,"data-testid":o.Tp.components.TimePicker.absoluteTimeRangeTitle},n.createElement(O.e,null,n.createElement(i.x,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(le,{value:De,timeZone:pe,fiscalYearStartMonth:Ne,onApply:We,isFullscreen:!0,isReversed:Le,onError:je})),Se.showHistory&&n.createElement("div",{className:at.recent},n.createElement(j.l,{title:(0,i.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:He||[],onChange:Ye,placeholderEmpty:n.createElement(ge,null)})))},ge=(0,n.memo)(()=>{const Se=(0,m.of)(ke),We=(0,i.t)("time-picker.content.empty-recent-list-info","It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.");return n.createElement("div",{className:Se.container},n.createElement("div",null,n.createElement("span",null,We)),n.createElement(i.x,{i18nKey:"time-picker.content.empty-recent-list-docs"},n.createElement("div",null,n.createElement("a",{className:Se.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function re(Se,We){return!Array.isArray(Se)||Se.length===0?[]:Se.map(De=>te(De,We))}ge.displayName="EmptyRecentList";const ye=(Se,We)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Se))return We.find(De=>De.from===Se.from&&De.to===Se.to)},[Se,We]),Be=(Se,We,De,pe,Ne)=>({container:(0,t.css)({background:Se.colors.background.primary,boxShadow:Se.shadows.z3,width:`${Ne?"546px":"262px"}`,borderRadius:Se.shape.radius.default,border:`1px solid ${Se.colors.border.weak}`,[`${We?"left":"right"}`]:0,display:"flex",flexDirection:"column"}),body:(0,t.css)({display:"flex",flexDirection:"row-reverse",height:`${pe?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,t.css)({display:"flex",flexDirection:"column",borderRight:`${We?"none":`1px solid ${Se.colors.border.weak}`}`,width:`${De?"100%":"60%"}`,overflow:"auto",order:We?1:0}),rightSide:(0,t.css)({width:`${Ne?"40%":"100%"}; !important`,borderRight:We?`1px solid ${Se.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,t.css)({padding:Se.spacing(1)}),spacing:(0,t.css)({marginTop:"16px"})}),ve=Se=>({header:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${Se.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,t.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,l.getFocusStyles)(Se)}),body:(0,t.css)({borderBottom:`1px solid ${Se.colors.border.weak}`}),form:(0,t.css)({padding:"7px 9px 7px 9px"})}),Me=(Se,We)=>({container:(0,t.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:We?"11px":"20%"}),title:(0,t.css)({marginBottom:"11px"}),recent:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:Se.spacing(1)})}),ke=Se=>({container:(0,t.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}}),link:(0,t.css)({color:Se.colors.text.link})})},42617:(Y,I,e)=>{"use strict";e.d(I,{e:()=>o});var t=e(32196),n=e(96540),r=e(40845);const s=m=>({text:(0,t.css)({fontSize:m.typography.size.md,fontWeight:m.typography.fontWeightMedium,color:m.colors.text.primary,margin:0,display:"flex"})}),o=(0,n.memo)(({children:m})=>{const l=(0,r.of)(s);return n.createElement("h3",{className:l.text},m)});o.displayName="TimePickerTitle"},3799:(Y,I,e)=>{"use strict";e.d(I,{f:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(15666),o=e(47619);const m=(0,n.memo)(function({hideText:c,value:u,timeZone:f="browser",placeholder:d="No time range selected",className:E}){const h=(0,r.of)(l);return c?null:n.createElement("span",{className:E},(0,o.X)(u)?n.createElement(s._8,{value:u,timeZone:f}):n.createElement("span",{className:h.placeholder},d))}),l=i=>({placeholder:(0,t.css)({color:i.colors.text.disabled,opacity:1})})},65172:(Y,I,e)=>{"use strict";e.d(I,{l:()=>u});var t=e(32196),n=e(96540),r=e(40845),s=e(76412),o=e(42617),m=e(62938),l=e(16797);const i=a=>({container:(0,t.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between"}),selected:(0,t.css)({background:a.colors.action.selected,fontWeight:a.typography.fontWeightMedium}),radio:(0,t.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,l.getFocusStyles)(a)}),label:(0,t.css)({cursor:"pointer",flex:1,padding:"7px 9px 7px 9px","&:hover":{background:a.colors.action.hover,cursor:"pointer"}})}),c=(0,n.memo)(({value:a,onSelect:v,selected:g=!1,name:b})=>{const P=(0,r.of)(i),C=(0,m.A)();return n.createElement("li",{className:(0,t.cx)(P.container,g&&P.selected)},n.createElement("input",{className:P.radio,checked:g,name:b,type:"checkbox",id:C,onChange:()=>v(a)}),n.createElement("label",{className:P.label,htmlFor:C},a.display))});c.displayName="TimeRangeOption";const u=a=>{const v=(0,r.of)(h),{title:g,options:b,placeholderEmpty:P}=a;return typeof P<"u"&&b.length<=0?n.createElement(n.Fragment,null,P):g?n.createElement("section",{"aria-label":g},n.createElement("fieldset",null,n.createElement("div",{className:v.title},n.createElement(o.e,null,g)),n.createElement(f,{...a}))):n.createElement(f,{...a})},f=({options:a,value:v,onChange:g,title:b})=>{const P=(0,r.of)(y);return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},a.map((C,D)=>n.createElement(c,{key:d(C,D),value:C,selected:E(C,v),onSelect:g,name:b??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:P.grow}))};function d(a,v){return`${a.from}-${a.to}-${v}`}function E(a,v){return!v||!a?!1:v.from===a.from&&v.to===a.to}const h=()=>({title:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})}),y=()=>({grow:(0,t.css)({flexGrow:1,alignItems:"flex-start"})})},20333:(Y,I,e)=>{"use strict";e.d(I,{U:()=>g});var t=e(2543),n=e(96540),r=e(91410),s=e(76412),o=e(88323),m=e(32196),l=e(40845);const i=M=>{const{children:O,label:S}=M,p=(0,l.of)(c);return S?n.createElement("div",null,n.createElement("div",{className:p.header},n.createElement("span",{className:p.label},S)),O):n.createElement("div",null,O)},c=M=>({header:(0,m.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${M.colors.border.weak}`,textTransform:"capitalize"}),label:(0,m.css)({fontSize:M.typography.size.sm,color:M.colors.text.secondary,fontWeight:M.typography.fontWeightMedium})});var u=e(17624),f=e(14578),d=e(79451),E=e(67459);const h="tz-utc-offset",y=M=>{const{children:O,innerProps:S,innerRef:p,data:x,isSelected:A,isFocused:R}=M,B=(0,l.of)(v),U=Date.now(),F=(0,m.cx)(B.container,R&&B.containerFocused);if(!(0,t.isString)(x.value))return null;const K=(0,r.QZ)(x.value,U);return n.createElement("div",{className:F,...S,ref:p,"aria-label":"Select option"},n.createElement("div",{className:(0,m.cx)(B.leftColumn,B.row)},n.createElement("div",{className:(0,m.cx)(B.leftColumn,B.wideRow)},n.createElement(E.U,{title:O}),n.createElement("div",{className:B.spacer}),n.createElement(d.E,{info:K})),n.createElement("div",{className:B.rightColumn},n.createElement(u.X,{timeZone:K?.ianaName||x.value,timestamp:U,className:h}),A&&n.createElement("span",null,n.createElement(f.I,{name:"check"})))))},a=M=>{const{children:O,innerProps:S,innerRef:p,data:x,isSelected:A,isFocused:R}=M,B=(0,l.of)(v),U=Date.now(),F=(0,m.cx)(B.container,R&&B.containerFocused);if(!(0,t.isString)(x.value))return null;const K=(0,r.QZ)(x.value,U);return n.createElement("div",{className:F,...S,ref:p,"aria-label":"Select option"},n.createElement("div",{className:B.body},n.createElement("div",{className:B.row},n.createElement("div",{className:B.leftColumn},n.createElement(E.U,{title:O})),n.createElement("div",{className:B.rightColumn},A&&n.createElement("span",null,n.createElement(f.I,{name:"check"})))),n.createElement("div",{className:B.row},n.createElement("div",{className:B.leftColumn},n.createElement(d.E,{info:K})),n.createElement("div",{className:B.rightColumn},n.createElement(u.X,{timestamp:U,timeZone:K?.ianaName||x.value,className:h})))))},v=M=>({container:(0,m.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:M.colors.action.hover}}),containerFocused:(0,m.css)({background:M.colors.action.hover}),body:(0,m.css)({display:"flex",fontWeight:M.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,m.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,m.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,m.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,m.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,m.css)({marginLeft:"6px"})}),g=M=>{const{onChange:O,width:S,autoFocus:p=!1,onBlur:x,value:A,includeInternal:R=!1,disabled:B=!1,inputId:U,menuShouldPortal:F=!0,openMenuOnFocus:K=!0}=M,w=b(R),L=P(w,A),V=D(),N=S&&S<=45?a:y,z=(0,n.useCallback)(J=>{if(!J||!(0,t.isString)(J.value))return O(A);O(J.value)},[O,A]);return n.createElement(o.l6,{inputId:U,value:L,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:p,menuShouldPortal:F,openMenuOnFocus:K,width:S,filterOption:V,options:w,onChange:z,onBlur:x,components:{Option:N,Group:i},disabled:B,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},b=M=>{const O=Date.now();return(0,r.U3)(M).map(p=>{const x=p.zones.reduce((A,R)=>{const B=(0,r.QZ)(R,O);return B&&A.push({label:B.name,value:B.zone,searchIndex:T(B,O)}),A},[]);return{label:p.name,options:x}})},P=(M,O)=>(0,n.useMemo)(()=>{if(O===void 0)return;const S=(0,t.toLower)(O);return M.find(x=>x.label?S.startsWith((0,t.toLower)(x.label)):C(S))?.options.find(x=>(0,t.isEmpty)(S)?x.value===r.g$.default:(0,t.toLower)(x.value)===S)},[M,O]),C=M=>{switch(M){case r.g$.default:case r.g$.localBrowserTime:case r.g$.utc:return!0;default:return!1}},D=()=>(0,n.useCallback)((M,O)=>!O||!M.data||!M.data.searchIndex?!0:M.data.searchIndex.indexOf((0,t.toLower)(O))>-1,[]),T=(M,O)=>{const S=[(0,t.toLower)(M.name),(0,t.toLower)(M.abbreviation),(0,t.toLower)((0,u.t)(O,M.zone))];for(const p of M.countries)S.push((0,t.toLower)(p.name)),S.push((0,t.toLower)(p.code));return S.join("|")}},79451:(Y,I,e)=>{"use strict";e.d(I,{E:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({info:l})=>{const i=(0,r.of)(m),c=o(l);return l?n.createElement("div",{className:i.description},c):null},o=l=>(0,n.useMemo)(()=>{const i=[];if(!l)return"";if(l.name==="Europe/Simferopol")return"Ukraine, EEST";if(l.countries.length>0){const c=l.countries[0];i.push(c.name)}return l.abbreviation&&i.push(l.abbreviation),i.join(", ")},[l]),m=l=>({description:(0,t.css)({fontWeight:"normal",fontSize:l.typography.size.sm,color:l.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},17624:(Y,I,e)=>{"use strict";e.d(I,{X:()=>l,t:()=>i});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(72724),m=e(40845);const l=u=>{const{timestamp:f,timeZone:d,className:E}=u,h=(0,m.of)(c);return(0,n.isString)(d)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(h.offset,E)},i(f,d))):null},i=(u,f)=>`UTC${(0,o.LE)(u,{timeZone:f,format:"Z"})}`,c=u=>{const f=(0,t.css)({fontWeight:"normal",fontSize:u.typography.size.sm,color:u.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,t.css)(f,{color:u.colors.text.primary,background:u.colors.background.secondary,padding:"2px 5px",borderRadius:u.shape.radius.default,marginLeft:"4px"})}}},67459:(Y,I,e)=>{"use strict";e.d(I,{U:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({title:m})=>{const l=(0,r.of)(o);return m?n.createElement("span",{className:l.title},m):null},o=m=>({title:(0,t.css)({fontWeight:m.typography.fontWeightRegular,textOverflow:"ellipsis"})})},15648:(Y,I,e)=>{"use strict";e.d(I,{l:()=>o});var t=e(96540),n=e(13544),r=e(88323);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],o=m=>{const{onChange:l,width:i,autoFocus:c=!1,onBlur:u,value:f,disabled:d=!1,inputId:E}=m,h=(0,t.useCallback)(y=>{y.value!==void 0&&l(y.value)},[l]);return t.createElement(r.l6,{inputId:E,value:s.find(y=>y.value===f)?.value,placeholder:n.Tp.components.WeekStartPicker.placeholder,autoFocus:c,openMenuOnFocus:!0,width:i,options:s,onChange:h,onBlur:u,disabled:d})}},32432:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>n,o:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},47619:(Y,I,e)=>{"use strict";e.d(I,{X:()=>o,f:()=>s});var t=e(47232),n=e(85858),r=e(53531);function s(m,l,i){return(0,t.Ar)(m)?m.isValid():n.isMathString(m)?n.isValid(m):(0,r.b)(m,{roundUp:l,timeZone:i}).isValid()}function o(m){return n.isValid(m.from)&&n.isValid(m.to)}},99225:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>n});var t=e(91410);function n(r,s){const o=(0,t.HD)(s);if(!o)return r;const m=o.utcOffset(r.getTime()),l=r.getTimezoneOffset(),i=m-l;return new Date(r.getTime()-i*1e3*60)}},25994:(Y,I,e)=>{"use strict";e.d(I,{c:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({direction:m="horizontal",spacing:l=2})=>{const i=(0,r.of)(o,l);return m==="vertical"?n.createElement("div",{className:i.verticalDivider}):n.createElement("hr",{className:i.horizontalDivider})};s.displayName="Divider";const o=(m,l)=>({horizontalDivider:(0,t.css)({borderTop:`1px solid ${m.colors.border.weak}`,margin:m.spacing(l,0),width:"100%"}),verticalDivider:(0,t.css)({borderRight:`1px solid ${m.colors.border.weak}`,margin:m.spacing(0,l),height:"100%"})})},69144:(Y,I,e)=>{"use strict";e.d(I,{l:()=>n});var t=e(32196);const n=(r,s)=>{const o=s||"middle",m=r.colors.emphasize(r.colors.background.secondary,.15),l=r.colors.primary.border,i=r.spacing(2),c=4,u=200;let f="50%",d="50%";switch(o){case"start":{f="0%",d="0%";break}case"end":{f="100%",d="100%";break}}const E=(0,t.css)({position:"relative","&:before":{content:'""',position:"absolute",transition:r.transitions.create("border-color"),zIndex:1},"&:after":{background:m,content:'""',position:"absolute",transition:r.transitions.create("background"),transform:"translate(-50%, -50%)",borderRadius:r.shape.radius.pill,zIndex:1},"&:hover":{"&:before":{borderColor:l},"&:after":{background:l}}});return{dragHandleVertical:(0,t.cx)(E,(0,t.css)({cursor:"col-resize",width:i,"&:before":{borderRight:"1px solid transparent",height:"100%",left:f,transform:"translateX(-50%)"},"&:after":{left:f,top:"50%",height:u,width:c}})),dragHandleHorizontal:(0,t.cx)(E,(0,t.css)({height:i,cursor:"row-resize","&:before":{borderTop:"1px solid transparent",top:d,transform:"translateY(-50%)",width:"100%"},"&:after":{left:"50%",top:d,height:c,width:u}}))}}},87978:(Y,I,e)=>{"use strict";e.d(I,{_:()=>h});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(8772),m=e(96540),l=e(13544),i=e(40845),c=e(76412),u=e(40276),f=e(69144),d=e(29158),E=e(94753);function h({children:C,onClose:D,closeOnMaskClick:T=!0,scrollableContent:M=!0,title:O,subtitle:S,width:p,size:x="md",tabs:A}){const[R,B,U]=y(),F=(0,i.of)(g),K=(0,i.of)(P,x,R??p),w=(0,i.of)(f.l),L=m.useRef(null),{dialogProps:V,titleProps:N}=(0,n.s)({},L),{overlayProps:z}=(0,s.e)({isDismissable:!1,isOpen:!0,onClose:D},L);v();const J=(0,t.cx)(F.drawer,K),G=m.createElement("div",{className:F.content},C);return m.createElement(o.A,{open:!0,onClose:D,placement:"right",getContainer:".main-view",className:F.drawerContent,rootClassName:J,width:"",motion:{motionAppear:!0,motionName:F.drawerMotion},maskClassName:F.mask,maskClosable:T,maskMotion:{motionAppear:!0,motionName:F.maskMotion}},m.createElement(r.n1,{restoreFocus:!0,contain:!0,autoFocus:!0},m.createElement("div",{"aria-label":typeof O=="string"?l.Tp.components.Drawer.General.title(O):l.Tp.components.Drawer.General.title("no title"),className:F.container,...z,...V,ref:L},m.createElement("div",{className:(0,t.cx)(w.dragHandleVertical,F.resizer),onMouseDown:B,onTouchStart:U}),typeof O=="string"&&m.createElement("div",{className:(0,t.cx)(F.header,!!A&&F.headerWithTabs)},m.createElement("div",{className:F.actions},m.createElement(d.K,{name:"times",variant:"secondary",onClick:D,"data-testid":l.Tp.components.Drawer.General.close,tooltip:(0,c.t)("grafana-ui.drawer.close","Close")})),m.createElement("div",{className:F.titleWrapper},m.createElement(E.E,{element:"h3",...N},O),S&&m.createElement("div",{className:F.subtitle,"data-testid":l.Tp.components.Drawer.General.subtitle},S),A&&m.createElement("div",{className:F.tabsWrapper},A))),typeof O!="string"&&O,M?m.createElement(u.E,null,G):G)))}function y(){const[C,D]=(0,m.useState)(void 0),T=(0,m.useCallback)(A=>{D(a(A.clientX))},[]),M=(0,m.useCallback)(A=>{const R=A.touches[0];D(a(R.clientX))},[]),O=(0,m.useCallback)(A=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",O)},[T]),S=(0,m.useCallback)(A=>{document.removeEventListener("touchmove",M),document.removeEventListener("touchend",S)},[M]);function p(A){A.stopPropagation(),A.preventDefault(),document.addEventListener("mousemove",T),document.addEventListener("mouseup",O)}function x(A){A.stopPropagation(),A.preventDefault(),document.addEventListener("touchmove",M),document.addEventListener("touchend",S)}return[C,p,x]}function a(C){let D=document.body.offsetWidth-(C-document.body.offsetLeft);return`${Math.min(D/document.body.clientWidth*100,98).toFixed(2)}vw`}function v(){(0,m.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const g=C=>({container:(0,t.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%",position:"relative"}),drawer:(0,t.css)({".main-view &":{top:80},".main-view--search-bar-hidden &":{top:40},".main-view--chrome-hidden &":{top:0},".rc-drawer-content-wrapper":{boxShadow:C.shadows.z3}}),drawerContent:(0,t.css)({backgroundColor:`${C.colors.background.primary} !important`,display:"flex",overflow:"unset",flexDirection:"column"}),drawerMotion:(0,t.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${C.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,t.css)({backgroundColor:"transparent",position:"fixed","&:before":{backgroundColor:`${C.components.overlay.background} !important`,backdropFilter:"blur(1px)",bottom:0,content:'""',left:0,position:"fixed",right:0,".main-view &":{top:80},".main-view--search-bar-hidden &":{top:40},".main-view--chrome-hidden &":{top:0}}}),maskMotion:(0,t.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:C.transitions.create("opacity")}}}),header:(0,t.css)({label:"drawer-header",flexGrow:0,padding:C.spacing(2,2,3),borderBottom:`1px solid ${C.colors.border.weak}`}),headerWithTabs:(0,t.css)({borderBottom:"none"}),actions:(0,t.css)({position:"absolute",right:C.spacing(1),top:C.spacing(1)}),titleWrapper:(0,t.css)({label:"drawer-title",overflowWrap:"break-word"}),subtitle:(0,t.css)({label:"drawer-subtitle",color:C.colors.text.secondary,paddingTop:C.spacing(1)}),content:(0,t.css)({padding:C.spacing(2),height:"100%",flexGrow:1}),tabsWrapper:(0,t.css)({label:"drawer-tabs",paddingLeft:C.spacing(2),margin:C.spacing(1,-1,-3,-3)}),resizer:(0,t.css)({top:0,left:C.spacing(-1),bottom:0,position:"absolute",zIndex:C.zIndex.modal})}),b={sm:{width:"25vw",minWidth:384},md:{width:"50vw",minWidth:568},lg:{width:"75vw",minWidth:744}};function P(C,D,T){let M=T??b[D].width,O=b[D].minWidth;return(0,t.css)({".rc-drawer-content-wrapper":{label:`drawer-content-wrapper-${D}`,width:M,minWidth:O,overflow:"unset",[C.breakpoints.down("md")]:{width:`calc(100% - ${C.spacing(2)}) !important`,minWidth:0}}})}},9261:(Y,I,e)=>{"use strict";e.d(I,{f:()=>d});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(7887),m=e(96540),l=e(40845),i=e(38138),c=e(64539),u=e(27746);const f=h=>{const{className:y,options:a,value:v,onChange:g,narrow:b,variant:P,...C}=h,D=(0,l.of)(E),[T,M]=(0,m.useState)(!1),O=[(0,n.cY)(0),(0,r.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{context:S,refs:p,floatingStyles:x}=(0,s.we)({open:T,placement:"bottom-end",onOpenChange:M,middleware:O,whileElementsMounted:r.ll}),A=(0,s.kp)(S),R=(0,s.s9)(S),{getReferenceProps:B,getFloatingProps:U}=(0,s.bv)([R,A]),F=K=>{g(K),M(!1)};return m.createElement("div",{className:D.wrapper},m.createElement(u.I,{className:y,isOpen:T,narrow:b,variant:P,ref:p.setReference,...B(),...C},v?.label||(v?.value!=null?String(v?.value):null)),T&&m.createElement("div",{className:D.menuWrapper,ref:p.setFloating,...U(),style:x},m.createElement(o.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},m.createElement(i.W,{tabIndex:-1,onClose:()=>M(!1)},a.map(K=>m.createElement(c.D,{key:`${K.value}`,label:K.label??String(K.value),onClick:()=>F(K),active:K.value===v?.value,ariaChecked:K.value===v?.value,ariaLabel:K.ariaLabel||K.label,role:"menuitemradio"}))))))};f.displayName="ButtonSelect";const d=m.memo(f),E=h=>({wrapper:(0,t.css)({position:"relative",display:"inline-flex"}),menuWrapper:(0,t.css)({zIndex:h.zIndex.dropdown})})},83122:(Y,I,e)=>{"use strict";e.d(I,{m:()=>u});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(96540),m=e(66588),l=e(67892),i=e(18976),c=e(17464);const u=o.memo(({children:d,overlay:E,placement:h,offset:y,onVisibleChange:a})=>{const[v,g]=(0,o.useState)(!1),b=(0,o.useRef)(null);(0,o.useEffect)(()=>{a?.(v)},[a,v]);const P=[(0,n.cY)({mainAxis:y?.[0]??8,crossAxis:y?.[1]??0}),(0,r.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{context:C,refs:D,floatingStyles:T}=(0,s.we)({open:v,placement:(0,i.O)(h),onOpenChange:g,middleware:P,whileElementsMounted:r.ll}),M=(0,s.kp)(C),O=(0,s.s9)(C),{getReferenceProps:S,getFloatingProps:p}=(0,s.bv)([O,M]),x=150,A=f(x),R=()=>{g(!1)},B=U=>{U.key==="Tab"&&g(!1)};return o.createElement(o.Fragment,null,o.cloneElement(d,{ref:D.setReference,...S()}),v&&o.createElement(c.ZL,null,o.createElement(s.s3,{context:C},o.createElement("div",{ref:D.setFloating,style:T,onClick:R,onKeyDown:B},o.createElement(m.A,{nodeRef:b,appear:!0,in:!0,timeout:{appear:x,exit:0,enter:0},classNames:A},o.createElement("div",{ref:b},l.renderOrCallToRender(E,{...p()})))))))});u.displayName="Dropdown";const f=d=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${d}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${d}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},41670:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m})=>{const l=(0,r.of)(o);return n.createElement("div",{className:l.container},m)},o=m=>({container:(0,t.css)({borderLeft:`3px solid ${m.colors.info.main}`,backgroundColor:`${m.colors.background.secondary}`,padding:m.spacing(2),minWidth:"350px",borderRadius:m.shape.radius.default,marginBottom:m.spacing(4)})})},69529:(Y,I,e)=>{"use strict";e.d(I,{p:()=>P});var t=e(32196),n=e(96540),r=e(8867),s=e(40845),o=e(90613),m=e(67061),l=e(94753),i=e(36348);const c=({width:T="auto",height:M})=>{const O=(0,s.of)(u);return n.createElement(r.default,{src:i,className:O.svg,height:M,width:T})};c.displayName="GrotCTA";const u=T=>({svg:(0,t.css)({"#grot-cta-cactus-1, #grot-cta-cactus-2":{fill:T.isDark?"#58558c":"#c9c5f4"}})});var f=e(22687);const d=-20,E=5,h=-5,y=5,a=({width:T="auto",height:M})=>{const O=(0,n.useRef)(null),S=(0,s.of)(v);return(0,n.useEffect)(()=>{const p=x=>{const A=O.current?.querySelector("#grot-not-found-arm"),R=O.current?.querySelector("#grot-not-found-magnifier"),{clientX:B,clientY:U}=x,{innerWidth:F,innerHeight:K}=window,w=U/K,L=B/F,V=g(w,d,E),N=g(L,h,y);window.requestAnimationFrame(()=>{A?.setAttribute("style",`transform: rotate(${V}deg) translateX(${N}%)`),R?.setAttribute("style",`transform: rotate(${V}deg) translateX(${N}%)`)})};return window.addEventListener("mousemove",p),()=>{window.removeEventListener("mousemove",p)}},[]),n.createElement(r.default,{innerRef:O,src:f,className:S.svg,height:M,width:T})};a.displayName="GrotNotFound";const v=T=>({svg:(0,t.css)({"#grot-not-found-arm, #grot-not-found-magnifier":{transformOrigin:"center"}})}),g=(T,M,O)=>T*(O-M)+M;var b=e(9886);const P=({button:T,children:M,image:O,message:S,hideImage:p=!1,variant:x})=>{const A=(0,s.of)(D),R=O??C(x);return n.createElement(o.a,{paddingY:4,display:"flex",direction:"column",alignItems:"center"},n.createElement("div",{className:A.container},!p&&R,n.createElement(m.B,{direction:"column",alignItems:"center"},n.createElement(l.E,{variant:"h4",textAlignment:"center"},S),M&&n.createElement(l.E,{color:"secondary",textAlignment:"center"},M)),T))};function C(T){switch(T){case"call-to-action":return n.createElement(c,{width:300});case"not-found":return n.createElement(a,{width:300});case"completed":return n.createElement(r.default,{src:b,width:300});default:throw new Error(`Unknown variant: ${T}`)}}const D=T=>({container:(0,t.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:T.spacing(4),maxWidth:"600px"})})},66602:(Y,I,e)=>{"use strict";e.d(I,{Xc:()=>l,Xw:()=>m,tH:()=>o});var t=e(96540),n=e(50138),r=e(42418),s=e(52446);class o extends t.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(c,u){n.P?.api?.pushError(c),this.setState({error:c,errorInfo:u}),this.props.onError&&this.props.onError(c)}componentDidUpdate(c){const{dependencies:u,onRecover:f}=this.props;if(this.state.error&&u&&c.dependencies){for(let d=0;d<u.length;d++)if(u[d]!==c.dependencies[d]){this.setState({error:null,errorInfo:null}),f&&f();break}}}render(){const{children:c}=this.props,{error:u,errorInfo:f}=this.state;return c({error:u,errorInfo:f})}}class m extends t.PureComponent{static{this.defaultProps={title:"An unexpected error happened",style:"alertbox"}}render(){const{title:c,children:u,style:f,dependencies:d}=this.props;return t.createElement(o,{dependencies:d},({error:E,errorInfo:h})=>h?f==="alertbox"?t.createElement(r.F,{title:c||""},t.createElement("details",{style:{whiteSpace:"pre-wrap"}},E&&E.toString(),t.createElement("br",null),h.componentStack)):t.createElement(s.D,{title:c||"",error:E,errorInfo:h}):u)}}function l(i,c={}){const u=f=>t.createElement(m,{...c},t.createElement(i,{...f}));return u.displayName="WithErrorBoundary",u}},52446:(Y,I,e)=>{"use strict";e.d(I,{D:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({error:m,errorInfo:l,title:i})=>{const c=(0,r.of)(o);return n.createElement("div",{className:c},n.createElement("h2",null,i),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},m&&m.toString(),n.createElement("br",null),l&&l.componentStack))};s.displayName="ErrorWithStack";const o=()=>(0,t.css)({width:"500px",margin:"64px auto"})},37270:(Y,I,e)=>{"use strict";e.d(I,{gH:()=>d,wI:()=>y});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(20978),m=e(47172),l=e(83195),i=e(40845),c=e(42418),u=e(14578),f=e(73569);function d({options:P,children:C,readAs:D,onLoad:T,fileListRenderer:M,onFileRemove:O}){const[S,p]=(0,s.useState)([]),[x,A]=(0,s.useState)([]),R=(0,l.j_)("decbytes")(P?.maxSize?P?.maxSize:0),B=(0,s.useCallback)((q,le)=>{p(me=>me.map(k=>(k.id===q.id&&le(k),k)))},[]),U=(0,s.useCallback)((q,le,me)=>{let k=q.map(g);if(P?.multiple===!1?p(k):p(ee=>[...ee,...k]),J(le),P?.onDrop)P.onDrop(q,le,me);else for(const ee of k){const X=new FileReader,j=()=>{D?X[D](ee.file):X.readAsText(ee.file)};B(ee,ne=>{ne.abortUpload=()=>{X.abort()},ne.retryUpload=()=>{B(ee,te=>{te.error=null,te.progress=void 0}),j()}}),X.onabort=()=>{B(ee,ne=>{ne.error=new DOMException("Aborted")})},X.onprogress=ne=>{B(ee,te=>{te.progress=ne.loaded})},X.onload=()=>{T?.(X.result)},X.onerror=()=>{B(ee,ne=>{ne.error=X.error})},j()}},[T,P,D,B]),F=q=>{const le=S.filter(me=>q.id!==me.id);p(le),O?.(q)},{getRootProps:K,getInputProps:w,isDragActive:L}=(0,o.VB)({...P,useFsAccessApi:!1,onDrop:U,accept:h(P?.accept)}),V=(0,i.$j)(),N=b(V,L),z=S.map(q=>M?M(q,F):s.createElement(f.I,{key:q.id,file:q,removeFile:F})),J=q=>{let le=[];q.map(me=>{me.errors.map(k=>{le.findIndex(ee=>ee.code===k.code&&ee.message===k.message)===-1&&le.push(k)})}),A(le)},G=q=>s.createElement("div",{className:N.errorAlert},s.createElement(c.F,{title:"Upload failed",severity:"error",onRemove:H},q.map(le=>{switch(le.code){case m.O4.FileTooLarge:return s.createElement("div",{key:le.message+le.code},"File is larger than ",(0,l.cN)(R));default:return s.createElement("div",{key:le.message+le.code},le.message)}}))),H=()=>{A([])};return s.createElement("div",{className:N.container},s.createElement("div",{"data-testid":"dropzone",...K({className:N.dropzone})},s.createElement("input",{...w()}),C??s.createElement(y,{primaryText:a(S,P)})),x.length>0&&G(x),s.createElement("small",{className:(0,t.cx)(N.small,N.acceptContainer)},P?.maxSize&&`Max file size: ${(0,l.cN)(R)}`,P?.maxSize&&P?.accept&&s.createElement("span",{className:N.acceptSeparator},"|"),P?.accept&&v(P.accept)),z)}function E(P){return["txt","json","csv","xls","yml"].some(C=>P.match(C))?"text/plain":"application/octet-stream"}function h(P){return(0,n.isString)(P)?{[E(P)]:[P]}:Array.isArray(P)?P.reduce((C,D)=>{const T=E(D);return C[T]=C[T]?[...C[T],D]:[D],C},{}):P}function y({primaryText:P="Drop file here or click to upload",secondaryText:C=""}){const D=(0,i.$j)(),T=b(D);return s.createElement("div",{className:(0,t.cx)(T.defaultDropZone),"data-testid":"file-drop-zone-default-children"},s.createElement(u.I,{className:(0,t.cx)(T.icon),name:"upload",size:"xl"}),s.createElement("h6",{className:(0,t.cx)(T.primaryText)},P),s.createElement("small",{className:T.small},C))}function a(P,C){return C?.multiple===void 0||C?.multiple?"Upload file":P.length?"Replace file":"Upload file"}function v(P){return(0,n.isString)(P)?`Accepted file type: ${P}`:Array.isArray(P)?`Accepted file types: ${P.join(", ")}`:`Accepted file types: ${Object.values(P).flat().join(", ")}`}function g(P){return{id:(0,n.uniqueId)("file"),file:P,error:null}}function b(P,C){return{container:(0,t.css)({display:"flex",flexDirection:"column",width:"100%",padding:P.spacing(2),borderRadius:P.shape.radius.default,border:`1px dashed ${P.colors.border.strong}`,backgroundColor:C?P.colors.background.secondary:P.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,t.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,t.css)({textAlign:"center"}),icon:(0,t.css)({marginBottom:P.spacing(1)}),primaryText:(0,t.css)({marginBottom:P.spacing(1)}),acceptContainer:(0,t.css)({textAlign:"center",margin:0}),acceptSeparator:(0,t.css)({margin:`0 ${P.spacing(1)}`}),small:(0,t.css)({color:P.colors.text.secondary}),errorAlert:(0,t.css)({paddingTop:"10px"})}}},73569:(Y,I,e)=>{"use strict";e.d(I,{I:()=>u});var t=e(32196),n=e(96540),r=e(83195),s=e(40845),o=e(53550),m=e(55852),l=e(14578),i=e(29158);const c="Remove file";function u({file:d,removeFile:E}){const h=(0,s.of)(f),{file:y,progress:a,error:v,abortUpload:g,retryUpload:b}=d,P=()=>v?n.createElement(n.Fragment,null,n.createElement("span",{className:h.error},v.message),b&&n.createElement(i.K,{name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:b}),E&&n.createElement(i.K,{className:b?h.marginLeft:"",name:"trash-alt",onClick:()=>E(d),tooltip:c})):a&&y.size>a?n.createElement(n.Fragment,null,n.createElement("progress",{className:h.progressBar,max:y.size,value:a}),n.createElement("span",{className:h.paddingLeft},Math.round(a/y.size*100),"%"),g&&n.createElement(m.$n,{variant:"secondary",type:"button",fill:"text",onClick:g},"Cancel upload")):E&&n.createElement(i.K,{name:"trash-alt",onClick:()=>E(d),tooltip:c,tooltipPlacement:"top"}),C=(0,r.j_)("decbytes")(y.size);return n.createElement("div",{className:h.fileListContainer},n.createElement("span",{className:h.fileNameWrapper},n.createElement(l.I,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:h.padding},(0,o.i)(y.name)),n.createElement("span",null,(0,r.cN)(C))),n.createElement("div",{className:h.fileNameWrapper},P()))}function f(d){return{fileListContainer:(0,t.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:d.spacing(2),border:`1px dashed ${d.colors.border.medium}`,backgroundColor:`${d.colors.background.secondary}`,marginTop:d.spacing(1)}),fileNameWrapper:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,t.css)({padding:d.spacing(0,1)}),paddingLeft:(0,t.css)({paddingLeft:d.spacing(2)}),marginLeft:(0,t.css)({marginLeft:d.spacing(1)}),error:(0,t.css)({paddingRight:d.spacing(2),color:d.colors.error.text}),progressBar:(0,t.css)({borderRadius:d.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:d.colors.border.weak,borderRadius:d.shape.radius.default},"::-webkit-progress-value":{backgroundColor:d.colors.primary.main,borderRadius:d.shape.radius.default}})}}},92887:(Y,I,e)=>{"use strict";e.d(I,{IB:()=>n.I,gH:()=>t.gH,wI:()=>t.wI});var t=e(37270),n=e(73569)},73546:(Y,I,e)=>{"use strict";e.d(I,{e:()=>u});var t=e(32196),n=e(96540),r=e(62938),s=e(13544),o=e(40845),m=e(16797),l=e(53550),i=e(55852),c=e(14578);const u=({onFileUpload:d,className:E,children:h="Upload file",accept:y="*",size:a="md",showFileName:v})=>{const g=(0,o.of)(f(a)),[b,P]=(0,n.useState)(""),C=(0,r.A)(),D=(0,n.useCallback)(T=>{const M=T.currentTarget?.files?.[0];M&&P(M.name??""),d(T)},[d]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:C,className:g.fileUpload,onChange:D,multiple:!1,accept:y,"data-testid":s.Tp.components.FileUpload.inputField}),n.createElement("label",{htmlFor:C,className:(0,t.cx)(g.labelWrapper,E)},n.createElement(c.I,{name:"upload",className:g.icon}),h),v&&b&&n.createElement("span",{"aria-label":"File name",className:g.fileName,"data-testid":s.Tp.components.FileUpload.fileNameSpan},(0,l.i)(b)))},f=d=>E=>{const h=(0,i.hs)({theme:E,variant:"primary",size:d,iconOnly:!1}),y=(0,m.getFocusStyles)(E);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":y,"&:focus-visible + label":y}),labelWrapper:h.button,icon:h.icon,fileName:(0,t.css)({marginLeft:E.spacing(.5)})}}},67647:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>l});var t=e(96540),n=e(54479);function r(...i){const c=t.useRef(null);return t.useEffect(()=>{i.forEach(u=>{u&&(typeof u=="function"?u(c.current):u.current=c.current)})},[i]),c}var s=e(55852),o=e(14578),m=e(10354);const l=t.forwardRef(({value:i,width:c,onChange:u,escapeRegex:f=!0,...d},E)=>{const h=t.useRef(null),y=r(E,h),a=i!==""?t.createElement(s.$n,{icon:"times",fill:"text",size:"sm",onClick:v=>{h.current?.focus(),u(""),v.stopPropagation()}},"Clear"):null;return t.createElement(m.p,{prefix:t.createElement(o.I,{name:"search"}),suffix:a,width:c,type:"text",value:f?(0,n.xb)(i??""):i,onChange:v=>u(f?(0,n.jD)(v.currentTarget.value):v.currentTarget.value),...d,ref:y})});l.displayName="FilterInput"},92174:(Y,I,e)=>{"use strict";e.d(I,{m:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(14578);const m=({label:i,selected:c,onClick:u,icon:f="check"})=>{const d=(0,r.of)(l),E=(0,r.of)(s.my);return n.createElement("button",{type:"button",className:(0,t.cx)(E,d.wrapper,c&&d.selected),onClick:u},n.createElement("span",null,i),c&&n.createElement(o.I,{name:f,className:d.icon}))},l=i=>({wrapper:(0,t.css)({background:i.colors.background.secondary,borderRadius:i.shape.radius.pill,padding:i.spacing(0,2),fontSize:i.typography.bodySmall.fontSize,fontWeight:i.typography.fontWeightMedium,lineHeight:i.typography.bodySmall.lineHeight,color:i.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${i.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:i.colors.action.hover,color:i.colors.text.primary}}),selected:(0,t.css)({color:i.colors.text.primary,background:i.colors.action.selected,"&:hover":{background:i.colors.action.focus}}),icon:(0,t.css)({marginLeft:i.spacing(.5)})})},90090:(Y,I,e)=>{"use strict";e.d(I,{z:()=>o});var t=e(32196),n=e(96540),r=e(38894);const s={labelWidth:6,inputWidth:12},o=({label:l,tooltip:i,labelWidth:c,inputWidth:u,inputEl:f,className:d,interactive:E,...h})=>{const y=m();return n.createElement("div",{className:(0,t.cx)(y.formField,d)},n.createElement(r.I,{width:c,tooltip:i,interactive:E},l),f||n.createElement("input",{type:"text",className:`gf-form-input ${u?`width-${u}`:""}`,...h,disabled:h.disabled}))};o.displayName="FormField",o.defaultProps=s;const m=()=>({formField:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},38894:(Y,I,e)=>{"use strict";e.d(I,{I:()=>l});var t=e(46942),n=e.n(t),r=e(96540),s=e(14578),o=e(56034);const l=({children:i,isFocused:c,isInvalid:u,className:f,htmlFor:d,tooltip:E,width:h,interactive:y,...a})=>{const v=n()(f,`gf-form-label width-${h||"10"}`,{"gf-form-label--is-focused":c,"gf-form-label--is-invalid":u});return r.createElement("label",{className:v,...a,htmlFor:d},i,E&&r.createElement(o.m,{placement:"top",content:E,theme:"info",interactive:y},r.createElement(s.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},9286:(Y,I,e)=>{"use strict";e.d(I,{i:()=>r});var t=e(96540);function n(s){return s<20?.9:s<26?.8:.6}const r=({value:s,className:o,style:m,...l})=>{const i=(s.prefix??"").length>0,c=(s.suffix??"").length>0;let u;if(m&&m.fontSize&&typeof m.fontSize=="number"){const f=m.fontSize,d=n(f);u={fontSize:f*d}}return t.createElement("div",{className:o,style:m,...l},t.createElement("div",null,i&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),c&&t.createElement("span",{style:u},s.suffix)))};r.displayName="FormattedDisplayValue"},10880:(Y,I,e)=>{"use strict";e.d(I,{S:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(16797),o=e(60029);const m=n.forwardRef(({label:i,description:c,value:u,htmlValue:f,onChange:d,disabled:E,className:h,indeterminate:y,invalid:a,...v},g)=>{const b=(0,n.useCallback)(D=>{d&&d(D)},[d]),P=(0,r.of)(l,a),C=y?"mixed":void 0;return n.createElement("label",{className:(0,t.cx)(P.wrapper,h)},n.createElement("div",{className:P.checkboxWrapper},n.createElement("input",{type:"checkbox",className:(0,t.cx)(P.input,y&&P.inputIndeterminate),checked:u,disabled:E,onChange:b,value:f,"aria-checked":C,...v,ref:g}),n.createElement("span",{className:P.checkmark})),i&&n.createElement("span",{className:P.label},i),c&&n.createElement("span",{className:P.description},c))}),l=(i,c=!1)=>{const u=(0,o.f)(i),f=2,d=1,E=h=>c?i.colors.error.border:h;return{wrapper:(0,t.css)({display:"inline-grid",alignItems:"center",columnGap:i.spacing(d),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,t.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,s.getFocusStyles)(i),"&:focus:not(:focus-visible) + span":(0,s.getMouseFocusStyles)(i),"&:checked + span":{background:i.colors.primary.main,border:`1px solid ${E(i.colors.primary.main)}`,"&:hover":{background:i.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"4px",top:0,width:"6px",height:"12px",border:`solid ${i.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:i.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${E(i.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:i.colors.action.disabledBackground},"&:after":{borderColor:i.colors.action.disabledText}}}),inputIndeterminate:(0,t.css)({"&[aria-checked='mixed'] + span":{border:`1px solid ${E(i.colors.primary.main)}`,background:i.colors.primary.main,"&:hover":{background:i.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${i.colors.primary.contrastText}`,backgroundColor:i.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:i.colors.action.disabledBackground,border:`1px solid ${E(i.colors.error.transparent)}`,"&:after":{borderColor:i.colors.action.disabledText}}}),checkboxWrapper:(0,t.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,t.css)({position:"relative",zIndex:2,display:"inline-block",width:i.spacing(f),height:i.spacing(f),borderRadius:i.shape.radius.default,background:i.components.input.background,border:`1px solid ${E(i.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:E(i.components.input.borderHover)}}),label:(0,t.cx)(u.label,(0,t.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:i.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,t.cx)(u.description,(0,t.css)({gridColumnStart:2,gridRowStart:2,lineHeight:i.typography.bodySmall.lineHeight,marginTop:0}))}};m.displayName="Checkbox"},88575:(Y,I,e)=>{"use strict";e.d(I,{D:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(67892),o=e(72093),m=e(60029);const l=n.forwardRef(({label:u,description:f,horizontal:d,invalid:E,loading:h,disabled:y,required:a,error:v,children:g,className:b,validationMessageHorizontalOverflow:P,htmlFor:C,...D},T)=>{const M=(0,r.of)(c),O=C??(0,s.getChildId)(g),S=typeof u=="string"?n.createElement(m.J,{htmlFor:O,description:f},`${u}${a?" *":""}`):u,p=i({invalid:E,disabled:y,loading:h});return n.createElement("div",{className:(0,t.cx)(M.field,d&&M.fieldHorizontal,b),...D},S,n.createElement("div",null,n.createElement("div",{ref:T},n.cloneElement(g,p)),E&&v&&!d&&n.createElement("div",{className:(0,t.cx)(M.fieldValidationWrapper,{[M.validationMessageHorizontalOverflow]:!!P})},n.createElement(o.P,null,v))),E&&v&&d&&n.createElement("div",{className:(0,t.cx)(M.fieldValidationWrapper,M.fieldValidationWrapperHorizontal,{[M.validationMessageHorizontalOverflow]:!!P})},n.createElement(o.P,null,v)))});l.displayName="Field";function i(u){for(const f in u)u[f]===void 0&&delete u[f];return u}const c=u=>({field:(0,t.css)({display:"flex",flexDirection:"column",marginBottom:u.spacing(2)}),fieldHorizontal:(0,t.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,t.css)({marginTop:u.spacing(.5)}),fieldValidationWrapperHorizontal:(0,t.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,t.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})},95984:(Y,I,e)=>{"use strict";e.d(I,{E:()=>n});var t=e(49785);const n=({name:r,control:s,children:o,...m})=>{const{fields:l,append:i,prepend:c,remove:u,swap:f,move:d,insert:E}=(0,t.jz)({control:s,name:r,...m});return o({fields:l,append:i,prepend:c,remove:u,swap:f,move:d,insert:E})}},84167:(Y,I,e)=>{"use strict";e.d(I,{n:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(17408);const o=({label:l,children:i,className:c,...u})=>{const f=(0,r.of)(m);return n.createElement("fieldset",{className:(0,t.cx)(f.wrapper,c),...u},l&&n.createElement(s.s,null,l),i)},m=l=>({wrapper:(0,t.css)({marginBottom:l.spacing(4),"&:last-child":{marginBottom:0}})})},72093:(Y,I,e)=>{"use strict";e.d(I,{P:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(14578);const o=({children:l,horizontal:i,className:c})=>{const u=(0,r.of)(m),f=(0,t.cx)(i?u.horizontal:u.vertical,c);return n.createElement("div",{role:"alert",className:f},n.createElement(s.I,{className:u.fieldValidationMessageIcon,name:"exclamation-triangle"}),l)},m=l=>{const i=`
      font-size: ${l.typography.size.sm};
      font-weight: ${l.typography.fontWeightMedium};
      padding: ${l.spacing(.5,1)};
      color: ${l.colors.error.contrastText};
      background: ${l.colors.error.main};
      border-radius: ${l.shape.radius.default};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${l.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,t.css)(i,{margin:l.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${l.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,t.css)(i,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,t.css)({marginRight:l.spacing()})}}},51253:(Y,I,e)=>{"use strict";e.d(I,{l:()=>s});var t=e(32196),n=e(96540),r=e(49785);function s({defaultValues:o,onSubmit:m,validateOnMount:l=!1,validateFieldsOnMount:i,children:c,validateOn:u="onSubmit",maxWidth:f=600,...d}){const{handleSubmit:E,trigger:h,formState:y,...a}=(0,r.mN)({mode:u,defaultValues:o});return(0,n.useEffect)(()=>{l&&h(i)},[h,i,l]),n.createElement("form",{className:(0,t.css)({maxWidth:f!=="none"?f+"px":f,width:"100%"}),onSubmit:E(m),...d},c({errors:y.errors,formState:y,trigger:h,...a}))}},14186:(Y,I,e)=>{"use strict";e.d(I,{I:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(67892),o=e(72093),m=e(76892);const l=({children:c,label:u,tooltip:f,labelWidth:d="auto",invalid:E,loading:h,disabled:y,required:a,className:v,htmlFor:g,grow:b,shrink:P,error:C,transparent:D,interactive:T,...M})=>{const O=(0,r.$j)(),S=i(O,b,P),p=g??(0,s.getChildId)(c),x=typeof u=="string"?n.createElement(m.c,{interactive:T,width:d,tooltip:f,htmlFor:p,transparent:D},`${u}${a?" *":""}`):u;return n.createElement("div",{className:(0,t.cx)(S.container,v),...M},x,n.createElement("div",{className:S.childContainer},n.cloneElement(c,{invalid:E,disabled:y,loading:h}),E&&C&&n.createElement("div",{className:(0,t.cx)(S.fieldValidationWrapper)},n.createElement(o.P,null,C))))};l.displayName="InlineField";const i=(c,u,f)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${u?1:0} ${f?1:0} auto`,margin:`0 ${c.spacing(.5)} ${c.spacing(.5)} 0`}),childContainer:(0,t.css)({flex:`${u?1:0} ${f?1:0} auto`}),fieldValidationWrapper:(0,t.css)({marginTop:c.spacing(.5)})})},39268:(Y,I,e)=>{"use strict";e.d(I,{C:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:l,...i})=>{const c=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(c.container,l),...i},m)},o=m=>({container:(0,t.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:m.spacing(.5)})})},76892:(Y,I,e)=>{"use strict";e.d(I,{c:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(14578),o=e(56034);const m=({children:i,className:c,tooltip:u,width:f,transparent:d,interactive:E,as:h="label",...y})=>{const a=(0,r.of)(l,d,f);return n.createElement(h,{className:(0,t.cx)(a.label,c),...y},i,u&&n.createElement(o.m,{interactive:E,placement:"top",content:u,theme:"info"},n.createElement(s.I,{tabIndex:0,name:"info-circle",size:"sm",className:a.icon})))},l=(i,c=!1,u)=>({label:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:i.spacing(0,1),fontWeight:i.typography.fontWeightMedium,fontSize:i.typography.size.sm,backgroundColor:c?"transparent":i.colors.background.secondary,height:i.spacing(i.components.height.md),lineHeight:i.spacing(i.components.height.md),marginRight:i.spacing(.5),borderRadius:i.shape.radius.default,border:"none",width:u?u!=="auto"?`${8*u}px`:u:"100%",color:i.colors.text.primary}),icon:(0,t.css)({color:i.colors.text.secondary,marginLeft:"10px",":hover":{color:i.colors.text.primary}})})},63056:(Y,I,e)=>{"use strict";e.d(I,{e:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:l,grow:i,...c})=>{const u=(0,r.of)(o,i);return n.createElement("div",{className:(0,t.cx)(u.container,l),...c},m)};s.displayName="InlineSegmentGroup";const o=(m,l)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${l?1:0} 0 auto`,marginBottom:m.spacing(.5)})})},60029:(Y,I,e)=>{"use strict";e.d(I,{J:()=>o,f:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(14578);const o=({children:l,description:i,className:c,category:u,...f})=>{const d=(0,r.of)(m),E=u?.map((h,y)=>n.createElement("span",{className:d.categories,key:`${h}/${y}`},n.createElement("span",null,h),n.createElement(s.I,{name:"angle-right",className:d.chevron})));return n.createElement("div",{className:(0,t.cx)(d.label,c)},n.createElement("label",{...f},n.createElement("div",{className:d.labelContent},E,l),i&&n.createElement("span",{className:d.description},i)))},m=l=>({label:(0,t.css)({label:"Label",fontSize:l.typography.size.sm,fontWeight:l.typography.fontWeightMedium,lineHeight:1.25,marginBottom:l.spacing(.5),color:l.colors.text.primary,maxWidth:"480px"}),labelContent:(0,t.css)({display:"flex",alignItems:"center"}),description:(0,t.css)({label:"Label-description",color:l.colors.text.secondary,fontSize:l.typography.size.sm,fontWeight:l.typography.fontWeightRegular,marginTop:l.spacing(.25),display:"block"}),categories:(0,t.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,t.css)({margin:l.spacing(0,.25)})})},91634:(Y,I,e)=>{"use strict";e.d(I,{O:()=>o,p:()=>m});var t=e(46942),n=e.n(t),r=e(96540),s=e(29734),o=(l=>(l.Invalid="invalid",l.Valid="valid",l))(o||{});class m extends r.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=i=>c=>{const u=(0,s.tf)(c.target.value,i);this.setState(f=>({...f,error:u?u[0]:null}))},this.populateEventPropsWithStatus=(i,c)=>{const u={...i};return c&&Object.keys(s.Pw).forEach(f=>{((0,s.K)(f,c)||i[f])&&(u[f]=async d=>{d.persist(),(0,s.K)(f,c)&&await this.validatorAsync(c[f]).apply(this,[d]),i[f]&&i[f].apply(null,[d,this.status])})}),u}}static{this.defaultProps={className:""}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:i,className:c,hideErrorMessage:u,inputRef:f,...d}=this.props,{error:E}=this.state,h=n()("gf-form-input",{invalid:this.isInvalid},c),y=this.populateEventPropsWithStatus(d,i);return r.createElement("div",{style:{flexGrow:1}},r.createElement("input",{...y,ref:f,className:h}),E&&!u&&r.createElement("span",null,E))}}},24169:(Y,I,e)=>{"use strict";e.d(I,{A:()=>o,s:()=>s});var t=e(96540),n=e(71332),r=e(14578);const s=m=>{const l=m.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...m},t.createElement(r.I,{name:l?"angle-up":"angle-down",style:{marginTop:"7px"}}))},o=s},11206:(Y,I,e)=>{"use strict";e.d(I,{A:()=>s,l:()=>r});var t=e(96540),n=e(71332);const r=o=>{const{children:m}=o;return t.createElement(n.c.NoOptionsMessage,{...o},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},m)))},s=r},99091:(Y,I,e)=>{"use strict";e.d(I,{DW:()=>C,l6:()=>P});var t=e(46942),n=e.n(t),r=e(96540),s=e(71332),o=e(46005),m=e(8539),l=e(66963),i=e(60578),c=e(40276),u=e(80970),f=e(62235),d=e(23731),E=e(56034),h=e(24169),y=e(11206),a=e(14578);const v=M=>{const{children:O,isSelected:S,data:p}=M;return r.createElement(s.c.Option,{...M},r.createElement("div",{className:"gf-form-select-box__desc-option"},p.imgUrl&&r.createElement("img",{className:"gf-form-select-box__desc-option__img",src:p.imgUrl,alt:""}),r.createElement("div",{className:"gf-form-select-box__desc-option__body"},r.createElement("div",null,O),p.description&&r.createElement("div",{className:"gf-form-select-box__desc-option__desc"},p.description)),S&&r.createElement(a.I,{name:"check","aria-hidden":"true"})))},g=null,b=M=>r.createElement(s.c.MenuList,{...M},r.createElement(c.E,{autoHide:!1,autoHeightMax:"inherit"},M.children));class P extends r.PureComponent{static{this.contextType=i.D}static{this.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:v,SingleValue:f.K,IndicatorsContainer:h.A,MenuList:b,Group:u.n}}}render(){const{defaultValue:O,getOptionLabel:S,getOptionValue:p,onChange:x,options:A,placeholder:R,width:B,value:U,className:F,isDisabled:K,isLoading:w,isSearchable:L,isClearable:V,backspaceRemovesValue:N,isMulti:z,autoFocus:J,openMenuOnFocus:G,onBlur:H,maxMenuHeight:q,noOptionsMessage:le,isOpen:me,components:k,tooltipContent:ee,tabSelectsValue:X,onCloseMenu:j,onOpenMenu:ne,allowCustomValue:te,formatCreateLabel:oe,"aria-label":ie}=this.props;let ue="";B&&(ue="width-"+B);let be=o.Ay;const ge={};te&&(be=l.A,ge.formatCreateLabel=oe??(Be=>Be));const re=n()("gf-form-input","gf-form-input--form-dropdown",ue,F),ye={...P.defaultProps.components,...k};return r.createElement(D,{onCloseMenu:j,onOpenMenu:ne,tooltipContent:ee,isOpen:me},(Be,ve)=>r.createElement(be,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:re,components:ye,defaultValue:O,value:U,getOptionLabel:S,getOptionValue:p,menuShouldScrollIntoView:!1,isSearchable:L,onChange:x,options:A,placeholder:R||"Choose",styles:(0,d.A)(this.context),isDisabled:K,isLoading:w,isClearable:V,autoFocus:J,onBlur:H,openMenuOnFocus:G,maxMenuHeight:q,noOptionsMessage:le,isMulti:z,backspaceRemovesValue:N,menuIsOpen:me,onMenuOpen:Be,onMenuClose:ve,tabSelectsValue:X,"aria-label":ie,...ge}))}}class C extends r.PureComponent{static{this.contextType=i.D}static{this.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300}}render(){const{defaultValue:O,getOptionLabel:S,getOptionValue:p,onChange:x,placeholder:A,width:R,value:B,className:U,loadOptions:F,defaultOptions:K,isLoading:w,loadingMessage:L,noOptionsMessage:V,isDisabled:N,isSearchable:z,isClearable:J,backspaceRemovesValue:G,autoFocus:H,onBlur:q,openMenuOnFocus:le,maxMenuHeight:me,isMulti:k,tooltipContent:ee,onCloseMenu:X,onOpenMenu:j,isOpen:ne}=this.props;let te="";R&&(te="width-"+R);const oe=n()("gf-form-input","gf-form-input--form-dropdown",te,U);return r.createElement(D,{onCloseMenu:X,onOpenMenu:j,tooltipContent:ee,isOpen:ne},(ie,ue)=>r.createElement(m.A,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:oe,components:{Option:v,SingleValue:f.K,IndicatorsContainer:h.A,NoOptionsMessage:y.A},defaultValue:O,value:B,getOptionLabel:S,getOptionValue:p,menuShouldScrollIntoView:!1,onChange:x,loadOptions:F,isLoading:w,defaultOptions:K,placeholder:A||"Choose",styles:(0,d.A)(this.context),loadingMessage:L,noOptionsMessage:V,isDisabled:N,isSearchable:z,isClearable:J,autoFocus:H,onBlur:q,openMenuOnFocus:le,maxMenuHeight:me,isMulti:k,backspaceRemovesValue:G}))}}class D extends r.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:O}=this.props;O&&O(),this.setState({isOpenInternal:!1})}}render(){const{children:O,isOpen:S,tooltipContent:p}=this.props,{isOpenInternal:x}=this.state;let A;return(x||S)&&(A=!1),p?r.createElement(E.m,{show:A,content:p,placement:"bottom"},r.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))):r.createElement("div",null,O(this.onOpenMenu,this.onCloseMenu))}}const T=null},74716:(Y,I,e)=>{"use strict";e.d(I,{d:()=>m});var t=e(2543),n=e.n(t),r=e(96540),s=e(14578),o=e(56034);class m extends r.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=i=>{i.stopPropagation(),this.props.onChange(i)}}render(){const{labelClass:i="",switchClass:c="",label:u,checked:f,disabled:d,transparent:E,className:h,tooltip:y,tooltipPlacement:a}=this.props,v=this.state.id,g=`gf-form-label ${i} ${E?"gf-form-label--transparent":""} pointer`,b=`gf-form-switch ${c} ${E?"gf-form-switch--transparent":""}`;return r.createElement("div",{className:"gf-form-switch-container-react"},r.createElement("label",{htmlFor:v,className:`gf-form gf-form-switch-container ${h||""}`},u&&r.createElement("div",{className:g},u,y&&r.createElement(o.m,{placement:a||"auto",content:y,theme:"info"},r.createElement(s.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}}))),r.createElement("div",{className:b},r.createElement("input",{disabled:d,id:v,type:"checkbox",checked:f,onChange:this.internalOnChange}),r.createElement("span",{className:"gf-form-switch__slider"}))))}}},17408:(Y,I,e)=>{"use strict";e.d(I,{s:()=>o});var t=e(32196),n=e(96540),r=e(40845);const s=m=>({legend:(0,t.css)({fontSize:m.typography.h3.fontSize,fontWeight:m.typography.fontWeightRegular,margin:m.spacing(0,0,2,0)})}),o=({children:m,className:l,...i})=>{const c=(0,r.of)(s);return n.createElement("legend",{className:(0,t.cx)(c.legend,l),...i},m)}},94354:(Y,I,e)=>{"use strict";e.d(I,{z:()=>E});var t=e(32196),n=e(2543),r=e(96540),s=e(8887),o=e(40845),m=e(14578),l=e(13544),i=e(16797),c=e(56034),u=e(87266);const f=r.forwardRef(({children:y,active:a=!1,disabled:v=!1,size:g="md",onChange:b,onClick:P,id:C,name:D=void 0,description:T,fullWidth:M,"aria-label":O},S)=>{const p=(0,o.of)(d,g,M),x=r.createElement("input",{type:"radio",className:p.radio,onChange:b,onClick:P,disabled:v,id:C,checked:a,name:D,"aria-label":O,ref:S});return T?r.createElement("div",{className:p.radioOption,"data-testid":l.Tp.components.RadioButton.container},r.createElement(c.m,{content:T,placement:"bottom"},x),r.createElement("label",{className:p.radioLabel,htmlFor:C,title:T||O},y)):r.createElement("div",{className:p.radioOption,"data-testid":l.Tp.components.RadioButton.container},x,r.createElement("label",{className:p.radioLabel,htmlFor:C,title:T||O},y))});f.displayName="RadioButton";const d=(y,a,v)=>{const{fontSize:g,height:b,padding:P}=(0,u.SM)(a,y),C=y.colors.text.secondary,D=y.colors.text.primary,T=b*y.spacing.gridSize-4-2;return{radioOption:(0,t.css)({display:"flex",justifyContent:"space-between",position:"relative",flex:v?"1 0 0":"none",textAlign:"center"}),radio:(0,t.css)({position:"absolute",opacity:0,zIndex:2,width:"100% !important",height:"100%",cursor:"pointer","&:checked + label":{color:y.colors.text.primary,fontWeight:y.typography.fontWeightMedium,background:y.colors.action.selected,zIndex:1},"&:focus + label, &:focus-visible + label":(0,i.getFocusStyles)(y),"&:focus:not(:focus-visible) + label":(0,i.getMouseFocusStyles)(y),"&:disabled + label":{color:y.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"center",fontSize:g,height:`${T}px`,lineHeight:`${T}px`,color:C,padding:y.spacing(0,P),borderRadius:y.shape.radius.default,background:y.colors.background.primary,cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",flexGrow:1,"&:hover":{color:D}})}};function E({options:y,value:a,onChange:v,onClick:g,disabled:b,disabledOptions:P,size:C="md",id:D,className:T,fullWidth:M=!1,autoFocus:O=!1,"aria-label":S,invalid:p=!1}){const x=(0,r.useCallback)(K=>()=>{v&&v(K.value)},[v]),A=(0,r.useCallback)(K=>()=>{g&&g(K.value)},[g]),R=D??(0,n.uniqueId)("radiogroup-"),B=(0,r.useRef)(R),U=(0,o.of)(h),F=(0,r.useRef)(null);return(0,r.useEffect)(()=>{O&&F.current&&F.current.focus()},[O]),r.createElement("div",{role:"radiogroup","aria-label":S,className:(0,t.cx)(U.radioGroup,M&&U.fullWidth,p&&U.invalid,T)},y.map((K,w)=>{const L=P&&K.value&&P.includes(K.value),V=K.icon?(0,s.Uo)(K.icon):void 0,N=!!(K.imgUrl||K.label||K.component);return r.createElement(f,{size:C,disabled:L||b,active:a===K.value,key:`o.label-${w}`,"aria-label":K.ariaLabel,onChange:x(K),onClick:A(K),id:`option-${K.value}-${R}`,name:B.current,description:K.description,fullWidth:M,ref:a===K.value?F:void 0},V&&r.createElement(m.I,{name:V,className:(0,t.cx)(N&&U.icon)}),K.imgUrl&&r.createElement("img",{src:K.imgUrl,alt:K.label,className:U.img}),K.label," ",K.component?r.createElement(K.component,null):null)}))}E.displayName="RadioButtonGroup";const h=y=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${y.components.input.borderColor}`,borderRadius:y.shape.radius.default,padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:(0,t.css)({marginRight:"6px"}),img:(0,t.css)({width:y.spacing(2),height:y.spacing(2),marginRight:y.spacing(1)}),invalid:(0,t.css)({border:`1px solid ${y.colors.error.border}`})})},5173:(Y,I,e)=>{"use strict";e.d(I,{a:()=>l});var t=e(32196),n=e(2543),r=e(96540),s=e(40845);const o=({id:c,name:u,label:f,checked:d,value:E,disabled:h,description:y,onChange:a})=>{const v=(0,s.of)(m);return r.createElement("label",{title:y,className:v.label},r.createElement("input",{id:c,name:u,type:"radio",checked:d,value:E,disabled:h,className:v.input,onChange:()=>a&&a(c)}),r.createElement("div",null,f,y&&r.createElement("div",{className:v.description},y)))},m=c=>({input:(0,t.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:c.colors.background.canvas,width:`${c.spacing(2)} !important`,height:c.spacing(2),border:`1px solid ${c.colors.border.medium}`,borderRadius:c.shape.radius.circle,margin:"3px 0",":checked":{backgroundColor:c.v1.palette.white,border:`5px solid ${c.colors.primary.main}`},":disabled":{backgroundColor:`${c.colors.action.disabledBackground} !important`,borderColor:c.colors.border.weak},":disabled:checked":{border:`1px solid ${c.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:c.colors.text.disabled,borderRadius:c.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${c.colors.background.canvas}, 0 0 0 3px ${c.colors.primary.main}`}}),label:(0,t.css)({fontSize:c.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${c.spacing(2)} auto`,gap:c.spacing(1)}),description:(0,t.css)({fontSize:c.typography.size.sm,color:c.colors.text.secondary})});function l({name:c,id:u,options:f,value:d,onChange:E,className:h,disabled:y,disabledOptions:a=[]}){const v=(0,s.of)(i),g=u??(0,n.uniqueId)("radiogroup-list-");return r.createElement("div",{id:u,className:(0,t.cx)(v.container,h),role:"radiogroup"},f.map((b,P)=>{const C=`${g}-${P}`,D=d&&d===b.value,T=y||a.some(O=>O===b.value),M=()=>E&&b.value&&E(b.value);return r.createElement(o,{key:P,id:C,name:c,label:b.label,description:b.description,checked:D,value:b.value,disabled:T,onChange:M})}))}const i=c=>({container:(0,t.css)({display:"grid",gap:c.spacing(1)})})},87266:(Y,I,e)=>{"use strict";e.d(I,{SM:()=>i,Xb:()=>s,g$:()=>o,gm:()=>r,lH:()=>m});var t=e(32196),n=e(16797);const r=c=>(0,t.css)({"&:focus":(0,n.getFocusStyles)(c)}),s=(c,u=!1)=>{const f=u?c.colors.error.border:c.components.input.borderColor,d=u?c.colors.error.shade:c.components.input.borderHover,E=c.components.input.background,h=c.components.input.text,y=c.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(o(c),(0,t.css)({background:E,lineHeight:c.typography.body.lineHeight,fontSize:c.typography.size.md,color:h,border:`1px solid ${f}`,"&:-webkit-autofill, &:-webkit-autofill:hover":{boxShadow:`inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${E}!important`,WebkitTextFillColor:`${h} !important`,borderColor:y},"&:-webkit-autofill:focus":{boxShadow:`0 0 0 2px ${c.colors.background.primary}, 0 0 0px 4px ${c.colors.primary.main}, inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${E}!important`,WebkitTextFillColor:`${h} !important`},"&:hover":{borderColor:d},"&:focus":{outline:"none"},"&:disabled":{backgroundColor:c.colors.action.disabledBackground,color:c.colors.action.disabledText,border:`1px solid ${c.colors.action.disabledBackground}`,"&:hover":{borderColor:f}},"&::placeholder":{color:c.colors.text.disabled,opacity:1}}))},o=c=>(0,t.css)({padding:c.spacing(0,1,0,1)}),m=()=>({sm:(0,t.css)({width:l("sm")}),md:(0,t.css)({width:l("md")}),lg:(0,t.css)({width:l("lg")}),auto:(0,t.css)({width:l("auto")})}),l=c=>{switch(c){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function i(c,u){switch(c){case"sm":return{padding:1,fontSize:u.typography.size.sm,height:u.components.height.sm};case"lg":return{padding:3,fontSize:u.typography.size.lg,height:u.components.height.lg};case"md":default:return{padding:2,fontSize:u.typography.size.md,height:u.components.height.md}}}},95164:(Y,I,e)=>{"use strict";e.d(I,{_:()=>y});var t=e(34796),n=e.n(t),r=e(96540),s=e(83195),o=e(58649),m=e(50082),l=e(52622),i=e(29413),c=e(55852),u=e(24293),f=e(47737);const d={mode:m.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function E(a,v,g,b){const P=g!=null,C=b===l.wV.Vertical?v:a,D=Math.min(C*.15/1.5,20),T=D*1.5,M=P?v-T:v,O=Math.min(M,a);return{showLabel:P,gaugeHeight:O,titleFontSize:D}}function h(a,v,g,b){if(v.color?.mode!==u.Y.Thresholds)return[{value:v.min??o.tw,color:g.color??u.F}];const P=v.thresholds??d,C=P.mode===m.O.Percentage,D=P.steps;let T=v.min??o.tw,M=v.max??o.d1;C&&(T=0,M=100);const O=(0,f.yQ)(T,D),S=(0,f.yQ)(M,D),p=[{value:+T.toFixed(a),color:b.visualization.getColorByName(O.color)}];let x=!0;for(let A=0;A<D.length;A++){const R=D[A];if(x){O===R&&(x=!1);continue}const B=D[A-1];if(p.push({value:R.value,color:b.visualization.getColorByName(B.color)}),R===S)break}return p.push({value:+M.toFixed(a),color:b.visualization.getColorByName(S.color)}),p}class y extends r.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:v,value:g,height:b,onClick:P,text:C,theme:D,orientation:T}=this.props,M=E(v,b,g.title,T),O=T===l.wV.Vertical?`${M.gaugeHeight}px`:"100%",S=r.createElement("div",{style:{height:`${M.gaugeHeight}px`,width:O},ref:p=>this.canvasElement=p});return r.createElement(r.Fragment,null,P?r.createElement("button",{className:(0,c.my)(D),type:"button",onClick:P},S):S,M.showLabel&&r.createElement("div",{style:{textAlign:"center",fontSize:C?.titleSize??M.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:O,top:"-4px",cursor:"default"}},g.title))}}static{this.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:d}}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:v,showThresholdLabels:g,showThresholdMarkers:b,width:P,height:C,theme:D,value:T,orientation:M}=this.props,O=E(P,C,T.title),S=M===l.wV.Vertical?O.gaugeHeight:P,p=Math.min(S,O.gaugeHeight),x=D.colors.background.secondary,A=g?1.5:1,R=Math.min(p/5.5,40)/A,B=R/5,U=(0,s.cN)(T),K=Math.min(S,p*1.3)*.9-((R+(b?B:0)+(g?10:0))*2+10),w=this.props.text?.valueSize??(0,i.Vr)(U,K,p,1,R*1.7),L=Math.max(w/2.5,12);let V=v.min??o.tw,N=v.max??o.d1,z=T.numeric;v.thresholds?.mode===m.O.Percentage&&(V=0,N=100,T.percent===void 0?z=(z-V)/(N-V)*100:z=T.percent*100);const J=v.decimals===void 0?2:v.decimals;b&&(V=+V.toFixed(J),N=+N.toFixed(J));const G={series:{gauges:{gauge:{min:V,max:N,neutralValue:v.custom?.neutral,background:{color:x},border:{color:null},shadow:{show:!1},width:R},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:h(J,v,T,D),label:{show:g,margin:B+1,font:{size:L}},show:b,width:B},value:{color:T.color,formatter:()=>U,font:{size:w,family:D.typography.fontFamily}},show:!0}}},H={data:[[0,z]],label:T.title};try{this.canvasElement&&n().plot(this.canvasElement,[H],G)}catch(q){console.error("Gauge rendering error",q,G,T)}}render(){return r.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}},14578:(Y,I,e)=>{"use strict";e.d(I,{I:()=>i});var t=e(32196),n=e(96540),r=e(8867),s=e(8887),o=e(40845),m=e(78318);const l=c=>({icon:(0,t.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"}),orange:(0,t.css)({fill:c.v1.palette.orange})}),i=n.forwardRef(({size:c="md",type:u="default",name:f,className:d,style:E,title:h="",...y},a)=>{const v=(0,o.of)(l);(0,s.n6)(f)||console.warn("Icon component passed an invalid icon name",f);const g=f==="fa fa-spinner"?"spinner":f,b=(0,m.Wj)(),P=(0,m.cs)(c),C=P,D=f.startsWith("gf-bar-align")?16:f.startsWith("gf-interp")?30:P,T=(0,m.Xi)(g,u),M=`${b}${T}/${g}.svg`,O=(0,t.cx)(v.icon,d,u==="mono"?{[v.orange]:f==="favorite"}:"",g==="spinner"&&"fa-spin");return n.createElement(r.default,{innerRef:a,src:M,width:D,height:C,title:h,className:O,style:E,...y})});i.displayName="Icon"},78318:(Y,I,e)=>{"use strict";e.d(I,{Wj:()=>o,Xi:()=>n,cs:()=>r});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(m,l){return m?.startsWith("gf-")?"custom":t.includes(m)?"mono":l==="default"?"unicons":l==="solid"?"solid":"mono"}function r(m){switch(m){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}let s;function o(){if(s)return s;const m=typeof window<"u"&&window.__grafana_public_path__;return m?s=m+"img/icons/":s="public/img/icons/",s}},29158:(Y,I,e)=>{"use strict";e.d(I,{K:()=>u});var t=e(32196),n=e(96540),r=e(95344),s=e(23596),o=e(40845),m=e(16797),l=e(14578),i=e(78318),c=e(56034);const u=n.forwardRef((d,E)=>{const{size:h="md",variant:y="secondary"}=d;let a;h==="xxl"||h==="xxxl"?((0,r.l)("IconButton",'size="xxl" and size="xxxl"','size="xl"'),a="xl"):a=h;const v=(0,o.of)(f,a,y);let g,b;if("tooltip"in d){const{tooltip:P}=d;g=typeof P=="string"?P:void 0}else if("ariaLabel"in d||"aria-label"in d){const{ariaLabel:P,["aria-label"]:C}=d;g=C||P,b=E}if("tooltip"in d){const{name:P,iconType:C,className:D,tooltip:T,tooltipPlacement:M,...O}=d;return n.createElement(c.m,{ref:E,content:T,placement:M},n.createElement("button",{...O,ref:b,"aria-label":g,className:(0,t.cx)(v.button,D),type:"button"},n.createElement(l.I,{name:P,size:a,className:v.icon,type:C})))}else{const{name:P,iconType:C,className:D,...T}=d;return n.createElement("button",{...T,ref:b,"aria-label":g,className:(0,t.cx)(v.button,D),type:"button"},n.createElement(l.I,{name:P,size:a,className:v.icon,type:C}))}});u.displayName="IconButton";const f=(d,E,h)=>{const y=(0,i.cs)(E)+d.spacing.gridSize;let a=d.colors.text.primary;return h==="primary"?a=d.colors.primary.text:h==="destructive"&&(a=d.colors.error.text),{button:(0,t.css)({zIndex:0,position:"relative",margin:`0 ${d.spacing.x0_5} 0 0`,boxShadow:"none",border:"none",display:"inline-flex",background:"transparent",justifyContent:"center",alignItems:"center",padding:0,color:a,"&[disabled], &:disabled":{cursor:"not-allowed",color:d.colors.action.disabledText,opacity:.65},"&:before":{zIndex:-1,position:"absolute",opacity:0,width:`${y}px`,height:`${y}px`,borderRadius:d.shape.radius.default,content:'""',transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionProperty:"opacity"},"&:focus, &:focus-visible":(0,m.getFocusStyles)(d),"&:focus:not(:focus-visible)":(0,m.getMouseFocusStyles)(d),"&:hover":{"&:before":{backgroundColor:h==="secondary"?d.colors.action.hover:s.alpha(a,.12),opacity:1}}}),icon:(0,t.css)({verticalAlign:"baseline"})}}},86460:(Y,I,e)=>{"use strict";e.d(I,{e:()=>l,y:()=>c});var t=e(32196),n=e(96540),r=e(41987),s=e(40845),o=e(39938),m=e(37166);const l=n.memo(n.forwardRef(({title:f,featureState:d,...E},h)=>{const y=(0,s.of)(i),a=d?n.createElement(n.Fragment,null,n.createElement("div",{className:y.badge},n.createElement(c,{featureState:d})),n.createElement("h3",null,f)):n.createElement("h3",null,f);return n.createElement(m.w,{branded:!0,title:a,urlTitle:"Read documentation",ref:h,...E})}));l.displayName="FeatureInfoBox";const i=f=>({badge:(0,t.css)({marginBottom:f.spacing(1)})}),c=({featureState:f,tooltip:d})=>{const E=u(f);return n.createElement(o.E,{text:E.text,color:E.color,icon:E.icon,tooltip:d})};function u(f){switch(f){case r.Ay.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},37166:(Y,I,e)=>{"use strict";e.d(I,{w:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(42418),o=e(14578);const m=n.memo(n.forwardRef(({title:i,className:c,children:u,branded:f,url:d,urlTitle:E,onDismiss:h,severity:y="info",...a},v)=>{const g=(0,r.of)(l);return n.createElement(s.F,{severity:y,className:c,...a,ref:v,title:i},n.createElement("div",null,u),d&&n.createElement("a",{href:d,className:(0,t.cx)("external-link",g.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(o.I,{name:"book"})," ",E||"Read more"))}));m.displayName="InfoBox";const l=i=>({docsLink:(0,t.css)({display:"inline-block",marginTop:i.spacing(2)})})},32982:(Y,I,e)=>{"use strict";e.d(I,{r:()=>c});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(96540),m=e(40845),l=e(14578),i=e(17464);function c({referenceElement:d,children:E,suffixIcon:h,placement:y}){const a=(0,m.of)(u),v=(0,m.$j)(),g=[(0,n.cY)(8),(0,r.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{context:b,refs:P,floatingStyles:C}=(0,s.we)({open:!0,placement:y,middleware:g,whileElementsMounted:r.ll,strategy:"fixed"});(0,o.useLayoutEffect)(()=>{P.setReference(d)},[d,P]);const{styles:D}=(0,s.DL)(b,{initial:({side:T})=>({opacity:0,transform:f(T,v)}),duration:v.transitions.duration.shortest});return o.createElement(i.ZL,null,o.createElement("div",{style:{display:"inline-block",...C},ref:P.setFloating,"aria-live":"polite"},o.createElement("span",{className:(0,t.cx)(a.root),style:D},E&&o.createElement("span",null,E),h&&o.createElement(l.I,{name:h}))))}const u=d=>({root:(0,t.css)({...d.typography.bodySmall,willChange:"transform",background:d.components.tooltip.background,color:d.components.tooltip.text,padding:d.spacing(.5,1.5),borderRadius:d.shape.radius.pill,display:"inline-flex",gap:d.spacing(.5),alignItems:"center"})}),f=(d,E)=>{switch(d){case"top":return`translateY(${E.spacing(1)})`;case"bottom":return`translateY(-${E.spacing(1)})`;case"left":return`translateX(${E.spacing(1)})`;case"right":return`translateX(-${E.spacing(1)})`}}},51440:(Y,I,e)=>{"use strict";e.d(I,{D:()=>s});var t=e(96540),n=e(29413),r=e(10354);const s=t.forwardRef((m,l)=>{const{defaultValue:i="",minWidth:c=10,maxWidth:u,onCommitChange:f,onKeyDown:d,onBlur:E,...h}=m,[y,a]=t.useState(i),[v,g]=t.useState(c);return(0,t.useEffect)(()=>{g(o(y.toString(),c,u))},[y,u,c]),t.createElement(r.p,{...h,ref:l,value:y.toString(),onChange:b=>{a(b.currentTarget.value)},width:v,onBlur:b=>{E?E(b):f&&f(b)},onKeyDown:b=>{d?d(b):b.key==="Enter"&&f&&f(b)},"data-testid":"autosize-input"})});function o(m,l,i){if(!m)return l;const u=(0,n.kD)(m.toString(),14).width/8+3;return l&&u<l?l:i&&u>i?i:u}s.displayName="AutoSizeInput"},10354:(Y,I,e)=>{"use strict";e.d(I,{n:()=>c,p:()=>i});var t=e(32196),n=e(96540),r=e(71473),s=e(40845),o=e(3911),m=e(87266),l=e(62930);const i=n.forwardRef((u,f)=>{const{className:d,addonAfter:E,addonBefore:h,prefix:y,suffix:a,invalid:v,loading:g,width:b=0,...P}=u,[C,D]=(0,r.A)(),[T,M]=(0,r.A)(),O=(0,s.$j)(),S=c({theme:O,invalid:!!v,width:b});return n.createElement("div",{className:(0,t.cx)(S.wrapper,d),"data-testid":"input-wrapper"},!!h&&n.createElement("div",{className:S.addon},h),n.createElement("div",{className:S.inputWrapper},y&&n.createElement("div",{className:S.prefix,ref:C},y),n.createElement("input",{ref:f,className:S.input,...P,style:{paddingLeft:y?D.width+12:void 0,paddingRight:a||g?M.width+12:void 0}}),(a||g)&&n.createElement("div",{className:S.suffix,ref:T},g&&n.createElement(l.y,{className:S.loadingIndicator,inline:!0}),a)),!!E&&n.createElement("div",{className:S.addon},E))});i.displayName="Input";const c=(0,o.N)(({theme:u,invalid:f=!1,width:d})=>{const E="28px",h=(0,t.css)({position:"absolute",top:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,fontSize:u.typography.size.md,height:"100%",minWidth:E,color:u.colors.text.secondary});return{wrapper:(0,t.cx)((0,t.css)({label:"input-wrapper",display:"flex",width:d?u.spacing(d):"100%",height:u.spacing(u.components.height.md),borderRadius:u.shape.radius.default,"&:hover":{"> .prefix, .suffix, .input":{borderColor:f?u.colors.error.border:u.colors.primary.border},"input[type='number']":{appearance:"textfield"},"input[type='number']::-webkit-inner-spin-button, input[type='number']::-webkit-outer-spin-button":{WebkitAppearance:"inner-spin-button !important",opacity:1}}})),inputWrapper:(0,t.css)({label:"input-inputWrapper",position:"relative",flexGrow:1,zIndex:1,"&:not(:first-child):last-child":{"> input":{borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0}},"&:first-child:not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}},"&:not(:first-child):not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},input:{"&:not(:first-child)":{paddingLeft:E},"&:not(:last-child)":{paddingRight:E},"&[readonly]":{cursor:"default"}}}),input:(0,t.cx)((0,m.gm)(u),(0,m.Xb)(u,f),(0,t.css)({label:"input-input",position:"relative",zIndex:0,flexGrow:1,borderRadius:u.shape.radius.default,height:"100%",width:"100%"})),inputDisabled:(0,t.css)({backgroundColor:u.colors.action.disabledBackground,color:u.colors.action.disabledText,border:`1px solid ${u.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}),addon:(0,t.css)({label:"input-addon",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0,flexShrink:0,position:"relative","&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0,"> :last-child":{borderTopRightRadius:0,borderBottomRightRadius:0}},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0,"> :first-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"> *:focus":{zIndex:2}}),prefix:(0,t.cx)(h,(0,t.css)({label:"input-prefix",paddingLeft:u.spacing(1),paddingRight:u.spacing(.5),borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0})),suffix:(0,t.cx)(h,(0,t.css)({label:"input-suffix",paddingLeft:u.spacing(1),paddingRight:u.spacing(1),marginBottom:"-2px",borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0,right:0})),loadingIndicator:(0,t.css)({"& + *":{marginLeft:u.spacing(.5)}})}})},16504:(Y,I,e)=>{"use strict";e.d(I,{e:()=>n});var t=e(49785);const n=t.xI},48840:(Y,I,e)=>{"use strict";e.d(I,{j:()=>v});var t=e(32196),n=e(2543),r=e(96540),s=e(32885),o=e(39070),m=e(40845),l=e(14578),i=e(19384),c=e(56034),u=e(29158);const f=(0,t.css)({display:"flex",alignItems:"center",height:"100%"});function d({row:C,__rowID:D}){return r.createElement("div",{className:f},r.createElement(u.K,{tooltip:"toggle row expanded","aria-controls":D,name:C.isExpanded?"angle-down":"angle-right","aria-expanded":C.isExpanded,...C.getToggleRowExpandedProps(),size:"lg"}))}function E({isAllRowsExpanded:C,toggleAllRowsExpanded:D}){return r.createElement("div",{className:f},r.createElement(u.K,{"aria-label":C?"Collapse all rows":"Expand all rows",name:C?"table-collapse-all":"table-expand-all",onClick:()=>D(),size:"lg",tooltip:C?"Collapse all rows":"Expand all rows",variant:"secondary"}))}const h="__expander";function y(C,D=!1){return[{id:h,Cell:d,...D&&{Header:E},disableSortBy:!0,width:0},...C.map(T=>({id:T.id,accessor:T.id,Header:T.header||(()=>null),sortType:T.sortType||"alphanumeric",disableSortBy:!T.sortType,width:T.disableGrow?0:void 0,visible:T.visible,...T.cell&&{Cell:T.cell}}))]}const a=C=>{const D=C.colors.emphasize(C.colors.background.primary,.03);return{container:(0,t.css)({display:"flex",gap:C.spacing(2),flexDirection:"column",width:"100%",overflowX:"auto"}),table:(0,t.css)({borderRadius:C.shape.radius.default,width:"100%",td:{padding:C.spacing(1)},"td, th":{minWidth:C.spacing(3)}}),disableGrow:(0,t.css)({width:0}),header:(0,t.css)({borderBottom:`1px solid ${C.colors.border.weak}`,"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:C.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:C.spacing(2.5),textAlign:"left",fontWeight:C.typography.fontWeightMedium}}),row:(0,t.css)({label:"row",borderBottom:`1px solid ${C.colors.border.weak}`,"&:hover":{backgroundColor:D},"&:last-child":{borderBottom:0}}),expandedRow:(0,t.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentRow:(0,t.css)({label:"expanded-row-content",td:{borderBottom:`1px solid ${C.colors.border.weak}`,position:"relative",padding:C.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:C.spacing(2),background:C.colors.border.medium}}}),sortableHeader:(0,t.css)({"&&":{padding:0}})}};function v({className:C,columns:D,data:T,getRowId:M,headerTooltips:O,pageSize:S=0,renderExpandedRow:p,showExpandAll:x=!1,fetchData:A}){const R=(0,m.of)(a),B=(0,r.useMemo)(()=>y(D,x),[D,x]),U=g(),F=(0,r.useCallback)(q=>`${U}-${q.id}`.replace(/\s/g,""),[U]),K=[s.useSortBy,s.useExpanded],w=T.length>S,L=S>0;L&&K.push(s.usePagination);const V=(0,s.useTable)({columns:B,data:T,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,manualSortBy:!!A,getRowId:M,initialState:{hiddenColumns:[!p&&h,...B.filter(q=>!(!q.visible||q.visible(T))).map(q=>q.id).filter(o.zz)].filter(o.zz)}},...K),{getTableProps:N,getTableBodyProps:z,headerGroups:J,prepareRow:G}=V,{sortBy:H}=V.state;return(0,r.useEffect)(()=>{A&&A({sortBy:H})},[H,A]),(0,r.useEffect)(()=>{L&&V.setPageSize(S)},[L,S,V.setPageSize,V]),r.createElement("div",{className:R.container},r.createElement("table",{...N(),className:(0,t.cx)(R.table,C)},r.createElement("thead",null,J.map(q=>{const{key:le,...me}=q.getHeaderGroupProps();return r.createElement("tr",{key:le,...me},q.headers.map(k=>{const{key:ee,...X}=k.getHeaderProps(),j=O?.[k.id];return r.createElement("th",{key:ee,className:(0,t.cx)(R.header,{[R.disableGrow]:k.width===0,[R.sortableHeader]:k.canSort}),...X,...k.isSorted&&{"aria-sort":k.isSortedDesc?"descending":"ascending"}},r.createElement(P,{column:k,headerTooltip:j}))}))})),r.createElement("tbody",{...z()},(L?V.page:V.rows).map(q=>{G(q);const{key:le,...me}=q.getRowProps(),k=F(q),ee=q.isExpanded;return r.createElement(r.Fragment,{key:le},r.createElement("tr",{...me,className:(0,t.cx)(R.row,ee&&R.expandedRow)},q.cells.map(X=>{const{key:j,...ne}=X.getCellProps();return r.createElement("td",{key:j,...ne},X.render("Cell",{__rowID:k}))})),ee&&p&&r.createElement("tr",{...me,id:k,className:R.expandedContentRow},r.createElement("td",{colSpan:q.cells.length},p(q.original))))}))),L&&w&&r.createElement("span",null,r.createElement(i.d,{currentPage:V.state.pageIndex+1,numberOfPages:V.pageOptions.length,onNavigate:q=>V.gotoPage(q-1)})))}const g=()=>(0,r.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),b=C=>({sortIcon:(0,t.css)({position:"absolute",top:C.spacing(1)}),headerTooltipIcon:(0,t.css)({marginLeft:C.spacing(.5)})});function P({column:{canSort:C,render:D,isSorted:T,isSortedDesc:M,getSortByToggleProps:O},headerTooltip:S}){const p=(0,m.of)(b),{onClick:x}=O(),A=r.createElement(r.Fragment,null,D("Header"),S&&r.createElement(c.m,{theme:"info-alt",content:S.content,placement:"top-end"},r.createElement(l.I,{className:p.headerTooltipIcon,name:S.iconName||"info-circle","data-testid":"header-tooltip-icon"})),T&&r.createElement("span",{"aria-hidden":"true",className:p.sortIcon},r.createElement(l.I,{name:M?"angle-down":"angle-up"})));return C?r.createElement("button",{type:"button",onClick:x},A):A}},24022:(Y,I,e)=>{"use strict";e.d(I,{B:()=>r});var t=e(96540),n=e(44533);class r extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:o,config:m,open:l,onDidRender:i}=this.props,c=this.wrapperRef.current,u=new n.O(o,l,m);c.hasChildNodes()?c.replaceChild(u.render(),c.lastChild):c.appendChild(u.render()),i&&i(u.json)}}static{this.defaultProps={open:3,config:{animateOpen:!0}}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:o}=this.props;return t.createElement("div",{className:o,ref:this.wrapperRef})}}},44533:(Y,I,e)=>{"use strict";e.d(I,{O:()=>v});var t=e(2543);function n(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function r(g){return!!g&&typeof g==="object"}function s(g){if(g===void 0)return"";if(g===null||typeof g=="object"&&!g.constructor)return"Object";const P=/function ([^(]*)/.exec(g.constructor.toString());return P&&P.length>1?P[1]:""}function o(g){return g===null?"null":typeof g}function m(g,b){const P=o(g);return P==="null"||P==="undefined"?P:(P==="string"&&(b='"'+n(b)+'"'),P==="function"?g.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":b)}let l="";function i(g){return r(g)?(l=s(g),Array.isArray(g)&&(l+="["+g.length+"]")):l=m(g,g.toString()),l}function c(g){return`json-formatter-${g}`}function u(g,b,P){const C=document.createElement(g);return b&&C.classList.add(c(b)),P!==void 0&&(P instanceof Node?C.appendChild(P):C.appendChild(document.createTextNode(String(P)))),C}const f=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,d=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,E=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,h=10,y=typeof window<"u"&&window.requestAnimationFrame||(g=>(g(),0)),a={animateOpen:!0,animateClose:!0};class v{constructor(b,P=1,C=a,D){this.json=b,this.open=P,this.config=C,this.key=D,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(b){this._isOpen=b}get isDate(){return this.type==="string"&&(f.test(this.json)||E.test(this.json)||d.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return r(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return o(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(b=>b||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(c("open")))}openAtDepth(b=1){b<0||(this.open=b,this.isOpen=b!==0,this.element&&(this.removeChildren(!1),b===0?this.element.classList.remove(c("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(c("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const b=u("span");return b.appendChild(u("span","bracket","[")),this.isNumberArray()?(this.json.forEach((P,C)=>{C>0&&b.appendChild(u("span","array-comma",",")),b.appendChild(u("span","number",P))}),this.skipChildren=!0):b.appendChild(u("span","number",this.json.length)),b.appendChild(u("span","bracket","]")),b}render(b=!1){this.element=u("div","row");const P=u("a","toggler-link"),C=u("span","toggler");if(this.isObject&&P.appendChild(C),this.hasKey&&P.appendChild(u("span","key",`${this.key}:`)),this.isObject){const T=u("span","value"),M=u("span"),O=u("span","constructor-name",this.constructorName);if(M.appendChild(O),this.isArray){const S=this.renderArray();M.appendChild(S)}T.appendChild(M),P.appendChild(T)}else{const T=this.isUrl?u("a"):u("span");T.classList.add(c(this.type)),this.isDate&&T.classList.add(c("date")),this.isUrl&&(T.classList.add(c("url")),T.setAttribute("href",this.json));const M=m(this.json,this.json);T.appendChild(document.createTextNode(M)),P.appendChild(T)}const D=u("div","children");return this.isObject&&D.classList.add(c("object")),this.isArray&&D.classList.add(c("array")),this.isEmpty&&D.classList.add(c("empty")),this.config&&this.config.theme&&this.element.classList.add(c(this.config.theme)),this.isOpen&&this.element.classList.add(c("open")),b||this.element.appendChild(P),this.skipChildren?P.removeChild(C):this.element.appendChild(D),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&P.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(b=!1){const P=this.element&&this.element.querySelector(`div.${c("children")}`);if(!(!P||this.isEmpty))if(b){let C=0;const D=()=>{const T=this.keys[C],M=new v(this.json[T],this.open-1,this.config,T);P.appendChild(M.render()),C+=1,C<this.keys.length&&(C>h?D():y(D))};y(D)}else this.keys.forEach(C=>{const D=new v(this.json[C],this.open-1,this.config,C);P.appendChild(D.render())})}removeChildren(b=!1){const P=this.element&&this.element.querySelector(`div.${c("children")}`);if(b){let C=0;const D=()=>{P&&P.children.length&&(P.removeChild(P.children[0]),C+=1,C>h?D():y(D))};y(D)}else P&&(P.innerHTML="")}}},90613:(Y,I,e)=>{"use strict";e.d(I,{a:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);const o=(0,n.forwardRef)((c,u)=>{const{children:f,margin:d,marginX:E,marginY:h,marginTop:y,marginBottom:a,marginLeft:v,marginRight:g,padding:b,paddingX:P,paddingY:C,paddingTop:D,paddingBottom:T,paddingLeft:M,paddingRight:O,display:S,backgroundColor:p,grow:x,shrink:A,basis:R,flex:B,borderColor:U,borderStyle:F,borderRadius:K,direction:w,justifyContent:L,alignItems:V,boxShadow:N,element:z,gap:J,...G}=c,H=(0,r.of)(i,d,E,h,y,a,v,g,b,P,C,D,T,M,O,S,p,x,A,R,B,U,F,K,w,L,V,N,J),q=z??"div";return n.createElement(q,{ref:u,className:H.root,...G},f)});o.displayName="Box";const m=(c,u)=>{switch(c){case"error":case"success":case"info":case"warning":return u.colors[c].borderTransparent;default:return c?u.colors.border[c]:void 0}},l=(c,u)=>{switch(c){case"error":case"success":case"info":case"warning":return u.colors[c].transparent;default:return c?u.colors.background[c]:void 0}},i=(c,u,f,d,E,h,y,a,v,g,b,P,C,D,T,M,O,S,p,x,A,R,B,U,F,K,w,L,V)=>({root:(0,t.css)([(0,s.Y)(c,u,N=>({margin:c.spacing(N)})),(0,s.Y)(c,f,N=>({marginLeft:c.spacing(N),marginRight:c.spacing(N)})),(0,s.Y)(c,d,N=>({marginTop:c.spacing(N),marginBottom:c.spacing(N)})),(0,s.Y)(c,E,N=>({marginTop:c.spacing(N)})),(0,s.Y)(c,h,N=>({marginBottom:c.spacing(N)})),(0,s.Y)(c,y,N=>({marginLeft:c.spacing(N)})),(0,s.Y)(c,a,N=>({marginRight:c.spacing(N)})),(0,s.Y)(c,v,N=>({padding:c.spacing(N)})),(0,s.Y)(c,g,N=>({paddingLeft:c.spacing(N),paddingRight:c.spacing(N)})),(0,s.Y)(c,b,N=>({paddingTop:c.spacing(N),paddingBottom:c.spacing(N)})),(0,s.Y)(c,P,N=>({paddingTop:c.spacing(N)})),(0,s.Y)(c,C,N=>({paddingBottom:c.spacing(N)})),(0,s.Y)(c,D,N=>({paddingLeft:c.spacing(N)})),(0,s.Y)(c,T,N=>({paddingRight:c.spacing(N)})),(0,s.Y)(c,M,N=>({display:N})),(0,s.Y)(c,O,N=>({backgroundColor:l(N,c)})),(0,s.Y)(c,F,N=>({flexDirection:N})),(0,s.Y)(c,S,N=>({flexGrow:N})),(0,s.Y)(c,p,N=>({flexShrink:N})),(0,s.Y)(c,x,N=>({flexBasis:N})),(0,s.Y)(c,A,N=>({flex:N})),(0,s.Y)(c,B,N=>({borderStyle:N})),(0,s.Y)(c,R,N=>({borderColor:m(N,c)})),(B||R)&&{borderWidth:"1px"},(0,s.Y)(c,K,N=>({justifyContent:N})),(0,s.Y)(c,w,N=>({alignItems:N})),(0,s.Y)(c,U,N=>({borderRadius:c.shape.radius[N]})),(0,s.Y)(c,L,N=>({boxShadow:c.shadows[N]})),(0,s.Y)(c,V,N=>({gap:c.spacing(N)}))])})},71259:(Y,I,e)=>{"use strict";e.d(I,{x:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);const o=(0,n.forwardRef)((l,i)=>{const{alignItems:c,children:u,gap:f,columns:d,minColumnWidth:E,...h}=l,y=(0,r.of)(m,f,d,E,c);return n.createElement("div",{ref:i,...h,className:y.grid},u)});o.displayName="Grid";const m=(l,i,c,u,f)=>({grid:(0,t.css)([{display:"grid"},(0,s.Y)(l,i,d=>({gap:l.spacing(d)})),u&&(0,s.Y)(l,u,d=>({gridTemplateColumns:`repeat(auto-fill, minmax(${l.spacing(d)}, 1fr))`})),c&&(0,s.Y)(l,c,d=>({gridTemplateColumns:`repeat(${d}, 1fr)`})),(0,s.Y)(l,f,d=>({alignItems:d}))])})},66864:(Y,I,e)=>{"use strict";e.d(I,{Gy:()=>m,PE:()=>o,gW:()=>l,mc:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=(d=>(d[d.Horizontal=0]="Horizontal",d[d.Vertical=1]="Vertical",d))(s||{});const o=({children:d,orientation:E=0,spacing:h="sm",justify:y="flex-start",align:a="normal",wrap:v=!1,width:g="100%",height:b="100%",...P})=>{const C=(0,r.of)(c,E,h,y,a,v);return n.createElement("div",{className:C.layout,style:{width:g,height:b},...P},n.Children.toArray(d).filter(Boolean).map((D,T)=>n.createElement("div",{className:C.childWrapper,key:T},D)))},m=({children:d,spacing:E,justify:h,align:y="center",wrap:a,width:v,height:g})=>n.createElement(o,{spacing:E,justify:h,orientation:0,align:y,width:v,height:g,wrap:a},d),l=({children:d,spacing:E,justify:h,align:y,width:a,height:v})=>n.createElement(o,{spacing:E,justify:h,orientation:1,align:y,width:a,height:v},d),i=({children:d,padding:E,margin:h,grow:y,shrink:a})=>{const v=(0,r.of)(f,E,h);return n.createElement("div",{className:(0,t.cx)(v.wrapper,y!==void 0&&(0,t.css)({flexGrow:y}),a!==void 0&&(0,t.css)({flexShrink:a}))},d)},c=(d,E,h,y,a,v)=>{const g=h!=="none"?d.spacing(u[h]):0,b=E===0&&!v||E===1?0:`-${g}`,P=E===1?"vertical-group":"horizontal-group";return{layout:(0,t.css)({label:P,display:"flex",flexDirection:E===1?"column":"row",flexWrap:v?"wrap":"nowrap",justifyContent:y,alignItems:a,height:"100%",maxWidth:"100%",marginBottom:b}),childWrapper:(0,t.css)({label:"layoutChildrenWrapper",marginBottom:E===0&&!v?0:g,marginRight:E===0?g:0,display:"flex",alignItems:a,"&:last-child":{marginBottom:E===1?0:void 0,marginRight:E===0?0:void 0}})}},u={none:0,xs:.5,sm:1,md:2,lg:3},f=(d,E,h)=>{const y=E&&E!=="none"&&d.spacing(u[E])||0,a=h&&h!=="none"&&d.spacing(u[h])||0;return{wrapper:(0,t.css)({label:"container",margin:a,padding:y})}}},68402:(Y,I,e)=>{"use strict";e.d(I,{$:()=>r});var t=e(96540),n=e(90613);const r=({v:s=0,h:o=0,layout:m})=>t.createElement(n.a,{paddingRight:o,paddingBottom:s,display:m==="inline"?"inline-block":"block"})},67061:(Y,I,e)=>{"use strict";e.d(I,{B:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);const o=n.forwardRef((l,i)=>{const{gap:c=1,alignItems:u,justifyContent:f,direction:d,wrap:E,children:h,grow:y,shrink:a,basis:v,flex:g,...b}=l,P=(0,r.of)(m,c,u,f,d,E,y,a,v,g);return n.createElement("div",{ref:i,className:P.flex,...b},h)});o.displayName="Stack";const m=(l,i,c,u,f,d,E,h,y,a)=>({flex:(0,t.css)([{display:"flex"},(0,s.Y)(l,f,v=>({flexDirection:v})),(0,s.Y)(l,d,v=>({flexWrap:v})),(0,s.Y)(l,c,v=>({alignItems:v})),(0,s.Y)(l,u,v=>({justifyContent:v})),(0,s.Y)(l,i,v=>({gap:l.spacing(v)})),(0,s.Y)(l,E,v=>({flexGrow:v})),(0,s.Y)(l,h,v=>({flexShrink:v})),(0,s.Y)(l,y,v=>({flexBasis:v})),(0,s.Y)(l,a,v=>({flex:v}))])})},16795:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>n});function t(r,s,o,m){const l=s[m];if(l!=null)return{[r.breakpoints.up(m)]:o(l)}}function n(r,s,o){return s==null?null:typeof s!="object"||!("xs"in s)?o(s):[t(r,s,o,"xs"),t(r,s,o,"sm"),t(r,s,o,"md"),t(r,s,o,"lg"),t(r,s,o,"xl"),t(r,s,o,"xxl")]}},50720:(Y,I,e)=>{"use strict";e.d(I,{N:()=>o});var t=e(96540),n=e(52594),r=e(71733),s=e(40672);const o=(0,t.forwardRef)(({href:m,children:l,...i},c)=>{const u=r.I.stripBaseFromUrl(s.sQ.sanitizeUrl(m??""));return t.createElement(n.Link,{ref:c,to:u,...i},l)});o.displayName="Link"},72109:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>u});var t=e(32196),n=e(96540),r=e(40672),s=e(71733),o=e(40845),m=e(14578),l=e(71356),i=e(50720);const c={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},u=(0,n.forwardRef)(({href:d,color:E="link",external:h=!1,inline:y=!0,variant:a="body",weight:v,icon:g,children:b,...P},C)=>{const D=r.sQ.sanitizeUrl(d??""),T=(0,o.$j)(),M=f(T,y,a,v,E),O=g||"external-link-alt";if(h)return n.createElement("a",{href:D,ref:C,...P,target:"_blank",rel:"noreferrer",className:M},b,n.createElement(m.I,{size:c[a]||"md",name:O}));const S=s.I.stripBaseFromUrl(D);return n.createElement(i.N,{ref:C,href:S,...P,className:M},b,g&&n.createElement(m.I,{name:g,size:c[a]||"md"}))});u.displayName="TextLink";const f=(d,E,h,y,a)=>(0,t.css)([h&&{...d.typography[h]},y&&{fontWeight:(0,l.iV)(y,d)},a&&{color:d.colors.text[a]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:d.colors.text.link}},E&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},85918:(Y,I,e)=>{"use strict";e.d(I,{p:()=>o});var t=e(32196),n=e(96540),r=e(3911);const s=(0,r.N)((m=!1)=>({list:(0,t.css)({listStyleType:"none",margin:0,padding:0}),item:(0,t.css)({display:m&&"inline-block"||"block"})}));class o extends n.PureComponent{constructor(l){super(l)}render(){const{items:l,renderItem:i,getItemKey:c,className:u,inline:f}=this.props,d=s(f);return n.createElement("ul",{className:(0,t.cx)(d.list,u)},l.map((E,h)=>n.createElement("li",{className:d.item,key:c?c(E):h},i(E,h))))}}},1551:(Y,I,e)=>{"use strict";e.d(I,{c:()=>r});var t=e(96540),n=e(85918);class r extends t.PureComponent{render(){return t.createElement(n.p,{inline:!0,...this.props})}}},33552:(Y,I,e)=>{"use strict";e.d(I,{B:()=>r});var t=e(96540),n=e(85918);class r extends t.PureComponent{render(){return t.createElement(n.p,{...this.props})}}},57514:(Y,I,e)=>{"use strict";e.d(I,{G:()=>u});var t=e(32196),n=e(96540),r=e(40845);const s=28,o=2.4,m=500,l=4e3,i=300,c=100/s*100;function u({width:d,delay:E=i,ariaLabel:h="Loading bar"}){const y=Math.min(Math.max(Math.round(d*o),m),l),a=(0,r.of)(f,E,y),v={overflow:"hidden"};return n.createElement("div",{style:v},n.createElement("div",{"aria-label":h,className:a.bar}))}const f=(d,E,h)=>{const y=(0,t.keyframes)({"0%":{transform:"translateX(-100%)"},"85%, 100%":{transform:`translateX(${c}%)`}});return{bar:(0,t.css)({width:s+"%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)",transform:"translateX(-100%)",animationName:y,animationDelay:`${E}ms`,animationDuration:`${h}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",willChange:"transform"})}}},39558:(Y,I,e)=>{"use strict";e.d(I,{_:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(62930);const o=({text:l,className:i,...c})=>{const u=(0,r.of)(m);return n.createElement("div",{className:(0,t.cx)(u.container,i),...c},l," ",n.createElement(s.y,{inline:!0}))},m=l=>({container:(0,t.css)({marginBottom:l.spacing(4)})})},76218:(Y,I,e)=>{"use strict";e.d(I,{O:()=>s});var t=e(96540),n=e(88323),r=e(64278);const s=({value:o,onChange:m,context:l,item:i})=>{const c=i.settings??{},u=(0,r.sE)(l.data,c?.filter),f=(0,r.m3)(u,o,void 0,void 0,c.baseNameMode),d=(0,t.useCallback)(h=>{if(!(h&&!(0,r.v3)(h.value,u)))return m(h?.value)},[u,m]),E=f.find(h=>h.value===o);return t.createElement(t.Fragment,null,t.createElement(n.l6,{value:E,placeholder:c.placeholderText??"Select field",options:f,onChange:d,noOptionsMessage:c.noFieldsMessage,width:c.width,isClearable:c.isClearable!==!1}))}},9988:(Y,I,e)=>{"use strict";e.d(I,{bx:()=>i,cH:()=>f});var t=e(96540),n=e(11261),r=e(1173),s=e(85200),o=e(4025),m=e(88323);const l=(0,t.memo)(d=>{const{data:E,options:h,onChange:y,id:a}=d,v=c(E),g=u(v,h),b=(0,t.useCallback)(C=>y(C.value),[y]),P=g.find(C=>C.value===h);return t.createElement(m.l6,{inputId:a,value:P,options:g,onChange:b})});l.displayName="FieldTypeMatcherEditor";const i=[{value:n.PU.number,label:"Number",icon:(0,o.lV)(n.PU.number)},{value:n.PU.string,label:"String",icon:(0,o.lV)(n.PU.string)},{value:n.PU.time,label:"Time",icon:(0,o.lV)(n.PU.time)},{value:n.PU.boolean,label:"Boolean",icon:(0,o.lV)(n.PU.boolean)},{value:n.PU.trace,label:"Traces",icon:(0,o.lV)(n.PU.trace)},{value:n.PU.enum,label:"Enum",icon:(0,o.lV)(n.PU.enum)},{value:n.PU.other,label:"Other",icon:(0,o.lV)(n.PU.other)}],c=d=>(0,t.useMemo)(()=>{const E=new Map;for(const h of i)E.set(h.value,0);for(const h of d)for(const y of h.fields){const a=y.type||n.PU.other;let v=E.get(a);v||(v=0),E.set(a,v+1)}return E},[d]),u=(d,E)=>(0,t.useMemo)(()=>{let h=!1;const y=[];for(const a of i){const v=d.get(a.value),g=E===a.value;(v||g)&&y.push({...a,label:`${a.label} (${d.get(a.value)})`}),g&&(h=!0)}return E&&!h&&y.push({value:E,label:`${E} (No matches)`}),y},[d,E]),f={id:r.Ct.byType,component:l,matcher:s.sJ.get(r.Ct.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:d=>d}},19346:(Y,I,e)=>{"use strict";e.d(I,{N:()=>u,r1:()=>h});var t=e(32196),n=e(96540),r=e(75059),s=e(1173),o=e(85200),m=e(52622),l=e(40845),i=e(10354),c=e(88323);const u=[{label:"==",value:m.zT.EQ},{label:"!=",value:m.zT.NEQ},{label:">",value:m.zT.GT},{label:">=",value:m.zT.GTE},{label:"<",value:m.zT.LT},{label:"<=",value:m.zT.LTE}];function f(y){return y===r.gy.allIsNull||y===r.gy.allIsZero}const d=({options:y,onChange:a})=>{const v=(0,l.of)(E),g=(0,n.useMemo)(()=>r.AS.selectOptions([y?.reducer]),[y?.reducer]),b=(0,n.useCallback)(M=>a({...y,reducer:M.value}),[y,a]),P=(0,n.useCallback)(M=>a({...y,op:M.value}),[y,a]),C=(0,n.useCallback)(M=>{const O=M.currentTarget.valueAsNumber;return a({...y,value:O})},[y,a]),D=y??{},T=f(y.reducer);return n.createElement("div",{className:v.spot},n.createElement(c.l6,{value:g.current,options:g.options,onChange:b,placeholder:"Select field reducer"}),D.reducer&&!T&&n.createElement(n.Fragment,null,n.createElement(c.l6,{value:u.find(M=>M.value===D.op),options:u,onChange:P,"aria-label":"Comparison operator",width:19}),n.createElement(i.p,{type:"number",value:D.value,onChange:C})))},E=y=>({spot:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),h={id:s.Ct.byValue,component:d,matcher:o.sJ.get(s.Ct.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:y=>`${y?.reducer} ${y?.op} ${y?.value}`}},74668:(Y,I,e)=>{"use strict";e.d(I,{R:()=>u,X:()=>l});var t=e(96540),n=e(28240),r=e(1173),s=e(85200),o=e(88323);const m=(f,d,E)=>{if(!E)return;let h=f.find(y=>!d.some(a=>y===a));if(h)return h};function l({value:f,data:d,onChange:E,placeholder:h}){const y=(0,t.useMemo)(()=>i(d),[d]),[a,v]=(0,t.useState)({refIds:[],value:void 0}),g=(0,t.useMemo)(()=>y.find(P=>P.value===f)??m(y,a.refIds,a.value),[f,y,a]),b=(0,t.useCallback)(P=>{E(P?.value)},[E]);return(y!==a.refIds||g?.value!==a.value)&&v({refIds:y,value:g?.value}),t.createElement(o.l6,{options:y,onChange:b,isClearable:!0,placeholder:h??"Select query refId",value:g})}function i(f){const d=new Map;for(const h of f){const y=h.refId??"",a=d.get(y)??[];a.length===0&&d.set(y,a),a.push(h)}const E=[];for(const[h,y]of d.entries())E.push({value:h,label:`Query: ${h??"(missing refId)"}`,description:c(y)});return E}function c(f){return`Frames (${f.length}):
    ${f.slice(0,Math.min(3,f.length)).map(d=>(0,n.Ri)(d)).join(", ")} ${f.length>3?"...":""}`}const u={id:r.Ct.byFrameRefID,component:f=>t.createElement(l,{value:f.options,data:f.data,onChange:f.onChange}),matcher:s.sJ.get(r.Ct.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:f=>f}},84349:(Y,I,e)=>{"use strict";e.d(I,{g:()=>v});var t=e(83077),n=e(96540),r=e(1173),s=e(85200),o=e(10354);const m=(0,n.memo)(g=>{const{options:b,onChange:P}=g,C=(0,n.useCallback)(D=>P(D.target.value),[P]);return n.createElement(o.p,{placeholder:"Enter regular expression",defaultValue:b,onBlur:C})});m.displayName="FieldNameByRegexMatcherEditor";const l={id:r.Ct.byRegexp,component:m,matcher:s.sJ.get(r.Ct.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:g=>g};var i=e(88323),c=e(64278);const u=(0,n.memo)(g=>{const{data:b,options:P,onChange:C,id:D}=g,T=(0,c.sE)(b),M=(0,c.m3)(T,P),O=(0,n.useCallback)(p=>{if((0,c.v3)(p.value,T))return C(p.value)},[T,C]),S=M.find(p=>p.value===P);return n.createElement(i.l6,{value:S,options:M,onChange:O,inputId:D})});u.displayName="FieldNameMatcherEditor";const f={id:r.Ct.byName,component:u,matcher:s.sJ.get(r.Ct.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:g=>g},d=(0,n.memo)(g=>{const{data:b,options:P,onChange:C}=g,{readOnly:D,prefix:T}=P,M=(0,c.sE)(b),O=(0,c.m3)(M,void 0),S=(0,n.useCallback)(p=>{if(Array.isArray(p))return C({...P,names:p.reduce((x,A)=>((0,c.v3)(A.value,M)&&x.push(A.value),x),[])})},[M,C,P]);if(D){const p=(P.names??[]).join(", ");return n.createElement(o.p,{value:p,readOnly:!0,disabled:!0,prefix:T})}return n.createElement(i.KF,{value:P.names,options:O,onChange:S})});d.displayName="FieldNameMatcherEditor";const E={id:r.Ct.byNames,component:d,matcher:s.sJ.get(r.Ct.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:g=>(g.names??[]).join(", "),excludeFromPicker:!0};var h=e(9988),y=e(19346),a=e(74668);const v=new t.O(()=>[f,l,h.cH,a.R,E,y.r1])},64278:(Y,I,e)=>{"use strict";e.d(I,{BP:()=>m,m3:()=>i,sE:()=>l,v3:()=>o});var t=e(96540),n=e(28240),r=e(27310),s=e(4025);function o(c,u){return c?u.display.has(c)||u.raw.has(c):!1}function m(c,u){const f={display:new Set,raw:new Set,fields:new Map};for(const d of c)for(const E of d.fields){if(u&&!u(E))continue;const h=(0,n.Ct)(E,d,c);f.display.add(h),f.fields.set(h,E),E.name&&h!==E.name&&(f.raw.add(E.name),f.fields.set(E.name,E))}return f}function l(c,u){return(0,t.useMemo)(()=>m(c,u),[c,u])}function i(c,u,f,d,E){return(0,t.useMemo)(()=>{let h=!1;const y=[];if(f&&y.push(f),E===r.X4.OnlyBaseNames)for(const a of c.raw)!h&&a===u&&(h=!0),y.push({value:a,label:`${a} (base field name)`});else{for(const a of c.display){!h&&a===u&&(h=!0);const v=c.fields.get(a);(!d||d===v?.type)&&y.push({value:a,label:a,icon:v?(0,s.SS)(v):void 0})}if(E!==r.X4.ExcludeBaseNames)for(const a of c.raw)c.display.has(a)||(!h&&a===u&&(h=!0),y.push({value:a,label:`${a} (base field name)`}))}return u&&!h&&y.push({value:u,label:`${u} (not found)`}),y},[c,u,f,d,E])}},38138:(Y,I,e)=>{"use strict";e.d(I,{W:()=>u});var t=e(32196),n=e(96540),r=e(40845),s=e(90613),o=e(27183),m=e(59093),l=e(64539),i=e(32653);const c=n.forwardRef(({header:d,children:E,ariaLabel:h,onOpen:y,onClose:a,onKeyDown:v,...g},b)=>{const P=(0,r.of)(f),C=(0,n.useRef)(null);(0,n.useImperativeHandle)(b,()=>C.current);const[D]=(0,i.t)({isMenuOpen:!0,localRef:C,onOpen:y,onClose:a,onKeyDown:v});return n.createElement(s.a,{...g,"aria-label":h,backgroundColor:"primary",borderRadius:"default",boxShadow:"z3",display:"inline-block",onKeyDown:D,paddingX:0,paddingY:.5,ref:C,role:"menu",tabIndex:-1},d&&n.createElement("div",{className:(0,t.cx)(P.header,!!E&&n.Children.toArray(E).length>0&&P.headerBorder)},d),E)});c.displayName="Menu";const u=Object.assign(c,{Item:l.D,Divider:o.N,Group:m.r}),f=d=>({header:(0,t.css)({padding:d.spacing(.5,1,1,1)}),headerBorder:(0,t.css)({borderBottom:`1px solid ${d.colors.border.weak}`})})},27183:(Y,I,e)=>{"use strict";e.d(I,{N:()=>s});var t=e(32196),n=e(96540),r=e(40845);function s(){const m=(0,r.of)(o);return n.createElement("div",{className:m.divider})}const o=m=>({divider:(0,t.css)({height:1,backgroundColor:m.colors.border.weak,margin:m.spacing(.5,0)})})},59093:(Y,I,e)=>{"use strict";e.d(I,{r:()=>m});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845);const m=({label:i,ariaLabel:c,children:u})=>{const f=(0,o.of)(l),d=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!c&&i?d:void 0,"aria-label":c},i&&s.createElement("label",{id:d,className:f.groupLabel,"aria-hidden":!0},i),u)};m.displayName="MenuGroup";const l=i=>({groupLabel:(0,t.css)({color:i.colors.text.secondary,fontSize:i.typography.size.sm,padding:i.spacing(.5,1)})})},64539:(Y,I,e)=>{"use strict";e.d(I,{D:()=>d});var t=e(32196),n=e(96540),r=e(40845),s=e(16797),o=e(14578),m=e(67061),l=e(13544),i=e(32653);const c=h=>{if(!h)return!1;const y=h.parentElement.getBoundingClientRect(),a=h.getBoundingClientRect();return a.width!==0&&y.right+a.width+10>window.innerWidth},u=n.memo(({items:h,isOpen:y,close:a,customStyle:v})=>{const g=(0,r.of)(f),b=(0,n.useRef)(null),[P]=(0,i.t)({localRef:b,isMenuOpen:y,close:a}),[C,D]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{y&&b.current&&D(c(b.current))},[y]),n.createElement(n.Fragment,null,n.createElement("div",{className:g.iconWrapper,"aria-hidden":!0,"data-testid":l.Tp.components.Menu.SubMenu.icon},n.createElement(o.I,{name:"angle-right",className:g.icon})),y&&n.createElement("div",{ref:b,className:(0,t.cx)(g.subMenu,{[g.pushLeft]:C}),"data-testid":l.Tp.components.Menu.SubMenu.container,style:v},n.createElement("div",{tabIndex:-1,className:g.itemsWrapper,role:"menu",onKeyDown:P},h)))});u.displayName="SubMenu";const f=h=>({iconWrapper:(0,t.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,t.css)({opacity:.7,marginLeft:h.spacing(1),color:h.colors.text.secondary}),itemsWrapper:(0,t.css)({background:h.colors.background.primary,boxShadow:h.shadows.z3,display:"inline-block",borderRadius:h.shape.radius.default}),pushLeft:(0,t.css)({right:"100%",left:"unset"}),subMenu:(0,t.css)({position:"absolute",top:0,left:"100%",zIndex:h.zIndex.dropdown})}),d=n.memo(n.forwardRef((h,y)=>{const{url:a,icon:v,label:g,description:b,ariaLabel:P,ariaChecked:C,target:D,onClick:T,className:M,active:O,disabled:S,destructive:p,childItems:x,role:A="menuitem",tabIndex:R=-1,customSubMenuContainerStyles:B,shortcut:U,testId:F}=h,K=(0,r.of)(E),[w,L]=(0,n.useState)(O),[V,N]=(0,n.useState)(!1),z=(0,n.useCallback)(()=>{S||(N(!0),L(!0))},[S]),J=(0,n.useCallback)(()=>{S||(N(!1),L(!1))},[S]),G=x&&x.length>0,H=G?"div":a===void 0?"button":"a",q=(0,t.cx)({[K.item]:!0,[K.active]:w,[K.disabled]:S,[K.destructive]:p&&!S},M),le={[H==="button"?"disabled":"aria-disabled"]:S,...H==="a"&&S&&{href:void 0,onClick:void 0},...S&&{tabIndex:-1,"data-disabled":S}},me=(0,n.useRef)(null);(0,n.useImperativeHandle)(y,()=>me.current);const k=j=>{switch(j.key){case"ArrowRight":j.preventDefault(),j.stopPropagation(),G&&(N(!0),L(!0));break;default:break}},ee=()=>{N(!1),L(!1),me?.current?.focus()},X=!!(U&&U.length>0);return n.createElement(H,{target:D,className:q,rel:D==="_blank"?"noopener noreferrer":void 0,href:a,onClick:T,onMouseEnter:z,onMouseLeave:J,onKeyDown:k,role:a===void 0?A:void 0,"data-role":"menuitem",ref:me,"data-testid":F,"aria-label":P,"aria-checked":C,tabIndex:R,...le},n.createElement(m.B,{direction:"row",justifyContent:"flex-start",alignItems:"center"},v&&n.createElement(o.I,{name:v,className:K.icon,"aria-hidden":!0}),n.createElement("span",{className:K.ellipsis},g),n.createElement("div",{className:(0,t.cx)(K.rightWrapper,{[K.withShortcut]:X})},X&&n.createElement("div",{className:K.shortcut},n.createElement(o.I,{name:"keyboard",title:"keyboard shortcut"}),U),G&&n.createElement(u,{items:x,isOpen:V,close:ee,customStyle:B}))),b&&n.createElement("div",{className:(0,t.cx)(K.description,K.ellipsis,{[K.descriptionWithIcon]:v!==void 0})},b))}));d.displayName="MenuItem";const E=h=>({item:(0,t.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:h.colors.text.primary,display:"flex",flexDirection:"column",alignItems:"stretch",padding:h.spacing(.5,2),minHeight:h.spacing(4),margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus-visible":{background:h.colors.action.hover,color:h.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,s.getFocusStyles)(h)}),active:(0,t.css)({background:h.colors.action.hover}),destructive:(0,t.css)({color:h.colors.error.text,svg:{color:h.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:h.colors.error.main,color:h.colors.error.contrastText,svg:{color:h.colors.error.contrastText}}}),disabled:(0,t.css)({color:h.colors.action.disabledText,label:"menu-item-disabled","&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:h.colors.action.disabledText}}),icon:(0,t.css)({opacity:.7,color:h.colors.text.secondary}),rightWrapper:(0,t.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),withShortcut:(0,t.css)({minWidth:h.spacing(10.5)}),shortcut:(0,t.css)({display:"flex",alignItems:"center",gap:h.spacing(1),marginLeft:h.spacing(2),color:h.colors.text.secondary,opacity:.7}),description:(0,t.css)({...h.typography.bodySmall,color:h.colors.text.secondary,textAlign:"start"}),descriptionWithIcon:(0,t.css)({marginLeft:h.spacing(3)}),ellipsis:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})})},32653:(Y,I,e)=>{"use strict";e.d(I,{t:()=>o});var t=e(96540),n=e(94701);const r=(m,l)=>(m%l+l)%l,s=-1,o=({localRef:m,isMenuOpen:l,close:i,onOpen:c,onClose:u,onKeyDown:f})=>{const[d,E]=(0,t.useState)(s);return(0,t.useEffect)(()=>{l&&E(0)},[l]),(0,t.useEffect)(()=>{const y=m?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');y?.[d]?.focus(),y?.forEach((a,v)=>{a.tabIndex=v===d?0:-1})},[m,d]),(0,n.A)(()=>{c?.(E)}),[y=>{const a=m?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),v=a?.length??0;switch(y.key){case"ArrowUp":y.preventDefault(),y.stopPropagation(),E(r(d-1,v));break;case"ArrowDown":y.preventDefault(),y.stopPropagation(),E(r(d+1,v));break;case"ArrowLeft":y.preventDefault(),y.stopPropagation(),E(s),i?.();break;case"Home":y.preventDefault(),y.stopPropagation(),E(0);break;case"End":y.preventDefault(),y.stopPropagation(),E(v-1);break;case"Enter":y.preventDefault(),y.stopPropagation(),a?.[d]?.click();break;case"Escape":u?.();break;case"Tab":y.preventDefault(),u?.();break;default:break}f?.(y)}]}},37390:(Y,I,e)=>{"use strict";e.d(I,{a:()=>d});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(96540),m=e(40845),l=e(76412),i=e(29158),c=e(66864),u=e(29473),f=e(88448);function d(y){const{title:a,children:v,isOpen:g=!1,closeOnEscape:b=!0,closeOnBackdropClick:P=!0,className:C,contentClassName:D,onDismiss:T,onClickBackdrop:M,trapFocus:O=!0}=y,S=(0,m.of)(f.o),p=(0,o.useRef)(null),{overlayProps:x,underlayProps:A}=(0,s.e)({isKeyboardDismissDisabled:!b,isOpen:g,onClose:T},p),{dialogProps:R,titleProps:B}=(0,n.s)({},p);if(!g)return null;const U=(0,t.cx)(S.modalHeader,typeof a!="string"&&S.modalHeaderWithTabs);return o.createElement(s.Sf,null,o.createElement("div",{role:"presentation",className:S.modalBackdrop,onClick:M||(P?T:void 0),...A}),o.createElement(r.n1,{contain:O,autoFocus:!0,restoreFocus:!0},o.createElement("div",{className:(0,t.cx)(S.modal,C),ref:p,...x,...R},o.createElement("div",{className:U},typeof a=="string"&&o.createElement(h,{...y,title:a,id:B.id}),typeof a!="string"&&a,o.createElement("div",{className:S.modalHeaderClose},o.createElement(i.K,{name:"times",size:"xl",onClick:T,"aria-label":(0,l.t)("grafana-ui.modal.close-tooltip","Close")}))),o.createElement("div",{className:(0,t.cx)(S.modalContent,D)},v))))}function E({leftItems:y,children:a}){const v=(0,m.of)(f.o);return y?o.createElement("div",{className:v.modalButtonRow},o.createElement(c.Gy,{justify:"space-between"},o.createElement(c.Gy,{justify:"flex-start",spacing:"md"},y),o.createElement(c.Gy,{justify:"flex-end",spacing:"md"},a))):o.createElement("div",{className:v.modalButtonRow},o.createElement(c.Gy,{justify:"flex-end",spacing:"md",wrap:!0},a))}d.ButtonRow=E;function h({icon:y,iconTooltip:a,title:v,id:g}){return o.createElement(u.r,{icon:y,iconTooltip:a,title:v,id:g})}},29473:(Y,I,e)=>{"use strict";e.d(I,{r:()=>s});var t=e(96540),n=e(40845),r=e(88448);const s=({icon:o,iconTooltip:m,title:l,children:i,id:c})=>{const u=(0,n.of)(r.o);return t.createElement(t.Fragment,null,t.createElement("h2",{className:u.modalHeaderTitle,id:c},l),i)}},95246:(Y,I,e)=>{"use strict";e.d(I,{O:()=>n});var t=e(96540);const n=({children:r})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},r)))},25897:(Y,I,e)=>{"use strict";e.d(I,{J:()=>o});var t=e(96540),n=e(40675),r=e(63021),s=e(29473);const o=({icon:m,title:l,tabs:i,activeTab:c,onChangeTab:u})=>t.createElement(s.r,{icon:m,title:l},t.createElement(r.U,{hideBorder:!0},i.map((f,d)=>t.createElement(n.o,{key:`${f.value}-${d}`,label:f.label,icon:f.icon,suffix:f.tabSuffix,active:f.value===c,onChangeTab:()=>u(f)}))))},71678:(Y,I,e)=>{"use strict";e.d(I,{$s:()=>o,EO:()=>s,YO:()=>r,wE:()=>n});var t=e(96540);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class r extends t.Component{constructor(l){super(l),this.showModal=(i,c)=>{this.setState({component:i,props:c})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:l.component||null,props:l.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:m,props:l})=>m?t.createElement(m,{...l}):null),o=n.Consumer},88448:(Y,I,e)=>{"use strict";e.d(I,{o:()=>n});var t=e(32196);const n=r=>{const s=r.shape.radius.default;return{modal:(0,t.css)({position:"fixed",zIndex:r.zIndex.modal,background:r.colors.background.primary,boxShadow:r.shadows.z3,borderRadius:s,border:`1px solid ${r.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column"}),modalBackdrop:(0,t.css)({position:"fixed",zIndex:r.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:r.components.overlay.background,backdropFilter:"blur(1px)"}),modalHeader:(0,t.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:r.spacing(1,2,0,2)}),modalHeaderWithTabs:(0,t.css)({borderBottom:`1px solid ${r.colors.border.weak}`}),modalHeaderTitle:(0,t.css)({fontSize:r.typography.size.lg,margin:r.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,t.css)({marginRight:r.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,t.css)({height:"100%",display:"flex",alignItems:"center",color:r.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,t.css)({overflow:"auto",padding:r.spacing(3),width:"100%"}),modalButtonRow:(0,t.css)({paddingTop:r.spacing(3)})}}},32372:(Y,I,e)=>{"use strict";e.d(I,{B:()=>E});var t=e(32196),n=e(96540),r=e(96915),s=e(13544),o=e(40845),m=e(85828),l=e(19716);function i(y){for(let a=y.length-1;a>0;a--){const v=y.charAt(a);if(v==="$")return{index:a,prefix:y.substring(a)};if(v===" "||v==="	"||v==='"'||v==="'")return{index:a+1,prefix:y.substring(a+1)}}return{index:0,prefix:y}}function c(y,a,v,g){const b=[];for(const P of v)a&&!P.label.startsWith(a)||b.push({...P,kind:u(y,P.kind),range:g,insertText:P.insertText??P.label});return b}function u(y,a){switch(a){case l.q.Method:return y.languages.CompletionItemKind.Method;case l.q.Field:return y.languages.CompletionItemKind.Field;case l.q.Property:return y.languages.CompletionItemKind.Property;case l.q.Constant:return y.languages.CompletionItemKind.Constant;case l.q.Text:return y.languages.CompletionItemKind.Text}return y.languages.CompletionItemKind.Text}function f(y,a,v,g){if(!(!a||!v))return y.languages.registerCompletionItemProvider(a,{triggerCharacters:["$"],provideCompletionItems:(b,P,C)=>{if(b.id!==g)return;const D={startLineNumber:P.lineNumber,endLineNumber:P.lineNumber,startColumn:P.column,endColumn:P.column};if(C.triggerCharacter==="$")return D.startColumn=P.column-1,{suggestions:c(y,"$",v(),D)};const T=b.getValueInRange({startLineNumber:P.lineNumber,startColumn:1,endLineNumber:P.lineNumber,endColumn:P.column}),{index:M,prefix:O}=i(T);D.startColumn=M+1;const S=c(y,O,v(),D);if(S.length)return{suggestions:S}}})}class d extends n.PureComponent{constructor(a){super(a),this.loadCustomLanguage=()=>{const{language:v}=this.props,g=r.l.getIfExists(v);return g?g.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:v}=this.props;v&&v(this.getEditorValue())},this.onFocus=()=>{const{onFocus:v}=this.props;v&&v(this.getEditorValue())},this.onSave=()=>{const{onSave:v}=this.props;v&&v(this.getEditorValue())},this.handleBeforeMount=v=>{this.monaco=v;const{onBeforeEditorMount:g}=this.props;g?.(v)},this.handleOnMount=(v,g)=>{const{getSuggestions:b,language:P,onChange:C,onEditorDidMount:D}=this.props;this.modelId=v.getModel()?.id,this.getEditorValue=()=>v.getValue(),b&&this.modelId&&(this.completionCancel=f(g,P,b,this.modelId)),v.onKeyDown(T=>{T.keyCode===g.KeyCode.KeyS&&(T.ctrlKey||T.metaKey)&&(T.preventDefault(),this.onSave())}),C&&v.getModel()?.onDidChangeContent(()=>C(v.getValue())),D&&D(v,g)}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose(),this.props.onEditorWillUnmount?.()}componentDidUpdate(a){const{getSuggestions:v,language:g}=this.props,b=a.language!==g;if(a.getSuggestions!==v||b){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}v&&this.modelId&&(this.completionCancel=f(this.monaco,g,v,this.modelId))}b&&this.loadCustomLanguage()}render(){const{theme:a,language:v,width:g,height:b,showMiniMap:P,showLineNumbers:C,readOnly:D,monacoOptions:T}=this.props,{alwaysConsumeMouseWheel:M,...O}=T??{},S=this.props.value??"",p=S.length>100,x=this.props.containerStyles??h(a).container,A={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:p&&P,renderCharacters:!1},readOnly:D,lineNumbersMinChars:4,lineDecorationsWidth:1*a.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*a.spacing.gridSize,bottom:.5*a.spacing.gridSize},fixedOverflowWidgets:!0,scrollbar:{alwaysConsumeMouseWheel:M??!1}};return C||(A.glyphMargin=!1,A.folding=!1,A.lineNumbers="off",A.lineNumbersMinChars=0),n.createElement("div",{className:x,onFocus:this.onFocus,onBlur:this.onBlur,"data-testid":s.Tp.components.CodeEditor.container},n.createElement(m.m,{width:g,height:b,language:v,value:S,options:{...A,...O??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount,keepCurrentModel:!0}))}}const E=(0,o.cV)(d),h=y=>({container:(0,t.css)({borderRadius:y.shape.radius.default,border:`1px solid ${y.components.input.borderColor}`})})},85828:(Y,I,e)=>{"use strict";e.d(I,{m:()=>m});var t=e(96540),n=e(16817);const r=l=>{const i=(0,n.A)(async()=>await l);return{...i,dependency:i.value}};var s=e(52446),o=e(39558);const m=l=>{const{loading:i,error:c,dependency:u}=r(Promise.all([e.e(8477),e.e(6556),e.e(8926)]).then(e.bind(e,16556)));if(i)return t.createElement(o._,{text:""});if(c)return t.createElement(s.D,{title:"React Monaco Editor failed to load",error:c,errorInfo:{componentStack:c?.stack||""}});const f=u.ReactMonacoEditor;return t.createElement(f,{...l})}},19716:(Y,I,e)=>{"use strict";e.d(I,{q:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},99544:(Y,I,e)=>{"use strict";e.d(I,{O:()=>n});var t=e(19716);function n(r){const s="${"+r.value+"}",o=r.value===r.label?r.origin:`${r.label} / ${r.origin}`;return{label:s,kind:t.q.Property,detail:o,documentation:r.documentation}}},95247:(Y,I,e)=>{"use strict";e.d(I,{d:()=>u});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(16797),m=e(14578),l=e(29158),i=e(50720),c=e(15068);const u=n.memo(({title:d,section:E,parent:h,pageIcon:y,onGoBack:a,children:v,titleHref:g,parentHref:b,leftItems:P,isFullscreen:C,className:D,"aria-label":T,buttonOverflowAlignment:M="right",forceShowLeftItems:O=!1})=>{const S=(0,s.of)(f),p=(0,t.cx)("page-toolbar",S.toolbar,{"page-toolbar--fullscreen":C,[S.noPageIcon]:!y},D),x=n.createElement(n.Fragment,null,n.createElement("span",{className:S.truncateText},d),E&&n.createElement("span",{className:S.pre}," / ",E));return n.createElement("nav",{className:p,"aria-label":T},n.createElement("div",{className:S.leftWrapper},y&&!a&&n.createElement("div",{className:S.pageIcon},n.createElement(m.I,{name:y,size:"lg","aria-hidden":!0})),a&&n.createElement("div",{className:S.pageIcon},n.createElement(l.K,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","data-testid":r.Tp.components.BackButton.backArrow,onClick:a})),n.createElement("nav",{"aria-label":"Search links",className:S.navElement},h&&b&&n.createElement(n.Fragment,null,n.createElement(i.N,{"aria-label":`Search dashboard in the ${h} folder`,className:(0,t.cx)(S.titleText,S.parentLink,S.titleLink,S.truncateText),href:b},h," ",n.createElement("span",{className:S.parentIcon})),g&&n.createElement("span",{className:(0,t.cx)(S.titleText,S.titleDivider),"aria-hidden":!0},"/")),(d||!!P?.length)&&n.createElement("div",{className:S.titleWrapper},d&&n.createElement("h1",{className:S.h1Styles},g?n.createElement(i.N,{"aria-label":"Search dashboard by name",className:(0,t.cx)(S.titleText,S.titleLink),href:g},x):n.createElement("div",{className:S.titleText},x)),P?.map((A,R)=>n.createElement("div",{className:(0,t.cx)(S.leftActionItem,{[S.forceShowLeftActionItems]:O}),key:R},A))))),n.createElement(c.U,{alignment:M},n.Children.toArray(v).filter(Boolean)))});u.displayName="PageToolbar";const f=d=>{const{spacing:E,typography:h}=d,y=(0,o.getFocusStyles)(d);return{pre:(0,t.css)({whiteSpace:"pre"}),toolbar:(0,t.css)({alignItems:"center",background:d.colors.background.canvas,display:"flex",gap:d.spacing(2),justifyContent:"space-between",padding:d.spacing(1.5,2),[d.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,t.css)({[d.breakpoints.down("md")]:{paddingLeft:d.spacing(2)}}),leftWrapper:(0,t.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,t.css)({display:"none",[d.breakpoints.up("sm")]:{display:"flex",paddingRight:d.spacing(1),alignItems:"center"}}),truncateText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,t.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,t.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,t.css)({margin:E(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,t.css)({marginLeft:d.spacing(.5)}),titleText:(0,t.css)({display:"flex",fontSize:h.size.lg,margin:0,borderRadius:d.shape.radius.default}),titleLink:(0,t.css)({"&:focus-visible":y}),titleDivider:(0,t.css)({padding:E(0,.5,0,.5),display:"none",[d.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,t.css)({display:"none",[d.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,t.css)({display:"none",alignItems:"center",paddingRight:E(.5),[d.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,t.css)({display:"flex"})}}},19384:(Y,I,e)=>{"use strict";e.d(I,{d:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(14578);const m=({currentPage:i,numberOfPages:c,onNavigate:u,hideWhenSinglePage:f,showSmallVersion:d,className:E})=>{const h=(0,r.of)(l),y=d?1:8,a=(0,n.useMemo)(()=>{const v=[...new Array(c).keys()],g=c>y,b=(P,C)=>n.createElement("li",{key:P,className:h.item},n.createElement(s.$n,{size:"sm",variant:C,onClick:()=>u(P)},P));return v.reduce((P,C)=>{const D=C+1,T=D===i?"primary":"secondary",M=y,O=c-y+1,S=O-M,p=D===1||D===c,x=S>-1&&i>=M&&i<=O,A=d?1:3,R=d?0:2;return g?p||i<M&&D<M||S>=0&&i>O&&D>O||S<0&&i>=M&&D>O||x&&D>=i-R&&D<=i+R?P.push(b(D,T)):(D===M&&i<M||D===O&&i>O||x&&(D===i-A||D===i+A))&&P.push(n.createElement("li",{key:D,className:h.item},n.createElement(o.I,{className:h.ellipsis,name:"ellipsis-v"}))):P.push(b(D,T)),P},[])},[i,c,u,y,d,h.ellipsis,h.item]);return f&&c<=1?null:n.createElement("div",{className:(0,t.cx)(h.container,E)},n.createElement("ol",null,n.createElement("li",{className:h.item},n.createElement(s.$n,{"aria-label":"previous page",size:"sm",variant:"secondary",onClick:()=>u(i-1),disabled:i===1},n.createElement(o.I,{name:"angle-left"}))),a,n.createElement("li",{className:h.item},n.createElement(s.$n,{"aria-label":"next page",size:"sm",variant:"secondary",onClick:()=>u(i+1),disabled:i===c},n.createElement(o.I,{name:"angle-right"})))))},l=()=>({container:(0,t.css)({float:"right"}),item:(0,t.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,t.css)({transform:"rotate(90deg)"})})},89963:(Y,I,e)=>{"use strict";e.d(I,{I:()=>l});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(14578),m=e(56034);const l=({onCancel:c,loading:u})=>{const f=(0,s.of)(i);return u?n.createElement(m.m,{content:"Cancel query"},n.createElement(o.I,{className:(0,t.cx)("spin-clockwise",{[f.clickable]:!!c}),name:"sync",size:"sm",onClick:c,"data-testid":r.Tp.components.LoadingIndicator.icon})):null},i=()=>({clickable:(0,t.css)({cursor:"pointer"})})},79041:(Y,I,e)=>{"use strict";e.d(I,{XF:()=>s,d2:()=>o,e4:()=>r});var t=e(96540),n=e(18226);const r=t.createContext({eventsScope:"global",eventBus:new n.o}),s=r.Provider,o=()=>t.useContext(r)},91052:(Y,I,e)=>{"use strict";e.d(I,{NR:()=>B});var t=e(89963),n=e(32196),r=e(96540),s=e(42941),o=e(49185),m=e(39070),l=e(13544),i=e(40845),c=e(16797);function u({children:U,delay:F}){const[K,w]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{window.setTimeout(()=>{w(!0)},F)},[U,F]),r.createElement(r.Fragment,null,K?U:null)}var f=e(14578),d=e(57514),E=e(56034),h=e(83122),y=e(27746);function a({menu:U,title:F,placement:K="bottom",offset:w,dragClassCancel:L,menuButtonClass:V,onOpenMenu:N}){const z=F?l.Tp.components.Panels.Panel.menu(F):"panel-menu-button",J=(0,r.useCallback)(G=>{G&&N&&N()},[N]);return r.createElement(h.m,{overlay:U,placement:K,offset:w,onVisibleChange:J},r.createElement(y.I,{"aria-label":`Menu for panel with ${F?`title ${F}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":z,className:(0,n.cx)(V,L)}))}function v({menu:U,title:F,dragClass:K,children:w,offset:L=-32,onOpenMenu:V}){const N=(0,i.of)(g),z=(0,r.useRef)(null),J=l.Tp.components.Panels.Panel.HoverWidget,G=(0,r.useCallback)(q=>{z.current?.setPointerCapture(q.pointerId)},[]),H=(0,r.useCallback)(q=>{z.current?.releasePointerCapture(q.pointerId)},[]);return w===void 0||r.Children.count(w)===0?null:r.createElement("div",{className:(0,n.cx)(N.container,"show-on-hover"),style:{top:L},"data-testid":J.container},K&&r.createElement("div",{className:(0,n.cx)(N.square,N.draggable,K),onPointerDown:G,onPointerUp:H,ref:z,"data-testid":J.dragIcon},r.createElement(f.I,{name:"expand-arrows",className:N.draggableIcon})),w,U&&r.createElement(a,{menu:U,title:F,placement:"bottom",menuButtonClass:N.menuButton,onOpenMenu:V}))}function g(U){return{container:(0,n.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:U.colors.background.secondary,color:U.colors.text.primary,border:`1px solid ${U.colors.border.weak}`,borderRadius:U.shape.radius.default,height:U.spacing(4),boxShadow:U.shadows.z1}),square:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center",width:U.spacing(4),height:"100%"}),draggable:(0,n.css)({cursor:"move",[U.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,n.css)({background:"inherit",border:"none","&:hover":{background:U.colors.secondary.main}}),draggableIcon:(0,n.css)({transform:"rotate(45deg)",color:U.colors.text.secondary,"&:hover":{color:U.colors.text.primary}})}}var b=e(55852);const P=(0,r.forwardRef)(({className:U,children:F,href:K,onClick:w,target:L,title:V,...N},z)=>{const J=(0,i.of)(C);return K?r.createElement("a",{ref:z,href:K,onClick:w,target:L,title:V,className:(0,n.cx)(J.linkItem,U),...N},F):w?r.createElement(b.$n,{ref:z,className:(0,n.cx)(J.item,U),variant:"secondary",fill:"text",onClick:w},F):r.createElement("span",{ref:z,className:(0,n.cx)(J.item,U),...N},F)});P.displayName="TitleItem";const C=U=>{const F=(0,n.css)({color:`${U.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${U.shape.radius.default}`,padding:`${U.spacing(0,1)}`,height:`${U.spacing(U.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,c.getFocusStyles)(U),zIndex:1},"&: focus:not(:focus-visible)":(0,c.getMouseFocusStyles)(U),"&:hover ":{boxShadow:`${U.shadows.z1}`,background:`${U.colors.background.secondary}`,color:`${U.colors.text.primary}`}});return{item:F,linkItem:(0,n.cx)(F,(0,n.css)({cursor:"pointer"}))}};function D({description:U,className:F}){const K=(0,i.of)(T),w=()=>{const L=typeof U=="function"?U():U;return r.createElement("div",{className:"panel-info-content markdown-html"},r.createElement("div",{dangerouslySetInnerHTML:{__html:L}}))};return U!==""?r.createElement(E.m,{interactive:!0,content:w},r.createElement(P,{className:(0,n.cx)(F,K.description)},r.createElement(f.I,{name:"info-circle",size:"md"}))):null}const T=U=>({description:(0,n.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function M({message:U,onClick:F,ariaLabel:K="status"}){const w=(0,i.of)(O);return r.createElement(y.I,{className:w.buttonStyles,onClick:F,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:U||"","aria-label":K,"data-testid":l.Tp.components.Panels.Panel.status("error")})}const O=U=>{const{headerHeight:F,padding:K}=U.components.panel;return{buttonStyles:(0,n.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:U.spacing(K),width:U.spacing(F),height:U.spacing(F),borderRadius:U.shape.radius.default})}};function S({width:U,height:F,children:K,padding:w="md",title:L="",description:V="",displayMode:N="default",titleItems:z,menu:J,dragClass:G,dragClassCancel:H,hoverHeader:q=!1,hoverHeaderOffset:le,loadingState:me,statusMessage:k,statusMessageOnClick:ee,leftItems:X,actions:j,onCancelQuery:ne,onOpenMenu:te,collapsible:oe=!1,collapsed:ie,onToggleCollapse:ue}){const be=(0,i.$j)(),ge=(0,i.of)(R),re=(0,r.useId)(),ye=!q,[Be,ve]=(0,s.A)(!0);ie===void 0&&(ie=!Be);const Me="show-on-hover",ke=N==="transparent",Se=x(be,ye),{contentStyle:We,innerWidth:De,innerHeight:pe}=A(w,be,Se,ie,F,U),Ne={height:Se,cursor:G?"move":"auto"},Le={width:U,height:ie?void 0:F},[He,{width:je}]=(0,o.A)();X&&(j=X);const at=typeof L=="string"?l.Tp.components.Panels.Panel.title(L):"Panel",Ye=r.createElement(r.Fragment,null,!oe&&L&&r.createElement("h6",{title:typeof L=="string"?L:void 0,className:ge.title},L),oe&&r.createElement("h6",{className:ge.title},r.createElement("button",{type:"button",className:ge.clearButtonStyles,onClick:()=>{ve(),ue&&ue(!ie)},"aria-expanded":!ie,"aria-controls":ie?void 0:re},r.createElement(f.I,{name:ie?"angle-right":"angle-down","aria-hidden":!!L,"aria-label":L?void 0:"toggle collapse panel"}),L)),r.createElement("div",{className:(0,n.cx)(ge.titleItems,H),"data-testid":"title-items-container"},r.createElement(D,{description:V,className:H}),z),me===m.Gu.Streaming&&r.createElement(E.m,{content:ne?"Stop streaming":"Streaming"},r.createElement(P,{className:H,"data-testid":"panel-streaming",onClick:ne},r.createElement(f.I,{name:"circle-mono",size:"md",className:ge.streaming}))),me===m.Gu.Loading&&ne&&r.createElement(u,{delay:2e3},r.createElement(E.m,{content:"Cancel query"},r.createElement(P,{className:(0,n.cx)(H,ge.pointer),"data-testid":"panel-cancel-query",onClick:ne},r.createElement(f.I,{name:"sync-slash",size:"md"})))),r.createElement("div",{className:ge.rightAligned},j&&r.createElement("div",{className:ge.rightActions},p(j,$e=>$e))));return r.createElement("div",{className:(0,n.cx)(ge.container,{[ge.transparentContainer]:ke}),style:Le,"data-testid":at,tabIndex:0,ref:He},r.createElement("div",{className:ge.loadingBarContainer},me===m.Gu.Loading?r.createElement(d.G,{width:je,ariaLabel:"Panel loading bar"}):null),q&&r.createElement(r.Fragment,null,r.createElement(v,{menu:J,title:typeof L=="string"?L:void 0,offset:le,dragClass:G,onOpenMenu:te},Ye),k&&r.createElement("div",{className:ge.errorContainerFloating},r.createElement(M,{message:k,onClick:ee,ariaLabel:"Panel status"}))),ye&&r.createElement("div",{className:(0,n.cx)(ge.headerContainer,G),style:Ne,"data-testid":"header-container"},k&&r.createElement("div",{className:H},r.createElement(M,{message:k,onClick:ee,ariaLabel:"Panel status"})),Ye,J&&r.createElement(a,{menu:J,title:typeof L=="string"?L:void 0,placement:"bottom-end",menuButtonClass:(0,n.cx)(ge.menuItem,H,Me),onOpenMenu:te})),!ie&&r.createElement("div",{id:re,className:(0,n.cx)(ge.content,F===void 0&&ge.containNone),style:We},typeof K=="function"?K(De,pe):K))}const p=(U,F)=>{const K=r.Children.toArray(U).filter(Boolean);return K.length>0?F(K):null},x=(U,F)=>F?U.spacing.gridSize*U.components.panel.headerHeight:0,A=(U,F,K,w,L,V)=>{const N=(U==="md"?F.components.panel.padding:0)*F.spacing.gridSize,z=N*2,J=1*2;let G=0;V&&(G=V-z-J);let H=0;return L&&(H=L-K-z-J),w&&(H=K),{contentStyle:{padding:N},innerWidth:G,innerHeight:H}},R=U=>{const{background:F,borderColor:K,padding:w}=U.components.panel;return{container:(0,n.css)({label:"panel-container",backgroundColor:F,border:`1px solid ${K}`,position:"relative",borderRadius:U.shape.radius.default,height:"100%",display:"flex",flexDirection:"column",".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,c.getFocusStyles)(U),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),transparentContainer:(0,n.css)({label:"panel-transparent-container",backgroundColor:"transparent",border:"1px solid transparent",boxSizing:"border-box","&:hover":{border:`1px solid ${K}`}}),loadingBarContainer:(0,n.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%"}),containNone:(0,n.css)({contain:"none"}),content:(0,n.css)({label:"panel-content",flexGrow:1,contain:"size layout"}),headerContainer:(0,n.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,n.css)({cursor:"pointer"}),streaming:(0,n.css)({label:"panel-streaming",marginRight:0,color:U.colors.success.text,"&:hover":{color:U.colors.success.text}}),title:(0,n.css)({label:"panel-title",display:"flex",marginBottom:0,padding:U.spacing(0,w),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:U.typography.h6.fontSize,fontWeight:U.typography.h6.fontWeight}),items:(0,n.css)({display:"flex"}),item:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,n.css)({visibility:"hidden"}),menuItem:(0,n.css)({label:"panel-menu",border:"none",background:U.colors.secondary.main,"&:hover":{background:U.colors.secondary.shade}}),errorContainerFloating:(0,n.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:1}),rightActions:(0,n.css)({display:"flex",padding:U.spacing(0,w),gap:U.spacing(1)}),rightAligned:(0,n.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,n.css)({display:"flex",height:"100%"}),clearButtonStyles:(0,n.css)({alignItems:"center",display:"flex",gap:U.spacing(.5),background:"transparent",color:U.colors.text.primary,border:"none",padding:0,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:U.typography.h6.fontSize,fontWeight:U.typography.h6.fontWeight})}},B=S;B.LoadingIndicator=t.I,B.TitleItem=P},88895:(Y,I,e)=>{"use strict";e.d(I,{B:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},52494:(Y,I,e)=>{"use strict";e.d(I,{_:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:l,...i})=>{const c=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(c,l),...i},m)},o=m=>(0,t.css)({backgroundColor:m.components.panel.background,border:`1px solid ${m.components.panel.borderColor}`,borderRadius:m.shape.radius.default})},98624:(Y,I,e)=>{"use strict";e.d(I,{B:()=>s});var t=e(96540),n=e(43429),r=e(39938);const s=({status:m,color:l,...i})=>{const c=o(m);return t.createElement(r.E,{text:c.text,color:c.color,icon:c.icon,tooltip:c.tooltip,...i})};s.displayName="PluginSignatureBadge";function o(m){switch(m||(m=n.Ac.invalid),m){case n.Ac.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Ac.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Ac.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Ac.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Ac.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},17464:(Y,I,e)=>{"use strict";e.d(I,{ZL:()=>s,gF:()=>o,qB:()=>m});var t=e(96540),n=e(40961),r=e(40845);function s(i){const{children:c,className:u,root:f,forwardedRef:d}=i,E=(0,r.$j)(),h=(0,t.useRef)(null),y=f??o();return h.current||(h.current=document.createElement("div"),u&&(h.current.className=u),h.current.style.position="relative",h.current.style.zIndex=`${E.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(h.current&&y.appendChild(h.current),()=>{h.current&&y.removeChild(h.current)}),[y]),n.createPortal(t.createElement("div",{ref:d},c),h.current)}function o(){return window.document.getElementById("grafana-portal-container")??document.body}function m(){return t.createElement("div",{id:"grafana-portal-container"})}const l=t.forwardRef((i,c)=>t.createElement(s,{...i,forwardedRef:c}));l.displayName="RefForwardingPortal"},20084:(Y,I,e)=>{"use strict";e.d(I,{X:()=>C});var t=e(32196),n=e(46942),r=e.n(n),s=e(2543),o=e.n(s),m=e(96540),l=e(52845),i=e(29317),c=e(13544),u=e(80903),f=e(4269),d=e(88295),E=e(74738),h=e(31589),y=e(1020),a=e(99453),v=e(40845),g=e(16797),b=e(72307);class P extends m.PureComponent{constructor(M){super(M),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(A,R)=>{const B=A.document!==this.state.value.document,U=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(A),this.setState({value:A},()=>{if(B){const F=l.A.serialize(U)!==l.A.serialize(A);F&&R&&this.runOnChangeAndRunQuery(),F&&!R&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:A}=this.props,R=l.A.serialize(this.state.value);A&&A(this.cleanText(R))},this.runOnRunQuery=()=>{const{onRunQuery:A}=this.props;A&&(A(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(A,R,B)=>{const{onBlur:U}=this.props;if(U)U();else{const F=this.lastExecutedValue?l.A.serialize(this.lastExecutedValue):"",K=l.A.serialize(R.value);F!==K&&this.runOnChangeAndRunQuery()}return B()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:O,cleanText:S,portalOrigin:p,onWillApplySuggestion:x}=M;this.plugins=[(0,u.Pz)({onTypeahead:O,cleanText:S,portalOrigin:p,onWillApplySuggestion:x}),(0,f.U)({handler:this.runOnChangeAndRunQuery}),(0,d.O)(),(0,E.v)(),(0,h.l)(),(0,y.T)(),(0,a.s)(),...M.additionalPlugins||[]].filter(A=>A),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,b.mO)(M.query||"",M.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,O){const{query:S,syntax:p,syntaxLoaded:x}=this.props;if(!M.syntaxLoaded&&x&&this.editor){const R=this.editor.insertText(" ").deleteBackward(1);this.onChange(R.value,!0)}const{value:A}=this.state;S!==M.query&&S!==l.A.serialize(A)&&this.setState({value:(0,b.mO)(S||"",p)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:O}=this.props,S=r()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),p=D(O);return m.createElement("div",{className:(0,t.cx)(S,p.wrapper)},m.createElement("div",{className:"slate-query-field","data-testid":c.Tp.components.QueryField.container},m.createElement(i.KE,{ref:x=>this.editor=x,schema:b.yx,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:x=>{this.onChange(x.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const C=(0,v.cV)(P);C.defaultProps={onBlur:()=>{}};const D=T=>{const M=(0,g.getFocusStyles)(T);return{wrapper:(0,t.css)({"&:focus-within":M})}}},11134:(Y,I,e)=>{"use strict";e.d(I,{cC:()=>u,cb:()=>c});var t=e(91e3),n=e(96540),r=e(70416),s=e(13544),o=e(76412),m=e(19727),l=e(9261),i=e(27746);const c=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class u extends n.PureComponent{constructor(h){super(h),this.onChangeSelect=y=>{const{onIntervalChanged:a}=this.props;a&&y.value!=null&&a(y.value)}}static{this.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"}}static{this.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"}}static{this.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"}}static{this.isLive=h=>h===u.liveOption.value}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:h,intervals:y,tooltip:a,value:v,text:g,isLoading:b,noIntervalPicker:P,width:C,showAutoInterval:D}=this.props,T=v||"",M=this.getVariant(),O=d({intervals:y,showAutoInterval:D}),S=O.find(({value:L})=>L===T),p=f(u.offOption.value);let x=S||p;x.label===p.label&&(x={value:""});const A=x.ariaLabel,R=(0,o.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:A}),B=(0,o.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),U=x.value===""?B:R,F=(0,o.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),K=(0,o.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),w=x.value===""?K:F;return n.createElement(m.e,{className:"refresh-picker"},n.createElement(i.I,{"aria-label":g,tooltip:a,onClick:h,variant:M,icon:b?"spinner":"sync",style:C?{width:C}:void 0,"data-testid":s.Tp.components.RefreshPicker.runButtonV2},g),!P&&n.createElement(l.f,{value:x,options:O,onChange:this.onChangeSelect,variant:M,"data-testid":s.Tp.components.RefreshPicker.intervalButtonV2,"aria-label":U,tooltip:w}))}}function f(E){switch(E){case u.liveOption.value:return{label:(0,o.t)("refresh-picker.live-option.label","Live"),value:E,ariaLabel:(0,o.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case u.offOption.value:return{label:(0,o.t)("refresh-picker.off-option.label","Off"),value:E,ariaLabel:(0,o.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case u.autoOption.value:return{label:(0,o.t)("refresh-picker.auto-option.label",u.autoOption.label),value:E,ariaLabel:(0,o.t)("refresh-picker.auto-option.aria-label",u.autoOption.ariaLabel)}}return{label:E,value:E}}function d({intervals:E=c,showAutoInterval:h=!1}={}){const y=E.map(a=>{const v=(0,r.E9)(a),g=(0,t.a)(v);return{label:a,value:a,ariaLabel:g}});return h&&y.unshift(f(u.autoOption.value)),y.unshift(f(u.offOption.value)),y}},44522:(Y,I,e)=>{"use strict";e.d(I,{I:()=>r});var t=e(96540),n=e(40672);function r({component:s,content:o,...m}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.sQ.sanitize(o)},...m})}},56286:(Y,I,e)=>{"use strict";e.d(I,{L:()=>i});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(55852),m=e(90090);const l=()=>({noRadiusInput:(0,t.css)({borderBottomRightRadius:"0 !important",borderTopRightRadius:"0 !important"}),noRadiusButton:(0,t.css)({borderBottomLeftRadius:"0 !important",borderTopLeftRadius:"0 !important"})}),i=({label:c="Password",labelWidth:u,inputWidth:f=12,onReset:d,isConfigured:E,tooltip:h,placeholder:y="Password",interactive:a,...v})=>{const g=l();return s.createElement(m.z,{label:c,tooltip:h,interactive:a,labelWidth:u,inputEl:E?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${f}`,g.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(v,"value")}),s.createElement(o.$n,{onClick:d,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${f}`,placeholder:y,...v})})};i.displayName="SecretFormField"},9226:(Y,I,e)=>{"use strict";e.d(I,{L4:()=>l});var t=e(96540),n=e(55852),r=e(10354),s=e(67061);const o="configured",m="Reset",l=({isConfigured:i,onReset:c,...u})=>t.createElement(s.B,null,!i&&t.createElement(r.p,{...u,type:"password"}),i&&t.createElement(t.Fragment,null,t.createElement(r.p,{...u,type:"text",disabled:!0,value:o}),t.createElement(n.$n,{onClick:c,variant:"secondary"},m)))},49718:(Y,I,e)=>{"use strict";e.d(I,{L:()=>t.L4});var t=e(9226)},58724:(Y,I,e)=>{"use strict";e.d(I,{lp:()=>u});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(66864),m=e(21744);const l="configured",i="Reset",c=f=>({configuredStyle:(0,t.css)({minHeight:f.spacing(f.components.height.md),paddingTop:f.spacing(.5),resize:"none"})}),u=({isConfigured:f,onReset:d,...E})=>{const h=(0,r.of)(c);return n.createElement(o.Gy,null,!f&&n.createElement(m.f,{...E}),f&&n.createElement(m.f,{...E,rows:1,disabled:!0,value:l,className:(0,t.cx)(h.configuredStyle)}),f&&n.createElement(s.$n,{onClick:d,variant:"secondary"},i))}},7968:(Y,I,e)=>{"use strict";e.d(I,{l:()=>t.lp});var t=e(58724)},38401:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>u});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(76892),l=e(13102),i=e(86997),c=e(2336);function u({options:f,value:d,onChange:E,Component:h,className:y,allowCustomValue:a,allowEmptyValue:v,placeholder:g,disabled:b,inputMinWidth:P,inputPlaceholder:C,onExpandedChange:D,autofocus:T=!1,...M}){const[O,S,p,x]=(0,c.Q)(T,D),A=P?Math.max(P,S):S,R=(0,o.of)(i.m);if(!p){const B=(0,n.isObject)(d)?d.label:d,U=B!=null?String(B):void 0;return s.createElement(O,{disabled:b,Component:h||s.createElement(m.c,{className:(0,t.cx)(R.segment,{[R.queryPlaceholder]:g!==void 0&&!d,[R.disabled]:b},y)},U||g)})}return s.createElement(l.a,{...M,value:d&&!(0,n.isObject)(d)?{value:d}:d,placeholder:C,options:f,width:A,onClickOutside:()=>x(!1),allowCustomValue:a,allowEmptyValue:v,onChange:B=>{x(!1),E(B)}})}},83684:(Y,I,e)=>{"use strict";e.d(I,{s:()=>d});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(41053),m=e(40845),l=e(76412),i=e(76892),c=e(13102),u=e(86997),f=e(2336);function d({value:h,onChange:y,loadOptions:a,reloadOptionsOnChange:v=!1,Component:g,className:b,allowCustomValue:P,allowEmptyValue:C,disabled:D,placeholder:T,inputMinWidth:M,inputPlaceholder:O,autofocus:S=!1,onExpandedChange:p,noOptionMessageHandler:x=E,...A}){const[R,B]=(0,o.A)(a,[a]),[U,F,K,w]=(0,f.Q)(S,p),L=M?Math.max(M,F):F,V=(0,m.of)(u.m);if(!K){const N=(0,n.isObject)(h)?h.label:h,z=N!=null?String(N):void 0;return s.createElement(U,{onClick:v?void 0:B,disabled:D,Component:g||s.createElement(i.c,{className:(0,t.cx)(V.segment,{[V.queryPlaceholder]:T!==void 0&&!h,[V.disabled]:D},b)},z||T)})}return s.createElement(c.a,{...A,value:h&&!(0,n.isObject)(h)?{value:h}:h,placeholder:O,options:R.value??[],loadOptions:v?B:void 0,width:L,noOptionsMessage:x(R),allowCustomValue:P,allowEmptyValue:C,onClickOutside:()=>{w(!1)},onChange:N=>{w(!1),y(N)}})}function E(h){return h.loading?(0,l.t)("grafana-ui.segment-async.loading","Loading options..."):h.error?(0,l.t)("grafana-ui.segment-async.error","Failed to load options"):(0,l.t)("grafana-ui.segment-async.no-options","No options found")}},57752:(Y,I,e)=>{"use strict";e.d(I,{o:()=>u});var t=e(32196),n=e(96540),r=e(37151),s=e(40845),o=e(29413),m=e(76892),l=e(86997),i=e(2336);const c=14;function u({value:f,onChange:d,Component:E,className:h,placeholder:y,inputPlaceholder:a,disabled:v,autofocus:g=!1,onExpandedChange:b,...P}){const C=(0,n.useRef)(null),[D,T]=(0,n.useState)(f),[M,O]=(0,n.useState)((0,o.kD)((f||"").toString(),c).width),[S,,p,x]=(0,i.Q)(g,b),A=(0,s.of)(l.m);if((0,r.A)(C,()=>{x(!1),d(D)}),!p)return n.createElement(S,{disabled:v,Component:E||n.createElement(m.c,{className:(0,t.cx)(A.segment,{[A.queryPlaceholder]:y!==void 0&&!D,[A.disabled]:v},h)},f||y)});const R=(0,t.css)({width:`${Math.max(M+20,32)}px`});return n.createElement("input",{...P,ref:C,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",R),value:D,placeholder:a,onChange:B=>{const{width:U}=(0,o.kD)(B.target.value,c);O(U),T(B.target.value)},onBlur:()=>{x(!1),d(D)},onKeyDown:B=>{[13,27].includes(B.keyCode)&&(x(!1),d(D))}})}},64765:(Y,I,e)=>{"use strict";e.d(I,{L:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(39268),o=e(76892);const m=({label:i,htmlFor:c,children:u,fill:f})=>{const d=(0,r.of)(l);return n.createElement(n.Fragment,null,n.createElement(s.C,null,n.createElement(o.c,{htmlFor:c,width:12,className:d.label},i),u,f&&n.createElement("div",{className:d.fill},n.createElement(o.c,null,""))))},l=i=>({label:(0,t.css)({color:i.colors.primary.text}),fill:(0,t.css)({flexGrow:1,marginBottom:i.spacing(.5)})})},13102:(Y,I,e)=>{"use strict";e.d(I,{a:()=>s});var t=e(96540),n=e(40845),r=e(88323);function s({value:o,placeholder:m="",options:l=[],onChange:i,onClickOutside:c,loadOptions:u=void 0,width:f,noOptionsMessage:d="",allowCustomValue:E=!1,allowEmptyValue:h=!1,...y}){const a=(0,t.useRef)(null),v=(0,n.$j)();let g=f>0?f/v.spacing.gridSize:void 0,b,P={};return u?(b=r.DW,P={loadOptions:u,defaultOptions:!0}):b=r.l6,t.createElement("div",{...y,ref:a},t.createElement(b,{width:g,noOptionsMessage:d,placeholder:m,autoFocus:!0,isOpen:!0,onChange:i,options:l,value:o,closeMenuOnSelect:!1,onCloseMenu:()=>{if(a&&a.current){const C=a.current.querySelector('input[id^="react-select-"]');C&&(C.value||h)?i({value:C.value,label:C.value}):c()}},allowCustomValue:E,...P}))}},86997:(Y,I,e)=>{"use strict";e.d(I,{m:()=>n});var t=e(32196);const n=r=>{const s="v1"in r?r.v1.palette:r.palette;return{segment:(0,t.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,t.css)({color:s.gray2}),disabled:(0,t.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},2336:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>s});var t=e(96540),n=e(40845),r=e(55852);const s=(o,m)=>{const l=(0,t.useRef)(null),i=(0,n.of)(r.my),[c,u]=(0,t.useState)(o),[f,d]=(0,t.useState)(0),E=y=>{u(y),m&&m(y)};return[({Component:y,onClick:a,disabled:v})=>t.createElement("button",{type:"button",className:i,ref:l,disabled:v,onClick:()=>{E(!0),l&&l.current&&d(l.current.clientWidth*1.25),a?.()}},y),f,c,E]}},5342:(Y,I,e)=>{"use strict";e.d(I,{O:()=>o,p:()=>m});var t=e(96540),n=e(40845),r=e(29158),s=e(88824);const o=({innerProps:l,children:i})=>{const c=(0,n.$j)(),u=(0,s.J)(c);return t.createElement("div",{...l,className:u.multiValueContainer},i)},m=({children:l,innerProps:i})=>{const c=(0,n.$j)(),u=(0,s.J)(c);return t.createElement(r.K,{...i,name:"times",size:"sm",className:u.multiValueRemove,tooltip:"Remove"})}},88323:(Y,I,e)=>{"use strict";e.d(I,{Iv:()=>J,DW:()=>V,gZ:()=>z,KF:()=>L,l6:()=>w,KA:()=>b.K,ip:()=>N});var t=e(96540),n=e(72635),r=e(46005),s=e(8539),o=e(93943),m=e(66963),l=e(50877),i=e(40845),c=e(14578),u=e(62930);function f({selectProps:G}){const H=G.menuIsOpen,q=H?"search":"angle-down",le=H?"sm":"md";return t.createElement(c.I,{name:q,size:le})}var d=e(32196),E=e(10354);const h=t.forwardRef((G,H)=>{const{children:q}=G,le=(0,i.$j)(),me=(0,E.n)({theme:le,invalid:!1});return t.createElement("div",{className:(0,d.cx)(me.suffix,(0,d.css)({position:"relative"})),ref:H},q)});h.displayName="IndicatorsContainer";var y=e(87266);const a=t.forwardRef(function({focused:H,invalid:q,disabled:le,children:me,innerProps:k,prefix:ee,...X},j){const ne=(0,i.of)(v,q,!!ee);return t.createElement("div",{className:ne.input,...k,ref:j},ee&&t.createElement("div",{className:(0,d.cx)(ne.prefix)},ee),me)}),v=(G,H,q)=>{const le=(0,E.n)({theme:G,invalid:H});return{input:(0,d.cx)((0,y.g$)(G),(0,d.css)({width:"100%",maxWidth:"100%",display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",paddingRight:0,position:"relative",boxSizing:"border-box"}),q&&(0,d.css)({paddingLeft:0})),prefix:(0,d.cx)(le.prefix,(0,d.css)({position:"relative"}))}};var g=e(5342),b=e(4603),P=e(12681),C=e(80970),D=e(62235),T=e(88824);class M extends t.Component{render(){const{children:H}=this.props,{selectProps:q}=this.props;if(q&&Array.isArray(H)&&Array.isArray(H[0])&&q.maxVisibleValues!==void 0&&!(q.showAllSelectedWhenOpen&&q.menuIsOpen)){const[le,...me]=H,k=le.slice(0,q.maxVisibleValues);return this.renderContainer([k,...me])}return this.renderContainer(H)}renderContainer(H){const{isMulti:q,theme:le,selectProps:me}=this.props,k=this.props.selectProps?.noMultiValueWrap&&!this.props.selectProps?.menuIsOpen,ee=(0,T.J)(le),X=me["data-testid"],j=(0,d.cx)(ee.valueContainer,{[ee.valueContainerMulti]:q&&!k,[ee.valueContainerMultiNoWrap]:q&&k});return t.createElement("div",{"data-testid":X,className:j},H)}}const O=(0,i.cV)(M);var S=e(23731);const p=(G,H)=>{if(Array.isArray(G)){const q=G.filter(Boolean);return q?.length?q:void 0}if(typeof G=="object")return[G];if(typeof G=="string"||typeof G=="number"){const q=x(G,H);if(q)return[q]}},x=(G,H)=>{for(const q of H)if("options"in q){let le=x(G,q.options);if(le)return le}else if("value"in q&&q.value===G)return q;return null},A=G=>G.map(({description:H,...q})=>q),R=G=>{const{children:H,innerProps:q,selectProps:{menuIsOpen:le,onMenuClose:me,onMenuOpen:k},isFocused:ee,isMulti:X,getValue:j,innerRef:ne}=G,te=G.selectProps;return te.renderControl?t.createElement(te.renderControl,{isOpen:le,value:X?j():j()[0],ref:ne,onClick:le?me:k,onBlur:me,disabled:!!te.disabled,invalid:!!te.invalid}):t.createElement(a,{ref:ne,innerProps:q,prefix:te.prefix,focused:ee,invalid:!!te.invalid,disabled:!!te.disabled},H)};function B({allowCustomValue:G=!1,allowCreateWhileLoading:H=!1,"aria-label":q,"data-testid":le,autoFocus:me=!1,backspaceRemovesValue:k=!0,blurInputOnSelect:ee,cacheOptions:X,className:j,closeMenuOnSelect:ne=!0,components:te,createOptionPosition:oe="last",defaultOptions:ie,defaultValue:ue,disabled:be=!1,filterOption:ge,formatCreateLabel:re,getOptionLabel:ye,getOptionValue:Be,inputValue:ve,invalid:Me,isClearable:ke=!1,id:Se,isLoading:We=!1,isMulti:De=!1,inputId:pe,isOpen:Ne,isOptionDisabled:Le,isSearchable:He=!0,loadOptions:je,loadingMessage:at="Loading options...",maxMenuHeight:Ye=300,minMenuHeight:$e,maxVisibleValues:xe,menuPlacement:Fe="auto",menuPosition:Ee,menuShouldPortal:se=!0,noOptionsMessage:ae=(0,n.t)("grafana-ui.select.no-options-label","No options found"),onBlur:fe,onChange:Ce,onCloseMenu:Re,onCreateOption:Oe,onInputChange:ze,onKeyDown:Xe,onMenuScrollToBottom:Ze,onMenuScrollToTop:et,onOpenMenu:nt,onFocus:lt,openMenuOnFocus:rt=!1,options:ut=[],placeholder:Et=(0,n.t)("grafana-ui.select.placeholder","Choose"),prefix:Ct,renderControl:Ut,showAllSelectedWhenOpen:Gt=!0,tabSelectsValue:Wt=!0,value:ot,virtualized:Tt=!1,noMultiValueWrap:Pn,width:ft,isValidNewOption:Mt,formatOptionLabel:_t,hideSelectedOptions:nn,...dn}){const en=(0,i.$j)(),Xt=(0,T.J)(en),En=(0,t.useRef)(null),[Vn,Wn]=(0,t.useState)(!1),na=(0,S.z)(en,ft),[Bt,ln]=(0,t.useState)(!!ve);(0,t.useEffect)(()=>{if(je&&Ne&&En.current&&En.current.controlRef&&Fe==="auto"){const In=window.innerHeight-En.current.controlRef.getBoundingClientRect().bottom;Wn(In<Ye)}},[Ye,Fe,je,Ne]);const mn=(0,t.useCallback)((In,kn)=>{if(De&&In==null)return Ce([],kn);Ce(In,kn)},[De,Ce]);let Dn=r.Ay;const hn={};let Fn={},wn;if(De&&je)wn=ot;else if(De&&ot&&Array.isArray(ot)&&!je)wn=ot.map(In=>{const kn=x(In.value??In,ut);return!G||kn?kn:typeof In=="string"?(0,l.z)(In):In});else if(je){const In=ue||ot;wn=In?[In]:[]}else wn=p(ot,ut);const Hn={"aria-label":q,"data-testid":le,autoFocus:me,backspaceRemovesValue:k,blurInputOnSelect:ee,captureMenuScroll:Ze||et,closeMenuOnSelect:ne,defaultValue:ue,disabled:be,filterOption:Bt?ge:null,getOptionLabel:ye,getOptionValue:Be,hideSelectedOptions:nn,inputValue:ve,invalid:Me,isClearable:ke,id:Se,isDisabled:be,isLoading:We,isMulti:De,inputId:pe,isOptionDisabled:Le,isSearchable:He,maxMenuHeight:Ye,minMenuHeight:$e,maxVisibleValues:xe,menuIsOpen:Ne,menuPlacement:Fe==="auto"&&Vn?"top":Fe,menuPosition:Ee,menuShouldBlockScroll:!0,menuPortalTarget:se&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:fe,onChange:mn,onInputChange:(In,kn)=>{const Vt=ze?.(In,kn)??In,zt=!!Vt;return zt!==Bt&&ln(zt),Vt},onKeyDown:Xe,onMenuClose:Re,onMenuOpen:nt,onMenuScrollToBottom:Ze,onMenuScrollToTop:et,onFocus:lt,formatOptionLabel:_t,openMenuOnFocus:rt,options:Tt?A(ut):ut,placeholder:Et,prefix:Ct,renderControl:Ut,showAllSelectedWhenOpen:Gt,tabSelectsValue:Wt,value:De?wn:wn?.[0],noMultiValueWrap:Pn};G&&(Dn=m.A,hn.allowCreateWhileLoading=H,hn.formatCreateLabel=re??U,hn.onCreateOption=Oe,hn.createOptionPosition=oe,hn.isValidNewOption=Mt),je&&(Dn=G?o.A:s.A,Fn={loadOptions:je,cacheOptions:X,defaultOptions:ie});const An=Tt?P.zd:P.eB;return t.createElement(t.Fragment,null,t.createElement(Dn,{ref:En,components:{MenuList:An,Group:C.n,ValueContainer:O,IndicatorsContainer:F,IndicatorSeparator:K,Control:R,Option:P.o5,ClearIndicator(In){const{clearValue:kn}=In;return t.createElement(c.I,{name:"times",role:"button","aria-label":"select-clear-value",className:Xt.singleValueRemove,onMouseDown:Vt=>{Vt.preventDefault(),Vt.stopPropagation(),kn()}})},LoadingIndicator(){return t.createElement(u.y,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:Xt.loadingMessage},at)},NoOptionsMessage(){return t.createElement("div",{className:Xt.loadingMessage,"aria-label":"No options provided"},ae)},DropdownIndicator:f,SingleValue(In){return t.createElement(D.K,{...In,isDisabled:be})},SelectContainer:b.K,MultiValueContainer:g.O,MultiValueRemove:be?()=>null:g.p,...te},styles:na,className:j,...Hn,...hn,...Fn,...dn}))}function U(G){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,G),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function F(G){const{showAllSelectedWhenOpen:H,maxVisibleValues:q,menuIsOpen:le}=G.selectProps,me=G.getValue();if(q!==void 0&&Array.isArray(G.children)){const k=me.length;if(k>q&&!(H&&le)){const ee=[...G.children];return ee.splice(-1,0,t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",k-q,")")),t.createElement(h,{...G},ee)}}return t.createElement(h,{...G})}function K(){return t.createElement(t.Fragment,null)}function w(G){return t.createElement(B,{...G})}function L(G){return t.createElement(B,{...G,isMulti:!0})}function V(G){return t.createElement(B,{...G})}function N(G){return t.createElement(B,{virtualized:!0,...G})}function z(G){return t.createElement(B,{virtualized:!0,...G})}function J(G){return t.createElement(B,{...G,isMulti:!0})}},4603:(Y,I,e)=>{"use strict";e.d(I,{K:()=>i});var t=e(32196),n=e(96540),r=e(71332),s=e(40845),o=e(16797),m=e(87266),l=e(10354);const i=u=>{const{isDisabled:f,isFocused:d,children:E,selectProps:{invalid:h=!1}}=u,y=(0,s.of)(c,d,f,h);return n.createElement(r.c.SelectContainer,{...u,className:(0,t.cx)(y.wrapper,u.className)},E)},c=(u,f,d,E)=>{const h=(0,l.n)({theme:u,invalid:E});return{wrapper:(0,t.cx)(h.wrapper,(0,m.Xb)(u,E),f&&(0,t.css)((0,o.getFocusStyles)(u)),d&&h.inputDisabled,(0,t.css)({position:"relative",boxSizing:"border-box",flexDirection:"row",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",minHeight:"32px",height:"auto",maxWidth:"100%",padding:0,cursor:d?"not-allowed":"pointer"}))}}},12681:(Y,I,e)=>{"use strict";e.d(I,{eB:()=>f,o5:()=>v,zd:()=>a});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(97222),m=e(8887),l=e(40845),i=e(40276),c=e(14578),u=e(88824);const f=({children:g,maxHeight:b,innerRef:P,innerProps:C})=>{const D=(0,l.$j)(),T=(0,u.J)(D);return s.createElement("div",{...C,className:T.menu,style:{maxHeight:b},"aria-label":"Select options menu"},s.createElement(i.E,{scrollRefCallback:P,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},g))};f.displayName="SelectMenu";const d=37,E=8,h=8,y=36,a=({children:g,maxHeight:b,options:P,getValue:C})=>{const D=(0,l.$j)(),T=(0,u.J)(D),[M]=C(),S=(M?P.findIndex(B=>B.value===M.value):0)*d;if(!Array.isArray(g))return null;const x=((0,n.max)(P.map(B=>B.label?.length))??0)*E+h*2+y,A=Math.min(P.length*d,b),R=Math.max(0,S-A/2);return s.createElement(o.Y1,{className:T.menu,height:A,width:x,"aria-label":"Select options menu",itemCount:g.length,itemSize:d,initialScrollOffset:R},({index:B,style:U})=>s.createElement("div",{style:{...U,overflow:"hidden"}},g[B]))};a.displayName="VirtualizedSelectMenu";const v=({children:g,data:b,innerProps:P,innerRef:C,isFocused:D,isSelected:T,renderOptionLabel:M})=>{const O=(0,l.$j)(),S=(0,u.J)(O),p=b.icon?(0,m.Uo)(b.icon):void 0,{onMouseMove:x,onMouseOver:A,...R}=P;return s.createElement("div",{ref:C,className:(0,t.cx)(S.option,D&&S.optionFocused,T&&S.optionSelected,b.isDisabled&&S.optionDisabled),...R,"aria-label":"Select option",title:b.title},p&&s.createElement(c.I,{name:p,className:S.optionIcon}),b.imgUrl&&s.createElement("img",{className:S.optionImage,src:b.imgUrl,alt:b.label||String(b.value)}),s.createElement("div",{className:S.optionBody},s.createElement("span",null,M?M(b):g),b.description&&s.createElement("div",{className:S.optionDescription},b.description),b.component&&s.createElement(b.component,null)))};v.displayName="SelectMenuOptions"},80970:(Y,I,e)=>{"use strict";e.d(I,{n:()=>i});var t=e(32196),n=e(96540),r=e(3911),s=e(40845),o=e(14578);const m=(0,r.N)(c=>({header:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${c.colors.background.secondary}`,"&:hover":{color:c.colors.text.maxContrast}}),label:(0,t.css)({flexGrow:1}),icon:(0,t.css)({paddingRight:"2px"})}));class l extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(u=>({expanded:!u.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:u}=this.props.selectProps.value;u&&this.props.options.some(f=>f.value===u)&&this.setState({expanded:!0})}}componentDidUpdate(u){u.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:u,label:f,theme:d}=this.props,{expanded:E}=this.state,h=m(d);return n.createElement("div",null,n.createElement("div",{className:h.header,onClick:this.onToggleChildren,role:"presentation"},n.createElement("span",{className:h.label},f),n.createElement(o.I,{className:h.icon,name:E?"angle-up":"angle-down"})),E&&u)}}const i=(0,s.cV)(l)},62235:(Y,I,e)=>{"use strict";e.d(I,{K:()=>d});var t=e(32196),n=e(96540),r=e(71332),s=e(8887),o=e(40845);function m(h,y={}){const{duration:a=250,delay:v=250}=y,[g,b]=(0,n.useState)(h),P=(0,n.useRef)();return(0,n.useEffect)(()=>{let C;if(h)C=setTimeout(()=>{P.current=new Date,b(h)},v);else{const D=P.current?Date.now()-P.current.valueOf():0,T=()=>{P.current=void 0,b(h)};D>=a?T():C=setTimeout(T,a-D)}return()=>{C&&(clearTimeout(C),C=void 0)}},[h,a,v]),g}var l=e(14578),i=e(62930),c=e(31511),u=e(72960);const f=h=>({singleValue:(0,t.css)({label:"singleValue",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%",gridArea:"1 / 1 / 2 / 3"}),spinnerWrapper:(0,t.css)({width:"16px",height:"16px",display:"inline-block",marginRight:"10px",position:"relative",verticalAlign:"middle",overflow:"hidden"}),spinnerIcon:(0,t.css)({width:"100%",height:"100%",position:"absolute"}),optionIcon:(0,t.css)({marginRight:h.spacing(1),color:h.colors.text.secondary}),disabled:(0,t.css)({color:h.colors.text.disabled}),isOpen:(0,t.css)({color:h.colors.text.disabled})}),d=h=>{const{children:y,data:a,isDisabled:v}=h,g=(0,o.of)(f),b=m(a.loading||!1,{delay:250,duration:750}),P=a.icon?(0,s.Uo)(a.icon):void 0;return n.createElement(r.c.SingleValue,{...h,className:(0,t.cx)(g.singleValue,v&&g.disabled,h.selectProps.menuIsOpen&&g.isOpen)},a.imgUrl?n.createElement(E,{loading:b,imgUrl:a.imgUrl,styles:g,alt:String(a.label??a.value)}):n.createElement(n.Fragment,null,n.createElement(u.n,{horizontal:!0,size:16,visible:b,duration:150},n.createElement("div",{className:g.spinnerWrapper},n.createElement(i.y,{className:g.spinnerIcon,inline:!0}))),P&&n.createElement(l.I,{name:P,role:"img",className:g.optionIcon})),!a.hideText&&y)},E=h=>n.createElement("div",{className:h.styles.spinnerWrapper},n.createElement(c.A,{duration:150,visible:h.loading},n.createElement(i.y,{className:h.styles.spinnerIcon,inline:!0})),n.createElement(c.A,{duration:150,visible:!h.loading},n.createElement("img",{className:h.styles.spinnerIcon,src:h.imgUrl,alt:h.alt})))},88824:(Y,I,e)=>{"use strict";e.d(I,{J:()=>r});var t=e(32196),n=e(3911);const r=(0,n.N)(s=>({menu:(0,t.css)({label:"grafana-select-menu",background:s.components.dropdown.background,boxShadow:s.shadows.z3,position:"relative",minWidth:"100%",zIndex:1}),option:(0,t.css)({label:"grafana-select-option",padding:"8px",display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent","&:hover":{background:s.colors.action.hover,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${s.colors.primary.border}`}}}),optionIcon:(0,t.css)({marginRight:s.spacing(1)}),optionImage:(0,t.css)({label:"grafana-select-option-image",width:"16px",marginRight:"10px"}),optionDescription:(0,t.css)({label:"grafana-select-option-description",fontWeight:"normal",fontSize:s.typography.size.sm,color:s.colors.text.secondary,whiteSpace:"normal",lineHeight:s.typography.body.lineHeight}),optionBody:(0,t.css)({label:"grafana-select-option-body",display:"flex",fontWeight:s.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),optionFocused:(0,t.css)({label:"grafana-select-option-focused",background:s.colors.action.focus,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${s.colors.primary.border}`}}),optionSelected:(0,t.css)({background:s.colors.action.selected}),optionDisabled:(0,t.css)({label:"grafana-select-option-disabled",backgroundColor:s.colors.action.disabledBackground,color:s.colors.action.disabledText,cursor:"not-allowed"}),singleValue:(0,t.css)({label:"grafana-select-single-value",color:s.components.input.text,gridArea:"1 / 1 / 2 / 3",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%"}),valueContainer:(0,t.css)({label:"grafana-select-value-container",alignItems:"center",display:"grid",position:"relative",boxSizing:"border-box",flex:"1 1 0%",outline:"none",overflow:"hidden"}),valueContainerMulti:(0,t.css)({label:"grafana-select-value-container-multi",flexWrap:"wrap",display:"flex"}),valueContainerMultiNoWrap:(0,t.css)({display:"grid",gridAutoFlow:"column"}),loadingMessage:(0,t.css)({label:"grafana-select-loading-message",padding:s.spacing(1),textAlign:"center",width:"100%"}),multiValueContainer:(0,t.css)({label:"grafana-select-multi-value-container",display:"flex",alignItems:"center",lineHeight:1,background:s.colors.background.secondary,borderRadius:s.shape.radius.default,margin:s.spacing(.25,1,.25,0),padding:s.spacing(.25,0,.25,1),color:s.colors.text.primary,fontSize:s.typography.size.sm,overflow:"hidden",whiteSpace:"nowrap","&:hover":{background:s.colors.emphasize(s.colors.background.secondary)}}),multiValueRemove:(0,t.css)({label:"grafana-select-multi-value-remove",margin:s.spacing(0,.5),cursor:"pointer",svg:{marginBottom:0}}),singleValueRemove:(0,t.css)({cursor:"pointer","&:hover":{color:s.colors.text.primary}})}))},23731:(Y,I,e)=>{"use strict";e.d(I,{A:()=>n,z:()=>r});var t=e(96540);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(o){return{...o,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:o})=>({maxHeight:o}),multiValue:()=>({}),multiValueLabel:()=>({overflow:"hidden",textOverflow:"ellipsis"}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:o=>({...o,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function r(s,o){return(0,t.useMemo)(()=>({...n(s),menuPortal:m=>({...m,zIndex:s.zIndex.portal}),menu:({top:m,bottom:l,position:i})=>({top:m,bottom:l,position:i,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:o?s.spacing(o):"100%",display:o==="auto"?"inline-flex":"flex"}),option:(m,l)=>({...m,opacity:l.isDisabled?.5:1})}),[s,o])}},62883:()=>{"use strict"},67570:(Y,I,e)=>{"use strict";e.d(I,{u:()=>E});var t=e(2543),n=e.n(t),r=e(96540),s=e(13752),o=e(62467),m=e(11150),l=e(96083),i=e(63720),c=e(59099),u=e(54479),f=e(11134);function d(h){return{label:h,value:stringToMs(h)}}class E extends r.PureComponent{constructor(y){super(y),this.propsSubject=new s.B,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,i.n)(y=>f.cC.isLive(y.interval)?(0,o.of)({}):y.loading?m.t:(0,l.Y)((0,u.dc)(y.interval))),(0,c.M)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(y){f.cC.isLive(y.interval)&&f.cC.isLive(this.props.interval)||(0,t.isEqual)(y,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},63250:(Y,I,e)=>{"use strict";e.d(I,{I1:()=>v,_$:()=>E,gl:()=>f});var t=e(2543),n=e.n(t),r=e(75059),s=e(47070),o=e(50082),m=e(62398),l=e(24293),i=e(90708),c=e(47737);const u=["reduceOptions","orientation"];function f(g,b,P){let C=g.options;if(g.fieldConfig=g.fieldConfig||{defaults:{},overrides:[]},b==="singlestat"&&P.angular)return d(g,P);for(const D of u)P.hasOwnProperty(D)&&(C[D]=(0,t.cloneDeep)(P[D]));return C}function d(g,b){const P=b.angular,C=r.AS.getIfExists(P.valueName),D={reduceOptions:{calcs:[C?C.id:r.gy.mean]},orientation:s.wV.Horizontal},T={};if(P.format&&(T.unit=P.format),P.tableColumn&&(D.reduceOptions.fields=`/^${P.tableColumn}$/`),P.nullPointMode&&(T.nullValueMode=P.nullPointMode),P.nullText&&(T.noValue=P.nullText),(P.decimals||P.decimals===0)&&(T.decimals=P.decimals),P.thresholds&&P.colors){const O=P.thresholds.split(",").map(p=>Number(p.trim())),S=[];for(const p of P.colors){const x=S.length-1;x>=0?S.push({value:O[x],color:p}):S.push({value:-1/0,color:p})}T.thresholds={mode:o.O.Absolute,steps:S}}const M=(0,m.bh)(P,T.thresholds);return M&&M.length&&(T.mappings=M),P.gauge&&P.gauge.show&&(T.min=P.gauge.minValue,T.max=P.gauge.maxValue),g.fieldConfig.defaults=T,D}function E(g){if(!g.options)return{};const b=parseFloat(g.pluginVersion||"6.1");let P=g.options;b<6.2&&(P=y(P)),b<6.3&&(P=h(P));const{fieldOptions:C}=P;if(b<6.6&&C){if(C&&C.override){const{override:M,...O}=P.fieldOptions;P={...P,fieldOptions:{...O,overrides:[]}}}let D=C?.defaults?.thresholds;D?delete C.defaults.thresholds:(D=C?.thresholds,delete C.thresholds),D&&(C.defaults.thresholds={mode:o.O.Absolute,steps:D});const{defaults:T}=C;T.color&&typeof T.color=="string"&&(T.color={mode:l.Y.Fixed,fixedColor:T.color}),(0,i.BF)(T)}if(b<7&&(g.fieldConfig=g.fieldConfig||{defaults:{},overrides:[]},g.fieldConfig={defaults:C&&C.defaults?{...g.fieldConfig.defaults,...C.defaults}:g.fieldConfig.defaults,overrides:C&&C.overrides?[...g.fieldConfig.overrides,...C.overrides]:g.fieldConfig.overrides},C&&(P.reduceOptions={values:C.values,limit:C.limit,calcs:C.calcs}),delete P.fieldOptions),b<7.1){const D=g.fieldConfig.defaults.title;D!=null&&(g.fieldConfig.defaults.displayName=D,delete g.fieldConfig.defaults.title)}if(b<8){const D=g.fieldConfig?.defaults;let T=D?.unit;T==="percent"?((0,t.isNumber)(D.min)||(D.min=0),(0,t.isNumber)(D.max)||(D.max=100)):T==="percentunit"&&((0,t.isNumber)(D.min)||(D.min=0),(0,t.isNumber)(D.max)||(D.max=1))}return P}function h(g){const{fieldOptions:b}=g;if(!b)return g;const{mappings:P,...C}=g.fieldOptions;let D;return g.thresholds&&(D={mode:o.O.Absolute,steps:a(g.thresholds)}),{...g,fieldOptions:{...C,defaults:{...b.defaults,mappings:P,thresholds:D}}}}function y(g){const{valueOptions:b}=g;if(!b)return g;const P={},C={};if(P.mappings=g.valueMappings,P.thresholds=g.thresholds,P.defaults=C,C.unit=b.unit,C.decimals=b.decimals,b.stat){const T=r.AS.get(b.stat);T&&(P.calcs=[T.id])}C.min=g.minValue,C.max=g.maxValue;const D={...g,fieldOptions:P};return(0,t.omit)(D,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function a(g){if(!g||!g.length)return;const b=g.map(P=>({value:P.value===null?-1/0:P.value,color:P.color}));return(0,c.RU)(b),b[0].value=-1/0,b}function v(g){return(0,m.bh)(g)}},37713:(Y,I,e)=>{"use strict";e.d(I,{I1:()=>t.I1,_$:()=>t._$,gl:()=>t.gl});var t=e(63250)},47097:(Y,I,e)=>{"use strict";e.d(I,{F:()=>f});var t=e(32196),n=e(94659),r=e(61485),s=e(96540),o=e(40845),m=e(5994);const l=d=>{const{value:E,children:h,visible:y,placement:a,tipFormatter:v,...g}=d,b=(0,s.useRef)(null),P=(0,s.useRef)(null),C=(0,o.of)(i);function D(){P.current!==null&&cancelAnimationFrame(P.current)}function T(){P.current=requestAnimationFrame(()=>{b.current?.forceAlign()})}return(0,s.useEffect)(()=>(y?T():D(),D),[E,y]),s.createElement(m.A,{overlayClassName:C.tooltip,placement:a,overlay:v??E,overlayInnerStyle:{minHeight:"auto"},ref:b,visible:y,...g},h)},i=d=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:d.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:d.zIndex.tooltip})}),c=l;var u=e(24849);const f=({min:d,max:E,onChange:h,onAfterChange:y,orientation:a="horizontal",reverse:v,step:g,formatTooltipResult:b,value:P,tooltipAlwaysVisible:C=!0})=>{const D=(0,s.useCallback)(p=>{h?.(typeof p=="number"?[p,p]:p)},[h]),T=(0,s.useCallback)(p=>{y?.(typeof p=="number"?[p,p]:p)},[y]),M=a==="horizontal",O=(0,o.of)(u.$,M),S=(p,x)=>s.createElement(c,{value:x.value,visible:C||x.dragging,tipFormatter:b?()=>b(x.value):void 0,placement:M?"top":"right"},p);return s.createElement("div",{className:(0,t.cx)(O.container,O.slider)},s.createElement(n.Global,{styles:O.tooltip}),s.createElement(r.A,{min:d,max:E,step:g,defaultValue:P,range:!0,onChange:D,onChangeComplete:T,vertical:!M,reverse:v,handleRender:S}))};f.displayName="RangeSlider"},77014:(Y,I,e)=>{"use strict";e.d(I,{A:()=>i});var t=e(32196),n=e(94659),r=e(61485),s=e(96540),o=e(40845),m=e(10354),l=e(24849);const i=({min:c,max:u,onChange:f,onAfterChange:d,orientation:E="horizontal",reverse:h,step:y,value:a,ariaLabelForHandle:v,marks:g,included:b})=>{const P=E==="horizontal",C=(0,o.of)(l.$,P,!!g),D=r.A,[T,M]=(0,s.useState)(a??c),O=(0,s.useCallback)(B=>{const U=typeof B=="number"?B:B[0];M(U),f?.(U)},[M,f]),S=(0,s.useCallback)(B=>{let U=+B.target.value;Number.isNaN(U)&&(U=0),M(U),f&&f(U),d&&d(U)},[f,d]),p=(0,s.useCallback)(B=>{const U=+B.target.value;U>u?M(u):U<c&&M(c)},[u,c]),x=(0,s.useCallback)(B=>{const U=typeof B=="number"?B:B[0];d?.(U)},[d]),A=P?[]:[C.sliderInputVertical],R=P?[]:[C.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(C.container,C.slider)},s.createElement(n.Global,{styles:C.tooltip}),s.createElement("div",{className:(0,t.cx)(C.sliderInput,...A)},s.createElement(D,{min:c,max:u,step:y,defaultValue:a,value:T,onChange:O,onChangeComplete:x,vertical:!P,reverse:h,ariaLabelForHandle:v,marks:g,included:b}),s.createElement(m.p,{type:"text",className:(0,t.cx)(C.sliderInputField,...R),value:T,onChange:S,onBlur:p,min:c,max:u})))};i.displayName="Slider"},24849:(Y,I,e)=>{"use strict";e.d(I,{$:()=>r});var t=e(32196),n=e(94659);const r=(s,o,m=!1)=>{const{spacing:l}=s,i=s.colors.border.strong,c=s.colors.primary.main,u=s.colors.primary.main,d=`box-shadow: 0px 0px 0px 6px ${s.colors.primary.transparent}`;return{container:(0,t.css)({width:"100%",margin:o?"inherit":l(1,3,1,1),paddingBottom:o&&m?s.spacing(1):"inherit",height:o?"auto":"100%"}),slider:(0,t.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${s.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${s.colors.text.disabled};
        font-size: ${s.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${s.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${u};
        box-shadow: ${s.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${d};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${s.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${s.colors.text.primary};
        border-color: ${s.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${c};
      }
      .rc-slider-rail {
        background-color: ${i};
        cursor: pointer;
      }
    `,tooltip:(0,n.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${s.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${s.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,t.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,t.css)({marginLeft:s.spacing(3),width:"60px",input:{textAlign:"center"}}),sliderInputFieldVertical:(0,t.css)({margin:`0 0 ${s.spacing(3)} 0`,order:1})}}},5926:(Y,I,e)=>{"use strict";e.d(I,{O:()=>a});var t=e(2543),n=e(96540),r=e(39624),s=e(21423),o=e(11261),m=e(8066),l=e(52622),i=e(81297),c=e(51336),u=e(16895),f=e(73060),d=e(14236),E=e(46294);function h(v,g){const b=v.y.values.length,P={...v.y.config,...g},C=v.x??{name:"",values:[...Array(b).keys()],type:o.PU.number,config:{}};let D={refId:"sparkline",fields:[C,{...v.y,config:P}],length:b};return(0,f.g2)(C.values)||(D=(0,d.ES)(D,0)),(0,E.M)({frame:D,refFieldPseudoMin:v.timeRange?.from.valueOf(),refFieldPseudoMax:v.timeRange?.to.valueOf()})}const y={drawStyle:l.GR.Line,showPoints:l.yL.Auto,axisPlacement:l.vM.Hidden,pointSize:2};class a extends n.PureComponent{constructor(g){super(g);const b=h(g.sparkline,g.config);this.state={data:(0,u.bq)(b,(0,u.ro)(b)),alignedDataFrame:b,configBuilder:this.prepareConfig(b)}}static getDerivedStateFromProps(g,b){const P=h(g.sparkline,g.config),C=(0,r.C)(P);return C?{...b,data:(0,u.bq)(C,(0,u.ro)(C)),alignedDataFrame:C}:{...b}}componentDidUpdate(g,b){const{alignedDataFrame:P}=this.state;if(!P)return;let C=!1;g.sparkline!==this.props.sparkline?C=!(0,s.bW)(this.state.alignedDataFrame,b.alignedDataFrame):C=!(0,t.isEqual)(g.config,this.props.config),C&&this.setState({configBuilder:this.prepareConfig(P)})}getYRange(g){let{min:b,max:P}=this.state.alignedDataFrame.fields[1].state?.range;const C=+this.state.alignedDataFrame.fields[1].config?.noValue;return Number.isNaN(C)||(b=Math.min(b,+C),P=Math.max(P,+C)),b===P?(b===0?P=100:(b=0,P*=2),[b,P]):[Math.max(b,g.config.min??-1/0),Math.min(P,g.config.max??1/0)]}prepareConfig(g){const{theme:b}=this.props,P=new c.e;P.setCursor({show:!1,x:!1,y:!1});const C=g.fields[0];P.addScale({scaleKey:"x",orientation:l.Lt.Horizontal,direction:l.ON.Right,isTime:!1,range:()=>{const{sparkline:D}=this.props;if(D.x){if(D.timeRange&&D.x.type===o.PU.time)return[D.timeRange.from.valueOf(),D.timeRange.to.valueOf()];const T=D.x.values;return[T[0],T[T.length-1]]}return[0,D.y.values.length-1]}}),P.addAxis({scaleKey:"x",theme:b,placement:l.vM.Hidden});for(let D=0;D<g.fields.length;D++){const T=g.fields[D],M=T.config,O={...y,...M.custom};if(T===C||T.type!==o.PU.number)continue;const S=M.unit||"__fixed";P.addScale({scaleKey:S,orientation:l.Lt.Vertical,direction:l.ON.Up,range:()=>this.getYRange(T)}),P.addAxis({scaleKey:S,theme:b,placement:l.vM.Hidden});const p=(0,m.Qi)(T),x=p.getCalculator(T,b)(0,0),A=O.drawStyle===l.GR.Points?l.yL.Always:O.showPoints;P.addSeries({pxAlign:!1,scaleKey:S,theme:b,colorMode:p,thresholds:M.thresholds,drawStyle:O.drawStyle,lineColor:O.lineColor??x,lineWidth:O.lineWidth,lineInterpolation:O.lineInterpolation,showPoints:A,pointSize:O.pointSize,fillOpacity:O.fillOpacity,fillColor:O.fillColor,lineStyle:O.lineStyle,gradientMode:O.gradientMode})}return P}render(){const{data:g,configBuilder:b}=this.state,{width:P,height:C}=this.props;return n.createElement(i.Z,{data:g,config:b,width:P,height:C})}}},62930:(Y,I,e)=>{"use strict";e.d(I,{y:()=>i});var t=e(32196),n=e(96540),r=e(8867),s=e(40845),o=e(4025),m=e(14578),l=e(78318);const i=({className:f,inline:d=!1,iconClassName:E,style:h,size:y="md"})=>{const a=(0,s.of)(c),v=(0,s.of)(u,y);if(typeof y!="string"||!(0,o.rJ)(y)){const g=(0,l.Wj)(),b="spinner",P=(0,l.Xi)(b,"default"),C=`${g}${P}/${b}.svg`;return n.createElement("div",{"data-testid":"Spinner",style:h,className:(0,t.cx)({[a.inline]:d},v.wrapper,f)},n.createElement(r.default,{src:C,width:y,height:y,className:(0,t.cx)("fa-spin",v.icon,f),style:h}))}return n.createElement("div",{"data-testid":"Spinner",style:h,className:(0,t.cx)({[a.inline]:d},f)},n.createElement(m.I,{className:(0,t.cx)("fa-spin",E),name:"spinner",size:y,"aria-label":"loading spinner"}))},c=f=>({inline:(0,t.css)({display:"inline-block"})}),u=(f,d)=>({wrapper:(0,t.css)({fontSize:typeof d=="string"?d:`${d}px`}),icon:(0,t.css)({display:"inline-block",fill:"currentColor",flexShrink:0,label:"Icon",lineHeight:0,verticalAlign:"middle"})})},21633:(Y,I,e)=>{"use strict";e.d(I,{h:()=>f});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(69144);const l=.3,i=new Set(["ArrowUp","ArrowDown"]),c=new Set(["ArrowLeft","ArrowRight"]),u={row:{dim:"width",axis:"clientX",min:"minWidth",max:"maxWidth"},column:{dim:"height",axis:"clientY",min:"minHeight",max:"maxHeight"}};function f(a){const{direction:v,initialSize:g=.5,dragPosition:b="middle",onResizing:P,onSizeChanged:C}=a,D=16,T=(0,s.useRef)(null),M=(0,s.useRef)(null),O=(0,s.useRef)(null),S=(0,s.useRef)(null),p=(0,s.useRef)(null),x=(0,s.useRef)("1fr"),A=(0,s.useRef)(void 0),R=(0,s.useRef)(void 0),B=u[v].dim,U=u[v].axis,F=u[v].min,K=u[v].max;h(S.current,ne=>{for(const te of ne){if(!te.target.isSameNode(S.current)||!M.current)return;const oe=M.current.getBoundingClientRect()[B],ie=E(M.current);T.current.ariaValueNow=d(oe,ie[F],ie[K])}},500,[K,F,v,B]);const w=(0,s.useRef)(null),L=(0,s.useCallback)(ne=>{M.current&&(x.current=M.current.getBoundingClientRect()[B],p.current=S.current.getBoundingClientRect()[B],w.current=ne[U],T.current.setPointerCapture(ne.pointerId),A.current=E(M.current),R.current=void 0)},[B,U]),V=(0,s.useCallback)(ne=>{if(w.current!==null&&x.current!=="1fr"){const te=ne[U]-w.current,oe=A.current,ie=(0,n.clamp)(x.current+te,oe[F],oe[K]),ue=ie/(p.current-D);M.current.style.flexGrow=`${ue}`,O.current.style.flexGrow=`${1-ue}`,T.current.ariaValueNow=d(ie,oe[F],oe[K]),P?.(ue,ie)}},[D,U,F,K,P]),N=(0,s.useCallback)(ne=>{ne.preventDefault(),ne.stopPropagation(),T.current.releasePointerCapture(ne.pointerId),w.current=null,typeof x.current=="number"&&C?.(parseFloat(M.current.style.flexGrow),x.current)},[C]),z=(0,s.useRef)(new Set),J=(0,s.useRef)(null),G=(0,s.useCallback)(ne=>{if(z.current.size===0){J.current=null;return}else if(x.current==="1fr")return;const ie=(ne-(J.current??ne))*l;let ue=0;v==="row"?(z.current.has("ArrowLeft")&&(ue-=ie),z.current.has("ArrowRight")&&(ue+=ie)):(z.current.has("ArrowUp")&&(ue-=ie),z.current.has("ArrowDown")&&(ue+=ie));const be=A.current,ge=M.current.getBoundingClientRect()[B],re=(0,n.clamp)(ge+ue,be[F],be[K]),ye=re/(p.current-D);M.current.style.flexGrow=`${ye}`,O.current.style.flexGrow=`${1-ye}`,T.current.ariaValueNow=d(re,be[F],be[K]),P?.(ye,re),J.current=ne,window.requestAnimationFrame(G)},[v,D,F,K,B,P]),H=(0,s.useCallback)(ne=>{if(!M.current||!O.current||!T.current||!S.current)return;if(ne.key==="Enter"){R.current===void 0?(R.current=M.current.style.flexGrow,M.current.style.flexGrow="0",O.current.style.flexGrow="1"):(M.current.style.flexGrow=R.current,O.current.style.flexGrow=`${1-parseFloat(R.current)}`,R.current=void 0);return}else if(ne.key==="Home"){A.current=E(M.current),p.current=S.current.getBoundingClientRect()[B];const oe=A.current[F]/(p.current-D);M.current.style.flexGrow=`${oe}`,O.current.style.flexGrow=`${1-oe}`,T.current.ariaValueNow="0";return}else if(ne.key==="End"){A.current=E(M.current),p.current=S.current.getBoundingClientRect()[B];const oe=A.current[K]/(p.current-D);M.current.style.flexGrow=`${oe}`,O.current.style.flexGrow=`${1-oe}`,T.current.ariaValueNow="100";return}if(!(v==="column"&&i.has(ne.key)||v==="row"&&c.has(ne.key))||z.current.has(ne.key))return;if(R.current=void 0,ne.preventDefault(),ne.stopPropagation(),x.current=M.current.getBoundingClientRect()[B],p.current=S.current.getBoundingClientRect()[B],A.current=E(M.current),!z.current.has(ne.key)){const oe=z.current.size===0;z.current.add(ne.key),oe&&window.requestAnimationFrame(G)}},[v,G,D,K,B,F]),q=(0,s.useCallback)(ne=>{v==="row"&&!c.has(ne.key)||v==="column"&&!i.has(ne.key)||(z.current.delete(ne.key),typeof x.current=="number"&&C?.(parseFloat(M.current.style.flexGrow),x.current))},[v,C]),le=(0,s.useCallback)(()=>{if(!M.current||!O.current)return;M.current.style.flexGrow="0.5",O.current.style.flexGrow="0.5";const ne=E(M.current);A.current=ne,x.current=M.current.getBoundingClientRect()[B],T.current.ariaValueNow=`${d(x.current,ne[F],ne[K])}`},[K,B,F]),me=(0,s.useCallback)(()=>{z.current.size>0&&(z.current.clear(),w.current=null,typeof x.current=="number"&&C?.(parseFloat(M.current.style.flexGrow),x.current))},[C]),k=(0,o.of)(y,v),ee=(0,o.of)(m.l,b),X=v==="column"?ee.dragHandleHorizontal:ee.dragHandleVertical,j=(0,s.useId)();return{containerProps:{ref:S,className:k.container},primaryProps:{ref:M,className:k.panel,style:{[F]:"min-content",flexGrow:(0,n.clamp)(g??.5,0,1)}},secondaryProps:{ref:O,className:k.panel,style:{flexGrow:(0,n.clamp)(1-g,0,1),[F]:"min-content"}},splitterProps:{onPointerUp:N,onPointerDown:L,onPointerMove:V,onKeyDown:H,onKeyUp:q,onDoubleClick:le,onBlur:me,ref:T,style:{[B]:`${D}px`},role:"separator","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":g*100,"aria-controls":`start-panel-${j}`,"aria-label":"Pane resize widget",tabIndex:0,className:X}}}function d(a,v,g){return`${(0,n.clamp)((a-v)/(g-v)*100,0,100)}`}function E(a){const v=document.body.style.overflow,g=a.style.width,b=a.style.height,P=a.style.flexGrow;document.body.style.overflow="hidden",a.style.flexGrow="0";const{width:C,height:D}=a.getBoundingClientRect();a.style.flexGrow="100";const{width:T,height:M}=a.getBoundingClientRect();return document.body.style.overflow=v,a.style.width=g,a.style.height=b,a.style.flexGrow=P,{minWidth:C,maxWidth:T,minHeight:D,maxHeight:M}}function h(a,v,g=0,b){const P=(0,n.throttle)(v,g);(0,s.useLayoutEffect)(()=>{if(!a)return;const C=new ResizeObserver(P);return C.observe(a,{box:"device-pixel-content-box"}),()=>C.disconnect()},b)}function y(a,v){return{container:(0,t.css)({display:"flex",flexDirection:v==="row"?"row":"column",width:"100%",flexGrow:1,overflow:"hidden"}),panel:(0,t.css)({display:"flex",position:"relative",flexBasis:0})}}},42734:(Y,I,e)=>{"use strict";e.d(I,{S:()=>m});var t=e(2543),n=e.n(t),r=e(96540),s=e(75059),o=e(88323);class m extends r.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:i,allowMultiple:c,defaultStat:u,onChange:f}=this.props,d=s.AS.list(i);if(d.length!==i.length){const E=d.map(y=>y.id),h=(0,t.difference)(i,E);console.warn("Unknown stats",h,i),f(d.map(y=>y.id))}!c&&i.length>1&&(console.warn("Removing extra stat",i),f([i[0]])),u&&i.length<1&&f([u])},this.onSelectionChange=i=>{const{onChange:c}=this.props;Array.isArray(i)?c(i.map(u=>u.value)):c(i&&i.value?[i.value]:[])}}static{this.defaultProps={allowMultiple:!1}}componentDidMount(){this.checkInput()}componentDidUpdate(i){this.checkInput()}render(){const{stats:i,allowMultiple:c,defaultStat:u,placeholder:f,className:d,menuPlacement:E,width:h,inputId:y,filterOptions:a}=this.props,v=s.AS.selectOptions(i,a);return r.createElement(o.l6,{value:v.current,className:d,isClearable:!u,isMulti:c,width:h,isSearchable:!0,options:v.options,placeholder:f,onChange:this.onSelectionChange,menuPlacement:E,inputId:y})}}},15292:(Y,I,e)=>{"use strict";e.d(I,{K:()=>c,d:()=>i});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(95344),m=e(40845),l=e(16797);const i=s.forwardRef(({value:f,checked:d,onChange:E,id:h,label:y,disabled:a,invalid:v=!1,...g},b)=>{d&&(0,o.l)("Switch","checked prop","value");const P=(0,m.of)(u),C=(0,s.useRef)(h||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(P.switch,v&&P.invalid)},s.createElement("input",{type:"checkbox",disabled:a,checked:f,onChange:D=>{!a&&E?.(D)},id:C.current,...g,ref:b}),s.createElement("label",{htmlFor:C.current,"aria-label":y??"Toggle switch"}))});i.displayName="Switch";const c=s.forwardRef(({transparent:f,className:d,showLabel:E,label:h,value:y,id:a,invalid:v,...g},b)=>{const P=(0,m.of)(u,f);return s.createElement("div",{className:(0,t.cx)(P.inlineContainer,d,g.disabled&&P.disabled,v&&P.invalid)},E&&s.createElement("label",{htmlFor:a,className:(0,t.cx)(P.inlineLabel,y&&P.inlineLabelEnabled,"inline-switch-label")},h),s.createElement(i,{...g,id:a,label:h,ref:b,value:y}))});c.displayName="Switch";const u=(f,d)=>({switch:(0,t.css)({width:"32px",height:"16px",position:"relative",lineHeight:1,input:{opacity:0,left:"-100vw",zIndex:-1e3,position:"absolute","&:checked + label":{background:f.colors.primary.main,borderColor:f.colors.primary.main,"&:hover":{background:f.colors.primary.shade},"&::after":{transform:"translate3d(18px, -50%, 0)",background:f.colors.primary.contrastText}},"&:disabled + label":{background:f.colors.action.disabledBackground,borderColor:f.colors.border.weak,cursor:"not-allowed","&:hover":{background:f.colors.action.disabledBackground}},"&:disabled:checked + label":{"&::after":{background:f.colors.text.disabled}},"&:focus + label, &:focus-visible + label":(0,l.getFocusStyles)(f),"&:focus:not(:focus-visible) + label":(0,l.getMouseFocusStyles)(f)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:f.shape.radius.pill,background:f.components.input.background,border:`1px solid ${f.components.input.borderColor}`,transition:"all 0.3s ease","&:hover":{borderColor:f.components.input.borderHover},"&::after":{position:"absolute",display:"block",content:'""',width:"12px",height:"12px",borderRadius:f.shape.radius.circle,background:f.colors.text.secondary,boxShadow:f.shadows.z1,top:"50%",transform:"translate3d(2px, -50%, 0)",transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)","@media (forced-colors: active)":{border:"1px solid transparent"}}}}),inlineContainer:(0,t.css)({padding:f.spacing(0,1),height:f.spacing(f.components.height.md),display:"inline-flex",alignItems:"center",background:d?"transparent":f.components.input.background,border:`1px solid ${d?"transparent":f.components.input.borderColor}`,borderRadius:f.shape.radius.default,"&:hover":{border:`1px solid ${d?"transparent":f.components.input.borderHover}`,".inline-switch-label":{color:f.colors.text.primary}}}),disabled:(0,t.css)({backgroundColor:"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:"1px solid rgba(204, 204, 220, 0.04)"}),inlineLabel:(0,t.css)({cursor:"pointer",paddingRight:f.spacing(1),color:f.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,t.css)({color:f.colors.text.primary}),invalid:(0,t.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${f.colors.error.border}`}})})},60734:(Y,I,e)=>{"use strict";e.d(I,{q:()=>c});var t=e(32196),n=e(96540),r=e(29158),s=e(63021),o=e(40675),m=e(40980),l=e(40845),i=e(40276);function c({tabs:f,defaultTab:d,closeIconTooltip:E,onClose:h}){const[y,a]=(0,n.useState)(f.some(C=>C.value===d)?d:f[0].value),v=(0,l.of)(u),g=(0,l.$j)(),b=C=>{a(C.value)},P=`calc(100% - (${g.components.menuTabs.height}px + ${g.spacing(1)}))`;return n.createElement("div",{className:v.container},n.createElement(s.U,{className:v.tabs},f.map(C=>n.createElement(o.o,{key:C.value,label:C.label,active:C.value===y,onChangeTab:()=>b(C),icon:C.icon})),n.createElement(r.K,{className:v.close,onClick:h,name:"times",tooltip:E??"Close"})),n.createElement(i.E,{autoHeightMin:P,autoHeightMax:P},n.createElement(m.J,{className:v.tabContent},f.find(C=>C.value===y)?.content)))}const u=f=>({container:(0,t.css)({height:"100%"}),tabContent:(0,t.css)({padding:f.spacing(2),backgroundColor:f.colors.background.primary,height:"100%"}),close:(0,t.css)({position:"absolute",right:"16px",top:"5px",cursor:"pointer",fontSize:f.typography.size.lg}),tabs:(0,t.css)({paddingTop:f.spacing(1),borderColor:f.colors.border.weak,ul:{marginLeft:f.spacing(2)}})})},92015:(Y,I,e)=>{"use strict";e.d(I,{u:()=>l,d:()=>c});var t=e(96540),n=e(75059),r=e(13544),s=e(32196);const o=u=>{const f=(0,s.css)({width:"100%",listStyle:"none"}),d=(0,s.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return u.value&&!Array.isArray(u.value)?t.createElement("span",null,u.value):u.value&&Array.isArray(u.value)&&u.value.length>0?t.createElement("ul",{className:f},u.value.map((E,h)=>{const y=Object.keys(E)[0];return t.createElement("li",{className:d,key:h},t.createElement("span",null,y),t.createElement("span",null,E[y]))})):m},m=()=>t.createElement("span",null,"\xA0");function l(u){const{totalColumnsWidth:f,footerGroups:d,isPaginationVisible:E,tableStyles:h}=u,y=r.Tp.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:E?"relative":"absolute",width:f?`${f}px`:"100%",bottom:"0px"}},d.map(a=>{const{key:v,...g}=a.getFooterGroupProps();return t.createElement("div",{className:h.tfoot,...g,key:v,"data-testid":y.footer},a.headers.map(b=>i(b,h)))}))}function i(u,f){const d=u.getHeaderProps();return d?(d.style=d.style??{},d.style.position="absolute",d.style.justifyContent=u.justifyContent,t.createElement("div",{className:f.headerCell,...d},u.render("Footer"))):null}function c(u,f,d){if(f===void 0)return m;if(d){if(f[u]===void 0)return m;const E=n.AS.get(n.gy.count).name;return o({value:[{[E]:String(f[u])}]})}return o({value:f[u]})}},30355:(Y,I,e)=>{"use strict";e.d(I,{a:()=>d,t:()=>f});var t=e(96540),n=e(58563),r=e(14236),s=e(11261),o=e(52622),m=e(40845),l=e(29413),i=e(9286),c=e(5926),u=e(77659);const f={type:o.ob.Sparkline,drawStyle:o.GR.Line,lineInterpolation:o.dx.Smooth,lineWidth:1,fillOpacity:17,gradientMode:o.on.Hue,pointSize:2,barAlignment:o.Nj.Center,showPoints:o.yL.Never,hideValue:!1},d=y=>{const{field:a,innerWidth:v,tableStyles:g,cell:b,cellProps:P,timeRange:C}=y,D=E(b.value),T=(0,m.$j)();if(!D)return t.createElement("div",{...P,className:g.cellContainer},a.config.noValue||"no data");D.x&&!D.x.config.interval&&D.x.values.length>1&&(D.x.config.interval=D.x.values[1]-D.x.values[0]),D.y.values=D.y.values.map(R=>Number.isFinite(R)?R:null);const M=(0,n.AP)(D.y);D.y.config.min=M.min,D.y.config.max=M.max,D.y.state={range:M},D.timeRange=C;const O=h(a),S={color:a.config.color,custom:{...f,...O}},p=a.config.custom?.cellOptions?.hideValue;let x=0,A=null;if(!p){const R=(0,r.LI)(b.value)?b.value.value:null,B=a.display(R),U=(0,u.zi)(a,B,b.row.index);x=(0,l.kD)(`${U.prefix??""}${U.text}${U.suffix??""}`,16).width+T.spacing.gridSize,A=t.createElement(i.i,{style:{width:`${x-T.spacing.gridSize}px`,textAlign:"right",marginRight:T.spacing(1)},value:B})}return t.createElement("div",{...P,className:g.cellContainer},A,t.createElement("div",null,t.createElement(c.O,{width:v-x,height:g.cellHeightInner,sparkline:D,config:S,theme:g.theme})))};function E(y){if(Array.isArray(y))return{y:{name:"test",type:s.PU.number,values:y,config:{}}};if((0,r.ci)(y)){const a=y.fields.find(g=>g.type===s.PU.time),v=y.fields.find(g=>g.type===s.PU.number);if(a&&v)return{x:a,y:v}}}function h(y){let a=(0,u.bk)(y);if(a.type===o.ob.Auto&&(a={...a,type:o.ob.Sparkline}),a.type===o.ob.Sparkline)return a;throw new Error(`Expected options type ${o.ob.Sparkline} but got ${a.type}`)}},77093:(Y,I,e)=>{"use strict";e.d(I,{X:()=>ke});var t=e(96540),n=e(32885),r=e(75059),s=e(11261),o=e(19845),m=e(13544),l=e(52622),i=e(40845),c=e(40276),u=e(19384),f=e(92015),d=e(4025),E=e(14578),h=e(32196),y=e(13840),a=e(97222),v=e(83195),g=e(67061),b=e(67647),P=e(9261),C=e(60029),D=e(10880);const T=28,M=T*5,O={Contains:{label:"Contains",value:"Contains",description:"Contains"},"=":{label:"=",value:"=",description:"Equals"},"!=":{label:"!=",value:"!=",description:"Not equals"},">":{label:">",value:">",description:"Greater"},">=":{label:">=",value:">=",description:"Greater or Equal"},"<":{label:"<",value:"<",description:"Less"},"<=":{label:"<=",value:"<=",description:"Less or Equal"},Expression:{label:"Expression",value:"Expression",description:'Bool Expression (Char $ represents the column value in the expression, e.g. "$ >= 10 && $ <= 12")'}},S=Object.values(O),p=O.Contains,x=O.Expression,A=Se=>{if(Se=Se.trim().replace(/\\/g,""),/^(\d{4}-\d{2}-\d{2}|\d{4}\/\d{2}\/\d{2})/.test(Se)){const pe=new Date(Se);if(!isNaN(pe.getTime())){const Ne=(0,v.j_)("dateTimeAsIso");return(0,v.cN)(Ne(pe.getTime()))}}const We=parseFloat(Se);if(!isNaN(We))return We;const De=Se.toLowerCase();return De==="true"||De==="false"?De==="true":Se},R=({options:Se,values:We,caseSensitive:De,showOperators:pe,onChange:Ne,searchFilter:Le,setSearchFilter:He,operator:je,setOperator:at})=>{const Ye=(0,t.useMemo)(()=>new RegExp(Le,De?void 0:"i"),[Le,De]),$e=(0,t.useMemo)(()=>Se.filter(Ze=>{if(!pe||!Le||je.value===p.value)return Ze.label===void 0?!1:Ye.test(Ze.label);if(je.value===x.value){if(Ze.value===void 0)return!1;try{const et=Le.replace(/\\/g,""),nt=new Function("$",`'use strict'; return ${et};`),lt=A(Ze.value);return nt(lt)}catch{}return!1}else{if(Ze.value===void 0)return!1;const et=A(Ze.value),nt=A(Le);switch(je.value){case"=":return et===nt;case"!=":return et!==nt;case">":return et>nt;case">=":return et>=nt;case"<":return et<nt;case"<=":return et<=nt}return!1}}),[Se,Ye,pe,je,Le]),xe=(0,t.useMemo)(()=>$e.filter(Ze=>We.includes(Ze)),[$e,We]),Fe=(0,t.useMemo)(()=>$e.length===xe.length,[$e,xe]),Ee=(0,t.useMemo)(()=>xe.length>0&&$e.length>xe.length,[$e,xe]),se=(0,t.useMemo)(()=>xe.length?`${xe.length} selected`:"Select all",[xe]),ae=(0,t.useMemo)(()=>$e.length!==xe.length?"Add all displayed values to the filter":"Remove all displayed values from the filter",[$e,xe]),fe=(0,i.of)(B),Re=(0,i.$j)().spacing.gridSize,Oe=(0,t.useMemo)(()=>Math.min($e.length*T,M)+Re,[Re,$e.length]),ze=(0,t.useCallback)(Ze=>et=>{const nt=et.currentTarget.checked?We.concat(Ze):We.filter(lt=>lt.value!==Ze.value);Ne(nt)},[Ne,We]),Xe=(0,t.useCallback)(()=>{if($e.length===xe.length){const Ze=We.filter(et=>!$e.includes(et));Ne(Ze)}else{const Ze=[...new Set([...We,...$e])];Ne(Ze)}},[Ne,We,$e,xe]);return t.createElement(g.B,{direction:"column",gap:.25},!pe&&t.createElement(b.Z,{placeholder:"Filter values",onChange:He,value:Le}),pe&&t.createElement(g.B,{direction:"row",gap:0},t.createElement(P.f,{variant:"canvas",options:S,onChange:at,value:je,tooltip:je.description}),t.createElement(b.Z,{placeholder:"Filter values",onChange:He,value:Le})),!$e.length&&t.createElement(C.J,null,"No values"),$e.length&&t.createElement(a.Y1,{height:Oe,itemCount:$e.length,itemSize:T,width:"100%",className:fe.filterList},({index:Ze,style:et})=>{const nt=$e[Ze],{value:lt,label:rt}=nt,ut=We.find(Et=>Et.value===lt)!==void 0;return t.createElement("div",{className:fe.filterListRow,style:et,title:rt},t.createElement(D.S,{value:ut,label:rt,onChange:ze(nt)}))}),$e.length&&t.createElement(g.B,{direction:"column",gap:.25},t.createElement("div",{className:(0,h.cx)(fe.selectDivider)}),t.createElement("div",{className:(0,h.cx)(fe.filterListRow)},t.createElement(D.S,{value:Fe,indeterminate:Ee,label:se,description:ae,onChange:Xe}))))},B=Se=>({filterList:(0,h.css)({label:"filterList"}),filterListRow:(0,h.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:Se.spacing(.5),":hover":{backgroundColor:Se.colors.action.hover}}),selectDivider:(0,h.css)({label:"selectDivider",width:"100%",borderTop:`1px solid ${Se.colors.border.medium}`,padding:Se.spacing(.5,2)})});var U=e(8866),F=e(66864),K=e(29158),w=e(55852),L=e(77659);const V=({column:{preFilteredRows:Se,filterValue:We,setFilter:De},onClose:pe,field:Ne,searchFilter:Le,setSearchFilter:He,operator:je,setOperator:at})=>{const Ye=(0,i.$j)(),$e=(0,t.useMemo)(()=>(0,L.MY)(Se,Ne),[Se,Ne]),xe=(0,t.useMemo)(()=>(0,L.Yz)($e),[$e]),Fe=(0,t.useMemo)(()=>(0,L.Sj)(xe,We),[xe,We]),[Ee,se]=(0,t.useState)(Fe),[ae,fe]=(0,t.useState)(!1),Ce=(0,t.useCallback)(Ze=>pe(),[pe]),Re=(0,t.useCallback)(Ze=>{const et=Ee.length?Ee:void 0;De(et),pe()},[De,Ee,pe]),Oe=(0,t.useCallback)(Ze=>{De(void 0),pe()},[De,pe]),ze=(0,t.useMemo)(()=>We!==void 0,[We]),Xe=(0,i.of)(N);return t.createElement(U.N,{onClick:Ce,useCapture:!0},t.createElement("div",{className:(0,h.cx)(Xe.filterContainer),onClick:z},t.createElement(F.gW,{spacing:"lg"},t.createElement(F.gW,{spacing:"xs"},t.createElement(F.Gy,{justify:"space-between",align:"center"},t.createElement(C.J,{className:Xe.label},"Filter by values:"),t.createElement(K.K,{name:"text-fields",tooltip:"Match case",style:{color:ae?Ye.colors.text.link:Ye.colors.text.disabled},onClick:()=>{fe(Ze=>!Ze)}})),t.createElement("div",{className:(0,h.cx)(Xe.listDivider)}),t.createElement(R,{onChange:se,values:Ee,options:xe,caseSensitive:ae,showOperators:!0,searchFilter:Le,setSearchFilter:He,operator:je,setOperator:at})),t.createElement(F.Gy,{spacing:"lg"},t.createElement(F.Gy,null,t.createElement(w.$n,{size:"sm",onClick:Re},"Ok"),t.createElement(w.$n,{size:"sm",variant:"secondary",onClick:Ce},"Cancel")),ze&&t.createElement(F.Gy,null,t.createElement(w.$n,{fill:"text",size:"sm",onClick:Oe},"Clear filter"))))))},N=Se=>({filterContainer:(0,h.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:Se.colors.background.primary,border:`1px solid ${Se.colors.border.weak}`,padding:Se.spacing(2),boxShadow:Se.shadows.z3,borderRadius:Se.shape.radius.default}),listDivider:(0,h.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${Se.colors.border.medium}`,padding:Se.spacing(.5,2)}),label:(0,h.css)({marginBottom:0})}),z=Se=>{Se.stopPropagation()},J=({column:Se,field:We,tableStyles:De})=>{const pe=(0,t.useRef)(null),[Ne,Le]=(0,t.useState)(!1),He=(0,i.of)(G),je=(0,t.useMemo)(()=>!!Se.filterValue,[Se.filterValue]),at=(0,t.useCallback)(()=>Le(!0),[Le]),Ye=(0,t.useCallback)(()=>Le(!1),[Le]),[$e,xe]=(0,t.useState)(""),[Fe,Ee]=(0,t.useState)(p);return!We||!We.config.custom?.filterable?null:t.createElement("button",{className:(0,h.cx)(De.headerFilter,je?He.filterIconEnabled:He.filterIconDisabled),ref:pe,type:"button",onClick:at},t.createElement(E.I,{name:"filter"}),Ne&&pe.current&&t.createElement(y.A,{content:t.createElement(V,{column:Se,tableStyles:De,field:We,onClose:Ye,searchFilter:$e,setSearchFilter:xe,operator:Fe,setOperator:Ee}),placement:"bottom-start",referenceElement:pe.current,show:!0}))},G=Se=>({filterIconEnabled:(0,h.css)({label:"filterIconEnabled",color:Se.colors.primary.text}),filterIconDisabled:(0,h.css)({label:"filterIconDisabled",color:Se.colors.text.disabled})}),H=Se=>{const{headerGroups:We,showTypeIcons:De,tableStyles:pe}=Se,Ne=m.Tp.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:pe.headerRow},We.map(Le=>{const{key:He,...je}=Le.getHeaderGroupProps();return t.createElement("div",{className:pe.thead,...je,key:He,"aria-label":Ne.header,role:"row"},Le.headers.map((at,Ye)=>q(at,pe,De)))}))};function q(Se,We,De){const pe=Se.getHeaderProps(),Ne=Se.field??null,Le=Ne?.config.custom;Se.canResize&&(pe.style.userSelect=Se.isResizing?"none":"auto"),pe.style.position="absolute",pe.style.justifyContent=Se.justifyContent,pe.style.left=Se.totalLeft;let He=Se.render("Header"),je=Se.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...Se.getSortByToggleProps(),className:We.headerCellLabel},De&&t.createElement(E.I,{name:(0,d.SS)(Ne),title:Ne?.type,size:"sm",className:We.typeIcon}),t.createElement("div",null,He),Se.isSorted&&(Se.isSortedDesc?t.createElement(E.I,{size:"lg",name:"arrow-down",className:We.sortIcon}):t.createElement(E.I,{name:"arrow-up",size:"lg",className:We.sortIcon}))),Se.canFilter&&t.createElement(J,{column:Se,tableStyles:We,field:Ne}));return je&&Le?.headerComponent?je=t.createElement(Le.headerComponent,{field:Ne,defaultContent:je}):Le?.headerComponent&&(He=t.createElement(Le.headerComponent,{field:Ne,defaultContent:He})),t.createElement("div",{className:We.headerCell,...pe,role:"columnheader"},Se.canSort&&je,!Se.canSort&&He,!Se.canSort&&Se.canFilter&&t.createElement(J,{column:Se,tableStyles:We,field:Ne}),Se.canResize&&t.createElement("div",{...Se.getResizerProps(),className:We.resizeHandle}))}var le=e(64423),me=e(56978),k=e(69129),ee=e(79041);function X({tableStyles:Se,nestedData:We,rowIndex:De,width:pe,cellHeight:Ne}){const Le=We.values,He=[],je=(0,i.$j)(),at=(0,i.of)(j);let Ye=Se.rowHeight+je.spacing.gridSize;return Le[De].forEach(($e,xe)=>{const Fe=!!$e.meta?.custom?.noHeader,Ee=Se.rowHeight*($e.length+(Fe?0:1)),se={height:Ee,paddingLeft:L.jV,position:"absolute",top:Ye};Ye+=Ee+je.spacing.gridSize,He.push(t.createElement("div",{style:se,key:`subTable_${De}_${xe}`},t.createElement(ke,{data:$e,width:pe-L.jV,height:Se.rowHeight*($e.length+1),noHeader:Fe,cellHeight:Ne})))}),t.createElement("div",{className:at.subTables},He)}const j=Se=>({subTables:(0,h.css)({"&:before":{content:'""',position:"absolute",width:"1px",top:Se.spacing(5),left:Se.spacing(1),bottom:Se.spacing(2),background:Se.colors.border.medium}})});function ne(Se,We,De){return Se.values[We].reduce((Le,He)=>{if(He.length){const je=!!He.meta?.custom?.noHeader;return Le+De.rowHeight*(He.length+(je?0:1))+8}return Le},De.rowHeight)??De.rowHeight}var te=e(49618);const oe=Se=>{const{data:We,rows:De,headerHeight:pe,footerPaginationEnabled:Ne,rowHeight:Le,itemCount:He,pageIndex:je,tableState:at,prepareRow:Ye,onCellFilterAdded:$e,width:xe,cellHeight:Fe=l.qM.Sm,timeRange:Ee,tableStyles:se,nestedDataField:ae,listHeight:fe,listRef:Ce,enableSharedCrosshair:Re=!1,initialRowIndex:Oe=void 0}=Se,[ze,Xe]=(0,t.useState)(Oe),Ze=(0,i.$j)(),et=(0,ee.d2)(),nt=(0,t.useMemo)(()=>{const Tt=We.fields.find(Pn=>Pn.type===s.PU.time);return Tt?(0,L.HY)(Tt):0},[We]),lt=(0,t.useCallback)((Tt,Pn)=>{if(!et||!Re||!(0,o.S1)(Pn))return;const ft=Pn.fields.find(Mt=>Mt.type===s.PU.time);et.eventBus.publish(new k.b_({point:{time:ft.values[Tt]}}))},[Re,et]),rt=(0,t.useCallback)(()=>{!et||!Re||et.eventBus.publish(new k.ql)},[Re,et]),ut=(0,t.useCallback)(Tt=>{if(Tt.payload.point?.time&&Tt.payload.rowIndex!==void 0){const Pn=We.fields.find(nn=>nn.type===s.PU.time),ft=Pn.values[Tt.payload.rowIndex],Mt=Tt.payload.point.time;if((0,L.Iy)(Mt,ft,nt)){Xe(Tt.payload.rowIndex);return}const _t=Pn.values.findIndex(nn=>(0,L.Iy)(Mt,nn,nt));if(_t!==-1){Xe(_t);return}Xe(void 0)}},[We.fields,nt]);(0,t.useEffect)(()=>{if(!et||!Re||!(0,o.S1)(We)||Ne)return;const Tt=new le.yU;return Tt.add(et.eventBus.getStream(k.b_).pipe((0,me.B)(250)).subscribe({next:Pn=>{et.eventBus!==Pn.origin&&ut(Pn)}})),Tt.add(et.eventBus.getStream(k.ql).pipe((0,me.B)(250)).subscribe({next:Pn=>{et.eventBus!==Pn.origin&&Xe(void 0)}})),()=>{Tt.unsubscribe()}},[We,Re,Ne,ut,et]);let Et;if(ze!==void 0){const Tt=De.findIndex(Pn=>Pn.index===ze);Tt!==-1&&(Et=pe+(Tt-1)*Le)}const Ct=(0,t.useCallback)(Tt=>at.pageIndex*at.pageSize+Tt,[at.pageIndex,at.pageSize]);let Ut;for(const Tt of We.fields){const Pn=Tt.config.custom;Pn!==void 0&&Pn.cellOptions!==void 0&&Pn.cellOptions.type===l.ob.ColorBackground&&Pn.cellOptions.applyToRow&&(Ut=ft=>{const Mt=Tt.display(Tt.values.get(ft));return(0,L.HW)(se,Pn.cellOptions,Mt)})}const Gt=(0,t.useCallback)(({index:Tt,style:Pn,rowHighlightIndex:ft})=>{const Mt=Ct(Tt),_t=De[Mt];let nn={};Ye(_t);const dn=at.expanded[_t.id]?(0,h.css)({"&:hover":{background:"inherit"}}):{};if(ft!==void 0&&_t.index===ft&&(Pn={...Pn,backgroundColor:Ze.components.table.rowHoverBackground},nn={"aria-selected":"true"}),Ut){const{bgColor:en,textColor:Xt}=Ut(_t.index);Pn.background=en,Pn.color=Xt}return t.createElement("div",{..._t.getRowProps({style:Pn,...nn}),className:(0,h.cx)(se.row,dn),onMouseEnter:()=>lt(Tt,We),onMouseLeave:rt},ae&&at.expanded[_t.id]&&t.createElement(X,{nestedData:ae,tableStyles:se,rowIndex:Tt,width:xe,cellHeight:Fe}),_t.cells.map((en,Xt)=>t.createElement(te.n,{key:Xt,tableStyles:se,cell:en,onCellFilterAdded:$e,columnIndex:Xt,columnCount:_t.cells.length,timeRange:Ee,frame:We,rowStyled:Ut!==void 0})))},[Fe,We,ae,$e,lt,rt,Ye,Ct,De,at.expanded,se,Ze.components.table.rowHoverBackground,Ee,xe,Ut]),Wt=Tt=>{const Pn=Ct(Tt),ft=De[Pn];return at.expanded[ft.id]&&ae?ne(ae,Tt,se):se.rowHeight},ot=Tt=>{const{scrollTop:Pn}=Tt.currentTarget;Ce.current!==null&&Ce.current.scrollTo(Pn)};return t.createElement(t.Fragment,null,t.createElement(c.A,{onScroll:ot,hideHorizontalTrack:!0,scrollTop:Et},t.createElement(a._m,{key:Le+je,height:fe,itemCount:He,itemSize:Wt,width:"100%",ref:Ce,style:{overflow:void 0}},({index:Tt,style:Pn})=>Gt({index:Tt,style:Pn,rowHighlightIndex:ze}))))};function ie(Se,We){(0,t.useEffect)(()=>{if(Se.current&&We.current){const De=Se.current.querySelector(".track-vertical"),pe=We.current.firstChild;pe&&De&&(De.remove(),pe instanceof HTMLElement&&(pe.querySelector(":scope > .track-vertical")?.remove(),pe.append(De)))}})}function ue(Se,We,De,pe){const Ne=JSON.stringify(Object.keys(Se.expanded));(0,t.useEffect)(()=>{let Le=0;pe||(Number.isFinite(Se.lastExpandedOrCollapsedIndex)&&(Le=Se.lastExpandedOrCollapsedIndex),Le=Se.pageIndex===0?Le-1:Le-Se.pageIndex-Se.pageIndex*Se.pageSize),We.current?.resetAfterIndex(Math.max(Le,0))},[Se.lastExpandedOrCollapsedIndex,Se.pageSize,Se.pageIndex,We,De,Ne,pe])}var be=e(28240);function ge({onColumnResize:Se,onSortByChange:We,data:De}){return(0,t.useCallback)((pe,Ne)=>{switch(Ne.type){case"columnDoneResizing":if(Se){const He=pe.columnResizing.headerIdWidths[0][0],je=parseInt(He,10),at=Math.round(pe.columnResizing.columnWidths[He]),Ye=De.fields[je];if(!Ye)return pe;const $e=(0,be.Ct)(Ye,De);Se($e,at)}case"toggleSortBy":if(We){const Le=[];for(const He of pe.sortBy){const je=De.fields[parseInt(He.id,10)];je&&Le.push({displayName:(0,be.Ct)(je,De),desc:He.desc})}We(Le)}case"toggleRowExpanded":if(Ne.id)return{...pe,lastExpandedOrCollapsedIndex:parseInt(Ne.id,10)}}return pe},[De,Se,We])}function re(Se,We){const De={};if(Se){De.sortBy=[];for(const pe of Se)for(const Ne of We)Ne.Header===pe.displayName&&De.sortBy.push({id:Ne.id,desc:pe.desc})}return De}var ye=e(69770);const Be=150,ve=36,Me="No data",ke=(0,t.memo)(Se=>{const{ariaLabel:We,data:De,height:pe,onCellFilterAdded:Ne,width:Le,columnMinWidth:He=Be,noHeader:je,resizable:at=!0,initialSortBy:Ye,footerOptions:$e,showTypeIcons:xe,footerValues:Fe,enablePagination:Ee,cellHeight:se=l.qM.Sm,timeRange:ae,enableSharedCrosshair:fe=!1,initialRowIndex:Ce=void 0,fieldConfig:Re}=Se,Oe=(0,t.useRef)(null),ze=(0,t.useRef)(null),Xe=(0,t.useRef)(null),Ze=(0,i.$j)(),et=(0,ye.k)(Ze,se),nt=je?0:et.rowHeight,[lt,rt]=(0,t.useState)(Fe),ut=Re?.defaults?.noValue??Me,Et=(0,t.useMemo)(()=>{const In=ve;let kn=0;if(!lt)return 0;for(const Vt of lt)Array.isArray(Vt)&&Vt.length>kn&&(kn=Vt.length);return kn>1?In*kn:In},[lt]),Ct=(0,t.useMemo)(()=>De.fields.length?Array(De.length).fill(0):[],[De]),Ut=!!($e?.countRows&&$e.reducer&&$e.reducer.length&&$e.reducer[0]===r.gy.count),Gt=De.fields.find(In=>In.type===s.PU.nestedFrames),Wt=Gt!==void 0,ot=(0,t.useMemo)(()=>(0,L.GH)(De,Le,He,Wt,lt,Ut),[De,Le,He,lt,Wt,Ut]),Tt=(0,t.useRef)(),Pn=ge({...Se,onSortByChange:In=>{Tt.current(!1),Se.onSortByChange&&Se.onSortByChange(In)}}),ft=!!De.meta?.uniqueRowIdFields?.length,Mt=(0,t.useMemo)(()=>{const In={columns:ot,data:Ct,disableResizing:!at,stateReducer:Pn,autoResetPage:!1,initialState:re(Ye,ot),autoResetFilters:!1,sortTypes:{number:L.Ok,"alphanumeric-insensitive":L.IM}};return ft&&(In.getRowId=(kn,Vt)=>(0,o.t9)(De,Vt),In.autoResetExpanded=!1),In},[Ye,ot,Ct,at,Pn,ft,De]),{getTableProps:_t,headerGroups:nn,footerGroups:dn,rows:en,prepareRow:Xt,totalColumnsWidth:En,page:Vn,state:Wn,gotoPage:na,setPageSize:Bt,pageOptions:ln,toggleAllRowsExpanded:mn}=(0,n.useTable)(Mt,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),Dn=Wn;Tt.current=mn,(0,t.useEffect)(()=>{$e||rt(Fe)},[Fe,$e]),(0,t.useEffect)(()=>{if(!$e)return;if(!$e.show){rt(void 0);return}if(Ut){const kn=[];kn[0]=nn[0]?.headers[0]?.filteredRows.length.toString()??De.length.toString(),rt(kn);return}const In=(0,L.Ux)(nn[0].headers,(0,L.XX)(en),$e,Ze);rt(In)},[$e,Ze,Wn.filters,De]);let hn=pe-(nt+Et);Ee&&(hn-=et.cellHeight);const Fn=Math.round(hn/et.rowHeight)-1;(0,t.useEffect)(()=>{Fn<=0||Bt(Fn)},[Fn,Bt]),(0,t.useEffect)(()=>{De.length/Fn<Wn.pageIndex&&na(0)},[De]),ue(Dn,Oe,De,ft),ie(Xe,ze);const wn=(0,t.useCallback)(In=>{na(In-1)},[na]),Hn=Ee?Vn.length:en.length;let An=null;if(Ee){const In=Wn.pageIndex*Wn.pageSize+1;let kn=In+Wn.pageSize-1;const Vt=Le<550;kn>De.length&&(kn=De.length),An=t.createElement("div",{className:et.paginationWrapper},t.createElement(u.d,{currentPage:Wn.pageIndex+1,numberOfPages:ln.length,showSmallVersion:Vt,onNavigate:wn}),Vt?null:t.createElement("div",{className:et.paginationSummary},In," - ",kn," of ",De.length," rows"))}return t.createElement("div",{..._t(),className:et.table,"aria-label":We,role:"table",ref:ze,style:{width:Le,height:pe}},t.createElement(c.E,{hideVerticalTrack:!0},t.createElement("div",{className:et.tableContentWrapper(En)},!je&&t.createElement(H,{headerGroups:nn,showTypeIcons:xe,tableStyles:et}),Hn>0?t.createElement("div",{"data-testid":m.Tp.components.Panels.Visualization.Table.body,ref:Xe},t.createElement(oe,{data:De,rows:en,width:Le,cellHeight:se,headerHeight:nt,rowHeight:et.rowHeight,itemCount:Hn,pageIndex:Wn.pageIndex,listHeight:hn,listRef:Oe,tableState:Wn,prepareRow:Xt,timeRange:ae,onCellFilterAdded:Ne,nestedDataField:Gt,tableStyles:et,footerPaginationEnabled:!!Ee,enableSharedCrosshair:fe,initialRowIndex:Ce})):t.createElement("div",{style:{height:pe-nt,width:Le},className:et.noData},ut),lt&&t.createElement(f.u,{isPaginationVisible:!!Ee,footerValues:lt,footerGroups:dn,totalColumnsWidth:En,tableStyles:et}))),An)});ke.displayName="Table"},49618:(Y,I,e)=>{"use strict";e.d(I,{n:()=>n});var t=e(96540);const n=({cell:r,tableStyles:s,onCellFilterAdded:o,timeRange:m,userProps:l,frame:i,rowStyled:c})=>{const u=r.getCellProps(),f=r.column.field;if(!f?.display)return null;u.style&&(u.style.minWidth=u.style.width,u.style.justifyContent=r.column.justifyContent);let d=(typeof r.column.width=="number"?r.column.width:24)-s.cellPadding*2;return t.createElement(t.Fragment,null,r.render("Cell",{field:f,tableStyles:s,onCellFilterAdded:o,cellProps:u,innerWidth:d,timeRange:m,userProps:l,frame:i,rowStyled:c}))}},69770:(Y,I,e)=>{"use strict";e.d(I,{k:()=>n});var t=e(32196);function n(s,o){const m=s.colors.border.weak,l=s.colors.primary.border,i=6,c=r(s,o,i),u=c+2,f=28,d=(E,h,y,a,v,g)=>(0,t.css)({label:y?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${i}px`,width:"100%",height:`${u-1}px`,display:"flex",...a?{overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}:{},alignItems:"center",borderRight:`1px solid ${m}`,color:g?"inherit":E??void 0,background:g?void 0:h??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:y?"visible":void 0,width:v||!y?"auto":"auto !important",height:v||y?"auto !important":`${u-1}px`,minHeight:`${u-1}px`,wordBreak:v?"break-word":void 0,whiteSpace:v&&y?"normal":"nowrap",boxShadow:y?`0 0 2px ${s.colors.primary.main}`:void 0,background:g?"inherit":h??s.colors.background.primary,zIndex:1,".cellActions":{color:"#FFF",visibility:"visible",opacity:1,width:"auto",background:"rgba(0, 0, 0, 0.6)"}},a:{color:"inherit"},".cellActions":{display:"flex",position:y?void 0:"absolute",top:y?void 0:"1px",right:y?void 0:0,margin:y?s.spacing(0,-.5,0,.5):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:s.spacing(1,.5,1,1),background:h?"none":"rgba(0, 0, 0, 0.5)",svg:{color:E}},".cellActionsLeft":{right:"auto !important",left:0},".cellActionsTransparent":{background:"none"}});return{theme:s,cellHeight:c,buildCellContainerStyle:d,cellPadding:i,cellHeightInner:c-i*2,rowHeight:u,table:(0,t.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,t.css)({label:"thead",height:`${f}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,t.css)({label:"tfoot",height:`${f}px`,borderTop:`1px solid ${m}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,t.css)({label:"row",borderBottom:`1px solid ${m}`}),headerCell:(0,t.css)({height:"100%",padding:`0 ${i}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:s.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,t.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:s.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:s.spacing(.5),"&:hover":{textDecoration:"underline",color:s.colors.text.link}}),cellContainerText:d(void 0,void 0,!0,!0),cellContainerTextNoOverflow:d(void 0,void 0,!1,!0),cellContainer:d(void 0,void 0,!0,!1),cellContainerNoOverflow:d(void 0,void 0,!1,!1),cellText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}),sortIcon:(0,t.css)({marginLeft:s.spacing(.5)}),cellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:s.colors.text.link,fontWeight:s.typography.fontWeightMedium,paddingRight:s.spacing(1.5),"&:hover":{textDecoration:"underline",color:s.colors.text.link}}),cellLinkForColoredCell:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:s.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,t.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,t.css)({display:"flex",height:`${c}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,t.css)({color:s.colors.text.secondary,fontSize:s.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:s.spacing(0,1,0,2)}),tableContentWrapper:E=>{const h=E!==void 0?`${E}px`:"100%";return(0,t.css)({label:"tableContentWrapper",width:h,display:"flex",flexDirection:"column"})},row:(0,t.css)({label:"row",borderBottom:`1px solid ${m}`,"&:hover":{backgroundColor:s.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,t.css)({height:"100%"}),resizeHandle:(0,t.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:l,opacity:0,transition:"opacity 0.2s ease-in-out",width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:s.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,t.css)({marginRight:s.spacing(1),color:s.colors.text.secondary}),noData:(0,t.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${u}px`,cursor:"pointer"})}}function r(s,o,m){const l=s.typography.fontSize,i=s.typography.body.lineHeight;switch(o){case"md":return 42;case"lg":return 48;case"sm":default:return m*2+l*i}}},88407:(Y,I,e)=>{"use strict";e.d(I,{Zi:()=>n,mc:()=>t});const t="=",n="!="},77659:(Y,I,e)=>{"use strict";e.d(I,{jV:()=>X,HY:()=>je,MY:()=>ie,XX:()=>Se,zi:()=>Le,HW:()=>at,bk:()=>De,GH:()=>ne,Sj:()=>re,Ux:()=>Me,j1:()=>j,Iy:()=>He,o7:()=>pe,IM:()=>ye,Ok:()=>Be,Yz:()=>be});var t=e(2543),n=e(47078),r=e.n(n),s=e(84140),o=e(11261),m=e(28240),l=e(14236),i=e(19845),c=e(83195),u=e(75059),f=e(57875),d=e(52622),E=e(24284),h=e(96540),y=e(50082),a=e(58563),v=e(47070),g=e(97696),b=e(59796);const P={mode:y.O.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},C=Ye=>{const{field:$e,innerWidth:xe,tableStyles:Fe,cell:Ee,cellProps:se,row:ae}=Ye,fe=$e.display(Ee.value),Ce=De($e);let Re=(0,a.xg)($e,!1);Re.thresholds||(Re={...Re,thresholds:P});let Oe=d.eX.Gradient,ze;Ce.type===d.ob.Gauge&&(Oe=Ce.mode??d.eX.Gradient,ze=Ce.valueDisplayMode!==void 0?Ce.valueDisplayMode:d.$l.Text);const Xe=()=>(0,t.isFunction)($e.getLinks)?$e.getLinks({valueRowIndex:ae.index}):[],Ze=!!Xe().length,et=Le($e,fe,Ee.row.index),nt=lt=>{const{openMenu:rt,targetClassName:ut}=lt;return h.createElement(g.xE,{width:xe,height:Fe.cellHeightInner,field:Re,display:$e.display,text:{valueSize:14},value:fe,orientation:v.wV.Horizontal,theme:Fe.theme,alignmentFactors:et,onClick:rt,className:ut,itemSpacing:1,lcdCellWidth:8,displayMode:Oe,valueDisplayMode:ze})};return h.createElement("div",{...se,className:Fe.cellContainer},Ze&&h.createElement(b.e,{links:Xe,style:{display:"flex",width:"100%"}},lt=>nt(lt)),!Ze&&nt({}))};var D=e(90914);const T=Ye=>{const{field:$e,row:xe,cellProps:Fe,tableStyles:Ee}=Ye,se=(0,D.k)($e,xe);return h.createElement("div",{...Fe,className:Ee.cellContainerText},se&&se.map((ae,fe)=>h.createElement("span",{key:fe,className:Ee.cellLink,onClick:ae.onClick},h.createElement("a",{href:ae.href,target:ae.target},ae.title))))};var M=e(32196),O=e(40845),S=e(55852),p=e(29158),x=e(66864),A=e(10534),R=e(37390),B=e(32372);function U({value:Ye,onDismiss:$e,mode:xe}){let Fe=Ye;if((0,t.isString)(Ye)){const se=Ye.trim();if(se[0]==="{"||se[0]==="["||xe==="code")try{Ye=JSON.parse(Ye),xe="code"}catch{xe="text"}else xe="text"}else Fe=JSON.stringify(Ye,null," ");let Ee=Fe;return xe==="code"&&(Ee=JSON.stringify(Ye,null," ")),h.createElement(R.a,{onDismiss:$e,isOpen:!0,title:"Inspect value"},xe==="code"?h.createElement(B.B,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(Ee&&Ee.length)>100,value:Ee,readOnly:!0}):h.createElement("pre",null,Ee),h.createElement(R.a.ButtonRow,null,h.createElement(A.b,{icon:"copy",getText:()=>Ee},"Copy to Clipboard")))}var F=e(88407);function K({field:Ye,cell:$e,previewMode:xe,showFilters:Fe,onCellFilterAdded:Ee}){const[se,ae]=(0,h.useState)(!1),fe=j(Ye)==="flex-end",Ce=!!Ye.config.custom?.inspect,Re={size:"sm",tooltipPlacement:"top"},Oe=(0,h.useCallback)(Xe=>{Ee&&Ee({key:Ye.name,operator:F.mc,value:$e.value})},[$e,Ye,Ee]),ze=(0,h.useCallback)(Xe=>{Ee&&Ee({key:Ye.name,operator:F.Zi,value:$e.value})},[$e,Ye,Ee]);return h.createElement(h.Fragment,null,h.createElement("div",{className:`cellActions${fe?" cellActionsLeft":""}`},h.createElement(x.Gy,{spacing:"xs"},Ce&&h.createElement(p.K,{name:"eye",tooltip:"Inspect value",onClick:()=>{ae(!0)},...Re}),Fe&&h.createElement(p.K,{name:"search-plus",onClick:Oe,tooltip:"Filter for value",...Re}),Fe&&h.createElement(p.K,{name:"search-minus",onClick:ze,tooltip:"Filter out value",...Re}))),se&&h.createElement(U,{mode:xe,value:$e.value,onDismiss:()=>{ae(!1)}}))}const w=Ye=>{const{field:$e,cell:xe,tableStyles:Fe,row:Ee,cellProps:se,frame:ae,rowStyled:fe}=Ye,Ce=!!$e.config.custom?.inspect,Re=$e.display(xe.value),Oe=Ye.onCellFilterAdded&&$e.config.filterable,ze=Oe&&xe.value!==void 0||Ce,Xe=De($e),Ze=!!(0,D.k)($e,Ee)?.length,et=(0,O.of)(S.Ez),[nt,lt]=(0,h.useState)(!1);let rt;const ut=140,Et=()=>{lt(!1)},Ct=()=>{lt(!0)};if(Xe.type===d.ob.Custom){const ot=Xe.cellComponent;rt=h.createElement(ot,{field:$e,value:xe.value,rowIndex:Ee.index,frame:ae})}else h.isValidElement(xe.value)?rt=xe.value:rt=(0,c.cN)(Re);const Ut=typeof rt=="string",Gt=Re.text.length<=ut&&/\s/.test(Re.text),Wt=L(Fe,Xe,Re,Ce,Ut,Gt,fe);if(Ut){let ot=se.style?.justifyContent;ot==="flex-end"?se.style={...se.style,textAlign:"right"}:ot==="center"&&(se.style={...se.style,textAlign:"center"})}return h.createElement("div",{...se,onMouseEnter:ze?Ct:void 0,onMouseLeave:ze?Et:void 0,className:Wt},!Ze&&(Ut?`${rt}`:h.createElement("div",{className:Fe.cellText},rt)),Ze&&h.createElement(b.e,{links:()=>(0,D.k)($e,Ee)||[]},ot=>ot.openMenu?h.createElement("button",{className:(0,M.cx)(et,V(Fe,Xe,ot.targetClassName)),onClick:ot.openMenu},rt):h.createElement("div",{className:V(Fe,Xe,ot.targetClassName)},rt)),nt&&ze&&h.createElement(K,{...Ye,previewMode:"text",showFilters:Oe}))};function L(Ye,$e,xe,Fe=!1,Ee=!1,se=!1,ae=!1){let fe,Ce;const Re=at(Ye,$e,xe);return fe=Re.textColor,Ce=Re.bgColor,Ye.buildCellContainerStyle(fe,Ce,!Fe,Ee,se,ae)}function V(Ye,$e,xe){return $e.type===d.ob.Auto?(0,M.cx)(Ye.cellLink,xe):(0,M.cx)(Ye.cellLinkForColoredCell,xe)}var N=e(92015),z=e(64136),J=e(27430);function G(Ye){const{cell:$e,tableStyles:xe,cellProps:Fe}=Ye;let Ee="";return $e.value instanceof J.A?Ee=new z.A().writeGeometry($e.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):$e.value!=null&&(Ee=`${$e.value}`),h.createElement("div",{...Fe,className:xe.cellContainer},h.createElement("div",{className:xe.cellText,style:{fontFamily:"monospace"}},Ee))}const H=10,q=Ye=>{const{field:$e,cell:xe,tableStyles:Fe,row:Ee,cellProps:se}=Ye,ae=$e.display(xe.value),fe=!!(0,D.k)($e,Ee)?.length;return h.createElement("div",{...se,className:Fe.cellContainer},!fe&&h.createElement("img",{src:ae.text,className:Fe.imageCell,alt:""}),fe&&h.createElement(b.e,{style:{height:Fe.cellHeight-H,width:"auto"},links:()=>(0,D.k)($e,Ee)||[]},Ce=>{const Re=h.createElement("img",{style:{height:Fe.cellHeight-H,width:"auto"},src:ae.text,className:Fe.imageCell,alt:""});return Ce.openMenu?h.createElement("div",{onClick:Ce.openMenu,role:"button",tabIndex:0,onKeyDown:Oe=>{Oe.key==="Enter"&&Ce.openMenu&&Ce.openMenu(Oe)}},Re):Re}))};function le(Ye){const{cell:$e,tableStyles:xe,cellProps:Fe,field:Ee,row:se}=Ye,ae=!!Ee.config.custom?.inspect,fe=(0,M.css)({cursor:"pointer",fontFamily:"monospace"});let Ce=$e.value,Re=Ce;if((0,t.isString)(Ce))try{Ce=JSON.parse(Ce)}catch{}else Re=JSON.stringify(Ce,null," ");const Oe=!!(0,D.k)(Ee,se)?.length,ze=(0,O.of)(S.Ez);return h.createElement("div",{...Fe,className:ae?xe.cellContainerNoOverflow:xe.cellContainer},h.createElement("div",{className:(0,M.cx)(xe.cellText,fe)},!Oe&&h.createElement("div",{className:xe.cellText},Re),Oe&&h.createElement(b.e,{links:()=>(0,D.k)(Ee,se)||[]},Xe=>Xe.openMenu?h.createElement(S.$n,{className:(0,M.cx)(ze),onClick:Xe.openMenu},Re):h.createElement(h.Fragment,null,Re))),ae&&h.createElement(K,{...Ye,previewMode:"code"}))}var me=e(14578);function k({row:Ye,tableStyles:$e}){return h.createElement("div",{className:$e.expanderCell,...Ye.getToggleRowExpandedProps()},h.createElement(me.I,{"aria-label":Ye.isExpanded?"Collapse row":"Expand row",name:Ye.isExpanded?"angle-down":"angle-right",size:"lg"}))}var ee=e(30355);const X=50;function j(Ye){if(!Ye)return"flex-start";if(Ye.config.custom)switch(Ye.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return Ye.type===o.PU.number?"flex-end":"flex-start"}function ne(Ye,$e,xe,Fe,Ee,se){const ae=[];let fe=0;Fe&&(ae.push({Header:()=>null,id:"expander",Cell:k,width:X,minWidth:X,filter:(Re,Oe,ze)=>[],justifyContent:"left",field:Ye.fields[0],sortType:"basic"}),$e-=X);for(const[Re,Oe]of Ye.fields.entries()){const ze=Oe.config.custom||{};if(ze.hidden||Oe.type===o.PU.nestedFrames)continue;ze.width?$e-=ze.width:fe++;const Xe=et=>{switch(et){case o.PU.number:case o.PU.frame:return"number";case o.PU.time:return"basic";default:return"alphanumeric-insensitive"}},Ze=te(ze.cellOptions?.type,Oe);ae.push({Cell:Ze,id:Re.toString(),field:Oe,Header:ze.hideHeader?"":(0,m.Ct)(Oe,Ye),accessor:(et,nt)=>Oe.values[nt],sortType:Xe(Oe.type),width:ze.width,minWidth:ze.minWidth??xe,filter:r()(oe(Oe)),justifyContent:j(Oe),Footer:(0,N.d)(Re,Ee,se)})}let Ce=$e/fe;for(let Re=fe;Re>0;Re--)for(const Oe of ae)!Oe.width&&Oe.minWidth>Ce&&(Oe.width=Oe.minWidth,$e-=Oe.width,fe-=1,Ce=$e/fe);for(const Re of ae)Re.width||(Re.width=Ce),Re.minWidth=50;return ae}function te(Ye,$e){switch(Ye){case d.ob.Custom:case d.ob.ColorText:case d.ob.ColorBackground:return w;case d.ob.Image:return q;case d.ob.Gauge:return C;case d.ob.Sparkline:return ee.a;case d.ob.JSONView:return le;case d.ob.DataLinks:return T}if($e.type===o.PU.geo)return G;if($e.type===o.PU.frame){const xe=$e.values[0];return(0,l.ci)(xe)&&(0,i.aH)(xe)?ee.a:le}return $e.type===o.PU.other?le:w}function oe(Ye){return function($e,xe,Fe){return $e.length===0||!Fe||!Ye?$e:$e.filter(Ee=>{if(!Ee.values.hasOwnProperty(xe))return!1;const se=ue(Ee,Ye);return Fe.find(ae=>ae.value===se)!==void 0})}}function ie(Ye,$e){if(!$e||Ye.length===0)return{};const xe={};for(let Fe=0;Fe<Ye.length;Fe++){const Ee=ue(Ye[Fe],$e);xe[Ee||"(Blanks)"]=Ee}return xe}function ue(Ye,$e){if(!$e||!Ye)return"";const xe=$e.values[Ye.index],Fe=$e.display?$e.display(xe):xe;return $e.display?(0,c.cN)(Fe):Fe}function be(Ye){return Object.keys(Ye).reduce(($e,xe)=>$e.concat({value:Ye[xe],label:xe}),[]).sort(ge)}function ge(Ye,$e){return Ye.label===void 0&&$e.label===void 0?0:Ye.label===void 0&&$e.label!==void 0?-1:Ye.label!==void 0&&$e.label===void 0?1:Ye.label<$e.label?-1:Ye.label>$e.label?1:0}function re(Ye,$e){return $e?Ye.filter(xe=>$e.some(Fe=>Fe.value===xe.value)):[]}function ye(Ye,$e,xe){return String(Ye.values[xe]).localeCompare(String($e.values[xe]),void 0,{sensitivity:"base"})}function Be(Ye,$e,xe){const Fe=ve(Ye.values[xe]),Ee=ve($e.values[xe]);return Fe===Ee?0:Fe>Ee?1:-1}function ve(Ye){return(0,l.LI)(Ye)?Ye.value??Number.NEGATIVE_INFINITY:Ye==null||Ye===""||isNaN(Ye)?Number.NEGATIVE_INFINITY:typeof Ye=="number"?Ye:Number(Ye)}function Me(Ye,$e,xe,Fe){return Ne(Ye),Ye.map((Ee,se)=>{if(Ee?.field?.type!==o.PU.number)return se===0&&xe.reducer&&xe.reducer.length>0?u.AS.get(xe.reducer[0]).name:void 0;let ae=(0,t.clone)(Ee.field);return ae.values=$e[Ee.id],ae.state=void 0,Ee.field=ae,xe.fields&&xe.fields.length>0?xe.fields.find(Ce=>Ce===Ee?.field?.name)?ke(Ee.field,xe.reducer,Fe):void 0:ke(Ee.field,xe.reducer||[],Fe)})}function ke(Ye,$e,xe){const Fe=$e[0];if(Fe===void 0)return"";const Ee=Ye.display??(0,f.J)({field:Ye,theme:xe}),se=(0,u.Nw)({field:Ye,reducers:$e})[Fe];return u.AS.get(Fe).preservesUnits?(0,c.cN)(Ee(se)):(0,c.cN)({text:se})}function Se(Ye){const $e=[];for(const xe in Ye)for(const[Fe,Ee]of Object.entries(Ye[xe].values))$e[Fe]===void 0&&($e[Fe]=[]),$e[Fe].push(Ee);return $e}const We={type:d.ob.Auto};function De(Ye){return Ye.config.custom?.displayMode?pe(Ye.config.custom?.displayMode):Ye.config.custom?.cellOptions?Ye.config.custom.cellOptions:We}function pe(Ye){switch(Ye){case"basic":case"gradient-gauge":case"lcd-gauge":let $e=d.eX.Basic;return Ye==="gradient-gauge"?$e=d.eX.Gradient:Ye==="lcd-gauge"&&($e=d.eX.Lcd),{type:d.ob.Gauge,mode:$e};case"color-background":case"color-background-solid":let xe=d.Wq.Basic;return Ye==="color-background"&&(xe=d.Wq.Gradient),{type:d.ob.ColorBackground,mode:xe};default:return{type:Ye}}}function Ne(Ye){const $e=Ye.findIndex((xe,Fe)=>xe?.id!==String(Fe));$e===-1||Ye[$e]?.id==="expander"||(Ye.splice($e,0,{id:String($e)}),Ne(Ye))}function Le(Ye,$e,xe){let Fe=Ye.state?.alignmentFactors;if(Fe)return Fe.text.length<$e.text.length&&(Fe.text=$e.text),Fe;{Fe={...$e};const Ee=Math.min(Ye.values.length,xe+1e3);for(let se=xe+1;se<Ee;se++)Ye.display(Ye.values[se]).text.length>Fe.text.length&&(Fe.text=$e.text);return Ye.state?Ye.state.alignmentFactors=Fe:Ye.state={alignmentFactors:Fe},Fe}}function He(Ye,$e,xe){return Math.abs(Math.floor(Ye)-$e)<xe}function je(Ye){let $e=-Number.MAX_VALUE,xe=Number.MAX_VALUE;if(Ye.values.length<2)return 0;for(let Fe=0;Fe<Ye.values.length;Fe++){const Ee=Ye.values[Fe];Ee>$e&&($e=Ee),Ee<xe&&(xe=Ee)}return($e-xe)/Ye.values.length}function at(Ye,$e,xe){const Fe=Ye.theme.isDark?1:-.7;let Ee,se;if($e.type===d.ob.ColorText)Ee=xe.color;else if($e.type===d.ob.ColorBackground){const ae=$e.mode??d.Wq.Gradient;if(ae===d.Wq.Basic)Ee=(0,E.mZ)(xe.color,Ye.theme.isDark),se=(0,s.A)(xe.color).setAlpha(.9).toRgbString();else if(ae===d.Wq.Gradient){const fe=(0,s.A)(xe.color).darken(10*Fe).spin(5);Ee=(0,E.mZ)(xe.color,Ye.theme.isDark),se=`linear-gradient(120deg, ${fe.toRgbString()}, ${xe.color})`}}return{textColor:Ee,bgColor:se}}},14746:(Y,I,e)=>{"use strict";e.d(I,{b:()=>f});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(72436),m=e(40845),l=e(3911),i=e(14578),c=e(21744);class u extends s.PureComponent{constructor(h){super(h),this.readCSV=(0,n.debounce)(()=>{const{config:v}=this.props,{text:g}=this.state;this.setState({data:(0,o.Jh)(g,{config:v})})},150),this.onTextChange=v=>{this.setState({text:v.target.value})};const{text:y,config:a}=h;this.state={text:y,data:(0,o.Jh)(y,{config:a})}}componentDidUpdate(h,y){const{text:a}=this.state;(a!==y.text||this.props.config!==h.config)&&this.readCSV(),this.props.text!==h.text&&this.props.text!==a&&this.setState({text:this.props.text}),this.state.data!==y.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:h,height:y,theme:a}=this.props,{data:v}=this.state,g=d(a);return s.createElement("div",{className:g.tableInputCsv},s.createElement(c.f,{style:{width:h,height:y},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:g.textarea}),v&&s.createElement("footer",{className:g.footer},v.map((b,P)=>s.createElement("span",{key:P},"Rows:",b.length,", Columns:",b.fields.length," \xA0",s.createElement(i.I,{name:"check-circle"})))))}}const f=(0,m.cV)(u);f.displayName="TableInputCSV";const d=(0,l.N)(E=>({tableInputCsv:(0,t.css)({position:"relative"}),textarea:(0,t.css)({height:"100%",width:"100%"}),footer:(0,t.css)({position:"absolute",bottom:"15px",right:"15px",border:"1px solid #222",background:E.colors.success.main,padding:`1px ${E.spacing(.5)}`,fontSize:"80%"})}))},53402:(Y,I,e)=>{"use strict";e.d(I,{p:()=>o});var t=e(32196),n=e(96540),r=e(83195),s=e(40845);const o=({value:l})=>{const i=(0,s.of)(m);return n.createElement("span",{className:i.counter},(0,r.Hg)(l,0).text)},m=l=>({counter:(0,t.css)({label:"counter",marginLeft:l.spacing(1),borderRadius:l.spacing(3),backgroundColor:l.colors.action.hover,padding:l.spacing(.25,1),color:l.colors.text.secondary,fontWeight:l.typography.fontWeightMedium,fontSize:l.typography.size.sm})})},40675:(Y,I,e)=>{"use strict";e.d(I,{o:()=>c});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(16797),m=e(55852),l=e(14578),i=e(53402);const c=n.forwardRef(({label:f,active:d,icon:E,onChangeTab:h,counter:y,suffix:a,className:v,href:g,...b},P)=>{const C=(0,s.of)(u),D=(0,s.of)(m.my),T=()=>n.createElement(n.Fragment,null,E&&n.createElement(l.I,{name:E}),f,typeof y=="number"&&n.createElement(i.p,{value:y}),a&&n.createElement(a,{className:C.suffix})),O={className:(0,t.cx)(D,C.link,d?C.activeStyle:C.notActive),...b,onClick:h,"aria-label":b["aria-label"]||r.Tp.components.Tab.title(f),role:"tab","aria-selected":d};return g?n.createElement("div",{className:C.item},n.createElement("a",{...O,href:g,ref:P},T())):n.createElement("div",{className:C.item},n.createElement("button",{...O,type:"button",ref:P},T()))});c.displayName="Tab";const u=f=>({item:(0,t.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap",padding:f.spacing(.5)}),link:(0,t.css)({color:f.colors.text.secondary,padding:f.spacing(1,1.5,.5),borderRadius:f.shape.radius.default,display:"block",height:"100%",svg:{marginRight:f.spacing(1)},"&:focus-visible":(0,o.getFocusStyles)(f),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"4px",borderRadius:f.shape.radius.default,bottom:0}}),notActive:(0,t.css)({"a:hover, &:hover, &:focus":{color:f.colors.text.primary,"&::before":{backgroundColor:f.colors.action.hover}}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:f.colors.text.primary,overflow:"hidden","&::before":{backgroundImage:f.colors.gradients.brandHorizontal}}),suffix:(0,t.css)({marginLeft:f.spacing(1)})})},40980:(Y,I,e)=>{"use strict";e.d(I,{J:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:l,...i})=>{const c=(0,r.of)(o);return n.createElement("div",{...i,className:(0,t.cx)(c.tabContent,l)},m)},o=m=>({tabContent:(0,t.css)({background:m.colors.background.primary})})},63021:(Y,I,e)=>{"use strict";e.d(I,{U:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=n.forwardRef(({children:m,className:l,hideBorder:i=!1},c)=>{const u=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(u.tabsWrapper,i&&u.noBorder,l),ref:c},n.createElement("div",{className:u.tabs,role:"tablist"},m))}),o=m=>({tabsWrapper:(0,t.css)({borderBottom:`1px solid ${m.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,t.css)({borderBottom:0}),tabs:(0,t.css)({position:"relative",display:"flex",height:`${m.components.menuTabs.height}px`,alignItems:"center"})});s.displayName="TabsBar"},90685:(Y,I,e)=>{"use strict";e.d(I,{s:()=>l});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(14578),m=e(53402);const l=n.forwardRef(({label:c,active:u,icon:f,counter:d,className:E,suffix:h,onChangeTab:y,href:a,...v},g)=>{const b=(0,s.of)(i),P=()=>n.createElement(n.Fragment,null,f&&n.createElement(o.I,{name:f}),c,typeof d=="number"&&n.createElement(m.p,{value:d}),h&&n.createElement(h,{className:b.suffix})),C=(0,t.cx)(b.link,u&&b.activeStyle);return n.createElement("a",{href:a,className:C,...v,onClick:y,"aria-label":v["aria-label"]||r.Tp.components.Tab.title(c),role:"tab","aria-selected":u,ref:g},P())});l.displayName="Tab";const i=c=>({link:(0,t.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:c.colors.text.primary,svg:{marginRight:c.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:c.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:c.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,t.css)({marginLeft:c.spacing(1)})})},78369:(Y,I,e)=>{"use strict";e.d(I,{v:()=>u});var t=e(32196),n=e(96540),r=e(70255),s=e(40845),o=e(69613),m=e(72129),l=e(14578);const i=(0,n.forwardRef)(({name:E,onClick:h,icon:y,className:a,colorIndex:v,...g},b)=>{const P=(0,s.$j)(),C=d(P,E,v),D=M=>{M.preventDefault(),M.stopPropagation(),h?.(E,M)},T=(0,t.cx)(C.wrapper,a,{[C.hover]:h!==void 0});return h?n.createElement("button",{...g,className:T,onClick:D,ref:b},y&&n.createElement(l.I,{name:y}),E):n.createElement("span",{...g,className:T,ref:b},y&&n.createElement(l.I,{name:y}),E)});i.displayName="Tag";const c=({rootProps:E})=>{const h=(0,s.of)(f);return n.createElement(r.A,{width:60,height:22,containerClassName:h.container,...E})},u=(0,m.j)(i,c),f=()=>({container:(0,t.css)({lineHeight:1})}),d=(E,h,y)=>{let a;return y===void 0?a=(0,o.MC)(h):a=(0,o.yC)(y),{wrapper:(0,t.css)({appearance:"none",borderStyle:"none",fontWeight:E.typography.fontWeightMedium,fontSize:E.typography.size.sm,lineHeight:E.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:a.color,color:E.v1.palette.gray98,whiteSpace:"nowrap",textShadow:"none",padding:"3px 6px",borderRadius:E.shape.radius.default}),hover:(0,t.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},64149:(Y,I,e)=>{"use strict";e.d(I,{L:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(72129),o=e(78369);const m=(0,n.memo)((0,n.forwardRef)(({displayMax:f,tags:d,icon:E,onClick:h,className:y,getAriaLabel:a,getColorIndex:v},g)=>{const b=(0,r.$j)(),P=u(b,!!(f&&f>0)),C=d.length,D=f?d.slice(0,f):d;return n.createElement("ul",{className:(0,t.cx)(P.wrapper,y),"aria-label":"Tags",ref:g},D.map((T,M)=>n.createElement("li",{className:P.li,key:T},n.createElement(o.v,{name:T,icon:E,onClick:h,"aria-label":a?.(T,M),"data-tag-id":M,colorIndex:v?.(T,M)}))),f&&f>0&&C-f>0&&n.createElement("span",{className:P.moreTagsLabel},"+ ",C-f))}));m.displayName="TagList";const l=({rootProps:f})=>{const d=(0,r.of)(c);return n.createElement("div",{className:d.container,...f},n.createElement(o.v.Skeleton,null),n.createElement(o.v.Skeleton,null))},i=(0,s.j)(m,l),c=f=>({container:(0,t.css)({display:"flex",gap:f.spacing(1)})}),u=(f,d)=>({wrapper:(0,t.css)({position:"relative",alignItems:d?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:d?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,t.css)({color:f.colors.text.secondary,fontSize:f.typography.size.sm}),li:(0,t.css)({listStyle:"none"})})},79924:(Y,I,e)=>{"use strict";e.d(I,{u:()=>u});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(10354),m=e(69613),l=e(29158);const i=({name:d,disabled:E,onRemove:h})=>{const{color:y,borderColor:a}=(0,n.useMemo)(()=>(0,m.MC)(d),[d]),v=(0,r.of)(c);return n.createElement("li",{className:v.itemStyle,style:{backgroundColor:y,borderColor:a}},n.createElement("span",{className:v.nameStyle},d),n.createElement(l.K,{name:"times",size:"lg",disabled:E,tooltip:`Remove "${d}" tag`,onClick:()=>h(d),className:v.buttonStyles}))},c=d=>{const E=d.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${E}px`,lineHeight:`${E-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:d.shape.radius.default,padding:`0 ${d.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:d.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},u=({placeholder:d="New tag (enter key to add)",tags:E=[],onChange:h,width:y,className:a,disabled:v,addOnBlur:g,invalid:b,id:P})=>{const[C,D]=(0,n.useState)(""),T=(0,r.of)(f),M=(0,r.$j)(),O=(0,n.useCallback)(R=>{D(R.target.value)},[]),S=R=>{h(E.filter(B=>B!==R))},p=R=>{R?.preventDefault(),E.includes(C)||h(E.concat(C)),D("")},x=()=>{g&&C&&p()},A=R=>{R.key==="Enter"&&C!==""&&p(R)};return n.createElement("div",{className:(0,t.cx)(T.wrapper,a,y?(0,t.css)({width:M.spacing(y)}):"")},n.createElement(o.p,{id:P,disabled:v,placeholder:d,onChange:O,value:C,onKeyDown:A,onBlur:x,invalid:b,suffix:n.createElement(s.$n,{fill:"text",className:T.addButtonStyle,onClick:p,size:"md",disabled:C.length<=0},"Add")}),E?.length>0&&n.createElement("ul",{className:T.tags},E.map(R=>n.createElement(i,{key:R,name:R,onRemove:S,disabled:v}))))},f=d=>({wrapper:(0,t.css)({minHeight:d.spacing(4),display:"flex",flexDirection:"column",gap:d.spacing(1),flexWrap:"wrap"}),tags:(0,t.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:d.spacing(.5)}),addButtonStyle:(0,t.css)({margin:`0 -${d.spacing(1)}`})})},94753:(Y,I,e)=>{"use strict";e.d(I,{E:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(65848),o=e(56034);const m=n.forwardRef(({childElement:u,children:f},d)=>{const[E,h]=(0,n.useState)(!1),y=(0,n.useRef)(null);(0,n.useImperativeHandle)(d,()=>y.current);const a=(0,n.useMemo)(()=>new ResizeObserver(g=>{for(const b of g)b.target.clientWidth&&b.target.scrollWidth&&(b.target.scrollWidth>b.target.clientWidth&&h(!0),b.target.scrollWidth<=b.target.clientWidth&&h(!1))}),[]);(0,n.useEffect)(()=>{const{current:g}=y;return g&&a.observe(g),()=>{a.disconnect()}},[h,a]);const v=g=>typeof g=="string"?g:s.renderToStaticMarkup(n.createElement(n.Fragment,null,g)).replace(/(<([^>]+)>)/gi,"");return E?n.createElement(o.m,{ref:y,content:v(f)},u(void 0)):u(y)});m.displayName="TruncatedText";var l=e(71356);const i=n.forwardRef(({element:u="span",variant:f,weight:d,color:E,truncate:h,italic:y,textAlignment:a,children:v,...g},b)=>{const P=(0,r.of)(c,u,f,E,d,h,y,a),C=D=>(0,n.createElement)(u,{...g,style:void 0,className:P,ref:D},v);return!h||u==="span"?C(void 0):n.createElement(m,{childElement:C,children:v,ref:b})});i.displayName="Text";const c=(u,f,d,E,h,y,a,v)=>(0,t.css)([{margin:0,padding:0,...(0,l.d$)(u,f,d)},d&&{...u.typography[d]},E&&{color:(0,l.vT)(E,u)},h&&{fontWeight:(0,l.iV)(h,u)},y&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},a&&{fontStyle:"italic"},v&&{textAlign:v}])},71356:(Y,I,e)=>{"use strict";e.d(I,{d$:()=>r,iV:()=>t,vT:()=>n});const t=(s,o)=>{switch(s){case"bold":return o.typography.fontWeightBold;case"medium":return o.typography.fontWeightMedium;case"light":return o.typography.fontWeightLight;case"regular":case void 0:return o.typography.fontWeightRegular}},n=(s,o)=>{switch(s){case"error":return o.colors.error.text;case"success":return o.colors.success.text;case"info":return o.colors.info.text;case"warning":return o.colors.warning.text;default:return s?o.colors.text[s]:void 0}},r=(s,o,m)=>{if(m)return s.typography[m];switch(o){case"span":return;case"h1":return s.typography.h1;case"h2":return s.typography.h2;case"h3":return s.typography.h3;case"h4":return s.typography.h4;case"h5":return s.typography.h5;case"h6":return s.typography.h6;default:return s.typography.body}}},21744:(Y,I,e)=>{"use strict";e.d(I,{f:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(87266);const o=n.forwardRef(({invalid:l,className:i,...c},u)=>{const f=(0,r.of)(m,l);return n.createElement("textarea",{...c,className:(0,t.cx)(f.textarea,i),ref:u})}),m=(l,i=!1)=>({textarea:(0,t.cx)((0,s.Xb)(l),(0,s.gm)(l),(0,t.css)({display:"block",borderRadius:l.shape.radius.default,padding:`${l.spacing.gridSize/4}px ${l.spacing.gridSize}px`,width:"100%",borderColor:i?l.colors.error.border:l.components.input.borderColor}))});o.displayName="TextArea"},60782:(Y,I,e)=>{"use strict";e.d(I,{G:()=>u});var t=e(32196),n=e(95361),r=e(18491),s=e(34743),o=e(36376),m=e(96540),l=e(40845),i=e(18976),c=e(29158);const u=m.memo(({children:d,theme:E="info",placement:h="auto",content:y,title:a,closeButton:v=!0,onClose:g,footer:b,fitContent:P=!1,onOpen:C,show:D})=>{const T=(0,m.useRef)(null),M=(0,l.$j)(),O=(0,l.of)(f),S=O[E],[p,x]=(0,m.useState)(D),A=D??p,R=[(0,n.cY)(8),(0,r.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,r.BN)(),(0,s.UE)({element:T})],{context:B,refs:U,floatingStyles:F}=(0,o.we)({open:A,placement:(0,i.O)(h),onOpenChange:N=>{D===void 0&&x(N),N?C?.():g?.()},middleware:R,whileElementsMounted:r.ll,strategy:"fixed"}),K=(0,o.kp)(B),w=(0,o.s9)(B),{getReferenceProps:L,getFloatingProps:V}=(0,o.bv)([w,K]);return m.createElement(m.Fragment,null,m.cloneElement(d,{ref:U.setReference,tabIndex:0,"aria-expanded":A,...L()}),A&&m.createElement(o.s3,{context:B,modal:!1,closeOnFocusOut:!1},m.createElement("div",{"data-testid":"toggletip-content",className:(0,t.cx)(S.container,{[O.fitContent]:P}),ref:U.setFloating,style:F,...V()},m.createElement(o.ie,{strokeWidth:.3,stroke:M.colors.border.weak,className:S.arrow,ref:T,context:B}),!!a&&m.createElement("div",{className:S.header},a),v&&m.createElement("div",{className:S.headerClose},m.createElement(c.K,{"aria-label":"Close",name:"times","data-testid":"toggletip-header-close",onClick:()=>{x(!1),g?.()}})),m.createElement("div",{className:S.body},(typeof y=="string"||m.isValidElement(y))&&y,typeof y=="function"&&y({})),!!b&&m.createElement("div",{className:S.footer},b))))});u.displayName="Toggletip";const f=d=>{const E=(0,i.f)(d,d.colors.background.primary,d.colors.border.weak,d.components.tooltip.text,{topBottom:2,rightLeft:2}),h=(0,i.f)(d,d.colors.error.main,d.colors.error.main,d.colors.error.contrastText,{topBottom:2,rightLeft:2});return{info:E,error:h,fitContent:(0,t.css)({maxWidth:"fit-content"})}}},27746:(Y,I,e)=>{"use strict";e.d(I,{I:()=>u});var t=e(32196),n=e(96540),r=e(8887),s=e(13544),o=e(40845),m=e(16797),l=e(55852),i=e(14578),c=e(56034);const u=(0,n.forwardRef)(({tooltip:h,icon:y,iconSize:a,className:v,children:g,imgSrc:b,imgAlt:P,fullWidth:C,isOpen:D,narrow:T,variant:M="default",iconOnly:O,"aria-label":S,isHighlighted:p,...x},A)=>{const R=(0,o.of)(E),B=(0,t.cx)({[R.button]:!0,[R.buttonFullWidth]:C,[R.narrow]:T},R[M],v),U=(0,t.cx)({[R.content]:!0,[R.contentWithIcon]:!!y,[R.contentWithRightIcon]:D!==void 0}),F=n.createElement("button",{ref:A,className:B,"aria-label":f(S,h),"aria-expanded":D,...x},d(y,a),b&&n.createElement("img",{className:R.img,src:b,alt:P??""}),g&&!O&&n.createElement("div",{className:U},g),D===!1&&n.createElement(i.I,{name:"angle-down"}),D===!0&&n.createElement(i.I,{name:"angle-up"}),p&&n.createElement("div",{className:R.highlight}));return h?n.createElement(c.m,{ref:A,content:h,placement:"bottom"},F):F});u.displayName="ToolbarButton";function f(h,y){return h||(y?s.Tp.components.PageToolbar.item(y):void 0)}function d(h,y){return h?(0,r.n6)(h)?n.createElement(i.I,{name:h,size:`${y||"lg"}`}):h:null}const E=h=>{const y=(0,l.U_)(h,"primary","solid"),a=(0,l.U_)(h,"destructive","solid"),v=(0,t.css)({color:h.colors.text.primary,background:h.colors.secondary.main,"&:hover":{color:h.colors.text.primary,background:h.colors.secondary.shade,border:`1px solid ${h.colors.border.medium}`}});return{button:(0,t.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:h.spacing(h.components.height.md),padding:h.spacing(0,1),borderRadius:h.shape.radius.default,lineHeight:`${h.components.height.md*h.spacing.gridSize-2}px`,fontWeight:h.typography.fontWeightMedium,border:`1px solid ${h.colors.secondary.border}`,whiteSpace:"nowrap",transition:h.transitions.create(["background","box-shadow","border-color","color"],{duration:h.transitions.duration.short}),"&:focus, &:focus-visible":{...(0,m.getFocusStyles)(h),zIndex:1},"&:focus:not(:focus-visible)":(0,m.getMouseFocusStyles)(h),"&:hover":{boxShadow:h.shadows.z1},"&[disabled], &:disabled":{cursor:"not-allowed",opacity:h.colors.action.disabledOpacity,background:h.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:h.colors.text.disabled,background:h.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,t.css)({color:h.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:h.colors.text.primary,background:h.colors.background.secondary}}),canvas:v,active:(0,t.cx)(v,(0,t.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:h.shape.radius.default,backgroundImage:h.colors.gradients.brandHorizontal}})),primary:(0,t.css)(y),destructive:(0,t.css)(a),narrow:(0,t.css)({padding:h.spacing(0,.5)}),img:(0,t.css)({width:"16px",height:"16px",marginRight:h.spacing(1)}),buttonFullWidth:(0,t.css)({flexGrow:1}),content:(0,t.css)({flexGrow:1}),contentWithIcon:(0,t.css)({display:"none",paddingLeft:h.spacing(1),[`@media ${m.mediaUp(h.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,t.css)({paddingRight:h.spacing(.5)}),highlight:(0,t.css)({backgroundColor:h.colors.success.main,borderRadius:h.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},15068:(Y,I,e)=>{"use strict";e.d(I,{U:()=>c});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(96540),m=e(40845),l=e(17464),i=e(27746);const c=(0,o.forwardRef)(({alignment:f="left",className:d,children:E,...h},y)=>{const a=o.Children.toArray(E).filter(A=>A!=null),[v,g]=(0,o.useState)(Array(a.length).fill(!1)),b=(0,o.useRef)(null),[P,C]=(0,o.useState)(!1),D=(0,o.useRef)(null),T=(0,o.createRef)(),{overlayProps:M}=(0,s.e)({onClose:()=>C(!1),isDismissable:!0,isOpen:P,shouldCloseOnInteractOutside:A=>{const R=(0,l.gF)();return!D.current?.contains(A)&&!R.contains(A)}},T),{dialogProps:O}=(0,n.s)({},T),S=(0,m.$j)(),p=f==="left"?v.indexOf(!1)-1:v.length,x=u(S,p,f);return(0,o.useLayoutEffect)(()=>{const A=new IntersectionObserver(R=>{R.forEach(B=>{if(B.target instanceof HTMLElement&&B.target.parentNode){const U=Array.prototype.indexOf.call(B.target.parentNode.children,B.target);g(F=>{const K=[...F];return K[U]=B.isIntersecting,K})}})},{threshold:1,root:b.current});return b.current&&Array.from(b.current.children).forEach(R=>{R instanceof HTMLElement&&R!==D.current&&A.observe(R)}),()=>A.disconnect()},[E]),o.createElement("div",{ref:b,className:(0,t.cx)(x.container,d),...h},a.map((A,R)=>o.createElement("div",{key:R,style:{order:R,visibility:v[R]?"visible":"hidden"},className:x.childWrapper},A)),v.includes(!1)&&o.createElement("div",{ref:D,className:x.overflowButton},o.createElement(i.I,{variant:P?"active":"default",tooltip:"Show more items",onClick:()=>C(!P),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),P&&o.createElement(r.n1,{contain:!0,autoFocus:!0},o.createElement("div",{className:x.overflowItems,ref:T,...M,...O},a.map((A,R)=>!v[R]&&A)))))});c.displayName="ToolbarButtonRow";const u=(f,d,E)=>({overflowButton:(0,t.css)({order:d}),overflowItems:(0,t.css)({alignItems:"center",backgroundColor:f.colors.background.primary,borderRadius:f.shape.radius.default,boxShadow:f.shadows.z2,display:"flex",flexWrap:"wrap",gap:f.spacing(1),marginTop:f.spacing(1),maxWidth:"80vw",padding:f.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:f.zIndex.dropdown}),container:(0,t.css)({alignItems:"center",display:"flex",gap:f.spacing(1),justifyContent:E==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,t.css)({alignItems:"center",display:"flex",gap:f.spacing(1)})})},13840:(Y,I,e)=>{"use strict";e.d(I,{A:()=>c});var t=e(95361),n=e(18491),r=e(34743),s=e(36376),o=e(96540),m=e(40845),l=e(18976),i=e(17464);function c({content:u,show:f,placement:d,className:E,wrapperClassName:h,referenceElement:y,renderArrow:a,...v}){const g=(0,m.$j)(),b=(0,o.useRef)(null),P=[(0,t.cY)(8),(0,n.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,n.BN)()];a&&P.push((0,r.UE)({element:b}));const{context:C,refs:D,floatingStyles:T}=(0,s.we)({open:f,placement:(0,l.O)(d),middleware:P,whileElementsMounted:n.ll,strategy:"fixed"});(0,o.useLayoutEffect)(()=>{D.setReference(y)},[y,D]);const{styles:M}=(0,s.DL)(C,{initial:()=>({opacity:0}),duration:g.transitions.duration.enteringScreen});return f?o.createElement(i.ZL,null,o.createElement("div",{ref:D.setFloating,style:{...T,...M},className:h,...v},o.createElement("div",{className:E},a&&o.createElement(s.ie,{fill:g.colors.border.weak,ref:b,context:C}),typeof u=="string"&&u,o.isValidElement(u)&&o.cloneElement(u),typeof u=="function"&&u({})))):void 0}},95868:(Y,I,e)=>{"use strict";e.d(I,{I:()=>n});var t=e(96540);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:o,placement:m="auto"}=this.props,{show:l}=this.state;return s(this.showPopper,this.hidePopper,{show:l,placement:m,content:o})}}},56034:(Y,I,e)=>{"use strict";e.d(I,{m:()=>u});var t=e(95361),n=e(18491),r=e(34743),s=e(36376),o=e(96540),m=e(13544),l=e(40845),i=e(18976),c=e(17464);const u=o.forwardRef(({children:d,theme:E,interactive:h,show:y,placement:a,content:v},g)=>{const b=(0,o.useRef)(null),[P,C]=(0,o.useState)(y),D=y??P,T=[(0,t.cY)(8),(0,n.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,n.BN)(),(0,r.UE)({element:b})],{context:M,refs:O,floatingStyles:S}=(0,s.we)({open:D,placement:(0,i.O)(a),onOpenChange:C,middleware:T,whileElementsMounted:n.ll}),p=(0,o.useId)(),x=(0,s.Mk)(M,{delay:{close:h?100:0},move:!1}),A=(0,s.iQ)(M),R=(0,s.s9)(M),{getReferenceProps:B,getFloatingProps:U}=(0,s.bv)([R,x,A]),F=typeof v=="function",w=(0,l.of)(f)[E??"info"],L=(0,o.useCallback)(N=>{O.setReference(N),typeof g=="function"?g(N):g&&(g.current=N)},[g,O]),V="aria-label"in d.props&&d.props["aria-label"]===v;return o.createElement(o.Fragment,null,o.cloneElement(d,{ref:L,tabIndex:0,"aria-describedby":!V&&D?p:void 0,...B()}),D&&o.createElement(c.ZL,null,o.createElement("div",{ref:O.setFloating,style:S,...U()},o.createElement(s.ie,{className:w.arrow,ref:b,context:M}),o.createElement("div",{"data-testid":m.Tp.components.Tooltip.container,id:p,role:"tooltip",className:w.container},typeof v=="string"&&v,o.isValidElement(v)&&o.cloneElement(v),F&&v({})))))});u.displayName="Tooltip";const f=d=>{const E=(0,i.f)(d,d.components.tooltip.background,d.components.tooltip.background,d.components.tooltip.text,{topBottom:.5,rightLeft:1}),h=(0,i.f)(d,d.colors.error.main,d.colors.error.main,d.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:E,"info-alt":E,error:h}}},5313:(Y,I,e)=>{"use strict";e.d(I,{z:()=>r});var t=e(96540);function n(s,o){const m=[];return s.forEach(l=>{m.push(l.start,l.end+1)}),m[0]!==0&&m.unshift(0),m[m.length-1]!==o&&m.push(o),m}const r=s=>{let{highlightParts:o,text:m,highlightClassName:l}=s;if(!o?.length)return null;let i=[],c=n(o,m.length),u=o[0].start===0;for(let f=1;f<c.length;f++){let d=c[f-1],E=c[f];i.push((0,t.createElement)(u?"mark":"span",{key:f-1,className:u?l:void 0},m.substring(d,E))),u=!u}return t.createElement("div",null,i)}},2056:(Y,I,e)=>{"use strict";e.d(I,{p:()=>o});var t=e(96540),n=e(83195),r=e(3988);function s(m){return`Custom unit: ${m}`}class o extends t.PureComponent{constructor(){super(...arguments),this.onChange=l=>{this.props.onChange(l.value)}}render(){const{value:l,width:i}=this.props;let c;const f=(0,n.Ke)().map(d=>{const E=d.submenu.map(h=>{const y={label:h.text,value:h.value};return h.value===l&&(c=y),y});return{label:d.text,value:d.text,items:E}});return l&&!c&&(c={value:l,label:l}),t.createElement(r.v,{width:i,initialValue:c&&c.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:f,placeholder:"Choose",isClearable:!0,onSelect:this.props.onChange})}}},12942:(Y,I,e)=>{"use strict";e.d(I,{e:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);const o=({src:l,alt:i,width:c,height:u})=>{const f=(0,r.of)(m,c,u);return n.createElement("img",{className:f.image,src:l,alt:i})},m=(l,i=3,c=3)=>({image:(0,t.css)([(0,s.Y)(l,i,u=>({width:l.spacing(u)})),(0,s.Y)(l,c,u=>({height:l.spacing(u)})),{borderRadius:l.shape.radius.circle}])})},99635:(Y,I,e)=>{"use strict";e.d(I,{n:()=>i});var t=e(32196),n=e(96540),r=e(47232),s=e(40845),o=e(56034);const m=f=>{const E=(0,r.KQ)(f).diff((0,r.KQ)(),"hours",!1);return`Active last ${(Math.floor(-E/24)+1)*24}h`},l=f=>{if(!f)return"";const[d,E]=f.split(" ");return`${d?.[0]??""}${E?.[0]??""}`.toUpperCase()},i=({userView:f,className:d,children:E,onClick:h,showTooltip:y=!0})=>{const{user:a,lastActiveAt:v}=f,g=(0,r.KQ)(v).diff((0,r.KQ)(),"minutes",!0)>=-15,b=(0,s.$j)(),P=(0,n.useMemo)(()=>u(b,g),[b,g]),C=n.createElement("button",{type:"button",onClick:h,className:(0,t.cx)(P.container,h&&P.pointer,d),"aria-label":`${a.name} icon`},E?n.createElement("div",{className:(0,t.cx)(P.content,P.textContent)},E):a.avatarUrl?n.createElement("img",{className:P.content,src:a.avatarUrl,alt:`${a.name} avatar`}):n.createElement("div",{className:(0,t.cx)(P.content,P.textContent)},l(a.name)));if(y){const D=n.createElement("div",{className:P.tooltipContainer},n.createElement("div",{className:P.tooltipName},a.name),n.createElement("div",{className:P.tooltipDate},g?n.createElement("div",{className:P.dotContainer},n.createElement("span",null,"Active last 15m"),n.createElement("span",{className:P.dot})):m(v)));return n.createElement(o.m,{content:D},C)}else return C},c=f=>`0 0 0 1px ${f}`,u=(f,d)=>{const E=d?f.colors.primary.main:f.colors.border.medium,h=d?f.colors.primary.text:f.colors.border.strong;return{container:(0,t.css)({padding:0,width:"30px",height:"30px",background:"none",border:"none",borderRadius:f.shape.radius.circle,"& > *":{borderRadius:f.shape.radius.circle}}),content:(0,t.css)({lineHeight:"24px",maxWidth:"100%",border:`3px ${f.colors.background.primary} solid`,boxShadow:c(E),backgroundClip:"padding-box","&:hover":{boxShadow:c(h)}}),textContent:(0,t.css)({background:f.colors.background.primary,padding:0,color:f.colors.text.secondary,textAlign:"center",fontSize:f.typography.size.sm,"&:focus":{boxShadow:c(E)}}),tooltipContainer:(0,t.css)({textAlign:"center",padding:f.spacing(0,1)}),tooltipName:(0,t.css)({fontWeight:f.typography.fontWeightBold}),tooltipDate:(0,t.css)({fontWeight:f.typography.fontWeightRegular}),dotContainer:(0,t.css)({display:"flex",alignItems:"center"}),dot:(0,t.css)({height:"6px",width:"6px",backgroundColor:f.colors.primary.main,borderRadius:f.shape.radius.circle,display:"inline-block",marginLeft:f.spacing(1)}),pointer:(0,t.css)({cursor:"pointer"})}}},51986:(Y,I,e)=>{"use strict";e.d(I,{i:()=>m});var t=e(96540),n=e(13544),r=e(40845),s=e(55852),o=e(88323);function m({"aria-label":l,label:i,icon:c,options:u,onChange:f,variant:d,minWidth:E=16,size:h="sm",isFullWidth:y=!0,menuPlacement:a,fill:v,buttonCss:g}){const[b,P]=(0,t.useState)(!1),C=(0,r.$j)();return t.createElement(t.Fragment,null,!b&&t.createElement(s.$n,{size:h||"sm",className:g,icon:c||"plus",onClick:()=>P(!0),variant:d,fill:v,fullWidth:y,"data-testid":n.Tp.components.ValuePicker.button(l??i)},i),b&&t.createElement("span",{style:{minWidth:C.spacing(E),flexGrow:y?1:void 0}},t.createElement(o.l6,{placeholder:i,options:u,"aria-label":n.Tp.components.ValuePicker.select(l??i),isOpen:!0,onCloseMenu:()=>P(!1),autoFocus:!0,onChange:D=>{P(!1),f(D)},menuPlacement:a})))}},67266:(Y,I,e)=>{"use strict";e.d(I,{KU:()=>l});var t=e(32196),n=e(96540),r=e(49185),s=e(40845),o=e(16797),m=e(40276);const l=({width:u,height:f,legend:d,children:E})=>{const h=(0,s.$j)(),y=(0,s.of)(i),a={display:"flex",width:`${u}px`,height:`${f}px`},[v,g]=(0,r.A)();if(!d)return n.createElement(n.Fragment,null,n.createElement("div",{style:a,className:y.viz},E(u,f)));let{placement:b,maxHeight:P="35%",maxWidth:C="60%"}=d.props;document.body.clientWidth<h.breakpoints.values.lg&&(b="bottom");let D=null;const T={};switch(b){case"bottom":a.flexDirection="column",T.maxHeight=P,g.height&&(D={width:u,height:f-g.height});break;case"right":a.flexDirection="row",T.maxWidth=C,g.width&&(D={width:u-g.width,height:f}),d.props.width&&(T.width=d.props.width,D={width:u-d.props.width,height:f});break}return D?.width===0&&(D.width=u),D?.height===0&&(D.height=f),n.createElement("div",{style:a},n.createElement("div",{className:y.viz},D&&E(D.width,D.height)),n.createElement("div",{style:T,ref:v},n.createElement(m.E,{hideHorizontalTrack:!0},d)))},i=u=>({viz:(0,t.css)({flexGrow:2,borderRadius:u.shape.radius.default,"&:focus-visible":(0,o.getFocusStyles)(u)})}),c=({children:u})=>n.createElement(n.Fragment,null,u);l.Legend=c},94536:(Y,I,e)=>{"use strict";e.d(I,{p:()=>o});var t=e(32196),n=e(96540),r=e(8066),s=e(40845);const o=n.memo(n.forwardRef(({color:l,className:i,gradient:c,...u},f)=>{const d=(0,s.$j)(),E=(0,s.of)(m);let h;if(c){const a=r.uf.get(c).getColors?.(d);a?.length?h=`linear-gradient(90deg, ${a.join(", ")})`:h=d.visualization.getColorByName("")}else h=l;const y={background:h,width:"14px",height:"4px",borderRadius:d.shape.radius.pill,display:"inline-block",marginRight:"8px"};return n.createElement("div",{"data-testid":"series-icon",ref:f,className:(0,t.cx)(i,E.forcedColors),style:y,...u})})),m=()=>({forcedColors:(0,t.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});o.displayName="SeriesIcon"},55726:(Y,I,e)=>{"use strict";e.d(I,{t:()=>O});var t=e(96540),n=e(69129),r=e(52622),s=e(79041),o=e(88895),m=e(32196),l=e(40845),i=e(1551),c=e(33552),u=e(34375);const f=({items:S,itemRenderer:p,onLabelMouseOver:x,onLabelMouseOut:A,onLabelClick:R,placement:B,className:U,readonly:F})=>{const K=(0,l.of)(d);p||(p=L=>t.createElement(u.M,{item:L,onLabelClick:R,onLabelMouseOver:x,onLabelMouseOut:A,readonly:F}));const w=L=>`${L.getItemKey?L.getItemKey():L.label}`;switch(B){case"right":{const L=(V,N)=>t.createElement("span",{className:K.itemRight},p(V,N));return t.createElement("div",{className:(0,m.cx)(K.rightWrapper,U)},t.createElement(c.B,{items:S,renderItem:L,getItemKey:w}))}case"bottom":default:{const L=S.filter(z=>z.yAxis===1),V=S.filter(z=>z.yAxis!==1),N=(z,J)=>t.createElement("span",{className:K.itemBottom},p(z,J));return t.createElement("div",{className:(0,m.cx)(K.bottomWrapper,U)},L.length>0&&t.createElement("div",{className:K.section},t.createElement(i.c,{items:L,renderItem:N,getItemKey:w})),V.length>0&&t.createElement("div",{className:(0,m.cx)(K.section,K.sectionRight)},t.createElement(i.c,{items:V,renderItem:N,getItemKey:w})))}}};f.displayName="VizLegendList";const d=S=>{const p=(0,m.css)({paddingRight:"10px",display:"flex",fontSize:S.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:p,itemRight:(0,m.cx)(p,(0,m.css)({marginBottom:S.spacing(.5)})),rightWrapper:(0,m.css)({paddingLeft:S.spacing(.5)}),bottomWrapper:(0,m.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",paddingLeft:S.spacing(.5),gap:"15px 25px"}),section:(0,m.css)({display:"flex"}),sectionRight:(0,m.css)({justifyContent:"flex-end",flexGrow:1,flexBasis:"50%"})}};var E=e(14578),h=e(83195),y=e(16797),a=e(94134);const v=({item:S,onLabelClick:p,onLabelMouseOver:x,onLabelMouseOut:A,className:R,readonly:B})=>{const U=(0,l.of)(g),F=(0,t.useCallback)(L=>{x&&x(S,L)},[S,x]),K=(0,t.useCallback)(L=>{A&&A(S,L)},[S,A]),w=(0,t.useCallback)(L=>{p&&p(S,L)},[S,p]);return t.createElement("tr",{className:(0,m.cx)(U.row,R)},t.createElement("td",null,t.createElement("span",{className:U.itemWrapper},t.createElement(a.R,{color:S.color,seriesName:S.fieldName??S.label,readonly:B}),t.createElement("button",{disabled:B,type:"button",title:S.label,onBlur:K,onFocus:F,onMouseOver:F,onMouseOut:K,onClick:B?void 0:w,className:(0,m.cx)(U.label,S.disabled&&U.labelDisabled)},S.label," ",S.yAxis===2&&t.createElement("span",{className:U.yAxisLabel},"(right y-axis)")))),S.getDisplayValues&&S.getDisplayValues().map((L,V)=>t.createElement("td",{className:U.value,key:`${L.title}-${V}`},(0,h.cN)(L))))};v.displayName="LegendTableItem";const g=S=>{const p=y.hoverColor(S.colors.background.primary,S);return{row:(0,m.css)({label:"LegendRow",fontSize:S.v1.typography.size.sm,borderBottom:`1px solid ${S.colors.border.weak}`,td:{padding:S.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:p}}),label:(0,m.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden",userSelect:"text"}),labelDisabled:(0,m.css)({label:"LegendLabelDisabled",color:S.colors.text.disabled}),itemWrapper:(0,m.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,m.css)({textAlign:"right"}),yAxisLabel:(0,m.css)({color:S.colors.text.secondary})}},b="Name",P=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare,C=({items:S,sortBy:p,sortDesc:x,itemRenderer:A,className:R,onToggleSort:B,onLabelClick:U,onLabelMouseOver:F,onLabelMouseOut:K,readonly:w,isSortable:L})=>{const V=(0,l.of)(D),N={};L&&(N[b]="");for(const z of S)if(z.getDisplayValues)for(const J of z.getDisplayValues())N[J.title??"?"]=J.description??"";if(p!=null){let z=new Map;S.forEach(G=>{if(p!==b&&G.getDisplayValues){const H=G.getDisplayValues().find(le=>le.title===p),q=H==null||Number.isNaN(H.numeric)?-1/0:H.numeric;z.set(G,q)}});let J=x?-1:1;p===b?S.sort((G,H)=>J*P(G.label,H.label)):S.sort((G,H)=>{const q=z.get(G)??0,le=z.get(H)??0;return J*(q-le)})}return A||(A=(z,J)=>t.createElement(v,{key:`${z.label}-${J}`,item:z,onLabelClick:U,onLabelMouseOver:F,onLabelMouseOut:K,readonly:w})),t.createElement("table",{className:(0,m.cx)(V.table,R)},t.createElement("thead",null,t.createElement("tr",null,!L&&t.createElement("th",null),Object.keys(N).map(z=>t.createElement("th",{title:N[z],key:z,className:(0,m.cx)(V.header,B&&V.headerSortable,L&&V.nameHeader,{[V.withIcon]:p===z}),onClick:()=>{B&&B(z)}},z,p===z&&t.createElement(E.I,{size:"xs",name:x?"angle-down":"angle-up"}))))),t.createElement("tbody",null,S.map(A)))},D=S=>({table:(0,m.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${S.colors.border.weak}`}}),header:(0,m.css)({color:S.colors.primary.text,fontWeight:S.typography.fontWeightMedium,borderBottom:`1px solid ${S.colors.border.weak}`,padding:S.spacing(.25,1,.25,1),fontSize:S.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,m.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,m.css)({paddingRight:"4px"}),headerSortable:(0,m.css)({cursor:"pointer"})});var T=e(29995);function M(S){return S.ctrlKey||S.metaKey||S.shiftKey?o.B.AppendToSelection:o.B.ToggleSelection}function O({items:S,displayMode:p,sortBy:x,seriesVisibilityChangeBehavior:A=T.K.Isolate,sortDesc:R,onLabelClick:B,onToggleSort:U,placement:F,className:K,itemRenderer:w,readonly:L,isSortable:V}){const{eventBus:N,onToggleSeriesVisibility:z,onToggleLegendSort:J}=(0,s.d2)(),G=(0,t.useCallback)((le,me)=>{N?.publish({type:n.b_.type,payload:{raw:me,x:0,y:0,dataId:le.label}})},[N]),H=(0,t.useCallback)((le,me)=>{N?.publish({type:n.ql.type,payload:{raw:me,x:0,y:0,dataId:le.label}})},[N]),q=(0,t.useCallback)((le,me)=>{B&&B(le,me),z&&z(le.fieldName??le.label,A===T.K.Hide?o.B.AppendToSelection:M(me))},[z,B,A]);switch(p){case r.lm.Table:return t.createElement(C,{className:K,items:S,placement:F,sortBy:x,sortDesc:R,onLabelClick:q,onToggleSort:U||J,onLabelMouseOver:G,onLabelMouseOut:H,itemRenderer:w,readonly:L,isSortable:V});case r.lm.List:return t.createElement(f,{className:K,items:S,placement:F,onLabelMouseOver:G,onLabelMouseOut:H,onLabelClick:q,itemRenderer:w,readonly:L});default:return null}}O.displayName="VizLegend"},34375:(Y,I,e)=>{"use strict";e.d(I,{M:()=>f});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(94134),m=e(2543),l=e(83195),i=e(1551);const c=({stats:E})=>{const h=(0,s.of)(u);return E.length===0?null:n.createElement(i.c,{className:h.list,items:E,renderItem:y=>n.createElement("div",{className:h.item,title:y.description},y.title&&`${(0,m.capitalize)(y.title)}:`," ",(0,l.cN)(y))})},u=()=>({list:(0,t.css)({flexGrow:1,textAlign:"right"}),item:(0,t.css)({marginLeft:"8px"})});c.displayName="VizLegendStatsList";const f=({item:E,onLabelClick:h,onLabelMouseOver:y,onLabelMouseOut:a,className:v,readonly:g})=>{const b=(0,s.of)(d),P=(0,n.useCallback)(T=>{y&&y(E,T)},[E,y]),C=(0,n.useCallback)(T=>{a&&a(E,T)},[E,a]),D=(0,n.useCallback)(T=>{h&&h(E,T)},[E,h]);return n.createElement("div",{className:(0,t.cx)(b.itemWrapper,E.disabled&&b.itemDisabled,v),"data-testid":r.Tp.components.VizLegend.seriesName(E.label)},n.createElement(o.R,{seriesName:E.fieldName??E.label,color:E.color,gradient:E.gradient,readonly:g}),n.createElement("button",{disabled:g,type:"button",onBlur:C,onFocus:P,onMouseOver:P,onMouseOut:C,onClick:D,className:b.label},E.label),E.getDisplayValues&&n.createElement(c,{stats:E.getDisplayValues()}))};f.displayName="VizLegendListItem";const d=E=>({label:(0,t.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,t.css)({label:"LegendLabelDisabled",color:E.colors.text.disabled}),itemWrapper:(0,t.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,t.css)({textAlign:"right"}),yAxisLabel:(0,t.css)({color:E.v1.palette.gray2})})},94134:(Y,I,e)=>{"use strict";e.d(I,{R:()=>o});var t=e(96540),n=e(83598),r=e(79041),s=e(94536);const o=t.memo(({seriesName:m,color:l,gradient:i,readonly:c})=>{const{onSeriesColorChange:u}=(0,r.d2)(),f=(0,t.useCallback)(d=>u(m,d),[m,u]);return m&&u&&l&&!c?t.createElement(n.Dp,{color:l,onChange:f,enableNamedColors:!0},({ref:d,showColorPicker:E,hideColorPicker:h})=>t.createElement(s.p,{color:l,className:"pointer",ref:d,onClick:E,onMouseLeave:h})):t.createElement(s.p,{color:l,gradient:i})});o.displayName="VizLegendSeriesIcon"},29995:(Y,I,e)=>{"use strict";e.d(I,{K:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},12509:(Y,I,e)=>{"use strict";e.d(I,{S:()=>m});var t=e(2543),n=e(96540),r=e(47070);const s=(i,c,u,f)=>{const d=o(i,c,f),E=o(c,i,f),h=Math.max(d,E);let y=Math.floor(i/h),a=Math.ceil(f/y);y=Math.ceil(f/a);const v=y-(y*a-f),g=i/v-u+u/v;return{width:i/y-u+u/y,height:c/a-u+u/a,widthOnLastRow:g,xCount:y,yCount:a}};function o(i,c,u){const f=Math.ceil(Math.sqrt(u*i/c));return Math.floor(f*c/i)*f<u?c/Math.ceil(f*c/i):i/f}class m extends n.PureComponent{static{this.defaultProps={itemSpacing:8}}constructor(c){super(c),this.state={values:c.getValues()}}componentDidUpdate(c){const{renderCounter:u,source:f}=this.props;(u!==c.renderCounter||f!==c.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:c,width:u,height:f}=this.props;return c===r.wV.Auto?u>f?r.wV.Vertical:r.wV.Horizontal:c}renderGrid(){const{renderValue:c,height:u,width:f,itemSpacing:d,getAlignmentFactors:E,orientation:h}=this.props,{values:y}=this.state,a=s(f,u,d,y.length),v=E?E(y,a.width,a.height):{};let g=0,b=0,P=[];for(let C=0;C<y.length;C++){const D=y[C],M=b===a.yCount-1?a.widthOnLastRow:a.width,O=a.height,S=g*M+d*g,p=b*O+d*b,x={position:"absolute",left:S,top:p,width:`${M}px`,height:`${O}px`};P.push(n.createElement("div",{key:C,style:x},c({value:D,width:M,height:O,alignmentFactors:v,orientation:h,count:y.length}))),g++,g===a.xCount&&(g=0,b++)}return n.createElement("div",{style:{position:"relative"}},P)}render(){const{renderValue:c,height:u,width:f,itemSpacing:d,getAlignmentFactors:E,autoGrid:h,orientation:y,maxVizHeight:a,minVizWidth:v,minVizHeight:g}=this.props,{values:b}=this.state;if(h&&y===r.wV.Auto)return this.renderGrid();const P={display:"flex"},C={display:"flex",overflow:`${v?"auto":"hidden"} ${g?"auto":"hidden"}`};let D=u,T=f;const M=this.getOrientation();switch(M){case r.wV.Horizontal:const S=(u+d)/b.length-d;C.flexDirection="column",C.height=`${u}px`,P.marginBottom=`${d}px`,T=f,D=(0,t.clamp)(S,g??0,a??S);break;case r.wV.Vertical:C.flexDirection="row",C.justifyContent="space-between",P.marginRight=`${d}px`,D=u,T=Math.max(f/b.length-d+d/b.length,v??0)}P.width=`${T}px`,P.height=`${D}px`;const O=E?E(b,T,D):{};return n.createElement("div",{style:C},b.map((S,p)=>n.createElement("div",{key:p,style:l(P,p,b.length)},c({value:S,width:T,height:D,alignmentFactors:O,orientation:M,count:b.length}))))}}function l(i,c,u){return c===u-1?{...i,marginRight:0,marginBottom:0}:i}},3139:(Y,I,e)=>{"use strict";e.d(I,{g:()=>m,o:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(94536);const o=i=>({icon:(0,t.css)({marginRight:i.spacing(1),verticalAlign:"middle"}),seriesTable:(0,t.css)({display:"table"}),seriesTableRow:(0,t.css)({display:"table-row",fontSize:i.typography.bodySmall.fontSize}),seriesTableCell:(0,t.css)({display:"table-cell"}),label:(0,t.css)({wordBreak:"break-all"}),value:(0,t.css)({paddingLeft:i.spacing(2),textAlign:"right"}),activeSeries:(0,t.css)({fontWeight:i.typography.fontWeightBold,color:i.colors.text.maxContrast}),timestamp:(0,t.css)({fontWeight:i.typography.fontWeightBold,fontSize:i.typography.bodySmall.fontSize})}),m=({color:i,label:c,value:u,isActive:f})=>{const d=(0,r.of)(o);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(d.seriesTableRow,f&&d.activeSeries)},i&&n.createElement("div",{className:d.seriesTableCell},n.createElement(s.p,{color:i,className:d.icon})),c&&n.createElement("div",{className:(0,t.cx)(d.seriesTableCell,d.label)},c),u&&n.createElement("div",{className:(0,t.cx)(d.seriesTableCell,d.value)},u))},l=({timestamp:i,series:c})=>{const u=(0,r.of)(o);return n.createElement(n.Fragment,null,i&&n.createElement("div",{className:u.timestamp,"aria-label":"Timestamp"},i),c.map((f,d)=>n.createElement(m,{isActive:f.isActive,label:f.label,color:f.color,value:f.value,key:`${f.label}-${d}`})))}},75128:(Y,I,e)=>{"use strict";e.d(I,{n:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(17464),o=e(69503);const m=({content:i,position:c,offset:u})=>{const f=(0,r.of)(l);return c?n.createElement(s.ZL,{className:f.portal},n.createElement(o.o,{position:c,offset:u||{x:0,y:0}},i)):null};m.displayName="VizTooltip";const l=()=>({portal:(0,t.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})})},69503:(Y,I,e)=>{"use strict";e.d(I,{o:()=>l});var t=e(32196),n=e(96540),r=e(52908),s=e(40845),o=e(16797),m=e(10875);const l=({position:{x:c,y:u},offset:{x:f,y:d},children:E,allowPointerEvents:h=!1,className:y,...a})=>{const v=(0,n.useRef)(null),[g,b]=(0,n.useState)({width:0,height:0}),{width:P,height:C}=(0,r.A)(),[D,T]=(0,n.useState)({x:c+f,y:u+d}),M=(0,n.useMemo)(()=>new ResizeObserver(S=>{for(let p of S){const x=Math.floor(p.contentRect.width+16),A=Math.floor(p.contentRect.height+2*8);(g.width!==x||g.height!==A)&&b({width:Math.min(x,P),height:Math.min(A,C)})}}),[g,P,C]);(0,n.useLayoutEffect)(()=>(v.current&&M.observe(v.current),()=>{M.disconnect()}),[M]),(0,n.useLayoutEffect)(()=>{if(v&&v.current){const{x:S,y:p}=(0,m.Ju)(c,u,g.width,g.height,f,d,P,C);T({x:S,y:p})}},[P,C,c,f,u,d,g]);const O=(0,s.of)(i);return n.createElement("div",{ref:v,style:{position:"fixed",left:0,pointerEvents:h?"auto":"none",top:0,transform:`translate(${D.x}px, ${D.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...a,className:(0,t.cx)(O.wrapper,y)},E)};l.displayName="VizTooltipContainer";const i=c=>({wrapper:(0,t.css)((0,o.getTooltipContainerStyles)(c))})},11389:(Y,I,e)=>{"use strict";e.d(I,{o:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(13471);const o=({items:l,children:i,isPinned:c,scrollable:u=!1})=>{const f=(0,r.of)(m),d=u?{maxHeight:400,overflowY:"auto"}:{};return n.createElement("div",{className:f.wrapper,style:d},l.map(({label:E,value:h,color:y,colorIndicator:a,colorPlacement:v,isActive:g},b)=>n.createElement(s.B,{key:b,label:E,value:h,color:y,colorIndicator:a,colorPlacement:v,isActive:g,justify:"space-between",isPinned:c})),i)},m=l=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${l.colors.border.medium}`,padding:l.spacing(1)})})},58749:(Y,I,e)=>{"use strict";e.d(I,{S:()=>i});var t=e(32196),n=e(96540),r=e(67061),s=e(14689),o=e(55852),m=e(40845);const l="add-annotation-button",i=({dataLinks:u,annotate:f})=>{const d=(0,m.of)(c),E=()=>{const h={variant:"secondary"};return n.createElement(r.B,{direction:"column",justifyContent:"flex-start"},u.map((y,a)=>n.createElement(s.R,{key:a,link:y,buttonProps:h})))};return n.createElement("div",{className:d.wrapper},u.length>0&&n.createElement("div",{className:d.dataLinks},E()),f!=null&&n.createElement("div",{className:d.addAnnotations},n.createElement(o.$n,{icon:"comment-alt",variant:"secondary",size:"sm",id:l,onClick:f},"Add annotation")))},c=u=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,padding:u.spacing(0)}),dataLinks:(0,t.css)({borderTop:`1px solid ${u.colors.border.medium}`,padding:u.spacing(1)}),addAnnotations:(0,t.css)({borderTop:`1px solid ${u.colors.border.medium}`,padding:u.spacing(1)})})},52415:(Y,I,e)=>{"use strict";e.d(I,{A:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(13471);const o=({item:l,isPinned:i})=>{const c=(0,r.of)(m),{label:u,value:f,color:d,colorIndicator:E}=l;return n.createElement("div",{className:c.wrapper},n.createElement(s.B,{label:u,value:f,color:d,colorIndicator:E,marginRight:"22px",isPinned:i}))},m=l=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,padding:l.spacing(1)})})},13471:(Y,I,e)=>{"use strict";e.d(I,{B:()=>y});var t=e(32196),n=e(96540),r=e(40845),s=e(32982),o=e(56034),m=e(24293),l=e(79871),i=e(10875),c=(v=>(v[v.Leading=0]="Leading",v[v.Trailing=1]="Trailing",v))(c||{});const u=({color:v=m.F,colorIndicator:g=l.Ev,position:b=0})=>{const P=(0,r.of)(f);return n.createElement("span",{style:{backgroundColor:v},className:(0,t.cx)(b===0?P.leading:P.trailing,(0,i.L$)(g,P))})},f=v=>({leading:(0,t.css)({marginRight:v.spacing(.5)}),trailing:(0,t.css)({marginLeft:v.spacing(.5)}),series:(0,t.css)({width:"14px",height:"4px",borderRadius:v.shape.radius.pill,minWidth:"14px"}),value:(0,t.css)({width:"12px",height:"12px",borderRadius:v.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,t.css)({}),pie_1_4:(0,t.css)({}),pie_2_4:(0,t.css)({}),pie_3_4:(0,t.css)({}),marker_sm:(0,t.css)({width:"4px",height:"4px",borderRadius:v.shape.radius.circle,minWidth:"4px"}),marker_md:(0,t.css)({width:"8px",height:"8px",borderRadius:v.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,t.css)({width:"12px",height:"12px",borderRadius:v.shape.radius.circle,minWidth:"12px"})});var d=(v=>(v.label="label",v.value="value",v))(d||{});const E="Copied to clipboard",h=2*1e3,y=({label:v,value:g,color:b,colorIndicator:P,colorPlacement:C=l.lJ.first,justify:D="flex-start",isActive:T=!1,marginRight:M="0px",isPinned:O})=>{const S=(0,r.of)(a,D,M),[p,x]=(0,n.useState)(!1),[A,R]=(0,n.useState)(!1),[B,U]=(0,n.useState)(null),[F,K]=(0,n.useState)(!1),w=(0,n.useRef)(null),L=(0,n.useRef)(null);(0,n.useEffect)(()=>{let q;return F&&(q=setTimeout(()=>{K(!1)},h)),()=>{window.clearTimeout(q)}},[F]);const V=async(q,le)=>{if(!(navigator?.clipboard&&window.isSecureContext)){N(q,le);return}try{await navigator.clipboard.writeText(q),U({[`${le}`]:q}),K(!0)}catch{U(null)}},N=(q,le)=>{const me=document.createElement("textarea");w.current?.appendChild(me),me.value=q,me.focus(),me.select();try{document.execCommand("copy")&&(U({[`${le}`]:q}),K(!0))}catch(k){console.error("Unable to copy to clipboard",k)}me.remove()},z=q=>{q.currentTarget.offsetWidth<q.currentTarget.scrollWidth&&x(!0)},J=()=>x(!1),G=q=>{q.currentTarget.offsetWidth<q.currentTarget.scrollWidth&&R(!0)},H=()=>R(!1);return n.createElement("div",{className:S.contentWrapper},(b||v)&&n.createElement("div",{className:S.valueWrapper},b&&C===l.lJ.first&&n.createElement(u,{color:b,colorIndicator:P}),O?n.createElement(n.Fragment,null,n.createElement(o.m,{content:v,interactive:!1,show:p},n.createElement(n.Fragment,null,F&&B?.label&&n.createElement(s.r,{placement:"top",referenceElement:w.current},E),n.createElement("div",{className:(0,t.cx)(S.label,T&&S.activeSeries,navigator?.clipboard&&S.copy),onMouseEnter:z,onMouseLeave:J,onClick:()=>V(v,"label"),ref:w},v)))):n.createElement("div",{className:(0,t.cx)(S.label,T&&S.activeSeries)},v)),n.createElement("div",{className:S.valueWrapper},b&&C===l.lJ.leading&&n.createElement(u,{color:b,colorIndicator:P,position:c.Leading}),O?n.createElement(o.m,{content:g?g.toString():"",interactive:!1,show:A},n.createElement(n.Fragment,null,F&&B?.value&&n.createElement(s.r,{placement:"top",referenceElement:L.current},E),n.createElement("div",{className:(0,t.cx)(S.value,T,navigator?.clipboard&&S.copy),onMouseEnter:G,onMouseLeave:H,onClick:()=>V(g?g.toString():"","value"),ref:L},g))):n.createElement("div",{className:(0,t.cx)(S.value,T)},g),b&&C===l.lJ.trailing&&n.createElement(u,{color:b,colorIndicator:P,position:c.Trailing})))},a=(v,g,b)=>({contentWrapper:(0,t.css)({display:"flex",alignItems:"center",justifyContent:g,flexWrap:"wrap",marginRight:b}),label:(0,t.css)({color:v.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:v.spacing(2)}),value:(0,t.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,t.css)({display:"flex",alignItems:"center",minWidth:0}),activeSeries:(0,t.css)({fontWeight:v.typography.fontWeightBold,color:v.colors.text.maxContrast}),copy:(0,t.css)({cursor:"pointer"})})},79871:(Y,I,e)=>{"use strict";e.d(I,{Ev:()=>r,fX:()=>t,lJ:()=>n});var t=(s=>(s.series="series",s.value="value",s.hexagon="hexagon",s.pie_1_4="pie_1_4",s.pie_2_4="pie_2_4",s.pie_3_4="pie_3_4",s.marker_sm="marker_sm",s.marker_md="marker_md",s.marker_lg="marker_lg",s))(t||{}),n=(s=>(s.hidden="hidden",s.first="first",s.leading="leading",s.trailing="trailing",s))(n||{});const r="series"},10875:(Y,I,e)=>{"use strict";e.d(I,{Ju:()=>m,L$:()=>l,cp:()=>f});var t=e(11261),n=e(83195),r=e(24293),s=e(52622),o=e(79871);const m=(d=0,E=0,h=0,y=0,a=0,v=0,g=0,b=0)=>{let P=d,C=E;const D=Math.max(d+a+h-(g-a),0),T=Math.abs(Math.min(d-a-h-a,0)),M=D>0,O=T>0,S=Math.max(E+v+y-(b-v),0),p=Math.abs(Math.min(E-v-y-v,0)),x=S>0,A=p>0;return M&&O?P=D>T?a:g-a-h:M?P=d-a-h:P=d+a,x&&A?C=S>p?v:b-v-y:x?C=E-v-y:C=E+v,{x:P,y:C}},l=(d,E)=>{switch(d){case o.fX.value:return E.value;case o.fX.series:return E.series;case o.fX.hexagon:return E.hexagon;case o.fX.pie_1_4:return E.pie_1_4;case o.fX.pie_2_4:return E.pie_2_4;case o.fX.pie_3_4:return E.pie_3_4;case o.fX.marker_sm:return E.marker_sm;case o.fX.marker_md:return E.marker_md;case o.fX.marker_lg:return E.marker_lg;default:return E.value}},i=(d,E)=>d.numeric-E.numeric,c=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),u=(d,E)=>c.compare(`${d.value}`,`${E.value}`),f=(d,E,h,y,a,v,g=b=>!0)=>{let b=[],P=!0;for(let C=0;C<d.length;C++){const D=d[C];if(D===E||D.type===t.PU.time||!g(D)||D.config.custom?.hideFrom?.tooltip||D.config.custom?.hideFrom?.viz||a===s.$N.Single&&y!==C)continue;let T=h[C];if(T==null)continue;D.type===t.PU.number||D.type===t.PU.boolean||D.type===t.PU.enum||(P=!1);const M=d[C].values[T];if(M==null&&D.config.noValue==null)continue;const O=D.display(M),S=Number.isNaN(O.numeric)?v===s.xB.Descending?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:O.numeric;b.push({label:D.state?.displayName??D.name,value:(0,n.cN)(O),color:O.color??r.F,colorIndicator:o.fX.series,colorPlacement:o.lJ.first,isActive:a===s.$N.Multi&&y===C,numeric:S})}if(v!==s.xB.None&&b.length>1){const C=P?i:u,D=v===s.xB.Descending?-1:1;b.sort((T,M)=>D*C(T,M))}return b}},94333:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{Alert:()=>Ze.F,AlertingSettings:()=>mn.i,AsyncMultiSelect:()=>ws.Iv,AsyncSelect:()=>ws.DW,AsyncVirtualizedSelect:()=>ws.gZ,AutoSaveField:()=>le.p,AutoSizeInput:()=>io.D,Avatar:()=>wt.e,Badge:()=>Ts.E,BarGauge:()=>$e.xE,BarGaugeDisplayMode:()=>pa.eX,BigValue:()=>je.yV,BigValueColorMode:()=>je.yp,BigValueGraphMode:()=>je.$p,BigValueJustifyMode:()=>je.F8,BigValueTextMode:()=>je.SV,Box:()=>ga.a,BrowserLabel:()=>ar.J,Button:()=>pt.$n,ButtonCascader:()=>C.H,ButtonGroup:()=>Qt.e,ButtonSelect:()=>Pr.f,CallToActionCard:()=>Gt.c,Card:()=>zr.Z,CardContainer:()=>yo.Q,Cascader:()=>P.v,CertificationKey:()=>Fn.K,Checkbox:()=>_r.S,ClickOutsideWrapper:()=>Ct.N,ClipboardButton:()=>b.b,CodeEditor:()=>te.B,CodeEditorSuggestionItemKind:()=>ie.q,CollapsableSection:()=>lt.M,Collapse:()=>nt.S,ColorPicker:()=>O.sk,ColorPickerInput:()=>S.i,ConfirmButton:()=>u.Z,ConfirmModal:()=>j.u,Container:()=>tr.mc,ContextMenu:()=>Wt.t,ControlledCollapse:()=>nt.a,Counter:()=>Le.p,CustomHeadersSettings:()=>ln.P,CustomScrollbar:()=>v.E,DataLinkButton:()=>rt.R,DataLinkInput:()=>_t.l,DataLinksContextMenu:()=>nn.e,DataLinksInlineEditor:()=>Mt.e,DataSourceHttpSettings:()=>Bt.t,DatePicker:()=>N.l,DatePickerWithInput:()=>z.l,DateTimePicker:()=>J.K,DeleteButton:()=>f.e,Divider:()=>un.c,Drawer:()=>rn._,Dropdown:()=>uo.m,EmptySearchResult:()=>x.Z,EmptyState:()=>A.p,ErrorBoundary:()=>Wn.tH,ErrorBoundaryAlert:()=>Wn.Xw,ErrorWithStack:()=>na.D,EventBusPlugin:()=>Is.Ku,EventsCanvas:()=>Fa.a,FIXED_UNIT:()=>Hs.s,FadeTransition:()=>Hn.A,FeatureBadge:()=>Xt.y,FeatureInfoBox:()=>Xt.e,Field:()=>rs.D,FieldArray:()=>ur.E,FieldLinkList:()=>ut.n,FieldSet:()=>Ns.n,FieldValidationMessage:()=>ls.P,FileDropzone:()=>co.gH,FileDropzoneDefaultChildren:()=>co.wI,FileListItem:()=>co.IB,FileUpload:()=>Vo.e,FilterInput:()=>Eo.Z,FilterPill:()=>X.m,Form:()=>Rn.l,FormattedValueDisplay:()=>qr.i,FullWidthButtonContainer:()=>Et.V,Gauge:()=>Ye._,Graph:()=>Rs.T,GraphContextMenu:()=>Nr.H,GraphContextMenuHeader:()=>Nr.i,GraphNG:()=>bs.o,GraphSeriesToggler:()=>et.M,GraphWithLegend:()=>Do.I,Grid:()=>_a.x,HorizontalGroup:()=>tr.Gy,Icon:()=>i.I,IconButton:()=>c.K,InfoBox:()=>en.w,InlineField:()=>cs.I,InlineFieldRow:()=>Vr.C,InlineFormLabel:()=>vn.I,InlineLabel:()=>ps.c,InlineSegmentGroup:()=>ds.e,InlineSwitch:()=>br.K,InlineToast:()=>D.r,Input:()=>nr.p,InputControl:()=>mt.e,InteractiveTable:()=>H.j,JSONFormatter:()=>En.B,JsonExplorer:()=>Vn.O,KeyboardPlugin:()=>Is.Z7,Label:()=>ms.J,LegacyForms:()=>mo,LegacyInputStatus:()=>n.O,Legend:()=>Ja.s,Link:()=>aa.N,LinkButton:()=>pt.z9,List:()=>G.B,LoadingBar:()=>M.G,LoadingPlaceholder:()=>T._,Marker:()=>Fa.pH,Menu:()=>ot.W,MenuGroup:()=>Tt.r,MenuItem:()=>Pn.D,Modal:()=>be.a,ModalHeader:()=>ge.r,ModalRoot:()=>Be.EO,ModalTabContent:()=>ye.O,ModalTabsHeader:()=>re.J,ModalsContext:()=>Be.wE,ModalsController:()=>Be.$s,ModalsProvider:()=>Be.YO,MultiSelect:()=>ws.KF,PageToolbar:()=>ve.d,Pagination:()=>me.d,PanelChrome:()=>ae.NR,PanelChromeLoadingIndicator:()=>fe.I,PanelContainer:()=>eo._,PanelContextProvider:()=>Ce.XF,PanelContextRoot:()=>Ce.e4,PlotLegend:()=>Ba.$,PluginSignatureBadge:()=>Ws.B,Popover:()=>h.A,PopoverController:()=>E.I,Portal:()=>a.ZL,PortalContainer:()=>a.qB,QueryField:()=>ne.X,RadioButtonGroup:()=>Jr.z,RadioButtonList:()=>Bo.a,RangeSlider:()=>gn.F,ReactMonacoEditor:()=>oe.m,RefreshPicker:()=>U.cC,RelativeTimeRangePicker:()=>Zr.N,RenderUserContentAsHTML:()=>He.I,ScaleDistribution:()=>pa.L4,SecretInput:()=>Ko.L,SecretTextArea:()=>$o.l,SecureSocksProxySettings:()=>Dn.Y,Segment:()=>In.Y,SegmentAsync:()=>kn.s,SegmentInput:()=>Vt.o,SegmentSection:()=>kt.L,SegmentSelect:()=>zt.a,Select:()=>ws.l6,SelectContainer:()=>ws.KA,SeriesColorPicker:()=>O.Dp,SeriesColorPickerPopover:()=>p.o,SeriesColorPickerPopoverWithTheme:()=>p.t,SeriesIcon:()=>dn.p,SeriesTable:()=>Ee.o,SeriesTableRow:()=>Ee.g,SeriesVisibilityChangeBehavior:()=>Oe.K,SeriesVisibilityChangeMode:()=>Bs.B,SetInterval:()=>Me.u,SlideOutTransition:()=>An.n,Slider:()=>yn.A,Space:()=>Za.$,Sparkline:()=>at.O,Spinner:()=>wn.y,Stack:()=>Ra.B,StatsPicker:()=>B.S,Switch:()=>br.d,TLSAuthSettings:()=>hn.j,Tab:()=>De.o,TabContent:()=>Ne.J,TabbedContainer:()=>g.q,Table:()=>ke.X,TableInputCSV:()=>Se.b,TabsBar:()=>We.U,Tag:()=>k.v,TagList:()=>ee.L,TagsInput:()=>q.u,Text:()=>jn.E,TextArea:()=>lo.f,TextLink:()=>Zn.Y,TimeOfDayPicker:()=>w.R,TimePickerTooltip:()=>F.xS,TimeRangeInput:()=>Xr.b,TimeRangeLabel:()=>K.f,TimeRangePicker:()=>F.$6,TimeSeries:()=>wr.Z,TimeZonePicker:()=>L.U,Toggletip:()=>y.G,ToolbarButton:()=>on.I,ToolbarButtonRow:()=>pn.U,Tooltip:()=>d.m,TooltipPlugin:()=>Is.Tk,TooltipPlugin2:()=>Is.xl,UPLOT_AXIS_FONT_SIZE:()=>Ha.pi,UPlotChart:()=>es.Z,UPlotConfigBuilder:()=>Da.e,UnitPicker:()=>R.p,UserIcon:()=>xt.n,ValuePicker:()=>fn.i,VerticalGroup:()=>tr.gW,VerticalTab:()=>pe.s,VirtualizedSelect:()=>ws.ip,VizLayout:()=>Re.KU,VizLegend:()=>ze.t,VizLegendListItem:()=>Xe.M,VizRepeater:()=>se.S,VizTooltip:()=>xe.n,VizTooltipContainer:()=>Fe.o,WeekStartPicker:()=>V.l,WithContextMenu:()=>ft.n,XYCanvas:()=>Fa._X,ZoomPlugin:()=>Is.jn,buildScaleKey:()=>to.My,clearButtonStyles:()=>pt.my,convertOldAngularValueMapping:()=>Ut.I1,defaultIntervals:()=>U.cb,fieldMatchersUI:()=>zn.g,getCardStyles:()=>zr.H,getDragStyles:()=>Mn.l,getInputStyles:()=>nr.n,getPortalContainer:()=>a.gF,getSelectStyles:()=>Yr.J,graphFieldOptions:()=>Jn.t,graphTickFormatter:()=>ja.Yn,graphTimeFormat:()=>ja.Jc,preparePlotFrame:()=>to.mY,resetSelectStyles:()=>ks.A,sharedInputStyle:()=>Kt.Xb,sharedSingleStatMigrationHandler:()=>Ut._$,sharedSingleStatPanelChangedHandler:()=>Ut.gl,useGraphNGContext:()=>ts.I,usePanelContext:()=>Ce.d2,useSplitter:()=>_n.h,variableSuggestionToCodeEditorSuggestion:()=>ue.O,withErrorBoundary:()=>Wn.Xc});var t=e(90090),n=e(91634),r=e(24169),s=e(11206),o=e(99091),m=e(74716),l=e(56286),i=e(14578),c=e(29158),u=e(82702),f=e(91605),d=e(56034),E=e(95868),h=e(13840),y=e(60782),a=e(17464),v=e(40276),g=e(60734),b=e(10534),P=e(3988),C=e(32012),D=e(32982),T=e(39558),M=e(57514),O=e(83598),S=e(99128),p=e(70104),x=e(41670),A=e(69529),R=e(2056),B=e(42734),U=e(11134),F=e(15666),K=e(3799),w=e(66070),L=e(20333),V=e(15648),N=e(56181),z=e(98239),J=e(63383),G=e(33552),H=e(48840),q=e(79924),le=e(28270),me=e(19384),k=e(78369),ee=e(64149),X=e(92174),j=e(96374),ne=e(20084),te=e(32372),oe=e(85828),ie=e(19716),ue=e(99544),be=e(37390),ge=e(29473),re=e(25897),ye=e(95246),Be=e(71678),ve=e(95247),Me=e(67570),ke=e(77093),Se=e(14746),We=e(63021),De=e(40675),pe=e(90685),Ne=e(40980),Le=e(53402),He=e(44522),je=e(37494),at=e(5926),Ye=e(95164),$e=e(97696),xe=e(75128),Fe=e(69503),Ee=e(3139),se=e(12509),ae=e(91052),fe=e(89963),Ce=e(79041),Re=e(67266),Oe=e(29995),ze=e(55726),Xe=e(34375),Ze=e(42418),et=e(84656),nt=e(82762),lt=e(57418),rt=e(14689),ut=e(79961),Et=e(61458),Ct=e(8866),Ut=e(37713),Gt=e(76442),Wt=e(28122),ot=e(38138),Tt=e(59093),Pn=e(64539),ft=e(51686),Mt=e(64919),_t=e(64078),nn=e(59796),dn=e(94536),en=e(37166),Xt=e(86460),En=e(24022),Vn=e(44533),Wn=e(66602),na=e(52446),Bt=e(91409),ln=e(11184),mn=e(19849),Dn=e(17081),hn=e(95180),Fn=e(28623),wn=e(62930),Hn=e(31511),An=e(72960),In=e(38401),kn=e(83684),Vt=e(57752),zt=e(13102),kt=e(64765),rn=e(87978),yn=e(77014),gn=e(47097),Rn=e(51253),Kt=e(87266),mt=e(16504),pt=e(55852),Qt=e(19727),on=e(27746),pn=e(15068),fn=e(51986),zn=e(84349),aa=e(50720),Zn=e(72109),jn=e(94753),ga=e(90613),Ra=e(67061),_a=e(71259),Za=e(68402),ms=e(60029),rs=e(88575),Ja=e(17408),Ns=e(84167),ls=e(72093),cs=e(14186),ds=e(63056),ps=e(76892),Vr=e(39268),ur=e(95984),ks=e(23731),ws=e(88323),Yr=e(88824),Os=e(62883),Es=e.n(Os),us={};for(const _o in Os)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","EmptyState","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Space","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","getDragStyles","useSplitter","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(_o)<0&&(us[_o]=()=>Os[_o]);e.d(I,us);var tr=e(66864),Ts=e(39938),Jr=e(94354),Bo=e(5173),nr=e(10354),io=e(51440),Eo=e(67647),Ko=e(49718),$o=e(7968),br=e(15292),_r=e(10880),lo=e(21744),Vo=e(73546),co=e(92887),Xr=e(54230),Zr=e(5308),zr=e(10860),yo=e(81507),qr=e(9286),Pr=e(9261),uo=e(83122),Ws=e(98624),xt=e(99635),wt=e(12942),vn=e(38894),un=e(25994),Mn=e(69144),_n=e(21633),Jn=e(52198),pa=e(52622),Da=e(51336),Ha=e(30501),es=e(81297),Ba=e(24182),Fa=e(96747),Is=e(66737),Hs=e(52811),Bs=e(88895),ar=e(54438),eo=e(52494),Rs=e(48747),Do=e(5484),Nr=e(33083),ja=e(65036),bs=e(99755),wr=e(18262),ts=e(16998),to=e(65575);const mo={SecretFormField:l.L,FormField:t.z,Select:o.l6,AsyncSelect:o.DW,IndicatorsContainer:r.s,NoOptionsMessage:s.l,Input:n.p,Switch:m.d}},31511:(Y,I,e)=>{"use strict";e.d(I,{A:()=>o});var t=e(32196),n=e(96540),r=e(66588),s=e(40845);function o(l){const{visible:i,children:c,duration:u=250}=l,f=(0,s.of)(m,u);return n.createElement(r.A,{in:i,mountOnEnter:!0,unmountOnExit:!0,timeout:u,classNames:f},c)}const m=(l,i)=>({enter:(0,t.css)({label:"enter",opacity:0}),enterActive:(0,t.css)({label:"enterActive",opacity:1,transition:`opacity ${i}ms ease-out`}),exit:(0,t.css)({label:"exit",opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,transition:`opacity ${i}ms ease-out`})})},72960:(Y,I,e)=>{"use strict";e.d(I,{n:()=>o});var t=e(32196),n=e(96540),r=e(66588),s=e(40845);function o(l){const{visible:i,children:c,duration:u=250,horizontal:f,size:d}=l,E=(0,s.of)(m,u,f?"width":"height",d);return n.createElement(r.A,{in:i,mountOnEnter:!0,unmountOnExit:!0,timeout:u,classNames:E},c)}const m=(l,i,c,u)=>({enter:(0,t.css)({label:"enter",[`${c}`]:0,opacity:0}),enterActive:(0,t.css)({label:"enterActive",[`${c}`]:`${u}px`,opacity:1,transition:`opacity ${i}ms ease-out, ${c} ${i}ms ease-out`}),exit:(0,t.css)({label:"exit",[`${c}`]:`${u}px`,opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,[`${c}`]:0,transition:`opacity ${i}ms ease-out, ${c} ${i}ms ease-out`})})},81297:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>l});var t=e(96540),n=e(36613),r=e(16895);function s(i,c){return c.width===i.width&&c.height===i.height}function o(i,c){return c.data===i.data}function m(i,c){return c.config===i.config}class l extends t.Component{constructor(c){super(c),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:c,height:u,plotRef:f}=this.props;if(this.state.plot?.destroy(),c===0&&u===0)return;this.props.config.addHook("setSize",h=>{h.over});const d={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,r.uY)("UPlot",!1,"Reinitializing plot",d);const E=new n.A(d,this.props.data,this.plotContainer.current);f&&f(E),this.setState({plot:E})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(c){let{plot:u}=this.state;s(c,this.props)?m(c,this.props)?o(c,this.props)||u?.setData(this.props.data):this.reinitPlot():u?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},24182:(Y,I,e)=>{"use strict";e.d(I,{$:()=>d,t:()=>f});var t=e(96540),n=e(28240),r=e(8066),s=e(75059),o=e(57875),m=e(52622),l=e(40845),i=e(67266),c=e(55726);const u=E=>E==null?"-":E.toFixed(1);function f(E,h){return E.getSeries().some(y=>{const a=y.props.dataFrameFieldIndex;if(!a)return!1;const v=h[a.frameIndex]?.fields[a.fieldIndex];return!(!v||v.config.custom?.hideFrom?.legend)})}const d=t.memo(({data:E,config:h,placement:y,calcs:a,displayMode:v,...g})=>{const b=(0,l.$j)(),P=h.getSeries().map(C=>{const D=C.props,T=D.dataFrameFieldIndex,M=h.getAxisPlacement(C.props.scaleKey);if(!T)return;const O=E[T.frameIndex]?.fields[T.fieldIndex];if(!O||O.config.custom?.hideFrom?.legend)return;const S=(0,n.Ct)(O,E[T.frameIndex],E),x=(0,r.lz)(O,b).color;return{disabled:!(D.show??!0),fieldIndex:T,color:x,label:S,yAxis:M===m.vM.Left||M===m.vM.Bottom?1:2,getDisplayValues:()=>{if(!a?.length)return[];const A=O.display??u;let R=null;const B=(0,s.Nw)({field:O,reducers:a});return a.map(U=>{const F=s.AS.get(U);let K=A;return F.id===s.gy.diffperc&&(K=(0,o.J)({field:{...O,config:{...O.config,unit:"percentunit"}},theme:b})),(F.id===s.gy.count||F.id===s.gy.changeCount||F.id===s.gy.distinctCount)&&(R||(R=(0,o.J)({field:{...O,config:{...O.config,unit:"none"}},theme:b})),K=R),{...K(B[U]),title:F.name,description:F.description}})},getItemKey:()=>`${S}-${T.frameIndex}-${T.fieldIndex}`}}).filter(C=>C!==void 0);return t.createElement(i.KU.Legend,{placement:y,...g},t.createElement(c.t,{placement:y,items:P,displayMode:v,sortBy:g.sortBy,sortDesc:g.sortDesc,isSortable:!0}))});d.displayName="PlotLegend"},52198:(Y,I,e)=>{"use strict";e.d(I,{t:()=>n});var t=e(52622);const n={drawStyle:[{label:"Lines",value:t.GR.Line},{label:"Bars",value:t.GR.Bars},{label:"Points",value:t.GR.Points}],lineInterpolation:[{description:"Linear",value:t.dx.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.dx.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.dx.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.dx.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.Nj.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.Nj.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.Nj.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.yL.Auto,description:"Show points when the density is low"},{label:"Always",value:t.yL.Always},{label:"Never",value:t.yL.Never}],axisPlacement:[{label:"Auto",value:t.vM.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.vM.Left},{label:"Right",value:t.vM.Right},{label:"Hidden",value:t.vM.Hidden}],fillGradient:[{label:"None",value:t.on.None},{label:"Opacity",value:t.on.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.on.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.on.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.gs.None},{label:"Normal",value:t.gs.Normal},{label:"100%",value:t.gs.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.Ly.Off},{label:"As lines",value:t.Ly.Line},{label:"As lines (dashed)",value:t.Ly.Dashed},{label:"As filled regions",value:t.Ly.Area},{label:"As filled regions and lines",value:t.Ly.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.Ly.DashedAndArea}]}},30501:(Y,I,e)=>{"use strict";e.d(I,{Zj:()=>d,pi:()=>c,zH:()=>f});var t=e(83195),n=e(97706),r=e(42994),s=e(72724),o=e(52622),m=e(29413),l=e(52811),i=e(93060);const c=12,u=8;class f extends l.R{merge(a){this.props.size=(0,i.Y)("max",this.props.size,a.size),this.props.label||(this.props.label=a.label),this.props.placement===o.vM.Auto&&(this.props.placement=a.placement)}calculateSpace(a,v,g,b,P){const C=a.axes[v],D=a.scales[C.scale];if(C.side!==2||!D)return 30;const T=40;if(D.time){const M=P/T,O=(b-g)/M,S=E(a,[g],v,T,O);return(0,m.kD)(S[0],c).width+18}return T}calculateAxisSize(a,v,g){const b=a.axes[g];let P=b.ticks.size;if(b.side===2)P+=b.gap+c;else if(v?.length){let C=v.reduce((T,M)=>Math.max(T,(0,m.kD)(M,c).width),0);const D=Math.min(a.width*.4,C);P+=b.gap+b.labelGap+D}return Math.ceil(P)}getConfig(){let{scaleKey:a,label:v,show:g=!0,placement:b=o.vM.Auto,grid:P={show:!0},ticks:C,space:D,filter:T,gap:M=5,formatValue:O,splits:S,values:p,incrs:x,isTime:A,timeZone:R,theme:B,tickLabelRotation:U,size:F,color:K,border:w,decimals:L,distr:V=o.L4.Linear}=this.props;const N=`${c}px ${B.typography.fontFamily}`,z=B.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.j9)(a)&&(S=[0,1]),L===0&&V===o.L4.Linear&&(T=(G,H)=>H.map(q=>Number.isInteger(q)?q:null));let J={scale:a,show:g,stroke:K??B.colors.text.primary,side:h(b),font:N,size:F??((G,H,q)=>this.calculateAxisSize(G,H,q)),rotate:U,gap:M,labelGap:0,grid:{show:P.show,stroke:z,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:w?.show?K??B.colors.text.primary:z,width:1/devicePixelRatio,size:4},C),splits:S,values:p,space:D??((G,H,q,le,me)=>this.calculateSpace(G,H,q,le,me)),filter:T,incrs:x};return w?.show&&(J.border={stroke:K??B.colors.text.primary,width:1/devicePixelRatio,...w}),v!=null&&v.length>0&&(J.label=v,J.labelSize=c+u,J.labelFont=N,J.labelGap=u),p?J.values=p:A?J.values=E:O&&(J.values=(G,H,q,le,me)=>{let k=(0,n.E)((0,n.h)(me,6));return H.map(ee=>O(ee,k>0?k:void 0))}),J.timeZone=R,J}}const d={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function E(y,a,v,g,b){const P=y.axes[v].timeZone,C=y.scales.x,D=(C?.max??0)-(C?.min??0),T=Math.round(d.year/d.day)*d.day,M=Math.round(b/d.day)*d.day;let O=r.WC.interval.year;return b<d.second?O=r.WC.interval.millisecond:b<=d.minute?O=r.WC.interval.second:D<=d.day?O=r.WC.interval.minute:b<=d.day?O=r.WC.interval.hour:D<d.year?O=r.WC.interval.day:M===T?O=r.WC.interval.year:b<=d.year&&(O=r.WC.interval.month),a.map(S=>S==null?"":(0,s.LE)(S,{format:O,timeZone:P}))}function h(y){switch(y){case o.vM.Top:return 0;case o.vM.Right:return 1;case o.vM.Bottom:return 2;case o.vM.Left:}return 3}},51336:(Y,I,e)=>{"use strict";e.d(I,{e:()=>P});var t=e(2543),n=e(36613),r=e(43127),s=e(91410),o=e(52622),m=e(16895),l=e(30501),i=e(93060),c=e(24293),u=e(23596),f=e(52811),d=e(74863);class E extends f.R{getConfig(){const{facets:D,drawStyle:T,pathBuilder:M,pointsBuilder:O,pointsFilter:S,lineInterpolation:p,lineWidth:x,lineStyle:A,barAlignment:R,barWidthFactor:B,barMaxWidth:U,showPoints:F,pointSize:K,scaleKey:w,pxAlign:L,spanNulls:V,show:N=!0}=this.props;let z={},J=this.getLineColor();z.stroke=J,z.width=x,A&&A.fill!=="solid"&&(A.fill==="dot"&&(z.cap="round"),z.dash=A.dash??[10,10]),M!=null?z.paths=M:T===o.GR.Points?z.paths=()=>null:T!=null&&(z.paths=(q,le,me,k)=>y(T,p,R,B,U)(q,le,me,k));const G=typeof J=="string"?J:(q,le)=>q.series[le]._stroke,H={points:{stroke:G,fill:G,size:!K||K<x?void 0:K,filter:S}};return O!=null?H.points.show=O:T===o.GR.Points?H.points.show=!0:F===o.yL.Auto?T===o.GR.Bars&&(H.points.show=!1):F===o.yL.Never?H.points.show=!1:F===o.yL.Always&&(H.points.show=!0),{scale:w,facets:D,spanGaps:typeof V=="number"?!1:V,value:()=>"",pxAlign:L,show:N,fill:this.getFill(),...z,...H}}getLineColor(){const{lineColor:D,gradientMode:T,colorMode:M,thresholds:O,theme:S,hardMin:p,hardMax:x,softMin:A,softMax:R,dynamicSeriesColor:B}=this.props;return T===o.on.None&&B?(U,F)=>B(F)??D??c.F:T===o.on.Scheme&&M?.id!==c.Y.Fixed?(0,d.pl)(1,S,M,O,p,x,A,R):T===o.on.Hue?(0,d.B5)(D??c.F,1,S):D??c.F}getFill(){const{lineColor:D,fillColor:T,gradientMode:M,fillOpacity:O,colorMode:S,thresholds:p,theme:x,hardMin:A,hardMax:R,softMin:B,softMax:U,dynamicSeriesColor:F}=this.props;if(T)return T;const K=M??o.on.None,w=(O??0)/100;if(K===o.on.None&&F&&w>0)return(L,V)=>{let N=L.series[V]._stroke;return u.alpha(N??"",w)};switch(K){case o.on.Opacity:return(0,d.WO)(T??D,w);case o.on.Hue:return(0,d.B5)(T??D,w,x);case o.on.Scheme:if(S?.id!==c.Y.Fixed)return(0,d.pl)(w,x,S,p,A,R,B,U);default:if(w>0)return u.alpha(D??"",w)}}}let h;function y(C,D,T=o.Nj.Center,M=.6,O=200){const S=n.A.paths;if(h||(h={linear:S.linear(),smooth:S.spline(),stepBefore:S.stepped({align:-1}),stepAfter:S.stepped({align:1})}),C===o.GR.Bars){let p=`bars|${T}|${M}|${O}`;return h[p]||(h[p]=S.bars({size:[M,O],align:T})),h[p]}else if(C===o.GR.Line){if(D===o.dx.StepBefore)return h.stepBefore;if(D===o.dx.StepAfter)return h.stepAfter;if(D===o.dx.Smooth)return h.smooth}return h.linear}var a=e(84140),v=e(50082);function g(C){const D=C.config.mode===o.Ly.Dashed||C.config.mode===o.Ly.DashedAndArea?[10,10]:null;function T(F,K,w,L){let V=F.ctx,N=0;for(let z=0;z<w.length;z++)if(w[z].color==="transparent"){N=z;break}V.lineWidth=2,D&&V.setLineDash(D);for(let z=1;z<w.length;z++){const J=w[z];let G;N>=z&&z>0?G=(0,a.A)(L.visualization.getColorByName(w[z-1].color)):G=(0,a.A)(L.visualization.getColorByName(J.color)),G.getAlpha()===1&&G.setAlpha(.7);let H=Math.round(F.bbox.left),q=Math.round(F.valToPos(J.value,K,!0)),le=Math.round(F.bbox.left+F.bbox.width),me=Math.round(F.valToPos(J.value,K,!0));V.beginPath(),V.moveTo(H,q),V.lineTo(le,me),V.strokeStyle=G.toString(),V.stroke()}}function M(F,K,w,L){let V=F.ctx,N=(0,d.Z8)(F,K,w.map(z=>{let J=(0,a.A)(L.visualization.getColorByName(z.color));return J.getAlpha()===1&&J.setAlpha(.15),[z.value,J.toString()]}),!0);V.fillStyle=N,V.fillRect(F.bbox.left,F.bbox.top,F.bbox.width,F.bbox.height)}const{scaleKey:O,thresholds:S,theme:p,config:x,hardMin:A,hardMax:R,softMin:B,softMax:U}=C;return F=>{const K=F.ctx,{min:w,max:L}=F.scales.x,{min:V,max:N}=F.scales[O];if(w==null||L==null||V==null||N==null)return;let{steps:z,mode:J}=S;if(J===v.O.Percentage){let[G,H]=(0,d.EJ)(F,O,A,R,B,U),q=H-G;z=z.map(le=>({...le,value:G+q*(le.value/100)}))}switch(K.save(),x.mode){case o.Ly.Line:case o.Ly.Dashed:T(F,O,z,p);break;case o.Ly.Area:M(F,O,z,p);break;case o.Ly.LineAndArea:case o.Ly.DashedAndArea:M(F,O,z,p),T(F,O,z,p)}K.restore()}}const b={drag:{setScale:!1},points:{size:(C,D)=>C.series[D].points.size*2,width:(C,D,T)=>T/4},focus:{prox:30}};class P{constructor(D=r.lE){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=T=>{let M=new Date(T);return this.tz?n.A.tzDate(M,this.tz):M},this.tz=(0,s.QZ)(D,Date.now())?.ianaName}addHook(D,T){(0,m.uY)("UPlotConfigBuilder",!1,"addHook",D),this.hooks[D]||(this.hooks[D]=[]),this.hooks[D].push(T)}addThresholds(D){this.thresholds[D.scaleKey]||(this.thresholds[D.scaleKey]=D,this.addHook("drawClear",g(D)))}addAxis(D){D.placement=D.placement??o.vM.Auto,D.grid=D.grid??{};let T=D.scaleKey;if(T==="x"&&(T+=D.timeZone??""),this.axes[T]){this.axes[T].merge(D);return}D.placement===o.vM.Auto&&(D.placement=this.hasLeftAxis?o.vM.Right:o.vM.Left),D.placement===o.vM.Left&&(this.hasLeftAxis=!0),D.placement===o.vM.Hidden&&(D.grid.show=!1,D.size=0),this.axes[T]=new l.zH(D)}getAxisPlacement(D){return this.axes[D]?.props.placement??o.vM.Left}setCursor(D){this.cursor=(0,t.merge)({},this.cursor,D)}setMode(D){this.mode=D}setSelect(D){this.select=D}addSeries(D){this.series.push(new E(D))}getSeries(){return this.series}addScale(D){const T=this.scales.find(M=>M.props.scaleKey===D.scaleKey);if(T){T.merge(D);return}this.scales.push(new i.G(D))}addBand(D){this.bands.push(D)}setStackingGroups(D){this.stackingGroups=D}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(D){this.tooltipInterpolator=D}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(D){this.prepData=T=>(this.frames=T,D(T,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(D){this.padding=D}getConfig(){if(this.cachedConfig)return this.cachedConfig;const D={...m.NN,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};D.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(M=>M.getConfig()),D.series=[...D.series,...this.series.map(M=>M.getConfig())],D.scales=this.scales.reduce((M,O)=>({...M,...O.getConfig()}),{}),D.hooks=this.hooks,D.select=this.select;const T=(M="")=>(O,S)=>{let p=O.series[S].points._stroke;if(typeof p!="string"){let x=this.frames[0].fields[S];p=x.display(x.values[O.cursor.idxs[S]]).color}return p+M};return D.cursor=(0,t.merge)({},b,{points:{stroke:T("80"),fill:T()}},this.cursor),D.tzDate=this.tzDate,Array.isArray(this.padding)&&(D.padding=this.padding),this.stackingGroups.forEach(M=>{(0,m.Tz)(M).forEach(O=>{this.addBand(O)})}),this.bands.length&&(D.bands=this.bands),this.cachedConfig=D,D}ensureNonOverlappingAxes(D){const T=D.find(S=>S.props.scaleKey==="x"),M=D.filter(S=>S.props.grid?.show===void 0),O=M.findIndex(S=>S.props.placement===o.vM.Left||S.props.placement===o.vM.Right||S.props.placement===o.vM.Bottom&&S!==T);for(let S=0;S<M.length;S++)M[S]===T||S===O?M[S].props.grid.show=!0:M[S].props.grid.show=!1;return D}}},93060:(Y,I,e)=>{"use strict";e.d(I,{G:()=>m,Y:()=>l});var t=e(36613),n=e(77678),r=e(83195),s=e(52622),o=e(52811);class m extends o.R{merge(c){this.props.min=l("min",this.props.min,c.min),this.props.max=l("max",this.props.max,c.max)}getConfig(){let{isTime:c,scaleKey:u,min:f,max:d,softMin:E,softMax:h,range:y,direction:a,orientation:v,centeredZero:g,decimals:b}=this.props;const P=this.props.distribution,C=c?{}:{distr:P===s.L4.Symlog?4:P===s.L4.Log?3:P===s.L4.Ordinal?2:1,log:P===s.L4.Log||P===s.L4.Symlog?this.props.log??2:void 0,asinh:P===s.L4.Symlog?this.props.linearThreshold??1:void 0};if(P===s.L4.Log){let R=this.props.log,B=R===2?Math.log2:Math.log10;f!=null&&(f<=0?f=null:f=R**Math.floor(B(f))),d!=null&&(d<=0?d=null:d=R**Math.ceil(B(d))),E!=null&&(E<=0?E=null:E=R**Math.floor(B(E))),h!=null&&(h<=0?h=null:h=R**Math.ceil(B(h)))}let D=E==null?3:1,T=h==null?3:1;const M={min:{pad:.1,hard:f??-1/0,soft:E||0,mode:D},max:{pad:.1,hard:d??1/0,soft:h||0,mode:T}};let O=E==null&&f!=null,S=h==null&&d!=null,p=O&&S;const x=(R,B,U,F)=>{const K=R.scales[F];let w=[B,U];if(F==="x"&&!c&&P===s.L4.Linear||!p&&B==null&&U==null)return w;let L=K.log??10;if(K.distr===1||K.distr===2||K.distr===4){if(g){let V=Math.abs(B),N=Math.abs(U),z=Math.max(V,N);z===0&&(z=80),B=-z,U=z}K.distr===4?w=t.A.rangeAsinh(B,U,L,!0):w=t.A.rangeNum(O?f:B,S?d:U,M)}else K.distr===3&&(w=t.A.rangeLog(f??B,d??U,L,!0));if(b===0)if(K.distr===1||K.distr===2)w[0]=(0,n.rs)(w[0],1),w[1]=(0,n.Uh)(w[1],1);else if(K.distr===3){let V=K.log===2?Math.log2:Math.log10;if(w[0]<=1)w[0]=1;else{let z=Math.floor(V(w[0]));w[0]=L**z}let N=Math.ceil(V(w[1]));w[1]=L**N,w[0]===w[1]&&(w[1]*=L)}else K.distr===4&&(w[0]=(0,n.rs)(w[0],1),w[1]=(0,n.Uh)(w[1],1));return(K.distr===1||K.distr===4)&&(O&&(w[0]=f),S&&(w[1]=d)),w[0]>=w[1]&&(w[0]=K.distr===3?1:0,w[1]=100),w};let A=!c&&!p;return(0,r.j9)(u)&&(A=!1,y=[0,1]),{[u]:{time:c,auto:A,range:y??x,dir:a,ori:v,...C}}}}function l(i,c,u){const f=c!=null,d=u!=null;return f?d?i==="min"?c<u?c:u:c>u?c:u:c:u}},74863:(Y,I,e)=>{"use strict";e.d(I,{B5:()=>c,EJ:()=>E,WO:()=>i,Z8:()=>f,pl:()=>y});var t=e(84140),n=e(23596),r=e(24293),s=e(50082),o=e(52622),m=e(29413);function l(a,v,g){let b=0,P=0,C=0,D=0;return a===3?(P=v.top,D=v.top+v.height):a===2?(b=v.left+v.width,C=v.left):a===1?(P=v.top+v.height,D=v.top):a===0&&(b=v.left,C=v.left+v.width),g.createLinearGradient(b,P,C,D)}function i(a,v){return(g,b)=>{const P=(0,m.Yc)(),C=l(g.scales.x.ori===o.Lt.Horizontal?3:2,g.bbox,P);return C.addColorStop(0,n.alpha(a,v)),C.addColorStop(1,n.alpha(a,0)),C}}function c(a,v,g){return(b,P)=>{const C=(0,m.Yc)(),D=l(b.scales.x.ori===o.Lt.Horizontal?3:2,b.bbox,C),T=(0,t.A)(a).spin(-25).darken(5),M=(0,t.A)(a).saturate(20).spin(20).brighten(10);return g.isDark?(D.addColorStop(0,M.lighten(10).setAlpha(v).toString()),D.addColorStop(1,T.darken(10).setAlpha(v).toString())):(D.addColorStop(0,M.lighten(10).setAlpha(v).toString()),D.addColorStop(1,T.setAlpha(v).toString())),D}}var u=(a=>(a[a.Right=0]="Right",a[a.Up=1]="Up",a[a.Left=2]="Left",a[a.Down=3]="Down",a))(u||{});function f(a,v,g,b=!1){let P=a.scales[v],C=null,D=null;for(let w=0;w<g.length;w++){let L=g[w][0];if((L<=P.min||C==null)&&(C=w),D=w,L>=P.max)break}if(C===D)return g[C][1];let T=g[C][0],M=g[D][0];T===-1/0&&(T=P.min),M===1/0&&(M=P.max);let O=Math.round(a.valToPos(T,v,!0)),S=Math.round(a.valToPos(M,v,!0)),p=O-S;if(p===0)return g[D][1];let x,A,R,B;a.scales.x.ori===o.Lt.Horizontal?(x=R=0,A=O,B=S):(A=B=0,x=O,R=S);let F=(0,m.Yc)().createLinearGradient(x,A,R,B),K;for(let w=C;w<=D;w++){let L=g[w],V=w===C?O:w===D?S:Math.round(a.valToPos(L[0],v,!0)),N=(O-V)/p;b&&w>C&&F.addColorStop(N,K),F.addColorStop(N,K=L[1])}return F}function d(a,v){let g=a.scales[v],b=1/0,P=-1/0;return a.series.forEach((C,D)=>{if(C.show&&C.scale===v)if(C.min==null){let T=a.data[D];for(let M=0;M<T.length;M++)T[M]!=null&&(b=Math.min(b,T[M]),P=Math.max(P,T[M]))}else b=Math.min(b,C.min),P=Math.max(P,C.max)}),P===b&&(b=g.min,P=g.max),[b,P]}function E(a,v,g,b,P,C){let D=g??P??null,T=b??C??null;if(D==null||T==null){let[M,O]=d(a,v);D=D??M??0,T=T??O??100}return[D,T]}function h(a){return a==="transparent"||a[0]==="#"&&a.slice(-2)==="00"}function y(a,v,g,b,P,C,D,T){if(!g)throw Error("Missing colorMode required for color scheme gradients");if(!b)throw Error("Missing thresholds required for color scheme gradients");return(M,O)=>{let S=M.series[O].scale,p="";if(g.id===r.Y.Thresholds)if(b.mode===s.O.Absolute){const x=b.steps.map(A=>[A.value,h(A.color)?"#0000":n.alpha(v.visualization.getColorByName(A.color),a)]);p=f(M,S,x,!0)}else{const[x,A]=E(M,S,P,C,D,T),R=A-x,B=b.steps.map(U=>[x+R*(U.value/100),n.alpha(v.visualization.getColorByName(U.color),a)]);p=f(M,S,B,!0)}else if(g.getColors){const x=g.getColors(v),[A,R]=E(M,S,P,C,D,T),B=R-A,U=x.map((F,K)=>[A+B*(K/(x.length-1)),n.alpha(v.visualization.getColorByName(F),a)]);p=f(M,S,U,!1)}return p}}},78226:(Y,I,e)=>{"use strict";e.d(I,{a:()=>o});var t=e(96540),n=e(1604),r=e(6967),s=e(97620);function o({id:m,events:l,renderEventMarker:i,mapEventToXYCoords:c,config:u}){const f=(0,t.useRef)(),[d,E]=(0,t.useState)(0),h=(0,n.A)();(0,t.useLayoutEffect)(()=>{u.addHook("init",a=>{f.current=a}),u.addHook("draw",()=>{h()&&E(a=>a+1)})},[u,E]);const y=(0,t.useMemo)(()=>{const a=[];if(!f.current||l.length===0)return a;for(let v=0;v<l.length;v++){const g=l[v];for(let b=0;b<g.length;b++){const P=c(g,{fieldIndex:b,frameIndex:v});P&&a.push(t.createElement(r.p,{...P,key:`${m}-marker-${v}-${b}`},i(g,{fieldIndex:b,frameIndex:v})))}}return t.createElement(t.Fragment,null,a)},[l,i,d]);return f.current?t.createElement(s._,{left:f.current.bbox.left/window.devicePixelRatio,top:f.current.bbox.top/window.devicePixelRatio},y):null}},6967:(Y,I,e)=>{"use strict";e.d(I,{p:()=>n});var t=e(96540);const n=({x:r,y:s,children:o})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${r}px`}},o)},97620:(Y,I,e)=>{"use strict";e.d(I,{_:()=>r});var t=e(32196),n=e(96540);const r=({children:s,left:o,top:m})=>{const l=(0,n.useMemo)(()=>(0,t.css)({position:"absolute",overflow:"visible",left:`${o}px`,top:`${m}px`}),[o,m]);return n.createElement("div",{className:l},s)}},96747:(Y,I,e)=>{"use strict";e.d(I,{_X:()=>r._,a:()=>t.a,pH:()=>n.p});var t=e(78226),n=e(6967),r=e(97620)},55129:(Y,I,e)=>{"use strict";e.d(I,{M:()=>r});var t=e(52622),n=e(52811);function r(o,m){const l="na",i=`${o.min!==void 0?o.min:l}-${o.max!==void 0?o.max:l}`,c=`${o.custom?.axisSoftMin!==void 0?o.custom.axisSoftMin:l}-${o.custom?.axisSoftMax!==void 0?o.custom.axisSoftMax:l}`,u=`${o.custom?.axisPlacement!==void 0?o.custom?.axisPlacement:t.vM.Auto}`,f=o.unit??n.s,d=o.custom?.scaleDistribution?s(o.custom.scaleDistribution):t.L4.Linear,E=o.custom?.axisLabel?o.custom.axisLabel:l;return`${f}/${i}/${c}/${u}/${d}/${E}/${m}`}function s(o){return o.type===t.L4.Log?`${o.type}${o.log}`:o.type}},68268:(Y,I,e)=>{"use strict";e.d(I,{K:()=>i});var t=e(2543),n=e.n(t),r=e(96540),s=e(64423),o=e(99165),m=e(69129),l=e(26272);const i=({config:c,eventBus:u,sync:f,frame:d})=>{const E=(0,r.useRef)(d);return E.current=d,(0,r.useLayoutEffect)(()=>{let h=null;const y={point:{time:null},data:E.current};c.addHook("init",T=>{h=T});let a=null;c.addHook("setSeries",(T,M)=>{a=M}),c.addHook("setLegend",()=>{if(!(h.cursor.event==null)&&f()){let M=h.cursor.idxs.find(O=>O!=null);if(M==null)D();else{let O=M,S=a,p=h.data[0]??h.data[1][0];y.point.time=p[O],y.rowIndex=O??void 0,y.columnIndex=S??void 0,y.data=E.current;let x=h.cursor.top;y.point.panelRelY=x===0?.001:x>0?x/h.rect.height:1,C()}}});function v(T){const M=T.payload?.point?.time;if(M){const O=h.valToPos(M,"x");h.setCursor({left:O,top:h.rect.height/2})}}const g=new s.yU,b=new m.b_(y).setTags(["uplot"]),P=new m.ql().setTags(["uplot"]);let C=(0,t.throttle)(()=>{u.publish(b)},100),D=(0,t.throttle)(()=>{u.publish(P)},100);return g.add(u.getStream(m.b_).subscribe({next:T=>{u===T.origin||T.tags?.has("uplot")||v(T)}})),g.add(u.getStream(l.kb).subscribe({next:T=>v(T)})),g.add(u.getStream(m.ql).pipe((0,o.c)(50)).subscribe({next:T=>{u===T.origin||T.tags?.has("uplot")||h.cursor._lock||h.setCursor({left:-10,top:-10})}})),()=>{g.unsubscribe()}},[c]),null}},23117:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>i});var t=e(2543),n=e.n(t),r=e(96540);const s=.1,o=2,m=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),l=c=>{let u=c.root.closest("[tabindex]"),f=new Set,d=null,E=null;if(!u)return;const h=(C,D)=>{const{cursor:T}=c;if(T.left===void 0||T.top===void 0)return;const{width:M,height:O}=c.over.style,[S,p]=[Math.floor(parseFloat(M)),Math.floor(parseFloat(O))];c.setCursor({left:(0,t.clamp)(T.left+C,0,S),top:(0,t.clamp)(T.top+D,0,p)})},y=C=>{if(f.size===0||!c){E=null;return}const M=(C-(E??C))*s;let O=0,S=0;f.has("ArrowUp")&&(S-=M),f.has("ArrowDown")&&(S+=M),f.has("ArrowLeft")&&(O-=M),f.has("ArrowRight")&&(O+=M),f.has("Shift")&&(O*=o,S*=o),h(O,S);const{cursor:p}=c;if(f.has(" ")&&p){const x=Number(c.over.style.height.slice(0,-2));c.setSelect({left:p.left<d?p.left:d,top:0,width:Math.abs(p.left-(d??p.left)),height:x},!1)}E=C,window.requestAnimationFrame(y)},a=C=>{if(C.key==="Tab"){c.setCursor({left:-5,top:-5});return}if(!m.has(C.key))return;if(C.preventDefault(),C.stopPropagation(),!f.has(C.key)){const T=f.size===0;f.add(C.key),d=C.key===" "&&d===null?c.cursor.left:d,T&&window.requestAnimationFrame(y)}},v=C=>{m.has(C.key)&&(f.delete(C.key),C.key===" "&&(C.preventDefault(),C.stopPropagation(),c.setSelect(c.select),d=null))},g=()=>{if(!u?.matches(":focus-visible"))return;const C=parseFloat(c.over.style.width),D=parseFloat(c.over.style.height);c.setCursor({left:C/2,top:D/2})},b=()=>{E=null,d=null,f.clear(),c.setSelect({left:0,top:0,width:0,height:0},!1)};u.addEventListener("keydown",a),u.addEventListener("keyup",v),u.addEventListener("focus",g),u.addEventListener("blur",b);const P=()=>{u?.removeEventListener("keydown",a),u?.removeEventListener("keyup",v),u?.removeEventListener("focus",g),u?.removeEventListener("blur",b),u=null};(c.hooks.destroy??=[]).push(P)},i=({config:c})=>((0,r.useLayoutEffect)(()=>c.addHook("init",l),[c]),null)},16615:(Y,I,e)=>{"use strict";e.d(I,{T:()=>g,n:()=>P});var t=e(32196),n=e(96540),r=e(1604),s=e(94624),o=e(57875),m=e(24293),l=e(28240),i=e(83195),c=e(11261),u=e(14588),f=e(52622),d=e(40845),E=e(17464),h=e(3139),y=e(69503),a=e(16895);const v=10,g=({mode:D=f.$N.Single,sortOrder:T=f.xB.None,sync:M,timeZone:O,config:S,renderTooltip:p,...x})=>{const A=(0,n.useRef)(),R=(0,d.$j)(),[B,U]=(0,n.useState)(null),[F,K]=(0,n.useState)(null),[w,L]=(0,n.useState)([]),[V,N]=(0,n.useState)(null),[z,J]=(0,n.useState)(!1),G=(0,r.A)();let H=null;const q="TooltipPlugin",le=(0,d.of)(C);if((0,n.useEffect)(()=>{(0,a.uY)(q,!0,`Focused series: ${B}, focused point: ${F}`)},[F,B]),(0,n.useLayoutEffect)(()=>{let j;const ne=()=>{G()&&(J(!0),A.current?.root.classList.add("plot-active"))},te=()=>{G()&&(N(null),J(!1),A.current?.root.classList.remove("plot-active"))};S.addHook("syncRect",(ie,ue)=>j=ue),S.addHook("init",ie=>{A.current=ie,ie.over.addEventListener("mouseenter",ne),ie.over.addEventListener("mouseleave",te),H=ie.root.closest("[tabindex]"),H&&(H.addEventListener("focus",ne),H.addEventListener("blur",te)),M&&M()===s.y.Crosshair&&ie.root.classList.add("shared-crosshair")});const oe=S.getTooltipInterpolator();return oe?S.addHook("setCursor",ie=>{oe(U,K,ue=>{if(ue){N(null);return}if(!j)return;const{x:be,y:ge}=P(ie,j);be!==void 0&&ge!==void 0&&N({x:be,y:ge})},ie)}):(S.addHook("setLegend",ie=>{G()&&(K(ie.legend.idx),L(ie.legend.idxs.slice()))}),S.addHook("setCursor",ie=>{if(!j||!G())return;const{x:ue,y:be}=P(ie,j);N(ue!==void 0&&be!==void 0?{x:ue,y:be}:null)}),S.addHook("setSeries",(ie,ue)=>{G()&&U(ue)})),()=>{N(null),A.current&&(A.current.over.removeEventListener("mouseleave",te),A.current.over.removeEventListener("mouseenter",ne),H&&(H.removeEventListener("focus",ne),H.removeEventListener("blur",te)))}},[S,N,J,K,L]),F===null||!z&&M&&M()===s.y.Crosshair)return null;let me=x.data.fields[0];if(!me)return null;const k=me.display||(0,o.J)({field:me,timeZone:O,theme:R});let ee=null,X=k(me.values[F]).text;if(p)ee=p(x.data,B,F);else{if(D===f.$N.Single&&B!==null){const j=x.data.fields[B];if(!j)return null;const ne=w?.[B]??F;X=k(me.values[ne]).text;const oe=(j.display||(0,o.J)({field:j,timeZone:O,theme:R}))(j.values[ne]);ee=n.createElement(h.o,{series:[{color:oe.color||m.F,label:(0,l.Ct)(j,x.data,x.frames),value:oe?(0,i.cN)(oe):null}],timestamp:X})}if(D===f.$N.Multi){let j=[];const ne=x.data,te=ne.fields,oe=[];for(let ie=0;ie<te.length;ie++){const ue=ne.fields[ie];if(!ue||ue===me||ue.type===c.PU.time||ue.type!==c.PU.number||ue.config.custom?.hideFrom?.tooltip||ue.config.custom?.hideFrom?.viz)continue;const be=x.data.fields[ie].values[w[ie]],ge=ue.display(be);oe.push(be),j.push({color:ge.color||m.F,label:(0,l.Ct)(ue,ne,x.frames),value:ge?(0,i.cN)(ge):null,isActive:B===ie})}if(T!==f.xB.None){const ie=[...j],ue=u.sortValues(T);j.sort((be,ge)=>{const re=ie.indexOf(be),ye=ie.indexOf(ge);return ue(oe[re],oe[ye])})}ee=n.createElement(h.o,{series:j,timestamp:X})}}return n.createElement(E.ZL,{className:z?le.tooltipWrapper:void 0},ee&&V&&n.createElement(y.o,{position:{x:V.x,y:V.y},offset:{x:v,y:v}},ee))};function b({left:D,top:T},M){return D===void 0||T===void 0?!1:D<0||D>M.width||T<0||T>M.height}function P(D,T){let M,O;const S=D.cursor.left||0,p=D.cursor.top||0;if(b(D.cursor,T)){const x=D.posToIdx(S);if(p<0||p>T.height){let A=(0,a.sw)(D,x);A&&(O=T.top+A,S>=0&&S<=T.width&&(M=T.left+D.valToPos(D.data[0][D.posToIdx(S)],D.series[0].scale)))}}else M=T.left+S,O=T.top+p;return{x:M,y:O}}const C=D=>({tooltipWrapper:(0,t.css)({"z-index":D.zIndex.portal+1+" !important"})})},77455:(Y,I,e)=>{"use strict";e.d(I,{b3:()=>d,xl:()=>v});var t=e(32196),n=e(96540),r=e(40961),s=e(40845),o=e(17464),m=e(29158);const l=({onClick:b,"aria-label":P,style:C})=>{const D=(0,s.of)(i);return n.createElement(m.K,{"aria-label":P??"Close",className:D,name:"times",onClick:b,style:C})},i=b=>(0,t.css)({position:"absolute",margin:"0px",right:b.spacing(1),top:b.spacing(1.25)}),c=void 0,u=void 0,f=10;var d=(b=>(b[b.xOne=0]="xOne",b[b.xAll=1]="xAll",b[b.xyOne=2]="xyOne",b))(d||{});function E(b,P){return{...b,...P,style:{...b.style,...P.style}}}function h(){return{style:{transform:"",pointerEvents:"none"},isHovering:!1,isPinned:!1,contents:null,plot:null,dismiss:()=>{}}}const y=5,a=b=>b!=null&&!b.ctrlKey&&!b.metaKey,v=({config:b,hoverMode:P,render:C,clientZoom:D=!1,queryZoom:T,maxWidth:M,maxHeight:O,syncTooltip:S=()=>!1})=>{const p=(0,n.useRef)(null),x=(0,n.useRef)(null);x.current==null&&(x.current=(0,o.gF)());const[{plot:A,isHovering:R,isPinned:B,contents:U,style:F,dismiss:K},w]=(0,n.useReducer)(E,null,h),L=(0,n.useRef)();M=B?c:M??c,O??=u;const V=(0,s.of)(g,M,O),N=(0,n.useRef)(C);return N.current=C,(0,n.useLayoutEffect)(()=>{L.current={width:0,height:0,observer:new ResizeObserver(pe=>{let Ne=L.current;for(const Le of pe)Le.borderBoxSize?.length>0?(Ne.width=Le.borderBoxSize[0].inlineSize,Ne.height=Le.borderBoxSize[0].blockSize):(Ne.width=Le.contentRect.width,Ne.height=Le.contentRect.height)})};let z=!1,J=!1,G=A,H=R,q=!1,le=B,me=F,k=!1;const ee=()=>{ie?H=k&&q&&S():H=oe!=null||P===1&&q};let X=0,j=0,ne=null,te=A?.cursor.idxs.slice(),oe=null,ie=!1,ue=!1,be=!1;const ge=(pe=!1)=>{ue||(H?queueMicrotask(ye):setTimeout(ye,100),ue=!0),pe&&(be=!0)},re=pe=>{p.current.contains(pe.target)||Be()},ye=()=>{ue=!1,be&&(me={pointerEvents:le?"all":"none"},G.cursor._lock=le,le?(document.addEventListener("mousedown",re,!0),document.addEventListener("keydown",re,!0)):(document.removeEventListener("mousedown",re,!0),document.removeEventListener("keydown",re,!0)),be=!1);let pe={style:me,isPinned:le,isHovering:H,contents:H||ne!=null?N.current(G,te,oe,le,Be,ne,ie):null,dismiss:Be};w(pe),ne=null},Be=()=>{let pe=le;le=!1,H=!1,G.setCursor({left:-10,top:-10}),ge(pe)};b.addHook("init",pe=>{w({plot:G=pe}),D&&pe.over.addEventListener("mousedown",Ne=>{if(a(Ne)&&Ne.button===0&&Ne.shiftKey){J=!0,pe.cursor.drag.x=!1,pe.cursor.drag.y=!0;let Le=He=>{pe.cursor.drag.x=!0,pe.cursor.drag.y=!1,document.removeEventListener("mouseup",Le,!0)};document.addEventListener("mouseup",Le,!0)}},!0),pe.over.addEventListener("click",Ne=>{if(Ne.target===pe.over)if(Ne.ctrlKey||Ne.metaKey){let Le;pe.scales.x.ori===0?Le=pe.posToVal(pe.cursor.left,"x"):Le=pe.posToVal(pe.select.top+pe.select.height,"x"),ne={from:Le,to:Le},ge(!1)}else H&&oe!=null&&!le&&(le=!0,ge(!0))})}),b.addHook("setSelect",pe=>{const Ne=pe.scales.x.ori===0;if(!ie&&(D||T!=null))if(a(pe.cursor.event)){if(D&&J){if(pe.select.height>=y){for(let Le in pe.scales)if(Le!=="x"){const He=Ne?pe.posToVal(pe.select.top,Le):pe.posToVal(pe.select.left+pe.select.width,Le),je=Ne?pe.posToVal(pe.select.top+pe.select.height,Le):pe.posToVal(pe.select.left,Le);pe.setScale(Le,{min:je,max:He})}z=!0}J=!1}else if(T!=null&&pe.select.width>=y){const Le=Ne?pe.posToVal(pe.select.left,"x"):pe.posToVal(pe.select.top+pe.select.height,"x"),He=Ne?pe.posToVal(pe.select.left+pe.select.width,"x"):pe.posToVal(pe.select.top,"x");T({from:Le,to:He}),z=!1}}else ne={from:Ne?pe.posToVal(pe.select.left,"x"):pe.posToVal(pe.select.top+pe.select.height,"x"),to:Ne?pe.posToVal(pe.select.left+pe.select.width,"x"):pe.posToVal(pe.select.top,"x")},ge(!0);pe.setSelect({left:0,width:0,top:0,height:0},!1)}),(D||T!=null)&&b.setCursor({bind:{dblclick:pe=>()=>{if(!a(pe.cursor.event))return null;if(D&&z){for(let Ne in pe.scales)Ne!=="x"&&pe.setScale(Ne,{min:null,max:null});z=!1}else if(T!=null){let Ne=pe.scales.x;const Le=Ne.min,He=Ne.max,je=(He-Le)/2;T({from:Le-je,to:He+je})}return null}}}),b.addHook("setData",pe=>{z=!1,J=!1}),b.addHook("setSeries",(pe,Ne)=>{oe=Ne,ie=pe.cursor.event==null,ee(),ge()}),b.addHook("setLegend",pe=>{te=G?.cursor.idxs.slice(),q=te.some((Le,He)=>He>0&&Le!=null),ie=pe.cursor.event==null;let Ne=H;ee(),(H||H!==Ne)&&ge()});const ve=16;let Me=0,ke=0;const Se=()=>{H&&!le&&Be(),Me=window.innerWidth-ve,ke=window.innerHeight-ve},We=()=>{k=G.rect.bottom<=ke&&G.rect.top>=0&&G.rect.left>=0&&G.rect.right<=Me};Se(),b.addHook("ready",We),b.addHook("setCursor",pe=>{if(ie=pe.cursor.event==null,!H)return;let{left:Ne=-10,top:Le=-10}=pe.cursor;if(Ne>=0||Le>=0){let He=pe.rect.left+Ne,je=pe.rect.top+Le,at="",{width:Ye,height:$e}=L.current;Ye+=f,$e+=f,j!==0?je+$e<ke||je-$e<0?j=0:j!==-$e&&(j=-$e):je+$e>ke&&je-$e>=0&&(j=-$e),X!==0?He+Ye<Me||He-Ye<0?X=0:X!==-Ye&&(X=-Ye):He+Ye>Me&&He-Ye>=0&&(X=-Ye);const xe=He+(X===0?f:-f),Fe=je+(j===0?f:-f);at=`translateX(${xe}px) ${X===0?"":"translateX(-100%)"} translateY(${Fe}px) ${j===0?"":"translateY(-100%)"}`,p.current!=null?p.current.style.transform=at:(me.transform=at,ge())}});const De=pe=>{We(),H&&!le&&pe.target instanceof HTMLElement&&pe.target.contains(G.root)&&Be()};return window.addEventListener("resize",Se),window.addEventListener("scroll",De,!0),()=>{window.removeEventListener("resize",Se),window.removeEventListener("scroll",De,!0)}},[b]),(0,n.useLayoutEffect)(()=>{const z=L.current;if(p.current!=null){z.observer.observe(p.current);const{width:J,height:G}=p.current.getBoundingClientRect();z.width=J,z.height=G;const H=A.cursor.event;H!=null?A.over.dispatchEvent(H):A.setCursor({left:A.cursor.left,top:A.cursor.top},!0)}else z.width=0,z.height=0},[R]),A&&R?(0,r.createPortal)(n.createElement("div",{className:(0,t.cx)(V.tooltipWrapper,B&&V.pinned),style:F,"aria-live":"polite","aria-atomic":"true",ref:p},B&&n.createElement(l,{onClick:K}),U),x.current):null},g=(b,P,C)=>({tooltipWrapper:(0,t.css)({top:0,left:0,zIndex:b.zIndex.portal,whiteSpace:"pre",borderRadius:b.shape.radius.default,position:"fixed",background:b.colors.background.primary,border:`1px solid ${b.colors.border.weak}`,boxShadow:b.shadows.z2,userSelect:"text",maxWidth:P??"none",maxHeight:C??"none",overflowY:"auto"}),pinned:(0,t.css)({boxShadow:b.shadows.z3})})},10175:(Y,I,e)=>{"use strict";e.d(I,{j:()=>s});var t=e(96540);const n=5,r=o=>o!=null&&!o.ctrlKey&&!o.metaKey,s=({onZoom:o,config:m,withZoomY:l=!1})=>((0,t.useLayoutEffect)(()=>{let i=!1,c=!1;l&&m.addHook("init",u=>{u.over.addEventListener("mousedown",f=>{if(r(f)&&f.button===0&&f.shiftKey){c=!0,u.cursor.drag.x=!1,u.cursor.drag.y=!0;let d=E=>{u.cursor.drag.x=!0,u.cursor.drag.y=!1,document.removeEventListener("mouseup",d,!0)};document.addEventListener("mouseup",d,!0)}},!0)}),m.addHook("setSelect",u=>{const f=u.scales.x.ori===0;if(r(u.cursor.event)){if(l&&c){if(u.select.height>=n){for(let d in u.scales)if(d!=="x"){const E=f?u.posToVal(u.select.top,d):u.posToVal(u.select.left+u.select.width,d),h=f?u.posToVal(u.select.top+u.select.height,d):u.posToVal(u.select.left,d);u.setScale(d,{min:h,max:E})}i=!0}c=!1}else if(u.select.width>=n){const d=f?u.posToVal(u.select.left,"x"):u.posToVal(u.select.top+u.select.height,"x"),E=f?u.posToVal(u.select.left+u.select.width,"x"):u.posToVal(u.select.top,"x");o({from:d,to:E}),i=!1}}u.setSelect({left:0,width:0,top:0,height:0},!1)}),m.setCursor({bind:{dblclick:u=>()=>{if(!r(u.cursor.event))return null;if(l&&i){for(let f in u.scales)f!=="x"&&u.setScale(f,{min:null,max:null});i=!1}else{let f=u.scales.x;const d=f.min,E=f.max,h=(E-d)/2;o({from:d-h,to:E+h})}return null}}})},[m]),null)},66737:(Y,I,e)=>{"use strict";e.d(I,{Ku:()=>s.K,Tk:()=>n.T,Z7:()=>o.Z,jn:()=>t.j,xl:()=>r.xl});var t=e(10175),n=e(16615),r=e(77455),s=e(68268),o=e(23117)},52811:(Y,I,e)=>{"use strict";e.d(I,{R:()=>n,s:()=>t});const t="__fixed";class n{constructor(s){this.props=s}}},16895:(Y,I,e)=>{"use strict";e.d(I,{NN:()=>u,Tz:()=>d,bq:()=>h,ro:()=>E,sw:()=>y,uY:()=>b});var t=e(11261),n=e(50311),r=e(52622),s=e(40621),o=e(91040),m=e(55129);const l=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function i(P){return P.replace(l,C=>`{${C}}`)}const c=(P,C,D)=>{let T=C%2?D[0]||D[2]:D[1]||D[3];return D[C]||!T?0:8},u={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[c,c,c,c],series:[],hooks:{}};var f=(P=>(P[P.Pos=1]="Pos",P[P.Neg=-1]="Neg",P))(f||{});function d(P){let C=[],{series:D,dir:T}=P,M=D.length-1,O=D.slice().reverse();return O.forEach((S,p)=>{if(p!==M){let x=O[p+1];C.push({series:[S,x],dir:-1*T})}}),C}function E(P){let C=new Map;return P.fields.forEach(({config:D,values:T,type:M},O)=>{if(O===0)return;let{custom:S}=D;if(S==null||S.hideFrom?.viz)return;let{stacking:p}=S;if(p==null)return;let{mode:x,group:A}=p;if(x===r.gs.None)return;let R=S.transform,B=a(R,T),U=S.drawStyle,F=U===r.GR.Bars?S.barAlignment:U===r.GR.Line?S.lineInterpolation:null,K=`${B}|${x}|${A}|${(0,m.M)(D,M)}|${U}|${F}`,w=C.get(K);w==null&&(w={series:[],dir:B},C.set(K,w)),w.series.push(O)}),[...C.values()]}function h(P,C,D){let T=Array(P.fields.length),M=C.length,O=P.length,S=M>0?Array(O).fill(0):[],p=M>0?Array(O).fill(!1):[],x=Array.from({length:M},()=>S.slice()),A=Array.from({length:M},()=>p.slice());if(C.forEach((R,B)=>{let U=A[B];R.series.forEach(F=>{let K=P.fields[F];if(K.config.custom?.hideFrom?.viz)return;let w=K.values;for(let L=0;L<O;L++)w[L]!=null&&(U[L]=!0)})}),P.fields.forEach((R,B)=>{let U=R.values;if(B===0){R.type===t.PU.time?T[B]=(0,n.ks)(R).values:T[B]=U;return}let{custom:F}=R.config;if(!F||F.hideFrom?.viz){T[B]=U;return}if(F.transform===r.NU.Constant){let w=U.findIndex(V=>V!=null),L=U[w];U=Array(U.length).fill(void 0),U[w]=L}else if(U=U.slice(),F.transform===r.NU.NegativeY)for(let w=0;w<U.length;w++)U[w]!=null&&(U[w]*=-1);let K=F.stacking?.mode;if(!K||K===r.gs.None)T[B]=U;else{let w=C.findIndex(z=>z.series.indexOf(B)>-1),L=x[w],V=A[w],N=T[B]=Array(O);for(let z=0;z<O;z++){let J=U[z];J!=null?N[z]=L[z]+=J:N[z]=V[z]?L[z]:J}}}),D){let R=T.map((B,U)=>{let F=C.findIndex(K=>K.series.indexOf(U)>-1);return F!==-1?x[F]:B});D({totals:R})}return P.fields.forEach((R,B)=>{if(B===0||R.config.custom?.hideFrom?.viz)return;if(R.config.custom?.stacking?.mode===r.gs.Percent){let F=C.findIndex(V=>V.series.indexOf(B)>-1),K=x[F],w=C[F],L=T[B];for(let V=0;V<O;V++){let N=L[V];N!=null&&(L[V]=K[V]===0?0:w.dir*(N/K[V]))}}}),T}function y(P,C){let D,T=1,M=1,O=P.data[1][C],S=P.data[1][C];for(let p=1;p<P.data.length;p++){const A=P.data[p][C];A!=null&&(O==null?O=A:A>O&&(O=P.data[p][C],T=p),S==null?S=A:A<S&&(S=P.data[p][C],M=p))}return S==null&&O==null?D=void 0:S!=null&&O!=null?D=(P.valToPos(S,P.series[M].scale)+P.valToPos(O,P.series[T].scale))/2:D=P.valToPos(S||O,P.series[T||M].scale),D!==void 0&&D<0&&(D=P.bbox.height/devicePixelRatio),D}function a(P,C){const D=v(C);return P===r.NU.NegativeY?D?1:-1:D?-1:1}function v(P,C=100){const D=P.length;if(D===0)return!1;let T=0,M=D-1;for(;T<=M&&P[T]==null;)T++;for(;M>=T&&P[M]==null;)M--;let O=0,S=0;if(M>=T){const p=Math.max(1,Math.floor((M-T+1)/C));for(let x=T;x<=M;x+=p){const A=P[x];A!=null&&typeof A=="number"&&(A<0||Object.is(A,-0)?O++:A>0&&S++)}if(O>S)return!0}return!1}const g=(0,o.h)("uPlot"),b=g.logger;(0,s.h)("graphng",void 0,g)},48747:(Y,I,e)=>{"use strict";e.d(I,{T:()=>a});var t=e(34796),n=e.n(t),r=e(2543),s=e(96540),o=e(61443),m=e(52622),l=e(75128),i=e(33083),c=e(3139),u=e(65036);const f=({dimensions:g,activeDimensions:b,pos:P,timeZone:C})=>{let D=null;if(b.xAxis===null)return null;b.yAxis&&(D=b.yAxis[0]);const T=b.xAxis[1]?(0,o.WK)(g.xAxis,b.xAxis[0],b.xAxis[1]):P.x,M=(0,u.DU)(g.yAxis.columns,g.xAxis.columns,T,C),O=M.time,S=M.results.map((p,x)=>({color:p.color,label:p.label,value:p.value,isActive:D===x}));return s.createElement(c.o,{series:S,timestamp:O})};f.displayName="MultiModeGraphTooltip";var d=e(83195),E=e(28240);const h=({dimensions:g,activeDimensions:b,timeZone:P})=>{if(b.yAxis===null||b.yAxis[1]===void 0||b.xAxis===null||b.xAxis[1]===void 0)return null;const C=(0,o.WK)(g.xAxis,b.xAxis[0],b.xAxis[1]),D=(0,o.P4)(g.xAxis,b.xAxis[0]),T=D.display?(0,d.cN)(D.display(C)):C,M=(0,o.P4)(g.yAxis,b.yAxis[0]),O=(0,o.WK)(g.yAxis,b.yAxis[0],b.yAxis[1]),S=M.display,p=S(O);return s.createElement(c.o,{series:[{color:p.color,label:(0,E.Ct)(M),value:(0,d.cN)(p)}],timestamp:T})};h.displayName="SingleModeGraphTooltip";const y=({mode:g=m.$N.Single,dimensions:b,activeDimensions:P,pos:C,timeZone:D})=>!P||!P.xAxis?null:g==="single"?s.createElement(h,{dimensions:b,activeDimensions:P,timeZone:D}):s.createElement(f,{dimensions:b,activeDimensions:P,pos:C,timeZone:D});y.displayName="GraphTooltip";class a extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.$element=null,this.onPlotSelected=(b,P)=>{const{onHorizontalRegionSelected:C}=this.props;C&&C(P.xaxis.from,P.xaxis.to)},this.onPlotHover=(b,P,C)=>{this.setState({isTooltipVisible:!0,activeItem:C,pos:P})},this.onPlotClick=(b,P,C)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:C,contextPos:P})},this.renderTooltip=()=>{const{children:b,series:P,timeZone:C}=this.props,{pos:D,activeItem:T,isTooltipVisible:M}=this.state;let O;if(!M||!D||P.length===0||(s.Children.forEach(b,K=>{if(O)return;(K&&K.type&&(K.type.displayName||K.type.name))===l.n.displayName&&(O=K)}),!O))return null;const S=O.props,p=S.mode||"single";if(!T&&p==="single")return null;const x=S.tooltipComponent||y,A=T?T.series.seriesIndex:0,R=T?T.dataIndex:void 0,B={xAxis:[A,R],yAxis:T?[T.series.seriesIndex,T.dataIndex]:null},U={dimensions:{xAxis:(0,o.r4)("xAxis",P.map(K=>K.timeField)),yAxis:(0,o.r4)("yAxis",P.map(K=>K.valueField))},activeDimensions:B,pos:D,mode:S.mode||m.$N.Single,timeZone:C},F=s.createElement(x,{...U});return s.cloneElement(O,{content:F,position:{x:D.pageX,y:D.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:b}=this.props,{contextPos:P,contextItem:C,isContextVisible:D}=this.state;if(!D||!P||!C||b.length===0)return null;const T=C?C.series.seriesIndex:0,M=C?C.dataIndex:void 0,O={xAxis:[T,M],yAxis:C?[C.series.seriesIndex,C.dataIndex]:null},S={xAxis:(0,o.r4)("xAxis",b.map(R=>R.timeField)),yAxis:(0,o.r4)("yAxis",b.map(R=>R.valueField))},p=()=>this.setState({isContextVisible:!1}),x=()=>({datapoint:C.datapoint,dataIndex:C.dataIndex,series:C.series,seriesIndex:C.series.seriesIndex,pageX:P.pageX,pageY:P.pageY}),A={x:P.pageX,y:P.pageY,onClose:p,getContextMenuSource:x,timeZone:this.props.timeZone,dimensions:S,contextDimensions:O};return s.createElement(i.H,{...A})},this.getBarWidth=()=>{const{series:b}=this.props;return Math.min(...b.map(P=>P.timeStep))}}static{this.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1}}componentDidUpdate(b,P){b!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(b){return b.length===0?[{show:!0,min:-1,max:1}]:(0,r.uniqBy)(b.map(P=>{const C=P.yAxis?P.yAxis.index:1,D=P.yAxis&&P.yAxis.min&&!isNaN(P.yAxis.min)?P.yAxis.min:null,T=P.yAxis&&P.yAxis.tickDecimals&&!isNaN(P.yAxis.tickDecimals)?P.yAxis.tickDecimals:null;return{show:!0,index:C,position:C===1?"left":"right",min:D,tickDecimals:T}}),P=>P.index)}draw(){if(this.element===null)return;const{width:b,series:P,timeRange:C,showLines:D,showBars:T,showPoints:M,isStacked:O,lineWidth:S,timeZone:p,onHorizontalRegionSelected:x}=this.props;if(!b)return;const A=b/100,R=C.from.valueOf(),B=C.to.valueOf(),U=this.getYAxes(P),F={legend:{show:!1},series:{stack:O,lines:{show:D,lineWidth:S,zero:!1},points:{show:M,fill:1,fillColor:!1,radius:2},bars:{show:T,fill:1,barWidth:T?this.getBarWidth()/1.5:1,zero:!1,lineWidth:S},shadowSize:0},xaxis:{timezone:p,show:!0,mode:"time",min:R,max:B,label:"Datetime",ticks:A,timeformat:(0,u.Jc)(A,R,B),tickFormatter:u.Yn},yaxes:U,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:x?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,P.filter(K=>K.isVisible),F)}catch(K){throw console.error("Graph rendering error",K,F,P),new Error("Error rendering panel")}}render(){const{ariaLabel:b,height:P,width:C,series:D}=this.props,T=D.length===0,M=this.renderTooltip(),O=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":b},s.createElement("div",{className:"graph-panel__chart",ref:S=>this.element=S,style:{height:P,width:C},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),T&&s.createElement("div",{className:"datapoints-warning"},"No data"),M,O)}}const v=null},33083:(Y,I,e)=>{"use strict";e.d(I,{H:()=>d,i:()=>E});var t=e(32196),n=e(96540),r=e(61443),s=e(72724),o=e(28122),m=e(9286),l=e(66864),i=e(59093),c=e(64539),u=e(94536),f=e(40845);const d=({getContextMenuSource:y,timeZone:a,itemsGroup:v,dimensions:g,contextDimensions:b,...P})=>{const C=y(),D=v?v.map(O=>({...O,items:O.items?.filter(S=>S.label)})):[],T=()=>{if(!C)return null;let O;if(g?.yAxis&&b?.yAxis?.[1]){const p=(0,r.WK)(g.yAxis,b.yAxis[0],b.yAxis[1]),x=C.series.valueField.display;O=x(p)}const S=(0,s.LE)(C.datapoint[0],{defaultWithMS:C.series.hasMsResolution,timeZone:a});return n.createElement(E,{timestamp:S,seriesColor:C.series.color,displayName:C.series.alias||C.series.label,displayValue:O})},M=()=>D?.map((O,S)=>n.createElement(i.r,{key:`${O.label}${S}`,label:O.label},(O.items||[]).map(p=>n.createElement(c.D,{key:`${p.label}`,url:p.url,label:p.label,target:p.target,icon:p.icon,active:p.active,onClick:p.onClick}))));return n.createElement(o.t,{...P,renderMenuItems:M,renderHeader:T})},E=({timestamp:y,seriesColor:a,displayName:v,displayValue:g})=>{const b=(0,f.of)(h);return n.createElement("div",{className:b.wrapper},n.createElement("strong",null,y),n.createElement(l.Gy,null,n.createElement("div",null,n.createElement(u.p,{color:a}),n.createElement("span",{className:b.displayName},v)),g&&n.createElement(m.i,{value:g})))};function h(y){return{wrapper:(0,t.css)({padding:y.spacing(.5,1),fontSize:y.typography.size.sm,zIndex:y.zIndex.tooltip}),displayName:(0,t.css)({whiteSpace:"nowrap",paddingLeft:y.spacing(.5)})}}},84656:(Y,I,e)=>{"use strict";e.d(I,{M:()=>s});var t=e(2543),n=e.n(t),r=e(96540);class s extends r.Component{constructor(m){super(m),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:m.series}}componentDidUpdate(m){const{series:l}=this.props;(0,t.isEqual)(m.series,l)||this.setState({hiddenSeries:[],toggledSeries:l})}onSeriesToggle(m,l){const{series:i,onHiddenSeriesChanged:c}=this.props,{hiddenSeries:u}=this.state;if(l.ctrlKey||l.metaKey||l.shiftKey){const h=u.indexOf(m)>-1?u.filter(a=>a!==m):u.concat([m]),y=i.map(a=>({...a,isVisible:h.indexOf(a.label)===-1}));this.setState({hiddenSeries:h,toggledSeries:y},()=>c?c(h):void 0);return}const f=i.map(h=>h.label),d=u.length+1===f.length?[]:(0,t.difference)(f,[m]),E=i.map(h=>({...h,isVisible:d.indexOf(h.label)===-1}));this.setState({hiddenSeries:d,toggledSeries:E},()=>c?c(d):void 0)}render(){const{children:m}=this.props,{toggledSeries:l}=this.state;return m({onSeriesToggle:this.onSeriesToggle,toggledSeries:l})}}},5484:(Y,I,e)=>{"use strict";e.d(I,{I:()=>i});var t=e(32196),n=e(96540),r=e(40276),s=e(55726),o=e(40845),m=e(48747);const l=(u,f=!1,d=!1)=>{const E=u.reduce((y,a)=>y+(a[1]||0),0)===0,h=!u.reduce((y,a)=>y&&a[1]!==null,!0);return f&&h||d&&E},i=u=>{const{series:f,timeRange:d,width:E,height:h,showBars:y,showLines:a,showPoints:v,sortLegendBy:g,sortLegendDesc:b,legendDisplayMode:P,legendVisibility:C,placement:D,onSeriesToggle:T,onToggleSort:M,hideEmpty:O,hideZero:S,isStacked:p,lineWidth:x,onHorizontalRegionSelected:A,timeZone:R,children:B,ariaLabel:U}=u,{graphContainer:F,wrapper:K,legendContainer:w}=(0,o.of)(c,u.placement),L=f.reduce((V,N)=>l(N.data,O,S)?V:V.concat([{label:N.label,color:N.color||"",disabled:!N.isVisible,yAxis:N.yAxis.index,getDisplayValues:()=>N.info||[]}]),[]);return n.createElement("div",{className:K,"aria-label":U},n.createElement("div",{className:F},n.createElement(m.T,{series:f,timeRange:d,timeZone:R,showLines:a,showPoints:v,showBars:y,width:E,height:h,isStacked:p,lineWidth:x,onHorizontalRegionSelected:A},B)),C&&n.createElement("div",{className:w},n.createElement(r.E,{hideHorizontalTrack:!0},n.createElement(s.t,{items:L,displayMode:P,placement:D,sortBy:g,sortDesc:b,onLabelClick:(V,N)=>{T&&T(V.label,N)},onToggleSort:M}))))},c=(u,f)=>({wrapper:(0,t.css)({display:"flex",flexDirection:f==="bottom"?"column":"row"}),graphContainer:(0,t.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,t.css)({padding:"10px 0",maxHeight:f==="bottom"?"35%":"none"})})},65036:(Y,I,e)=>{"use strict";e.d(I,{DU:()=>m,Jc:()=>i,Yn:()=>l});var t=e(83195),n=e(28240),r=e(72724),s=e(42994);const o=(c,u)=>{let f=0,d=c.values.length-1,E;for(;;){if(f>d)return Math.max(d,0);E=Math.floor((f+d)/2);const h=c.values[E];if(h===u)return E;h&&h<u?f=E+1:d=E-1}},m=(c,u,f,d)=>{let E,h,y,a,v;const g=[];let b,P;for(E=0;E<c.length;E++){h=c[E];const C=u[E];y=o(C,f),a=f-C.values[y],v=C.values[y],(b===void 0||a>=0&&(a<b||b<0)||a<0&&a>b)&&(b=a,P=C.display?(0,t.cN)(C.display(v)):v);const D=h.display(h.values[y]);g.push({value:(0,t.cN)(D),datapointIndex:y,seriesIndex:E,color:D.color,label:(0,n.Ct)(h),time:C.display?(0,t.cN)(C.display(v)):v})}return{results:g,time:P}},l=(c,u)=>(0,r.LE)(c,{format:u?.options?.timeformat,timeZone:u?.options?.timezone}),i=(c,u,f)=>{if(u&&f&&c){const d=f-u,E=d/c/1e3,h=86400010,y=31536e6;return E<=10?s.WC.interval.millisecond:E<=45?s.WC.interval.second:d<=h?s.WC.interval.minute:E<=8e4?s.WC.interval.hour:d<=y?s.WC.interval.day:E<=31536e3?s.WC.interval.month:s.WC.interval.year}return s.WC.interval.minute}},99755:(Y,I,e)=>{"use strict";e.d(I,{o:()=>y});var t=e(96540),n=e(64423),r=e(99165),s=e(85200),o=e(1173),m=e(11261),l=e(69129),i=e(26272),c=e(79041),u=e(67266),f=e(81297),d=e(16895),E=e(65575);function h(a,v,g=[]){for(const b of g)if(typeof b=="function"){if(!b(a,v))return!1}else if(v[b]!==a[b])return!1;return!0}class y extends t.Component{constructor(v){super(v),this.panelContext={},this.subscription=new n.yU,this.getTimeRange=()=>this.props.timeRange;let g=this.prepState(v);g.alignedData=g.config.prepData([g.alignedFrame]),this.state=g,this.plotInstance=t.createRef()}static{this.contextType=c.e4}prepState(v,g=!0){let b=null;const{frames:P,fields:C,preparePlotFrame:D}=v,M=(D||E.mY)(P,C||{x:s.sJ.get(o.Ct.firstTimeField).get({}),y:s.sJ.get(o.Ct.byTypes).get(new Set([m.PU.number,m.PU.enum]))},v.timeRange);if((0,d.uY)("GraphNG",!1,"data aligned",M),M){let O=this.state?.config;g&&(O=v.prepConfig(M,this.props.frames,this.getTimeRange),(0,d.uY)("GraphNG",!1,"config prepared",O)),b={alignedFrame:M,config:O},(0,d.uY)("GraphNG",!1,"data prepared",b.alignedData)}return b}handleCursorUpdate(v){const g=v.payload?.point?.time,b=this.plotInstance.current;if(b&&g){const P=b.valToPos(g,"x");let C;if(P&&(C=(0,d.sw)(b,b.posToIdx(P))),!C||!P)return;b.setCursor({left:P,top:C})}}componentDidMount(){this.panelContext=this.context;const{eventBus:v}=this.panelContext;this.subscription.add(v.getStream(l.b_).pipe((0,r.c)(50)).subscribe({next:g=>{v!==g.origin&&this.handleCursorUpdate(g)}})),this.subscription.add(v.getStream(i.kb).pipe((0,r.c)(50)).subscribe({next:g=>this.handleCursorUpdate(g)})),this.subscription.add(v.getStream(l.ql).pipe((0,r.c)(50)).subscribe({next:()=>{const g=this.plotInstance?.current;g&&!g.cursor._lock&&g.setCursor({left:-10,top:-10})}}))}componentDidUpdate(v){const{frames:g,structureRev:b,timeZone:P,propsToDiff:C}=this.props,D=!h(v,this.props,C);if(g!==v.frames||D||P!==v.timeZone){let T=this.prepState(this.props,!1);T&&((this.state.config===void 0||P!==v.timeZone||b!==v.structureRev||!b||D)&&(T.config=this.props.prepConfig(T.alignedFrame,this.props.frames,this.getTimeRange),(0,d.uY)("GraphNG",!1,"config recreated",T.config)),T.alignedData=T.config.prepData([T.alignedFrame]),this.setState(T))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:v,height:g,children:b,renderLegend:P}=this.props,{config:C,alignedFrame:D,alignedData:T}=this.state;return C?t.createElement(u.KU,{width:v,height:g,legend:P(C)},(M,O)=>t.createElement(f.Z,{config:C,data:T,width:M,height:O,plotRef:S=>this.plotInstance.current=S},b?b(C,D):null)):null}}},16998:(Y,I,e)=>{"use strict";e.d(I,{I:()=>r});var t=e(96540);const n=t.createContext({}),r=()=>{const{data:s,dimFields:o,mapSeriesIndexToDataFrameFieldIndex:m}=(0,t.useContext)(n),l=(0,t.useCallback)(()=>{const i=o.x;let c=null;for(let u=0;u<s.fields.length;u++)if(i(s.fields[u],s,[s])){c=s.fields[u];break}return c},[s,o]);return{dimFields:o,mapSeriesIndexToDataFrameFieldIndex:m,getXAxisField:l,alignedData:s}}},65575:(Y,I,e)=>{"use strict";e.d(I,{My:()=>E,wX:()=>u,mY:()=>d});var t=e(11261),n=e(73060),r=e(52622),s=e(52811);const o={threshold:(y,a,v)=>y+v,midpoint:(y,a,v)=>(y+a)/2,plusone:(y,a,v)=>y+1};function m(y){if(y.frame.length===0)return y.frame;let a=!0,{frame:v,refFieldName:g,refFieldPseudoMax:b,refFieldPseudoMin:P,insertMode:C}=y;C||(C=o.threshold);const D=u(v,g);if(D==null)return v;D.state={...D.state,nullThresholdApplied:!0};const T=v.fields.map(O=>O.config.custom?.insertNulls||D.config.interval||null),M=new Set(T);if(M.delete(null),M.size===0)return v;if(M.size===1){const O=M.values().next().value;if(O<=0)return v;const S=D.values,p=v.fields.map(A=>A.values),x=l(S,p,O,P,b,C,a);return x===p?v:{...v,length:x[0].length,fields:v.fields.map((A,R)=>({...A,values:x[R]}))}}return v}function l(y,a,v,g=null,b=null,P,C){const D=y.length,T=[];if(g!=null&&g<y[0]){let p=Math.ceil((y[0]-g)/v),x=y[0]-p*v;for(;x<y[0];)T.push(P(x-v,x,v)),x+=v}T.push(y[0]);let M=y[0];for(let p=1;p<D;p++){const x=y[p];for(;x-M>v&&(T.push(P(M,x,v)),M+=v,!!C););T.push(x),M=x}if(b!=null&&b>M)for(;M+v<b;)T.push(P(M,b,v)),M+=v;const O=T.length;if(O===D)return a;const S=[];for(let p of a){let x;if(p!==y){x=Array(O);for(let A=0,R=0;A<O;A++)x[A]=y[R]===T[A]?p[R++]:null}else x=T;S.push(x)}return S}function i(y,a,v){let g,b;for(let P=0;P<a.length;P++)if(a[P]==null)b==null&&g!=null&&(b=P);else{if(b!=null){if(y[P]-g<v)for(;b<P;)a[b++]=void 0;b=null}g=y[P]}return a}function c(y){return y.type===t.PU.number&&y.config.custom?.drawStyle===r.GR.Bars&&!y.config.custom?.hideFrom?.viz}function u(y,a){return y.fields.find(v=>a!=null?v.name===a:v.type===t.PU.time)}function f(y,a){const v=u(y,a);let g=v?.values;for(let b=0;b<y.fields.length;b++){let P=y.fields[b];if(P===v||c(P))continue;let C=P.config.custom?.spanNulls;typeof C=="number"&&C!==-1&&g&&(P.values=i(g,P.values,C))}return y}function d(y,a,v){let g;e:for(let D of y)for(let T of D.fields)if(a.x(T,D,y)){g=T;break e}y=y.map(D=>g?.state?.nullThresholdApplied?D:m({frame:D,refFieldName:g.name,refFieldPseudoMin:v?.from.valueOf(),refFieldPseudoMax:v?.to.valueOf()}));let b=0;y.forEach(D=>{D.fields.forEach(T=>{c(T)&&(T.config.custom={...T.config.custom,spanNulls:-1},b++)})});let P=1/0;b>1&&y.forEach(D=>{if(!D.fields.some(c))return;const T=g.values;for(let M=0;M<T.length;M++)M>0&&(P=Math.min(P,T[M]-T[M-1]))});let C=(0,n.Fd)({frames:y,joinBy:a.x,keep:a.y,keepOriginIndices:!0});return C?(C=f(C,g.name),P!==1/0&&(C.fields.forEach((D,T)=>{let M=D.values;if(T===0){let O=M[M.length-1];M.push(O+P,O+2*P)}else c(D)?M.push(null,null):M.push(void 0,void 0)}),C.length+=2),C):null}function E(y,a){const v="na",g=`${y.min!==void 0?y.min:v}-${y.max!==void 0?y.max:v}`,b=`${y.custom?.axisSoftMin!==void 0?y.custom.axisSoftMin:v}-${y.custom?.axisSoftMax!==void 0?y.custom.axisSoftMax:v}`,P=`${y.custom?.axisPlacement!==void 0?y.custom?.axisPlacement:r.vM.Auto}`,C=y.unit??s.s,D=y.custom?.scaleDistribution?h(y.custom.scaleDistribution):r.L4.Linear,T=y.custom?.axisLabel?y.custom.axisLabel:v;return`${C}/${g}/${b}/${P}/${D}/${T}/${a}`}function h(y){return y.type===r.L4.Log?`${y.type}${y.log}`:y.type}},18262:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>x});var t=e(96540),n=e(79041),r=e(24182),s=e(40845),o=e(99755),m=e(2543),l=e(36613),i=e(11261),c=e(83195),u=e(57875),f=e(8066),d=e(24293),E=e(28240),h=e(94624),y=e(52622),a=e(51336),v=e(74863),g=e(16895),b=e(65575);const P=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),C=Array(53);for(let A=0;A<C.length;A++)C[A]=2**A;const D=(A,R=1)=>A==null?"-":A.toFixed(R),T={drawStyle:y.GR.Line,showPoints:y.yL.Auto,axisPlacement:y.vM.Auto},M=({frame:A,theme:R,timeZones:B,getTimeRange:U,sync:F,allFrames:K,renderers:w,tweakScale:L=z=>z,tweakAxis:V=z=>z,eventsScope:N="__global_"})=>{const z=new a.e(B[0]);let J;z.setPrepData(te=>(J=te[0],(0,g.bq)(te[0],z.getStackingGroups())));const G=A.fields[0];if(!G)return z;const H="x";let q="";const le=G.config.custom?.axisPlacement!==y.vM.Hidden?y.vM.Bottom:y.vM.Hidden,me=G.config.custom?.axisPlacement!==y.vM.Hidden;if(G.type===i.PU.time){z.addScale({scaleKey:H,orientation:y.Lt.Horizontal,direction:y.ON.Right,isTime:!0,range:()=>{const oe=U();return[oe.from.valueOf(),oe.to.valueOf()]}});const te=B.length>1?(oe,ie)=>ie.map((ue,be)=>be<2?null:ue):void 0;for(let oe=0;oe<B.length;oe++){const ie=B[oe];z.addAxis({scaleKey:H,isTime:!0,placement:le,show:me,label:G.config.custom?.axisLabel,timeZone:ie,theme:R,grid:{show:oe===0&&G.config.custom?.axisGridShow},filter:te})}B.length>1&&z.addHook("drawAxes",oe=>{oe.ctx.save(),oe.ctx.fillStyle=R.colors.text.primary,oe.ctx.textAlign="left",oe.ctx.textBaseline="bottom";let ie=0;oe.axes.forEach(ue=>{if(ue.side===2){let be=ue._pos+ue._size;oe.ctx.fillText(B[ie],oe.bbox.left,be*l.A.pxRatio),ie++}}),oe.ctx.restore()})}else z.addScale({scaleKey:H,orientation:y.Lt.Horizontal,direction:y.ON.Right,range:(te,oe,ie)=>[G.config.min??oe,G.config.max??ie]}),z.addAxis({scaleKey:H,placement:le,show:me,label:G.config.custom?.axisLabel,theme:R,grid:{show:G.config.custom?.axisGridShow},formatValue:(te,oe)=>(0,c.cN)(G.display(te,oe))});let k=w?.flatMap(te=>Object.values(te.fieldMap).filter(oe=>te.indicesOnly.indexOf(oe)===-1))??[],ee;for(let te=1;te<A.fields.length;te++){const oe=A.fields[te],ie={...oe.config,custom:{...T,...oe.config.custom}},ue=ie.custom;if(oe===G||oe.type!==i.PU.number&&oe.type!==i.PU.enum)continue;let be=oe.display??D;oe.config.custom?.stacking?.mode===y.gs.Percent&&(be=(0,u.J)({field:{...oe,config:{...oe.config,unit:"percentunit"}},theme:R}));const ge=(0,b.My)(ie,oe.type),re=(0,f.Qi)(oe),Be=(0,f.lz)(oe,R).color;if(z.addScale(L({scaleKey:ge,orientation:y.Lt.Vertical,direction:y.ON.Up,distribution:ue.scaleDistribution?.type,log:ue.scaleDistribution?.log,linearThreshold:ue.scaleDistribution?.linearThreshold,min:oe.config.min,max:oe.config.max,softMin:ue.axisSoftMin,softMax:ue.axisSoftMax,centeredZero:ue.axisCenteredZero,range:ue.stacking?.mode===y.gs.Percent?(pe,Ne,Le)=>(Ne=Ne<0?-1:0,Le=Le>0?1:0,[Ne,Le]):oe.type===i.PU.enum?(pe,Ne,Le)=>[-1,oe.config.type.enum.text.length]:void 0,decimals:oe.config.decimals},oe)),q||(q=ge),ue.axisPlacement!==y.vM.Hidden){let pe;ue.axisColorMode===y.Y$.Series&&(re.isByValue&&oe.config.custom?.gradientMode===y.on.Scheme&&re.id===d.Y.Thresholds?pe=(0,v.pl)(1,R,re,oe.config.thresholds):pe=Be);const Ne={border:{show:ue.axisBorderShow||!1,width:1/devicePixelRatio,stroke:pe||R.colors.text.primary},ticks:{show:ue.axisBorderShow||!1,stroke:pe||R.colors.text.primary},color:pe||R.colors.text.primary};let Le,He,je;if(P.has(ie.unit))Le=C;else if(oe.type===i.PU.enum){let at=oe.config.type.enum.text;je=at.map((Ye,$e)=>$e),He=at}z.addAxis(V({scaleKey:ge,label:ue.axisLabel,size:ue.axisWidth,placement:ue.axisPlacement??y.vM.Auto,formatValue:(at,Ye)=>(0,c.cN)(be(at,Ye)),theme:R,grid:{show:ue.axisGridShow},decimals:oe.config.decimals,distr:ue.scaleDistribution?.type,splits:je,values:He,incrs:Le,...Ne},oe))}const ve=ue.drawStyle===y.GR.Points?y.yL.Always:ue.showPoints;let Me=()=>null;ue.spanNulls!==!0&&(Me=(pe,Ne,Le,He)=>{let je=[],at=pe.series[Ne];if(!Le&&He&&He.length){const[Ye,$e]=at.idxs,xe=pe.data[0],Fe=pe.data[Ne],Ee=Math.round(pe.valToPos(xe[Ye],"x",!0)),se=Math.round(pe.valToPos(xe[$e],"x",!0));He[0][0]===Ee&&je.push(Ye);for(let ae=0;ae<He.length;ae++){let fe=He[ae],Ce=He[ae+1];if(Ce&&fe[1]===Ce[0]){let Re=pe.posToIdx(fe[1],!0);if(Fe[Re]==null)for(let Oe=1;Oe<100;Oe++){if(Fe[Re+Oe]!=null){Re+=Oe;break}if(Fe[Re-Oe]!=null){Re-=Oe;break}}je.push(Re)}}He[He.length-1][1]===se&&je.push($e)}return je.length?je:null});let{fillOpacity:ke}=ue,Se=null,We=null;if(oe.state?.origin){ee||(ee=O(A,K));const pe=K[oe.state.origin.frameIndex],Ne=pe?.fields[oe.state.origin.fieldIndex],Le=(0,E.Ct)(Ne??oe,pe,K);if(k.indexOf(Le)>=0)Se=()=>null,We=()=>{};else if(ue.transform===y.NU.Constant){const He=l.A.paths.linear();Se=(je,at)=>{const Ye=je._data,$e=U();let xe=[$e.from.valueOf(),$e.to.valueOf()],Fe=Ye[at].find(ae=>ae!=null),Ee=[Fe,Fe],se=Ye.slice();return se[0]=xe,se[at]=Ee,He({...je,_data:se},at,0,1)}}if(ue.fillBelowTo){const He=A.fields.find($e=>ue.fillBelowTo===$e.name||ue.fillBelowTo===$e.config?.displayNameFromDS||ue.fillBelowTo===(0,E.Ct)($e,A,K)),je=He?(0,E.Ct)(He,A,K):ue.fillBelowTo,at=ee.get(Le),Ye=ee.get(je);(0,m.isNumber)(Ye)&&(0,m.isNumber)(at)?(z.addBand({series:[at,Ye],fill:void 0}),ke||(ke=35)):ke=0}}let De;re.id===d.Y.Thresholds&&(De=pe=>(0,f.lz)(J.fields[pe],R).color),z.addSeries({pathBuilder:Se,pointsBuilder:We,scaleKey:ge,showPoints:ve,pointsFilter:Me,colorMode:re,fillOpacity:ke,theme:R,dynamicSeriesColor:De,drawStyle:ue.drawStyle,lineColor:ue.lineColor??Be,lineWidth:ue.lineWidth,lineInterpolation:ue.lineInterpolation,lineStyle:ue.lineStyle,barAlignment:ue.barAlignment,barWidthFactor:ue.barWidthFactor,barMaxWidth:ue.barMaxWidth,pointSize:ue.pointSize,spanNulls:ue.spanNulls||!1,show:!ue.hideFrom?.viz,gradientMode:ue.gradientMode,thresholds:ie.thresholds,hardMin:oe.config.min,hardMax:oe.config.max,softMin:ue.axisSoftMin,softMax:ue.axisSoftMax,dataFrameFieldIndex:oe.state?.origin}),ue.thresholdsStyle&&ie.thresholds&&(ue.thresholdsStyle.mode??y.Ly.Off)!==y.Ly.Off&&z.addThresholds({config:ue.thresholdsStyle,thresholds:ie.thresholds,scaleKey:ge,theme:R,hardMin:oe.config.min,hardMax:oe.config.max,softMin:ue.axisSoftMin,softMax:ue.axisSoftMax})}let X=(0,g.ro)(A);z.setStackingGroups(X),w?.forEach(te=>{ee||(ee=O(A,K));let oe={};for(let ie in te.fieldMap){let ue=te.fieldMap[ie];oe[ie]=ee.get(ue)}te.init(z,oe)}),z.scaleKeys=[H,q];const j=15;let ne={dataIdx:(te,oe,ie,ue)=>{let be=te.data[oe];if(be[ie]==null){let ge=null,re=null,ye;for(ye=ie;ge==null&&ye-- >0;)be[ye]!=null&&(ge=ye);for(ye=ie;re==null&&ye++<be.length;)be[ye]!=null&&(re=ye);let Be=te.data[0],ve=te.valToPos(ue,"x"),Me=re==null?1/0:te.valToPos(Be[re],"x"),ke=ge==null?-1/0:te.valToPos(Be[ge],"x"),Se=ve-ke,We=Me-ve;Se<=We?Se<=j&&(ie=ge):We<=j&&(ie=re)}return ie}};return F&&F()!==h.y.Off&&(ne.sync={key:N,scales:[H,null]}),z.setSync(),z.setCursor(ne),z};function O(A,R){const B=new Map;return A.fields.forEach((U,F)=>{const K=U.state?.origin;if(K){const w=R[K.frameIndex]?.fields[K.fieldIndex];w&&B.set((0,E.Ct)(w,R[K.frameIndex],R),F)}}),B}const S=["legend","options","theme"];class p extends t.Component{constructor(){super(...arguments),this.prepConfig=(R,B,U)=>{const{eventsScope:F,sync:K}=this.context,{theme:w,timeZone:L,renderers:V,tweakAxis:N,tweakScale:z}=this.props;return M({frame:R,theme:w,timeZones:Array.isArray(L)?L:[L],getTimeRange:U,sync:K,allFrames:B,renderers:V,tweakScale:z,tweakAxis:N,eventsScope:F})},this.renderLegend=R=>{const{legend:B,frames:U}=this.props;return!R||B&&!B.showLegend||!(0,r.t)(R,U)?null:t.createElement(r.$,{data:U,config:R,...B})}}static{this.contextType=n.e4}render(){return t.createElement(o.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:S,renderLegend:this.renderLegend})}}const x=(0,s.cV)(p);x.displayName="TimeSeries"},8984:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{ALERTING_COLOR:()=>s.xj,AxisPlacement:()=>i.vM,BarAlignment:()=>i.Nj,BarValueVisibility:()=>i.TC,BracesPlugin:()=>l.e1,ClearPlugin:()=>l.vJ,ClipboardPlugin:()=>l.sW,DEFAULT_ANNOTATION_COLOR:()=>s.Mk,DOMUtil:()=>s.bk,DrawStyle:()=>i.yg,EventsWithValidation:()=>s.Pw,GlobalStyles:()=>o.kH,GraphGradientMode:()=>i.on,GraphThresholdsStyleMode:()=>i.Ly,IndentationPlugin:()=>l.TA,LegendDisplayMode:()=>i.lm,LineInterpolation:()=>i.dx,NO_DATA_COLOR:()=>s.nO,NewlinePlugin:()=>l.Om,NodeGraphDataFrameFieldNames:()=>s.uc,OK_COLOR:()=>s.Xw,PENDING_COLOR:()=>s.ct,PointVisibility:()=>i.nT,REGION_FILL_ALPHA:()=>s.UJ,ReactUtils:()=>s.zt,RunnerPlugin:()=>l.Ul,SCHEMA:()=>s.yx,ScaleDirection:()=>i.ON,ScaleOrientation:()=>i.Lt,SearchFunctionType:()=>s.Tt,SelectionShortcutsPlugin:()=>l.l9,SlatePrism:()=>l.De,StackingMode:()=>i.gs,SuggestionsPlugin:()=>l.Pz,TableCellDisplayMode:()=>i.ob,ThemeContext:()=>o.Dx,TooltipDisplayMode:()=>i.$N,ansicolor:()=>s.DB,attachDebugger:()=>s.hF,calculateFontSize:()=>s.Vr,colors:()=>s.Tj,commonOptionsBuilder:()=>m.j,createLogger:()=>s.h,fuzzyMatch:()=>s.It,getCanvasContext:()=>s.Yc,getCellLinks:()=>s.kl,getScrollbarWidth:()=>s.XJ,getTagColor:()=>s.yC,getTagColorIndexFromName:()=>s.JF,getTagColorsFromName:()=>s.MC,getTextColorForAlphaBackground:()=>s.mZ,getTextColorForBackground:()=>s.sg,getTheme:()=>o.O4,hasValidationEvent:()=>s.K,isCompactUrl:()=>s.Fr,linkModelToContextMenuItems:()=>s.Jl,makeFragment:()=>s.dF,makeValue:()=>s.mO,measureText:()=>s.kD,mockTheme:()=>o.mG,mockThemeContext:()=>o.fq,regexValidation:()=>s.RP,sortedColors:()=>s.Ih,styleMixins:()=>o.YF,stylesFactory:()=>o.N3,useForceUpdate:()=>s.CH,useStyles:()=>o.IS,useStyles2:()=>o.of,useTheme:()=>o.DP,useTheme2:()=>o.$j,validate:()=>s.tf,withTheme:()=>o.SL,withTheme2:()=>o.cV});var t=e(94333),r={};for(const c in t)c!=="default"&&(r[c]=()=>t[c]);e.d(I,r);var n=e(80186),r={};for(const c in n)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","EmptyState","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","PanelChrome","PanelChromeLoadingIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Text","Box","Stack","Grid","Space","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","Avatar","InlineFormLabel","Divider","getDragStyles","useSplitter","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","FIXED_UNIT","BrowserLabel","PanelContainer","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","graphTimeFormat","graphTickFormatter","GraphNG","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect","SecretInput","SecretTextArea","FileDropzone","FileDropzoneDefaultChildren","FileListItem","graphFieldOptions","EventsCanvas","Marker","XYCanvas","EventBusPlugin","KeyboardPlugin","TooltipPlugin","TooltipPlugin2","ZoomPlugin","SeriesVisibilityChangeMode"].indexOf(c)<0&&(r[c]=()=>n[c]);e.d(I,r);var s=e(99598),o=e(7918),m=e(42482),l=e(50955),i=e(49149)},38248:(Y,I,e)=>{"use strict";e.d(I,{W:()=>E,r:()=>u});var t=e(96540),n=e(11261),r=e(27310),s=e(52622),o=e(88575),m=e(94354),l=e(10354),i=e(88323),c=e(52198);function u(h,y,a){const v=["Axis"];h.addRadio({path:"axisPlacement",name:"Placement",category:v,defaultValue:c.t.axisPlacement[0].value,settings:{options:c.t.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:v,defaultValue:"",settings:{placeholder:"Optional text",expandTemplateVars:!0},showIf:g=>g.axisPlacement!==s.vM.Hidden,shouldApply:g=>g.type!==n.PU.time&&g.type!==n.PU.string}).addNumberInput({path:"axisWidth",name:"Width",category:v,settings:{placeholder:"Auto"},showIf:g=>g.axisPlacement!==s.vM.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:v,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]},showIf:g=>g.axisPlacement!==s.vM.Hidden}).addRadio({path:"axisColorMode",name:"Color",category:v,defaultValue:s.Y$.Text,settings:{options:[{value:s.Y$.Text,label:"Text"},{value:s.Y$.Series,label:"Series"}]},showIf:g=>g.axisPlacement!==s.vM.Hidden}).addBooleanSwitch({path:"axisBorderShow",name:"Show border",category:v,defaultValue:!1,showIf:g=>g.axisPlacement!==s.vM.Hidden}),h.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:v,editor:E,override:E,defaultValue:{type:s.L4.Linear},shouldApply:g=>g.type===n.PU.number,process:r.hS}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:v,defaultValue:!1,showIf:g=>g.scaleDistribution?.type!==s.L4.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:y.axisSoftMin,category:v,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:y.axisSoftMax,category:v,settings:{placeholder:"See: Standard options > Max"}})}const f=[{label:"Linear",value:s.L4.Linear},{label:"Logarithmic",value:s.L4.Log},{label:"Symlog",value:s.L4.Symlog}],d=[{label:"2",value:2},{label:"10",value:10}],E=({value:h,onChange:y})=>{const a=h?.type??s.L4.Linear,v=h?.log??2;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(m.z,{value:a,options:f,onChange:g=>{y({...h,type:g,log:g===s.L4.Linear?void 0:v})}})),(a===s.L4.Log||a===s.L4.Symlog)&&t.createElement(o.D,{label:"Log base"},t.createElement(i.l6,{options:d,value:v,onChange:g=>{y({...h,log:g.value})}})),a===s.L4.Symlog&&t.createElement(o.D,{label:"Linear threshold"},t.createElement(l.p,{placeholder:"1",value:h?.linearThreshold,onChange:g=>{y({...h,linearThreshold:Number(g.currentTarget.value)})}})))}},11404:(Y,I,e)=>{"use strict";e.d(I,{e:()=>l});var t=e(2543),n=e.n(t),r=e(96540),s=e(92174),o=e(66864);const m=({value:i,onChange:c})=>{const u=(0,r.useCallback)(f=>{c({...i,[f]:!i[f]})},[i,c]);return r.createElement(o.Gy,{spacing:"xs"},Object.keys(i).map(f=>{const d=f;return r.createElement(s.m,{icon:i[d]?"eye-slash":"eye",onClick:()=>u(d),key:d,label:(0,t.startCase)(d),selected:i[d]})}))};function l(i){i.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:m,override:m,shouldApply:()=>!0,hideFromDefaults:!0,process:c=>c})}},22680:(Y,I,e)=>{"use strict";e.d(I,{H:()=>r});var t=e(69550),n=e(52622);function r(s,o=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.lm.List,settings:{options:[{value:n.lm.List,label:"List"},{value:n.lm.Table,label:"Table"}]},showIf:m=>m.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:m=>m.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:m=>m.legend.showLegend&&m.legend.placement==="right"}),o&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.D.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:m=>m.legend.showLegend!==!1})}},56675:(Y,I,e)=>{"use strict";e.d(I,{I:()=>f,m:()=>u});var t=e(96540),n=e(27310),r=e(11261),s=e(52622),o=e(94354),m=e(29158),l=e(10354),i=e(66864),c=e(52198);const u=({value:d,context:E,onChange:h,item:y})=>t.createElement(i.Gy,null,t.createElement(o.z,{value:d?.mode||s.gs.None,options:y.settings?.options??[],onChange:a=>{h({...d,mode:a})}}),E.isOverride&&d?.mode&&d?.mode!==s.gs.None&&t.createElement(l.p,{type:"text",placeholder:"Group",suffix:t.createElement(m.K,{name:"question-circle",tooltip:"Name of the stacking group",tooltipPlacement:"top"}),defaultValue:d?.group,onChange:a=>{h({...d,group:a.currentTarget.value.trim()})}}));function f(d,E,h=["Graph styles"]){d.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:h,defaultValue:E,editor:u,override:u,settings:{options:c.t.stacking},process:n.hS,shouldApply:y=>y.type===r.PU.number})}},71242:(Y,I,e)=>{"use strict";e.d(I,{I:()=>t});function t(n,r=!0){r&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},89654:(Y,I,e)=>{"use strict";e.d(I,{D:()=>n});var t=e(52622);function n(r,s=!1,o=!1,m){const l=["Tooltip"],i=s?[{value:t.$N.Single,label:"Single"},{value:t.$N.None,label:"Hidden"}]:[{value:t.$N.Single,label:"Single"},{value:t.$N.Multi,label:"All"},{value:t.$N.None,label:"Hidden"}],c=[{value:t.xB.None,label:"None"},{value:t.xB.Ascending,label:"Ascending"},{value:t.xB.Descending,label:"Descending"}];r.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:l,defaultValue:m?.tooltip?.mode??t.$N.Single,settings:{options:i}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:l,defaultValue:m?.tooltip?.sort??t.xB.None,showIf:u=>u.tooltip?.mode===t.$N.Multi,settings:{options:c}}),o&&r.addNumberInput({path:"tooltip.hoverProximity",name:"Hover proximity",description:"How close the cursor must be to a point to trigger the tooltip, in pixels",category:l,settings:{integer:!0}}),r.addNumberInput({path:"tooltip.maxWidth",name:"Max width",category:l,settings:{integer:!0},showIf:u=>!1}).addNumberInput({path:"tooltip.maxHeight",name:"Max height",category:l,defaultValue:600,settings:{integer:!0},showIf:u=>!1})}},42482:(Y,I,e)=>{"use strict";e.d(I,{j:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.W,StackingEditor:()=>l.m,addAxisConfig:()=>n.r,addHideFrom:()=>r.e,addLegendOptions:()=>s.H,addStackingConfig:()=>l.I,addTextSizeOptions:()=>m.I,addTooltipOptions:()=>o.D});var n=e(38248),r=e(11404),s=e(22680),o=e(89654),m=e(71242),l=e(56675)},49149:(Y,I,e)=>{"use strict";e.d(I,{$N:()=>t.$N,Lt:()=>t.Lt,Ly:()=>t.Ly,Nj:()=>t.Nj,ON:()=>t.ON,TC:()=>t.yL,dx:()=>t.dx,gs:()=>t.gs,lm:()=>t.lm,nT:()=>t.yL,ob:()=>t.ob,on:()=>t.on,vM:()=>t.vM,yg:()=>t.GR});var t=e(52622)},74738:(Y,I,e)=>{"use strict";e.d(I,{v:()=>t});function t(){return{onKeyDown(n,r,s){const o=r.value;if(o.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const m=o.anchorText.text,l=o.selection.anchor.offset,c=m.length-l;return r.deleteForward(c),!0}return s()}}}},99453:(Y,I,e)=>{"use strict";e.d(I,{s:()=>r});const t=(s,o,m)=>{if(!s.length)return;const l=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(o,l+m)},n=s=>s?.replace(/[\uFEFF]/g,"");function r(){const s={onCopy(o,m,l){o.preventDefault();const{document:i,selection:c}=m.value,{start:{offset:u},end:{offset:f}}=c,d=i.getLeafBlocksAtRange(c).toArray().map(h=>h.text),E=n(t(d,u,f));return E&&o.clipboardData&&o.clipboardData.setData("Text",E),!0},onPaste(o,m,l){if(o.preventDefault(),o.clipboardData){const c=n(o.clipboardData.getData("Text"))?.split(`
`);if(c&&c.length){m.insertText(c[0]);for(const u of c.slice(1))m.splitBlock().insertText(u)}}return!0}};return{...s,onCut(o,m,l){return s.onCopy(o,m,l),m.deleteAtRange(m.value.selection),!0}}}},1020:(Y,I,e)=>{"use strict";e.d(I,{T:()=>u});var t=e(57746),n=e(82611),r=e(52845);const s=(0,t.Sn)("mod+["),o=(0,t.Sn)("shift+tab"),m=(0,t.Sn)("mod+]"),l="  ",i=(f,d,E)=>{const{startBlock:h,endBlock:y,selection:{start:{offset:a,key:v},end:{offset:g,key:b}}}=d.value;if(r.A.serialize(d.value)==="")return;f.preventDefault();const P=h.getFirstText();P&&a===0&&v===P.key&&g===P.text.length&&b===P.key||!h.equals(y)?c(d,"right"):d.insertText(l)},c=(f,d)=>{const E=f.value.selection,h=f.value.document.getLeafBlocksAtRange(E).toArray();if(d==="left")for(const y of h){const a=y.text.length-y.text.trimLeft().length,v=y.getFirstText().key,g={anchor:{key:v,offset:a,path:[]},focus:{key:v,offset:a,path:[]}};f.deleteBackwardAtRange(n.Q6.create(g),Math.min(l.length,a))}else{const{startText:y}=f.value,a=y.text.slice(0,E.start.offset),v=/^\s*$/.test(a);for(const g of h)f.insertTextByKey(g.getFirstText().key,0,l);v&&f.moveStartBackward(l.length)}};function u(){return{onKeyDown(f,d,E){if(s(f)||o(f))f.preventDefault(),c(d,"left");else if(m(f))f.preventDefault(),c(d,"right");else if(f.key==="Tab")i(f,d,E);else return E();return!0}}}},50955:(Y,I,e)=>{"use strict";e.d(I,{e1:()=>s,vJ:()=>o.v,sW:()=>m.s,TA:()=>l.T,Om:()=>i.O,Ul:()=>c.U,l9:()=>u.l,De:()=>f.D,Pz:()=>d.Pz});var t=e(62938);const n={"[":"]","{":"}","(":")"},r="brace_match";function s(){return{onKeyDown(E,h,y){const{value:a}=h;switch(E.key){case"(":case"{":case"[":{const{start:{offset:v,key:g},end:{offset:b,key:P},focus:{offset:C}}=a.selection,D=a.focusText.text;if(a.selection.isExpanded)return E.preventDefault(),h.insertTextByKey(g,v,E.key).insertTextByKey(P,b+1,n[E.key]).moveEndBackward(1),!0;if(C===D.length||D[C]===" "||Object.values(n).includes(D[C])){E.preventDefault();const T=n[E.key],M={key:`${r}-${(0,t.A)()}`,type:`${r}-${T}`,anchor:{key:g,offset:v,object:"point"},focus:{key:P,offset:b+1,object:"point"},object:"annotation"};return h.insertText(E.key).insertText(T).addAnnotation(M).moveBackward(1),!0}break}case")":case"}":case"]":{const v=a.anchorText.text,g=a.selection.anchor.offset,b=v[g],P=E.key,C=`${r}-${P}`,D=a.annotations.find(T=>T?.type===C&&T.anchor.key===a.anchorText.key);if(D&&b===P&&!a.selection.isExpanded)return E.preventDefault(),h.moveFocusForward(1).removeAnnotation(D).moveAnchorForward(1),!0;break}case"Backspace":{const v=a.anchorText.text,g=a.selection.anchor.offset,b=v[g-1],P=v[g];if(n[b]&&n[b]===P)return E.preventDefault(),h.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return y()}}}var o=e(74738),m=e(99453),l=e(1020),i=e(88295),c=e(4269),u=e(31589),f=e(41781),d=e(80903)},88295:(Y,I,e)=>{"use strict";e.d(I,{O:()=>n});function t(r){let s=r.length-r.trimLeft().length;if(s){let o=r[0];for(;--s;)o+=r[0];return o}return""}function n(){return{onKeyDown(r,s,o){const m=s.value;if(m.selection.isExpanded)return o();if(r.key==="Enter"){r.preventDefault();const{startBlock:l}=m,i=l.text,c=t(i);return s.splitBlock().insertText(c).focus()}return o()}}}},4269:(Y,I,e)=>{"use strict";e.d(I,{U:()=>t});function t({handler:n}){return{onKeyDown(r,s,o){return n&&r.key==="Enter"&&(r.shiftKey||r.ctrlKey)?(r.preventDefault(),n(r),s):o()}}}},31589:(Y,I,e)=>{"use strict";e.d(I,{l:()=>r});var t=e(57746);const n=(0,t.Sn)("mod+l");function r(){return{onKeyDown(s,o,m){if(n(s)){s.preventDefault();const{focusBlock:l,document:i}=o.value;o.moveAnchorToStartOfBlock(),i.getNextBlock(l.key)?o.moveFocusToStartOfNextBlock():o.moveFocusToEndOfText()}else return m();return!0}}}},84694:(Y,I,e)=>{"use strict";e.d(I,{A:()=>n});const n="prism-token"},41781:(Y,I,e)=>{"use strict";e.d(I,{D:()=>d,R:()=>a});var t=e(28848),n=e.n(t),r=e(82611),s=e(84694),o=e(49568),m=e(96540);function l(v){return v.object==="block"&&v.type==="code_block"}function i(v){return"javascript"}function c(v,g,b){const{decoration:P}=v;if(P.type!==s.A)return b();const C=P.data.get("className");return m.createElement("span",{className:C},v.children)}class u extends(0,o.Record)({onlyIn:l,getSyntax:i,renderDecoration:c}){constructor(g){super(g)}}const f=u;function d(v={},g=n().languages){const b=new f(v);return{decorateNode:(P,C,D)=>{if(!b.onlyIn(P))return D();const T=r.eB.create(P),M=b.getSyntax(T),O=g[M];if(!O)return[];const p=T.getTexts().map(B=>B&&B.getText()).join(`
`),x=n().tokenize(p,O),A=a(x),R=C.value.data.set("tokens",A);return C.setData(R),E(b,x,T)},renderDecoration:(P,C,D)=>b.renderDecoration({children:P.children,decoration:P.decoration},C,D)}}function E(v,g,b){const P=b.getTexts(),C=[];let D=0,T=0;return P.forEach(M=>{T=D+M.getText().length;let O=0;function S(p,x){if(typeof p=="string"){if(x){const A=h({text:M,textStart:D,textEnd:T,start:O,end:O+p.length,className:`prism-token token ${x}`,block:b});A&&C.push(A)}O+=p.length}else if(x=`${x} ${p.type}`,p.alias&&(x+=" "+p.alias),typeof p.content=="string"){const A=h({text:M,textStart:D,textEnd:T,start:O,end:O+p.content.length,className:`prism-token token ${x}`,block:b});A&&C.push(A),O+=p.content.length}else for(let A=0;A<p.content.length;A+=1)S(p.content[A],x)}g.forEach(S),D=T+1}),C}function h({text:v,textStart:g,textEnd:b,start:P,end:C,className:D,block:T}){return P>=b||C<=g?null:(P=Math.max(P,g),C=Math.min(C,b),P-=g,C-=g,T.createDecoration({object:"decoration",anchor:{key:v.key,offset:P,object:"point"},focus:{key:v.key,offset:C,object:"point"},type:s.A,data:{className:D}}))}function y(v){return typeof v=="string"?[{content:v,types:[],aliases:[]}]:Array.isArray(v)?v.flatMap(g=>y(g)):v instanceof n().Token?y(v.content).flatMap(g=>{let b=[];return typeof v.alias=="string"?b=[v.alias]:b=v.alias??[],{content:g.content,types:[v.type,...g.types],aliases:[...b,...g.aliases]}}):[]}function a(v){const g=y(v);if(!g.length)return[];const b=g[0];b.prev=null,b.next=g.length>=2?g[1]:null,b.offsets={start:0,end:b.content.length};for(let C=1;C<g.length-1;C++)g[C].prev=g[C-1],g[C].next=g[C+1],g[C].offsets={start:g[C-1].offsets.end,end:g[C-1].offsets.end+g[C].content.length};const P=g[g.length-1];return P.prev=g.length>=2?g[g.length-2]:null,P.next=null,P.offsets={start:g.length>=2?g[g.length-2].offsets.end:0,end:g.length>=2?g[g.length-2].offsets.end+P.content.length:P.content.length},g}},80903:(Y,I,e)=>{"use strict";e.d(I,{Pz:()=>B});var t=e(2543),n=e(96540),r=e(40961),s=e(97222),o=e(60578),m=e(50774),l=e(49579);const i=K=>K.reduce((w,{items:L,label:V})=>(w.push({label:V,kind:m.I.GroupTitle}),L.reduce((N,z)=>(N.push(z),N),w)),[]),c=K=>K.reduce((w,L)=>w.length<L.label.length?L.label:w,""),u=(K,w,L)=>{const V=(0,l.A)(L,{font:K.typography.fontFamilyMonospace,fontSize:K.typography.bodySmall.fontSize,fontWeight:"normal"}),N=d(V.width,K),z=f(V.height,K),J=E(z,w);return{listWidth:N,listHeight:J,itemHeight:z}},f=(K,w)=>{const L=w.spacing.gridSize*2;return K+L},d=(K,w)=>{const L=w.spacing.gridSize*3;return Math.min(Math.max(K+L,200),800)},E=(K,w)=>{const L=Math.min(w.length,10),V=100,N=L*K;return Math.max(N,V)};var h=e(32196),y=e(36663),a=e(40845);const v=(K,w,L)=>({typeaheadItem:(0,h.css)({label:"type-ahead-item",zIndex:11,padding:K.spacing(1,1,1,2),border:K.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:K.colors.background.secondary,color:K.colors.text.secondary,boxShadow:`0 0 20px ${K.v1.colors.dropdownShadow}`,visibility:L===!0?"visible":"hidden",width:"250px",minHeight:`${w+parseInt(K.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),g=({item:K,height:w})=>{const L=K&&!!K.documentation,V=K?K.label:"",N=(0,y.G)(K?.documentation),z=(0,a.$j)(),J=v(z,w,L);return n.createElement("div",{className:(0,h.cx)([J.typeaheadItem])},n.createElement("b",null,V),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:N}}))};var b=e(23257),P=e.n(b),C=e(5313);const D=K=>({typeaheadItem:(0,h.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:K.typography.fontFamilyMonospace,padding:K.spacing(1,1,1,2),fontSize:K.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}),typeaheadItemSelected:(0,h.css)({label:"type-ahead-item-selected",backgroundColor:K.colors.background.secondary}),typeaheadItemMatch:(0,h.css)({label:"type-ahead-item-match",color:K.v1.palette.yellow,borderBottom:`1px solid ${K.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,h.css)({label:"type-ahead-item-group-title",color:K.colors.text.secondary,fontSize:K.typography.bodySmall.fontSize,lineHeight:K.typography.body.lineHeight,padding:K.spacing(1)})}),T=K=>{const w=(0,a.of)(D),{isSelected:L,item:V,prefix:N,style:z,onMouseEnter:J,onMouseLeave:G,onClickItem:H}=K,q=L?(0,h.cx)([w.typeaheadItem,w.typeaheadItemSelected]):(0,h.cx)([w.typeaheadItem]),le=(0,h.cx)([w.typeaheadItemMatch]),me=(0,h.cx)([w.typeaheadItemGroupTitle]),k=V.label||"";return V.kind===m.I.GroupTitle?n.createElement("li",{className:me,style:z},n.createElement("span",null,k)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:q,style:z,onMouseDown:H,onMouseEnter:J,onMouseLeave:G,type:"button"},V.highlightParts!==void 0?n.createElement(C.z,{text:k,highlightClassName:le,highlightParts:V.highlightParts}):n.createElement(P(),{textToHighlight:k,searchWords:[N??""],autoEscape:!0,highlightClassName:le})))},M=(K,w)=>K-w*Math.floor(K/w);class O extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const w=i(this.props.groupedItems),L=c(w),{listWidth:V,listHeight:N,itemHeight:z}=u(this.context,w,L);this.setState({listWidth:V,listHeight:N,itemHeight:z,allItems:w})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(w,L)=>{if(this.state.typeaheadIndex!==null&&L.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(w.groupedItems,this.props.groupedItems)===!1){const V=i(this.props.groupedItems),N=c(V),{listWidth:z,listHeight:J,itemHeight:G}=u(this.context,V,N);this.setState({listWidth:z,listHeight:J,itemHeight:G,allItems:V,typeaheadIndex:null})}},this.onMouseEnter=w=>{this.setState({hoveredItem:w})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=w=>{const L=this.state.allItems.length;if(L){const V=this.state.typeaheadIndex||0;let N=M(V+w,L);this.state.allItems[N].kind===m.I.GroupTitle&&(N=M(N+w,L)),this.setState({typeaheadIndex:N});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}static{this.contextType=o.D}get menuPosition(){if(!window.getSelection)return"";const w=window.getSelection(),L=w&&w.anchorNode;if(L&&L.parentElement){const V=L.parentElement.getBoundingClientRect(),N=window.scrollX,z=window.scrollY;return`position: absolute; display: flex; top: ${V.top+z+V.height+6}px; left: ${V.left+N-2}px`}return""}render(){const{prefix:w,isOpen:L=!1,origin:V}=this.props,{allItems:N,listWidth:z,listHeight:J,itemHeight:G,hoveredItem:H,typeaheadIndex:q}=this.state,le=H||q,me=N[H||q||0];return n.createElement(S,{origin:V,isOpen:L,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.Y1,{ref:this.listRef,itemCount:N.length,itemSize:G,itemKey:k=>{const ee=N&&N[k];return ee?`${k}-${ee.label}`:`${k}`},width:z,height:J},({index:k,style:ee})=>{const X=N&&N[k];return X?n.createElement(T,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(X):{},isSelected:q===null?!1:N[q]===X,item:X,prefix:w,style:ee,onMouseEnter:()=>this.onMouseEnter(k),onMouseLeave:this.onMouseLeave}):null})),le&&n.createElement(g,{height:J,item:me}))}}class S extends n.PureComponent{constructor(w){super(w);const{index:L=0,origin:V="query",style:N}=w;this.node=document.createElement("div"),this.node.setAttribute("style",N),this.node.classList.add("slate-typeahead",`slate-typeahead-${V}-${L}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),r.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var p=e(72307),x=e(75071),A=e(84694);const R=250;function B({onTypeahead:K,cleanText:w,onWillApplySuggestion:L,portalOrigin:V}){let N,z={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const J=(0,t.debounce)(U,R),G=H=>{z={...z,...H}};return{onBlur:(H,q,le)=>(z={...z,groupedItems:[]},le()),onClick:(H,q,le)=>(z={...z,groupedItems:[]},le()),onKeyDown:(H,q,le)=>{const k=z.groupedItems.length;switch(H.key){case"Escape":{if(k)return H.preventDefault(),z={...z,groupedItems:[]},q.insertText("");break}case"ArrowDown":case"ArrowUp":if(k){H.preventDefault(),N.moveMenuIndex(H.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(H.shiftKey||H.ctrlKey)&&k)return H.preventDefault(),N.insertSuggestion();break}case"Tab":{if(k)return H.preventDefault(),N.insertSuggestion();break}default:{H.key.length===1&&J(q,G,K,w);break}}return le()},commands:{selectSuggestion:(H,q)=>{const le=z.groupedItems;if(!le||!le.length)return H;const me=H.applyTypeahead(q);return J(H,G,K,w),me},applyTypeahead:(H,q)=>{let le=q.insertText||q.label;const me=q.kind==="function",k=q.move||0,ee=k>0?k:0,X=k<0?-k:0,{typeaheadPrefix:j,typeaheadText:ne,typeaheadContext:te}=z;L&&(le=L(le,{groupedItems:z.groupedItems,typeaheadContext:te,typeaheadPrefix:j,typeaheadText:ne}));const{forward:oe,backward:ie}=F(le,j,ne,me,q.deleteBackwards,w);if(le.match(/\n/)){const ue=(0,p.dF)(le);return H.deleteBackward(ie).deleteForward(oe).insertFragment(ue).focus(),H}return z={...z,groupedItems:[]},H.snapshotSelection().deleteBackward(ie).deleteForward(oe).insertText(le).moveForward(ee).moveBackward(X).focus(),H}},renderEditor(H,q,le){if(q.value.selection.isExpanded)return le();const me=le();return n.createElement(n.Fragment,null,me,n.createElement(O,{menuRef:k=>N=k,origin:V,prefix:z.typeaheadPrefix,isOpen:!!z.groupedItems.length,groupedItems:z.groupedItems,onSelectSuggestion:q.selectSuggestion}))}}}const U=async(K,w,L,V)=>{if(!L)return;const{value:N}=K,{selection:z}=N,J=N.document.getClosestBlock(N.focusBlock.key),G=N.selection.start.offset-1,H=J&&J.getDecorations(K),q=H?H.filter(ie=>ie.start.offset<=G&&ie.end.offset>G&&ie.type===A.A).toArray():[],le=H&&H.filter(ie=>ie.end.offset<=G&&ie.type===A.A&&ie.data.get("className").includes("label-key")).last(),me=le&&N.focusText.text.slice(le.start.offset,le.end.offset),k=q.map(ie=>ie.data.get("className")).join(" ").split(" ").filter(ie=>ie.length);let ee=N.focusText.text,X=ee.slice(0,z.focus.offset);q.length&&(ee=N.focusText.text.slice(q[0].start.offset,q[0].end.offset),X=N.focusText.text.slice(q[0].start.offset,z.focus.offset));const j=X.match(/(?:!?=~?"?|")(.*)/);j?X=j[1]:V&&(X=V(X));const{suggestions:ne,context:te}=await L({prefix:X,text:ee,value:N,wrapperClasses:k,labelKey:me||void 0,editor:K}),oe=ne.map(ie=>{if(!ie.items)return ie;const ue=ie.searchFunctionType||(ie.prefixMatch?x.T.Prefix:x.T.Word),be=x.H[ue];let ge={...ie};return X&&(ie.skipFilter||(ge.items=ge.items.filter(re=>(re.filterText||re.label).length>=X.length),ge.items=be(ge.items,X)),ge.items=ge.items.filter(re=>!(re.insertText===X||(re.filterText??re.label)===X))),ie.skipSort||(ge.items=(0,t.sortBy)(ge.items,re=>re.sortText===void 0?re.sortValue!==void 0?re.sortValue:re.label:re.sortText||re.label)),ge}).filter(ie=>ie.items&&ie.items.length);w({groupedItems:oe,typeaheadPrefix:X,typeaheadContext:te,typeaheadText:ee}),K.blur().focus()};function F(K,w,L,V,N,z){const J=N||w.length,G=z?z(L):L,H=L.indexOf(w),q=H>-1?G.length-H-w.length:G.length-w.length;return{forward:!!(w&&q>0||K===L)&&!V?q+H:0,backward:J}}},93218:(Y,I,e)=>{"use strict";e.d(I,{k:()=>y});var t=e(94659),n=e(96540),r=e(40845);function s(a){return(0,t.css)({".panel-options-group":{borderBottom:`1px solid ${a.colors.border.weak}`},".panel-options-group__header":{padding:a.spacing(1,2,1,1),position:"relative",display:"flex",alignItems:"center",cursor:"pointer",fontWeight:500,color:a.colors.text.primary,"&:hover":{background:a.colors.emphasize(a.colors.background.primary,.03)}},".panel-options-group__icon":{color:a.colors.text.secondary,marginRight:a.spacing(1),padding:a.spacing(0,.9,0,.6)},".panel-options-group__title":{position:"relative"},".panel-options-group__body":{padding:a.spacing(1,2,1,4)}})}function o(a){return(0,t.css)({".card-section":{marginBottom:a.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:a.colors.background.secondary,boxShadow:"none",padding:a.spacing(2),borderRadius:"4px","&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03)},".label-tag":{marginLeft:a.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:a.spacing(2)},".card-item-type":{color:a.colors.text.secondary,textTransform:"uppercase",fontSize:a.typography.size.sm,fontWeight:a.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:a.typography.size.sm},".card-item-name":{color:a.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:a.spacing(1)},".card-item-sub-name":{color:a.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:a.colors.text.secondary,textTransform:"uppercase",marginBottom:a.spacing(2),fontSize:a.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:a.typography.size.sm,display:"inline-block",marginLeft:a.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:a.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:a.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:a.typography.h3.fontSize},[a.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[a.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[a.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:a.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:"2px"},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:a.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:a.typography.h4.fontSize},".card-item-sub-name":{fontSize:a.typography.size.sm},".layout-selector":{marginRight:0}}})}var m=e(16797);function l(a){return(0,t.css)({html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",height:"100%",fontSize:`${a.typography.htmlFontSize}px`,fontFamily:a.typography.fontFamily,lineHeight:a.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:a.colors.mode},body:{height:"100%",width:"100%",position:"absolute",color:a.colors.text.primary,backgroundColor:a.colors.background.canvas,...i(a.typography.body)},"h1, .h1":i(a.typography.h1),"h2, .h2":i(a.typography.h2),"h3, .h3":i(a.typography.h3),"h4, .h4":i(a.typography.h4),"h5, .h5":i(a.typography.h5),"h6, .h6":i(a.typography.h6),p:{margin:a.spacing(0,0,2)},button:{letterSpacing:a.typography.body.letterSpacing,"&:focus-visible":(0,m.getFocusStyles)(a),"&:focus":{outline:"none"}},small:{fontSize:a.typography.bodySmall.fontSize},"b, strong":{fontWeight:a.typography.fontWeightMedium},em:{fontStyle:"italic",color:a.colors.text.primary},cite:{fontStyle:"normal"},".muted":{color:a.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:a.colors.text.primary},".text-warning":{color:a.colors.warning.text,"&:hover, &:focus":{color:a.colors.emphasize(a.colors.warning.text,.15)}},".text-error":{color:a.colors.error.text,"&:hover, &:focus":{color:a.colors.emphasize(a.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:a.colors.emphasize(a.colors.success.text,.15)}},a:{cursor:"pointer",color:a.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,m.getFocusStyles)(a),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:a.components.textHighlight.background,color:a.components.textHighlight.text,padding:0}})}function i(a){return{margin:0,fontSize:a.fontSize,lineHeight:a.lineHeight,fontWeight:a.fontWeight,letterSpacing:a.letterSpacing,fontFamily:a.fontFamily,marginBottom:"0.45em"}}function c(a){return(0,t.css)({"iframe.intercom-borderless-frame":{colorScheme:a.colors.mode}})}function u(a){return(0,t.css)({"input, button, select, textarea":{fontFamily:a.typography.body.fontFamily,fontSize:a.typography.body.fontSize,fontWeight:a.typography.body.fontWeight,lineHeight:a.typography.body.lineHeight},"input, select":{backgroundColor:a.components.input.background,color:a.components.input.text,border:"none",boxShadow:"none"},textarea:{height:"auto"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"}})}function f(a){return(0,t.css)({})}function d(a){const v=a.breakpoints.values.xxl+a.spacing.gridSize*2+a.components.sidemenu.width;return(0,t.css)({".grafana-app":{display:"flex",alignItems:"stretch",position:"absolute",width:"100%",height:"100%",top:0,left:0},".main-view":{position:"relative",display:"flex",flexDirection:"column",flexGrow:1,height:"100%",flex:"1 1 0",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{margin:a.spacing(0,1)},[a.breakpoints.up("md")]:{margin:a.spacing(0,2)},[`@media (min-width: ${v}px)`]:{maxWidth:`${a.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:a.spacing(2),paddingLeft:a.spacing(2),paddingRight:a.spacing(2)},".page-body":{padding:a.spacing(1),background:a.components.panel.background,border:`1px solid ${a.components.panel.borderColor}`,marginBottom:"32px",[a.breakpoints.up("md")]:{padding:a.spacing(2)},[a.breakpoints.up("lg")]:{padding:a.spacing(3)}},".page-heading":{fontSize:a.typography.h4.fontSize,marginTop:0,marginBottom:a.spacing(2)},".page-action-bar":{marginBottom:a.spacing(2),display:"flex",alignItems:"flex-start",gap:a.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:a.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:a.spacing(2)},".page-sub-heading-icon":{marginLeft:a.spacing(1),marginTop:a.spacing(.5)},".page-hidden":{display:"none"}})}var E=e(72129);const h=a=>(0,t.css)({".react-loading-skeleton":E.Q});function y(){const a=(0,r.$j)();return n.createElement(t.Global,{styles:[l(a),c(a),u(a),d(a),o(a),s(a),f(a),h(a)]})}},40845:(Y,I,e)=>{"use strict";e.d(I,{$j:()=>E,DP:()=>d,IS:()=>h,SL:()=>u,cV:()=>f,fq:()=>a,of:()=>y});var t=e(4146),n=e.n(t),r=e(47078),s=e.n(r),o=e(96540),m=e(60578),l=e(3911);let i=null;const c=new WeakMap,u=v=>{const g=b=>{const P=i||m.D;return o.createElement(P.Consumer,null,C=>o.createElement(v,{...b,theme:C.v1}))};return g.displayName=`WithTheme(${v.displayName})`,n()(g,v),g},f=v=>{const g=b=>{const P=i||m.D;return o.createElement(P.Consumer,null,C=>o.createElement(v,{...b,theme:C}))};return g.displayName=`WithTheme(${v.displayName})`,n()(g,v),g};function d(){return(0,o.useContext)(i||m.D).v1}function E(){return(0,o.useContext)(i||m.D)}function h(v){const g=d();let b=c.get(v);return b||(b=(0,l.N)(v),c.set(v,b)),b(g)}function y(v,...g){const b=E();let P=c.get(v);return P||(P=s()(v,{maxSize:10}),c.set(v,P)),P(b,...g)}const a=v=>(i=o.createContext(v),()=>{i=null})},7918:(Y,I,e)=>{"use strict";e.d(I,{kH:()=>i.k,Dx:()=>t.D,O4:()=>o,mG:()=>m,fq:()=>n.fq,YF:()=>c,N3:()=>l.N,IS:()=>n.IS,of:()=>n.of,DP:()=>n.DP,$j:()=>n.$j,SL:()=>n.SL,cV:()=>n.cV});var t=e(60578),n=e(40845),r=e(75972);let s;const o=(u="dark")=>s?s(u):(0,r.a)({colors:{mode:u}}).v1,m=u=>(s=u,()=>{s=null});var l=e(3911),i=e(93218),c=e(16797)},16797:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{cardChrome:()=>n,focusCss:()=>i,getFocusStyles:()=>u,getMouseFocusStyles:()=>c,getTooltipContainerStyles:()=>f,hoverColor:()=>r,listItem:()=>s,listItemSelected:()=>o,mediaUp:()=>m});var t=e(84140);function n(d){return`
    background: ${d.colors.background.secondary};
    &:hover {
      background: ${r(d.colors.background.secondary,d)};
    }
    box-shadow: ${d.components.panel.boxShadow};
    border-radius: ${d.shape.radius.default};
`}function r(d,E){return E.isDark?(0,t.A)(d).brighten(2).toString():(0,t.A)(d).darken(2).toString()}function s(d){return`
  background: ${d.colors.background.secondary};
  &:hover {
    background: ${r(d.colors.background.secondary,d)};
  }
  box-shadow: ${d.components.panel.boxShadow};
  border-radius: ${d.shape.radius.default};
`}function o(d){return`
    background: ${r(d.colors.background.secondary,d)};
    color: ${d.colors.text.maxContrast};
`}function m(d){return`only screen and (min-width: ${d})`}const l=d=>d.hasOwnProperty("v1"),i=d=>{const E=l(d),h=E?d.colors.background.canvas:d.colors.bodyBg,y=E?d.colors.primary.main:d.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${h}, 0 0 0px 4px ${y};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function c(d){return{outline:"none",boxShadow:"none"}}function u(d){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${d.colors.background.canvas}, 0 0 0px 4px ${d.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const f=d=>({overflow:"hidden",background:d.colors.background.secondary,boxShadow:d.shadows.z2,maxWidth:"800px",padding:d.spacing(1),borderRadius:d.shape.radius.default,zIndex:d.zIndex.tooltip})},3911:(Y,I,e)=>{"use strict";e.d(I,{N:()=>r});var t=e(47078),n=e.n(t);function r(s){return n()(s)}},50774:(Y,I,e)=>{"use strict";e.d(I,{I:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},29621:()=>{"use strict"},4025:(Y,I,e)=>{"use strict";e.d(I,{GO:()=>s,SS:()=>o,Uo:()=>t.Uo,lV:()=>m,rJ:()=>r});var t=e(8887),n=e(11261);const r=l=>["xs","sm","md","lg","xl","xxl","xxxl"].includes(l),s=()=>Object.keys(t.az);function o(l){return m(l?.type)}function m(l){if(l)switch(l){case n.PU.time:return"clock-nine";case n.PU.string:return"font";case n.PU.number:return"calculator-alt";case n.PU.boolean:return"toggle-on";case n.PU.trace:return"info-circle";case n.PU.enum:return"list-ol";case n.PU.geo:return"map-marker";case n.PU.other:return"brackets-curly"}return"question-circle"}},80186:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{CompletionItemKind:()=>o.I,getAvailableIcons:()=>i.GO,getFieldTypeIcon:()=>i.SS,getFieldTypeIconName:()=>i.lV,isIconSize:()=>i.rJ,toIconName:()=>i.Uo});var t=e(64611),n=e.n(t),y={};for(const a in t)a!=="default"&&(y[a]=()=>t[a]);e.d(I,y);var r=e(11866),s=e.n(r),y={};for(const a in r)a!=="default"&&(y[a]=()=>r[a]);e.d(I,y);var o=e(50774),m=e(29621),l=e.n(m),y={};for(const a in m)["default","CompletionItemKind"].indexOf(a)<0&&(y[a]=()=>m[a]);e.d(I,y);var i=e(4025),c=e(19932),u=e.n(c),y={};for(const a in c)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(a)<0&&(y[a]=()=>c[a]);e.d(I,y);var f=e(72389),d=e.n(f),y={};for(const a in f)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(a)<0&&(y[a]=()=>f[a]);e.d(I,y);var E=e(65484),h=e.n(E),y={};for(const a in E)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","isIconSize","toIconName"].indexOf(a)<0&&(y[a]=()=>E[a]);e.d(I,y)},11866:()=>{"use strict"},65484:()=>{"use strict"},19932:()=>{"use strict"},72389:()=>{"use strict"},64611:()=>{"use strict"},40321:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>t});const t=(n,r)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&r())}},24284:(Y,I,e)=>{"use strict";e.d(I,{Ih:()=>v,Mk:()=>o,Tj:()=>f,UJ:()=>u,Xw:()=>m,ct:()=>c,mZ:()=>a,nO:()=>i,sg:()=>y,xj:()=>l});var t=e(2543),n=e.n(t),r=e(84140);const s=4,o="rgba(0, 211, 255, 1)",m="rgba(11, 237, 50, 1)",l="rgba(237, 46, 24, 1)",i="rgba(150, 150, 150, 1)",c="rgba(247, 149, 32, 1)",u=.09,f=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function d(g){const b=(0,t.map)(g,E),P=(0,t.sortBy)(b,["h"]),C=(0,t.chunk)(P,s),D=(0,t.map)(C,M=>(0,t.sortBy)(M,"l")),T=(0,t.flattenDeep)((0,t.zip)(...D));return(0,t.map)(T,h)}function E(g){return(0,r.A)(g).toHsl()}function h(g){return(0,r.A)(g).toHexString()}function y(g){return(0,r.A)(g).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function a(g,b){const P=(0,r.A)(g),C=P.getBrightness();return P.getAlpha()<.3?b?"rgb(247, 248, 250)":"rgb(32, 34, 38)":C>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let v=d(f)},14555:(Y,I,e)=>{"use strict";e.d(I,{F:()=>n,J:()=>t});const t=r=>r().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=r=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(r)},40621:(Y,I,e)=>{"use strict";e.d(I,{h:()=>t});function t(n,r,s){}},53550:(Y,I,e)=>{"use strict";e.d(I,{i:()=>t});function t(n){const s=n.lastIndexOf("."),o=n.substring(s),m=n.substring(0,s);return m.length<16?n:`${m.substring(0,16)}...${o}`}},9830:(Y,I,e)=>{"use strict";e.d(I,{I:()=>r});var t=e(2543),n=e.n(t);function r(s,o){let m=0,l=s.indexOf(o);o=o.replace(/\s/g,"");const i=[];if(l!==-1)return{distance:0,found:!0,ranges:[{start:l,end:l+o.length-1}]};for(const c of o){const u=s.indexOf(c,l);if(u===-1)return{distance:1/0,ranges:[],found:!1};if(l!==-1&&(m+=u-l),l=u+1,i.length===0)i.push({start:u,end:u});else{const f=(0,t.last)(i);u===f.end+1?f.end++:i.push({start:u,end:u})}}return{distance:m,ranges:i,found:!0}}},76412:(Y,I,e)=>{"use strict";e.d(I,{t:()=>i,x:()=>m});var t=e(72635),n=e(96540),r=e(78552),s=e(52822);function o(){typeof t.default.options.resources!="object"&&t.default.use(r.r9).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const m=c=>(o(),n.createElement(s.x,{...c})),l=t.default.t,i=(c,u,f)=>(o(),l(c,u,f))},99598:(Y,I,e)=>{"use strict";e.d(I,{xj:()=>o.xj,Mk:()=>o.Mk,bk:()=>t,Pw:()=>m.Pw,nO:()=>o.nO,uc:()=>g,Xw:()=>o.Xw,ct:()=>o.ct,UJ:()=>o.UJ,zt:()=>s,yx:()=>l.yx,Tt:()=>h.T,DB:()=>y.DB,hF:()=>v.h,Vr:()=>d.Vr,Tj:()=>o.Tj,h:()=>a.h,It:()=>b.I,Yc:()=>d.Yc,kl:()=>f.k,XJ:()=>u.X,yC:()=>c.yC,JF:()=>c.JF,MC:()=>c.MC,mZ:()=>o.mZ,sg:()=>o.sg,K:()=>m.K,Fr:()=>i.F,Jl:()=>i.J,dF:()=>l.dF,mO:()=>l.mO,kD:()=>d.kD,RP:()=>m.RP,Ih:()=>o.Ih,CH:()=>E.C,tf:()=>m.tf});var t={};e.r(t),e.d(t,{getNextCharacter:()=>r,getPreviousCousin:()=>n}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(P){const C=(this.document||this.ownerDocument).querySelectorAll(P);let D=this,T;do{for(T=C.length;--T>=0&&C.item(T)!==D;);D=D.parentElement}while(T<0&&D);return D});function n(P,C){let D=P.parentElement.previousSibling,T;for(;D;){if(T=D.querySelector(C),T)return T;D=D.previousSibling}}function r(P){const C=(P||window).getSelection();if(!C||!C.anchorNode)return null;const D=C.getRangeAt(0),T=C.anchorNode.textContent,M=D.startOffset;return T.slice(M,M+1)}var s=e(67892),o=e(24284),m=e(29734),l=e(72307),i=e(14555),c=e(69613),u=e(5260),f=e(90914),d=e(29413),E=e(69731),h=e(75071),y=e(88838),a=e(91040),v=e(40621),g=(P=>(P.id="id",P.title="title",P.subTitle="subTitle",P.mainStat="mainStat",P.secondaryStat="secondaryStat",P.source="source",P.target="target",P.detail="detail__",P.arc="arc__",P.color="color",P))(g||{}),b=e(9830)},91040:(Y,I,e)=>{"use strict";e.d(I,{h:()=>s});var t=e(2543),n=e.n(t);const r=(0,t.throttle)((...o)=>{console.log(...o)},500),s=o=>{let m=!1;return typeof window<"u"&&(m=window.localStorage.getItem("grafana.debug")==="true"),{logger:(l,i=!1,...c)=>{},enable:()=>m=!0,disable:()=>m=!1,isEnabled:()=>m}}},29413:(Y,I,e)=>{"use strict";e.d(I,{Vr:()=>l,Yc:()=>o,kD:()=>m});let t;const n=new Map,r=500;let s="";function o(){return t||(t=document.createElement("canvas").getContext("2d")),t}function m(i,c,u=400){const f=`${u} ${c}px 'Inter'`,d=i+f,E=n.get(d);if(E)return E;const h=o();s!==f&&(h.font=s=f);const y=h.measureText(i);return n.size===r&&n.clear(),n.set(d,y),y}function l(i,c,u,f,d,E){const h=m(i,14,E),y=c/(h.width+2)*14,a=u/f,v=Math.min(a,y);return Math.min(v,d??v)}},67892:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{getChildId:()=>n,renderOrCallToRender:()=>r});var t=e(96540);function n(s){let o;const m=t.Children.only(s);return"id"in m?.props?o=m.props.id:"inputId"in m.props&&(o=m?.props.inputId),typeof o=="string"?o:void 0}function r(s,o){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function"&&o)return s(o);throw new Error(`${s} is not a React element nor a function that returns React element`)}},5260:(Y,I,e)=>{"use strict";e.d(I,{X:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const r=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(o=>{r.style[o]=s[o]}),document.body.appendChild(r),t=r.offsetWidth-r.clientWidth,document.body.removeChild(r)}else t=0;return t||0}},75071:(Y,I,e)=>{"use strict";e.d(I,{H:()=>m,T:()=>n});var t=e(9830),n=(l=>(l.Word="Word",l.Prefix="Prefix",l.Fuzzy="Fuzzy",l))(n||{});const m={Word:(l,i)=>l.filter(c=>(c.filterText||c.label).includes(i)),Prefix:(l,i)=>l.filter(c=>(c.filterText||c.label).startsWith(i)),Fuzzy:(l,i)=>(i=i.toLowerCase(),l.filter(c=>{const{distance:u,ranges:f,found:d}=(0,t.I)(c.label.toLowerCase(),i);return d?(c.sortValue=u,c.highlightParts=f,!0):!1}))}},72129:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>s,j:()=>o});var t=e(32196),n=e(96540);const s={animationName:(0,t.keyframes)({"0%":{opacity:0},"100%":{opacity:1}}),animationDelay:"100ms",animationTimingFunction:"ease-in",animationDuration:"100ms",animationFillMode:"backwards"},o=(m,l)=>Object.assign(m,{Skeleton:c=>n.createElement(l,{...c,rootProps:{style:s}})})},72307:(Y,I,e)=>{"use strict";e.d(I,{dF:()=>r,mO:()=>s,yx:()=>n});var t=e(82611);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},r=(o,m)=>{const l=o.split(`
`).map(c=>t.eB.create({type:"code_line",nodes:[t.EY.create(c)]})),i=t.eB.create({data:{syntax:m},type:"code_block",nodes:l});return t.yo.create({nodes:[i]})},s=(o,m)=>{const l=r(o,m);return t.WT.create({document:l})}},90914:(Y,I,e)=>{"use strict";e.d(I,{k:()=>t});const t=(n,r)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:r.index})),!!s){for(let o=0;o<s?.length;o++)if(s[o].onClick){const m=s[o].onClick;s[o].onClick=l=>{l.ctrlKey||l.metaKey||l.shiftKey||(l.preventDefault(),m(l,{field:n,rowIndex:r.index}))}}return s}}},69613:(Y,I,e)=>{"use strict";e.d(I,{JF:()=>r,MC:()=>s,yC:()=>o});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function r(i=""){const c=m(i.toLowerCase());return Math.abs(c%t.length)}function s(i=""){const c=r(i);return o(c)}function o(i){return{color:t[i],borderColor:n[i]}}function m(i){let c=5381;for(let u=0;u<i.length;u++)c=(c<<5)+c+i.charCodeAt(u);return c}var l={getTagColorsFromName:s}},18976:(Y,I,e)=>{"use strict";e.d(I,{O:()=>n,f:()=>r});var t=e(32196);function n(s){switch(s){case"auto":return"bottom";case"auto-start":return"bottom-start";case"auto-end":return"bottom-end";default:return s??"bottom"}}function r(s,o,m,l,i){return{arrow:(0,t.css)({fill:o}),container:(0,t.css)({backgroundColor:o,borderRadius:s.shape.radius.default,border:`1px solid ${m}`,boxShadow:s.shadows.z2,color:l,fontSize:s.typography.bodySmall.fontSize,padding:s.spacing(i.topBottom,i.rightLeft),transition:"opacity 0.3s",zIndex:s.zIndex.tooltip,maxWidth:"400px",overflowWrap:"break-word","&[data-popper-interactive='false']":{pointerEvents:"none"}}),headerClose:(0,t.css)({color:s.colors.text.secondary,position:"absolute",right:s.spacing(1),top:s.spacing(1.5),backgroundColor:"transparent",border:0}),header:(0,t.css)({paddingTop:s.spacing(1),paddingBottom:s.spacing(2)}),body:(0,t.css)({paddingTop:s.spacing(1),paddingBottom:s.spacing(1)}),footer:(0,t.css)({paddingTop:s.spacing(2),paddingBottom:s.spacing(1)})}}},69731:(Y,I,e)=>{"use strict";e.d(I,{C:()=>n});var t=e(96540);function n(){const[r,s]=(0,t.useState)(0);return()=>s(o=>o+1)}},29734:(Y,I,e)=>{"use strict";e.d(I,{K:()=>r,Pw:()=>t,RP:()=>s,tf:()=>n});var t=(o=>(o.onBlur="onBlur",o.onFocus="onFocus",o.onChange="onChange",o))(t||{});const n=(o,m)=>{const l=m.reduce((i,c)=>c.rule(o)?i:i.concat(c.errorMessage),[]);return l.length>0?l:null},r=(o,m)=>m&&m[o],s=(o,m)=>({rule:l=>!!l.match(o),errorMessage:m||"Value is not valid"})},91950:(Y,I,e)=>{"use strict";e.d(I,{A:()=>r,f:()=>o});var t=e(2543),n=e.n(t);class r{constructor(l){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",l){if(l.columns)for(const i of l.columns)this.addColumn(i);if(l.rows)for(const i of l.rows)this.addRow(i)}}sort(l){l.col===null||l.col===void 0||this.columns.length<=l.col||(this.rows.sort((i,c)=>(i=i[l.col],c=c[l.col],+(i==null)-+(c==null)||+(i>c)||-(i<c))),l.desc&&this.rows.reverse(),this.columns[l.col].sort=!0,this.columns[l.col].desc=l.desc)}addColumn(l){this.columnMap[l.text]||(this.columns.push(l),this.columnMap[l.text]=l)}addRow(l){this.rows.push(l)}}function s(m,l,i){let c=!1;for(let u=0;u<m.length;u++)if(l[u]!==void 0&&i[u]!==void 0){if(l[u]!==i[u])return!1}else(l[u]===void 0||i[u]===void 0)&&(c=!0);return c}function o(m,...l){const i=m||new r;if(arguments.length===1)return i;if(arguments.length===2)return i.columns=l[0].hasOwnProperty("columns")?[...l[0].columns]:[],i.rows=l[0].hasOwnProperty("rows")?[...l[0].rows]:[],i;const c=l.filter(a=>!!a.columns),u={},f=c.slice().reduce((a,v)=>(v.columns.forEach(g=>{const{text:b}=g;u[b]===void 0&&(u[b]=a.length,a.push(g))}),a),[]),d=c.map(a=>a.columns.map(v=>u[v.text])),E=c.reduce((a,v,g)=>{const b=d[g];return v.rows.forEach(P=>{const C=[];b.forEach((D,T)=>{C[D]=P[T]}),a.push(C)}),a},[]),h={},y=E.reduce((a,v,g)=>{if(!h[g]){let b=g+1;for(;b<E.length;){const P=(0,t.findIndex)(E,C=>s(f,v,C),b);if(P>-1){const C=E[P];for(let D=0;D<f.length;D++)v[D]===void 0&&C[D]!==void 0&&(v[D]=C[D]);h[P]=C,b=P+1}else break}a.push(v)}return a},[]);return i.columns=f,i.rows=y,i}},97007:(Y,I,e)=>{"use strict";e.d(I,{N:()=>n});var t=e(30038);const n=(0,t.VP)("core/cleanUpState")},82467:(Y,I,e)=>{"use strict";e.d(I,{Do:()=>t.Do,Vz:()=>n.Vz,YA:()=>n.YA,dx:()=>t.dx});var t=e(16001),n=e(28215)},28138:(Y,I,e)=>{"use strict";e.d(I,{A:()=>r,l:()=>n});var t=e(18226);const n=new t.o,r=n},5108:(Y,I,e)=>{"use strict";e.d(I,{x:()=>K});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(68402),m=e(90613),l=e(94753),i=e(55852),c=e(9025),u=e(44836),f=e(27677),d=e(43907),E=e(67061),h=e(88323),y=e(25469),a=e(17172);class v extends r.Component{constructor(q){super(q),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}search(q){return this.setState({isLoading:!0}),(0,n.isNil)(q)&&(q=""),(0,a.AI)().get("/api/serviceaccounts/search").then(le=>le.serviceAccounts.map(me=>({id:me.id,value:me.id,label:me.login,imgUrl:me.avatarUrl,login:me.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:q,onSelected:le,inputId:me}=this.props,{isLoading:k}=this.state;return r.createElement("div",{className:"service-account-picker","data-testid":"serviceAccountPicker"},r.createElement(h.DW,{isClearable:!0,className:q,inputId:me,isLoading:k,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:le,placeholder:"Start typing to search for service accounts",noOptionsMessage:"No service accounts found","aria-label":"Service Account picker"}))}}class g extends r.Component{constructor(q){super(q),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}componentDidMount(){const{teamId:q}=this.props;q&&(0,a.AI)().get(`/api/teams/${q}`).then(le=>{this.setState({value:{value:le,label:le.name,imgUrl:le.avatarUrl}})})}search(q){return this.setState({isLoading:!0}),(0,n.isNil)(q)&&(q=""),(0,a.AI)().get(`/api/teams/search?perpage=100&page=1&query=${q}`).then(le=>{const me=le.teams.map(k=>({value:k,label:k.name,imgUrl:k.avatarUrl}));return this.setState({isLoading:!1}),me})}render(){const{onSelected:q,className:le}=this.props,{isLoading:me,value:k}=this.state;return r.createElement("div",{className:"user-picker","data-testid":"teamPicker"},r.createElement(h.DW,{isLoading:me,defaultOptions:!0,loadOptions:this.debouncedSearch,value:k,onChange:q,className:le,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}class b extends r.Component{constructor(q){super(q),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}search(q){return this.setState({isLoading:!0}),(0,n.isNil)(q)&&(q=""),(0,a.AI)().get(`/api/org/users/lookup?query=${q}&limit=100`).then(le=>le.map(me=>({id:me.userId,value:me.userId,label:me.login,imgUrl:me.avatarUrl,login:me.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:q,onSelected:le,inputId:me}=this.props,{isLoading:k}=this.state;return r.createElement("div",{className:"user-picker","data-testid":"userPicker"},r.createElement(h.DW,{isClearable:!0,className:q,inputId:me,isLoading:k,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:le,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}var P=e(24897),C=(H=>(H.None="None",H.Team="Team",H.User="User",H.ServiceAccount="ServiceAccount",H.BuiltInRole="builtInRole",H))(C||{});const D=({title:H=(0,u.t)("access-control.add-permission.title","Add permission for"),permissions:q,assignments:le,onAdd:me,onCancel:k})=>{const[ee,X]=(0,r.useState)(C.None),[j,ne]=(0,r.useState)(0),[te,oe]=(0,r.useState)(0),[ie,ue]=(0,r.useState)(""),[be,ge]=(0,r.useState)(""),re=(0,r.useMemo)(()=>{const Be=[];return le.users&&Be.push({value:C.User,label:(0,u.t)("access-control.add-permission.user-label","User")}),le.serviceAccounts&&Be.push({value:C.ServiceAccount,label:(0,u.t)("access-control.add-permission.serviceaccount-label","Service Account")}),le.teams&&Be.push({value:C.Team,label:(0,u.t)("access-control.add-permission.team-label","Team")}),le.builtInRoles&&Be.push({value:C.BuiltInRole,label:(0,u.t)("access-control.add-permission.role-label","Role")}),Be},[le]);(0,r.useEffect)(()=>{q.length>0&&ge(q[0])},[q]);const ye=()=>ee===C.Team&&j>0||ee===C.User&&te>0||ee===C.ServiceAccount&&te>0||C.BuiltInRole&&P.XT.hasOwnProperty(ie);return r.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},r.createElement(y.J,{onClick:k}),r.createElement("h5",null,H),r.createElement("form",{name:"addPermission",onSubmit:Be=>{Be.preventDefault(),me({userId:te,teamId:j,builtInRole:ie,permission:be,target:ee})}},r.createElement(E.B,{gap:1,direction:"row"},r.createElement(h.l6,{"aria-label":"Role to add new permission to",value:ee,options:re,onChange:Be=>X(Be.value),disabled:re.length===0,width:"auto"}),ee===C.User&&r.createElement(b,{onSelected:Be=>oe(Be?.value||0)}),ee===C.ServiceAccount&&r.createElement(v,{onSelected:Be=>oe(Be?.value||0)}),ee===C.Team&&r.createElement(g,{onSelected:Be=>ne(Be.value?.id||0)}),ee===C.BuiltInRole&&r.createElement(h.l6,{"aria-label":"Built-in role picker",options:Object.values(P.XT).filter(Be=>Be!==P.XT.None).map(Be=>({value:Be,label:Be})),onChange:Be=>ue(Be.value||""),width:"auto"}),r.createElement(h.l6,{"aria-label":"Permission Level",width:"auto",value:q.find(Be=>Be===be),options:q.map(Be=>({label:Be,value:Be})),onChange:Be=>ge(Be.value||"")}),r.createElement(i.$n,{type:"submit",disabled:!ye()},r.createElement(u.x6,{i18nKey:"access-control.add-permissions.save"},"Save")))))};var T=e(56034),M=e(14578);const O=({item:H,permissionLevels:q,canSet:le,onRemove:me,onChange:k})=>{const ee=(0,s.of)(R);return r.createElement("tr",null,r.createElement("td",null,S(H)),r.createElement("td",null,x(H)),r.createElement("td",null,H.isInherited&&r.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),r.createElement("td",null,r.createElement(h.l6,{disabled:!le||!H.isManaged,onChange:X=>k(H,X.value),value:q.find(X=>X===H.permission),options:q.map(X=>({value:X,label:X}))})),r.createElement("td",null,H.warning?r.createElement(T.m,{content:r.createElement(r.Fragment,null,r.createElement(m.a,{marginBottom:1},H.warning),A(H))},r.createElement(M.I,{name:"exclamation-triangle",className:ee.warning})):r.createElement(T.m,{content:A(H)},r.createElement(M.I,{name:"info-circle"}))),r.createElement("td",null,H.isManaged?r.createElement(i.$n,{size:"sm",icon:"times",variant:"destructive",disabled:!le,onClick:()=>me(H),"aria-label":`Remove permission for ${p(H)}`}):r.createElement(T.m,{content:H.isInherited?"Inherited Permission":"Provisioned Permission"},r.createElement(i.$n,{size:"sm",icon:"lock"}))))},S=H=>H.teamId?r.createElement("img",{className:"filter-table__avatar",src:H.teamAvatarUrl,alt:`Avatar for team ${H.teamId}`}):H.userId?r.createElement("img",{className:"filter-table__avatar",src:H.userAvatarUrl,alt:`Avatar for user ${H.userId}`}):r.createElement(M.I,{size:"xl",name:"shield"}),p=H=>H.userId?H.userLogin:H.teamId?H.team:H.builtInRole,x=H=>H.userId?r.createElement("span",{key:"name"},H.userLogin," "):H.teamId?r.createElement("span",{key:"name"},H.team," "):H.builtInRole?r.createElement("span",{key:"name"},H.builtInRole," "):r.createElement("span",{key:"name"}),A=H=>`Actions: ${[...new Set(H.actions)].sort().join(" ")}`,R=H=>({warning:(0,t.css)({color:H.colors.warning.main})}),B=({title:H,items:q,compareKey:le,permissionLevels:me,canSet:k,onRemove:ee,onChange:X})=>{const j=(0,r.useMemo)(()=>{const ne={};for(let te of q){const oe=te[le];if(!ne[oe]){ne[oe]=te;continue}if(te.actions.length>ne[oe].actions.length){ne[oe]=te;continue}te.actions.length===ne[oe].actions.length&&!te.isInherited&&(ne[oe]=te)}return Object.keys(ne).map(te=>ne[te])},[q,le]);return j.length===0?null:r.createElement("div",null,r.createElement("table",{className:"filter-table gf-form-group"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{style:{width:"1%"}}),r.createElement("th",null,H),r.createElement("th",{style:{width:"1%"}}),r.createElement("th",{style:{width:"40%"}},r.createElement(u.x6,{i18nKey:"access-control.permission-list.permission"},"Permission")),r.createElement("th",{style:{width:"1%"}}),r.createElement("th",{style:{width:"1%"}}))),r.createElement("tbody",null,j.map((ne,te)=>r.createElement(O,{item:ne,onRemove:ee,onChange:X,canSet:k,key:`${te}-${ne.userId}`,permissionLevels:me})))))},U="",F={permissions:[],assignments:{teams:!1,users:!1,serviceAccounts:!1,builtInRoles:!1}},K=({title:H=(0,u.t)("access-control.permissions.title","Permissions"),buttonLabel:q=(0,u.t)("access-control.permissions.add-label","Add a permission"),emptyLabel:le=(0,u.t)("access-control.permissions.no-permissions","There are no permissions"),resource:me,resourceId:k,canSetPermissions:ee,addPermissionTitle:X,getWarnings:j,epilogue:ne})=>{const te=(0,s.of)(G),[oe,ie]=(0,r.useState)(!1),[ue,be]=(0,r.useState)([]),[ge,re]=(0,r.useState)(F),ye=(0,r.useCallback)(async()=>{let je=await L(me,k);j&&(je=j(je)),be(je)},[me,k,j]);(0,r.useEffect)(()=>{w(me).then(je=>(re(je),ye()))},[me,k,ye]);const Be=je=>{let at=null;je.target===C.User||je.target===C.ServiceAccount?at=V(me,k,je.userId,je.permission):je.target===C.Team?at=N(me,k,je.teamId,je.permission):je.target===C.BuiltInRole&&(at=z(me,k,je.builtInRole,je.permission)),at!==null&&at.then(ye)},ve=je=>{let at=null;je.userId?at=V(me,k,je.userId,U):je.teamId?at=N(me,k,je.teamId,U):je.isServiceAccount&&je.userId?at=V(me,k,je.userId,U):je.builtInRole&&(at=z(me,k,je.builtInRole,U)),at!==null&&at.then(ye)},Me=(je,at)=>{je.permission!==at&&(je.userId?Be({permission:at,userId:je.userId,target:C.User}):je.isServiceAccount?Be({permission:at,userId:je.userId,target:C.User}):je.teamId?Be({permission:at,teamId:je.teamId,target:C.Team}):je.builtInRole&&Be({permission:at,builtInRole:je.builtInRole,target:C.BuiltInRole}))},ke=(0,r.useMemo)(()=>(0,n.sortBy)(ue.filter(je=>je.teamId),["team","isManaged"]),[ue]),Se=(0,r.useMemo)(()=>(0,n.sortBy)(ue.filter(je=>je.userId&&!je.isServiceAccount),["userLogin","isManaged"]),[ue]),We=(0,r.useMemo)(()=>(0,n.sortBy)(ue.filter(je=>je.userId&&je.isServiceAccount),["userLogin","isManaged"]),[ue]),De=(0,r.useMemo)(()=>(0,n.sortBy)(ue.filter(je=>je.builtInRole),["builtInRole","isManaged"]),[ue]),pe=(0,u.t)("access-control.permissions.role","Role"),Ne=(0,u.t)("access-control.permissions.user","User"),Le=(0,u.t)("access-control.permissions.serviceaccount","Service Account"),He=(0,u.t)("access-control.permissions.team","Team");return r.createElement(r.Fragment,null,r.createElement("div",null,ee&&me==="folders"&&r.createElement(r.Fragment,null,r.createElement(u.x6,{i18nKey:"access-control.permissions.permissions-change-warning"},"This will change permissions for this folder and all its descendants. In total, this will affect:"),r.createElement(d.x,{selectedItems:{folder:{[k]:!0},dashboard:{},panel:{},$all:!1}}),r.createElement(o.$,{v:2})),ue.length===0&&r.createElement(m.a,null,r.createElement(l.E,null,le)),r.createElement(B,{title:pe,items:De,compareKey:"builtInRole",permissionLevels:ge.permissions,onChange:Me,onRemove:ve,canSet:ee}),r.createElement(B,{title:Ne,items:Se,compareKey:"userLogin",permissionLevels:ge.permissions,onChange:Me,onRemove:ve,canSet:ee}),r.createElement(B,{title:Le,items:We,compareKey:"userLogin",permissionLevels:ge.permissions,onChange:Me,onRemove:ve,canSet:ee}),r.createElement(B,{title:He,items:ke,compareKey:"team",permissionLevels:ge.permissions,onChange:Me,onRemove:ve,canSet:ee}),ee&&r.createElement(r.Fragment,null,r.createElement(i.$n,{className:te.addPermissionButton,variant:"primary",key:"add-permission",onClick:()=>ie(!0),icon:"plus"},q),r.createElement(c.a,{in:oe},r.createElement(D,{title:X,onAdd:Be,permissions:ge.permissions,assignments:ge.assignments,onCancel:()=>ie(!1)})))),ne&&ne(ue))},w=async H=>{try{return await(0,f.AI)().get(`/api/access-control/${H}/description`)}catch(q){return console.error("failed to load resource description: ",q),F}},L=(H,q)=>(0,f.AI)().get(`/api/access-control/${H}/${q}`),V=(H,q,le,me)=>J(H,q,"users",le,me),N=(H,q,le,me)=>J(H,q,"teams",le,me),z=(H,q,le,me)=>J(H,q,"builtInRoles",le,me),J=(H,q,le,me,k)=>(0,f.AI)().post(`/api/access-control/${H}/${q}/${le}/${me}`,{permission:k}),G=H=>({breakdown:(0,t.css)({...H.typography.bodySmall,color:H.colors.text.secondary,marginBottom:H.spacing(2)}),addPermissionButton:(0,t.css)({marginBottom:H.spacing(2)})})},9025:(Y,I,e)=>{"use strict";e.d(I,{a:()=>m});var t=e(96540),n=e(22669);const r="200px",s=200,o={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},m=({children:l,in:i,maxHeight:c=r,style:u=o})=>{const f={exited:{maxHeight:0},entering:{maxHeight:c},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.Ay,{in:i,timeout:s},d=>t.createElement("div",{style:{...u,...f[d]}},l))}},75269:(Y,I,e)=>{"use strict";e.d(I,{H:()=>r});var t=e(96540),n=e(76888);const r=t.memo(({actions:s})=>{const{chrome:o}=(0,n.Il)();return(0,t.useLayoutEffect)(()=>{o.update({actions:s})}),null});r.displayName="TopNavUpdate"},10804:(Y,I,e)=>{"use strict";e.d(I,{K:()=>s});var t=e(32196),n=e(96540),r=e(40845);function s({className:m,leftActionsSeparator:l}){const i=(0,r.of)(o);return l?n.createElement("div",{className:(0,t.cx)(m,i.leftActionsSeparator)}):n.createElement("div",{className:(0,t.cx)(m,i.line)})}const o=m=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:m.colors.border.medium,height:24})})},57571:(Y,I,e)=>{"use strict";e.d(I,{l:()=>t});const t=40},19361:(Y,I,e)=>{"use strict";e.d(I,{M:()=>c});var t=e(32196),n=e(96540),r=e(23596),s=e(40845);const o=({className:u,logo:f})=>n.createElement("img",{className:u,src:`${f||"public/img/grafana_icon.svg"}`,alt:"SyncCity"}),m=({className:u,children:f})=>{const d=(0,s.$j)(),E=(0,t.css)({"&:before":{content:'""',position:"fixed",left:0,right:0,bottom:0,top:0,background:`url(public/img/g8_login_${d.isDark?"dark":"light"}.svg)`,backgroundPosition:"top center",backgroundSize:"auto",backgroundRepeat:"no-repeat",opacity:0,transition:"opacity 3s ease-in-out",[d.breakpoints.up("md")]:{backgroundPosition:"center",backgroundSize:"cover"}}});return n.createElement("div",{className:(0,t.cx)(E,u)},f)},l=({className:u})=>n.createElement("img",{className:u,src:"public/img/grafana_icon.svg",alt:"SyncCity"}),i=()=>{const u=(0,s.$j)();return(0,t.css)({background:r.alpha(u.colors.background.primary,.7),backgroundSize:"cover"})};class c{static{this.LoginLogo=o}static{this.LoginBackground=m}static{this.MenuLogo=l}static{this.LoginBoxBackground=i}static{this.AppTitle="SyncCity"}static{this.LoginTitle="Welcome to SyncCity"}static{this.HideEdition=!1}static{this.GetLoginSubTitle=()=>null}}},3984:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>t});function t(n,r,s){const o=[];let m=!1,l;function i(c,u=!1){if(m)return;const f=c.url?.split("?")??["",""];let d=f[0];const E=new URLSearchParams(f[1]);if(E.has("editview")&&(d+=`?editview=${E.get("editview")}`),s&&d===s.url){o.unshift({text:s.text,href:c.url??""}),m=!0;return}const h=d.length>0&&l===d;l=d,!c.hideFromBreadcrumbs&&!(u&&h)&&o.unshift({text:c.text,href:c.url??""}),c.parentItem&&i(c.parentItem)}return r&&i(r),i(n,!0),o}},25469:(Y,I,e)=>{"use strict";e.d(I,{J:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(29158);const o=({onClick:l,"aria-label":i,style:c})=>{const u=(0,r.of)(m);return n.createElement(s.K,{"aria-label":i??"Close",className:u,name:"times",onClick:l,style:c,tooltip:"Close"})},m=l=>(0,t.css)({position:"absolute",right:l.spacing(.5),top:l.spacing(1)})},27921:(Y,I,e)=>{"use strict";e.d(I,{A:()=>n});var t=e(96540);const n=r=>t.lazy(r)},7521:(Y,I,e)=>{"use strict";e.d(I,{A:()=>u});var t=e(32196),n=e(96540),r=e(13544),s=e(14578),o=e(55852),m=e(76442);const l=(0,t.css)({textAlign:"center"}),i=(0,t.css)({maxWidth:"700px",margin:"0 auto"}),u=({title:f,buttonIcon:d,buttonLink:E,buttonTitle:h,buttonDisabled:y,onClick:a,proTip:v,proTipLink:g,proTipLinkTitle:b,proTipTarget:P,infoBox:C,infoBoxTitle:D})=>{const T=()=>n.createElement(n.Fragment,null,v?n.createElement("span",{key:"proTipFooter"},n.createElement(s.I,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",v," "),g&&n.createElement("a",{href:g,target:P,className:"text-link"},b)):"",C?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${i}`},D&&n.createElement("h5",null,D),n.createElement("div",{dangerouslySetInnerHTML:C})):""),M=T()?"":(0,t.css)({marginBottom:"20px"}),O=E?o.z9:o.$n,S=n.createElement(O,{size:"lg",onClick:a,href:E,icon:d,className:M,"data-testid":r.Tp.components.CallToActionCard.buttonV2(h),disabled:y},h);return n.createElement(m.c,{className:l,message:f,footer:T(),callToActionElement:S})}},38645:(Y,I,e)=>{"use strict";e.d(I,{Dd:()=>o,wi:()=>c});var t=e(96540),n=e(32264),r=e(14578),s=e(44836);let o=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function m(f){return{hasReleaseNotes:!0,isBeta:f.includes("-beta")}}function l(f){const{buildInfo:d,licenseInfo:E}=n.$,h=[],y=E.stateInfo?` (${E.stateInfo})`:"";if(f||h.push({target:"_blank",id:"license",text:`${d.edition}${y}`,url:E.licenseUrl}),d.hideVersion)return h;const{hasReleaseNotes:a}=m(d.version);return h.push({target:"_blank",id:"version",text:d.versionString,url:a?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),d.hasUpdate&&h.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),h}function i(f){o=f}const c=t.memo(({customLinks:f,hideEdition:d})=>{const E=(f||o()).concat(l(d));return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,E.map((h,y)=>t.createElement("li",{key:y},t.createElement(u,{item:h}))))))});c.displayName="Footer";function u({item:f}){const d=f.url?t.createElement("a",{href:f.url,target:f.target,rel:"noopener noreferrer",id:f.id},f.text):f.text;return t.createElement(t.Fragment,null,f.icon&&t.createElement(r.I,{name:f.icon})," ",d)}},53153:(Y,I,e)=>{"use strict";e.d(I,{S:()=>h});var t=e(96540),n=e(49785),r=e(13544),s=e(32264),o=e(40845),m=e(42418),l=e(88575),i=e(66864),c=e(55852),u=e(56034),f=e(4691),d=e(78361),E=e(35043);const h=({onSubmit:y,onSkip:a,showDefaultPasswordWarning:v})=>{const g=(0,o.of)(f.$),[b,P]=(0,t.useState)(!1),[C,D]=(0,t.useState)(!0),{handleSubmit:T,register:M,getValues:O,formState:{errors:S},watch:p}=(0,n.mN)({defaultValues:{newPassword:"",confirmNew:""}}),x=p("newPassword"),A=R=>{y(R.newPassword)};return t.createElement("form",{onSubmit:T(A)},v&&t.createElement(m.F,{severity:"info",title:"Continuing to use the default password exposes you to security risks."}),t.createElement(l.D,{label:"New password",invalid:!!S.newPassword,error:S?.newPassword?.message},t.createElement(d.s,{onFocus:()=>P(!0),...M("newPassword",{required:"New Password is required",onBlur:()=>D(!1),validate:{strongPasswordValidationRegister:E.DP}}),id:"new-password",autoFocus:!0,autoComplete:"new-password"})),b&&t.createElement(E.zJ,{pristine:C,password:x,strongPasswordValidations:E.NQ}),t.createElement(l.D,{label:"Confirm new password",invalid:!!S.confirmNew,error:S?.confirmNew?.message},t.createElement(d.s,{...M("confirmNew",{required:"Confirmed Password is required",validate:R=>R===O().newPassword||"Passwords must match!"}),id:"confirm-new-password",autoComplete:"new-password"})),t.createElement(i.gW,null,t.createElement(c.$n,{type:"submit",className:g.submitButton},"Submit"),!s.$.auth.basicAuthStrongPasswordPolicy&&a&&t.createElement(u.m,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(c.$n,{fill:"text",onClick:a,type:"button","data-testid":r.Tp.pages.Login.skip},"Skip"))))}},72235:(Y,I,e)=>{"use strict";e.d(I,{l:()=>s});var t=e(32196),n=e(96540),r=e(49785);function s({defaultValues:o,onSubmit:m,validateOnMount:l=!1,validateFieldsOnMount:i,children:c,validateOn:u="onSubmit",maxWidth:f=600,...d}){const{handleSubmit:E,trigger:h,formState:y,...a}=(0,r.mN)({mode:u,defaultValues:o});return(0,n.useEffect)(()=>{l&&h(i)},[h,i,l]),n.createElement("form",{className:(0,t.css)({maxWidth:f!=="none"?f+"px":f,width:"100%"}),onSubmit:E(m),...d},c({errors:y.errors,formState:y,trigger:h,...a}))}},30249:(Y,I,e)=>{"use strict";e.d(I,{o:()=>E});var t=e(96540),n=e(85200),r=e(1173),s=e(11261),o=e(90708),m=e(79041),l=e(67266),i=e(81297),c=e(16895),u=e(40458);function f(h,y,a=[]){for(const v of a)if(typeof v=="function"){if(!v(h,y))return!1}else if(y[v]!==h[v])return!1;return!0}const d={x:n.sJ.get(r.Ct.firstTimeField).get({}),y:n.sJ.get(r.Ct.byTypes).get(new Set([s.PU.number,s.PU.enum]))};class E extends t.Component{constructor(y){super(y),this.getTimeRange=()=>this.props.timeRange;let a=this.prepState(y);a.alignedData=a.config.prepData([a.alignedFrame]),this.state=a,this.plotInstance=t.createRef()}static{this.contextType=m.e4}prepState(y,a=!0){let v=null;const{frames:g,fields:b=d,preparePlotFrame:P,replaceVariables:C,dataLinkPostProcessor:D}=y,T=P??u.m,M=g.some(S=>S.fields.some(p=>(p.config.links?.length??0)>0)),O=T(g,{...b,y:M?()=>!0:b.y},y.timeRange);if((0,c.uY)("GraphNG",!1,"data aligned",O),O){let S=O;if(M){const x=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;O.fields.forEach(A=>{A.getLinks=(0,o._M)(O,A,{...A.state?.scopedVars,__dataContext:{value:{data:[O],field:A,frame:O,frameIndex:0}}},C,x,D)}),S={...O,fields:O.fields.filter((A,R)=>R===0||b.y(A,O,[O]))}}let p=this.state?.config;a&&(p=y.prepConfig(S,this.props.frames,this.getTimeRange),(0,c.uY)("GraphNG",!1,"config prepared",p)),v={alignedFrame:S,config:p},(0,c.uY)("GraphNG",!1,"data prepared",v.alignedData)}return v}componentDidUpdate(y){const{frames:a,structureRev:v,timeZone:g,propsToDiff:b}=this.props,P=!f(y,this.props,b);if(a!==y.frames||P||g!==y.timeZone){let C=this.prepState(this.props,!1);C&&((this.state.config===void 0||g!==y.timeZone||v!==y.structureRev||!v||P)&&(C.config=this.props.prepConfig(C.alignedFrame,this.props.frames,this.getTimeRange),(0,c.uY)("GraphNG",!1,"config recreated",C.config)),C.alignedData=C.config.prepData([C.alignedFrame]),this.setState(C))}}render(){const{width:y,height:a,children:v,renderLegend:g}=this.props,{config:b,alignedFrame:P,alignedData:C}=this.state;return b?t.createElement(l.KU,{width:y,height:a,legend:g(b)},(D,T)=>t.createElement(i.Z,{config:b,data:C,width:D,height:T,plotRef:M=>this.plotInstance.current=M},v?v(b,P):null)):null}}},40458:(Y,I,e)=>{"use strict";e.d(I,{m:()=>c});var t=e(11261),n=e(73060),r=e(46294);function s(u,f,d){let E,h;for(let y=0;y<f.length;y++)if(f[y]==null)h==null&&E!=null&&(h=y);else{if(h!=null&&E!=null){if(u[y]-E<d)for(;h<y;)f[h++]=void 0;h=null}E=u[y]}return f}var o=e(52622);function m(u){return u.type===t.PU.number&&u.config.custom?.drawStyle===o.GR.Bars&&!u.config.custom?.hideFrom?.viz}function l(u,f){return u.fields.find(d=>f!=null?d.name===f:d.type===t.PU.time)}function i(u,f){const d=l(u,f);let E=d?.values;for(let h=0;h<u.fields.length;h++){let y=u.fields[h];if(y===d||m(y))continue;let a=y.config.custom?.spanNulls;typeof a=="number"&&a!==-1&&E&&(y.values=s(E,y.values,a))}return u}function c(u,f,d){let E;e:for(let v of u)for(let g of v.fields)if(f.x(g,v,u)){E=g;break e}u=u.map(v=>E?.state?.nullThresholdApplied?v:(0,r.M)({frame:v,refFieldName:E.name,refFieldPseudoMin:d?.from.valueOf(),refFieldPseudoMax:d?.to.valueOf()}));let h=u.reduce((v,g)=>v+g.fields.reduce((b,P)=>b+(m(P)?1:0),0),0),y=1/0;h>1&&u.forEach(v=>{if(!v.fields.some(m))return;const g=E.values;for(let b=0;b<g.length;b++)b>0&&(y=Math.min(y,g[b]-g[b-1]))});let a=(0,n.Fd)({frames:u,joinBy:f.x,keep:f.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:v=>{if(m(v))return n.WO;let g=v.config.custom?.spanNulls;return g===!0?n.RC:g===-1?n.WO:n.JI}});return a?(a=i(a,E.name),y!==1/0&&(a.fields.forEach((v,g)=>{let b=v.values;if(g===0){let P=b[b.length-1];b.push(P+y,P+2*y)}else m(v)?b.push(null,null):b.push(void 0,void 0)}),a.length+=2),a):null}},18759:(Y,I,e)=>{"use strict";e.d(I,{T:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(16795);function o({children:l,spacing:i,level:c}){const u=(0,r.of)(m,i,c);return n.createElement("span",{className:(0,t.css)(u.indentor)},l)}const m=(l,i,c)=>({indentor:(0,t.css)((0,s.Y)(l,i,u=>({paddingLeft:l.spacing(u*c)})))})},61680:(Y,I,e)=>{"use strict";e.d(I,{b:()=>r});var t=e(96540),n=e(33390);const r=s=>{const{children:o,storageKey:m,defaultValue:l}=s,[i,c]=(0,t.useState)({value:n.A.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const d=E=>{E.key===m&&c({value:n.A.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",d),()=>{window.removeEventListener("storage",d)}});const u=d=>{try{n.A.setObject(m,d)}catch(E){console.error(E)}c({value:d})},f=()=>{try{n.A.delete(m)}catch(d){console.log(d)}c({value:l})};return t.createElement(t.Fragment,null,o(i.value,u,f))}},87570:(Y,I,e)=>{"use strict";e.d(I,{A:()=>l});var t=e(96540),n=e(17172),r=e(2913),s=e(44836);const o=()=>!!r.Ay.oauth&&Object.keys(r.Ay.oauth).length>0;class m extends t.PureComponent{constructor(u){super(u),this.changePassword=f=>{const d={newPassword:f,confirmNew:f,oldPassword:"admin"};if(this.props.resetCode){const E={code:this.props.resetCode,newPassword:f,confirmPassword:f};(0,n.AI)().post("/api/user/password/reset",E).then(()=>{this.toGrafana()})}else(0,n.AI)().put("/api/user/password",d).then(()=>{this.toGrafana()}).catch(E=>console.error(E))},this.login=f=>{this.setState({loginErrorMessage:void 0,isLoggingIn:!0}),(0,n.AI)().post("/login",f,{showErrorAlert:!1}).then(d=>{if(this.result=d,f.password!=="admin"||r.Ay.ldapEnabled||r.Ay.authProxyEnabled){this.toGrafana();return}else this.changeView(f.password==="admin")}).catch(d=>{const E=(0,n.NF)(d)?i(d):void 0;this.setState({isLoggingIn:!1,loginErrorMessage:E||(0,s.t)("login.error.unknown","Unknown error occurred")})})},this.changeView=f=>{this.setState({isChangingPassword:!0,showDefaultPasswordWarning:f})},this.toGrafana=()=>{this.result?.redirectUrl?r.Ay.appSubUrl!==""&&!this.result.redirectUrl.startsWith(r.Ay.appSubUrl)?window.location.assign(r.Ay.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(r.Ay.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1,showDefaultPasswordWarning:!1,loginErrorMessage:r.Ay.loginError}}render(){const{children:u}=this.props,{isLoggingIn:f,isChangingPassword:d,showDefaultPasswordWarning:E,loginErrorMessage:h}=this.state,{login:y,toGrafana:a,changePassword:v}=this,{loginHint:g,passwordHint:b,disableLoginForm:P,disableUserSignUp:C}=r.Ay;return t.createElement(t.Fragment,null,u({isOauthEnabled:o(),loginHint:g,passwordHint:b,disableLoginForm:P,disableUserSignUp:C,login:y,isLoggingIn:f,changePassword:v,skipPasswordChange:a,isChangingPassword:d,showDefaultPasswordWarning:E,loginErrorMessage:h}))}}const l=m;function i(c){switch(c.data?.messageId){case"password-auth.empty":case"password-auth.failed":case"password-auth.invalid":return(0,s.t)("login.error.invalid-user-or-password","Invalid username or password");case"login-attempt.blocked":return(0,s.t)("login.error.blocked","You have exceeded the number of login attempts for this user. Please try again later.");default:return c.data?.message}}},4691:(Y,I,e)=>{"use strict";e.d(I,{$:()=>d,Q:()=>f});var t=e(32196),n=e(96540),r=e(49785),s=e(13544),o=e(40845),m=e(88575),l=e(10354),i=e(55852),c=e(44836),u=e(78361);const f=({children:E,onSubmit:h,isLoggingIn:y,passwordHint:a,loginHint:v})=>{const g=(0,o.of)(d),b=(0,n.useId)(),P=(0,n.useId)(),{handleSubmit:C,register:D,formState:{errors:T}}=(0,r.mN)({mode:"onChange"});return n.createElement("div",{className:g.wrapper},n.createElement("form",{onSubmit:C(h)},n.createElement(m.D,{label:(0,c.t)("login.form.username-label","Email or username"),invalid:!!T.user,error:T.user?.message},n.createElement(l.p,{...D("user",{required:(0,c.t)("login.form.username-required","Email or username is required")}),id:b,autoFocus:!0,autoCapitalize:"none",placeholder:v,"data-testid":s.Tp.pages.Login.username})),n.createElement(m.D,{label:(0,c.t)("login.form.password-label","Password"),invalid:!!T.password,error:T.password?.message},n.createElement(u.s,{...D("password",{required:(0,c.t)("login.form.password-required","Password is required")}),id:P,autoComplete:"current-password",placeholder:a})),n.createElement(i.$n,{type:"submit","data-testid":s.Tp.pages.Login.submit,className:g.submitButton,disabled:y},y?(0,c.t)("login.form.submit-loading-label","Logging in..."):(0,c.t)("login.form.submit-label","Log in")),E))},d=E=>({wrapper:(0,t.css)({width:"100%",paddingBottom:E.spacing(2)}),submitButton:(0,t.css)({justifyContent:"center",width:"100%"})})},20851:(Y,I,e)=>{"use strict";e.d(I,{GU:()=>l,YO:()=>c,qm:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(19361),o=e(38645);const m=({children:u,enterAnimation:f=!0})=>{const d=(0,r.of)(c);return n.createElement("div",{className:(0,t.cx)(d.loginInnerBox,f&&d.enterAnimation)},u)},l=({children:u,branding:f,isChangingPassword:d})=>{const E=(0,r.of)(c),[h,y]=(0,n.useState)(!1),a=f?.loginSubtitle??s.M.GetLoginSubTitle(),v=f?.loginTitle??s.M.LoginTitle,g=f?.loginBoxBackground||s.M.LoginBoxBackground(),b=f?.loginLogo,P=f?.hideEdition??s.M.HideEdition;return(0,n.useEffect)(()=>y(!0),[]),n.createElement(s.M.LoginBackground,{className:(0,t.cx)(E.container,h&&E.loginAnim,f?.loginBackground)},n.createElement("div",{className:E.loginMain},n.createElement("div",{className:(0,t.cx)(E.loginContent,g,"login-content-box")},n.createElement("div",{className:E.loginLogoWrapper},n.createElement(s.M.LoginLogo,{className:E.loginLogo,logo:b}),n.createElement("div",{className:E.titleWrapper},d?n.createElement("h1",{className:E.mainTitle},"Update your password"):n.createElement(n.Fragment,null,n.createElement("h1",{className:E.mainTitle},v),a&&n.createElement("h3",{className:E.subTitle},a)))),n.createElement("div",{className:E.loginOuterBox},u))),f?.hideFooter?n.createElement(n.Fragment,null):n.createElement(o.wi,{hideEdition:P,customLinks:f?.footerLinks}))},i=(0,t.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,c=u=>({loginMain:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,t.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,t.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,t.css)({width:"100%",maxWidth:"200px !important",marginBottom:u.spacing(2),[u.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:u.spacing(3)}),titleWrapper:(0,t.css)({textAlign:"center"}),mainTitle:(0,t.css)({fontSize:22,[u.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,t.css)({fontSize:u.typography.size.md,color:u.colors.text.secondary}),loginContent:(0,t.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:u.shape.radius.default,padding:u.spacing(2,0),opacity:0,transition:"opacity 0.5s ease-in-out",[u.breakpoints.up("sm")]:{minHeight:u.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,t.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,t.css)({padding:u.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",transition:"0.25s ease"}),enterAnimation:(0,t.css)({animation:`${i} ease-out 0.2s`})})},60188:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>m});var t=e(2543),n=e.n(t),r=e(96540),s=e(10354),o=e(88575);class m extends r.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=r.createRef(),this.updateValue=()=>{const i=this.inputRef.current?.value;let c=!1,u="";const f=this.props.min,d=this.props.max;let E=i!==""?Number(i):void 0;E&&!Number.isNaN(E)&&(f!=null&&E<f?(u=f.toString(),c=!0):d!=null&&E>d?(u=d.toString(),c=!0):u=i??"",this.setState({text:u,inputCorrected:c})),c&&this.updateValueDebounced(),!Number.isNaN(E)&&E!==this.props.value&&this.props.onChange(E)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=i=>{this.setState({text:i.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=i=>{i.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(i){if(this.props.value!==i.value){const c=isNaN(this.props.value)?"":`${this.props.value}`;c!==this.state.text&&this.setState({text:c})}}renderInput(){return r.createElement(s.p,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:i}=this.state;if(i){let c="",{min:u,max:f}=this.props;return f==null?u!=null&&(c=`< ${u}`):u!=null?c=`${u} < > ${f}`:c=`> ${f}`,r.createElement(o.D,{invalid:i,error:`Out of range ${c}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},77268:(Y,I,e)=>{"use strict";e.d(I,{a:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(83598),o=e(29158),m=e(83876);const l=({value:c,settings:u,onChange:f,details:d})=>{const E=(0,r.$j)(),h=(0,r.of)(i);return n.createElement(s.sk,{color:c??"",onChange:f,enableNamedColors:u?.enableNamedColors!==!1},({ref:y,showColorPicker:a,hideColorPicker:v})=>n.createElement("div",{className:h.spot},n.createElement("div",{className:h.colorPicker},n.createElement(m.q,{ref:y,onClick:a,onMouseLeave:v,color:c?E.visualization.getColorByName(c):E.components.input.borderColor})),d&&n.createElement(n.Fragment,null,c?n.createElement("span",{className:h.colorText,onClick:a},c):n.createElement("span",{className:h.placeholderText,onClick:a},u?.placeholder??"Select color"),u?.isClearable&&c&&n.createElement(o.K,{name:"times",onClick:()=>f(void 0),tooltip:"Clear settings"}))))},i=c=>({spot:(0,t.css)({cursor:"pointer",color:c.colors.text.primary,background:c.components.input.background,padding:"3px",height:c.v1.spacing.formInputHeight,border:`1px solid ${c.components.input.borderColor}`,display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end","&:hover":{border:`1px solid ${c.components.input.borderHover}`}}),colorPicker:(0,t.css)({padding:`0 ${c.spacing(1)}`}),colorText:(0,t.css)({flexGrow:2}),placeholderText:(0,t.css)({flexGrow:2,color:c.colors.text.secondary})})},72626:(Y,I,e)=>{"use strict";e.d(I,{w:()=>r});var t=e(96540),n=e(60188);const r=({value:s,onChange:o,item:m})=>{const{settings:l}=m,i=(0,t.useCallback)(c=>{o(l?.integer&&c!==void 0?Math.floor(c):c)},[o,l?.integer]);return t.createElement(n.Q,{value:s,min:l?.min,max:l?.max,step:l?.step,placeholder:l?.placeholder,onChange:i})}},33919:(Y,I,e)=>{"use strict";e.d(I,{H:()=>xe,u:()=>Fe});var t=e(96540),n=e(69550),r=e(27310),s=e(11261),o=e(50082),m=e(15292),l=e(94354),i=e(20333),c=e(76218),u=e(32196),f=e(2543),d=e(47737),E=e(60578),h=e(24284),y=e(10354),a=e(83598),v=e(29158),g=e(55852),b=e(60029),P=e(3911);const C=[{value:o.O.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:o.O.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class D extends t.PureComponent{constructor(se){super(se),this.onAddThreshold=()=>{const{steps:fe}=this.state;let Ce=0;fe.length>1&&(Ce=fe[fe.length-1].value+10);let Re=h.Tj.filter(Xe=>!fe.some(Ze=>Ze.color===Xe))[1];Re||(Re="#CCCCCC");const Oe={value:Ce,color:Re,key:T++},ze=[...fe,Oe];(0,d.RU)(ze),this.setState({steps:ze},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=fe=>{const{steps:Ce}=this.state;Ce.length&&fe.key!==Ce[0].key&&this.setState({steps:Ce.filter(Re=>Re.key!==fe.key)},this.onChange)},this.onChangeThresholdValue=(fe,Ce)=>{const Re=fe.target.value.replace(/,/g,"."),Oe=parseFloat(Re),ze=isNaN(Oe)?"":Oe,Xe=this.state.steps.map(Ze=>(Ze.key===Ce.key&&(Ze={...Ze,value:ze}),Ze));Xe.length&&(Xe[0].value=-1/0),(0,d.RU)(Xe),this.setState({steps:Xe})},this.onChangeThresholdColor=(fe,Ce)=>{const{steps:Re}=this.state,Oe=Re.map(ze=>(ze.key===fe.key&&(ze={...ze,color:Ce}),ze));this.setState({steps:Oe},this.onChange)},this.onBlur=()=>{const fe=[...this.state.steps];(0,d.RU)(fe),this.setState({steps:fe},this.onChange)},this.onChange=()=>{this.props.onChange(O(this.props.thresholds,this.state.steps))},this.onModeChanged=fe=>{this.props.onChange({...this.props.thresholds,mode:fe})};const ae=M(se.thresholds.steps);ae[0].value=-1/0,this.state={steps:ae},this.latestThresholdInputRef=t.createRef()}renderInput(se,ae,fe){const Ce=this.props.thresholds.mode===o.O.Percentage,Re=`Threshold ${fe+1}`;return isFinite(se.value)?t.createElement(y.p,{type:"number",step:"0.0001",key:Ce.toString(),onChange:Oe=>this.onChangeThresholdValue(Oe,se),value:se.value,"aria-label":Re,ref:fe===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:ae.inputPrefix},t.createElement("div",{className:ae.colorPicker},t.createElement(a.sk,{color:se.color,onChange:Oe=>this.onChangeThresholdColor(se,Oe),enableNamedColors:!0})),Ce&&t.createElement("div",{className:ae.percentIcon},"%")),suffix:t.createElement(v.K,{className:ae.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(se),tooltip:`Remove ${Re}`})}):t.createElement(y.p,{type:"text",value:"Base","aria-label":Re,disabled:!0,prefix:t.createElement("div",{className:ae.colorPicker},t.createElement(a.sk,{color:se.color,onChange:Oe=>this.onChangeThresholdColor(se,Oe),enableNamedColors:!0}))})}render(){const{thresholds:se}=this.props,{steps:ae}=this.state;return t.createElement(E.D.Consumer,null,fe=>{const Ce=S(fe);return t.createElement("div",{className:Ce.wrapper},t.createElement(g.$n,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Ce.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Ce.thresholds},ae.slice(0).reverse().map((Re,Oe)=>t.createElement("div",{className:Ce.item,key:`${Re.key}`},this.renderInput(Re,Ce,Oe)))),t.createElement("div",null,t.createElement(b.J,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(l.z,{options:C,onChange:this.onModeChanged,value:se.mode})))})}}let T=100;function M(Ee){return(!Ee||Ee.length===0)&&(Ee=[{value:-1/0,color:"green"}]),Ee.filter((se,ae)=>(0,f.isNumber)(se.value)||ae===0).map(se=>({color:se.color,value:se.value===null?-1/0:se.value,key:T++}))}function O(Ee,se){return{mode:Ee.mode??o.O.Absolute,steps:se.map(fe=>{const{key:Ce,...Re}=fe;return Re})}}const S=(0,P.N)(Ee=>({wrapper:(0,u.css)`
      display: flex;
      flex-direction: column;
    `,thresholds:(0,u.css)`
      display: flex;
      flex-direction: column;
      margin-bottom: ${Ee.spacing(2)};
    `,item:(0,u.css)`
      margin-bottom: ${Ee.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:(0,u.css)`
      padding: 0 ${Ee.spacing(1)};
    `,addButton:(0,u.css)`
      margin-bottom: ${Ee.spacing(1)};
    `,percentIcon:(0,u.css)`
      font-size: ${Ee.typography.bodySmall.fontSize};
      color: ${Ee.colors.text.secondary};
    `,inputPrefix:(0,u.css)`
      display: flex;
      align-items: center;
    `,trashIcon:(0,u.css)`
      color: ${Ee.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${Ee.colors.text};
      }
    `}));class p extends t.PureComponent{constructor(se){super(se)}render(){const{onChange:se}=this.props;let ae=this.props.value;return ae||(ae={mode:o.O.Percentage,steps:[]}),t.createElement(D,{thresholds:ae,onChange:se})}}var x=e(25019),A=e(40845),R=e(66864),B=e(14578),U=e(37390),F=e(80744),K=e(25148),w=e(55244),L=e(51986),V=e(88323);function N({mapping:Ee,index:se,onChange:ae,onRemove:fe,onDuplicate:Ce,showIconPicker:Re}){const{key:Oe,result:ze,id:Xe}=Ee,Ze=(0,A.of)(z),et=(0,t.useRef)(null),nt=(0,t.useCallback)(ft=>{const Mt={...Ee,result:{...Ee.result}};ft(Mt),ae(se,Mt)},[Ee,se,ae]);(0,t.useEffect)(()=>{et.current&&Ee.isNew&&(et.current.focus(),nt(ft=>{ft.isNew=!1}))},[Ee,et,nt]);const lt=ft=>{nt(Mt=>{Mt.result.color=ft})},rt=()=>{nt(ft=>{ft.result.color=void 0})},ut=ft=>{nt(Mt=>{Mt.result.icon=ft})},Et=()=>{nt(ft=>{ft.result.icon=void 0})},Ct=ft=>{nt(Mt=>{Mt.key=ft.currentTarget.value})},Ut=ft=>{nt(Mt=>{Mt.result.text=ft.currentTarget.value})},Gt=ft=>{nt(Mt=>{Mt.from=parseFloat(ft.currentTarget.value)})},Wt=ft=>{nt(Mt=>{Mt.to=parseFloat(ft.currentTarget.value)})},ot=ft=>{nt(Mt=>{Mt.pattern=ft.currentTarget.value})},Tt=ft=>{nt(Mt=>{Mt.specialMatch=ft.value})},Pn=[{label:"Null",value:x.W.Null,description:"Matches null and undefined values"},{label:"NaN",value:x.W.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:x.W.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:x.W.True,description:"Boolean true values"},{label:"False",value:x.W.False,description:"Boolean false values"},{label:"Empty",value:x.W.Empty,description:"Empty string"}];return t.createElement(w.sx,{key:Xe,draggableId:Xe,index:se},ft=>t.createElement("tr",{className:Ze.dragRow,ref:ft.innerRef,...ft.draggableProps},t.createElement("td",null,t.createElement("div",{className:Ze.dragHandle,...ft.dragHandleProps},t.createElement(B.I,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:Ze.typeColumn},Ee.type),t.createElement("td",null,Ee.type===x.d.ValueToText&&t.createElement(y.p,{ref:et,type:"text",value:Oe??"",onChange:Ct,placeholder:"Exact value to match"}),Ee.type===x.d.RangeToText&&t.createElement("div",{className:Ze.rangeInputWrapper},t.createElement(y.p,{type:"number",value:Ee.from??"",placeholder:"Range start",onChange:Gt,prefix:"From"}),t.createElement(y.p,{type:"number",value:Ee.to??"",placeholder:"Range end",onChange:Wt,prefix:"To"})),Ee.type===x.d.RegexToText&&t.createElement(y.p,{type:"text",value:Ee.pattern??"",placeholder:"Regular expression",onChange:ot}),Ee.type===x.d.SpecialValue&&t.createElement(V.l6,{value:Pn.find(Mt=>Mt.value===Ee.specialMatch),options:Pn,onChange:Tt})),t.createElement("td",null,t.createElement(y.p,{type:"text",value:ze.text??"",onChange:Ut,placeholder:"Optional display text"})),t.createElement("td",{className:Ze.textAlignCenter},ze.color&&t.createElement(R.Gy,{spacing:"sm",justify:"center"},t.createElement(a.sk,{color:ze.color,onChange:lt,enableNamedColors:!0}),t.createElement(v.K,{name:"times",onClick:rt,tooltip:"Remove color",tooltipPlacement:"top"})),!ze.color&&t.createElement(a.sk,{color:"gray",onChange:lt,enableNamedColors:!0},Mt=>t.createElement(g.$n,{variant:"primary",fill:"text",onClick:Mt.showColorPicker,ref:Mt.ref,size:"sm"},"Set color"))),Re&&t.createElement("td",{className:Ze.textAlignCenter},t.createElement(R.Gy,{spacing:"sm",justify:"center"},t.createElement(K.n,{onChange:ut,onClear:Et,value:ze.icon,size:F.Iy.SMALL,folderName:F.Iu.Icon,mediaType:F.zu.Icon,color:ze.color}),ze.icon&&t.createElement(v.K,{name:"times",onClick:Et,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:Ze.textAlignCenter},t.createElement(R.Gy,{spacing:"sm"},t.createElement(v.K,{name:"copy",onClick:()=>Ce(se),"data-testid":"duplicate-value-mapping","aria-label":"Duplicate value mapping",tooltip:"Duplicate"}),t.createElement(v.K,{name:"trash-alt",onClick:()=>fe(se),"data-testid":"remove-value-mapping","aria-label":"Delete value mapping",tooltip:"Delete"})))))}const z=Ee=>({dragRow:(0,u.css)({position:"relative"}),dragHandle:(0,u.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${Ee.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,u.css)({display:"flex","> div:first-child":{marginRight:Ee.spacing(2)}}),regexInputWrapper:(0,u.css)({display:"flex","> div:first-child":{marginRight:Ee.spacing(2)}}),typeColumn:(0,u.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,u.css)({textAlign:"center"})});function J({value:Ee,onChange:se,onClose:ae,showIconPicker:fe}){const Ce=(0,A.of)(G),[Re,Oe]=(0,t.useState)([]);(0,t.useEffect)(()=>{Oe(k(Ee))},[Ee]);const ze=ut=>{if(!Ee||!ut.destination)return;const Et=[...Re],Ct=Et[ut.source.index];Et.splice(ut.source.index,1),Et.splice(ut.destination.index,0,Ct),Oe(Et)},Xe=(ut,Et)=>{const Ct=[...Re];Ct.splice(ut,1,Et),Oe(Ct)},Ze=ut=>{const Et=[...Re];Et.splice(ut,1),Oe(Et)},et=[{label:"Value",value:x.d.ValueToText,description:"Match a specific text value"},{label:"Range",value:x.d.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:x.d.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:x.d.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],nt=ut=>{Oe([...Re,q({type:ut.value,result:{},isNew:!0})])},lt=ut=>{const Et=le(Re[ut]),Ct=[...Re];Ct.splice(ut,0,{...Et});for(let Ut=ut;Ut<Re.length;Ut++)Ct[Ut].result.index=Ut;Oe(Ct)},rt=()=>{se(me(Re)),ae()};return(0,t.useEffect)(()=>{Ee?.length||nt({value:x.d.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Ce.tableWrap},t.createElement("table",{className:Ce.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),fe&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(w.JY,{onDragEnd:ze},t.createElement(w.gL,{droppableId:"sortable-field-mappings",direction:"vertical"},ut=>t.createElement("tbody",{ref:ut.innerRef,...ut.droppableProps},Re.map((Et,Ct)=>t.createElement(N,{key:Et.id,mapping:Et,index:Ct,onChange:Xe,onRemove:Ze,onDuplicate:lt,showIconPicker:fe})),ut.placeholder))))),t.createElement(U.a.ButtonRow,{leftItems:t.createElement(L.i,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:et,onChange:nt})},t.createElement(g.$n,{variant:"secondary",fill:"outline",onClick:ae},"Cancel"),t.createElement(g.$n,{variant:"primary",onClick:rt},"Update")))}const G=Ee=>({tableWrap:(0,u.css)`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,u.css)({width:"100%",marginBottom:Ee.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:Ee.colors.action.hover}," th, td":{padding:Ee.spacing(1)}})});function H(){return(0,f.uniqueId)("mapping-")}function q(Ee){return{type:x.d.ValueToText,result:{},id:H(),...Ee}}function le(Ee){return{...q(Ee),id:H()}}function me(Ee){const se=[],ae={type:x.d.ValueToText,options:{}};return Ee.forEach((fe,Ce)=>{const Re={...fe.result,index:Ce};switch((!Re.text||Re.text.trim().length===0)&&(Re.text=void 0),fe.type){case x.d.ValueToText:fe.key!=null&&(ae.options[fe.key]=Re);break;case x.d.RangeToText:fe.from!=null&&fe.to!=null&&se.push({type:fe.type,options:{from:fe.from,to:fe.to,result:Re}});break;case x.d.RegexToText:fe.pattern!=null&&se.push({type:fe.type,options:{pattern:fe.pattern,result:Re}});break;case x.d.SpecialValue:se.push({type:fe.type,options:{match:fe.specialMatch,result:Re}})}}),Object.keys(ae.options).length>0&&se.unshift(ae),se}function k(Ee){const se=[];if(Ee)for(const ae of Ee)switch(ae.type){case x.d.ValueToText:for(const fe of Object.keys(ae.options))se.push(q({type:ae.type,result:ae.options[fe],key:fe}));break;case x.d.RangeToText:se.push(q({type:ae.type,result:ae.options.result,from:ae.options.from??0,to:ae.options.to??0}));break;case x.d.RegexToText:se.push(q({type:ae.type,result:ae.options.result,pattern:ae.options.pattern}));break;case x.d.SpecialValue:se.push(q({type:ae.type,result:ae.options.result,specialMatch:ae.options.match??x.W.Null}))}return se.sort((ae,fe)=>(ae.result.index??0)>(fe.result.index??0)?1:-1),se}const ee=t.memo(Ee=>{const{value:se,onChange:ae,item:fe}=Ee,Ce=(0,A.of)(X),Re=fe.settings?.icon,[Oe,ze]=(0,t.useState)(!1),Xe=(0,t.useCallback)(()=>{ze(!1)},[ze]),Ze=(0,t.useMemo)(()=>k(se),[se]),et=(0,t.useCallback)((lt,rt)=>{Ze[rt].result.color=lt,ae(me(Ze))},[Ze,ae]),nt=(0,t.useCallback)((lt,rt)=>{Ze[rt].result.icon=lt,ae(me(Ze))},[Ze,ae]);return t.createElement(R.gW,null,t.createElement("table",{className:Ce.compactTable},t.createElement("tbody",null,Ze.map((lt,rt)=>t.createElement("tr",{key:rt.toString()},t.createElement("td",null,lt.type===x.d.ValueToText&&lt.key,lt.type===x.d.RangeToText&&t.createElement("span",null,"[",lt.from," - ",lt.to,"]"),lt.type===x.d.RegexToText&&lt.pattern,lt.type===x.d.SpecialValue&&lt.specialMatch),t.createElement("td",null,t.createElement(B.I,{name:"arrow-right"})),t.createElement("td",null,lt.result.text),lt.result.color&&t.createElement("td",null,t.createElement(a.sk,{color:lt.result.color,onChange:ut=>et(ut,rt),enableNamedColors:!0})),Re&&lt.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(K.n,{onChange:ut=>nt(ut,rt),value:lt.result.icon,size:F.Iy.SMALL,folderName:F.Iu.Icon,mediaType:F.zu.Icon,color:lt.result.color})))))),t.createElement(g.$n,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>ze(!0)},Ze.length>0&&t.createElement("span",null,"Edit value mappings"),Ze.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(U.a,{isOpen:Oe,title:"Value mappings",onDismiss:Xe,className:Ce.modal,closeOnBackdropClick:!1},t.createElement(J,{value:se,onChange:ae,onClose:Xe,showIconPicker:Re})))});ee.displayName="ValueMappingsEditor";const X=Ee=>({modal:(0,u.css)({width:"980px"}),compactTable:(0,u.css)({width:"100%","tbody td":{padding:Ee.spacing(.5)}})});var j=e(59429);const ne=({value:Ee,onChange:se,item:ae})=>{const{placeholder:fe,isClearable:Ce}=ae?.settings??{},Re=(0,t.useCallback)(Oe=>{se(Oe?.value?.uid)},[se]);return t.createElement(j.b,{isClearable:Ce,defaultOptions:!0,onChange:Re,placeholder:fe,value:Ee})};var te=e(77268),oe=e(8066),ie=e(24293),ue=e(88575);const be=({value:Ee,onChange:se,item:ae,id:fe})=>{const Ce=(0,A.$j)(),Re=(0,A.of)(re),Oe=(0,oe.Hs)(Ee?.mode),Xe=(ae.settings?.byValueSupport?oe.uf.list():oe.uf.list().filter(rt=>!rt.isByValue)).filter(rt=>!rt.excludeFromPicker).map(rt=>{let ut=rt.isByValue?" (by value)":"";return{value:rt.id,label:`${rt.name}${ut}`,description:rt.description,isContinuous:rt.isContinuous,isByValue:rt.isByValue,component(){return t.createElement(ge,{mode:rt,theme:Ce})}}}),Ze=rt=>{se({...Ee,mode:rt.value})},et=rt=>{se({...Ee,mode:lt,fixedColor:rt})},nt=rt=>{se({...Ee,mode:lt,seriesBy:rt})},lt=Ee?.mode??ie.Y.Thresholds;if(lt===ie.Y.Fixed||lt===ie.Y.Shades)return t.createElement("div",{className:Re.group},t.createElement(V.l6,{minMenuHeight:200,options:Xe,value:lt,onChange:Ze,className:Re.select,inputId:fe}),t.createElement(te.a,{value:Ee?.fixedColor,onChange:et}));if(ae.settings?.bySeriesSupport&&Oe.isByValue){const rt=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Ce.spacing(2)}},t.createElement(V.l6,{minMenuHeight:200,options:Xe,value:lt,onChange:Ze,inputId:fe})),t.createElement(ue.D,{label:"Color series by"},t.createElement(l.z,{value:Ee?.seriesBy??"last",options:rt,onChange:nt})))}return t.createElement(V.l6,{minMenuHeight:200,options:Xe,value:lt,onChange:Ze,inputId:fe})},ge=({mode:Ee,theme:se})=>{if(!Ee.getColors)return null;const ae=Ee.getColors(se).map(se.visualization.getColorByName),fe={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(Ee.isContinuous)fe.background=`linear-gradient(90deg, ${ae.join(",")})`;else{let Ce="",Re="";for(let Oe=0;Oe<ae.length;Oe++){const ze=ae[Oe];if(Ce==="")Ce=`linear-gradient(90deg, ${ze} 0%`;else{const Ze=Oe/(ae.length-1)*100;Ce+=`, ${Re} ${Ze}%, ${ze} ${Ze}%`}Re=ze}fe.background=Ce}return t.createElement("div",{style:fe})},re=Ee=>({group:(0,u.css)({display:"flex"}),select:(0,u.css)({marginRight:Ee.spacing(1),flexGrow:1})});var ye=e(91890),Be=e(64919);const ve=({value:Ee,onChange:se,context:ae})=>t.createElement(Be.e,{links:Ee,onChange:se,data:ae.data,getSuggestions:()=>ae.getSuggestions?ae.getSuggestions(ye.uP.Values):[]});class Me extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:se}=this.props,{settings:ae}=se;let fe=se.settings?.options||[];ae?.getOptions&&(fe=await ae.getOptions(this.props.context)),this.state.options!==fe&&this.setState({isLoading:!1,options:fe})}}componentDidMount(){this.updateOptions()}componentDidUpdate(se){const ae=se.item?.settings,fe=this.props.item?.settings;if(ae!==fe)this.updateOptions();else if(fe?.getOptions){const Ce=se.context?.data,Re=this.props.context?.data;Ce!==Re&&this.updateOptions()}}render(){const{options:se,isLoading:ae}=this.state,{value:fe,onChange:Ce,item:Re}=this.props,{settings:Oe}=Re;return t.createElement(V.KF,{isLoading:ae,value:fe,defaultValue:fe,allowCustomValue:Oe?.allowCustomValue,onChange:ze=>{Ce(ze.map(Xe=>Xe.value).flatMap(Xe=>Xe!==void 0?[Xe]:[]))},options:se})}}var ke=e(72626);class Se extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:se}=this.props,{settings:ae}=se;let fe=se.settings?.options||[];ae?.getOptions&&(fe=await ae.getOptions(this.props.context)),this.state.options!==fe&&this.setState({isLoading:!1,options:fe})}}componentDidMount(){this.updateOptions()}componentDidUpdate(se){const ae=se.item?.settings,fe=this.props.item?.settings;if(ae!==fe)this.updateOptions();else if(fe?.getOptions){const Ce=se.context?.data,Re=this.props.context?.data;Ce!==Re&&this.updateOptions()}}render(){const{options:se,isLoading:ae}=this.state,{value:fe,onChange:Ce,item:Re}=this.props,{settings:Oe}=Re;let ze=se.find(Xe=>Xe.value===fe);return!ze&&fe&&(ze={label:`${fe}`,value:fe}),t.createElement(V.l6,{isLoading:ae,value:ze,defaultValue:fe,allowCustomValue:Oe?.allowCustomValue,isClearable:Oe?.isClearable,onChange:Xe=>Ce(Xe?.value),options:se})}}var We=e(57602),De=e(42734);const pe=({value:Ee,onChange:se,item:ae,id:fe})=>t.createElement(De.S,{stats:Ee,onChange:se,allowMultiple:!!ae.settings?.allowMultiple,defaultStat:ae.settings?.defaultStat,inputId:fe});var Ne=e(29286),Le=e(32264);class He extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=se=>{const{value:ae,onChange:fe}=this.props,Ce=[...ae];Ce.splice(se,1),fe(Ce)},this.onValueChange=(se,ae)=>{if("key"in se&&se.key!=="Enter")return;const{value:fe,onChange:Ce}=this.props,Re=se.currentTarget.value.trim();if(ae<0){Re&&(se.currentTarget.value="",Ce([...fe,Re])),this.setState({showAdd:!1});return}if(!Re)return this.onRemoveString(ae);const Oe=[...fe];Oe[ae]=Re,Ce(Oe)}}render(){const{value:se,item:ae}=this.props,{showAdd:fe}=this.state,Ce=je(Le.$.theme2),Re=ae.settings?.placeholder||"Add text";return t.createElement("div",null,se.map((Oe,ze)=>t.createElement(y.p,{className:Ce.textInput,key:`${ze}/${Oe}`,defaultValue:Oe||"",onBlur:Xe=>this.onValueChange(Xe,ze),onKeyDown:Xe=>this.onValueChange(Xe,ze),suffix:t.createElement(B.I,{className:Ce.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(ze)})})),fe?t.createElement(y.p,{autoFocus:!0,className:Ce.textInput,placeholder:Re,defaultValue:"",onBlur:Oe=>this.onValueChange(Oe,-1),onKeyDown:Oe=>this.onValueChange(Oe,-1),suffix:t.createElement(B.I,{name:"plus-circle"})}):t.createElement(g.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},Re))}}const je=(0,P.N)(Ee=>({textInput:(0,u.css)({marginBottom:"5px","&:hover":{border:`1px solid ${Ee.components.input.borderHover}`}}),trashIcon:(0,u.css)({color:Ee.colors.text.secondary,cursor:"pointer","&:hover":{color:Ee.colors.text.primary}})}));var at=e(2056);function Ye({value:Ee,onChange:se,item:ae}){const fe=(0,A.of)($e);return ae?.settings?.isClearable&&Ee!=null?t.createElement("div",{className:fe.wrapper},t.createElement("span",{className:fe.first},t.createElement(at.p,{value:Ee,onChange:se})),t.createElement(v.K,{name:"times",onClick:()=>se(void 0),tooltip:"Clear unit selection"})):t.createElement(at.p,{value:Ee,onChange:se})}const $e=Ee=>({wrapper:(0,u.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center"}),first:(0,u.css)({marginRight:Ee.spacing(1),flexGrow:2})}),xe=()=>{const Ee={id:"number",name:"Number",description:"Allows numeric values input",editor:ke.w},se={id:"slider",name:"Slider",description:"Allows numeric values input",editor:We.G},ae={id:"text",name:"Text",description:"Allows string values input",editor:Ne.g},fe={id:"strings",name:"String array",description:"An array of strings",editor:He},Ce={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Gt){const{id:Wt,...ot}=Gt;return t.createElement(m.d,{...ot,onChange:Tt=>Gt.onChange(Tt.currentTarget.checked)})}},Re={id:"select",name:"Select",description:"Allows option selection",editor:Se},Oe={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:Me},ze={id:"radio",name:"Radio",description:"Allows option selection",editor(Gt){return t.createElement(l.z,{...Gt,options:Gt.item.settings?.options})}},Xe={id:"unit",name:"Unit",description:"Allows unit input",editor:Ye},Ze={id:"color",name:"Color",description:"Allows color selection",editor(Gt){return t.createElement(te.a,{value:Gt.value,onChange:Gt.onChange,settings:Gt.item.settings,details:!0})}},et={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:be},nt={id:"links",name:"Links",description:"Allows defining data links",editor:ve},lt={id:"stats-picker",name:"Stats Picker",editor:pe,description:""},rt={id:"timezone",name:"Time zone",description:"Time zone selection",editor:i.U},ut={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:c.O};return[ae,Ee,se,Ce,ze,Re,Xe,nt,lt,fe,rt,et,Ze,Oe,ut,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ne},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:ee},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:p}]},Fe=()=>{const Ee=["Standard options"],se={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.D.get("text").editor,override:n.D.get("text").editor,process:r.AM,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:Ee},ae={id:"unit",path:"unit",name:"Unit",description:"",editor:n.D.get("unit").editor,override:n.D.get("unit").editor,process:r.OU,settings:{placeholder:"none"},shouldApply:()=>!0,category:Ee},fe={id:"fieldMinMax",path:"fieldMinMax",name:"Field min/max",description:"Calculate min max per field",editor:n.D.get("boolean").editor,override:n.D.get("boolean").editor,process:r.FM,shouldApply:rt=>rt.type===s.PU.number,showIf:rt=>rt.min===void 0||rt.max===void 0,category:Ee},Ce={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.D.get("number").editor,override:n.D.get("number").editor,process:r.m0,settings:{placeholder:"auto"},shouldApply:rt=>rt.type===s.PU.number,category:Ee},Re={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.D.get("number").editor,override:n.D.get("number").editor,process:r.m0,settings:{placeholder:"auto"},shouldApply:rt=>rt.type===s.PU.number,category:Ee},Oe={id:"decimals",path:"decimals",name:"Decimals",editor:n.D.get("number").editor,override:n.D.get("number").editor,process:r.m0,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:rt=>rt.type===s.PU.number,category:Ee},ze={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.D.get("text").editor,override:n.D.get("text").editor,process:r.OU,settings:{placeholder:"-"},shouldApply:()=>!0,category:Ee},Xe={id:"links",path:"links",name:"Data links",editor:n.D.get("links").editor,override:n.D.get("links").editor,process:r.Ch,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:rt=>rt?rt.length:0},Ze={id:"color",path:"color",name:"Color scheme",editor:n.D.get("fieldColor").editor,override:n.D.get("fieldColor").editor,process:r.hS,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:Ee},et={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.D.get("mappings").editor,override:n.D.get("mappings").editor,process:r.xT,settings:{},defaultValue:[],shouldApply:rt=>rt.type!==s.PU.time,category:["Value mappings"],getItemsCount:rt=>rt?rt.length:0},nt={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.D.get("thresholds").editor,override:n.D.get("thresholds").editor,process:r.N7,settings:{},defaultValue:{mode:o.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:rt=>rt?rt.steps.length:0},lt={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.D.get("boolean").editor,override:n.D.get("boolean").editor,process:r.FM,shouldApply:()=>!0,settings:{},category:Ee};return[ae,Ce,Re,fe,Oe,se,Ze,ze,Xe,et,nt,lt]}},57602:(Y,I,e)=>{"use strict";e.d(I,{G:()=>i});var t=e(32196),n=e(94659),r=e(61485),s=e(96540),o=e(40845),m=e(24849),l=e(60188);const i=({value:f,onChange:d,item:E})=>{const h=(0,s.useRef)(null),{settings:y}=E,a=y?.min||0,v=y?.max||100,g=y?.step,b=y?.marks||{[a]:a,[v]:v},P=y?.included,C=y?.ariaLabelForHandle,D=75,T=!0,M=(0,o.$j)(),[O,S]=(0,s.useState)(f??a),[p,x]=(0,s.useState)(D);(0,s.useEffect)(()=>{f!=null&&f!==O&&S(f)},[f,O]),(0,s.useEffect)(()=>{const K=getComputedStyle(h.current),w=K.getPropertyValue("font-weight")||"normal",L=K.getPropertyValue("font-size")||"16px",V=K.getPropertyValue("font-family")||"Arial",N="0",z=4,J=8,G=Math.max((v+(g||0)).toString().length,(v-(g||0)).toString().length)+z,H=N.repeat(G),q=c(H,`${w} ${L} ${V}`);q&&x(q+J*2)},[v,g]);const A=(0,s.useCallback)(K=>{const w=typeof K=="number"?K:K[0];S(w),d&&d(w)},[S,d]),R=(0,s.useCallback)(K=>{let w=K;(Number.isNaN(w)||!w)&&(w=0),S(w),d&&d(w)},[d]),B=(0,m.$)(M,T,!!b),U=u(M,p),F=T?[]:[B.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(B.container,B.slider)},s.createElement(n.Global,{styles:B.slider}),s.createElement("div",{className:(0,t.cx)(B.sliderInput,...F)},s.createElement(r.A,{min:a,max:v,step:g,defaultValue:f,value:O,onChange:A,vertical:!T,reverse:!1,ariaLabelForHandle:C,marks:b,included:P}),s.createElement("span",{className:U.numberInputWrapper,ref:h},s.createElement(l.Q,{value:O,onChange:R,max:v,min:a,step:g}))))};function c(f,d){const h=document.createElement("canvas").getContext("2d");return h?(h.font=d,h.measureText(f).width):null}const u=(f,d)=>({numberInputWrapper:(0,t.css)({marginLeft:f.spacing(3),maxHeight:"32px",maxWidth:d,minWidth:d,overflow:"visible",width:"100%"})})},29286:(Y,I,e)=>{"use strict";e.d(I,{g:()=>s});var t=e(96540),n=e(21744),r=e(10354);const s=({value:o,onChange:m,item:l,suffix:i})=>{const c=l.settings?.useTextarea?n.f:r.p,u=(0,t.useCallback)(f=>{let d=o??"";"key"in f?f.key==="Enter"&&!l.settings?.useTextarea&&(d=f.currentTarget.value.trim()):d=f.currentTarget.value.trim(),d!==o&&m(d===""?void 0:d)},[o,l.settings?.useTextarea,m]);return t.createElement(c,{placeholder:l.settings?.placeholder,defaultValue:o||"",rows:l.settings?.useTextarea&&l.settings.rows||5,onBlur:u,onKeyDown:u,suffix:i})}},17205:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>K});var t=e(32196),n=e(96540),r=e(64388),s=e(40845),o=e(76888),m=e(32264),l=e(40276);function i(L){return m.$.featureToggles.betterPageScrolling?n.createElement(c,{...L},L.children):n.createElement(l.E,{...L})}function c({children:L,scrollRefCallback:V,scrollTop:N}){const z=(0,s.of)(u),J=(0,n.useRef)(null);return(0,n.useEffect)(()=>{J.current&&V&&V(J.current)},[J,V]),(0,n.useEffect)(()=>{J.current&&N!=null&&J.current?.scrollTo(0,N)},[N]),n.createElement("div",{ref:J,className:(0,t.cx)(z.nativeScrollbars,"scrollbar-view")},L)}function u(){return{nativeScrollbars:(0,t.css)({label:"native-scroll-container",minHeight:"calc(100% + 0px)",maxHeight:"calc(100% + 0px)",display:"flex",flexDirection:"column",flexGrow:1,overflow:"auto"})}}var f=e(39419);const d=({isLoading:L,children:V,className:N})=>{let z=N?n.createElement("div",{className:N},V):V;return n.createElement(n.Fragment,null,L?n.createElement(f.A,null):z)};var E=e(13773),h=e(17172),y=e(94753),a=e(29158),v=e(88575),g=e(10354);const b=({value:L,onEdit:V})=>{const N=(0,s.of)(P),[z,J]=(0,n.useState)(L),[G,H]=(0,n.useState)(!1),[q,le]=(0,n.useState)(!1),[me,k]=(0,n.useState)();(0,n.useEffect)(()=>{J(L)},[L]);const ee=(0,n.useCallback)(async X=>{const j=X.currentTarget.value;if(!j)k("Please enter a title");else if(j===L)k(void 0),H(!1);else{le(!0);try{await V(j),k(void 0),H(!1)}catch(ne){(0,h.NF)(ne)?k(ne.data.message):ne instanceof Error&&k(ne.message)}le(!1)}},[V,L]);return G?n.createElement("div",{className:N.inputContainer},n.createElement(v.D,{className:N.field,loading:q,invalid:!!me,error:me},n.createElement(g.p,{className:N.input,defaultValue:z,onKeyDown:X=>{X.key==="Enter"&&ee(X)},autoFocus:!0,onBlur:ee,onChange:X=>J(X.currentTarget.value),onFocus:()=>H(!0)}))):n.createElement("div",{className:N.textContainer},n.createElement("div",{className:N.textWrapper},n.createElement(y.E,{element:"h1",truncate:!0},z),n.createElement(a.K,{name:"pen",size:"lg",tooltip:"Edit title",onClick:()=>H(!0)})))};b.displayName="EditableTitle";const P=L=>({textContainer:(0,t.css)({minWidth:0}),field:(0,t.css)({flex:1,left:`calc(-${L.spacing(1)} - 1px)`,position:"relative",marginBottom:0}),input:(0,t.css)({input:{...L.typography.h1}}),inputContainer:(0,t.css)({display:"flex",flex:1}),textWrapper:(0,t.css)({alignItems:"center",display:"flex",gap:L.spacing(1)})});function C({navItem:L,renderTitle:V,actions:N,info:z,subTitle:J,onEditTitle:G}){const H=(0,s.of)(D),q=J??L.subTitle,le=G?n.createElement(b,{value:L.text,onEdit:G}):n.createElement("div",{className:H.title},L.img&&n.createElement("img",{className:H.img,src:L.img,alt:`logo for ${L.text}`}),V?V(L.text):n.createElement("h1",null,L.text));return n.createElement("div",{className:H.pageHeader},n.createElement("div",{className:H.topRow},n.createElement("div",{className:H.titleInfoContainer},le,z&&n.createElement(E.Q,{info:z})),n.createElement("div",{className:H.actions},N)),q&&n.createElement("div",{className:H.subTitle},q))}const D=L=>({topRow:(0,t.css)({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:L.spacing(1,3)}),title:(0,t.css)({display:"flex",flexDirection:"row",maxWidth:"100%",h1:{display:"flex",marginBottom:0}}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:L.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:L.spacing(1,4),justifyContent:"space-between",maxWidth:"100%",minWidth:"200px"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:L.spacing(1),marginBottom:L.spacing(2)}),subTitle:(0,t.css)({position:"relative",color:L.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:L.spacing(2)})});var T=e(63021),M=e(8984),O=e(40675);function S({navItem:L}){const V=(0,s.of)(p);return n.createElement("div",{className:V.tabsWrapper},n.createElement(T.U,null,L.children.map((N,z)=>{const J=N.icon?(0,M.toIconName)(N.icon):void 0;return!N.hideFromTabs&&n.createElement(O.o,{label:N.text,active:N.active,key:`${N.url}-${z}`,icon:J,counter:N.tabCounter,href:N.url,suffix:N.tabSuffix,onChangeTab:N.onClick})})))}const p=L=>({tabsWrapper:(0,t.css)({paddingBottom:L.spacing(3)})});var x=e(77109),A=e(28215),R=e(31678),B=e(19361),U=e(3984);function F(L,V){const N=(0,R.useSelector)(z=>z.navIndex)?.[A.Id];(0,n.useEffect)(()=>{const z=(L?.node!==L?.main?L?.node:L?.main)??{text:"SyncCity"},J=(0,U.Z)(z,V,N).map(G=>G.text).reverse();J[J.length-1]=B.M.AppTitle,document.title=J.join(" - ")},[N,L,V])}const K=({navId:L,navModel:V,pageNav:N,renderTitle:z,onEditTitle:J,actions:G,subTitle:H,children:q,className:le,info:me,layout:k=r.k.Standard,scrollTop:ee,scrollRef:X,...j})=>{const ne=(0,s.of)(w),te=(0,x.i)(L,V),{chrome:oe}=(0,o.Il)();F(te,N);const ie=N??te?.node;return(0,n.useLayoutEffect)(()=>{te&&oe.update({sectionNav:te,pageNav:N,layout:k})},[te,N,oe,k]),n.createElement("div",{className:(0,t.cx)(ne.wrapper,le),...j},k===r.k.Standard&&n.createElement(i,{autoHeightMin:"100%",scrollTop:ee,scrollRefCallback:X},n.createElement("div",{className:ne.pageInner},ie&&n.createElement(C,{actions:G,onEditTitle:J,navItem:ie,renderTitle:z,info:me,subTitle:H}),N&&N.children&&n.createElement(S,{navItem:N}),n.createElement("div",{className:ne.pageContent},q))),k===r.k.Canvas&&n.createElement(i,{autoHeightMin:"100%",scrollTop:ee,scrollRefCallback:X},n.createElement("div",{className:ne.canvasContent},q)),k===r.k.Custom&&q)};K.Contents=d;const w=L=>({wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),primaryBg:(0,t.css)({background:L.colors.background.primary}),pageInner:(0,t.css)({label:"page-inner",padding:L.spacing(2),borderBottom:"none",background:L.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:L.spacing(0,0,0,0),[L.breakpoints.up("md")]:{padding:L.spacing(4)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:L.spacing(2),flexBasis:"100%",flexGrow:1})})},77109:(Y,I,e)=>{"use strict";e.d(I,{i:()=>o});var t=e(1081),n=e(17422),r=e(99140),s=e(31678);function o(l,i){if(i)return i;if(l&&r.M_)return(0,s.useSelector)((0,t.Mz)(m,c=>(0,n.tc)(c,l??"home")))}function m(l){return l.navIndex}},13773:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>s});var t=e(32196),n=e(96540),r=e(40845);function s({info:m}){const l=(0,r.of)(o);return n.createElement("div",{className:l.container},m.map((i,c)=>n.createElement(n.Fragment,{key:c},n.createElement("div",{className:l.infoItem},n.createElement("div",{className:l.label},i.label),i.value),c+1<m.length&&n.createElement("div",{"data-testid":"page-info-separator",className:l.separator}))))}const o=m=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:m.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...m.typography.bodySmall,display:"flex",flexDirection:"column",gap:m.spacing(.5)}),label:(0,t.css)({color:m.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${m.colors.border.weak}`})})},39419:(Y,I,e)=>{"use strict";e.d(I,{A:()=>s});var t=e(96540),n=e(39558);const s=({pageName:o=""})=>{const m=`Loading ${o}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n._,{text:m}))}},7392:(Y,I,e)=>{"use strict";e.d(I,{L:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(69529),o=e(72109);function m({entity:i="Page"}){const c=(0,r.of)(l);return n.createElement("div",{className:c.container},n.createElement(s.p,{message:`${i} not found`,variant:"not-found"},"We're looking but can't seem to find this ",i.toLowerCase(),". Try returning"," ",n.createElement(o.Y,{href:"/"},"home")," or seeking help on the"," ",n.createElement(o.Y,{href:"https://community.grafana.com",external:!0},"community site.")))}function l(i){return{container:(0,t.css)({padding:i.spacing(8,2,2,2)})}}},68313:(Y,I,e)=>{"use strict";e.d(I,{$:()=>c});var t=e(32196),n=e(96540),r=e(32264),s=e(40845),o=e(55852),m=e(88323),l=e(14578),i=e(17706);const c=({onChange:f,maxMenuHeight:d,isWidget:E=!1})=>{const h=()=>r.$.featureToggles.vizAndWidgetSplit?E?(0,i.nr)():(0,i.if)():(0,i.A4)(),y=(0,n.useMemo)(h,[E]),a=(0,n.useMemo)(()=>y.map(D=>({label:D.name,imgUrl:D.info.logos.small,value:D})).sort((D,T)=>D.label?.localeCompare(T.label)),[y]),[v,g]=(0,n.useState)([]),b=(0,n.useCallback)(D=>{const T=D.filter(M=>M.value).map(M=>M.value);f(T),g(D)},[f]),P=(0,s.of)(u),C={defaultOptions:!0,getOptionLabel:D=>D.label,getOptionValue:D=>D.value,noOptionsMessage:"No Panel types found",placeholder:"Filter by type",maxMenuHeight:d,options:a,value:v,onChange:b};return n.createElement("div",{className:P.container},v.length>0&&n.createElement(o.$n,{size:"xs",icon:"trash-alt",fill:"text",className:P.clear,onClick:()=>b([]),"aria-label":"Clear types"},"Clear types"),n.createElement(m.KF,{...C,prefix:n.createElement(l.I,{name:"filter"}),"aria-label":"Panel Type filter"}))};function u(f){return{container:(0,t.css)`
      label: container;
      position: relative;
      min-width: 180px;
      flex-grow: 1;
    `,clear:(0,t.css)`
      label: clear;
      font-size: ${f.spacing(1.5)};
      position: absolute;
      top: -${f.spacing(4.5)};
      right: 0;
    `}}},78361:(Y,I,e)=>{"use strict";e.d(I,{s:()=>o});var t=e(96540),n=e(13544),r=e(10354),s=e(29158);const o=t.forwardRef((m,l)=>{const[i,c]=(0,t.useState)(!1);return t.createElement(r.p,{...m,type:i?"text":"password","data-testid":n.Tp.pages.Login.password,ref:l,suffix:t.createElement(s.K,{name:i?"eye-slash":"eye","aria-controls":m.id,role:"switch","aria-checked":i,onClick:()=>{c(!i)},tooltip:i?"Hide password":"Show password"})})});o.displayName="PasswordField"},22214:(Y,I,e)=>{"use strict";e.d(I,{j:()=>o});var t=e(32196),n=e(96540),r=e(36663),s=e(40845);const o=n.memo(n.forwardRef(({className:i,children:c,markdown:u,styleOverrides:f,onRemove:d,...E},h)=>{const y=(0,s.of)(a=>l(a,f?.borderTop));return n.createElement("div",{className:(0,t.cx)(y.wrapper,i),...E,ref:h},u&&m(u),c)}));function m(i){const c=(0,r.G)(i);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:c}})}o.displayName="OperationRowHelp";const l=(i,c)=>{const u=i.shape.radius.default,f=i.colors.background.secondary;return{wrapper:(0,t.css)`
      padding: ${i.spacing(2)};
      border: 2px solid ${f};
      border-top: ${c?c+f:"none"};
      border-radius: 0 0 ${u} ${u};
      position: relative;
      top: -4px;
    `}}},10343:(Y,I,e)=>{"use strict";e.d(I,{A:()=>i,q:()=>l});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(29158);function m(u){const f=(0,s.of)(c);return n.createElement("div",{className:(0,t.cx)(f.icon,"active"in u&&u.active&&f.active)},n.createElement(o.K,{name:u.icon,tooltip:u.title,className:f.icon,disabled:!!u.disabled,onClick:u.onClick,type:"button","data-testid":u.dataTestId??r.Tp.components.QueryEditorRow.actionButton(u.title),..."active"in u&&{"aria-pressed":u.active}}))}function l(u){return n.createElement(m,{...u})}const i=u=>n.createElement(m,{...u}),c=u=>({icon:(0,t.css)({display:"flex",position:"relative",color:u.colors.text.secondary}),active:(0,t.css)({"&:before":{display:"block",content:'" "',position:"absolute",left:-1,right:2,height:3,borderRadius:u.shape.radius.default,bottom:-8,backgroundImage:u.colors.gradients.brandHorizontal}})})},7788:(Y,I,e)=>{"use strict";e.d(I,{u:()=>h});var t=e(32196),n=e(96540),r=e(55244),s=e(22589),o=e(14110),m=e(40845),l=e(67892),i=e(29158),c=e(67061),u=e(14578),f=e(44836);const d=({actionsElement:a,disabled:v,draggable:g,collapsable:b=!0,dragHandleProps:P,headerElement:C,isContentVisible:D,onRowToggle:T,reportDragMousePosition:M,title:O,id:S,expanderMessages:p})=>{const x=(0,m.of)(E);let A=D?(0,f.t)("query-operation.header.collapse-row","Collapse query row"):(0,f.t)("query-operation.header.expand-row","Expand query row");p!==void 0&&D?A=p.close:p!==void 0&&(A=p?.open);const R=(0,f.t)("query-operation.header.drag-and-drop","Drag and drop to reorder");return n.createElement("div",{className:x.header},n.createElement("div",{className:x.column},b&&n.createElement(i.K,{name:D?"angle-down":"angle-right",tooltip:A,className:x.collapseIcon,onClick:T,"aria-expanded":D,"aria-controls":S}),O&&n.createElement("div",{className:x.titleWrapper,onClick:T,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(x.title,v&&x.disabled)},O)),C),n.createElement(c.B,{gap:1,alignItems:"center"},a,g&&n.createElement("div",{onMouseMove:M,...P},n.createElement(u.I,{title:R,name:"draggabledots",size:"lg",className:x.dragIcon}))))},E=a=>({header:(0,t.css)`
    label: Header;
    padding: ${a.spacing(.5,.5)};
    border-radius: ${a.shape.radius.default};
    background: ${a.colors.background.secondary};
    min-height: ${a.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:(0,t.css)`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:(0,t.css)`
    cursor: grab;
    color: ${a.colors.text.disabled};
    margin: ${a.spacing(0,.5)};
    &:hover {
      color: ${a.colors.text};
    }
  `,collapseIcon:(0,t.css)`
    margin-left: ${a.spacing(.5)};
    color: ${a.colors.text.disabled};
    }
  `,titleWrapper:(0,t.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${a.spacing(.5)};
  `,title:(0,t.css)`
    font-weight: ${a.typography.fontWeightBold};
    color: ${a.colors.text.link};
    margin-left: ${a.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:(0,t.css)`
    color: ${a.colors.text.disabled};
  `});d.displayName="QueryOperationRowHeader";function h({children:a,actions:v,title:g,headerElement:b,onClose:P,onOpen:C,isOpen:D,disabled:T,draggable:M,collapsable:O,index:S,id:p,expanderMessages:x}){const[A,R]=(0,n.useState)(D!==void 0?D:!0),B=(0,m.of)(y),U=(0,n.useCallback)(()=>{R(!A)},[A,R]);(0,n.useEffect)(()=>{typeof D=="boolean"&&R(D)},[D]);const F=(0,n.useCallback)(V=>{if(V.defaultPrevented){const N=V.currentTarget.getBoundingClientRect(),z=V.clientX-N.left,J=V.clientY-N.top;(0,o.rR)("query_row_reorder_drag_position",{x:z/N.width,y:J/N.height,width:N.width,height:N.height})}},[]);(0,s.A)(()=>{A?C&&C():P&&P()},[A]);const K={isOpen:A,onOpen:()=>{R(!0)},onClose:()=>{R(!1)}},w=v&&l.renderOrCallToRender(v,K),L=b&&l.renderOrCallToRender(b,K);return M?n.createElement(r.sx,{draggableId:p,index:S},V=>n.createElement(n.Fragment,null,n.createElement("div",{ref:V.innerRef,className:B.wrapper,...V.draggableProps},n.createElement("div",null,n.createElement(d,{id:p,actionsElement:w,disabled:T,draggable:!0,collapsable:O,dragHandleProps:V.dragHandleProps,headerElement:L,isContentVisible:A,onRowToggle:U,reportDragMousePosition:F,title:g,expanderMessages:x})),A&&n.createElement("div",{className:B.content},a)))):n.createElement("div",{className:B.wrapper},n.createElement(d,{id:p,actionsElement:w,disabled:T,draggable:!1,collapsable:O,headerElement:L,isContentVisible:A,onRowToggle:U,reportDragMousePosition:F,title:g,expanderMessages:x}),A&&n.createElement("div",{className:B.content},a))}const y=a=>({wrapper:(0,t.css)`
      margin-bottom: ${a.spacing(2)};
    `,content:(0,t.css)`
      margin-top: ${a.spacing(.5)};
      margin-left: ${a.spacing(3)};
    `});h.displayName="QueryOperationRow"},37425:(Y,I,e)=>{"use strict";e.d(I,{n:()=>be});var t=e(96540),n=e(40845),r=e(8866),s=e(17464),o=e(32196),m=e(62930),l=e(14578),i=e(56034),c=e(10354),u=e(87266),f=e(16797),d=e(88824);const E=(0,t.forwardRef)(({children:ge,iconName:re},ye)=>{const Be=(0,n.of)(h);return t.createElement("div",{className:Be.container,ref:ye},re&&t.createElement(l.I,{name:re,size:"xs"}),ge)});E.displayName="ValueContainer";const h=ge=>{const{prefix:re}=(0,c.n)({theme:ge}),{multiValueContainer:ye}=(0,d.J)(ge);return{container:(0,o.cx)(re,ye,(0,o.css)`
        position: relative;
        padding: ${ge.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${ge.spacing(.5)};
        }
      `)}},y=360,a=300,v=320,g=360,b=320,P=360,C=g+P,D=ge=>ge.stopPropagation(),T=({appliedRoles:ge,basicRole:re,disabled:ye,isFocused:Be,query:ve,showBasicRole:Me,width:ke,isLoading:Se,onOpen:We,onClose:De,onQueryChange:pe,...Ne})=>{const Le=(0,n.of)(O,!1,!!Be,!!ye,!1,ke),He=(0,t.useRef)(null);(0,t.useEffect)(()=>{Be&&He.current?.focus()});const je=Ye=>{const $e=Ye.target?.value;pe($e)},at=Me&&re!=="None";return Be?t.createElement("div",{className:Le.wrapper},at&&t.createElement(E,null,re),ge.map(Ye=>t.createElement(E,{key:Ye.uid},Ye.group+":"+(Ye.displayName||Ye.name))),!ye&&t.createElement("input",{...Ne,className:Le.input,ref:He,onMouseDown:D,onChange:je,"data-testid":"role-picker-input",placeholder:Be?"Select role":"",value:ve}),t.createElement("div",{className:Le.suffix},t.createElement(l.I,{name:"angle-up",className:Le.dropdownIndicator,onMouseDown:De}))):t.createElement("div",{className:(0,o.cx)(Le.wrapper,Le.selectedRoles),onMouseDown:We},at&&t.createElement(E,null,re),t.createElement(M,{appliedRoles:ge,numberOfRoles:ge.length,showBuiltInRole:at}),Se&&t.createElement("div",{className:Le.spinner},t.createElement(m.y,{size:16,inline:!0})))};T.displayName="RolePickerInput";const M=({showBuiltInRole:ge,numberOfRoles:re,appliedRoles:ye})=>{const Be=(0,n.of)(ve=>S(ve));return t.createElement(t.Fragment,null,re?t.createElement(i.m,{content:t.createElement("div",{className:Be.tooltip},ye?.map(ve=>t.createElement("p",{key:ve.uid},ve.group+":"+(ve.displayName||ve.name))))},t.createElement(E,null,`${ge?"+":""}${re} role${re>1?"s":""}`)):!ge&&t.createElement(E,null,"No roles assigned"))},O=(ge,re,ye,Be,ve,Me)=>{const ke=(0,c.n)({theme:ge,invalid:re});return{wrapper:(0,o.cx)(ke.wrapper,(0,u.Xb)(ge,re),ye&&(0,o.css)`
          ${f.focusCss(ge.v1)}
        `,Be&&ke.inputDisabled,(0,o.css)({minWidth:Me||y+"px",width:Me,minHeight:"32px",height:"auto",flexDirection:"row",paddingRight:ge.spacing(1),maxWidth:"100%",alignItems:"center",display:"flex",flexWrap:"wrap",justifyContent:"flex-start",position:"relative",boxSizing:"border-box",cursor:"default"}),ve&&(0,o.css)`
          padding-left: 0;
        `),input:(0,o.cx)((0,u.Xb)(ge,re),(0,o.css)`
        max-width: 120px;
        border: none;
        cursor: ${ye?"default":"pointer"};
      `),suffix:ke.suffix,dropdownIndicator:(0,o.css)`
      cursor: pointer;
    `,selectedRoles:(0,o.css)`
      display: flex;
      align-items: center;
      cursor: ${Be?"not-allowed":"pointer"};
    `,tooltip:(0,o.css)`
      p {
        margin-bottom: ${ge.spacing(.5)};
      }
    `,spinner:(0,o.css)({display:"flex",flexGrow:1,justifyContent:"flex-end"})}},S=ge=>({tooltip:(0,o.css)`
    p {
      margin-bottom: ${ge.spacing(.5)};
    }
  `});var p=e(72109),x=e(40276),A=e(66864),R=e(55852),B=e(5173),U=e(31678);const F=ge=>({hideScrollBar:(0,o.css)({".scrollbar-view":{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"}}),menuWrapper:(0,o.css)({display:"flex",maxHeight:"650px",position:"absolute",zIndex:ge.zIndex.dropdown,overflow:"hidden",minWidth:"auto"}),menu:(0,o.css)({minWidth:`${v}px`,maxWidth:`${g}px`,"& > div":{paddingTop:ge.spacing(1)}}),menuLeft:(0,o.css)({flexDirection:"row-reverse"}),subMenu:(0,o.css)({height:"100%",minWidth:`${b}px`,maxWidth:`${P}px`,display:"flex",flexDirection:"column",borderLeft:`1px solid ${ge.components.input.borderColor}`,"& > div":{paddingTop:ge.spacing(1)}}),subMenuLeft:(0,o.css)({borderRight:`1px solid ${ge.components.input.borderColor}`,borderLeft:"unset"}),groupHeader:(0,o.css)({padding:ge.spacing(0,4.5),display:"flex",alignItems:"center",color:ge.colors.text.primary,fontWeight:ge.typography.fontWeightBold}),container:(0,o.css)({padding:ge.spacing(1),border:`1px ${ge.colors.border.weak} solid`,borderRadius:ge.shape.radius.default,backgroundColor:ge.colors.background.primary,zIndex:ge.zIndex.modal}),menuSection:(0,o.css)({marginBottom:ge.spacing(2)}),menuOptionCheckbox:(0,o.css)({display:"flex",margin:ge.spacing(0,1,0,.25)}),menuButtonRow:(0,o.css)({backgroundColor:ge.colors.background.primary,padding:ge.spacing(1)}),menuOptionBody:(0,o.css)({fontWeight:ge.typography.fontWeightRegular,padding:ge.spacing(0,1.5,0,0)}),menuOptionDisabled:(0,o.css)({color:ge.colors.text.disabled,cursor:"not-allowed"}),menuOptionExpand:(0,o.css)({position:"absolute",right:ge.spacing(2.5),color:ge.colors.text.disabled,"&:after":{content:'">"'}}),menuOptionInfoSign:(0,o.css)({color:ge.colors.text.disabled}),basicRoleSelector:(0,o.css)({margin:ge.spacing(1,1.25,1,1.5)}),subMenuPortal:(0,o.css)({height:"100%","> div":{height:"100%"}}),subMenuButtonRow:(0,o.css)({backgroundColor:ge.colors.background.primary,padding:ge.spacing(1)}),checkboxPartiallyChecked:(0,o.css)({input:{"&:checked + span":{"&:after":{borderWidth:"0 3px 0px 0",transform:"rotate(90deg)"}}}}),loadingSpinner:(0,o.css)({marginLeft:ge.spacing(1)})}),K=Object.values(U.OrgRole).map(ge=>({label:ge===U.OrgRole.None?"No basic role":ge,value:ge})),w=({value:ge,onChange:re,disabled:ye,disabledMesssage:Be,tooltipMessage:ve})=>{const Me=(0,n.of)(F),ke=(0,n.$j)();return t.createElement(t.Fragment,null,t.createElement("div",{className:Me.groupHeader},t.createElement("span",{style:{marginRight:ke.spacing(1)}},"Basic roles"),ye&&Be&&t.createElement(i.m,{placement:"right-end",interactive:!0,content:t.createElement("div",null,Be)},t.createElement(l.I,{name:"question-circle"})),!ye&&ve&&t.createElement(i.m,{placement:"right-end",interactive:!0,content:ve},t.createElement(l.I,{name:"info-circle",size:"xs"}))),t.createElement(B.a,{name:"Basic Role Selector",className:Me.basicRoleSelector,options:K,value:ge,onChange:re,disabled:ye}))};var L=e(10880);const V=(0,t.memo)(t.forwardRef(({name:ge,value:re,isFocused:ye,isSelected:Be,partiallySelected:ve,disabled:Me,onChange:ke,onClick:Se,onOpenSubMenu:We,onCloseSubMenu:De,children:pe,root:Ne},Le)=>{const He=(0,n.$j)(),je=(0,d.J)(He),at=(0,n.of)(F),Ye=(0,o.cx)(je.option,ye&&je.optionFocused,Me&&at.menuOptionDisabled),$e=se=>{Me||re&&ke(re)},xe=se=>{Se&&Se(re)},Fe=()=>{We&&We(re)},Ee=()=>{De&&De()};return t.createElement("div",{onMouseEnter:Fe,onMouseLeave:Ee},t.createElement("div",{ref:Le,className:Ye,"aria-label":"Role picker option",onClick:xe},t.createElement(L.S,{value:Be,className:(0,o.cx)(at.menuOptionCheckbox,{[at.checkboxPartiallyChecked]:ve}),onChange:$e,disabled:Me}),t.createElement("div",{className:(0,o.cx)(je.optionBody,at.menuOptionBody)},t.createElement("span",null,ge),t.createElement("span",{className:at.menuOptionExpand})),Ne&&pe&&t.createElement(s.ZL,{className:at.subMenuPortal,root:Ne},pe)))}));V.displayName="RoleMenuGroupOption";const N=t.forwardRef(({data:ge,isFocused:re,isSelected:ye,disabled:Be,onChange:ve,hideDescription:Me},ke)=>{const Se=(0,n.$j)(),We=(0,d.J)(Se),De=(0,n.of)(F),pe=(0,o.cx)(We.option,re&&We.optionFocused,Be&&De.menuOptionDisabled),Ne=Le=>{Be||(Le.preventDefault(),Le.stopPropagation(),ve(ge))};return t.createElement("div",{ref:ke,className:pe,"aria-label":"Role picker option",onClick:Ne},t.createElement(L.S,{value:ye,className:De.menuOptionCheckbox,onChange:Ne,disabled:Be}),t.createElement("div",{className:(0,o.cx)(We.optionBody,De.menuOptionBody)},t.createElement("span",null,ge.displayName||ge.name),!Me&&ge.description&&t.createElement("div",{className:We.optionDescription},ge.description)),ge.description&&t.createElement(i.m,{content:ge.description},t.createElement(l.I,{name:"info-circle",className:De.menuOptionInfoSign})))});N.displayName="RoleMenuOption";var z=e(3246);const J=({options:ge,selectedOptions:re,disabledOptions:ye,onSelect:Be,onClear:ve,showOnLeft:Me})=>{const ke=(0,n.$j)(),Se=(0,d.J)(ke),We=(0,n.of)(F),De=async()=>{ve&&ve()};return t.createElement("div",{className:(0,o.cx)(We.subMenu,{[We.subMenuLeft]:Me}),"aria-label":"Role picker submenu"},t.createElement(x.E,{autoHide:!1,autoHeightMax:`${a}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Se.optionBody},ge.map((pe,Ne)=>t.createElement(N,{data:pe,key:Ne,isSelected:!!(pe.uid&&(re.find(Le=>Le.uid===pe.uid)||ye?.find(Le=>Le.uid===pe.uid))),disabled:!!(pe.uid&&ye?.find(Le=>Le.uid===pe.uid))||(0,z.W)(pe),onChange:Be,hideDescription:!0})))),t.createElement("div",{className:We.subMenuButtonRow},t.createElement(A.Gy,{justify:"flex-end"},t.createElement(R.$n,{size:"sm",fill:"text",onClick:De},"Clear"))))},G=t.forwardRef(({roles:ge,renderedName:re,showGroups:ye,optionGroups:Be,onGroupChange:ve,groupSelected:Me,groupPartiallySelected:ke,subMenuNode:Se,selectedOptions:We,onRoleChange:De,onClearSubMenu:pe,showOnLeftSubMenu:Ne},Le)=>{const[He,je]=(0,t.useState)(!1),[at,Ye]=(0,t.useState)(""),$e=(0,n.$j)(),xe=(0,d.J)($e),Fe=(0,n.of)(F),Ee=(0,t.useCallback)(ae=>{Ye(ae),je(!0)},[]),se=(0,t.useCallback)(()=>{je(!1),Ye("")},[]);return t.createElement("div",null,ge.length>0&&t.createElement("div",{className:Fe.menuSection},t.createElement("div",{className:Fe.groupHeader},re),t.createElement("div",{className:xe.optionBody}),ye&&Be?.length?Be.map(ae=>t.createElement(V,{key:ae.value,name:ae.name,value:ae.value,isSelected:Me(ae.value)||ke(ae.value),partiallySelected:ke(ae.value),disabled:ae.options?.every(z.W),onChange:ve,onOpenSubMenu:Ee,onCloseSubMenu:se,root:Se,isFocused:He&&at===ae.value},He&&at===ae.value&&t.createElement(J,{options:ae.options,selectedOptions:We,onSelect:De,onClear:()=>pe(at),showOnLeft:Ne}))):ge.map(ae=>t.createElement(N,{data:ae,key:ae.uid,isSelected:!!(ae.uid&&We.find(fe=>fe.uid===ae.uid)),disabled:(0,z.W)(ae),onChange:De,hideDescription:!0}))))});G.displayName="RoleMenuGroupsSection";var H=(ge=>(ge.fixed="fixed",ge.custom="custom",ge.plugin="plugin",ge))(H||{});const q={ldap:"LDAP",current:"Current org"},le=t.createElement(t.Fragment,null,'You can now select the "No basic role" option and add permissions to your custom needs. You can find more information in\xA0',t.createElement(p.Y,{href:"https://grafana.com/docs/grafana/latest/administration/roles-and-permissions/#organization-roles",variant:"bodySmall",external:!0},"our documentation"),"."),me=({basicRole:ge,options:re,appliedRoles:ye,showGroups:Be,basicRoleDisabled:ve,disabledMessage:Me,showBasicRole:ke,onSelect:Se,onBasicRoleSelect:We,onUpdate:De,updateDisabled:pe,offset:Ne,menuLeft:Le,apply:He})=>{const[je,at]=(0,t.useState)(ye),[Ye,$e]=(0,t.useState)(ge),[xe,Fe]=(0,t.useState)({}),Ee=(0,t.useRef)(null),se=(0,n.$j)(),ae=(0,d.J)(se),fe=(0,n.of)(F);(0,t.useEffect)(()=>{Se(je)},[je,Se]),(0,t.useEffect)(()=>{We&&Ye&&We(Ye)},[Ye,We]),(0,t.useEffect)(()=>{const rt=re.filter(k).sort(ie),ut=re.filter(ee).sort(ie),Et=re.filter(X).sort(ie),Ct={fixed:j(ut).sort((Ut,Gt)=>Ut.name.localeCompare(Gt.name)),custom:j(rt).sort((Ut,Gt)=>Ut.name.localeCompare(Gt.name)),plugin:j(Et).sort((Ut,Gt)=>Ut.name.localeCompare(Gt.name))};Fe({fixed:{groupType:"fixed",optionGroup:Ct.fixed,renderedName:"Fixed roles",roles:ut},custom:{groupType:"custom",optionGroup:Ct.custom,renderedName:"Custom roles",roles:rt},plugin:{groupType:"plugin",optionGroup:Ct.plugin,renderedName:"Plugin roles",roles:Et}})},[re]);const Ce=rt=>{const ut=[];for(const Et of je)ne(Et)===rt&&ut.push(Et);return ut},Re=(rt,ut)=>{const Et=Ce(ut),Ct=xe[rt]?.optionGroup.find(Ut=>Ut.value===ut);return Et.length>0&&Et.length>=Ct.options.length},Oe=(rt,ut)=>{const Et=Ce(ut),Ct=xe[rt]?.optionGroup.find(Ut=>Ut.value===ut);return Et.length>0&&Et.length<Ct.options.length},ze=rt=>{je.find(ut=>ut.uid===rt.uid)?at(je.filter(ut=>ut.uid!==rt.uid)):at([...je,rt])},Xe=(rt,ut)=>{const Et=xe[rt]?.optionGroup.find(Ct=>Ct.value===ut);if(Et)if(Re(rt,ut)||Oe(rt,ut))at(je.filter(Ct=>!Et.options.find(Ut=>Ct.uid===Ut.uid)));else{const Ct=Et.options.filter(Gt=>Gt.delegatable),Ut=je.filter(Gt=>!Et.options.find(Wt=>Gt.uid===Wt.uid));at([...Ut,...Ct])}},Ze=rt=>{$e(rt)},et=async()=>{at([])},nt=rt=>{const ut=je.filter(Et=>ne(Et)!==rt);at(ut)},lt=()=>{De(je,Ye)};return t.createElement("div",{className:(0,o.cx)(ae.menu,fe.menuWrapper,{[fe.menuLeft]:Le},(0,o.css)({top:`${Ne.vertical}px`,left:Le?"unset":`${Ne.horizontal}px`,right:Le?`${Ne.horizontal}px`:"unset"}))},t.createElement("div",{className:fe.menu,"aria-label":"Role picker menu"},t.createElement(x.E,{autoHide:!1,autoHeightMax:`${a}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0,className:(0,o.cx)(fe.hideScrollBar)},ke&&t.createElement("div",{className:fe.menuSection},t.createElement(w,{value:Ye,onChange:Ze,disabled:ve,disabledMesssage:Me,tooltipMessage:le})),Object.entries(xe).map(([rt,ut])=>t.createElement(G,{key:rt,roles:ut.roles,renderedName:ut.renderedName,showGroups:Be,optionGroups:ut.optionGroup,groupSelected:Et=>Re(ut.groupType,Et),groupPartiallySelected:Et=>Oe(ut.groupType,Et),onGroupChange:Et=>Xe(ut.groupType,Et),subMenuNode:Ee?.current,selectedOptions:je,onRoleChange:ze,onClearSubMenu:nt,showOnLeftSubMenu:Le}))),t.createElement("div",{className:fe.menuButtonRow},t.createElement(A.Gy,{justify:"flex-end"},t.createElement(R.$n,{size:"sm",fill:"text",onClick:et,disabled:pe},"Clear all"),t.createElement(R.$n,{size:"sm",onClick:lt,disabled:pe},He?"Apply":"Update")))),t.createElement("div",{ref:Ee}))},k=ge=>!ge.name?.startsWith("fixed:")&&!ge.name.startsWith("plugins:"),ee=ge=>ge.name?.startsWith("fixed:"),X=ge=>ge.name?.startsWith("plugins:"),j=ge=>{const re={};return ge.forEach(Be=>{const ve=ne(Be),Me=te(Be);re[ve]||(re[ve]={name:Me,roles:[]}),re[ve].roles.push(Be)}),Object.entries(re).map(([Be,ve])=>({name:q[Be]||ue(ve.name),value:Be,options:ve.roles.sort(ie)}))},ne=ge=>{const re=oe(ge),ye=te(ge);return`${re}:${ye}`},te=ge=>ge.group||"Other",oe=ge=>{const re=ge.name.indexOf(":");return re<0?"unknown":ge.name.substring(0,re)},ie=(ge,re)=>ge.name.localeCompare(re.name),ue=ge=>ge.slice(0,1).toUpperCase()+ge.slice(1),be=({basicRole:ge,appliedRoles:re,roleOptions:ye,disabled:Be,isLoading:ve,basicRoleDisabled:Me,basicRoleDisabledMessage:ke,showBasicRole:Se,onRolesChange:We,onBasicRoleChange:De,canUpdateRoles:pe=!0,apply:Ne=!1,maxWidth:Le=y,width:He})=>{const[je,at]=(0,t.useState)(!1),[Ye,$e]=(0,t.useState)(re),[xe,Fe]=(0,t.useState)(ge),[Ee,se]=(0,t.useState)(""),[ae,fe]=(0,t.useState)({vertical:0,horizontal:0}),[Ce,Re]=(0,t.useState)(!1),Oe=(0,t.useRef)(null),ze=(0,n.$j)(),Xe=typeof He=="number"?ze.spacing(He):He;(0,t.useEffect)(()=>{Fe(ge),$e(re)},[re,ge,De]);const Ze=(0,t.useCallback)(()=>{const{horizontal:Wt,vertical:ot,menuToLeft:Tt}=et();Wt&&ot&&(fe({horizontal:Wt,vertical:ot}),Re(Tt))},[]);(0,t.useEffect)(()=>{je&&Ze()},[je,Ye,Ze]);const et=()=>{const Wt=Oe?.current?.getBoundingClientRect();if(!Wt)return{};const{bottom:ot,top:Tt,left:Pn,right:ft}=Wt;let Mt=Pn,_t=!1;const nn=window.innerHeight-ot;let dn=ot+5,en=!1;return nn<a+20&&(dn=Tt-a-50),Tt<a+50&&(dn=Tt,Mt=ft+5,en=!0),Mt+C>window.innerWidth&&(Mt=window.innerWidth-(en?Pn:ft),_t=!0),{horizontal:Mt,vertical:dn,menuToLeft:_t}},nt=(0,t.useCallback)(Wt=>{Be||(Wt.preventDefault(),Wt.stopPropagation(),Ze(),at(!0))},[Be,Ze]),lt=(0,t.useCallback)(()=>{at(!1),se(""),$e(re),Fe(ge)},[re,ge]),rt=()=>je&&lt(),ut=Wt=>{se(Wt||"")},Et=Wt=>{$e(Wt)},Ct=Wt=>{Fe(Wt)},Ut=(Wt,ot)=>{De&&ot&&ot!==ge&&De(ot),pe&&We(Wt),se(""),at(!1)},Gt=()=>{const Wt=ye.map(ot=>({...ot,delegatable:pe&&ot.delegatable}));return Ee&&Ee.trim()!==""?Wt.filter(ot=>ot.name?.toLowerCase().includes(Ee.toLowerCase())):Wt};return t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Xe||Le,width:Xe},ref:Oe},t.createElement(r.N,{onClick:rt,useCapture:!1},t.createElement(T,{basicRole:xe,appliedRoles:Ye,query:Ee,onQueryChange:ut,onOpen:nt,onClose:lt,isFocused:je,disabled:Be,showBasicRole:Se,width:Xe,isLoading:ve}),je&&t.createElement(s.ZL,null,t.createElement("div",{onClick:Wt=>Wt.stopPropagation()},t.createElement(me,{options:Gt(),basicRole:xe,appliedRoles:re,onBasicRoleSelect:Ct,onSelect:Et,onUpdate:Ut,showGroups:Ee.length===0||Ee.trim()==="",basicRoleDisabled:Me,disabledMessage:ke,showBasicRole:Se,updateDisabled:Me&&!pe,apply:Ne,offset:ae,menuLeft:Ce})))))}},89062:(Y,I,e)=>{"use strict";e.d(I,{y:()=>l});var t=e(96540),n=e(41053),r=e(10096),s=e(31678),o=e(37425),m=e(85927);const l=({basicRole:i,roles:c,userId:u,orgId:f,onBasicRoleChange:d,roleOptions:E,disabled:h,basicRoleDisabled:y,basicRoleDisabledMessage:a,apply:v=!1,onApplyRoles:g,pendingRoles:b,maxWidth:P,width:C,isLoading:D})=>{const[{loading:T,value:M=c||[]},O]=(0,n.A)(async()=>{try{if(c)return c;if(v&&b?.length)return b;if(r.TP.hasPermission(s.AccessControlAction.ActionUserRolesList)&&u>0)return await(0,m.Xh)(u,f)}catch{console.error("Error loading options")}return[]},[f,u,b,c]);(0,t.useEffect)(()=>{f&&O()},[O,f]);const S=async x=>{v?g&&g(x,u,f):(await(0,m.eA)(x,u,f),await O())},p=r.TP.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&r.TP.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(o.n,{appliedRoles:M,basicRole:i,onRolesChange:S,onBasicRoleChange:d,roleOptions:E,isLoading:T||D,disabled:h,basicRoleDisabled:y,basicRoleDisabledMessage:a,showBasicRole:!0,apply:v,canUpdateRoles:p,maxWidth:P,width:C})}},85927:(Y,I,e)=>{"use strict";e.d(I,{G3:()=>l,RL:()=>r,Xh:()=>s,eA:()=>o,xN:()=>m});var t=e(17172),n=e(3246);const r=async i=>{let c="/api/access-control/roles?delegatable=true";i&&(c+=`&targetOrgId=${i}`);const u=await(0,t.AI)().get(c);return!u||!u.length?[]:u.map(n.c)},s=async(i,c)=>{let u=`/api/access-control/users/${i}/roles`;c&&(u+=`?targetOrgId=${c}`);try{const f=await(0,t.AI)().get(u);return!f||!f.length?[]:f.map(n.c)}catch(f){return(0,t.NF)(f)&&(f.isHandled=!0),[]}},o=(i,c,u)=>{let f=`/api/access-control/users/${c}/roles`;u&&(f+=`?targetOrgId=${u}`);const d=i.flatMap(E=>E.uid);return(0,t.AI)().put(f,{orgId:u,roleUids:d})},m=async(i,c)=>{let u=`/api/access-control/teams/${i}/roles`;c&&(u+=`?targetOrgId=${c}`);try{const f=await(0,t.AI)().get(u);return!f||!f.length?[]:f.map(n.c)}catch(f){return(0,t.NF)(f)&&(f.isHandled=!0),[]}},l=(i,c,u)=>{let f=`/api/access-control/teams/${c}/roles`;u&&(f+=`?targetOrgId=${u}`);const d=i.flatMap(E=>E.uid);return(0,t.AI)().put(f,{orgId:u,roleUids:d})}},3246:(Y,I,e)=>{"use strict";e.d(I,{W:()=>t,c:()=>n});const t=r=>r.delegatable!==void 0&&!r.delegatable,n=r=>{const s="fixed:";if(!r.displayName&&r.name.startsWith(s)){let o="";o=r.name.replace(s,"").replace(/:/g," "),r.displayName=o}return r}},47694:(Y,I,e)=>{"use strict";e.d(I,{y:()=>u});var t=e(96540),n=e(8867),r=e(40672),s=e(62938);const o=2,m=5,l=h=>{const y=h.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return y?y[0]:null},i=h=>h.match(new RegExp(`<svg.*id\\s*=\\s*(['"])(.*?)\\1`))?.[o],c=h=>{let y=i(h);if(!y){y=`x${(0,s.A)()}`;const v=h.indexOf("<svg")+m;h=h.substring(0,v)+`id="${y}" `+h.substring(v)}let a=l(h);if(a){let v=a.replace(/(#(.*?))?\./g,`#${y} .`);h=h.replace(a,v)}return h},u=h=>{const{cleanStyle:y,...a}=h;return t.createElement(n.default,{...a,cacheRequests:!0,preProcessor:y?E:d})};let f=new Map;function d(h){let y=f.get(h);return y||(y=r.sQ.sanitizeSVGContent(h),f.set(h,y)),y}function E(h){let y=f.get(h);return y||(y=r.sQ.sanitizeSVGContent(h),y.indexOf('<style type="text/css">')>-1&&(y=c(y)),f.set(h,y)),y}},59429:(Y,I,e)=>{"use strict";e.d(I,{b:()=>c});var t=e(76459),n=e.n(t),r=e(96540),s=e(88323),o=e(27677);const m=(u="General",f)=>`${u}/${f}`;async function l(u=""){return o.IB.search({type:"dash-db",query:u,limit:100}).then(f=>f.map(d=>({value:{uid:d.uid,title:d.title,folderTitle:d.folderTitle,folderUid:d.folderUid},label:m(d?.folderTitle,d.title)})))}const i=n()(l,250,{leading:!0}),c=({value:u,onChange:f,placeholder:d="Select dashboard",noOptionsMessage:E="No dashboards found",...h})=>{const[y,a]=(0,r.useState)();(0,r.useEffect)(()=>{!u||u===y?.value?.uid||(async()=>{const g=await o.IB.getDashboardByUid(u);g.dashboard&&a({value:{uid:g.dashboard.uid,title:g.dashboard.title,folderTitle:g.meta.folderTitle,folderUid:g.meta.folderUid},label:m(g.meta?.folderTitle,g.dashboard.title)})})()},[u]);const v=(0,r.useCallback)(g=>{a(g),f?.(g?.value)},[f,a]);return r.createElement(s.DW,{loadOptions:i,onChange:v,placeholder:d,noOptionsMessage:E,value:y,defaultOptions:!0,...h})}},36607:(Y,I,e)=>{"use strict";e.d(I,{d:()=>te});var t=e(96540),n=e(32264),r=e(32196),s=e(18491),o=e(36376),m=e(76459),l=e.n(m),i=e(40845),c=e(10354),u=e(14578),f=e(42418),d=e(57514),E=e(44836),h=e(55314),y=e(24439),a=e(40957),v=e(31678),g=e(70255),b=e(97222),P=e(10022),C=e(29158),D=e(94753),T=e(18759),M=e(37690);const O=40,S="md",p=(ie,ue)=>`${ie}-${ue||"root"}`;function x({items:ie,focusedItemIndex:ue,foldersAreOpenable:be,idPrefix:ge,selectedFolder:re,onFolderExpand:ye,onFolderSelect:Be,isItemLoaded:ve,requestLoadMore:Me}){const ke=(0,t.useRef)(null),Se=(0,i.of)(B),We=(0,t.useMemo)(()=>({items:ie,focusedItemIndex:ue,foldersAreOpenable:be,selectedFolder:re,onFolderExpand:ye,onFolderSelect:Be,idPrefix:ge}),[ie,ue,be,re,ye,Be,ge]),De=(0,t.useCallback)(Ne=>ve(Ne),[ve]),pe=(0,t.useCallback)((Ne,Le)=>{const{parentUID:He}=ie[Ne];Me(He)},[Me,ie]);return t.createElement("div",{className:Se.table,role:"tree"},ie.length>0?t.createElement(P.A,{ref:ke,itemCount:ie.length,isItemLoaded:De,loadMoreItems:pe},({onItemsRendered:Ne,ref:Le})=>t.createElement(b.Y1,{ref:Le,height:O*Math.min(6.5,ie.length),width:"100%",itemData:We,itemSize:O,itemCount:ie.length,onItemsRendered:Ne},R)):t.createElement("div",{className:Se.emptyMessage},t.createElement(E.x6,{i18nKey:"browse-dashboards.folder-picker.empty-message"},"No folders found")))}const A=[100,200,130,160,150];function R({index:ie,style:ue,data:be}){const{items:ge,focusedItemIndex:re,foldersAreOpenable:ye,selectedFolder:Be,onFolderExpand:ve,onFolderSelect:Me,idPrefix:ke}=be,{item:Se,isOpen:We,level:De,parentUID:pe}=ge[ie],Ne=(0,t.useRef)(null),Le=(0,t.useId)(),He=(0,v.useSelector)(M.ku),je=(0,v.useSelector)(M.Am),at=(Se.uid?je[Se.uid]:He)?.items??[];let Ye=[];Se.uid&&(Ye=(pe?je[pe]:He)?.items??[]);const $e=(0,i.of)(B),xe=(0,t.useCallback)(Ee=>{Ee.preventDefault(),Ee.stopPropagation(),Se.uid&&ve(Se.uid,!We)},[Se.uid,We,ve]),Fe=(0,t.useCallback)(()=>{Se.kind==="folder"&&Me(Se)},[Se,Me]);return Se.kind==="ui"&&Se.uiKind==="pagination-placeholder"?t.createElement("span",{style:ue,className:$e.row},t.createElement(T.T,{level:De,spacing:2}),t.createElement(g.A,{width:A[ie%A.length]})):Se.kind!=="folder"?null:t.createElement("div",{ref:Ne,style:ue,className:(0,r.cx)($e.row,{[$e.rowFocused]:ie===re,[$e.rowSelected]:Se.uid===Be}),tabIndex:-1,onClick:Fe,"aria-expanded":We,"aria-selected":Se.uid===Be,"aria-labelledby":Le,"aria-level":De+1,role:"treeitem","aria-owns":at.length>0?at.map(Ee=>p(ke,Ee.uid)).join(" "):void 0,"aria-setsize":at.length,"aria-posinset":Ye.findIndex(Ee=>Ee.uid===Se.uid)+1,id:p(ke,Se.uid)},t.createElement("div",{className:$e.rowBody},t.createElement(T.T,{level:De,spacing:2}),ye?t.createElement(C.K,{size:S,onMouseDown:xe,tabIndex:-1,"aria-label":We?`Collapse folder ${Se.title}`:`Expand folder ${Se.title}`,name:We?"angle-down":"angle-right"}):t.createElement("span",{className:$e.folderButtonSpacer}),t.createElement("label",{className:$e.label,id:Le},t.createElement(D.E,{truncate:!0},Se.title))))}const B=ie=>{const ue=(0,r.css)({height:O,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:ie.spacing(.5),overflow:"hidden",padding:ie.spacing(0,1)});return{table:(0,r.css)({background:ie.components.input.background}),emptyMessage:(0,r.css)({padding:ie.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,r.css)({paddingLeft:ie.spacing(.5)}),row:(0,r.css)({display:"flex",position:"relative",alignItems:"center",":not(:first-child)":{borderTop:`solid 1px ${ie.colors.border.weak}`}}),rowFocused:(0,r.css)({backgroundColor:ie.colors.background.secondary}),rowSelected:(0,r.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:ie.shape.radius.default,backgroundImage:ie.colors.gradients.brandVertical}}),rowBody:ue,label:(0,r.css)({lineHeight:O+"px",flexGrow:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};var U=e(16797);function F({handleClearSelection:ie,isLoading:ue,invalid:be,label:ge,...re},ye){const Be=(0,i.$j)(),ve=w(Be,be),Me=ke=>{(ke.key==="Enter"||ke.key===" ")&&ie?.(ke)};return t.createElement("div",{className:ve.wrapper},t.createElement("div",{className:ve.inputWrapper},ge?t.createElement("div",{className:ve.prefix},t.createElement(u.I,{name:"folder"})):void 0,t.createElement("button",{type:"button",className:(0,r.cx)(ve.fakeInput,ge?ve.hasPrefix:void 0),...re,ref:ye},ue?t.createElement(g.A,{width:100}):ge?t.createElement(D.E,{truncate:!0},ge):t.createElement(D.E,{truncate:!0,color:"secondary"},t.createElement(E.x6,{i18nKey:"browse-dashboards.folder-picker.button-label"},"Select folder")),!ue&&ie&&t.createElement(u.I,{role:"button",tabIndex:0,"aria-label":(0,E.t)("browse-dashboards.folder-picker.clear-selection","Clear selection"),className:ve.clearIcon,name:"times",onClick:ie,onKeyDown:Me})),t.createElement("div",{className:ve.suffix},t.createElement(u.I,{name:"angle-down"}))))}const K=(0,t.forwardRef)(F),w=(ie,ue=!1)=>{const be=(0,c.n)({theme:ie,invalid:ue});return{wrapper:be.wrapper,inputWrapper:be.inputWrapper,prefix:(0,r.css)([be.prefix,{pointerEvents:"none",color:ie.colors.text.primary}]),suffix:(0,r.css)([be.suffix,{pointerEvents:"none"}]),fakeInput:(0,r.css)([be.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,r.css)`
          ${(0,U.focusCss)(ie)}
        `,alignItems:"center",display:"flex",flexWrap:"nowrap",justifyContent:"space-between",paddingRight:28}]),hasPrefix:(0,r.css)({paddingLeft:28}),clearIcon:(0,r.css)({color:ie.colors.text.secondary,cursor:"pointer","&:hover":{color:ie.colors.text.primary},"&:focus:not(:focus-visible)":(0,U.getMouseFocusStyles)(ie),"&:focus-visible":(0,U.getFocusStyles)(ie)})}};var L=e(1081),V=e(92955),N=e(93519),z=e(64756);const J=(0,L.Mz)(ie=>ie,(ie,ue,be,ge,re)=>h.cU.endpoints.listFolders.select({parentUid:ue,page:be,limit:ge,permission:re}),(ie,ue)=>ue(ie)),G=(0,L.Mz)([ie=>ie,(ie,ue)=>ue],(ie,ue)=>{const be=new Set,ge=[],re={};let ye=!1;for(const Be of ue){if(be.has(Be.requestId))continue;const ve=J(ie,Be.arg.parentUid,Be.arg.page,Be.arg.limit,Be.arg.permission);ve.status==="pending"&&(ye=!0);const Me=ve.originalArgs?.parentUid;Me?(re[Me]||(re[Me]=[]),re[Me].push(ve)):ge.push(ve)}return{isLoading:ye,rootPages:ge,pagesByParent:re}});function H(ie){const ue=ie.at(-1),be=ue?.originalArgs?.page;return ue?.data?[ue.data.length<ue.originalArgs.limit,be]:[!1,be]}function q(ie,ue,be){const ge=(0,z.wA)(),re=(0,t.useRef)([]),ye=(0,z.d4)(Me=>G(Me,re.current)),Be=(0,t.useCallback)(Me=>{const ke=Me?ye.pagesByParent[Me]:ye.rootPages,[Se,We]=H(ke??[]);if(Se)return;const De={parentUid:Me,page:(We??0)+1,limit:V.md,permission:be},pe=ge(h.cU.endpoints.listFolders.initiate(De));re.current=re.current.concat([pe])},[ye,ge,be]);return(0,t.useEffect)(()=>()=>{for(const Me of re.current)Me.unsubscribe()},[]),{items:(0,t.useMemo)(()=>{if(!ie)return[];function Me(Se,We,De){const pe=We.flatMap(Le=>(Le.data??[]).flatMap(je=>{const at=ue[je.uid],Ye={isOpen:!!at,level:De,item:{kind:"folder",title:je.title,uid:je.uid}},$e=at&&ye.pagesByParent[je.uid];if($e){const xe=Me(je.uid,$e,De+1);return[Ye,...xe]}return Ye})),[Ne]=H(We);return Ne||pe.push(...(0,N.T)(V.md,Se,De)),pe}const ke=Me(void 0,ye.rootPages,1);return ke.unshift(le),ke},[ye,ie,ue]),isLoading:ye.isLoading,requestNextPage:Be}}const le={isOpen:!0,level:0,item:{kind:"folder",title:"Dashboards",uid:""}};function me({tree:ie,handleCloseOverlay:ue,handleFolderSelect:be,handleFolderExpand:ge,idPrefix:re,search:ye,visible:Be}){const[ve,Me]=(0,t.useState)(-1),ke=!!n.$.featureToggles.nestedFolders;(0,t.useEffect)(()=>{Be&&Me(-1)},[Be]),(0,t.useEffect)(()=>{Me(0)},[ye]),(0,t.useEffect)(()=>{document.getElementById(p(re,ie[ve]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[ve,re,ie]);const Se=(0,t.useCallback)(We=>{const De=ke&&!ye;switch(We.key){case"ArrowRight":case"ArrowLeft":De&&(We.preventDefault(),ge(ie[ve].item.uid,We.key==="ArrowRight"));break;case"ArrowUp":ve>0&&(We.preventDefault(),Me(ve-1));break;case"ArrowDown":ve<ie.length-1&&(We.preventDefault(),Me(ve+1));break;case"Enter":We.preventDefault();const pe=ie[ve].item;pe.kind==="folder"&&be(pe);break;case"Tab":We.stopPropagation(),ue();break;case"Escape":We.stopPropagation(),We.preventDefault(),ue();break}},[ve,ue,ge,be,ke,ye,ie]);return{focusedItemIndex:ve,handleKeyDown:Se}}const k=l()(ee,300);async function ee(ie,ue){const be=await(0,y.getGrafanaSearcher)().search({query:ie,kind:["folder"],limit:100,permission:ue}),ge=be.view.map(re=>(0,a.hI)(re,be.view));return{...be,items:ge}}function X({value:ie,invalid:ue,showRootFolder:be=!0,clearable:ge=!1,excludeUIDs:re,permission:ye=v.PermissionLevelString.Edit,onChange:Be}){const ve=(0,i.of)(j),Me=(0,h.kH)(ie||h.hT),ke=!!n.$.featureToggles.nestedFolders,[Se,We]=(0,t.useState)(""),[De,pe]=(0,t.useState)(null),[Ne,Le]=(0,t.useState)(!1),[He,je]=(0,t.useState)(!1),[at,Ye]=(0,t.useState)(!1),[$e,xe]=(0,t.useState)({}),Fe=(0,t.useId)(),[Ee]=(0,t.useState)(void 0),se=(0,t.useRef)(0),ae=!!(at&&!(Se&&De)),{items:fe,isLoading:Ce,requestNextPage:Re}=q(ae,$e,ye);(0,t.useEffect)(()=>{if(!Se){pe(null);return}const nn=Date.now();Le(!0),k(Se,ye).then(dn=>{if(nn>se.current){const en=dn.view.map(Xt=>(0,a.hI)(Xt,dn.view));pe({...dn,items:en}),Le(!1),se.current=nn}})},[Se,ye]);const Oe=[(0,s.UU)({crossAxis:!1,boundary:document.body})],{context:ze,refs:Xe,floatingStyles:Ze,elements:et}=(0,o.we)({open:at,placement:"bottom",onOpenChange:nn=>{nn&&(We(""),je(!0)),Ye(nn)},middleware:Oe,whileElementsMounted:s.ll}),nt=(0,o.kp)(ze),lt=(0,o.s9)(ze),{getReferenceProps:rt,getFloatingProps:ut}=(0,o.bv)([lt,nt]),Et=(0,t.useCallback)(async(nn,dn)=>{xe(en=>({...en,[nn]:dn})),dn&&!$e[nn]&&Re(nn)},[Re,$e]),Ct=(0,t.useCallback)(nn=>{Be&&Be(nn.uid,nn.title),Ye(!1)},[Be]),Ut=(0,t.useCallback)(nn=>{nn.preventDefault(),nn.stopPropagation(),Be&&Be(void 0,void 0)},[Be]),Gt=(0,t.useCallback)(()=>Ye(!1),[Ye]),Wt=(0,t.useCallback)(nn=>{Se||Re(nn)},[Se,Re]),ot=(0,t.useMemo)(()=>{let nn=[];return ae?nn=fe:nn=De?.items.map(dn=>({isOpen:!1,level:0,item:{kind:"folder",title:dn.title,uid:dn.uid}}))??[],(!be||re?.length)&&(nn=nn.filter(dn=>!(!be&&dn===le||re?.includes(dn.item.uid)))),nn},[fe,re,ae,De?.items,be]),Tt=(0,t.useCallback)(nn=>{const dn=ot[nn];if(!dn)return!1;const en=dn.item;return!(en.kind==="ui"&&en.uiKind==="pagination-placeholder")},[ot]),Pn=Ce||Ne,{focusedItemIndex:ft,handleKeyDown:Mt}=me({tree:ot,handleCloseOverlay:Gt,handleFolderSelect:Ct,handleFolderExpand:Et,idPrefix:Fe,search:Se,visible:at});let _t=Me.data?.title;return ie===""&&(_t="Dashboards"),at?t.createElement(t.Fragment,null,t.createElement(c.p,{ref:Xe.setReference,autoFocus:!0,prefix:_t?t.createElement(u.I,{name:"folder"}):null,placeholder:_t??(0,E.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:Se,invalid:ue,className:ve.search,onChange:nn=>We(nn.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":Fe,"aria-owns":Fe,"aria-activedescendant":p(Fe,ot[ft]?.item.uid),role:"combobox",suffix:t.createElement(u.I,{name:"search"}),...rt(),onKeyDown:Mt}),t.createElement("fieldset",{ref:Xe.setFloating,id:Fe,className:ve.tableWrapper,style:{...Ze,width:et.domReference?.clientWidth},...ut()},Ee?t.createElement(f.F,{className:ve.error,severity:"warning",title:(0,E.t)("browse-dashboards.folder-picker.error-title","Error loading folders")},Ee.message||Ee.toString?.()||(0,E.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")):t.createElement("div",null,Pn&&t.createElement("div",{className:ve.loader},t.createElement(d.G,{width:600})),t.createElement(x,{items:ot,selectedFolder:ie,focusedItemIndex:ft,onFolderExpand:Et,onFolderSelect:Ct,idPrefix:Fe,foldersAreOpenable:ke&&!(Se&&De),isItemLoaded:Tt,requestLoadMore:Wt})))):t.createElement(K,{label:_t,handleClearSelection:ge&&ie!==void 0?Ut:void 0,invalid:ue,isLoading:Me.isLoading,autoFocus:He,ref:Xe.setReference,"aria-label":_t?(0,E.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:_t}):void 0,...rt()})}const j=ie=>({button:(0,r.css)({maxWidth:"100%"}),error:(0,r.css)({marginBottom:0}),tableWrapper:(0,r.css)({boxShadow:ie.shadows.z3,position:"relative",zIndex:ie.zIndex.portal}),loader:(0,r.css)({position:"absolute",top:0,left:0,right:0,zIndex:ie.zIndex.portal+1,overflow:"hidden"}),search:(0,r.css)({input:{cursor:"default"}})});var ne=e(85242);function te(ie){const ue=n.$.featureToggles.newFolderPicker||n.$.featureToggles.nestedFolders&&n.$.featureToggles.nestedFolderPicker,{initialTitle:be,dashboardId:ge,enableCreateNew:re,...ye}=ie;return ue?t.createElement(X,{...ye}):t.createElement(oe,{...ie})}function oe({value:ie,showRootFolder:ue,onChange:be,initialTitle:ge,dashboardId:re,enableCreateNew:ye,inputId:Be,skipInitialLoad:ve}){const Me=(0,t.useCallback)(ke=>{be&&be(ke.uid,ke.title)},[be]);return t.createElement(ne.sR,{onChange:Me,showRoot:ue,initialFolderUid:ie,initialTitle:ge,inputId:Be,skipInitialLoad:ve,dashboardId:re,enableCreateNew:ye})}},85242:(Y,I,e)=>{"use strict";e.d(I,{sR:()=>b});var t=e(32196),n=e(76459),r=e.n(n),s=e(96540),o=e(16817),m=e(26272),l=e(13544),i=e(14110),c=e(40845),u=e(10354),f=e(88323),d=e(28138),E=e(44836),h=e(16233),y=e(11230),a=e(31678);const v="+ Add new",g="-10";function b(T){const{dashboardId:M,allowEmpty:O,onChange:S,filter:p,enableCreateNew:x,inputId:A,onClear:R,enableReset:B,initialFolderUid:U,initialTitle:F="",permissionLevel:K=a.PermissionLevelString.Edit,rootName:w,showRoot:L=!0,skipInitialLoad:V,searchQueryType:N,customAdd:z,folderWarning:J,invalid:G}=T,H=w??"Dashboards",[q,le]=(0,s.useState)(null),[me,k]=(0,s.useState)(!1),[ee,X]=(0,s.useState)(""),[j,ne]=(0,s.useState)(q?.title??""),te=(0,c.of)(D),oe=typeof R=="function",ie=(0,s.useCallback)(async We=>{const De=await(0,y.c0)(We,K,N),Ne=P(De,p);return(0,i.rR)("grafana_folder_picker_results_loaded",{results:Ne.length,searchTermLength:We.length,enableCreateNew:!!x}),(h.TP.hasPermission(a.AccessControlAction.DashboardsWrite)||h.TP.hasPermission(a.AccessControlAction.DashboardsCreate))&&H?.toLowerCase().startsWith(We.toLowerCase())&&L&&Ne.unshift({label:H,value:""}),B&&We===""&&F!==""&&!Ne.find(He=>He.label===F)&&Ne.unshift({label:F,value:U}),x&&z?[...Ne,{value:g,label:v,title:We}]:Ne},[B,U,F,K,H,L,N,p,x,z]),ue=(0,s.useMemo)(()=>r()(ie,300,{leading:!0}),[ie]),be=async()=>{const We={label:F,value:void 0},De={label:H,value:""},pe=await ie("");let Ne=null;U!=null?Ne=pe.find(Le=>Le.value===U)||null:B&&F?Ne=We:U&&(Ne=pe.find(Le=>Le.id===U)||null),!Ne&&!O&&(h.TP.isEditor?Ne=De:!!M?Ne=We:Ne=pe.length>0?pe[0]:We),!me&&le(Ne)};(0,s.useEffect)(()=>{q&&q.value!==U&&!me&&q.value&&q.label&&S({uid:q.value,title:q.label})},[q,U]),(0,o.A)(async()=>{if(V){const We=await C({getFolder:y.Ql,folderUid:U,folderName:F});le(We)}await be()},[V,U,F]),(0,s.useEffect)(()=>{q&&q.id===g&&k(!0)},[q]);const ge=(0,s.useCallback)((We,De)=>{if(We?.value===g)le({id:g,title:ee}),ne(ee);else{if(We||(We={value:"",label:H}),De.action==="clear"&&R){R();return}le(We),S({uid:We.value,title:We.label})}},[S,R,H,ee]),re=(0,s.useCallback)(async We=>{if(J?.warningCondition(We))return(0,i.rR)("grafana_folder_picker_folder_created",{status:"failed_condition"}),!1;const De=await(0,y.vV)({title:We});let pe={value:"",label:"Not created"};return De.uid?((0,i.rR)("grafana_folder_picker_folder_created",{status:"success"}),d.A.emit(m.r1.alertSuccess,["Folder Created","OK"]),pe={value:De.uid,label:De.title},le(De),ge(pe,{action:"create-option",option:pe})):((0,i.rR)("grafana_folder_picker_folder_created",{status:"failed"}),d.A.emit(m.r1.alertError,["Folder could not be created"])),pe},[J,ge]),ye=(0,s.useCallback)(We=>{const De=!!z?.disallowValues;if(We.key==="Enter"&&De&&!z?.isAllowedValue(j)){We.preventDefault();return}switch(We.key){case"Enter":{re(q?.title),k(!1);break}case"Escape":le({value:"",label:H}),k(!1)}},[z?.disallowValues,z?.isAllowedValue,j,re,q?.title,H]),Be=We=>{const De=We.currentTarget.value;ne(De),le({id:void 0,title:De})},ve=()=>{le({value:"",label:H}),k(!1)},Me=(We,{action:De})=>{De==="input-change"&&X(pe=>We),De==="menu-close"&&X(pe=>We)},ke=()=>J?.warningCondition(j)?s.createElement(J.warningComponent,null):null,Se=()=>J?.warningCondition(ee)?s.createElement(J.warningComponent,null):null;return me?s.createElement(s.Fragment,null,s.createElement(ke,null),s.createElement("div",{className:te.newFolder},"Press enter to create the new folder."),s.createElement(u.p,{width:30,autoFocus:!0,value:j,onChange:Be,onKeyDown:ye,placeholder:"Press enter to confirm new folder.",onBlur:ve})):s.createElement("div",{"data-testid":l.Tp.components.FolderPicker.containerV2},s.createElement(Se,null),s.createElement(f.gZ,{inputId:A,"data-testid":l.Tp.components.FolderPicker.input,loadingMessage:(0,E.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:q,inputValue:ee,onInputChange:Me,value:q,allowCustomValue:x&&!z,loadOptions:ue,onChange:ge,onCreateOption:re,invalid:G,isClearable:oe}))}function P(T,M){return(M?M(T):T).map(S=>({label:S.title,value:S.uid}))}async function C({folderName:T,folderUid:M,getFolder:O}){if(M==null)throw new Error("folderUid is not found.");return T?{label:T,value:M}:{label:(await O(M)).title,value:M}}const D=T=>({newFolder:(0,t.css)({color:T.colors.warning.main,fontSize:T.typography.bodySmall.fontSize,paddingBottom:T.spacing(1)})})},73725:(Y,I,e)=>{"use strict";e.d(I,{r:()=>i});var t=e(96540),n=e(16817),r=e(88323),s=e(14578),o=e(53477),m=e(24439);const l=()=>(0,m.getGrafanaSearcher)().getSortOptions();function i({onChange:c,value:u,placeholder:f,filter:d,getSortOptions:E,isClearable:h}){const y=(0,n.A)(async()=>{const v=await(E??l)();return d?v.filter(g=>d.includes(g.value)):v},[E,d]);if(y.loading)return null;const a=!!(u?.includes("desc")||u?.startsWith("-"));return t.createElement(r.l6,{key:u,width:28,onChange:c,value:y.value?.find(v=>v.value===u)??null,options:y.value,"aria-label":"Sort",placeholder:f??`Sort (Default ${o.r4.label})`,prefix:t.createElement(s.I,{name:a?"sort-amount-down":"sort-amount-up"}),isClearable:h})}},46334:(Y,I,e)=>{"use strict";e.d(I,{E:()=>s});var t=e(96540),n=e(69613),r=e(14578);class s extends t.Component{constructor(m){super(m)}render(){const{label:m,removeIcon:l,count:i,onClick:c}=this.props,{color:u}=(0,n.MC)(m),f={backgroundColor:u},d=i!==0&&t.createElement("span",{className:"tag-count-label"},`(${i})`);return t.createElement("span",{className:"label label-tag",style:f},l&&t.createElement(r.I,{onClick:c,name:"times"}),m," ",d)}}},99818:(Y,I,e)=>{"use strict";e.d(I,{$:()=>E});var t=e(32196),n=e(96540),r=e(71332),s=e(54479),o=e(40845),m=e(88323),l=e(14578),i=e(44836),c=e(46334);const u=({data:y,className:a,label:v,isFocused:g,innerProps:b})=>{const P=(0,o.of)(f);return n.createElement("div",{className:(0,t.cx)(P.option,g&&P.optionFocused),"aria-label":"Tag option",...b},n.createElement("div",{className:`tag-filter-option ${a||""}`},typeof v=="string"?n.createElement(c.E,{label:v,removeIcon:!1,count:y.count??0}):v))},f=y=>({option:(0,t.css)`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${y.colors.background.secondary};
      }
    `,optionFocused:(0,t.css)`
      background: ${y.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),d=(y,a)=>RegExp((0,s.jD)(a),"i").test(y.value),E=({allowCustomValue:y=!1,formatCreateLabel:a,hideValues:v,inputId:g,isClearable:b,onChange:P,placeholder:C,tagOptions:D,tags:T,width:M})=>{const O=(0,o.of)(h),S=T.map(J=>({value:J,label:J,count:0})),[p,x]=(0,n.useState)(S),[A,R]=(0,n.useState)(!1),[B,U]=(0,n.useState)(T),[F,K]=(0,n.useState)(S),w=(0,n.useMemo)(()=>T.join(),[T]),L=(0,n.useCallback)(async()=>(await D()).map(G=>T.includes(G.term)?{value:G.term,label:G.term,count:0}:{value:G.term,label:G.term,count:G.count}),[D,T]),V=(0,n.useCallback)(async()=>{R(!0);const J=await L();y&&F.forEach(G=>J.push(G)),x(J),R(!1)},[y,F,L]);(0,n.useEffect)(()=>{T.length>0&&p.length===0&&V()},[V,p.length,T.length]),(0,n.useEffect)(()=>{T!==B&&(U(T),V())},[V,B,T]);const N=J=>{J.forEach(G=>G.count=0),P((J||[]).map(G=>G.value)),y&&K(J.filter(G=>!T.includes(G)))},z={key:w,onFocus:V,isLoading:A,options:p,allowCreateWhileLoading:!0,allowCustomValue:y,formatCreateLabel:a,defaultOptions:!0,filterOption:d,getOptionLabel:J=>J.label,getOptionValue:J=>J.value,inputId:g,isMulti:!0,onChange:N,loadingMessage:(0,i.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,i.t)("tag-filter.no-tags","No tags found"),placeholder:C||(0,i.t)("tag-filter.placeholder","Filter by tag"),value:S,width:M,components:{Option:u,MultiValueLabel:()=>null,MultiValueRemove(J){const{data:G}=J;return n.createElement(r.c.MultiValueRemove,{...J},n.createElement(c.E,{key:G.label,label:G.label,removeIcon:!0,count:G.count}))},MultiValueContainer:v?()=>null:r.c.MultiValueContainer}};return n.createElement("div",{className:O.tagFilter},b&&T.length>0&&n.createElement("button",{className:O.clear,onClick:()=>N([])},"Clear tags"),n.createElement(m.KF,{...z,prefix:n.createElement(l.I,{name:"tag-alt"}),"aria-label":"Tag filter"}))};E.displayName="TagFilter";const h=y=>({tagFilter:(0,t.css)`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:(0,t.css)`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${y.colors.text.secondary};

    &:hover {
      color: ${y.colors.text.primary};
    }
  `})},25573:(Y,I,e)=>{"use strict";e.d(I,{m:()=>d});var t=e(2543),n=e.n(t),r=e(96540),s=e(26272),o=e(65879),m=e(47232),l=e(15666),i=e(76412),c=e(28138),u=e(61680);const f="grafana.dashboard.timepicker.history",d=g=>r.createElement(u.b,{storageKey:f,defaultValue:[]},(b,P)=>{const C=h(b),D=E(C);return r.createElement(l.$6,{...g,history:D,onChange:T=>{y(T,C,P),g.onChange(T)},onError:T=>c.A.emit(s.r1.alertError,[(0,i.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,i.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:T})])})});function E(g){return g.map(b=>o.convertRawToRange(b,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function h(g){return g.map(b=>{const P=typeof b.from=="string"?b.from:b.from.toISOString(),C=typeof b.to=="string"?b.to:b.to.toISOString();return{from:P,to:C}})}function y(g,b,P){if(!a(g))return;const C={from:typeof g.raw.from=="string"?g.raw.from:g.raw.from.toISOString(),to:typeof g.raw.to=="string"?g.raw.to:g.raw.to.toISOString()},D=v([C,...b]);P(D)}function a(g){return(0,m.Ar)(g.raw.from)||(0,m.Ar)(g.raw.to)}function v(g){return(0,t.uniqBy)(g,b=>b.from+b.to).slice(0,4)}},82389:(Y,I,e)=>{"use strict";e.d(I,{I:()=>f});var t=e(96540),n=e(24293),r=e(11261),s=e(52622),o=e(67266),m=e(55726),l=e(79041),i=e(30249),c=e(28895);const u=["rowHeight","colWidth","showValue","mergeValues","alignValue","tooltip"];class f extends t.Component{constructor(){super(...arguments),this.getValueColor=(E,h,y)=>{const a=this.props.frames[E].fields[h];if(a.display){const v=a.display(y);if(v.color)return v.color}return n.F},this.prepConfig=(E,h,y)=>{this.panelContext=this.context;const{sync:a}=this.panelContext;return(0,c.iE)({frame:E,getTimeRange:y,sync:a,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:E.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor,hoverMulti:this.props.tooltip?.mode===s.$N.Multi})},this.renderLegend=E=>{const{legend:h,legendItems:y}=this.props;return!E||!y||!h||h.showLegend===!1?null:t.createElement(o.KU.Legend,{placement:h.placement},t.createElement(m.t,{placement:h.placement,items:y,displayMode:h.displayMode,readonly:!0}))}}static{this.contextType=l.e4}render(){return t.createElement(i.o,{...this.props,fields:{x:E=>E.type===r.PU.time,y:E=>E.type===r.PU.number||E.type===r.PU.boolean||E.type===r.PU.string||E.type===r.PU.enum},prepConfig:this.prepConfig,propsToDiff:u,renderLegend:this.renderLegend,dataLinkPostProcessor:this.panelContext?.dataLinkPostProcessor})}}},28895:(Y,I,e)=>{"use strict";e.d(I,{pm:()=>R,GY:()=>q,c5:()=>le,jY:()=>G,EI:()=>z,iE:()=>F,Qe:()=>N,Or:()=>J});var t=e(24293),n=e(28240),r=e(83195),s=e(94624),o=e(11261),m=e(50082),l=e(58563),i=e(47737),c=e(73060),u=e(46294),f=e(39624),d=e(73134),E=e(52622),h=e(51336),y=e(52811),a=e(16895),v=e(36613),g=e(23596),b=e(39758),P=e(4134);const{round:C,min:D,ceil:T}=Math,M=2;let O=6;const S=b.ur;function p(me,k,ee,X,j){(0,b.mn)(ee,me,S,k,(ne,te,oe)=>{let ie=X*te,ue=X*oe;j(ne,ie,ue)})}function x(me){const{mode:k,numSeries:ee,isDiscrete:X,hasMappedNull:j,rowHeight:ne=0,colWidth:te=0,showValue:oe,mergeValues:ie=!1,theme:ue,label:be,formatValue:ge,alignValue:re="left",getTimeRange:ye,getValueColor:Be,getFieldConfig:ve,onHover:Me,onLeave:ke,hoverMulti:Se}=me;let We,De;const pe=et=>{De=Array(ee).fill(null).map(nt=>Array(et).fill(null))},Ne=`500 ${Math.round(12*devicePixelRatio)}px ${ue.typography.fontFamily}`,Le=Array(ee).fill(null);let He=null;const je=[te,1/0],at=1-je[0],Ye=(je[1]??1/0)*v.A.pxRatio,$e=new Map,xe=new Map;function Fe(et){$e.forEach((nt,lt)=>{et.fillStyle=lt,et.fill(nt)}),xe.forEach((nt,lt)=>{et.strokeStyle=lt,et.stroke(nt)}),$e.clear(),xe.clear()}function Ee(et,nt,lt,rt,ut,Et,Ct,Ut,Gt,Wt,ot,Tt,Pn){Ct=Math.max(1,Ct);const ft=Be(Wt+1,Tt),Mt=ve(Wt),_t=A(Mt,ft);if(De[Wt][ot]={x:C(ut-lt),y:C(Et-rt),w:Ct,h:Ut,sidx:Wt+1,didx:ot,fillColor:_t},Pn){let nn=_t,dn=$e.get(nn);if(dn==null&&$e.set(nn,dn=new Path2D),nt(dn,ut,Et,Ct,Ut),Gt){let en=ft,Xt=xe.get(en);Xt==null&&xe.set(en,Xt=new Path2D),nt(Xt,ut+Gt/2,Et+Gt/2,Ct-Gt,Ut-Gt)}}else et.beginPath(),nt(et,ut,Et,Ct,Ut),et.fillStyle=_t,et.fill(),Gt&&(et.beginPath(),nt(et,ut+Gt/2,Et+Gt/2,Ct-Gt,Ut-Gt),et.strokeStyle=ft,et.lineWidth=Gt,et.stroke())}const se=(et,nt,lt,rt)=>(v.A.orient(et,nt,(ut,Et,Ct,Ut,Gt,Wt,ot,Tt,Pn,ft,Mt,_t,nn,dn)=>{let en=C((ut.width||0)*v.A.pxRatio),Xt=X(nt),En=Xt&&j(nt);et.ctx.save(),dn(et.ctx,et.bbox.left,et.bbox.top,et.bbox.width,et.bbox.height),et.ctx.clip(),p(ne,nt-1,ee,Mt,(Vn,Wn,na)=>{if(k===R.Changes)for(let Bt=0;Bt<Ct.length;Bt++){let ln=Ct[Bt];if(ln!=null||En){let mn=Math.round(Wt(Et[Bt],Ut,ft,Tt)),Dn=Bt;for(;++Dn<Ct.length&&(Ct[Dn]===void 0||ie&&Ct[Dn]===ln););let hn=Dn===Ct.length?Tt+ft+en:Math.round(Wt(Et[Dn],Ut,ft,Tt));Ee(et.ctx,dn,Tt,Pn,mn,C(Pn+Wn),hn-mn,C(na),en,Vn,Bt,ln,Xt),Bt=Dn-1}}else if(k===R.Samples){let Bt=Wt(Et[1],Ut,ft,Tt)-Wt(Et[0],Ut,ft,Tt),ln=Bt*at,mn=C(D(Ye,Bt-ln)-en),Dn=mn/2;for(let hn=lt;hn<=rt;hn++){let Fn=Ct[hn];if(Fn!=null||En){let wn=Wt(Et[hn],Ut,ft,Tt);Ee(et.ctx,dn,Tt,Pn,C(wn-Dn),C(Pn+Wn),mn,C(na),en,Vn,hn,Fn,Xt)}}}}),Xt&&(et.ctx.lineWidth=en,Fe(et.ctx)),et.ctx.restore()}),null),ae=ge==null||oe===E.yL.Never?!1:(et,nt,lt,rt)=>(et.ctx.save(),et.ctx.rect(et.bbox.left,et.bbox.top,et.bbox.width,et.bbox.height),et.ctx.clip(),et.ctx.font=Ne,et.ctx.textAlign=k===R.Changes?re:"center",et.ctx.textBaseline="middle",v.A.orient(et,nt,(ut,Et,Ct,Ut,Gt,Wt,ot,Tt,Pn,ft,Mt)=>{let _t=C((ut.width||0)*v.A.pxRatio),dn=X(nt)&&j(nt),en=C(Pn+ze[nt-1]);for(let Xt=0;Xt<Ct.length;Xt++)if(Ct[Xt]!=null||dn){const En=De[nt-1][Xt];if(!En||En.x>=ft)continue;let Vn=Math.floor(En?.w/O);if(oe===E.yL.Auto&&Vn<2)continue;let Wn=ge(nt,Ct[Xt]),na=C(En.x+Tt+En.w/2);k===R.Changes&&(re==="left"?na=C(En.x+Tt+_t+M):re==="right"&&(na=C(En.x+Tt+En.w-_t-M))),et.ctx.fillStyle=ue.colors.getContrastText(En.fillColor,3),et.ctx.fillText(Wn.slice(0,Vn),na,en)}}),et.ctx.restore(),!1),fe=et=>{let nt="";for(let lt=32;lt<=126;lt++)nt+=String.fromCharCode(lt);O=Math.ceil(et.ctx.measureText(nt).width/nt.length*v.A.pxRatio),O+=2.5,et.root.querySelectorAll(".u-cursor-pt").forEach(lt=>{lt.style.borderRadius="0"})},Ce=et=>{We=We||new P.C$(0,0,et.bbox.width,et.bbox.height),We.clear(),pe(et.data[0].length),et.series.forEach(nt=>{nt._paths=null})};function Re(et,nt,lt=!1){Le.fill(null),He=null,!(et<0)&&We.get(et,0,v.A.pxRatio,1e4,rt=>{et>=rt.x&&et<=rt.x+rt.w&&(nt>=rt.y&&nt<=rt.y+rt.h?Le[rt.sidx]=He=rt:(Se||lt)&&(Le[rt.sidx]=rt))})}const Oe={x:k===R.Changes,y:!1,dataIdx:(et,nt)=>{if(nt===1){if(We.o.length===0&&We.q==null)for(const Et of De)for(const Ct of Et)Ct&&We.add(Ct);let lt=et.cursor.left*v.A.pxRatio,rt=et.cursor.top*v.A.pxRatio,ut=He;Re(lt,rt,et.cursor.event==null),He!=null?He!==ut&&Me(He.sidx,He.didx,He):ut!=null&&ke()}return Le[nt]?.didx},focus:{prox:1e3,dist:(et,nt)=>He?.sidx===nt?0:1/0},points:{fill:"rgba(255,255,255,0.2)",bbox:(et,nt)=>{let lt=Le[nt],rt=lt!=null;return{left:rt?lt.x/v.A.pxRatio:-10,top:rt?lt.y/v.A.pxRatio:-10,width:rt?lt.w/v.A.pxRatio:0,height:rt?lt.h/v.A.pxRatio:0}}}},ze=Array(ee).fill(0),Xe=Array(ee).fill(0),Ze=[0,1];return{cursor:Oe,xSplits:k===R.Samples?(et,nt,lt,rt,ut,Et)=>{let Ct=[],Ut=et.data[0][1]-et.data[0][0],Gt=T(ut/Ut);for(let Wt=0;Wt<et.data[0].length;Wt+=Gt){let ot=et.data[0][Wt];ot>=lt&&ot<=rt&&Ct.push(ot)}return Ct}:null,xRange:et=>{const nt=ye();let lt=nt.from.valueOf(),rt=nt.to.valueOf();if(k===R.Samples){let Ct=(et.data[0][1]-et.data[0][0])/2;lt<=et.data[0][0]&&(lt=et.data[0][0]-Ct);let Ut=et.data[0].length-1;rt>=et.data[0][Ut]&&(rt=et.data[0][Ut]+Ct)}return[lt,rt]},ySplits:et=>(p(ne,null,ee,et.bbox.height,(nt,lt,rt)=>{ze[nt]=C(lt+rt/2),Xe[nt]=et.posToVal(ze[nt]/v.A.pxRatio,y.s)}),Xe),yValues:(et,nt)=>nt.map((lt,rt)=>be(rt+1)),yRange:Ze,drawPaths:se,drawPoints:ae,init:fe,drawClear:Ce}}function A(me,k){if(k[0]==="#"&&k.length===9)return k;const ee=(me.fillOpacity??100)/100;return(0,g.alpha)(k,ee)}var R=(me=>(me.Changes="changes",me.Samples="samples",me))(R||{});const B={lineWidth:0,fillOpacity:80};function U(me){return me.ctrlKey||me.metaKey||me.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const F=({frame:me,theme:k,timeZones:ee,getTimeRange:X,mode:j,sync:ne,rowHeight:te,colWidth:oe,showValue:ie,alignValue:ue,mergeValues:be,getValueColor:ge,eventsScope:re="__global_",hoverMulti:ye})=>{const Be=new h.e(ee[0]),ve="x",Me=at=>{const Ye=at.config?.color?.mode;return!(Ye&&at.display&&Ye.startsWith("continuous-"))},ke=at=>at.config.mappings?.some(Ye=>Ye.type===d.dM.SpecialValue&&Ye.options.match==="null")||!1,Se=(at,Ye)=>{const $e=me.fields[at];return $e.state?.origin?.fieldIndex!==void 0&&$e.state?.origin?.frameIndex!==void 0&&ge?ge($e.state?.origin?.frameIndex,$e.state?.origin?.fieldIndex,Ye):t.F},We={mode:j,numSeries:me.fields.length-1,isDiscrete:at=>Me(me.fields[at]),hasMappedNull:at=>ke(me.fields[at]),mergeValues:be,rowHeight:te,colWidth:oe,showValue:ie,alignValue:ue,theme:k,label:at=>(0,n.Ct)(me.fields[at],me),getFieldConfig:at=>me.fields[at].config.custom,getValueColor:Se,getTimeRange:X,formatValue:(at,Ye)=>(0,r.cN)(me.fields[at].display(Ye)),onHover:(at,Ye)=>{pe=at,Ne=Ye,De=!0},onLeave:()=>{pe=null,Ne=null,De=!0},hoverMulti:ye};let De=!1,pe=null,Ne=null;const Le=x(We);Be.addHook("init",Le.init),Be.addHook("drawClear",Le.drawClear);const He=(at,Ye,$e)=>{De&&(pe!=null&&(at(pe),Ye(Ne)),De=!1),$e(pe==null)};Be.setTooltipInterpolator(He),Be.setPrepData(at=>(0,a.bq)(at[0],(0,a.ro)(at[0]))),Be.setCursor(Le.cursor),Be.addScale({scaleKey:ve,isTime:!0,orientation:E.Lt.Horizontal,direction:E.ON.Right,range:Le.xRange}),Be.addScale({scaleKey:y.s,isTime:!1,orientation:E.Lt.Vertical,direction:E.ON.Up,range:Le.yRange}),Be.addAxis({scaleKey:ve,isTime:!0,splits:Le.xSplits,placement:E.vM.Bottom,timeZone:ee[0],theme:k,grid:{show:!0}}),Be.addAxis({scaleKey:y.s,isTime:!1,placement:E.vM.Left,splits:Le.ySplits,values:Le.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:k});let je=0;for(let at=0;at<me.fields.length;at++){if(at===0)continue;const Ye=me.fields[at],$e=Ye.config,xe={...B,...$e.custom};Ye.state.seriesIndex=je++,Be.addSeries({scaleKey:y.s,pathBuilder:Le.drawPaths,pointsBuilder:Le.drawPoints,lineWidth:xe.lineWidth,fillOpacity:xe.fillOpacity,theme:k,show:!xe.hideFrom?.viz,thresholds:$e.thresholds,dataFrameFieldIndex:Ye.state?.origin})}if(ne&&ne()!==s.y.Off){let at={};at.sync={key:re,scales:[ve,null]},Be.setSync(),Be.setCursor(at)}return Be};function K(me){const k=new Map;for(let ee=0;ee<me.fields.length;ee++)k.set(getFieldDisplayName(me.fields[ee],me),ee);return k}function w(me){let k=me[0],ee;for(let X=1;X<me.length;X++){let j=me[X];j===null?k=null:j===k?(ee||(ee=[...me]),ee[X]=void 0):j!=null&&(k=j)}return ee}function L(me){let k=me.config.custom?.spanNulls;return k?k===!0?1/0:k:-1}function V(me,k){const ee=me.config.thresholds;if(me.type!==o.PU.number||!ee||!ee.steps.length)return;const X=z(me.config,k);if(X.length!==ee.steps.length)return;const j=new Map,ne=new Map;for(let ie=0;ie<X.length;ie++)j.set(ee.steps[ie],X[ie].label),ne.set(X[ie].label,X[ie].color);let te=me.values;const oe=new Array(me.values.length);if(ee.mode===m.O.Percentage){const{min:ie,max:ue}=(0,l.xg)(me),be=ue-ie;te=te.map(ge=>ge==null?ge:(ge-ie)/be*100)}for(let ie=0;ie<oe.length;ie++){const ue=te[ie];ue==null?oe[ie]=ue:oe[ie]=j.get((0,i.yQ)(ue,ee.steps))}return{...me,config:{...me.config,custom:{...me.config.custom,spanNulls:L(me)}},type:o.PU.string,values:oe,display:ie=>({text:String(ie),color:ne.get(String(ie)),numeric:NaN})}}function N(me,k,ee,X){if(!me?.length)return{warn:"No data in response"};(0,n.Fm)(me);let j=!1;const ne=[];for(let te of me){let oe=-1,ie=-1;for(let ye=0;ye<te.fields.length;ye++)if(te.fields[ye].type===o.PU.time){if(oe===-1)oe=ye;else if(ie===-1){ie=ye;break}}let ue=oe!==-1,be=!1;if(te=(0,c.Yj)(te,oe),ie!==-1){let ye={...te,fields:te.fields.filter((ve,Me)=>Me!==ie)},Be={length:te.length,fields:[te.fields[ie]]};te=(0,c.Fd)({frames:[ye,Be],keepDisplayNames:!0,nullMode:()=>c.WO}),te.fields.forEach((ve,Me)=>{if(Me>0){let ke=ve.values;for(let Se=0;Se<ke.length;Se++)ke[Se]==null&&(ke[Se]=null)}}),be=!0}let ge=(0,u.M)({frame:te,refFieldPseudoMin:ee.from.valueOf(),refFieldPseudoMax:ee.to.valueOf()});ge!==te&&(be=!0),te=(0,f.C)(ge);const re=[];for(let ye of te.fields)if(!ye.config.custom?.hideFrom?.viz)switch(ye.type){case o.PU.time:ue=!0,j=!0,re.push(ye);break;case o.PU.enum:case o.PU.number:if(k&&ye.config.color?.mode===t.Y.Thresholds){const Be=V(ye,X);if(Be){re.push(Be),be=!0;continue}}case o.PU.boolean:case o.PU.string:ye={...ye,config:{...ye.config,custom:{...ye.config.custom,spanNulls:L(ye)}}},be=!0,re.push(ye);break;default:be=!0}ue&&re.length>1&&(j=!0,be?ne.push({...te,fields:re}):ne.push(te))}return j?ne.length?{frames:ne}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function z(me,k){const ee=[],X=me.thresholds;if(!X||!X.steps.length)return ee;const j=X.steps,ne=(0,r.j_)(X.mode===m.O.Percentage?"percent":me.unit??""),te=oe=>(0,r.cN)(ne(oe,me.decimals??void 0));for(let oe=0;oe<j.length;oe++){let ie=j[oe],ue=ie.value,be="",ge="";ue===-1/0&&oe<j.length-1?(ue=j[oe+1].value,be="< "):ge="+",ee.push({label:`${be}${te(ue)}${ge}`,color:k.visualization.getColorByName(ie.color),yAxis:1})}return ee}function J(me,k,ee){if(!(!me||k.showLegend===!1))return G(H(me),ee)}function G(me,k){if(!me.length)return;const ee=[],X=me[0].config,j=X.color?.mode??t.Y.Fixed,ne=X.thresholds;if(j===t.Y.Thresholds&&ne?.steps&&ne.steps.length>1)return z(X,k);if(j.startsWith("continuous"))return;const te=new Map;return me.forEach(oe=>{oe.config.custom?.hideFrom?.legend||oe.values.forEach(ie=>{let ue=oe.display(ie);ue.color&&te.set(ue.text,ue.color)})}),te.forEach((oe,ie)=>{ie.length>0&&ee.push({label:ie,color:k.visualization.getColorByName(oe??t.F),yAxis:1})}),ee}function H(me){const k=[];for(const ee of me)for(const X of ee.fields)X.type!==o.PU.time&&k.push(X);return k}function q(me,k){let ee,X=k+1;if(X>=me.values.length)return null;const j=me.values[k];for(;ee===void 0;){if(X>=me.values.length)return null;const ne=me.values[X];ne===void 0||ne===j?X++:ee=X}return ee}function le(me){if(me<0||Number.isNaN(me))return"";let k,ee,X,j,ne,te,oe,ie;return oe=Math.floor(me/1e3),te=Math.floor(oe/60),oe=oe%60,ne=Math.floor(te/60),te=te%60,j=Math.floor(ne/24),ne=ne%24,k=Math.floor(j/365),k>0&&(j=j%365),ee=Math.floor(j/30),ee>0&&(j=j%30),X=Math.floor(j/7),X>0&&(j=j%7),ie=Math.round(me%1e3*1e3)/1e3,(k>0?k+"y "+(ee>0?ee+"mo ":"")+(X>0?X+"w ":"")+(j>0?j+"d ":""):ee>0?ee+"mo "+(X>0?X+"w ":"")+(j>0?j+"d ":""):X>0?X+"w "+(j>0?j+"d ":""):j>0?j+"d "+(ne>0?ne+"h ":""):ne>0?ne+"h "+(te>0?te+"m ":""):te>0?te+"m "+(oe>0?oe+"s ":""):oe>0?oe+"s "+(ie>0?ie+"ms ":""):ie>0?ie+"ms ":"0").trim()}},76323:(Y,I,e)=>{"use strict";e.d(I,{J:()=>o});var t=e(32196),n=e(96540),r=e(14110),s=e(40845);const o=({text:l="PRO",className:i,experimentId:c,eventVariant:u="",...f})=>{const d=(0,s.of)(m);return(0,n.useEffect)(()=>{c&&(0,r.Xp)(c,"test",u)},[c,u]),n.createElement("span",{className:(0,t.cx)(d.badge,i),...f},l)},m=l=>({badge:(0,t.css)`
      margin-left: ${l.spacing(1.25)};
      border-radius: ${l.shape.borderRadius(5)};
      background-color: ${l.colors.success.main};
      padding: ${l.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${l.typography.fontWeightMedium};
      font-size: ${l.typography.pxToRem(10)};
    `})},35043:(Y,I,e)=>{"use strict";e.d(I,{DP:()=>u,NQ:()=>c,zJ:()=>f});var t=e(32196),n=e(96540),r=e(90613),s=e(40845),o=e(14578),m=e(94753),l=e(2913),i=e(44836);const c=[{message:"At least 12 characters",validation:h=>h.length>=12},{message:"One uppercase letter",validation:h=>/[A-Z]+/.test(h)},{message:"One lowercase letter",validation:h=>/[a-z]+/.test(h)},{message:"One number",validation:h=>/[0-9]+/.test(h)},{message:"One symbol",validation:h=>/[\W]/.test(h)}],u=h=>!l.Ay.auth.basicAuthStrongPasswordPolicy||c.every(y=>y.validation(h))||(0,i.t)("profile.change-password.strong-password-validation-register","Password does not comply with the strong password policy"),f=({strongPasswordValidations:h,password:y,pristine:a})=>n.createElement(r.a,{marginBottom:2},h.map(v=>n.createElement(d,{key:v.message,strongPasswordValidation:v,password:y,pristine:a}))),d=({strongPasswordValidation:h,password:y,pristine:a})=>{const v=(0,s.of)(E),{basicAuthStrongPasswordPolicy:g}=l.Ay.auth;if(!g)return null;const{message:b,validation:P}=h,C=y.length>0&&P(y),D=C||a?"check":"exclamation-triangle",T=C?"secondary":a?"primary":"error";let M;return C?M=v.icon.valid:a?M=v.icon.pending:M=v.icon.error,n.createElement(r.a,{key:b,display:"flex",alignItems:"center",marginTop:1},n.createElement(o.I,{className:(0,t.cx)(v.icon.style,M),name:D}),n.createElement(m.E,{color:T},b))},E=h=>({icon:{style:(0,t.css)({marginRight:h.spacing(1)}),valid:(0,t.css)({color:h.colors.success.text}),pending:(0,t.css)({color:h.colors.secondary.text}),error:(0,t.css)({color:h.colors.error.text})}})},93522:(Y,I,e)=>{"use strict";e.d(I,{N:()=>u});var t=e(32196),n=e(96540),r=e(40845),s=e(37390),o=e(71259),m=e(94753),l=e(44836),i=e(63917);const c=h=>[{category:(0,l.t)("help-modal.shortcuts-category.global","Global"),shortcuts:[{keys:["g","h"],description:(0,l.t)("help-modal.shortcuts-description.go-to-home-dashboard","Go to Home Dashboard")},{keys:["g","d"],description:(0,l.t)("help-modal.shortcuts-description.go-to-dashboards","Go to Dashboards")},{keys:["g","e"],description:(0,l.t)("help-modal.shortcuts-description.go-to-explore","Go to Explore")},{keys:["g","p"],description:(0,l.t)("help-modal.shortcuts-description.go-to-profile","Go to Profile")},{keys:[`${h} + k`],description:(0,l.t)("help-modal.shortcuts-description.open-search","Open search")},{keys:["esc"],description:(0,l.t)("help-modal.shortcuts-description.exit-edit/setting-views","Exit edit/setting views")},{keys:[`${h} + h`],description:(0,l.t)("help-modal.shortcuts-description.show-all-shortcuts","Show all keyboard shortcuts")},{keys:["c","t"],description:(0,l.t)("help-modal.shortcuts-description.change-theme","Change theme")}]},{category:(0,l.t)("help-modal.shortcuts-category.time-range","Time range"),shortcuts:[{keys:["t","z"],description:(0,l.t)("help-modal.shortcuts-description.zoom-out-time-range","Zoom out time range")},{keys:["t","\u2190"],description:(0,l.t)("help-modal.shortcuts-description.move-time-range-back","Move time range back")},{keys:["t","\u2192"],description:(0,l.t)("help-modal.shortcuts-description.move-time-range-forward","Move time range forward")},{keys:["t","a"],description:(0,l.t)("help-modal.shortcuts-description.make-time-range-permanent","Make time range absolute/permanent")},{keys:["t","c"],description:(0,l.t)("help-modal.shortcuts-description.copy-time-range","Copy time range")},{keys:["t","v"],description:(0,l.t)("help-modal.shortcuts-description.paste-time-range","Paste time range")}]},{category:(0,l.t)("help-modal.shortcuts-category.dashboard","Dashboard"),shortcuts:[{keys:[`${h} + s`],description:(0,l.t)("help-modal.shortcuts-description.save-dashboard","Save dashboard")},{keys:["d","r"],description:(0,l.t)("help-modal.shortcuts-description.refresh-all-panels","Refresh all panels")},{keys:["d","s"],description:(0,l.t)("help-modal.shortcuts-description.dashboard-settings","Dashboard settings")},{keys:["d","v"],description:(0,l.t)("help-modal.shortcuts-description.toggle-active-mode","Toggle in-active / view mode")},{keys:["d","k"],description:(0,l.t)("help-modal.shortcuts-description.toggle-kiosk","Toggle kiosk mode (hides top nav)")},{keys:["d","\u21E7 + e"],description:(0,l.t)("help-modal.shortcuts-description.expand-all-rows","Expand all rows")},{keys:["d","\u21E7 + c"],description:(0,l.t)("help-modal.shortcuts-description.collapse-all-rows","Collapse all rows")},{keys:["d","a"],description:(0,l.t)("help-modal.shortcuts-description.toggle-auto-fit","Toggle auto fit panels (experimental feature)")},{keys:[`${h} + o`],description:(0,l.t)("help-modal.shortcuts-description.toggle-graph-crosshair","Toggle shared graph crosshair")},{keys:["d","l"],description:(0,l.t)("help-modal.shortcuts-description.toggle-all-panel-legends","Toggle all panel legends")},{keys:["d","x"],description:(0,l.t)("help-modal.shortcuts-description.toggle-exemplars","Toggle exemplars in all panel")}]},{category:(0,l.t)("help-modal.shortcuts-category.focused-panel","Focused panel"),shortcuts:[{keys:["e"],description:(0,l.t)("help-modal.shortcuts-description.toggle-panel-edit","Toggle panel edit view")},{keys:["v"],description:(0,l.t)("help-modal.shortcuts-description.toggle-panel-fullscreen","Toggle panel fullscreen view")},{keys:["p","s"],description:(0,l.t)("help-modal.shortcuts-description.open-shared-modal","Open Panel Share Modal")},{keys:["p","d"],description:(0,l.t)("help-modal.shortcuts-description.duplicate-panel","Duplicate Panel")},{keys:["p","r"],description:(0,l.t)("help-modal.shortcuts-description.remove-panel","Remove Panel")},{keys:["p","l"],description:(0,l.t)("help-modal.shortcuts-description.toggle-panel-legend","Toggle panel legend")}]}],u=({onDismiss:h})=>{const y=(0,r.of)(E),a=(0,n.useMemo)(()=>(0,i.gn)(),[]),v=(0,n.useMemo)(()=>c(a),[a]);return n.createElement(s.a,{title:(0,l.t)("help-modal.title","Shortcuts"),isOpen:!0,onDismiss:h,onClickBackdrop:h},n.createElement(o.x,{columns:{xs:1,sm:2},gap:3,tabIndex:0},Object.values(v).map(({category:g,shortcuts:b})=>n.createElement("section",{key:g},n.createElement("table",{className:y.table},n.createElement("caption",null,n.createElement(m.E,{element:"p",variant:"h5"},g)),n.createElement("thead",{className:"sr-only"},n.createElement("tr",null,n.createElement("th",null,"Keys"),n.createElement("th",null,"Description"))),n.createElement("tbody",null,b.map(({keys:P,description:C})=>n.createElement("tr",{key:P.join()},n.createElement("td",{className:y.keys},P.map(D=>n.createElement(f,{key:D},D))),n.createElement("td",null,n.createElement(m.E,{variant:"bodySmall",element:"p"},C))))))))))},f=({children:h})=>{const y=(0,r.of)(E),a=(0,n.useMemo)(()=>d(h),[h]),v=n.createElement("span",{dangerouslySetInnerHTML:{__html:a}});return n.createElement("kbd",{className:y.shortcutTableKey},n.createElement(m.E,{variant:"code"},v))};function d(h){let y,a;if(h.includes("ctrl"))y="ctrl",a="Control";else if(h.includes("esc"))y="esc",a="Escape";else return h;return h.replace(y,`<span class="sr-only">${a}</span><span aria-hidden="true" role="none">${y}</span>`)}function E(h){return{table:(0,t.css)({borderCollapse:"separate",borderSpacing:h.spacing(2),"& caption":{captionSide:"top"}}),keys:(0,t.css)({textAlign:"end",whiteSpace:"nowrap",minWidth:83}),shortcutTableKey:(0,t.css)({display:"inline-block",textAlign:"center",marginRight:h.spacing(.5),padding:"3px 5px",lineHeight:"10px",verticalAlign:"middle",border:`solid 1px ${h.colors.border.medium}`,borderRadius:h.shape.radius.default,color:h.colors.text.primary,backgroundColor:h.colors.background.secondary})}}},2913:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>s,_R:()=>m,config:()=>n.$,yn:()=>l,zj:()=>o});var t=e(43429),n=e(32264);let r=n.$;const s=r,o=()=>r,m=i=>{r={...r,...i}},l=n.$.panels?.debug?.state===t.pn.alpha},15054:(Y,I,e)=>{"use strict";e.d(I,{FG:()=>d,HG:()=>o,IZ:()=>u,MM:()=>h,Pz:()=>s,bJ:()=>l,cV:()=>r,cx:()=>i,dU:()=>n,o9:()=>m,sD:()=>t,tH:()=>c,wV:()=>E});const t=30,n=8,r=24,s="v",o="h",m=4,l=250,i=t*3,c="panel-copy",u=2,f=23763571993,d=40,E="VisualizationSelectPane.ListMode",h="WidgetSelectPane.ListMode"},76888:(Y,I,e)=>{"use strict";e.d(I,{Il:()=>s,YE:()=>r,ni:()=>o});var t=e(96540),n=e(12131);const r=t.createContext(void 0);function s(){const m=(0,t.useContext)(r);if(!m)throw new Error("No GrafanaContext found");return m}function o(){const{chrome:m}=s();return(0,t.useCallback)((l,i)=>{const{pathname:c,search:u}=n.Ny.getLocation();m.setReturnToPrevious({title:l,href:i??c+u})},[m])}},3169:(Y,I,e)=>{"use strict";e.d(I,{_2:()=>d,gi:()=>u,q8:()=>f,tZ:()=>c});var t=e(96540),n=e(62938),r=e(94954),s=e(31678),o=e(82467);const m={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},l={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},i={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},c=(E,h="",y)=>({...m,title:E,text:h,id:(0,n.A)(),timestamp:Date.now(),showing:!0}),u=(E,h="",y,a)=>({...i,text:(0,r.q)(h),title:E,id:(0,n.A)(),traceId:y,component:a,timestamp:Date.now(),showing:!0}),f=(E,h="",y)=>({...l,title:E,text:h,traceId:y,id:(0,n.A)(),timestamp:Date.now(),showing:!0});function d(){const E=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(h,y="")=>{E((0,o.dx)(c(h,y)))},warning:(h,y="",a)=>{E((0,o.dx)(f(h,y,a)))},error:(h,y="",a)=>{E((0,o.dx)(u(h,y,a)))}}),[E])}},10096:(Y,I,e)=>{"use strict";e.d(I,{Ef:()=>n.E,TP:()=>r.TP,lE:()=>t.A,rO:()=>s.r});var t=e(28138),n=e(18898),r=e(16233),s=e(31140)},53919:(Y,I,e)=>{"use strict";e.d(I,{$H:()=>a,Ay:()=>v});var t=e(2543),n=e(33390),r=e(38877),s=e(19347);const o=S=>{const p=(0,s.l)().getInstanceSettings(S.datasourceName);return{id:S.ts.toString(),createdAt:S.ts,datasourceName:S.datasourceName,datasourceUid:p?.uid||"",starred:S.starred,comment:S.comment,queries:S.queries}},m=S=>{if(!(0,s.l)().getInstanceSettings({uid:S.datasourceUid}))throw new Error("Datasource not found.");return{ts:S.createdAt,datasourceName:S.datasourceName,starred:S.starred,comment:S.comment,queries:S.queries}};var l=e(91650);function i(S,p,x,A,R){const B=f(S,x),U=d(B,A),F=R?u(U,R):U;return E(F,p)}const c=(S,p)=>{const x=new Date,A=new Date(x.setDate(x.getDate()-S));return p?A.setHours(24,0,0,0):A.setHours(0,0,0,0)};function u(S,p){const x=c(p[0],!0),A=c(p[1],!1);return S.filter(R=>R.createdAt<x&&R.createdAt>A)}function f(S,p){return p.length>0?S.filter(x=>p.includes(x.datasourceName)):S}function d(S,p){return S.filter(x=>x.comment.includes(p)?!0:x.queries.filter(R=>Object.values((0,t.omit)(R,["datasource","key","refId","hide","queryType"])).some(B=>B?.toString().includes(p))).length>0)}const E=(S,p)=>{let x;return p===l.x.Ascending&&(x=(A,R)=>A.createdAt<R.createdAt?-1:A.createdAt>R.createdAt?1:0),p===l.x.Descending&&(x=(A,R)=>A.createdAt<R.createdAt?1:A.createdAt>R.createdAt?-1:0),p===l.x.DatasourceZA&&(x=(A,R)=>A.datasourceName<R.datasourceName?-1:A.datasourceName>R.datasourceName?1:0),p===l.x.DatasourceAZ&&(x=(A,R)=>A.datasourceName<R.datasourceName?1:A.datasourceName>R.datasourceName?-1:0),S.sort(x)},h={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},y="grafana.explore.richHistory",a=1e4;class v{async getRichHistory(p){const x=C().map(o),A=p.starred?x.filter(U=>U.starred===!0):x,R=p.from&&p.to?[p.from,p.to]:void 0,B=i(A,p.sortOrder,p.datasourceFilters,p.search,R);return{richHistory:B,total:B.length}}async addToRichHistory(p){const x=Date.now(),A={id:x.toString(),createdAt:x,...p},R=m(A),B=b(C()),U=R.queries.map(V=>(0,t.omit)(V,["key","refId"])),F=B.length>0&&B[0].queries.map(V=>(0,t.omit)(V,["key","refId"]));if((0,t.isEqual)(U,F)){const V=new Error("Entry already exists");throw V.name=r.m.DuplicatedEntry,V}const{queriesToKeep:K,limitExceeded:w}=P(B),L=[R,...K];try{n.A.setObject(y,L)}catch(V){if(V instanceof Error&&V.name==="QuotaExceededError")O(r.m.StorageFull,`Saving rich history failed: ${V.message}`);else throw V}return w?{warning:{type:r.C.LimitExceeded,message:`Query history reached the limit of ${a}. Old, not-starred items have been removed.`},richHistoryQuery:A}:{richHistoryQuery:A}}async deleteAll(){n.A.delete(y)}async deleteRichHistory(p){const x=parseInt(p,10),R=n.A.getObject(y,[]).filter(B=>B.ts!==x);n.A.setObject(y,R)}async updateStarred(p,x){return g(p,A=>A.starred=x)}async updateComment(p,x){return g(p,A=>A.comment=x)}async getSettings(){return{activeDatasourceOnly:n.A.getObject(h.activeDatasourceOnly,!1),retentionPeriod:n.A.getObject(h.retentionPeriod,7),starredTabAsFirstTab:n.A.getBool(h.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.A.getObject(h.datasourceFilters,[]).map(p=>p.value)}}async updateSettings(p){n.A.set(h.activeDatasourceOnly,p.activeDatasourceOnly),n.A.set(h.retentionPeriod,p.retentionPeriod),n.A.set(h.starredTabAsFirstTab,p.starredTabAsFirstTab),n.A.setObject(h.datasourceFilters,(p.lastUsedDatasourceFilters||[]).map(x=>({value:x})))}}function g(S,p){const x=parseInt(S,10),A=n.A.getObject(y,[]),R=(0,t.find)(A,{ts:x});if(!R)throw new Error("Rich history item not found.");return p(R),n.A.setObject(y,A),o(R)}function b(S){const p=n.A.getObject(h.retentionPeriod,7),x=c(p,!1);return S.filter(A=>A.ts>x||A.starred===!0)||[]}function P(S){let p=!1,x=S.length-1;for(;x>=0&&S.length>=a;)S[x].starred||(S.splice(x,1),p=!0),x--;return{queriesToKeep:S,limitExceeded:p}}function C(){const S=n.A.getObject(y,[]);return D(S)}function D(S){return S.map(x=>{const A=x.queries.map((R,B)=>T(x,R,B));return{...x,queries:A}})}function T(S,p,x){const A="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof p=="object"?p:M(p)?JSON.parse(p):{expr:p,refId:A[x]}}function M(S){try{JSON.parse(S)}catch{return!1}return!0}function O(S,p){const x=new Error(p);throw x.name=S,x}},38877:(Y,I,e)=>{"use strict";e.d(I,{C:()=>n,m:()=>t});var t=(r=>(r.StorageFull="StorageFull",r.DuplicatedEntry="DuplicatedEntry",r))(t||{}),n=(r=>(r.LimitExceeded="LimitExceeded",r))(n||{})},11401:(Y,I,e)=>{"use strict";e.d(I,{tU:()=>a,a:()=>y,gQ:()=>v});var t=e(32264),n=e(10096),r=e(91650),s=e(53919),o=e(75505),m=e(17172),l=e(19347),i=e(65615);const c=g=>{const b=(0,l.l)().getInstanceSettings({uid:g.datasourceUid});return{id:g.uid,createdAt:g.createdAt*1e3,datasourceName:b?.name||"",datasourceUid:g.datasourceUid,starred:g.starred,comment:g.comment,queries:g.queries}},u=g=>({uid:g.id,createdAt:Math.floor(g.createdAt/1e3),datasourceUid:g.datasourceUid,starred:g.starred,comment:g.comment,queries:g.queries});class f{constructor(){this.preferenceService=new i.W("user")}async addToRichHistory(b){const{result:P}=await(0,m.AI)().post("/api/query-history",{dataSourceUid:b.datasourceUid,queries:b.queries});return{richHistoryQuery:c(P)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(b){(0,m.AI)().delete(`/api/query-history/${b}`)}async getRichHistory(b){const P=d(b);let C="query-history-get-all";b.starred&&(C="query-history-get-starred");const T=(await(0,o.s)((0,m.AI)().fetch({method:"GET",url:`/api/query-history?${P}`,requestId:C}))).data,M=(T.result.queryHistory||[]).map(c),O=T.result.totalCount||0;return{richHistory:M,total:O}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(b,P){const C=await(0,m.AI)().patch(`/api/query-history/${b}`,{comment:P});return c(C.result)}updateSettings(b){return this.preferenceService.patch({queryHistory:{homeTab:b.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(b,P){let C;return P?C=await(0,m.AI)().post(`/api/query-history/star/${b}`):C=await(0,m.AI)().delete(`/api/query-history/star/${b}`),c(C.result)}}function d(g){let b=`${g.datasourceFilters.map(P=>{const C=(0,l.l)().getInstanceSettings(P).uid;return`datasourceUid=${encodeURIComponent(C)}`}).join("&")}`;if(g.search&&(b=b+`&searchString=${g.search}`),g.sortOrder&&(b=b+`&sort=${g.sortOrder===r.x.Ascending?"time-asc":"time-desc"}`),!g.starred){const P=g.from===0?"now":`now-${g.from}d`,C=g.to===0?"now":`now-${g.to}d`;b=b+`&to=${P}`,b=b+`&from=${C}`}return b=b+"&limit=100",b=b+`&page=${g.page||1}`,g.starred&&(b=b+`&onlyStarred=${g.starred}`),b}const E=new s.Ay,h=new f,y=()=>t.$.queryHistoryEnabled?h:E,a=()=>E,v=()=>t.$.queryHistoryEnabled?{availableFilters:[r.x.Descending,r.x.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.TP.isSignedIn}:{availableFilters:[r.x.Descending,r.x.Ascending,r.x.DatasourceAZ,r.x.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},16021:(Y,I,e)=>{"use strict";e.d(I,{u:()=>n});var t=e(96540);function n(r,s){const[o,m]=(0,t.useState)();return(0,t.useEffect)(()=>{const l=r.subscribe(s,m);return()=>l.unsubscribe()},[r,s]),o}},60619:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>n});var t=e(96540);function n({breakpoint:r,onChange:s}){(0,t.useEffect)(()=>{const o=window.matchMedia(`(min-width: ${r}px)`),m=l=>s(l);return o.addEventListener("change",m),()=>o.removeEventListener("change",m)},[r,s])}},25249:(Y,I,e)=>{"use strict";e.d(I,{C:()=>r});var t=e(31678),n=e(17422);const r=s=>{const o=(0,t.useSelector)(m=>m.navIndex);return(0,n.tc)(o,s)}},83277:(Y,I,e)=>{"use strict";e.d(I,{s:()=>s});var t=e(96540),n=e(58476),r=e(12131);function s(){const{search:o}=(0,n.zy)(),m=(0,t.useMemo)(()=>(0,r.SE)(o||""),[o]),l=(0,t.useCallback)((i,c)=>r.Ny.partial(i,c),[]);return[m,l]}},74513:(Y,I,e)=>{"use strict";e.d(I,{Nm:()=>i,Yj:()=>c,rd:()=>u,wi:()=>l});const t="en-US",n="fr-FR",r="es-ES",s="de-DE",o="pt-BR",m="zh-Hans",l="pseudo-LOCALE",i=t,c=[{code:t,name:"English",loader:()=>e.e(9521).then(e.t.bind(e,19521,19))},{code:n,name:"Fran\xE7ais",loader:()=>e.e(5648).then(e.t.bind(e,35648,19))},{code:r,name:"Espa\xF1ol",loader:()=>e.e(680).then(e.t.bind(e,70680,19))},{code:s,name:"Deutsch",loader:()=>e.e(3082).then(e.t.bind(e,23082,19))},{code:m,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(9538).then(e.t.bind(e,29538,19))},{code:o,name:"Portugu\xEAs Brasileiro",loader:()=>e.e(2288).then(e.t.bind(e,12288,19))}],u=c.map(f=>f.code)},44836:(Y,I,e)=>{"use strict";e.d(I,{JL:()=>c,Xj:()=>h,t:()=>E,x6:()=>f});var t=e(72635),n=e(26226),r=e(96540),s=e(78552),o=e(52822),m=e(74513);const l=y=>y.split("-")[0].toLowerCase(),i={type:"backend",init(){},async read(y,a,v){let g=m.Yj.find(P=>P.code===y);if(g||(g=m.Yj.find(P=>l(P.code)===l(y))),!g)return v(new Error("No message loader available for "+y),null);const b=await g.loader();v(null,b)}};function c(y){const a={partialBundledLanguages:!0,resources:{},returnEmptyString:!1,supportedLngs:m.rd,fallbackLng:m.Nm};let v=t.default;if(y==="detect"){v=v.use(n.A);const b={order:["navigator"],caches:[]};a.detection=b}else a.lng=m.rd.includes(y)?y:void 0;return v.use(i).use(s.r9).init(a).then(()=>({language:v.resolvedLanguage}))}function u(y){const a=VALID_LANGUAGES.includes(y)?y:void 0;return i18n.changeLanguage(a)}const f=y=>r.createElement(o.x,{shouldUnescape:!0,...y}),d=t.default.t,E=(y,a,v)=>d(y,a,v),h=(y,a={})=>typeof y=="string"?h(new Date(y),a):new Intl.DateTimeFormat(t.default.language,a).format(y)},18898:(Y,I,e)=>{"use strict";e.d(I,{E:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},16001:(Y,I,e)=>{"use strict";e.d(I,{$K:()=>y,Do:()=>u,XC:()=>d,XR:()=>f,dx:()=>c,fX:()=>b,g5:()=>h,oF:()=>E,qN:()=>g});var t=e(30038),n=e(1081),r=e(31678);const s=25,o="notifications",m=`${o}/lastRead`,l={byId:T(),lastRead:Number.parseInt(window.localStorage.getItem(m)??`${Date.now()}`,10)},i=(0,t.Z0)({name:"appNotifications",initialState:l,reducers:{notifyApp:(O,{payload:S})=>{Object.values(O.byId).some(p=>P(S,p)&&p.showing)||(O.byId[S.id]=S,M(O.byId))},hideAppNotification:(O,{payload:S})=>{S in O.byId&&(O.byId[S].showing=!1,M(O.byId))},clearNotification:(O,{payload:S})=>{delete O.byId[S],M(O.byId)},clearAllNotifications:O=>{O.byId={},M(O.byId)},readAllNotifications:(O,{payload:S})=>{O.lastRead=S}}}),{notifyApp:c,hideAppNotification:u,clearNotification:f,clearAllNotifications:d,readAllNotifications:E}=i.actions,h=i.reducer,y=O=>O.lastRead,a=O=>O.byId,v=(0,n.Mz)(a,O=>Object.values(O).sort((S,p)=>p.timestamp-S.timestamp)),g=(0,n.Mz)(v,O=>O.filter(C)),b=(0,n.Mz)(a,O=>Object.values(O).filter(S=>S.showing));function P(O,S){return O.icon===S.icon&&O.severity===S.severity&&O.text===S.text&&O.title===S.title}function C(O){return O.severity===r.AppNotificationSeverity.Warning||O.severity===r.AppNotificationSeverity.Error}function D(O){return typeof O=="object"&&O!==null&&"id"in O&&"icon"in O&&"title"in O&&"text"in O}function T(){const O=window.localStorage.getItem(o);if(!O)return{};const S=JSON.parse(O);return Object.values(S).every(p=>D(p))?S:{}}function M(O){const S=Object.values(O).filter(C).sort((p,x)=>x.timestamp-p.timestamp).slice(0,s).reduce((p,x)=>(p[x.id]={id:x.id,severity:x.severity,icon:x.icon,title:x.title,text:x.text,traceId:x.traceId,timestamp:x.timestamp,showing:!1},p),{});try{window.localStorage.setItem(o,JSON.stringify(S))}catch(p){console.error("Unable to persist notifications to local storage"),console.error(p)}}},91219:(Y,I,e)=>{"use strict";e.d(I,{I_:()=>f,TU:()=>u,ci:()=>i,fc:()=>c});var t=e(30038),n=e(32264),r=e(36689);const s=n.$.bootData?.navTree??[];function o(d){return d.map(E=>{const h=E.children&&o(E.children);return{...E,children:h,text:(0,r.C)(E.id)??E.text,subTitle:(0,r.o)(E.id)??E.subTitle,emptyMessage:(0,r.C)(E.emptyMessageId)}})}const m="starred/",l=(0,t.Z0)({name:"navBarTree",initialState:()=>o(n.$.bootData?.navTree??[]),reducers:{setStarred:(d,E)=>{const h=d.find(b=>b.id==="starred"),{id:y,title:a,url:v,isStarred:g}=E.payload;if(h)if(g){h.children||(h.children=[]);const b={id:m+y,text:a,url:v};h.children.push(b),h.children.sort((P,C)=>P.text.localeCompare(C.text))}else{const b=h.children?.findIndex(P=>P.id===m+y)??-1;b>-1&&h?.children?.splice(b,1)}},updateDashboardName:(d,E)=>{const{id:h,title:y,url:a}=E.payload,v=d.find(g=>g.id==="starred");if(v){const g=v.children?.find(b=>b.id===h);g&&(g.text=y,g.url=a,v.children?.sort((b,P)=>b.text.localeCompare(P.text)))}},removePluginFromNavTree:(d,E)=>{const h="plugin-page-"+E.payload.pluginID,y=d.findIndex(a=>a.id===h);y>-1&&d.splice(y,1)}}}),{setStarred:i,removePluginFromNavTree:c,updateDashboardName:u}=l.actions,f=l.reducer},28215:(Y,I,e)=>{"use strict";e.d(I,{Id:()=>m,Vz:()=>f,YA:()=>d,_h:()=>h,s2:()=>l});var t=e(30038),n=e(2543),r=e.n(n),s=e(2913),o=e(36689);const m="home";function l(){const y={},a=(0,n.cloneDeep)(s.Ay.bootData.navTree),v=a.find(b=>b.id===m),g=a.filter(b=>b.id!==m);return v&&i(y,[v]),i(y,g,y[m]),y}function i(y,a,v){const g=[];for(const b of a){const P={...b,text:(0,o.C)(b.id)??b.text,subTitle:(0,o.o)(b.id)??b.subTitle,emptyMessage:(0,o.C)(b.emptyMessageId),parentItem:v};P.id&&(y[P.id]=P),P.children&&i(y,P.children,P),g.push(P)}v&&(v.children=g),y["not-found"]={...c("Page not found","404 Error").node},y.error={...c("Page error","An unexpected error").node}}function c(y,a){const v={text:y,subTitle:a,icon:"exclamation-triangle"};return{node:v,main:v}}const u={},f=(0,t.VP)("navIndex/updateNavIndex"),d=(0,t.VP)("navIndex/updateConfigurationSubtitle"),E=(y,a)=>({...y,parentItem:{...y.parentItem,text:y.parentItem?.text??"",subTitle:a}}),h=(y=u,a)=>{if(f.match(a)){let g=function(C){if(C.children)for(const D of C.children)b[D.id]={...D,parentItem:C};C.parentItem&&g(C.parentItem)};var v=g;const b={},P=a.payload;return g(P),{...y,...b}}else if(d.match(a)){const g=`Organization: ${a.payload}`;return{...y,cfg:{...y.cfg,subTitle:g},datasources:E(y.datasources,g),correlations:E(y.correlations,g),users:E(y.users,g),teams:E(y.teams,g),plugins:E(y.plugins,g),"org-settings":E(y["org-settings"],g),apikeys:E(y.apikeys,g)}}return y}},17422:(Y,I,e)=>{"use strict";e.d(I,{rH:()=>m,tc:()=>o});var t=e(41811),n=e(71101),r=e(28215);const s=()=>{const c={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:c,main:c}},o=(0,t.A)((c,u,f,d=!1)=>{if(c[u]){const E=c[u],h=d?E:m(E),y=l(h,u);return{node:E,main:y}}return f||s()});function m(c){return c.id===n.Rj?c:c.parentItem&&c.parentItem.id!==r.Id?m(c.parentItem):c}function l(c,u){return c.id===u?{...c,active:!0}:c.children&&c.children.length>0?{...c,children:c.children.map(f=>l(f,u))}:c}const i=c=>`${c.main.text}${c.node.text?": "+c.node.text:""}`},65615:(Y,I,e)=>{"use strict";e.d(I,{W:()=>n});var t=e(27677);class n{constructor(s){this.resourceUri=s}update(s){return t.IB.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.IB.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.IB.get(`/api/${this.resourceUri}/preferences`)}}},2619:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>s});var t=e(96540),n=e(13752),r=e(69731);class s{constructor(l){this._subject=new n.B,this._state=l}useState(){return o(this)}get state(){return this._state}setState(l){this._state={...this._state,...l},this._subject.next(this._state)}subscribeToState(l){return this._subject.subscribe(l)}}function o(m){const l=(0,r.C)();return(0,t.useEffect)(()=>{const i=m.subscribeToState({next:l});return()=>i.unsubscribe()},[m,l]),m.state}},27677:(Y,I,e)=>{"use strict";e.d(I,{Mf:()=>ke,IB:()=>Se,AI:()=>We});var t=e(56568),n=e(13752),r=e(75505),s=e(88483),o=e(64423),m=e(13288),l=e(65474),i=e(20039),c=e(81160),u=e(69862),f=e(59099),d=e(37748),E=e(66847),h=e(67791),y=e(16126),a=e(41560),v=e(69850),g=e(1005),b=e(62938),P=e(26272),C=e(40187),D=e(32264),T=e(28138),M=e(2913),O=e(92315),S=e(67027),p=e(32196),x=e(96540),A=e(40845),R=e(17464),B=e(37166),U=e(55852),F=e(88448);const K=De=>{const pe=(0,A.of)(w),Ne=(0,A.$j)(),Le=(0,F.o)(Ne),He=!!De.maxConcurrentSessions,je=()=>{window.location.reload()};return x.createElement(R.ZL,null,x.createElement("div",{className:Le.modal},x.createElement(B.w,{title:"You have been automatically signed out",severity:"warning",className:pe.infobox},x.createElement("div",{className:pe.text},x.createElement("p",null,"Your session token was automatically revoked because you have reached",x.createElement("strong",null,` the maximum number of ${He?De.maxConcurrentSessions:""} concurrent sessions `),"for your account."),x.createElement("p",null,x.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),x.createElement(U.$n,{size:"md",variant:"primary",onClick:je},"Sign in"))),x.createElement("div",{className:(0,p.cx)(Le.modalBackdrop,pe.backdrop)}))},w=De=>({infobox:(0,p.css)`
    margin-bottom: 0;
  `,text:(0,p.css)`
    margin: ${De.spacing(1,0,2)};
  `,backdrop:(0,p.css)`
    background-color: ${De.colors.background.canvas};
    opacity: 0.8;
  `});var L=e(28444),V=e(2543),N=e(95344);const z=De=>{const pe=De.method,Ne=k(De),Le=ee(Ne),He=X(De,Le),je=oe(De);return{method:pe,headers:Ne,body:He,credentials:je}},J={canParse:()=>!0,parse:De=>(De.get("accept")||De.set("accept","application/json, text/plain, */*"),De)},G=De=>({canParse:pe=>(pe?.method?pe?.method.toLowerCase():"")===De,parse:pe=>(pe.get("content-type")||pe.set("content-type","application/json"),pe)}),H=G("post"),q=G("put"),le=G("patch"),me=[H,q,le,J],k=De=>{const pe=De?.headers?new Headers(De.headers):new Headers;return me.filter(He=>He.canParse(De)).reduce((He,je)=>je.parse(He),pe)},ee=De=>{if(!De)return!1;const pe=De.get("content-type");return!!(pe&&pe.toLowerCase()==="application/json")},X=(De,pe)=>De&&(!De.data||typeof De.data=="string"||De.data instanceof Blob?De.data:pe?JSON.stringify(De.data):new URLSearchParams(De.data));async function j(De,pe){if(pe)switch(pe){case"arraybuffer":return De.arrayBuffer();case"blob":return De.blob();case"json":return De.headers.get("Content-Length")==="0"?(console.warn(`${De.url} returned an invalid JSON`),{}):await De.json();case"text":return De.text()}const Ne=await De.text();try{return JSON.parse(Ne)}catch{}return Ne}function ne(De){return Object.keys(De).map(pe=>{const Ne=De[pe];return Array.isArray(Ne)?Ne.map(Le=>`${encodeURIComponent(pe)}=${encodeURIComponent(Le)}`).join("&"):`${encodeURIComponent(pe)}=${encodeURIComponent(Ne)}`}).join("&")}const te=De=>{const pe=(0,V.omitBy)(De.params,Le=>Le===void 0||Le&&Le.length===0),Ne=ne(pe);return De.params&&Ne.length?`${De.url}?${Ne}`:De.url},oe=De=>De&&(De.credentials?De.credentials:De.withCredentials?((0,N.l)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin");var ie=e(21969),ue=(De=>(De[De.Pending=0]="Pending",De[De.InProgress=1]="InProgress",De[De.Done=2]="Done",De))(ue||{});class be{constructor(pe=!1){this.state={},this.queue=new n.B,this.updates=new n.B,this.add=(Ne,Le)=>this.queue.next({id:Ne,options:Le,state:0}),this.setInProgress=Ne=>this.queue.next({id:Ne,state:1}),this.setDone=Ne=>this.queue.next({id:Ne,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=Ne=>{const Le=Object.keys(Ne).filter(je=>Ne[je].state===1).length;return{noOfPending:Object.keys(Ne).filter(je=>Ne[je].state===0).length,noOfInProgress:Le,state:Ne}},this.publishUpdate=(Ne,Le)=>{this.printState(Ne,Le),this.updates.next(Ne)},this.printState=(Ne,Le)=>{if(!Le)return;const He=Object.keys(Ne.state).reduce((je,at)=>{const Ye={id:at,state:Ne.state[at].state};return je.push(Ye),je},[]);console.log("FetchQueue noOfStarted",Ne.noOfInProgress),console.log("FetchQueue noOfNotStarted",Ne.noOfPending),console.log("FetchQueue state",He)},this.queue.subscribe(Ne=>{const{id:Le,state:He,options:je}=Ne;if(this.state[Le]||(this.state[Le]={state:0,options:{url:""}}),He===2){delete this.state[Le];const Ye=this.getUpdate(this.state);this.publishUpdate(Ye,pe);return}this.state[Le].state=He,je&&(this.state[Le].options=je);const at=this.getUpdate(this.state);this.publishUpdate(at,pe)})}}var ge=e(95864);class re{constructor(pe,Ne,Le){const He=Le?.http2Enabled?1e3:5;pe.getUpdates().pipe((0,y.p)(({noOfPending:je})=>je>0),(0,ge.H)(({state:je,noOfInProgress:at})=>{const Ye=Object.keys(je).filter(Ee=>je[Ee].state===ue.Pending&&!(0,ie.dr)(je[Ee].options.url)).reduce((Ee,se)=>{const ae={id:se,options:je[se].options};return Ee.push(ae),Ee},[]),$e=Object.keys(je).filter(Ee=>je[Ee].state===ue.Pending&&(0,ie.dr)(je[Ee].options.url)).reduce((Ee,se)=>{const ae={id:se,options:je[se].options};return Ee.push(ae),Ee},[]),xe=Math.max(He-at-Ye.length,0),Fe=$e.slice(0,xe);return Ye.concat(Fe)})).subscribe(({id:je,options:at})=>{Ne.add(je,at)})}}class ye{constructor(pe,Ne){this.queue=new n.B,this.responses=new n.B,this.add=(Le,He)=>{this.queue.next({id:Le,options:He})},this.getResponses=Le=>this.responses.asObservable().pipe((0,y.p)(He=>He.id===Le)),this.queue.subscribe(Le=>{const{id:He,options:je}=Le;pe.setInProgress(He),this.responses.next({id:He,observable:Ne(je)})})}}var Be=e(16233);const ve="cancel_all_requests_request_id",Me="grafana-trace-id";class ke{constructor(pe){this.inFlightRequests=new n.B,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new n.B,this._tokenRotationInProgress=null,this.deviceID=null,this.dependencies={fromFetch:i.$,appEvents:T.A,contextSrv:Be.TP,logout:()=>{Be.TP.setLoggedOut()}},pe&&(this.dependencies={...this.dependencies,...pe}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new be,this.responseQueue=new ye(this.fetchQueue,this.internalFetch),this.initGrafanaDeviceID(),new re(this.fetchQueue,this.responseQueue,(0,M.zj)())}async initGrafanaDeviceID(){try{const Ne=await(await t.Ay.load()).get();this.deviceID=Ne.visitorId}catch(pe){console.error(pe)}}async request(pe){return await(0,r.s)(this.fetch(pe).pipe((0,c.T)(Ne=>Ne.data)))}fetch(pe){const Ne=(0,b.A)(),Le=this.fetchQueue;return new s.c(He=>{const je=new o.yU;return je.add(this.responseQueue.getResponses(Ne).subscribe(at=>{je.add(at.observable.subscribe(He))})),this.fetchQueue.add(Ne,pe),function(){Le.setDone(Ne),je.unsubscribe()}})}internalFetch(pe){pe.requestId&&this.inFlightRequests.next(pe.requestId),pe=this.parseRequestOptions(pe);const Ne=(0,S.r)();return Ne!==null&&Ne!==""&&D.$.jwtUrlLogin&&D.$.jwtHeaderName&&(pe.headers=pe.headers??{},pe.headers[D.$.jwtHeaderName]=`${Ne}`),this.deviceID&&(pe.headers=pe.headers??{},pe.headers["X-Grafana-Device-Id"]=`${this.deviceID}`),this.getFromFetchStream(pe).pipe(this.handleStreamResponse(pe),this.handleStreamError(pe),this.handleStreamCancellation(pe))}resolveCancelerIfExists(pe){this.inFlightRequests.next(pe)}cancelAllInFlightRequests(){this.inFlightRequests.next(ve)}async datasourceRequest(pe){return(0,r.s)(this.fetch(pe))}parseRequestOptions(pe){const Ne=this.dependencies.contextSrv.user?.orgId;return pe.retry=pe.retry??0,(0,ie.Lr)(pe.url)&&(Ne&&(pe.headers=pe.headers??{},pe.headers["X-Grafana-Org-Id"]=Ne),pe.url.startsWith("/")&&(pe.url=pe.url.substring(1)),pe.headers?.Authorization&&(pe.headers["X-DS-Authorization"]=pe.headers.Authorization,delete pe.headers.Authorization),this.noBackendCache&&(pe.headers=pe.headers??{},pe.headers["X-Grafana-NoCache"]="true")),pe.hideFromInspector===void 0&&(pe.hideFromInspector=(0,ie.Lr)(pe.url)&&!(0,ie.dr)(pe.url)),pe}getFromFetchStream(pe){const Ne=te(pe),Le=z(pe);return this.dependencies.fromFetch(Ne,Le).pipe((0,u.Z)(async He=>{const{status:je,statusText:at,ok:Ye,headers:$e,url:xe,type:Fe,redirected:Ee}=He,se=pe.responseType??(ee($e)?"json":void 0),ae=await j(He,se);return{status:je,statusText:at,ok:Ye,data:ae,headers:$e,url:xe,type:Fe,redirected:Ee,config:pe,traceId:He.headers.get(Me)??void 0}}))}showApplicationErrorAlert(pe){}showSuccessAlert(pe){const{config:Ne}=pe;if(Ne.showSuccessAlert===!1||Ne.showSuccessAlert===void 0&&(Ne.method==="GET"||(0,ie.dr)(Ne.url)||!(0,ie.Lr)(Ne.url)))return;const Le=pe.data;Le?.message&&this.dependencies.appEvents.emit(P.r1.alertSuccess,[Le.message])}showErrorAlert(pe,Ne){if(pe.showErrorAlert===!1||pe.showErrorAlert===void 0&&((0,ie.dr)(pe.url)||!(0,ie.Lr)(pe.url)))return;let Le="",He=Ne.data.message;He==="Unexpected error"&&Ne.message&&(He=Ne.message),He.length>80&&(Le=He,He="Error"),Ne.status===422&&(Le=Ne.data.message,He="Validation failed"),this.dependencies.appEvents.emit(Ne.status<500?P.r1.alertWarning:P.r1.alertError,[He,Le,Ne.data.traceID])}processRequestError(pe,Ne){return Ne.data=Ne.data??{message:"Unexpected error"},typeof Ne.data=="string"&&(Ne.data={message:Ne.data,error:Ne.statusText,response:Ne.data}),Ne.data&&!Ne.data.message&&typeof Ne.data.error=="string"&&(Ne.data.message=Ne.data.error),Ne.data.message&&setTimeout(()=>{Ne.isHandled||this.showErrorAlert(pe,Ne)},50),this.inspectorStream.next({response:Ne,requestId:pe.requestId}),Ne}handleStreamResponse(pe){return Ne=>Ne.pipe((0,c.T)(Le=>{if(!Le.ok){const{status:He,statusText:je,data:at}=Le;throw{status:He,statusText:je,data:at,config:pe,traceId:Le.headers.get(Me)??void 0}}return Le}),(0,f.M)(Le=>{this.showSuccessAlert(Le),this.inspectorStream.next({response:Le,requestId:pe.requestId})}))}handleStreamError(pe){const{isSignedIn:Ne}=this.dependencies.contextSrv.user;return Le=>Le.pipe((0,d.l)(He=>He.pipe((0,u.Z)((je,at)=>{const Ye=at===0&&pe.retry===0;if(je.status===401&&(0,ie.Lr)(pe.url)&&Ye&&Ne){if(je.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new L.S8({component:K,props:{maxConcurrentSessions:je.data?.error?.maxConcurrentSessions}})),(0,m.$)(()=>je);let $e=this.loginPing();return(0,O.m)()&&(0,O.W)()*1e3<Date.now()&&($e=this.rotateToken()),(0,l.H)($e).pipe((0,E.W)(xe=>(xe.status===401&&this.dependencies.logout(),(0,m.$)(xe))))}return(0,m.$)(je)}))),(0,E.W)(He=>(0,m.$)(()=>this.processRequestError(pe,He))))}handleStreamCancellation(pe){return Ne=>Ne.pipe((0,h.Q)(this.inFlightRequests.pipe((0,y.p)(Le=>{let He=!1;return pe&&pe.requestId&&pe.requestId===Le&&(He=!0),Le===ve&&(He=!0),He}))),(0,a.v)(()=>({type:C.v2.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:pe})))}getInspectorStream(){return this.inspectorStream}async get(pe,Ne,Le,He){return this.request({...He,method:"GET",url:pe,params:Ne,requestId:Le})}async delete(pe,Ne,Le){return this.request({...Le,method:"DELETE",url:pe,data:Ne})}async post(pe,Ne,Le){return this.request({...Le,method:"POST",url:pe,data:Ne})}async patch(pe,Ne,Le){return this.request({...Le,method:"PATCH",url:pe,data:Ne})}async put(pe,Ne,Le){return this.request({...Le,method:"PUT",url:pe,data:Ne})}withNoBackendCache(pe){return this.noBackendCache=!0,pe().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,v.j)(()=>{this._tokenRotationInProgress=null}),(0,g.u)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(pe){return this.get("/api/search",pe)}getDashboardByUid(pe){return this.get(`/api/dashboards/uid/${pe}`)}validateDashboard(pe){return Promise.resolve({isValid:!1,message:"dashboard validation is supported"})}getPublicDashboardByUid(pe){return this.get(`/api/public/dashboards/${pe}`)}getFolderByUid(pe,Ne={}){const Le=new URLSearchParams;return Ne.withAccessControl&&Le.set("accesscontrol","true"),this.get(`/api/folders/${pe}?${Le.toString()}`,void 0,void 0,{showErrorAlert:!1})}}const Se=new ke,We=()=>Se},16233:(Y,I,e)=>{"use strict";e.d(I,{SM:()=>c,TP:()=>d});var t=e(2543),n=e.n(t),r=e(65879),s=e(17172),o=e(33378),m=e(92315),l=e(31678),i=e(2913);const c="auto";class u{constructor(){this.id=0,this.uid="",this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},this.authenticatedBy="",i.Ay.bootData.user&&(0,t.extend)(this,i.Ay.bootData.user)}}class f{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,i.Ay.bootData||(i.Ay.bootData={user:{},settings:{},navTree:[]}),this.user=new u,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=i.Ay.minRefreshInterval,this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.user.permissions=await(0,s.AI)().get("/api/access-control/user/actions",{reloadcache:!0})}catch(y){console.error(y)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(y){return y==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===y}licensedAccessControlEnabled(){return(0,o.a)("accesscontrol")}hasPermissionInMetadata(y,a){return!!a.accessControl?.[y]}hasPermission(y){return!!this.user.permissions?.[y]}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(y){return!i.Ay.minRefreshInterval||y===c?!0:r.intervalToMs(y)>=r.intervalToMs(i.Ay.minRefreshInterval)}getValidInterval(y){return this.isAllowedInterval(y)?y:i.Ay.minRefreshInterval}getValidIntervals(y){return this.minRefreshInterval?y.filter(a=>a!=="").filter(this.isAllowedInterval):y}hasAccessToExplore(){return this.hasPermission(l.AccessControlAction.DataSourcesExplore)&&i.Ay.exploreEnabled}evaluatePermission(y){return y.some(a=>this.hasPermission(a))?[]:["Reject"]}scheduleTokenRotationJob(){if(this.canScheduleRotation()){let y=(0,m.W)(),v=(y-Math.floor(Math.random()*19+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if((0,m.W)()>y){this.scheduleTokenRotationJob();return}this.rotateToken().then()},v)}}canScheduleRotation(){return!(!this.isSignedIn||(0,m.W)()===0)}cancelTokenRotationJob(){this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch(i.Ay.appSubUrl+"/api/user/auth-tokens/rotate",{method:"POST"}).then(y=>{if(y.status===200){this.scheduleTokenRotationJob();return}if(y.status===401){this.setLoggedOut();return}}).catch(y=>{console.error(y)})}}let d=new f;const E=h=>{throw new Error("contextSrv can be only overridden in test environment")}},42614:(Y,I,e)=>{"use strict";e.d(I,{n:()=>n});var t=e(63415);const n=(s,o)=>{(0,t.x$)().addEvent({type:t.on.Performance,payload:{name:s,value:o}})},r=s=>faro?.api?.pushError(s)},62301:(Y,I,e)=>{"use strict";e.d(I,{A:()=>i});var t=e(2543),n=e.n(t),r=e(17172),s=e(2913),o=e(33390);class m{constructor(){}addDashboardImpression(u){const f=this.impressionKey();let d=[];o.A.exists(f)&&(d=JSON.parse(o.A.get(f)),(0,t.isArray)(d)||(d=[])),d=d.filter(E=>u!==E),d.unshift(u),d.length>50&&d.pop(),o.A.set(f,JSON.stringify(d))}async convertToUIDs(){let u=this.getImpressions();const f=(0,t.filter)(u,E=>(0,t.isNumber)(E));if(!f.length)return;const d=await(0,r.AI)().get(`/api/dashboards/ids/${f.join(",")}`);o.A.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(u,E=>(0,t.isString)(E)),...d]))}getImpressions(){const u=o.A.get(this.impressionKey())||"[]";return JSON.parse(u)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),f=>(0,t.isString)(f))}impressionKey(){return"dashboard_impressions-"+s.Ay.bootData.user.orgId}}const i=new m},2769:(Y,I,e)=>{"use strict";e.d(I,{K:()=>l,O:()=>i});var t=e(97594),n=e(3591),r=e(28138),s=e(2913),o=e(10096),m=e(65615);async function l(c,u){const f=s.config.theme2,d=(0,t.g)(c);if(r.A.publish(new n.E8(d)),f.colors.mode!==d.colors.mode){const y=document.createElement("link");y.rel="stylesheet",y.href=s.config.bootData.assets[d.colors.mode],y.onload=()=>{const a=document.getElementsByTagName("link");for(let v=0;v<a.length;v++){const g=a[v];g.href&&g.href.includes(`build/grafana.${f.colors.mode}`)&&g.remove()}},document.head.insertBefore(y,document.head.firstChild)}if(u||!o.TP.isSignedIn)return;const E=new m.W("user"),h=await E.load();await E.update({...h,theme:d.colors.mode})}async function i(c){const u=s.config.theme2;l(u.isDark?"light":"dark",c)}},33390:(Y,I,e)=>{"use strict";e.d(I,{A:()=>r});class t{get(o){return window.localStorage[o]}set(o,m){window.localStorage[o]=m}getBool(o,m){return m!==void 0&&!this.exists(o)?m:window.localStorage[o]==="true"}getObject(o,m){let l=m;if(this.exists(o)){const i=window.localStorage[o];try{l=JSON.parse(i)}catch(c){console.error(`Error parsing store object: ${o}. Returning default: ${m}. [${c}]`)}}return l}setObject(o,m){let l;try{l=JSON.stringify(m)}catch(i){throw new Error(`Could not stringify object: ${o}. [${i}]`)}try{this.set(o,l)}catch(i){const c=new Error(`Could not save item in localStorage: ${o}. [${i}]`);throw i instanceof Error&&(c.name=i.name),c}return!0}exists(o){return window.localStorage[o]!==void 0}delete(o){window.localStorage.removeItem(o)}}const r=new t},31140:(Y,I,e)=>{"use strict";e.d(I,{A:()=>c,r:()=>i});var t=e(2543),n=e.n(t),r=e(54479),s=e(83195);function o(u,f){if(!u)return!1;if(u[0]==="/"){const d=(0,r.dO)(u);return f.match(d)!=null}return u===f}function m(u){return u===0?.001:u/10}function l(u){return u?{colors:[{opacity:0},{opacity:u/10}]}:null}function i(u,f,d){for(let E=0;E<u.length;E++){const h=u[E],y=f.yaxes,a=h.yaxis||1,v=y[a-1],g=(0,s.j_)(v.format);(0,t.isNumber)(f.decimals)?h.updateLegendValues(g,f.decimals):(0,t.isNumber)(v.decimals)?h.updateLegendValues(g,v.decimals+1):h.updateLegendValues(g,null)}}class c{constructor(f){this.datapoints=f.datapoints,this.label=f.alias,this.id=f.alias,this.alias=f.alias,this.aliasEscaped=(0,t.escape)(f.alias),this.color=f.color,this.bars={fillColor:f.color},this.valueFormater=(0,s.j_)("none"),this.stats={},this.legend=!0,this.unit=f.unit,this.dataFrameIndex=f.dataFrameIndex,this.fieldIndex=f.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(f){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let d=0;d<f.length;d++){const E=f[d];o(E.alias,this.alias)&&(E.lines!==void 0&&(this.lines.show=E.lines),E.dashes!==void 0&&(this.dashes.show=E.dashes,this.lines.lineWidth=0),E.points!==void 0&&(this.points.show=E.points),E.bars!==void 0&&(this.bars.show=E.bars),E.fill!==void 0&&(this.lines.fill=m(E.fill)),E.fillGradient!==void 0&&(this.lines.fillColor=l(E.fillGradient)),E.stack!==void 0&&(this.stack=E.stack),E.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:E.linewidth,this.dashes.lineWidth=E.linewidth),E.dashLength!==void 0&&(this.dashes.dashLength[0]=E.dashLength),E.spaceLength!==void 0&&(this.dashes.dashLength[1]=E.spaceLength),E.nullPointMode!==void 0&&(this.nullPointMode=E.nullPointMode),E.pointradius!==void 0&&(this.points.radius=E.pointradius),E.steppedLine!==void 0&&(this.lines.steps=E.steppedLine),E.zindex!==void 0&&(this.zindex=E.zindex),E.fillBelowTo!==void 0&&(this.fillBelowTo=E.fillBelowTo),E.color!==void 0&&this.setColor(E.color),E.transform!==void 0&&(this.transform=E.transform),E.legend!==void 0&&(this.legend=E.legend),E.hideTooltip!==void 0&&(this.hideTooltip=E.hideTooltip),E.yaxis!==void 0&&(this.yaxis=E.yaxis),E.hiddenSeries!==void 0&&(this.hiddenSeries=E.hiddenSeries))}}getFlotPairs(f){const d=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const E=f==="connected",h=f==="null as zero";let y,a,v=0,g,b=0,P=!0;for(let C=0;C<this.datapoints.length;C++){if(a=this.datapoints[C][0],y=this.datapoints[C][1],g!==void 0){const D=y-g;D<this.stats.timeStep&&(this.stats.timeStep=D)}if(g=y,a===null){if(E)continue;h&&(a=0)}a!==null&&((0,t.isNumber)(a)&&(this.stats.total+=a,this.allIsNull=!1,v++),a>this.stats.max&&(this.stats.max=a),a<this.stats.min&&(this.stats.min=a),this.stats.first===null?this.stats.first=a:b>a?(P=!1,C===this.datapoints.length-1&&(this.stats.delta+=a)):(P?this.stats.delta+=a-b:this.stats.delta+=a,P=!0),b=a,a<this.stats.logmin&&a>0&&(this.stats.logmin=a),a!==0&&(this.allIsZero=!1)),d.push([y,a])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),d.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/v,this.stats.current=d[d.length-1][1],this.stats.current===null&&d.length>1&&(this.stats.current=d[d.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=d.length,d}updateLegendValues(f,d){this.valueFormater=f,this.decimals=d}formatValue(f){return(0,t.isFinite)(f)||(f=null),(0,s.cN)(this.valueFormater(f,this.decimals))}isMsResolutionNeeded(){for(let f=0;f<this.datapoints.length;f++)if(this.datapoints[f][1]!==null&&this.datapoints[f][1]!==void 0){const d=this.datapoints[f][1].toString();if(d.length===13&&d%1e3!==0)return!0}return!1}hideFromLegend(f){return!!(f.hideEmpty&&this.allIsNull||!this.legend||f.hideZero&&this.allIsZero)}setColor(f){this.color=f,this.bars.fillColor=f}}},6262:(Y,I,e)=>{"use strict";e.d(I,{G:()=>s});var t=e(40672),n=e(32264);const r=n.$.bootData.settings.cspReportOnlyEnabled,s={createHTML:(o,m,l)=>r?(console.error("[HTML not sanitized with Trusted Types]",o,m,l),o):o.replace(/<script/gi,"&lt;script"),createScript:o=>o,createScriptURL:(o,m,l)=>r?(console.error("[ScriptURL not sanitized with Trusted Types]",o,m,l),o):t.sQ.sanitizeUrl(o)};n.$.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",s)},96378:(Y,I,e)=>{"use strict";e.d(I,{N:()=>i,e:()=>c});var t=e(96540),n=e(70255),r=e(60578),s=e(3591),o=e(32264),m=e(10096),l=e(34295);const i=({children:u,value:f})=>{const[d,E]=(0,t.useState)(f);return(0,t.useEffect)(()=>{const h=m.lE.subscribe(s.E8,y=>{o.$.theme2=y.payload,E(y.payload)});return()=>h.unsubscribe()},[]),t.createElement(r.D.Provider,{value:d},t.createElement(n.z,{baseColor:d.colors.emphasize(d.colors.background.secondary),highlightColor:d.colors.emphasize(d.colors.background.secondary,.1),borderRadius:d.shape.radius.default},u))},c=(u,f)=>function(E){return t.createElement(i,{value:f},t.createElement(u,{...E}))}},67278:(Y,I,e)=>{"use strict";e.d(I,{c:()=>t});class t extends window.Worker{constructor(r,s){const o=r.toString(),m=o.split("/");m.pop();const l=`${m.join("/")}/`,i=`importScripts('${o}');`,c=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${l}'; ${i}`],{type:"application/javascript"}));super(c,s),URL.revokeObjectURL(c)}}},80714:(Y,I,e)=>{"use strict";e.d(I,{F:()=>t});function t(n={}){return{...n,accesscontrol:!0}}},94041:(Y,I,e)=>{"use strict";e.d(I,{b:()=>t});const t=(n,r,s)=>(n.splice(s,0,n.splice(r,1)[0]),n)},92315:(Y,I,e)=>{"use strict";e.d(I,{W:()=>t,m:()=>n});function t(){const r=document.cookie.split("; ").find(o=>o.startsWith("grafana_session_expiry="));if(!r)return 0;let s=r.split("=").at(1);return s?parseInt(s,10):0}function n(){return document.cookie.split("; ").findIndex(r=>r.startsWith("grafana_session_expiry="))>-1}},63917:(Y,I,e)=>{"use strict";e.d(I,{gn:()=>r});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,o=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,m=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,l=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),i=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||o&&(i&&parseFloat(i[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||m&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(l&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function r(){return n()?"\u2318":"ctrl"}},34525:(Y,I,e)=>{"use strict";e.d(I,{TS:()=>r});class t{_linkTo(l,i){i<=0&&l.inputEdges.push(this),i>=0&&l.outputEdges.push(this),l.edges.push(this)}link(l,i){if(!l)throw Error("inputNode is required");if(!i)throw Error("outputNode is required");return this.unlink(),this.inputNode=l,this.outputNode=i,this._linkTo(l,1),this._linkTo(i,-1),this}unlink(){let l;const i=this.inputNode,c=this.outputNode;i&&c&&(l=i.edges.indexOf(this),l>-1&&i.edges.splice(l,1),l=c.edges.indexOf(this),l>-1&&c.edges.splice(l,1),l=i.outputEdges.indexOf(this),l>-1&&i.outputEdges.splice(l,1),l=c.inputEdges.indexOf(this),l>-1&&c.inputEdges.splice(l,1))}}class n{constructor(l){this.name=l,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(l){return l?typeof l=="object"?this.inputEdges.find(i=>i.inputNode?.name===l.name):this.inputEdges.find(i=>i.inputNode?.name===l):null}getEdgeTo(l){return l?typeof l=="object"?this.outputEdges.find(i=>i.outputNode?.name===l.name):this.outputEdges.find(i=>i.outputNode?.name===l):null}getOptimizedInputEdges(){const l=[];return this.inputEdges.forEach(i=>{i.inputNode?.inputEdges.map(u=>u.inputNode)?.forEach(u=>{const f=u?.getEdgeTo(this.name);f&&l.push(f)})}),this.inputEdges.filter(i=>l.indexOf(i)===-1)}}class r{constructor(){this.nodes={}}createNode(l){const i=new n(l);return this.nodes[l]=i,i}createNodes(l){const i=[];return l.forEach(c=>{i.push(this.createNode(c))}),i}link(l,i){let c=[],u=[];const f=[],d=[];l instanceof Array?c=l:c=[l],i instanceof Array?u=i:u=[i];for(let h=0;h<c.length;h++){const y=c[h];if(typeof y=="string"){const a=this.getNode(y);if(!a)throw Error(`cannot link input node named ${y} since it doesn't exist in graph`);f.push(a)}else f.push(y)}for(let h=0;h<u.length;h++){const y=u[h];if(typeof y=="string"){const a=this.getNode(y);if(!a)throw Error(`cannot link output node named ${y} since it doesn't exist in graph`);d.push(a)}else d.push(y)}const E=[];return f.forEach(h=>{d.forEach(y=>{E.push(this.createEdge().link(h,y))})}),E}descendants(l){if(!l.length)return new Set;const i=new Set(o(l)?l.map(c=>this.nodes[c]).filter(c=>c!==void 0):l);return this.descendantsRecursive(i)}descendantsRecursive(l,i=new Set){for(const c of l){const u=new Set;for(const{inputNode:f}of c.inputEdges)f&&!i.has(f)&&(i.add(f),u.add(f));this.descendantsRecursive(u,i)}return i}createEdge(){return new t}getNode(l){return this.nodes[l]}}const s=m=>{Object.keys(m.nodes).forEach(l=>{const i=m.nodes[l];let c=i.outputEdges.map(f=>f.outputNode?.name).join(", ");c||(c="<none>");let u=i.inputEdges.map(f=>f.inputNode?.name).join(", ");u||(u="<none>"),console.log(`${i.name}:
 - links to:   ${c}
 - links from: ${u}`)})};function o(m){return m.length>0&&typeof m[0]=="string"}},94954:(Y,I,e)=>{"use strict";e.d(I,{q:()=>n});var t=e(17172);function n(r){if(typeof r=="string")return r;if(r){if(r instanceof Error)return r.message;if((0,t.NF)(r)){if(r.data&&r.data.message)return r.data.message;if(r.statusText)return r.statusText}}return JSON.stringify(r)}},87490:(Y,I,e)=>{"use strict";e.d(I,{HQ:()=>g,Ll:()=>p,MA:()=>O,WP:()=>h,Xe:()=>C,_u:()=>w,bI:()=>T,dY:()=>U,di:()=>A,dr:()=>b,eF:()=>x,o$:()=>P,uE:()=>K,uJ:()=>V,uq:()=>D,w4:()=>M,zT:()=>B,zq:()=>F});var t=e(44329),n=e(62938),r=e(52622),s=e(76885),o=e(41987),m=e(43127),l=e(65879),i=e(19347),c=e(11134),u=e(33390),f=e(66718),d=e(21969);const E={dedupStrategy:r.fY.none},h="0123456789abcdefghijklmnopqrstuvwxyz",y=(0,t.d_)(h,3),a="grafana.explore.datasource",v=N=>`${a}.${N}`,g=N=>u.A.getObject(v(N)),b=(N,z)=>u.A.setObject(v(N),z);function P(){for(;;){const N=y(3);if(!/^\d+$/.test(N))return N}}async function C(N){const{queries:z,dsRef:J,timeRange:G,scopedVars:H,adhocFilters:q}=N,le=(await Promise.allSettled(z.filter(k=>k.datasource?.uid!==f.Uj).map(async k=>{const ee=await(0,i.l)().get(k.datasource||J);return{...ee.interpolateVariablesInQueries?.([k],H??{},q)[0]||k,...!ee.meta.mixed&&{datasource:ee.getRef()}}}))).filter(k=>k.status==="fulfilled").map(k=>k.value),me=JSON.stringify({[P()]:{range:(0,s.sQ)(G.raw),queries:le,datasource:J?.uid}});return s.kM.renderUrl("/explore",{panes:me,schemaVersion:1})}function D(N){return`explore_${N}`}function T(N,z,J,G,H,q,le){const me=Number.parseInt(N,36),{interval:k,intervalMs:ee}=L(G,J.minInterval,J.maxDataPoints),X={app:o.Jk.Explore,timezone:q||m.lE,startTime:Date.now(),interval:k,intervalMs:ee,panelId:me,targets:z,range:G,requestId:D(N),rangeRaw:G.raw,scopedVars:{__interval:{text:k,value:k},__interval_ms:{text:ee,value:ee},...le},maxDataPoints:J.maxDataPoints,liveStreaming:J.liveStreaming};return{queries:z,request:X,scanning:H,id:S(),done:!1}}const M=({key:N,...z})=>z,O=(N,z)=>{if(N==null)return"";try{return JSON.stringify(N,null,z)}catch(J){console.error(J)}return""};function S(N=0){return`Q-${(0,n.A)()}-${N}`}async function p(N,z=0,J){let G,H,q;return J?H=J:N.length>0&&N[N.length-1].datasource?H=N[N.length-1].datasource:(G=await(0,i.l)().get(),q=G.getDefaultQuery?.(o.Jk.Explore),H=G.getRef()),G||(G=await(0,i.l)().get(H),q=G.getDefaultQuery?.(o.Jk.Explore)),{...q,refId:(0,d.W3)(N),key:S(z),datasource:H}}const x=(N,z,J=0)=>{const G=S(J),H=N.refId||(0,d.W3)(z);return{...N,refId:H,key:G}};async function A(N,z){if(N&&typeof N=="object"&&N.length>0){const J=[];for(let G=0;G<N.length;G++){const H=N[G],q=S(G);let le=H.refId;le||(le=(0,d.W3)(J));let me=!0;if(H.datasource)try{await(0,i.l)().get(H.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),me=!1}me&&J.push({...H,refId:le,key:q})}return J}try{const J=z??(await(0,i.l)().get()).getRef();return[await p(N??[],void 0,J)]}catch{return[]}}const R=["refId","key","context","datasource"];function B(N){return N&&N.some(z=>Object.entries(z).filter(([G,H])=>R.indexOf(G)===-1).filter(([G,H])=>H).length>0)}const U=N=>N.reduce((J,G,H)=>{const q=G.datasource?.uid||G.key;return J.concat(`${q}-${H}`)},[]),F=(N,z,J)=>l.convertRawToRange(z,N,J),K=N=>c.cC.isLive(N)?r.uH.Ascending:r.uH.Descending,w=N=>{N&&N.unsubscribe()};function L(N,z,J){return J?l.calculateInterval(N,J,z):{interval:"1s",intervalMs:1e3}}const V=N=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(N);else{const z=document.createElement("textarea");z.value=N,document.body.appendChild(z),z.select(),document.execCommand("copy"),document.body.removeChild(z)}}},78827:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{default:()=>t});function t(n,r){r=r||{};const s=r.delimiter||".";let o=r.maxDepth||3,m=1;const l={};function i(c,u){Object.keys(c).forEach(f=>{const d=c[f],E=r?.safe&&Array.isArray(d),y=Object.prototype.toString.call(d)==="[object Object]",a=u?u+s+f:f;if(r?.maxDepth||(o=m+1),!E&&y&&Object.keys(d).length&&m<o)return++m,i(d,a);l[a]=d})}return i(n,null),l}},68576:(Y,I,e)=>{"use strict";e.d(I,{A:()=>l});var t=e(95344),n=e(54479),r=e(65879),s=e(83195);const m={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:i=>((0,t.l)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.$f)(i)),roundInterval:i=>((0,t.l)("kbn.ts","kbn.roundInterval()","@grafana/data"),r.roundInterval(i)),secondsToHms:i=>((0,t.l)("kbn.ts","kbn.secondsToHms()","@grafana/data"),r.secondsToHms(i)),secondsToHhmmss:i=>{const c=[],u=Math.floor(i/3600),f=Math.floor(i%3600/60),d=Math.floor(i%3600%60);return u>9?c.push(""+u):c.push("0"+u),f>9?c.push(""+f):c.push("0"+f),d>9?c.push(""+d):c.push("0"+d),c.join(":")},toPercent:(i,c)=>Math.floor(i/c*1e4)/100+"%",addSlashes:i=>i.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:i=>((0,t.l)("kbn.ts","kbn.describeInterval()","@grafana/data"),r.describeInterval(i)),intervalToSeconds:i=>((0,t.l)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),r.intervalToSeconds(i)),intervalToMs:i=>((0,t.l)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),r.intervalToMs(i)),calculateInterval:(i,c,u)=>((0,t.l)("kbn.ts","kbn.calculateInterval()","@grafana/data"),r.calculateInterval(i,c,u)),queryColorDot:(i,c)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+i,"font-size:"+c+"px"].join(";")+'"></div>',slugifyForUrl:i=>i.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:i=>((0,t.l)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.dO)(i)),toFixed:(i,c)=>{if(i===null)return"";const u=c?Math.pow(10,Math.max(0,c)):1,f=String(Math.round(i*u)/u);if(f.indexOf("e")!==-1||i===0)return f;if(c!=null){const d=f.indexOf("."),E=d===-1?0:f.length-d-1;if(E<c)return(E?f:f+".")+String(u).slice(1,c-E+1)}return f},toFixedScaled:(i,c,u,f,d)=>u===null?m.toFixed(i,c)+d:m.toFixed(i,u+f)+d,roundValue:(i,c)=>{if(i===null)return null;const u=Math.pow(10,c),f=(u*i).toFixed(c);return Math.round(parseFloat(f))/u},getUnitFormats:s.Ke};typeof Proxy<"u"?m.valueFormats=new Proxy(m.valueFormats,{get(i,c,u){if(typeof c!="string")throw{message:`Value format ${String(c)} is not a string`};const f=(0,s.j_)(c);return f?(d,E,h,y)=>(0,s.cN)(f(d,E,h,y?"utc":"browser")):Reflect.get(i,c,u)}}):m.valueFormats=(0,s.uH)();const l=m},78160:(Y,I,e)=>{"use strict";e.d(I,{j:()=>n,z:()=>r});var t=e(42614);function n(s){if(!(!performance||!performance.mark))try{performance.mark(`${s}_started`)}catch(o){console.error(`[Metrics] Failed to startMeasure ${s}`,o)}}function r(s){if(!(!performance||!performance.mark))try{const o=`${s}_started`,m=`${s}_completed`,l=`${s}_measured`;performance.mark(m);const i=performance.measure(l,o,m);return(0,t.n)(`${s}_ms`,i.duration),performance.clearMarks(o),performance.clearMarks(m),performance.clearMeasures(l),i}catch(o){console.error(`[Metrics] Failed to stopMeasure ${s}`,o);return}}},36689:(Y,I,e)=>{"use strict";e.d(I,{C:()=>n,o:()=>r});var t=e(44836);function n(s){switch(s){case"home":return(0,t.t)("nav.home.title","Home");case"new":return(0,t.t)("nav.new.title","New");case"create":return(0,t.t)("nav.create.title","Create");case"create-dashboard":return(0,t.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,t.t)("nav.create-folder.title","Folder");case"import":return(0,t.t)("nav.create-import.title","Import dashboard");case"alert":return(0,t.t)("nav.create-alert.title","New alert rule");case"starred":return(0,t.t)("nav.starred.title","Starred");case"starred-empty":return(0,t.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,t.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.title","Library panels");case"reports":return(0,t.t)("nav.reporting.title","Reporting");case"dashboards/public":return(0,t.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,t.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,t.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,t.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,t.t)("nav.scenes.title","Scenes");case"explore":return(0,t.t)("nav.explore.title","Explore");case"alerting":return(0,t.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,t.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,t.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alerting-upgrade":return(0,t.t)("nav.alerting-upgrade.title","Alerting upgrade");case"alert-home":return(0,t.t)("nav.alerting-home.title","Home");case"alert-list":return(0,t.t)("nav.alerting-list.title","Alert rules");case"alert-list-legacy":return(0,t.t)("nav.alert-list-legacy.title","Alert rules");case"receivers":return(0,t.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,t.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,t.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,t.t)("nav.alerting-silences.title","Silences");case"groups":return(0,t.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,t.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,t.t)("nav.config.title","Administration");case"cfg/general":return(0,t.t)("nav.config-general.title","General");case"cfg/plugins":return(0,t.t)("nav.config-plugins.title","Plugins and data");case"cfg/access":return(0,t.t)("nav.config-access.title","Users and access");case"datasources":return(0,t.t)("nav.datasources.title","Data sources");case"authentication":return(0,t.t)("nav.authentication.title","Authentication");case"licensing":return(0,t.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,t.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,t.t)("nav.correlations.title","Correlations");case"users":return(0,t.t)("nav.users.title","Users");case"teams":return(0,t.t)("nav.teams.title","Teams");case"plugins":return(0,t.t)("nav.plugins.title","Plugins");case"org-settings":return(0,t.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,t.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,t.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,t.t)("nav.admin.title","Server admin");case"support-bundles":return(0,t.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,t.t)("nav.global-users.title","Users");case"global-orgs":return(0,t.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,t.t)("nav.server-settings.title","Settings");case"storage":return(0,t.t)("nav.storage.title","Storage");case"migrate-to-cloud":return(0,t.t)("nav.migrate-to-cloud.title","Migrate to Grafana Cloud");case"upgrading":return(0,t.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,t.t)("nav.monitoring.title","Observability");case"infrastructure":return(0,t.t)("nav.infrastructure.title","Infrastructure");case"frontend":return(0,t.t)("nav.frontend.title","Frontend");case"apps":return(0,t.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"testing-and-synthetics":return(0,t.t)("nav.testing-and-synthetics.title","Testing & synthetics");case"plugin-page-grafana-incident-app":return(0,t.t)("nav.incidents.title","Incidents");case"plugin-page-grafana-ml-app":return(0,t.t)("nav.machine-learning.title","Machine learning");case"plugin-page-grafana-slo-app":return(0,t.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return(0,t.t)("nav.k6.title","Performance");case"monitoring":return(0,t.t)("nav.observability.title","Observability");case"plugin-page-grafana-k8s-app":return(0,t.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-app-observability-app":return(0,t.t)("nav.application.title","Application");case"plugin-page-grafana-pyroscope-app":return(0,t.t)("nav.profiles.title","Profiles");case"plugin-page-grafana-kowalski-app":return(0,t.t)("nav.frontend-app.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,t.t)("nav.synthetics.title","Synthetics");case"help":return(0,t.t)("nav.help.title","Help");case"profile/settings":return(0,t.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,t.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,t.t)("nav.profile/password.title","Change password");case"sign-out":return(0,t.t)("nav.sign-out.title","Sign out");case"search":return(0,t.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,t.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,t.t)("nav.add-new-connections.title","Add new connection");case"standalone-plugin-page-/connections/collector":return(0,t.t)("nav.collector.title","Collector");case"connections-datasources":return(0,t.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,t.t)("nav.integrations.title","Integrations");case"standalone-plugin-page-/connections/connect-data":return(0,t.t)("nav.connect-data.title","Connect data");case"standalone-plugin-page-/connections/private-data-source-connections":return(0,t.t)("nav.private-data-source-connections.title","Private data source connect");case"plugin-page-grafana-detect-app":return(0,t.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,t.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function r(s){switch(s){case"dashboards":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,t.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,t.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,t.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alerting-upgrade":return(0,t.t)("nav.alerting-upgrade.subtitle","Upgrade your existing legacy alerts and notification channels to the new Grafana Alerting");case"alert-list":return(0,t.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,t.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,t.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,t.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,t.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,t.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,t.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,t.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,t.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,t.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,t.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,t.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,t.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,t.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,t.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,t.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,t.t)("nav.storage.subtitle","Manage file storage");case"migrate-to-cloud":return(0,t.t)("nav.migrate-to-cloud.subtitle","Copy configuration from your self-managed installation to a cloud stack");case"support-bundles":return(0,t.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,t.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"cfg/general":return(0,t.t)("nav.config-general.subtitle","Manage default preferences and settings across Grafana");case"cfg/plugins":return(0,t.t)("nav.config-plugins.subtitle","Install plugins and define the relationships between data");case"cfg/access":return(0,t.t)("nav.config-access.subtitle","Configure access for individual users, teams, and service accounts");case"apps":return(0,t.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,t.t)("nav.monitoring.subtitle","Out-of-the-box observability solutions");case"infrastructure":return(0,t.t)("nav.infrastructure.subtitle","Understand your infrastructure's health");case"frontend":return(0,t.t)("nav.frontend.subtitle","Gain real user monitoring insights");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"testing-and-synthetics":return(0,t.t)("nav.testing-and-synthetics.subtitle","Optimize performance with k6 and Synthetic Monitoring insights");case"connections-add-new-connection":return(0,t.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,t.t)("nav.data-sources.subtitle","View and manage your connected data source connections");case"connections-private-data-source-connections":return(0,t.t)("nav.private-data-source-connections.subtitle","Query data that lives within a secured network without opening the network to inbound traffic from Grafana Cloud. Learn more in our docs.");default:return}}},28874:(Y,I,e)=>{"use strict";e.d(I,{v:()=>r});var t=e(2543),n=e.n(t);function r(s){return(0,t.isArray)(s)?s.map(r):(0,t.isPlainObject)(s)?Object.keys(s).sort().reduce((o,m)=>{const l=s[m];return l!=null&&(o[m]=r(l)),o},{}):s}},21969:(Y,I,e)=>{"use strict";e.d(I,{Ih:()=>n,Lr:()=>o,U7:()=>r,W3:()=>t,dr:()=>s,fE:()=>l});const t=i=>{for(let c=0;;c++){const u=m(c);if(!i.some(f=>f.refId===u))return u}};function n(i){const c=["refId","hide","key","queryType","datasource"];for(const u in i)if(u!=="label"&&!c.includes(u))return!1;return!0}function r(i,c,u){const f={...c,refId:t(i),hide:!1};return!f.datasource&&u&&(f.datasource=u),[...i,f]}function s(i){return i.indexOf("api/datasources/proxy")!==-1||i.indexOf("api/ds/query")!==-1}function o(i){return!i.match(/^http/)}function m(i){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return i<c.length?c[i]:m(Math.floor(i/c.length)-1)+c[i%c.length]}function l(i){return i||void 0}},81523:(Y,I,e)=>{"use strict";e.d(I,{Ax:()=>S,DI:()=>h,Gx:()=>a,IA:()=>D,NC:()=>P,TR:()=>x,U3:()=>C,X1:()=>v,cX:()=>b,l0:()=>E,oU:()=>g,rs:()=>y,x8:()=>p,xB:()=>d.x});var t=e(2543),n=e.n(t),r=e(76885),s=e(72724),o=e(19347),m=e(82467),l=e(3169),i=e(44836),c=e(99140),u=e(38877),f=e(11401),d=e(91650);async function E(R){const{queries:B,localOverride:U,datasource:F,starred:K,comment:w,showNotif:L}=R,V=L?.quotaExceededError??!0,N=L?.limitExceededWarning??!0,z=L?.otherErrors??!0,J=B&&B.filter(G=>A(G));if(J.length>0){let G=!1,H=!1,q;try{q=(await(U?(0,f.tU)():(0,f.a)()).addToRichHistory({datasourceUid:F.uid,datasourceName:F.name??"",queries:J,starred:K,comment:w??""})).warning}catch(le){return le instanceof Error&&(le.name===u.m.StorageFull?(G=!0,V&&(0,c.JD)((0,m.dx)((0,l.gi)(le.message)))):z&&le.name!==u.m.DuplicatedEntry&&(0,c.JD)((0,m.dx)((0,l.gi)((0,i.t)("explore.rich-history-utils-notification.update-failed","Rich History update failed"),le.message)))),{richHistoryStorageFull:G,limitExceeded:H}}return q&&q.type===u.C.LimitExceeded&&(H=!0,N&&(0,c.JD)((0,m.dx)((0,l.q8)(q.message)))),{richHistoryStorageFull:G,limitExceeded:H}}return{}}async function h(R){return await(0,f.a)().getRichHistory(R)}async function y(R){await(0,f.a)().updateSettings(R)}async function a(){return await(0,f.a)().getSettings()}async function v(){return(0,f.a)().deleteAll()}async function g(R,B){try{return await(0,f.a)().updateStarred(R,B)}catch(U){U instanceof Error&&(0,c.JD)((0,m.dx)((0,l.gi)((0,i.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),U.message)));return}}async function b(R,B){try{return await(0,f.a)().updateComment(R,B)}catch(U){U instanceof Error&&(0,c.JD)((0,m.dx)((0,l.gi)((0,i.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),U.message)));return}}async function P(R){try{return await(0,f.a)().deleteRichHistory(R),R}catch(B){B instanceof Error&&(0,c.JD)((0,m.dx)((0,l.gi)((0,i.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),B.message)));return}}const C=R=>{const B={range:{from:(0,i.t)("explore.rich-history-utils.default-from","now-1h"),to:(0,i.t)("explore.rich-history-utils.default-to","now")},datasource:R.datasourceName,queries:R.queries},U=(0,r.Pp)(B),F=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return r.kM.renderUrl(`${F}/explore`,{left:U})},D=R=>{let B;switch(R){case 0:B=(0,i.t)("explore.rich-history-utils.today","today");break;case 1:B=(0,i.t)("explore.rich-history-utils.yesterday","yesterday");break;case 7:B=(0,i.t)("explore.rich-history-utils.a-week-ago","a week ago");break;case 14:B=(0,i.t)("explore.rich-history-utils.two-weeks-ago","two weeks ago");break;default:B=(0,i.t)("explore.rich-history-utils.days-ago","{{num}} days ago",{num:`${R}`})}return B};function T(R){return(0,s.LE)(R,{format:"MMMM D"})}function M(R){const B=(0,t.omit)(R,["key","refId","datasource"]);return JSON.stringify(B)}function O(R,B){let U="";return B===d.x.DatasourceAZ||B===d.x.DatasourceZA?U=R.datasourceName:U=T(R.createdAt),U}function S(R,B){return B?.getQueryDisplayText?B.getQueryDisplayText(R):M(R)}function p(R,B){let U={};return R.forEach(F=>{let K=O(F,B);K in U?U[K]=[...U[K],F]:U[K]=[F]}),U}function x(){return(0,o.l)().getList({mixed:!0}).map(R=>({name:R.name,uid:R.uid}))}function A(R){const B=(0,t.omit)(R,["key","refId","datasource"]);return Object.keys(B).length>0}},91650:(Y,I,e)=>{"use strict";e.d(I,{x:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},7030:(Y,I,e)=>{"use strict";e.d(I,{V:()=>f,f:()=>u});var t=e(41811),n=e(32264),r=e(17172),s=e(82467),o=e(3169),m=e(99140),l=e(87490);function i(){return`${window.location.protocol}//${window.location.host}${n.$.appSubUrl}`}function c(d){let E=d.replace(i(),"");return E.startsWith("/")?E.substring(1,E.length):E}const u=(0,t.A)(async function(d){try{return(await(0,r.AI)().post("/api/short-urls",{path:c(d)})).url}catch(E){console.error("Error when creating shortened link: ",E),(0,m.JD)((0,s.dx)((0,o.gi)("Error generating shortened link")))}}),f=async d=>{const E=await u(d);E?((0,l.uJ)(E),(0,m.JD)((0,s.dx)((0,o.tZ)("Shortened link copied to clipboard")))):(0,m.JD)((0,s.dx)((0,o.gi)("Error generating shortened link")))}},92247:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{getPrecision:()=>o,getScaledDecimals:()=>n,getStringPrecision:()=>m,grafanaTimeFormat:()=>r,logp:()=>s,tickStep:()=>t});function t(l,i,c){const u=Math.sqrt(50),f=Math.sqrt(10),d=Math.sqrt(2),E=Math.abs(i-l)/Math.max(0,c);let h=Math.pow(10,Math.floor(Math.log(E)/Math.LN10));const y=E/h;return y>=u?h*=10:y>=f?h*=5:y>=d&&(h*=2),i<l?-h:h}function n(l,i){return l-Math.floor(Math.log(i)/Math.LN10)}function r(l,i,c){if(i&&c&&l){const u=c-i,f=u/l/1e3,d=864e5,E=31536e6;return f<=45?"HH:mm:ss":f<=7200||u<=d?"HH:mm":f<=8e4?"MM/DD HH:mm":f<=2419200||u<=E?"MM/DD":"YYYY-MM"}return"HH:mm"}function s(l,i){return Math.log(l)/Math.log(i)}function o(l){const i=l.toString();return m(i)}function m(l){if(isNaN(l))return 0;const i=l.indexOf(".");return i===-1?0:l.length-i-1}},80582:(Y,I,e)=>{"use strict";e.d(I,{Wb:()=>n,Zk:()=>r,zG:()=>s});var t=e(47232);const n=(o,m)=>{const l={from:(0,t.yT)(m.from),to:(0,t.yT)(m.to)},i=(l.to.valueOf()-l.from.valueOf())/2;let c,u;return o===-1?(c=l.to.valueOf()-i,u=l.from.valueOf()-i):o===1?(c=l.to.valueOf()+i,u=l.from.valueOf()+i,c>Date.now()&&l.to.valueOf()<Date.now()&&(c=Date.now(),u=l.from.valueOf())):(c=l.to.valueOf(),u=l.from.valueOf()),{from:u,to:c}},r=(o,m)=>{const l=o.to.valueOf()-o.from.valueOf(),i=o.to.valueOf()-l/2,c=l===0?3e4:l*m,u=i+c/2;return{from:i-c/2,to:u}};async function s(){const o=await navigator.clipboard.readText();let m;try{return m=JSON.parse(o),!m.from||!m.to?{range:o,isError:!0}:{range:m,isError:!1}}catch{return{range:o,isError:!0}}}},94515:(Y,I,e)=>{"use strict";e.d(I,{iU:()=>n});var t=e(47232);function n(o,m){if(!(o.fromDayOfWeek||o.from)&&!(o.toDayOfWeek||o.to))return[];const l={...o};l.from&&!l.to&&(l.to=l.from),!l.from&&l.to&&(l.from=l.to);const i={from:r(l.from),to:r(l.to)};if(!l.fromDayOfWeek&&l.toDayOfWeek&&(l.fromDayOfWeek=l.toDayOfWeek),!l.toDayOfWeek&&l.fromDayOfWeek&&(l.toDayOfWeek=l.fromDayOfWeek),l.fromDayOfWeek&&(i.from.dayOfWeek=Number(l.fromDayOfWeek)),l.toDayOfWeek&&(i.to.dayOfWeek=Number(l.toDayOfWeek)),i.from.dayOfWeek&&i.from.h==null&&i.from.m==null&&(i.from.h=0,i.from.m=0,i.from.s=0),i.to.dayOfWeek&&i.to.h==null&&i.to.m==null&&(i.to.h=23,i.to.m=59,i.to.s=59),!i.from||!i.to)return[];i.from.h==null&&(i.from.h=0),i.to.h==null&&(i.to.h=23);const c=[],u=(0,t.KQ)(m.from).utc();for(u.set("hour",0),u.set("minute",0),u.set("second",0),u.set("millisecond",0),u.add(i.from.h,"hours"),u.add(i.from.m,"minutes"),u.add(i.from.s,"seconds");u.unix()<=m.to.unix();){for(;i.from.dayOfWeek&&i.from.dayOfWeek!==u.isoWeekday();)u.add(24,"hours");if(u.unix()>m.to.unix())break;const f=(0,t.KQ)(u).utc();if(f.hour)if(i.from.h<=i.to.h)f.add(i.to.h-i.from.h,"hours");else if(i.from.h>i.to.h)for(;f.hour()!==i.to.h;)f.add(1,"hours");else for(f.add(24-i.from.h,"hours");f.hour()!==i.to.h;)f.add(1,"hours");for(f.set("minute",i.to.m??0),f.set("second",i.to.s??0);i.to.dayOfWeek&&i.to.dayOfWeek!==f.isoWeekday();)f.add(24,"hours");u.unix()<m.from.unix()&&f.unix()<m.from.unix()||u.unix()>m.to.unix()&&f.unix()>m.to.unix()||c.push({from:u.valueOf(),to:f.valueOf()}),u.add(24,"hours")}return c}function r(o){const m={};if(!o?.length)return m;const l=o.split(":");return l?.length&&(m.h=Math.min(23,Math.max(0,Number(l[0]))),l.length>1&&(m.m=Math.min(60,Math.max(0,Number(l[1]))),l.length>2&&(m.s=Math.min(60,Math.max(0,Number(l[2])))))),m}function s(o){if(!o||o.h==null&&o.m==null&&o.s==null)return"";let m=String(o.h??0).padStart(2,"0")+":"+String(o.m??0).padStart(2,"0");return o.s!=null&&(m+=String(o.s??0).padStart(2,"0")),m}},67027:(Y,I,e)=>{"use strict";e.d(I,{r:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},5133:(Y,I,e)=>{"use strict";e.d(I,{r:()=>m});var t=e(96540),n=e(62625),r=e(88323);const o=Object.values(n.X).filter(l=>l!==n.X.None).map(l=>({label:l,value:l}));function m({value:l,onChange:i,"aria-label":c,inputId:u,autoFocus:f,...d}){return t.createElement(r.l6,{inputId:u,value:l,options:o,onChange:E=>i(E.value),placeholder:"Choose role...","aria-label":c,autoFocus:f,...d})}},57334:(Y,I,e)=>{"use strict";e.d(I,{$u:()=>V,A5:()=>q,Bc:()=>le,DX:()=>B,JI:()=>A,Jc:()=>U,Kg:()=>R,MV:()=>a,N6:()=>b,P3:()=>D,Pi:()=>T,T$:()=>O,TK:()=>h,VR:()=>S,Vk:()=>z,hG:()=>g,hU:()=>K,is:()=>me,kz:()=>d,ly:()=>y,mI:()=>x,nM:()=>L,nh:()=>C,nr:()=>v,pm:()=>p,xq:()=>G,yd:()=>N});var t=e(2543),n=e.n(t),r=e(72724),s=e(33378),o=e(17172),m=e(12131),l=e(2913),i=e(10096),c=e(80714),u=e(31678),f=e(44672);function d(k){return async ee=>{try{ee((0,f.D1)(!1)),await ee(E(k)),await ee(P(k)),await ee(M(k)),l.Ay.ldapEnabled&&(0,s.a)("ldapsync")&&await ee(p()),ee((0,f.D1)(!0))}catch(X){if(console.error(X),(0,o.NF)(X)){const j={title:X.data.message,body:X.data.error};ee((0,f.PV)(j))}}}}function E(k){return async ee=>{const X=await(0,o.AI)().get(`/api/users/${k}`,(0,c.F)());ee((0,f.G_)(X))}}function h(k){return async ee=>{await(0,o.AI)().put(`/api/users/${k.id}`,k),ee(d(k.id))}}function y(k,ee){return async X=>{const j={password:ee};await(0,o.AI)().put(`/api/admin/users/${k}/password`,j),X(d(k))}}function a(k){return async ee=>{await(0,o.AI)().post(`/api/admin/users/${k}/disable`),m.Ny.push("/admin/users")}}function v(k){return async ee=>{await(0,o.AI)().post(`/api/admin/users/${k}/enable`),ee(d(k))}}function g(k){return async ee=>{await(0,o.AI)().delete(`/api/admin/users/${k}`),m.Ny.push("/admin/users")}}function b(k,ee){return async X=>{const j={isGrafanaAdmin:ee};await(0,o.AI)().put(`/api/admin/users/${k}/permissions`,j),X(d(k))}}function P(k){return async ee=>{const X=await(0,o.AI)().get(`/api/users/${k}/orgs`);ee((0,f.OF)(X))}}function C(k,ee,X){return async j=>{const ne={loginOrEmail:k.login,role:X};await(0,o.AI)().post(`/api/orgs/${ee}/users/`,ne),j(d(k.id))}}function D(k,ee,X){return async j=>{const ne={role:X};await(0,o.AI)().patch(`/api/orgs/${ee}/users/${k}`,ne),j(d(k))}}function T(k,ee){return async X=>{await(0,o.AI)().delete(`/api/orgs/${ee}/users/${k}`),X(d(k))}}function M(k){return async ee=>{if(!i.TP.hasPermission(u.AccessControlAction.UsersAuthTokenList))return;const X=await(0,o.AI)().get(`/api/admin/users/${k}/auth-tokens`);X.reverse();const j=X.map(ne=>({id:ne.id,isActive:ne.isActive,seenAt:(0,r.fq)(ne.seenAt),createdAt:ne.createdAt,clientIp:ne.clientIp,browser:ne.browser,browserVersion:ne.browserVersion,os:ne.os,osVersion:ne.osVersion,device:ne.device}));ee((0,f.ag)(j))}}function O(k,ee){return async X=>{const j={authTokenId:k};await(0,o.AI)().post(`/api/admin/users/${ee}/revoke-auth-token`,j),X(M(ee))}}function S(k){return async ee=>{await(0,o.AI)().post(`/api/admin/users/${k}/logout`),ee(M(k))}}function p(){return async k=>{const ee=i.TP.hasPermission(u.AccessControlAction.LDAPStatusRead);if((0,s.a)("ldapsync")&&ee){const X=await(0,o.AI)().get("/api/admin/ldap-sync-status");k((0,f.OR)(X))}}}function x(k){return async ee=>{await(0,o.AI)().post(`/api/admin/ldap/sync/${k}`),ee(d(k))}}function A(){return async k=>{if(i.TP.hasPermission(u.AccessControlAction.LDAPStatusRead))try{const ee=await(0,o.AI)().get("/api/admin/ldap/status");k((0,f.pH)(ee))}catch(ee){if((0,o.NF)(ee)){ee.isHandled=!0;const X={title:ee.data.message,body:ee.data.error};k((0,f.V$)(X))}}}}function R(k){return async ee=>{try{const X=await(0,o.AI)().get(`/api/admin/ldap/${encodeURIComponent(k)}`),{name:j,surname:ne,email:te,login:oe,isGrafanaAdmin:ie,isDisabled:ue,roles:be,teams:ge}=X,re={info:{name:j,surname:ne,email:te,login:oe},permissions:{isGrafanaAdmin:ie,isDisabled:ue},roles:be,teams:ge};ee((0,f.TW)(re))}catch(X){if((0,o.NF)(X)){X.isHandled=!0;const j={title:X.data.message,body:X.data.error};ee((0,f.Vv)()),ee((0,f.Nf)(j))}}}}function B(){return k=>{k((0,f.zi)())}}function U(){return k=>{k((0,f.zi)()),k((0,f.Vv)())}}const F=k=>k.map(ee=>Array.isArray(ee.value)?ee.value.map(X=>`${ee.name}=${X.value}`).join("&"):`${ee.name}=${ee.value}`).join("&");function K(){return async(k,ee)=>{try{const{perPage:X,page:j,query:ne,filters:te,sort:oe}=ee().userListAdmin;let ie=`/api/users/search?perpage=${X}&page=${j}&query=${ne}&${F(te)}`;oe&&(ie+=`&sort=${oe}`);const ue=await(0,o.AI)().get(ie);k((0,f.Mb)(ue))}catch(X){(0,f.g4)(),console.error(X)}}}const w=(0,t.debounce)(k=>k(K()),500);function L(k){return async ee=>{ee((0,f.Cj)()),ee((0,f.L5)(k)),w(ee)}}function V(k){return async ee=>{ee((0,f.Cj)()),ee((0,f.jX)(k)),w(ee)}}function N(k){return async ee=>{ee((0,f.Cj)()),ee((0,f.EC)(k)),ee(K())}}function z({sortBy:k}){const ee=k.length?`${k[0].id}-${k[0].desc?"desc":"asc"}`:void 0;return async(X,j)=>{j().userListAdmin.sort!==ee&&(X((0,f.Cj)()),X((0,f.$u)(ee)),X(K()))}}const J=k=>k.map(ee=>Array.isArray(ee.value)?ee.value.map(X=>`${ee.name}=${X.value}`).join("&"):`${ee.name}=${ee.value}`).join("&");function G(){return async(k,ee)=>{try{const{perPage:X,page:j,query:ne,filters:te,sort:oe}=ee().userListAnonymousDevices;let ie=`/api/anonymous/search?perpage=${X}&page=${j}&query=${ne}&${J(te)}`;oe&&(ie+=`&sort=${oe}`);const ue=await(0,o.AI)().get(ie);k((0,f.o3)(ue))}catch(X){console.error(X)}}}const H=(0,t.debounce)(k=>k(G()),500);function q({sortBy:k}){const ee=k.length?`${k[0].id}-${k[0].desc?"desc":"asc"}`:void 0;return async(X,j)=>{j().userListAnonymousDevices.sort!==ee&&(X((0,f.kh)(ee)),X(G()))}}function le(k){return async ee=>{ee((0,f.xx)(k)),H(ee)}}function me(k){return async ee=>{ee((0,f.iK)(k)),ee(G())}}},44672:(Y,I,e)=>{"use strict";e.d(I,{$u:()=>x,Ay:()=>V,Cj:()=>T,D1:()=>v,EC:()=>S,G_:()=>h,L5:()=>O,Mb:()=>D,Nf:()=>c,OF:()=>y,OR:()=>i,PV:()=>g,TW:()=>u,V$:()=>l,Vv:()=>o,ag:()=>a,g4:()=>M,iK:()=>K,jX:()=>p,kh:()=>F,o3:()=>U,pH:()=>m,xx:()=>w,zi:()=>s});var t=e(30038);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},r=(0,t.Z0)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(N,z)=>({...N,ldapError:void 0,connectionInfo:z.payload}),ldapFailedAction:(N,z)=>({...N,ldapError:z.payload}),ldapSyncStatusLoadedAction:(N,z)=>({...N,syncInfo:z.payload}),userMappingInfoLoadedAction:(N,z)=>({...N,user:z.payload,userError:void 0}),userMappingInfoFailedAction:(N,z)=>({...N,user:void 0,userError:z.payload}),clearUserMappingInfoAction:(N,z)=>({...N,user:void 0}),clearUserErrorAction:(N,z)=>({...N,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:o,ldapConnectionInfoLoadedAction:m,ldapFailedAction:l,ldapSyncStatusLoadedAction:i,userMappingInfoFailedAction:c,userMappingInfoLoadedAction:u}=r.actions,f=r.reducer,d={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},E=(0,t.Z0)({name:"userAdmin",initialState:d,reducers:{userProfileLoadedAction:(N,z)=>({...N,user:z.payload}),userOrgsLoadedAction:(N,z)=>({...N,orgs:z.payload}),userSessionsLoadedAction:(N,z)=>({...N,sessions:z.payload}),userAdminPageLoadedAction:(N,z)=>({...N,isLoading:!z.payload}),userAdminPageFailedAction:(N,z)=>({...N,error:z.payload,isLoading:!1})}}),{userProfileLoadedAction:h,userOrgsLoadedAction:y,userSessionsLoadedAction:a,userAdminPageLoadedAction:v,userAdminPageFailedAction:g}=E.actions,b=E.reducer,P={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!0},C=(0,t.Z0)({name:"userListAdmin",initialState:P,reducers:{usersFetched:(N,z)=>{const{totalCount:J,perPage:G,...H}=z.payload,q=Math.ceil(J/G);return{...N,...H,totalPages:q,perPage:G,showPaging:q>1,isLoading:!1}},usersFetchBegin:N=>({...N,isLoading:!0}),usersFetchEnd:N=>({...N,isLoading:!1}),queryChanged:(N,z)=>({...N,query:z.payload,page:0}),pageChanged:(N,z)=>({...N,page:z.payload}),sortChanged:(N,z)=>({...N,page:0,sort:z.payload}),filterChanged:(N,z)=>{const{name:J,value:G}=z.payload;return N.filters.some(H=>H.name===J)?{...N,page:0,filters:N.filters.map(H=>H.name===J?{...H,value:G}:H)}:{...N,page:0,filters:[...N.filters,z.payload]}}}}),{usersFetched:D,usersFetchBegin:T,usersFetchEnd:M,queryChanged:O,pageChanged:S,filterChanged:p,sortChanged:x}=C.actions,A=C.reducer,R={devices:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!0}]},B=(0,t.Z0)({name:"userListAnonymousDevices",initialState:R,reducers:{usersAnonymousDevicesFetched:(N,z)=>{const{totalCount:J,perPage:G,...H}=z.payload,q=Math.ceil(J/G);return{...N,...H,totalPages:q,perPage:G,showPaging:q>1}},anonQueryChanged:(N,z)=>({...N,query:z.payload,page:0}),anonPageChanged:(N,z)=>({...N,page:z.payload}),anonUserSortChanged:(N,z)=>({...N,page:0,sort:z.payload}),filterChanged:(N,z)=>{const{name:J,value:G}=z.payload;return N.filters.some(H=>H.name===J)?{...N,page:0,filters:N.filters.map(H=>H.name===J?{...H,value:G}:H)}:{...N,page:0,filters:[...N.filters,z.payload]}}}}),{usersAnonymousDevicesFetched:U,anonUserSortChanged:F,anonPageChanged:K,anonQueryChanged:w}=B.actions,L=B.reducer,V={ldap:f,userAdmin:b,userListAdmin:A,userListAnonymousDevices:L}},35538:(Y,I,e)=>{"use strict";e.d(I,{pL:()=>n,z5:()=>s});var t=e(32264);const n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function r(){const o=t.$.licenseInfo?.trialExpiry;return!!(o&&o>0)}const s=()=>r()&&t.$.featureToggles.featureHighlights},55907:(Y,I,e)=>{"use strict";e.d(I,{A:()=>b,p:()=>l});var t=e(2543),n=e.n(t),r=e(1062);const s=new r.tI({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),o=[{text:"Query",value:"query"}],m={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var l=(P=>(P.IsAbove="gt",P.IsBelow="lt",P.IsOutsideRange="outside_range",P.IsWithinRange="within_range",P.HasNoValue="no_value",P))(l||{});const i=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],c=[{text:"OR",value:"or"},{text:"AND",value:"and"}],u=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],f=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],d=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function E(P){const C=new r.tI({type:P.type,defaultParams:[]});return new r.kW(P,C)}function h(P){return P.toLowerCase().replace(/_/g,"").split(" ")[0]}function y(P){switch(h(P)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function a(P,C){return(0,t.reduce)(P,(D,T)=>(T.metric!==void 0&&T.value!==void 0&&D.push(T.metric+"="+T.value),T.Metric!==void 0&&T.Value!==void 0&&D.push(T.Metric+"="+T.Value),D),[]).join(C)}function v(P){return(0,t.isArray)(P.data)?a(P.data,", "):(0,t.isArray)(P.data.evalMatches)?a(P.data.evalMatches,", "):P.data.error?"Error: "+P.data.error:""}function g(P){return(0,t.isArray)(P)?a(P,", "):(0,t.isArray)(P.evalMatches)?a(P.evalMatches,", "):P.error?"Error: "+P.error:""}const b={alertQueryDef:s,getStateDisplayModel:y,conditionTypes:o,evalFunctions:i,evalOperators:c,noDataModes:f,executionErrorModes:d,reducerTypes:u,createReducerPart:E,getAlertAnnotationInfo:v,getAlertAnnotationText:g,alertStateSortScore:m}},1062:(Y,I,e)=>{"use strict";e.d(I,{Dw:()=>m,Wn:()=>o,kW:()=>s,tI:()=>r});var t=e(2543),n=e.n(t);class r{constructor(u){this.type=u.type,this.params=u.params,this.defaultParams=u.defaultParams,this.renderer=u.renderer,this.category=u.category,this.addStrategy=u.addStrategy}}class s{constructor(u,f){if(this.part=u,this.def=f,!this.def)throw{message:"Could not find query part "+u.type};u.params=u.params||(0,t.clone)(this.def.defaultParams),this.params=u.params,this.text="",this.updateText()}render(u){return this.def.renderer(this,u)}hasMultipleParamsInString(u,f){return u.indexOf(",")===-1?!1:this.def.params[f+1]&&this.def.params[f+1].optional}updateParam(u,f){if(this.hasMultipleParamsInString(u,f)){(0,t.each)(u.split(","),(d,E)=>{this.updateParam(d.trim(),E)});return}u===""&&this.def.params[f].optional?this.params.splice(f,1):this.params[f]=u,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let u=this.def.type+"(";u+=this.params.join(", "),u+=")",this.text=u}}function o(c,u){const f=c.def.type+"(",d=(0,t.map)(c.params,(E,h)=>{const y=c.def.params[h];return y.type==="time"&&E==="auto"&&(E="$__interval"),y.quote==="single"?"'"+E+"'":y.quote==="double"?'"'+E+'"':E});return u&&d.unshift(u),f+d.join(", ")+")"}function m(c,u){return u+" "+c.params[0]}function l(c,u){return c.params[0]}function i(c,u){return'"'+c.params[0]+'"'}},25027:(Y,I,e)=>{"use strict";e.d(I,{AK:()=>O,Fb:()=>B,IR:()=>M,Ke:()=>g,QA:()=>y,Rk:()=>T,Sn:()=>A,Sq:()=>C,U7:()=>a,aL:()=>R,fH:()=>d,hJ:()=>U,l$:()=>h,le:()=>f,nf:()=>D,vV:()=>E,zs:()=>p});var t=e(2543),n=e.n(t),r=e(47232),s=e(34867),o=e(17172),m=e(32264),l=e(14110),i=e(10096),c=e(28475);const u=7,f={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",recordingRuleFromScratch:"creating recording rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"},{logInfo:d,logError:E,logMeasurement:h}=(0,s.DW)("features.alerting",{module:"Alerting"});function y(F,K,w){return async function(...L){const V=performance.now(),N=await K(...L),z=performance.now()-V;return h(F,{loadTimesMs:z},w),N}}function a(F,K,w){return async(...L)=>{const V=performance.now(),N=await K(...L),{namespacesCount:z,groupsCount:J,rulesCount:G}=v(N);return h(F,{loadTimeMs:performance.now()-V,namespacesCount:z,groupsCount:J,rulesCount:G},w),N}}function v(F){const K=F.length,w=F.flatMap(N=>N.groups).length,L=F.flatMap(N=>N.groups).flatMap(N=>N.rules).length;return{namespacesCount:K,groupsCount:w,rulesCount:L}}function g(F,K,w){return async(...L)=>{const V=performance.now(),N=await K(...L),{namespacesCount:z,groupsCount:J,rulesCount:G}=b(N);return h(F,{namespacesCount:z,groupsCount:J,rulesCount:G,loadTimeMs:performance.now()-V},w),N}}function b(F){const K=Object.keys(F),w=Object.values(F).flatMap(V=>V),L=w.flatMap(V=>V.rules);return{namespacesCount:K.length,groupsCount:w.length,rulesCount:L.length}}async function P(){try{const{createdAt:F}=await(0,o.AI)().get("/api/user"),K=(0,r.KQ)().subtract(u,"days"),w=(0,r.KQ)(F);return K.isBefore(w)}catch{return!0}}const C=async(F={grafana_version:m.$.buildInfo.version,org_id:i.TP.user.orgId,user_id:i.TP.user.id})=>{await P()||(0,l.rR)("grafana_alerting_navigation",F)},D=F=>{(0,l.rR)("grafana_alerting_rule_creation",F)},T=F=>{(0,l.rR)("grafana_alerting_rule_aborted",F)},M=F=>{(0,l.rR)("grafana_alerting_rule_form_error",F)},O=async F=>{const K={grafana_version:m.$.buildInfo.version,org_id:i.TP.user.orgId,user_id:i.TP.user.id};(0,l.rR)("grafana_alerting_insights",{...K,...F})};function S(F){(0,l.rR)("grafana_alerting_rules_search",{...F})}function p({oldQuery:F,newQuery:K}){try{const w=(0,c.XY)(F),L=(0,c.XY)(K),V=x(w);x(L).filter(J=>!V.includes(J)).forEach(J=>{S({filter:J,triggeredBy:"typing"})})}catch(w){w instanceof Error&&E(w)}}function x(F){return Object.entries(F).filter(([K,w])=>!(0,t.isEmpty)(w)).map(([K])=>K)}function A(F){S({filter:F,triggeredBy:"component"})}function R(F){(0,l.rR)("grafana_alerting_rules_list_mode",{...F})}function B(){(0,l.rR)("grafana_alerting_switch_to_simplified_routing")}function U(){(0,l.rR)("grafana_alerting_switch_to_policies_routing")}},79741:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{default:()=>y,defaultPageNav:()=>E});var t=e(96540),n=e(17172),r=e(42418),s=e(66602),o=e(7392),m=e(37959),l=e(5179),i=e(47775),c=e(730),u=e(56361),f=e(18461);const d=a=>{const v=(0,f.uE)(a.match.params),g=t.useMemo(()=>{if(!v)throw new Error("Rule ID is required");return(0,f.qg)(v,!0)},[v]),{loading:b,error:P,result:C}=(0,c.ZU)({ruleIdentifier:g});return P?t.createElement(m.d,{pageNav:E,navId:"alert-list"},t.createElement(h,{error:P})):b?t.createElement(m.d,{pageNav:E,navId:"alert-list",isLoading:!0},t.createElement(t.Fragment,null)):C?t.createElement(l.K,{identifier:g,rule:C},t.createElement(i.Ay,null)):t.createElement(m.d,{pageNav:E,navId:"alert-list"},t.createElement(o.L,{entity:"Rule"}))},E={id:"alert-rule-view",text:""};function h({error:a}){return(0,n.NF)(a)&&a.status===404?t.createElement(o.L,{entity:"Rule"}):t.createElement(r.F,{title:"Something went wrong loading the rule"},(0,u.JZ)(a))}const y=(0,s.Xc)(d,{style:"page"})},79938:(Y,I,e)=>{"use strict";e.d(I,{hK:()=>c});var t=e(57220),n=e(75214),r=e(23662),s=e(49962),o=e(49498),m=e(28220);const l="/api/v1/rule/test/grafana",i="api/prometheus/grafana/api/v1/rules",c=s.H.injectEndpoints({endpoints:u=>({preview:u.mutation({query:({alertQueries:f,condition:d,customLabels:E,folder:h,alertName:y,alertUid:a})=>({url:l,data:{rule:{grafana_alert:{data:f,condition:d,no_data_state:"Alerting",title:y,uid:a??"N/A"},for:"0s",labels:(0,n.x4)(E),annotations:{}},folderUid:h.uid,folderTitle:h.title},method:"POST"})}),prometheusRulesByNamespace:u.query({query:({limitAlerts:f,identifier:d,filter:E,state:h,matcher:y})=>{const a=new URLSearchParams;f&&a.set("limit_alerts",String(f)),d&&((0,r.Mj)(d)||(0,r.X4)(d))&&(a.set("file",d.namespace),a.set("rule_group",d.groupName));const v=(0,o.bZ)(a,E);return{url:i,params:(0,o.Dj)(v,h,y)}},transformResponse:f=>(0,o.lH)(f.data.groups,t.hY)}),prometheusRuleNamespaces:u.query({query:({ruleSourceName:f,namespace:d,groupName:E,ruleName:h,dashboardUid:y})=>{const a={file:d,rule_group:E,rule_name:h,dashboard_uid:y};return{url:`api/prometheus/${(0,t.w5)(f)}/api/v1/rules`,params:a}},transformResponse:(f,d,E)=>(0,o.lH)(f.data.groups,E.ruleSourceName)}),rulerRules:u.query({query:({rulerConfig:f,filter:d})=>{const{path:E,params:h}=(0,m.$o)(f).rules(d);return{url:E,params:h}}}),rulerRuleGroup:u.query({query:({rulerConfig:f,namespace:d,group:E})=>{const{path:h,params:y}=(0,m.$o)(f).namespaceGroup(d,E);return{url:h,params:y}}}),exportRules:u.query({query:({format:f,folderUid:d,group:E,ruleUid:h})=>({url:"/api/ruler/grafana/api/v1/export/rules",params:{format:f,folderUid:d,group:E,ruleUid:h},responseType:"text"}),keepUnusedDataFor:0}),exportReceiver:u.query({query:({receiverName:f,decrypt:d,format:E})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:E,decrypt:d,name:f},responseType:"text"}),keepUnusedDataFor:0}),exportReceivers:u.query({query:({decrypt:f,format:d})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:d,decrypt:f},responseType:"text"}),keepUnusedDataFor:0}),exportPolicies:u.query({query:({format:f})=>({url:"/api/v1/provisioning/policies/export/",params:{format:f},responseType:"text"}),keepUnusedDataFor:0}),exportModifiedRuleGroup:u.mutation({query:({payload:f,format:d,nameSpaceUID:E})=>({url:`/api/ruler/grafana/api/v1/rules/${E}/export/`,params:{format:d},responseType:"text",data:f,method:"POST"})}),exportMuteTimings:u.query({query:({format:f})=>({url:"/api/v1/provisioning/mute-timings/export/",params:{format:f},responseType:"text"}),keepUnusedDataFor:0}),exportMuteTiming:u.query({query:({format:f,muteTiming:d})=>({url:`/api/v1/provisioning/mute-timings/${d}/export/`,params:{format:f},responseType:"text"}),keepUnusedDataFor:0})})})},49962:(Y,I,e)=>{"use strict";e.d(I,{H:()=>m});var t=e(93020),n=e(75505),r=e(17172),s=e(25027);const o=()=>async l=>{try{const i=performance.now(),{data:c,...u}=await(0,n.s)((0,r.AI)().fetch(l));return(0,s.l$)("backendSrvBaseQuery",{loadTimeMs:performance.now()-i},{url:l.url,method:l.method??"GET",responseStatus:u.statusText}),{data:c,meta:u}}catch(i){return{error:i}}},m=(0,t.xP)({reducerPath:"alertingApi",baseQuery:o(),tagTypes:["AlertmanagerChoice","AlertmanagerConfiguration","OnCallIntegrations","OrgMigrationState","DataSourceSettings"],endpoints:()=>({})})},32415:(Y,I,e)=>{"use strict";e.d(I,{By:()=>y,Bz:()=>c,Mn:()=>d,VO:()=>h,Vv:()=>D,WS:()=>m,Wf:()=>C,_P:()=>P,as:()=>u,dk:()=>f,f4:()=>E,nd:()=>i,vk:()=>l});var t=e(75505),n=e(76885),r=e(39070),s=e(17172),o=e(57220);async function m(M){try{const O=await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:O.data.template_files??{},template_file_provenances:O.data.template_file_provenances??{},alertmanager_config:O.data.alertmanager_config??{},last_applied:O.data.last_applied,id:O.data.id}}catch(O){if(M===o.hY&&(0,s.NF)(O)&&O.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw O}}async function l(M,O){await(0,t.s)((0,s.AI)().fetch({method:"POST",url:`/api/alertmanager/${(0,o.w5)(M)}/config/api/v1/alerts`,data:O,showErrorAlert:!1,showSuccessAlert:!1}))}async function i(M){await(0,t.s)((0,s.AI)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,o.w5)(M)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function c(M){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function u(M,O){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/silences`,data:O,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function f(M,O){await(0,s.AI)().delete(`/api/alertmanager/${(0,o.w5)(M)}/api/v2/silence/${encodeURIComponent(O)}`)}async function d(M,O,S=!0,p=!0,x=!0){const A=n.kM.toUrlParams({silenced:S,active:p,inhibited:x})+O?.map(B=>`filter=${encodeURIComponent(`${T(B.name)}=${B.isRegex?"~":""}"${T(B.value)}"`)}`).join("&")||"";return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/alerts`+(A?"?"+A:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(M){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function h(M){return(await(0,t.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,o.w5)(M)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function y(M,O,S){const p={receivers:O,alert:S};try{const x=await(0,t.s)((0,s.AI)().fetch({method:"POST",data:p,url:`/api/alertmanager/${(0,o.w5)(M)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(a(x.data))throw new Error(b(x.data))}catch(x){throw(0,s.NF)(x)&&v(x.data)&&a(x.data)?new Error(b(x.data)):x}}function a(M){return M.receivers.some(O=>O.grafana_managed_receiver_configs.some(S=>S.status==="failed"))}function v(M){return(0,r.Gv)(M)&&"receivers"in M&&Array.isArray(M.receivers)?M.receivers.every(g):!1}function g(M){return(0,r.Gv)(M)&&"name"in M&&typeof M.name=="string"&&"grafana_managed_receiver_configs"in M&&Array.isArray(M.grafana_managed_receiver_configs)}function b(M){return M.receivers.flatMap(O=>O.grafana_managed_receiver_configs.filter(S=>S.status==="failed").map(S=>S.error??"Unknown error.")).join("; ")}async function P(M){await(0,t.s)((0,s.AI)().fetch({method:"POST",data:M,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{D()})}async function C(){return(await(0,t.s)((0,s.AI)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function D(){return(await(0,t.s)((0,s.AI)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function T(M){return M.replace(/"/g,'\\"')}},82843:(Y,I,e)=>{"use strict";e.d(I,{m:()=>h});var t=e(2543),n=e.n(t),r=e(99140),s=e(25027),o=e(98164),m=e(57220),l=e(56361),i=e(88467),c=e(49962),u=e(32415),f=e(77583);const d=10,E=30*1e3,h=c.H.injectEndpoints({endpoints:y=>({getAlertmanagerAlerts:y.query({query:({amSourceName:a,filter:v})=>{const g=v?.matchers?.filter(O=>O.name&&O.value).map(O=>`${O.name}${(0,o.MN)(O)}${(0,l.Y9)(O.value)}`),{silenced:b,inhibited:P,unprocessed:C,active:D}=v||{},T=Object.fromEntries(Object.entries({silenced:b,active:D,inhibited:P,unprocessed:C}).filter(([O,S])=>S!==void 0)),M={filter:g};return T&&Object.keys(T).forEach(O=>{M[O]=T[O]}),{url:`/api/alertmanager/${(0,m.w5)(a)}/api/v2/alerts`,params:M}}}),getAlertmanagerAlertGroups:y.query({query:({amSourceName:a})=>({url:`/api/alertmanager/${(0,m.w5)(a)}/api/v2/alerts/groups`})}),grafanaNotifiers:y.query({query:()=>({url:"/api/alert-notifiers"})}),getAlertmanagerChoiceStatus:y.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:y.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:y.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:a=>a.data}),saveExternalAlertmanagersConfig:y.mutation({query:a=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:a}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:y.query({query:()=>({url:`/api/alertmanager/${(0,m.w5)(m.hY)}/config/history?limit=${d}`})}),resetAlertManagerConfigToOldVersion:y.mutation({query:a=>({url:`/api/alertmanager/${(0,m.w5)(m.hY)}/config/history/${a.id}/_activate`,method:"POST"})}),getAlertmanagerConfiguration:y.query({queryFn:async a=>{const v=a===m.hY;if((0,m.AL)(a))return(0,i.$I)((0,u.VO)(a).then(M=>({data:{alertmanager_config:M.config,template_files:{}}})));const{data:b}=await(0,r.JD)(f.L.endpoints.discoverAmFeatures.initiate({amSourceName:a})),P={alertmanager_config:{},template_files:{},template_file_provenances:{}},C=b?.lazyConfigInit??!1,D=(0,s.QA)("unifiedalerting/fetchAmConfig",u.WS,{dataSourceName:a,thunk:"unifiedalerting/fetchAmConfig"}),T=(0,l.i9)(()=>D(a),M=>!!(0,i.CZ)(M)?.includes("alertmanager storage object not found")&&!C,E).then(M=>v?M:(0,t.isEmpty)(M.alertmanager_config)&&(0,t.isEmpty)(M.template_files)?(0,u.VO)(a).then(S=>({alertmanager_config:S.config,template_files:{},template_file_provenances:M.template_file_provenances,last_applied:M.last_applied,id:M.id})):M).then(M=>M??P).then(M=>({data:M})).catch(M=>{if(C&&(0,i.CZ)(M)?.includes("alertmanager storage object not found"))return{data:P};throw M});return(0,i.$I)(T).catch(M=>({error:M,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:y.mutation({query:({selectedAlertmanager:a,config:v,...g})=>({url:`/api/alertmanager/${(0,m.w5)(a)}/config/api/v1/alerts`,method:"POST",data:v,...g}),invalidatesTags:["AlertmanagerConfiguration"]}),getContactPointsStatus:y.query({query:()=>({url:`/api/alertmanager/${(0,m.w5)(m.hY)}/config/api/v1/receivers`}),transformResponse:a=>{const v=g=>g.startsWith("0001-01-01");return a.map(g=>({...g,integrations:g.integrations.map(b=>{const P=v(b.lastNotifyAttempt);return{...b,lastNotifyAttempt:P?"":b.lastNotifyAttempt,lastNotifyAttemptDuration:P?"":b.lastNotifyAttemptDuration}})}))}}),getContactPointsList:y.query({query:()=>({url:"/api/v1/notifications/receivers"})}),getMuteTimingList:y.query({query:()=>({url:"/api/v1/notifications/time-intervals"})})})})},92240:(Y,I,e)=>{"use strict";e.d(I,{O5:()=>f,_y:()=>u,nD:()=>i});var t=e(75505),n=e(17172),r=e(94822),s=e(55740),o=e(57220),m=e(49498),l=e(28220);async function i(v){if(v===o.hY)return{features:{rulerApiEnabled:!0}};const g=(0,o.oh)(v);if(!g)throw new Error(`Cannot find data source configuration for ${v}`);const{url:b,name:P,type:C}=g;if(!b)throw new Error("The data source url cannot be empty.");if(C!=="prometheus"&&C!=="loki")throw new Error(`The build info request is not available for ${C}. Only 'prometheus' and 'loki' are supported`);return c({name:P,url:b,type:C})}async function c(v){const{url:g,name:b,type:P}=v,C=P==="loki"?void 0:await E(g);if(!(C!==void 0)){if(!await h(b))throw new Error(`Unable to fetch alert rules. Is the ${b} data source properly configured?`);const O=await y(b);return{application:r.N1.Cortex,features:{rulerApiEnabled:O}}}const{features:T}=C.data;return T?{application:r.N1.Mimir,features:{rulerApiEnabled:T?.ruler_config_api==="true"}}:{application:r.N1.Prometheus,features:{rulerApiEnabled:!1}}}async function u(v){if(v===o.hY)return{lazyConfigInit:!1};const g=d(v),{url:b,type:P}=g;if(!b)throw new Error("The data source url cannot be empty.");if(P!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${P}. Only 'alertmanager' type is supported`);return await f(b)}async function f(v){try{return{lazyConfigInit:(await E(v))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function d(v){const g=(0,o.oh)(v);if(!g)throw new Error(`Cannot find data source configuration for ${v}`);return g}async function E(v){return(await(0,t.s)((0,n.AI)().fetch({url:`${v}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(b=>{if(!("status"in b&&b.status===404))throw b}))?.data}async function h(v){try{return await(0,m.sA)(v),!0}catch{return!1}}async function y(v){try{return await(0,l.Zp)(v),!0}catch(g){if(a(g))return!1;throw g}}function a(v){return(0,n.NF)(v)?v.data.message?.includes("GetRuleGroup unsupported in rule local store")||v.data.message?.includes("page not found")||v.data.message?.includes(s.UU):v instanceof Error&&v.message?.includes("404 from rules config endpoint")}},77583:(Y,I,e)=>{"use strict";e.d(I,{L:()=>m});var t=e(94822),n=e(25027),r=e(57220),s=e(49962),o=e(92240);const m=s.H.injectEndpoints({endpoints:l=>({discoverAmFeatures:l.query({queryFn:async({amSourceName:i})=>{try{return{data:await(0,o._y)(i)}}catch(c){return{error:c}}}}),discoverDsFeatures:l.query({queryFn:async({rulesSourceName:i})=>{const c=(0,r.Jz)(i);if(!c)return{error:new Error(`Missing data source configuration for ${i}`)};const f=await(0,n.QA)("unifiedalerting/featureDiscoveryApi/discoverDsFeatures",o.nD,{dataSourceName:i,endpoint:"unifiedalerting/featureDiscoveryApi/discoverDsFeatures"})(c.name);return{data:{rulerConfig:f.features.rulerApiEnabled?{dataSourceName:c.name,apiVersion:f.application===t.N1.Cortex?"legacy":"config"}:void 0}}}})})})},68788:(Y,I,e)=>{"use strict";e.d(I,{Es:()=>s,pB:()=>i});var t=e(75505),n=e(17172),r=e(57220);function s(){return(0,n.AI)().get("/api/alert-notifiers")}const o=c=>{const u=c.match(/^(\w+)(\[\d+\])?$/);return u?{type:u[1],index:u[2]}:{type:c,index:void 0}},m=c=>{const u={receivers:{},errorCount:0};c.forEach(d=>{u.receivers[d.name]={active:d.active,notifiers:{},errorCount:0};const E=u.receivers[d.name];d.integrations.forEach(h=>{!!h?.lastNotifyAttemptError&&(E.errorCount+=1);const a=l(h.name);a&&(E.notifiers[a]||(E.notifiers[a]=[]),E.notifiers[a].push(h))})});const f=Object.values(u.receivers).reduce((d,E)=>d+E.errorCount,0);return{...u,errorCount:f}},l=c=>o(c)?.type;async function i(c){try{const u=await(0,t.s)((0,n.AI)().fetch({url:`/api/alertmanager/${(0,r.w5)(c)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return m(u.data)}catch{return m([])}}},49498:(Y,I,e)=>{"use strict";e.d(I,{Dj:()=>l,bZ:()=>m,lH:()=>i,sA:()=>c});var t=e(75505),n=e(17172),r=e(57220),s=e(23662);function o(u){const{dataSourceName:f,limitAlerts:d,identifier:E}=u;return{rules:(h,y,a)=>{const v=new URLSearchParams;f===r.hY&&d&&v.set("limit_alerts",String(d)),E&&((0,s.Mj)(E)||(0,s.X4)(E))&&(v.set("file",E.namespace),v.set("rule_group",E.groupName));const g=m(v,h);return{url:`/api/prometheus/${(0,r.w5)(f)}/api/v1/rules`,params:l(g,y,a)}}}}function m(u,f){return f?.dashboardUID&&(u.set("dashboard_uid",f.dashboardUID),f?.panelId&&u.set("panel_id",String(f.panelId))),Object.fromEntries(u)}function l(u,f,d){let E={...u};if(f?.length&&(E={...E,state:f}),d?.length){const h=d.map(y=>JSON.stringify(y));E={...E,matcher:h}}return E}const i=(u,f)=>{const d={};return u.forEach(E=>{E.rules.forEach(h=>{h.query=h.query||""}),d[E.file]?d[E.file].groups.push(E):d[E.file]={dataSourceName:f,name:E.file,groups:[E]}}),Object.values(d)};async function c(u,f,d,E,h,y){if(f?.dashboardUID&&u!==r.hY)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:a,params:v}=o({dataSourceName:u,limitAlerts:d,identifier:y}).rules(f,h,E),g=await(0,t.s)((0,n.AI)().fetch({url:a,params:v,showErrorAlert:!1,showSuccessAlert:!1})).catch(b=>{throw"status"in b&&b.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):b});return i(g.data.data.groups,u)}},28220:(Y,I,e)=>{"use strict";e.d(I,{$o:()=>l,AJ:()=>E,BK:()=>g,E8:()=>i,HO:()=>d,Zp:()=>f,iy:()=>c});var t=e(75505),n=e(39070),r=e(17172),s=e(55740),o=e(57220),m=e(49498);function l(b){const C=`${`/api/ruler/${(0,o.w5)(b.dataSourceName)}`}/api/v1/rules`,D=new URLSearchParams;return D.set("subtype",b.apiVersion==="legacy"?"cortex":"mimir"),{rules:T=>{const M=(0,m.bZ)(D,T);return{path:`${C}`,params:M}},namespace:T=>({path:`${C}/${encodeURIComponent(T)}`,params:Object.fromEntries(D)}),namespaceGroup:(T,M)=>({path:`${C}/${encodeURIComponent(T)}/${encodeURIComponent(M)}`,params:Object.fromEntries(D)})}}async function i(b,P,C){const{path:D,params:T}=l(b).namespace(P);await(0,t.s)((0,r.AI)().fetch({method:"POST",url:D,data:C,showErrorAlert:!1,showSuccessAlert:!1,params:T}))}async function c(b,P){if(P?.dashboardUID&&b.dataSourceName!==o.hY)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:C,params:D}=l(b).rules(P);return h(C,{},D)}async function u(b,P){const{path:C,params:D}=l(b).namespace(P);return(await h(C,{},D))[P]||[]}async function f(b){return h(`/api/ruler/${(0,o.w5)(b)}/api/v1/rules/test/test`,null)}async function d(b,P,C){const{path:D,params:T}=l(b).namespaceGroup(P,C);return h(D,null,T)}async function E(b,P,C){const{path:D,params:T}=l(b).namespaceGroup(P,C);await(0,t.s)((0,r.AI)().fetch({url:D,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:T}))}async function h(b,P,C){try{return(await(0,t.s)((0,r.AI)().fetch({url:b,showErrorAlert:!1,showSuccessAlert:!1,params:C}))).data}catch(D){if(!y(D))throw D;if(v(D))return P;throw a(D)?{...D,data:{...D.data,message:s.UU}}:D}}function y(b){if(!(0,n.Gv)(b))return!1;const P="data"in b&&b.data!==null&&b.data!==void 0;return"status"in b&&Number.isFinite(b.status)&&P}function a(b){return b.status===404||b.status===500&&b.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function v(b){return b.status===404&&(b.data.message?.includes("group does not exist")||b.data.message?.includes("no rule groups found"))}async function g(b,P){const{path:C,params:D}=l(b).namespace(P);await(0,t.s)((0,r.AI)().fetch({method:"DELETE",url:C,showErrorAlert:!1,showSuccessAlert:!1,params:D}))}},15458:(Y,I,e)=>{"use strict";e.d(I,{R:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(29158);const o=({labelKey:l,value:i,operator:c="=",onRemoveLabel:u})=>{const f=(0,r.of)(m);return n.createElement("div",{className:f.wrapper},l,c,i,!!u&&n.createElement(s.K,{name:"times",size:"xs",onClick:u,tooltip:"Remove label"}))},m=l=>({wrapper:(0,t.css)`
    padding: ${l.spacing(.5,1)};
    border-radius: ${l.shape.radius.default};
    border: solid 1px ${l.colors.border.medium};
    font-size: ${l.typography.bodySmall.fontSize};
    background-color: ${l.colors.background.secondary};
    font-weight: ${l.typography.fontWeightBold};
    color: ${l.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},69087:(Y,I,e)=>{"use strict";e.d(I,{m:()=>f});var t=e(32196),n=e(2543),r=e.n(n),s=e(55127),o=e.n(s),m=e(96540),l=e(40845),i=e(55852),c=e(69613),u=e(8406);const f=({labels:y,commonLabels:a={},size:v})=>{const g=(0,l.of)(h,v),[b,P]=(0,m.useState)(!1),C=(0,n.chain)(y).toPairs().reject(E).reject(([M])=>b?!1:M in a).value(),D=Object.keys(a).length,T=D>0;return m.createElement("div",{className:g.wrapper,role:"list","aria-label":"Labels"},C.map(([M,O])=>m.createElement(u.J,{key:M+O,size:v,label:M,value:O,color:d(M)})),!b&&T&&m.createElement(i.$n,{variant:"secondary",fill:"text",onClick:()=>P(!0),tooltip:"Show common labels",tooltipPlacement:"top",size:"sm"},"+",D," common ",o()("label",D)),b&&T&&m.createElement(i.$n,{variant:"secondary",fill:"text",onClick:()=>P(!1),tooltipPlacement:"top",size:"sm"},"Hide common labels"))};function d(y){return(0,c.MC)(y).color}const E=([y,a])=>y.startsWith("__")&&y.endsWith("__"),h=(y,a)=>({wrapper:(0,t.css)`
    display: flex;
    flex-wrap: wrap;
    align-items: center;

    gap: ${a==="md"?y.spacing():y.spacing(.5)};
  `})},37959:(Y,I,e)=>{"use strict";e.d(I,{d:()=>v,y:()=>g});var t=e(96540),n=e(87586),r=e(17205),s=e(70383),o=e(32196),m=e(40845),l=e(14186),i=e(88323),c=e(57220);function u(C){return C.name===c.hY?"SyncCity":C.name.slice(0,37)}const f=({disabled:C=!1})=>{const D=(0,m.of)(d),{selectedAlertmanager:T,availableAlertManagers:M,setSelectedAlertmanager:O}=(0,s.VI)(),S=(0,t.useMemo)(()=>M.map(p=>({label:u(p),value:p.name,imgUrl:p.imgUrl,meta:p.meta})),[M]);return t.createElement(l.I,{className:D.field,label:C?"Alertmanager":"Choose Alertmanager",disabled:C||S.length===1,"data-testid":"alertmanager-picker"},t.createElement(i.l6,{"aria-label":C?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:p=>{p?.value&&O(p.value)},options:S,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:T,getOptionLabel:p=>p.label}))},d=C=>({field:(0,o.css)`
    margin: 0;
  `});var E=e(42418);const h=()=>t.createElement(E.F,{title:"No Alertmanager found",severity:"warning"},"We could not find any external Alertmanagers and you may not have access to the built-in Grafana Alertmanager."),y=()=>t.createElement(E.F,{title:"Selected Alertmanager not found.",severity:"warning"},"The selected Alertmanager no longer exists or you may not have permission to access it. You can select a different Alertmanager from the dropdown."),a=({availableAlertManagers:C})=>{const D=C.length>0;return t.createElement("div",null,D?t.createElement(y,null):t.createElement(h,null))},v=({children:C,isLoading:D,...T})=>t.createElement(r.Y,{...T},t.createElement(r.Y.Contents,{isLoading:D},t.createElement("div",null,C))),g=({children:C,accessType:D,...T})=>{const M=b();return t.createElement(s.b9,{accessType:D},t.createElement(v,{...T,actions:t.createElement(f,{disabled:M})},t.createElement(P,null,C)))};function b(){const C=(0,n.A)();return["/edit","/new"].some(T=>C?.pathname?.includes(T))}const P=({children:C})=>{const{availableAlertManagers:D,selectedAlertmanager:T}=(0,s.VI)();return T?t.createElement(t.Fragment,null,C):t.createElement(a,{availableAlertManagers:D})}},71223:(Y,I,e)=>{"use strict";e.d(I,{s:()=>f});var t=e(32196),n=e(96540),r=e(56034),s=e(40845),o=e(72109),m=e(55740),l=e(84396),i=e(16577),c=e(73750);const u=["message","description"],f=({annotationKey:h,value:y,valueLink:a})=>{const v=m.J3[h]?n.createElement(r.m,{content:h,placement:"top",theme:"info"},n.createElement("span",null,m.J3[h])):h;return n.createElement(l.X,{label:v,horizontal:!0},n.createElement(d,{annotationKey:h,value:y,valueLink:a}))},d=({annotationKey:h,value:y,valueLink:a})=>{const v=(0,s.of)(E),g=u.includes(h),b=y&&y.startsWith("http"),P=n.createElement(i.Y,{input:y,delimiter:["{{","}}"]});return a?n.createElement(o.Y,{href:a,external:!0},y):g?n.createElement(c.L,{className:v.well},P):b?n.createElement(o.Y,{href:y,external:!0},y):n.createElement(n.Fragment,null,P)},E=h=>({well:(0,t.css)`
    word-break: break-word;
  `})},84396:(Y,I,e)=>{"use strict";e.d(I,{X:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({className:m,label:l,horizontal:i,children:c,childrenWrapperClassName:u})=>{const f=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(f.field,i?f.fieldHorizontal:f.fieldVertical,m)},n.createElement("div",null,l),n.createElement("div",{className:u},c))},o=m=>({fieldHorizontal:(0,t.css)`
    flex-direction: row;
    ${m.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:(0,t.css)`
    flex-direction: column;
  `,field:(0,t.css)`
    display: flex;
    margin: ${m.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${m.spacing(1)};
      font-size: ${m.typography.size.sm};
      font-weight: ${m.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${m.colors.text.secondary};
    }
  `})},75591:(Y,I,e)=>{"use strict";e.d(I,{E:()=>c});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(29158),m=e(19384),l=e(98439),i=e(22620);const c=({cols:f,items:d,isExpandable:E=!1,onCollapse:h,onExpand:y,isExpanded:a,renderExpandedContent:v,testIdGenerator:g,pagination:b,paginationStyles:P,renderPrefixCell:C,renderPrefixHeader:D,footerRow:T,dataTestId:M})=>{const O=(0,s.of)(i.H);if((h||y||a)&&!(h&&y&&a))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((E||v)&&!(E&&v))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const S=(0,s.of)(u(f,E,!!D)),[p,x]=(0,n.useState)([]),A=w=>{a&&h&&y?a(w)?h(w):y(w):x(p.includes(w.id)?p.filter(L=>L!==w.id):[...p,w.id])},R=b?.itemsPerPage??d.length,{page:B,numberOfPages:U,onPageChange:F,pageItems:K}=(0,l.W)(d,1,R);return n.createElement(n.Fragment,null,n.createElement("div",{className:S.container,"data-testid":M??"dynamic-table"},n.createElement("div",{className:S.row,"data-testid":"header"},D&&D(),E&&n.createElement("div",{className:S.cell}),f.map(w=>n.createElement("div",{className:S.cell,key:w.id},w.label))),K.map((w,L)=>{const V=a?a(w):p.includes(w.id);return n.createElement("div",{className:S.row,key:`${w.id}-${L}`,"data-testid":g?.(w,L)??"row"},C&&C(w,L,d),E&&n.createElement("div",{className:(0,t.cx)(S.cell,S.expandCell)},n.createElement(o.K,{tooltip:`${V?"Collapse":"Expand"} row`,"data-testid":r.Tp.components.AlertRules.toggle,name:V?"angle-down":"angle-right",onClick:()=>A(w)})),f.map(N=>n.createElement("div",{className:(0,t.cx)(S.cell,S.bodyCell,N.className),"data-column":N.label,key:`${w.id}-${N.id}`},N.renderCell(w,L))),V&&v&&n.createElement("div",{className:S.expandedContentRow,"data-testid":r.Tp.components.AlertRules.expandedContent},v(w,L,d)))}),T&&n.createElement("div",{className:(0,t.cx)(S.row,S.footerRow)},T)),b&&n.createElement(m.d,{className:(0,t.cx)(O,P),currentPage:B,numberOfPages:U,onNavigate:F,hideWhenSinglePage:!0}))},u=(f,d,E)=>{const h=f.map(y=>y.size?typeof y.size=="number"?`${y.size}fr`:y.size:"auto");return d&&h.unshift("calc(1em + 16px)"),E&&h.unshift("0"),y=>({container:(0,t.css)`
      border: 1px solid ${y.colors.border.weak};
      border-radius: ${y.shape.radius.default};
      color: ${y.colors.text.secondary};
    `,row:(0,t.css)`
      display: grid;
      grid-template-columns: ${h.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${y.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${y.colors.background.primary};
      }

      ${y.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${y.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${E?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:(0,t.css)`
      display: flex;
      padding: ${y.spacing(1)};
    `,cell:(0,t.css)`
      display: flex;
      align-items: center;
      padding: ${y.spacing(1)};

      ${y.breakpoints.down("sm")} {
        padding: ${y.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:(0,t.css)`
      overflow: hidden;

      ${y.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${y.colors.text.primary};
        }
      }
    `,expandCell:(0,t.css)`
      justify-content: center;

      ${y.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:(0,t.css)`
      grid-column-end: ${h.length+1};
      grid-column-start: ${E?3:2};
      grid-row: 2;
      padding: 0 ${y.spacing(3)} 0 ${y.spacing(1)};
      position: relative;

      ${y.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${y.colors.border.strong};
        grid-row: auto;
        padding: ${y.spacing(1)} 0 0 0;
      }
    `})}},10562:(Y,I,e)=>{"use strict";e.d(I,{B:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(75591);const o=({renderExpandedContent:l,...i})=>{const c=(0,r.of)(m);return n.createElement(s.E,{renderExpandedContent:l?(u,f,d)=>n.createElement(n.Fragment,null,f!==d.length-1&&n.createElement("div",{className:(0,t.cx)(c.contentGuideline,c.guideline)}),l(u,f,d)):void 0,renderPrefixHeader:()=>n.createElement("div",{className:c.relative},n.createElement("div",{className:(0,t.cx)(c.headerGuideline,c.guideline)})),renderPrefixCell:(u,f,d)=>n.createElement("div",{className:c.relative},n.createElement("div",{className:(0,t.cx)(c.topGuideline,c.guideline)}),f!==d.length-1&&n.createElement("div",{className:(0,t.cx)(c.bottomGuideline,c.guideline)})),...i})},m=l=>({relative:(0,t.css)`
    position: relative;
    height: 100%;
  `,guideline:(0,t.css)`
    left: -19px;
    border-left: 1px solid ${l.colors.border.weak};
    position: absolute;

    ${l.breakpoints.down("md")} {
      display: none;
    }
  `,topGuideline:(0,t.css)`
    width: 18px;
    border-bottom: 1px solid ${l.colors.border.medium};
    top: 0;
    bottom: 50%;
  `,bottomGuideline:(0,t.css)`
    top: 50%;
    bottom: 0;
  `,contentGuideline:(0,t.css)`
    top: 0;
    bottom: 0;
    left: -49px !important;
  `,headerGuideline:(0,t.css)`
    top: -17px;
    bottom: 0;
  `})},35108:(Y,I,e)=>{"use strict";e.d(I,{j:()=>c});var t=e(32196),n=e(46942),r=e.n(n),s=e(96540),o=e(40845),m=e(67061),l=e(95868),i=e(13840);const c=({children:f,header:d,content:E,footer:h,arrow:y,showAfter:a=300,wrapperClassName:v,disabled:g=!1,...b})=>{const P=(0,s.useRef)(null),C=(0,o.of)(u);if(g)return f;const D=s.createElement(m.B,{direction:"column",gap:0,role:"tooltip"},d&&s.createElement("div",{className:C.card.header},d),s.createElement("div",{className:C.card.body},E),h&&s.createElement("div",{className:C.card.footer},h));return s.createElement(l.I,{content:D,hideAfter:100},(T,M,O)=>s.createElement(s.Fragment,null,P.current&&s.createElement(i.A,{...O,...b,wrapperClassName:r()(C.popover,v),onMouseLeave:M,onMouseEnter:T,onFocus:T,onBlur:M,referenceElement:P.current,renderArrow:y}),s.cloneElement(f,{ref:P,onMouseEnter:T,onMouseLeave:M,onFocus:T,onBlur:M,tabIndex:0})))},u=f=>({popover:(0,t.css)({borderRadius:f.shape.radius.default,boxShadow:f.shadows.z3,background:f.colors.background.primary,border:`1px solid ${f.colors.border.medium}`}),card:{body:(0,t.css)({padding:f.spacing(1)}),header:(0,t.css)({padding:f.spacing(1),background:f.colors.background.secondary,borderBottom:`solid 1px ${f.colors.border.medium}`}),footer:(0,t.css)({padding:f.spacing(.5,1),background:f.colors.background.secondary,borderTop:`solid 1px ${f.colors.border.medium}`})}})},8406:(Y,I,e)=>{"use strict";e.d(I,{J:()=>l});var t=e(32196),n=e(96540),r=e(84140),s=e(40845),o=e(67061),m=e(14578);const l=({label:c,value:u,icon:f,color:d,size:E="md"})=>{const h=(0,s.of)(i,d,E),y=`${c}: ${u}`;return n.createElement("div",{className:h.wrapper,role:"listitem","aria-label":y},n.createElement(o.B,{direction:"row",gap:0,alignItems:"stretch"},n.createElement("div",{className:h.label},n.createElement(o.B,{direction:"row",gap:.5,alignItems:"center"},f&&n.createElement(m.I,{name:f})," ",c??"")),n.createElement("div",{className:h.value},u)))},i=(c,u,f)=>{const d=u??c.colors.secondary.main,E=c.isDark?(0,r.A)(d).lighten(5).toString():(0,r.A)(d).darken(5).toString(),h=c.isDark?(0,r.A)(d).darken(5).toString():(0,r.A)(d).lighten(5).toString(),y=u?r.A.mostReadable(d,["#000","#fff"]).toString():c.colors.text.primary,a=f==="md"?`${c.spacing(.33)} ${c.spacing(1)}`:`${c.spacing(.2)} ${c.spacing(.6)}`;return{wrapper:(0,t.css)`
      color: ${y};
      font-size: ${c.typography.bodySmall.fontSize};

      border-radius: ${c.shape.borderRadius(2)};
    `,label:(0,t.css)`
      display: flex;
      align-items: center;
      color: inherit;

      padding: ${a};
      background: ${d};

      border: solid 1px ${E};
      border-top-left-radius: ${c.shape.borderRadius(2)};
      border-bottom-left-radius: ${c.shape.borderRadius(2)};
    `,value:(0,t.css)`
      color: inherit;
      padding: ${a};
      background: ${h};

      border: solid 1px ${E};
      border-left: none;
      border-top-right-radius: ${c.shape.borderRadius(2)};
      border-bottom-right-radius: ${c.shape.borderRadius(2)};
    `}}},55196:(Y,I,e)=>{"use strict";e.d(I,{P:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(94753),o=e(67061),m=e(14578);const l=({children:c,icon:u,color:f="secondary",direction:d="row",...E})=>{const h=(0,r.of)(i),y=typeof E.onClick=="function",a=d==="row",v=a?"center":"flex-start",g=a?.5:0;return n.createElement("div",{className:(0,t.cx)({[h.interactive]:y}),...E},n.createElement(s.E,{variant:"bodySmall",color:f},n.createElement(o.B,{direction:d,alignItems:v,gap:g,wrap:"wrap"},u&&n.createElement(m.I,{size:"sm",name:u}),c)))},i=()=>({interactive:(0,t.css)`
    cursor: pointer;
  `})},90141:(Y,I,e)=>{"use strict";e.d(I,{A:()=>m});var t=e(96540),n=e(55852),r=e(67061),s=e(14578);const m=(0,t.forwardRef)(function(i,c){return t.createElement(n.$n,{variant:"secondary",size:"sm",type:"button","aria-label":"more-actions","data-testid":"more-actions",ref:c,...i},t.createElement(r.B,{direction:"row",alignItems:"center",gap:0},"More ",t.createElement(s.I,{name:"angle-down"})))})},76156:(Y,I,e)=>{"use strict";e.d(I,{h:()=>s});var t=e(96540),n=e(12210);const r=({children:o,plugin:m,loadingComponent:l,notInstalledFallback:i})=>{const{loading:c,installed:u}=usePluginBridge(m);return c?l??null:u?React.createElement(React.Fragment,null,o):i??null};function s(o,m,l){const i=new URLSearchParams(l).toString();return`/a/${o}${m}`+(i?"?"+i:"")}},48205:(Y,I,e)=>{"use strict";e.d(I,{Yi:()=>o,hk:()=>s,rS:()=>m});var t=e(96540),n=e(42418),r=e(39938),s=(l=>(l.ContactPoint="contact point",l.Template="template",l.MuteTiming="mute timing",l.AlertRule="alert rule",l.RootNotificationPolicy="root notification policy",l))(s||{});const o=({resource:l,...i})=>t.createElement(n.F,{title:`This ${l} cannot be edited through the UI`,severity:"info",...i},"This ",l," has been provisioned, that means it was created by config. Please contact your server admin to update this ",l,"."),m=()=>t.createElement(r.E,{text:"Provisioned",color:"purple"})},82437:(Y,I,e)=>{"use strict";e.d(I,{c:()=>r});var t=e(96540),n=e(14578);const r=({namespace:s,group:o})=>o?t.createElement(t.Fragment,null,s," ",t.createElement(n.I,{name:"angle-right"})," ",o):t.createElement(t.Fragment,null,s)},26058:(Y,I,e)=>{"use strict";e.d(I,{h:()=>r});var t=e(32196),n=e(96540);const r=()=>n.createElement("span",{className:(0,t.css)`
      flex: 1;
    `})},65415:(Y,I,e)=>{"use strict";e.d(I,{O:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,state:l,size:i="md",muted:c=!1})=>{const u=(0,r.of)(o);return n.createElement("span",{className:(0,t.cx)(u.common,u[l],u[i],{[u.muted]:c})},m||l)},o=m=>({common:(0,t.css)`
    display: inline-block;
    color: white;
    border-radius: ${m.shape.radius.default};
    font-size: ${m.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${m.typography.fontWeightBold};
  `,good:(0,t.css)`
    background-color: ${m.colors.success.main};
    border: solid 1px ${m.colors.success.main};
    color: ${m.colors.success.contrastText};
  `,warning:(0,t.css)`
    background-color: ${m.colors.warning.main};
    border: solid 1px ${m.colors.warning.main};
    color: ${m.colors.warning.contrastText};
  `,bad:(0,t.css)`
    background-color: ${m.colors.error.main};
    border: solid 1px ${m.colors.error.main};
    color: ${m.colors.error.contrastText};
  `,neutral:(0,t.css)`
    background-color: ${m.colors.secondary.main};
    border: solid 1px ${m.colors.secondary.main};
    color: ${m.colors.secondary.contrastText};
  `,info:(0,t.css)`
    background-color: ${m.colors.primary.main};
    border: solid 1px ${m.colors.primary.main};
    color: ${m.colors.primary.contrastText};
  `,md:(0,t.css)`
    padding: ${m.spacing(.5,1)};
    min-width: ${m.spacing(8)};
  `,sm:(0,t.css)`
    padding: ${m.spacing(.3,.5)};
    min-width: 52px;
  `,muted:(0,t.css)`
    opacity: 0.5;
  `})},16577:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(39938),o=e(35108),m=e(83225);const l=["$",".",'"'];function i({input:a,delimiter:v=["{{","}}"]}){const g=(0,r.of)(y),[b,P]=v,C=new RegExp(`(?<before>.*?)(${b}(?<token>.*?)${P}|$)`,"gm"),D=a.split(`
`),T=[];return D.forEach((M,O)=>{Array.from(M.matchAll(C)).forEach((p,x)=>{const A=p.groups?.before,R=p.groups?.token?.trim();if(A&&T.push(n.createElement("span",{key:`${O}-${x}-before`},A)),R){const B=h(R),U=B==="variable"?R:"",F=`${b} ${R} ${P}`;T.push(n.createElement(u,{key:`${O}-${x}-token`,content:F,type:B,description:U}))}}),T.push(n.createElement("br",{key:`${O}-newline`}))}),n.createElement("span",{className:g.wrapper},T)}var c=(a=>(a.Variable="variable",a.Function="function",a.Keyword="keyword",a.Unknown="unknown",a))(c||{});function u({content:a,description:v,type:g}){const b=(0,r.of)(y),P=!g;return n.createElement(o.j,{placement:"top-start",disabled:P,content:n.createElement("div",{className:b.hoverTokenItem},n.createElement(s.E,{tabIndex:0,text:n.createElement(n.Fragment,null,g),color:"blue"})," ",v&&n.createElement("code",null,v))},n.createElement("span",null,n.createElement(s.E,{tabIndex:0,className:b.token,text:a,color:"blue"})))}function f(a){return l.some(v=>a.startsWith(v))}function d(a){return m.keywords.some(v=>a.startsWith(v))}function E(a){return m.builtinFunctions.some(v=>a.startsWith(v))}function h(a){let v;return f(a)?v="variable":d(a)?v="keyword":E(a)?v="function":v="unknown",v}const y=a=>({wrapper:(0,t.css)`
    white-space: pre-wrap;
  `,token:(0,t.css)`
    cursor: default;
    font-family: ${a.typography.fontFamilyMonospace};
  `,popover:(0,t.css)`
    border-radius: ${a.shape.radius.default};
    box-shadow: ${a.shadows.z3};
    background: ${a.colors.background.primary};
    border: 1px solid ${a.colors.border.medium};

    padding: ${a.spacing(1)};
  `,hoverTokenItem:(0,t.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${a.spacing(1)};
  `})},73750:(Y,I,e)=>{"use strict";e.d(I,{L:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,className:l})=>{const i=(0,r.of)(o);return n.createElement("div",{className:(0,t.cx)(i.wrapper,l)},m)},o=m=>({wrapper:(0,t.css)`
    background-color: ${m.components.panel.background};
    border: solid 1px ${m.components.input.borderColor};
    border-radius: ${m.shape.radius.default};
    padding: ${m.spacing(.5,1)};
    font-family: ${m.typography.fontFamilyMonospace};
  `})},53876:(Y,I,e)=>{"use strict";e.d(I,{X:()=>h});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(40845),m=e(14578),l=e(88575),i=e(60029),c=e(67061),u=e(56034),f=e(10354),d=e(25027),E=e(98164);const h=({onFilterChange:a,defaultQueryString:v})=>{const g=(0,o.of)(y),b=(0,s.useMemo)(()=>(0,n.debounce)(D=>{(0,d.fH)(d.le.filterByLabel);const T=D.target;a(T.value)},600),[a]);(0,s.useEffect)(()=>b.cancel(),[b]);const P=s.createElement(m.I,{name:"search"}),C=v?(0,E.J$)(v).length===0:!1;return s.createElement(l.D,{className:g.fixMargin,invalid:C||void 0,error:C?"Query must use valid matcher syntax. See the examples in the help tooltip.":null,label:s.createElement(i.J,null,s.createElement(c.B,{gap:.5},s.createElement("span",null,"Search by label"),s.createElement(u.m,{content:s.createElement("div",null,"Filter alerts using label querying without spaces, ex:",s.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'),"Invalid use of spaces:",s.createElement("pre",null,'{severity= "critical"}'),s.createElement("pre",null,'{severity ="critical"}'),"Valid use of spaces:",s.createElement("pre",null,'{severity=" critical"}'),"Filter alerts using label querying without braces, ex:",s.createElement("pre",null,'severity="critical", instance=~"cluster-us-.+"'))},s.createElement(m.I,{name:"info-circle",size:"sm"}))))},s.createElement(f.p,{placeholder:"Search",defaultValue:v??"",onChange:b,"data-testid":"search-query-input",prefix:P,className:g.inputWidth}))},y=a=>({fixMargin:(0,t.css)({marginBottom:0}),inputWidth:(0,t.css)({width:340,flexGrow:0})})},68291:(Y,I,e)=>{"use strict";e.d(I,{b:()=>i,d:()=>c});var t=e(96540),n=e(55852),r=e(56034),s=e(38138),o=e(12210),m=e(99494),l=e(76156);const i=({title:u="",severity:f="",url:d=""})=>{const E=(0,l.h)(m.W.Incident,"/incidents/declare",{title:u,severity:f,url:d}),{loading:h,installed:y,settings:a}=(0,o._)(m.W.Incident);return t.createElement(t.Fragment,null,h===!0&&t.createElement(n.$n,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),y===!1&&t.createElement(r.m,{content:"Grafana Incident is not installed or is not configured correctly"},t.createElement(n.$n,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),a&&t.createElement(n.z9,{icon:"fire",size:"sm",type:"button",href:E},"Declare Incident"))},c=({title:u="",severity:f="",url:d=""})=>{const E=(0,l.h)(m.W.Incident,"/incidents/declare",{title:u,severity:f,url:d}),{loading:h,installed:y,settings:a}=(0,o._)(m.W.Incident);return t.createElement(t.Fragment,null,h===!0&&t.createElement(s.W.Item,{label:"Declare incident",icon:"fire",disabled:!0}),y===!1&&t.createElement(r.m,{content:"Grafana Incident is not installed or is not configured correctly"},t.createElement(s.W.Item,{label:"Declare incident",icon:"fire",disabled:!0})),a&&t.createElement(s.W.Item,{label:"Declare incident",url:E,icon:"fire"}))}},56528:(Y,I,e)=>{"use strict";e.d(I,{GX:()=>B,r4:()=>A});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(49785),m=e(39070),l=e(19845),i=e(72724),c=e(40845),u=e(42418),f=e(67061),d=e(55852),E=e(51440),h=e(29158),y=e(98808),a=e(71680),v=e(1712),g=e(34263),b=e(18225),P=e(76658),C=e(66718),D=e(94822),T=e(98439),M=e(35108),O=e(26058),S=e(30423),p=e(81875),x=e(99106);const A=({queries:N=[],query:z,data:J,error:G,warning:H,isAlertCondition:q,onSetCondition:le,onUpdateRefId:me,onRemoveExpression:k,onUpdateExpressionType:ee,onChangeQuery:X})=>{const j=(0,c.of)(V),ne=z?.type,{setError:te,clearErrors:oe}=(0,o.xW)(),ie=(0,s.useCallback)(Se=>{Se?te("queries",{type:"custom",message:Se}):oe("queries")},[te,oe]),ue=J&&Object.values(J).some(Se=>!!Se&&Se.state===m.Gu.Loading),be=Array.isArray(J?.series)&&!ue,ge=J?.series??[],re=q??!1,{seriesCount:ye,groupedByState:Be}=F(ge),ve=(0,s.useCallback)(Se=>{const We=N.filter(De=>Se.refId!==De.refId).map(De=>({value:De.refId,label:De.refId}));switch(Se.type){case C.Tz.math:return s.createElement(a.z,{onChange:X,query:Se,labelWidth:"auto",onRunQuery:()=>{}});case C.Tz.reduce:return s.createElement(v.Z,{onChange:X,refIds:We,labelWidth:"auto",query:Se});case C.Tz.resample:return s.createElement(g.C,{onChange:X,query:Se,labelWidth:"auto",refIds:We});case C.Tz.classic:return s.createElement(y.z,{onChange:X,query:Se,refIds:We});case C.Tz.threshold:return s.createElement(P.O,{onChange:X,query:Se,labelWidth:"auto",refIds:We,onError:ie,useHysteresis:!0});case C.Tz.sql:return s.createElement(b.k,{onChange:X,query:Se,refIds:We});default:return s.createElement(s.Fragment,null,"Expression not supported: ",Se.type)}},[X,N,ie]),ke=C.uQ.find(Se=>Se.value===ne)?.description??"";return s.createElement("div",{className:(0,t.cx)(j.expression.wrapper,re&&j.expression.alertCondition,ne===C.Tz.classic&&j.expression.classic,ne!==C.Tz.classic&&j.expression.nonClassic)},s.createElement("div",{className:j.expression.stack},s.createElement(K,{refId:z.refId,queryType:ne,onRemoveExpression:()=>k(z.refId),onUpdateRefId:Se=>me(z.refId,Se),onUpdateExpressionType:Se=>ee(z.refId,Se),onSetCondition:le,query:z,alertCondition:re}),s.createElement("div",{className:j.expression.body},G&&s.createElement(u.F,{title:"Expression failed",severity:"error"},G.message),H&&s.createElement(u.F,{title:"Expression warning",severity:"warning"},H.message),s.createElement("div",{className:j.expression.description},ke),ve(z)),be&&s.createElement(s.Fragment,null,s.createElement(B,{series:ge,isAlertCondition:q}),s.createElement("div",{className:j.footer},s.createElement(f.B,{direction:"row",alignItems:"center"},s.createElement(O.h,null),s.createElement(U,{isCondition:!!q,firing:Be[D.cF.Firing].length,normal:Be[D.cF.Inactive].length,seriesCount:ye}))))))},R=20,B=({series:N,isAlertCondition:z})=>{const{pageItems:J,previousPage:G,nextPage:H,numberOfPages:q,pageStart:le,pageEnd:me}=(0,T.W)(N,1,R),k=(0,c.of)(V),ee=(0,x.PI)(N),X=!ee&&(0,l.jq)(N),j=q>1;return s.createElement("div",{className:k.expression.results},!ee&&X&&s.createElement("div",null,J.map((ne,te)=>s.createElement(L,{key:(0,n.uniqueId)(),frame:ne,index:le+te,isAlertCondition:z}))),!ee&&!X&&J.map((ne,te)=>s.createElement(w,{key:(0,n.uniqueId)(),frame:ne,index:le+te,isAlertCondition:z})),ee&&s.createElement("div",{className:(0,t.cx)(k.expression.noData,k.mutedText)},"No data"),j&&s.createElement("div",{className:k.pagination.wrapper,"data-testid":"paginate-expression"},s.createElement(f.B,null,s.createElement(d.$n,{variant:"secondary",fill:"outline",onClick:G,icon:"angle-left",size:"sm","aria-label":"previous-page"}),s.createElement(O.h,null),s.createElement("span",{className:k.mutedText},le," - ",me," of ",N.length),s.createElement(O.h,null),s.createElement(d.$n,{variant:"secondary",fill:"outline",onClick:H,icon:"angle-right",size:"sm","aria-label":"next-page"}))))},U=({firing:N,normal:z,isCondition:J,seriesCount:G})=>{const{mutedText:H}=(0,c.of)(V);return G===0?s.createElement("span",{className:H},"No series"):J?s.createElement("span",{className:H},`${G} series: ${N} firing, ${z} normal`):s.createElement("span",{className:H},`${G} series`)};function F(N){const z=N.filter(H=>(0,x.Lm)(H)===void 0).length,J={[D.cF.Firing]:N.filter(H=>(0,x.Lm)(H)!==void 0&&(0,x.Lm)(H)!==0),[D.cF.Inactive]:N.filter(H=>(0,x.Lm)(H)===0)},G=N.length-z;return{groupedByState:J,seriesCount:G}}const K=({refId:N,queryType:z,onUpdateRefId:J,onRemoveExpression:G,onSetCondition:H,alertCondition:q,query:le})=>{const me=(0,c.of)(V),k=(0,c.of)(d.my),[ee,X]=(0,s.useState)(!1),ne=ee!==!1&&ee==="refId";return s.createElement("header",{className:me.header.wrapper},s.createElement(f.B,{direction:"row",gap:.5,alignItems:"center"},s.createElement(f.B,{direction:"row",gap:1,alignItems:"center"},!ne&&s.createElement("button",{type:"button",className:(0,t.cx)(k,me.editable),onClick:()=>X("refId")},s.createElement("div",{className:me.expression.refId},N)),ne&&s.createElement(E.D,{autoFocus:!0,defaultValue:N,minWidth:5,onChange:te=>{J(te.currentTarget.value),X(!1)},onFocus:te=>te.target.select(),onBlur:te=>{J(te.currentTarget.value),X(!1)}}),s.createElement("div",null,(0,C.NI)(z))),s.createElement(O.h,null),s.createElement(p.a,{onSetCondition:()=>H(le.refId),isCondition:q}),s.createElement(h.K,{name:"trash-alt",variant:"secondary",className:me.mutedIcon,onClick:G,tooltip:"Remove expression"})))},w=({frame:N,index:z,isAlertCondition:J})=>{const G=(0,c.of)(V),H=(0,x.Jw)(N)||"Series "+z,q=(0,x.Lm)(N),le=(0,x.JQ)(N),me=Object.entries(le),k=me.length>0,ee=J&&q!==0,X=J&&q===0,j=`${k?"":H}${k?`{${(0,x.h6)(le)}}`:""}`;return s.createElement("div",{className:G.expression.resultsRow},s.createElement(f.B,{direction:"row",gap:1,alignItems:"center"},s.createElement("div",{className:G.expression.resultLabel,title:j},s.createElement("span",null,k?"":H),k&&s.createElement(s.Fragment,null,s.createElement("span",null,"{"),me.map(([ne,te],oe)=>s.createElement("span",{key:(0,n.uniqueId)()},s.createElement("span",{className:G.expression.labelKey},ne),s.createElement("span",null,"="),s.createElement("span",null,'"'),s.createElement("span",{className:G.expression.labelValue},te),s.createElement("span",null,'"'),oe<me.length-1&&s.createElement("span",null,", "))),s.createElement("span",null,"}"))),s.createElement("div",{className:G.expression.resultValue},q),ee&&s.createElement(S.C,{state:D.cF.Firing,size:"sm"}),X&&s.createElement(S.C,{state:D.cF.Inactive,size:"sm"})))},L=({frame:N,index:z})=>{const J=(0,c.of)(V),G=N.fields[1],H=G.labels,le=G.config?.displayNameFromDS??(H?(0,x.h6)(G.labels??{}):"Series "+z),me=N.fields[0].values,k=X=>N.fields[0].values[X],ee=X=>N.fields[1].values[X];return s.createElement("div",{className:J.expression.resultsRow},s.createElement(f.B,{direction:"row",alignItems:"center"},s.createElement("span",{className:(0,t.cx)(J.mutedText,J.expression.resultLabel),title:le},le),s.createElement("div",{className:J.expression.resultValue},s.createElement(M.j,{placement:"right",wrapperClassName:J.timeseriesTableWrapper,content:s.createElement("table",{className:J.timeseriesTable},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,"Timestamp"),s.createElement("th",null,"Value"))),s.createElement("tbody",null,me.map((X,j)=>s.createElement("tr",{key:j},s.createElement("td",{className:J.mutedText},(0,i.LE)(k(j))),s.createElement("td",{className:J.expression.resultValue},ee(j))))))},s.createElement("span",null,"Time series data")))))},V=N=>({expression:{wrapper:(0,t.css)`
      display: flex;
      border: solid 1px ${N.colors.border.medium};
      flex: 1;
      flex-basis: 400px;
      border-radius: ${N.shape.radius.default};
    `,stack:(0,t.css)`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      width: 100%;
      min-width: 0; // this one is important to prevent text overflow
    `,classic:(0,t.css)`
      max-width: 100%;
    `,nonClassic:(0,t.css)`
      max-width: 640px;
    `,alertCondition:(0,t.css)``,body:(0,t.css)`
      padding: ${N.spacing(1)};
      flex: 1;
    `,description:(0,t.css)`
      margin-bottom: ${N.spacing(1)};
      font-size: ${N.typography.size.xs};
      color: ${N.colors.text.secondary};
    `,refId:(0,t.css)`
      font-weight: ${N.typography.fontWeightBold};
      color: ${N.colors.primary.text};
    `,results:(0,t.css)`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;

      border-top: solid 1px ${N.colors.border.medium};
    `,noResults:(0,t.css)`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:(0,t.css)`
      padding: ${N.spacing(.75)} ${N.spacing(1)};

      &:nth-child(odd) {
        background-color: ${N.colors.background.secondary};
      }

      &:hover {
        background-color: ${N.colors.background.canvas};
      }
    `,labelKey:(0,t.css)`
      color: ${N.isDark?"#73bf69":"#56a64b"};
    `,labelValue:(0,t.css)`
      color: ${N.isDark?"#ce9178":"#a31515"};
    `,resultValue:(0,t.css)`
      text-align: right;
    `,resultLabel:(0,t.css)`
      flex: 1;
      overflow-x: auto;

      display: inline-block;
      white-space: nowrap;
    `,noData:(0,t.css)`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${N.spacing()};
    `},mutedText:(0,t.css)`
    color: ${N.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:(0,t.css)`
      background: ${N.colors.background.secondary};
      padding: ${N.spacing(.5)} ${N.spacing(1)};
      border-bottom: solid 1px ${N.colors.border.weak};
    `},footer:(0,t.css)`
    background: ${N.colors.background.secondary};
    padding: ${N.spacing(1)};
    border-top: solid 1px ${N.colors.border.weak};
  `,draggableIcon:(0,t.css)`
    cursor: grab;
  `,mutedIcon:(0,t.css)`
    color: ${N.colors.text.secondary};
  `,editable:(0,t.css)`
    padding: ${N.spacing(.5)} ${N.spacing(1)};
    border: solid 1px ${N.colors.border.weak};
    border-radius: ${N.shape.radius.default};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${N.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:(0,t.css)`
    max-height: 500px;

    overflow-y: scroll;
  `,timeseriesTable:(0,t.css)`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${N.spacing(1)};
    }

    td {
      background: ${N.colors.background.primary};
    }

    th {
      background: ${N.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${N.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `,pagination:{wrapper:(0,t.css)`
      border-top: 1px solid ${N.colors.border.medium};
      padding: ${N.spacing()};
    `}})},81875:(Y,I,e)=>{"use strict";e.d(I,{a:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(39938),o=e(55852);const m=({isCondition:i,onSetCondition:c})=>{const u=(0,r.of)(l);return i?n.createElement(s.E,{key:"condition",color:"green",icon:"check",text:"Alert condition"}):n.createElement("button",{key:"make-condition",type:"button",className:u.actionLink,onClick:()=>c&&c()},"Set as alert condition")},l=i=>{const c=(0,o.my)(i);return{actionLink:(0,t.css)`
      ${c};
      color: ${i.colors.text.link};
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      }
    `}}},99106:(Y,I,e)=>{"use strict";e.d(I,{EL:()=>c,JQ:()=>l,Jw:()=>o,Lm:()=>m,PI:()=>f,h6:()=>i,wf:()=>u});var t=e(2543),n=e.n(t),r=e(97706),s=e(57220);const o=d=>{const E=d.fields[0];return E?.config?.displayNameFromDS??d.name??E?.labels?.__name__},m=d=>{const E=d.fields[0]?.values[0];return Number.isFinite(E)?(0,r.h)(E,5):E},l=d=>d.fields[0]?.labels??{},i=d=>Object.entries(d).map(([E,h])=>E+"="+h).join(", "),c=d=>{const E=d.name;if((0,s.Eb)(d.rulesSource))return{name:E,parents:[]};try{const h=JSON.parse(E);if(!Array.isArray(h))throw new Error("not a nested Grafana folder");const y=(0,t.last)(h)??E,a=(0,t.dropRight)(h,1);return{name:y,parents:a}}catch{return{name:d.name,parents:[]}}},u=(d,E=[])=>JSON.stringify(E.concat(d)),f=d=>d.every(h=>h.fields.every(y=>y.values.every(a=>a==null)))},83225:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>r,builtinFunctions:()=>o,conf:()=>i,keywords:()=>m,language:()=>l});var t=(c=>(c.Delimiter="delimiter",c.Keyword="keyword",c.Function="type.identifier",c.String="string",c.Variable="variable.name",c.Number="number",c.Comment="comment",c.Operator="operator",c.Identifier="idenfifier",c))(t||{}),n=(c=>(c.toUpper="toUpper",c.toLower="toLower",c.title="title",c.join="join",c.match="match",c.safeHtml="safeHtml",c.reReplaceAll="reReplaceAll",c.stringSlice="stringSlice",c))(n||{});const r=Object.values(n),o=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],m=["define","if","else","end","range","break","continue","template","block","with"],l={defaultToken:"",keywords:m,functions:[...o,...r],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},i={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},74685:(Y,I,e)=>{"use strict";e.d(I,{j:()=>u});var t=e(32196),n=e(96540),r=e(70713),s=e(19845),o=e(40845),m=e(28138),l=e(72519),i=e(56528),c=e(7921);const u=({data:d,thresholds:E,thresholdsType:h})=>{const y=(0,o.of)(f),a=(0,s.jq)(d.series),v=(0,c.yW)(d),g=h?{mode:h}:void 0,b={from:d.timeRange.from.valueOf(),to:d.timeRange.to.valueOf()};return n.createElement("div",{className:y.wrapper},n.createElement(r.Ay,{disableHeight:!0},({width:P})=>n.createElement("div",{style:{width:P}},a?n.createElement(l.y,{statusMessage:v,data:d.series,eventBus:m.A,height:300,width:P,absoluteRange:b,timeZone:"browser",onChangeTime:()=>{},splitOpenFn:()=>{},loadingState:d.state,thresholdsConfig:E,thresholdsStyle:g}):n.createElement("div",{className:y.instantVectorResultWrapper},n.createElement("header",{className:y.title},"Table"),n.createElement(i.GX,{series:d.series})))))},f=d=>({wrapper:(0,t.css)`
    width: 100%;
    position: relative;
  `,instantVectorResultWrapper:(0,t.css)`
    border: solid 1px ${d.colors.border.medium};
    border-radius: ${d.shape.radius.default};
    padding: 0;

    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
  `,title:(0,t.css)({label:"panel-title",padding:d.spacing(),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:d.typography.h6.fontSize,fontWeight:d.typography.h6.fontWeight})})},7921:(Y,I,e)=>{"use strict";e.d(I,{G0:()=>T,zy:()=>M,lb:()=>O,YG:()=>B,yW:()=>A,an:()=>p,I3:()=>P,xb:()=>D,_u:()=>R,yr:()=>S});var t=e(2543),n=e(19845),r=e(50082),s=e(39070),o=e(52622),m=e(2913),l=e(55907),i=e(69437),c=e(66718),u=e(86590),f=e(41811),d=e(34525);const E=(0,f.A)(h,(U,F)=>b(U[0])===b(F[0]));function h(U){const F=new d.TS,K=U.map(w=>w.refId);return F.createNodes(K),U.forEach(w=>{const L=w.refId;((0,i.f)(w.model)&&w.model.type==="math"?y(w.model.expression??""):[w.model.expression]).forEach(z=>{L&&z&&!(L===z)&&F.link(z,L)})}),F}function y(U){const F=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),K=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),w=Array.from(U.matchAll(F)).map(V=>V.groups?.var),L=Array.from(U.matchAll(K)).map(V=>V.groups?.var);return(0,t.compact)((0,t.uniq)([...w,...L]))}const a=(0,t.memoize)(v,(U,F)=>U+g(F));function v(U,F){const K=F.getNode(U);let w=[];function L(V){const N=V.inputEdges;N.length>0?N.forEach(z=>{z.inputNode&&L(z.inputNode)}):w?.push(V)}return L(K),w.map(V=>V.name)}function g(U){return Object.keys(U.nodes).map(F=>{const K=U.nodes[F];let w=K.outputEdges.map(V=>V.outputNode?.name).join(", "),L=K.inputEdges.map(V=>V.inputNode?.name).join(", ");return`${K.name}:${w}:${L}`}).join(" ")}function b(U){return U.map(F=>{const K=(0,i.f)(F.model)?F.model.type:F.queryType;return F.refId+(F.model.expression??"")+K}).join()}function P(U,F,K){return U.map(w=>{if(F===K||!(0,i.f)(w.model))return w;const L=w.model.type==="math",V=w.model.type==="reduce",N=w.model.type==="resample",z=w.model.type==="classic_conditions",J=w.model.type==="threshold";if(L)return{...w,model:{...w.model,expression:C(w.model.expression??"",F,K)}};if(N||V||J){const G=w.model.expression===F;return{...w,model:{...w.model,expression:G?K:w.model.expression}}}if(z){const G=w.model.conditions?.map(H=>({...H,query:{...H.query,params:H.query.params.map(q=>q===F?K:q)}}));return{...w,model:{...w.model,conditions:G}}}return w})}function C(U,F,K){const w=new RegExp("(\\$"+F+"\\b)|(\\${"+F+"})","gm"),L="${"+K+"}";return U.replace(w,L)}function D(U,F){return U.find(K=>K.refId===F)!==void 0}function T(U){return U.includes("/")||U.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function M(U){if(U.series.length===0)return;const F=(0,n.jq)(U.series);let K;return F&&(K=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),K}function O(U){if(U.errors?.length)return new Error(U.errors[0].message)}function S(U){const K=(U[0]?.meta?.notices??[]).find(w=>w.severity==="warning")?.text;return K?new Error(K):void 0}function p(U,F){const K={},w=[c.Tz.threshold,c.Tz.classic];if(!F)return K;for(const N of U){if(!(0,i.f)(N.model)||!w.includes(N.model.type)||!Array.isArray(N.model.conditions)||N.model.refId!==F)continue;const z=N.model.conditions.some(x);N.model.conditions.forEach(J=>{const G=J.evaluator.params,H=J.query?.params[0]??N.model.expression;if(!H)return;const q=x(J);try{const le=E(U),me=a(H,le);U.filter(ee=>me.includes(ee.refId)).forEach(ee=>{const X=ee.refId,ne=!!(!(0,i.f)(ee?.model)&&X);X&&!K[X]&&(K[X]={config:{mode:r.O.Absolute,steps:[]},mode:o.Ly.Line}),X&&ne&&!q&&!z?L(X,G[0]):X&&ne&&q&&(V(X,G,J.evaluator.type),K[X].mode=o.Ly.LineAndArea)})}catch(le){console.error("Failed to parse thresholds",le);return}})}function L(N,z){K[N].config.steps.push({value:-1/0,color:"transparent"},{value:z,color:m.config.theme2.colors.error.main})}function V(N,z,J){J===l.p.IsWithinRange&&K[N].config.steps.push({value:-1/0,color:"transparent"},{value:z[0],color:m.config.theme2.colors.error.main},{value:z[1],color:m.config.theme2.colors.error.main},{value:z[1],color:"transparent"}),J===l.p.IsOutsideRange&&K[N].config.steps.push({value:-1/0,color:m.config.theme2.colors.error.main},{value:z[0],color:m.config.theme2.colors.error.main},{value:z[0],color:"transparent"},{value:z[1],color:m.config.theme2.colors.error.main}),K[N].config.steps.sort((G,H)=>G.value-H.value),K[N].config.steps=K[N].config.steps.filter(G=>G.value!==void 0)}return K}function x(U){return U.evaluator.type===l.p.IsWithinRange||U.evaluator.type===l.p.IsOutsideRange}function A(U){const F="Failed to fetch data";if(U.state!==s.Gu.Error)return;const K=U.errors;return K?.length?K.map(w=>w.message??F).join(", "):U.error?.message??F}function R(U=""){return U==="recording"?u.Z.cloudRecording:u.Z.grafana}function B(U,F){const K=F.filter(N=>!(0,i.f)(N.model)).map(N=>N.refId),w=U.filter(N=>!(0,i.f)(N.model)).map(N=>N.refId),[L,V]=(0,t.xor)(w,K);return[L,V]}},5179:(Y,I,e)=>{"use strict";e.d(I,{K:()=>r,k:()=>s});var t=e(96540);const n=t.createContext(void 0),r=({children:o,rule:m,identifier:l})=>{const i={rule:m,identifier:l};return t.createElement(n.Provider,{value:i},o)},s=()=>{const o=t.useContext(n);if(o===void 0)throw new Error("useAlertRule must be used within a AlertRuleContext");return o}},47775:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>mt,lf:()=>rn});var t=e(32196),n=e(2543),r=e(96540),s=e(67061),o=e(42418),m=e(40980),l=e(72109),i=e(94753),c=e(40845),u=e(55852),f=e(83277),d=e(94822),E=e(79741),h=e(55740),y=e(56361),a=e(23662),v=e(3704),g=e(69087),b=e(37959),P=e(48205),C=e(14778);const D=({component:pt,title:Qt="previous page"})=>{const on=(0,C.i)(),pn=(0,r.useCallback)(()=>{on(Qt)},[on,Qt]);return r.cloneElement(pt,{onClick:pn})};var T=e(99106),M=e(51921),O=e(26272),S=e(83122),p=e(38138),x=e(28138),A=e(19073),R=e(18461),B=e(90141),U=e(68291),F=e(5179);const K=({handleDelete:pt,handleDuplicateRule:Qt})=>{const{rule:on,identifier:pn}=(0,F.k)(),[fn,zn]=(0,A.mh)(on,A.j5.Update),aa=fn&&zn,[Zn,jn]=(0,A.mh)(on,A.j5.Delete),ga=Zn&&jn,[Ra,_a]=(0,A.mh)(on,A.j5.Duplicate),Za=Ra&&_a,[ms,rs]=(0,A.mh)(on,A.j5.Silence),Ja=ms&&rs,[Ns,ls]=(0,A.mh)(on,A.j5.ModifyExport),cs=Ns&&ls,ds=!(0,y.y$)()||(0,y.ES)(),ps=(0,y.S2)(on.namespace.rulesSource,on);return[aa&&r.createElement(V,{key:"edit-action",identifier:pn}),r.createElement(S.m,{key:"more-actions",overlay:r.createElement(p.W,null,Ja&&r.createElement(p.W.Item,{label:"Silence",icon:"bell-slash",url:(0,y.t7)(pn.ruleSourceName,on)}),ds&&r.createElement(U.d,{title:on.name,url:""}),Za&&r.createElement(p.W.Item,{label:"Duplicate",icon:"copy",onClick:()=>Qt(pn)}),r.createElement(p.W.Divider,null),r.createElement(p.W.Item,{label:"Copy link",icon:"share-alt",onClick:()=>w(ps)}),cs&&r.createElement(p.W.Item,{label:"Export",icon:"download-alt",childItems:[r.createElement(L,{key:"export-with-modifications",identifier:pn})]}),ga&&r.createElement(r.Fragment,null,r.createElement(p.W.Divider,null),r.createElement(p.W.Item,{label:"Delete",icon:"trash-alt",destructive:!0,onClick:()=>pt(on)})))},r.createElement(B.A,{size:"md"}))]};function w(pt){navigator.clipboard?.writeText(pt).then(()=>{x.A.emit(O.r1.alertSuccess,["URL copied to clipboard"])})}const L=({identifier:pt})=>{const Qt=location.pathname+location.search,on=(0,v.c)(`/alerting/${encodeURIComponent(R.$9(pt))}/modify-export`,{returnTo:Qt});return r.createElement(p.W.Item,{key:"with-modifications",label:"With modifications",icon:"file-edit-alt",url:on})},V=({identifier:pt})=>{const Qt=location.pathname+location.search,on=R.$9(pt),pn=(0,v.c)(`/alerting/${encodeURIComponent(on)}/edit`,{returnTo:Qt});return r.createElement(u.z9,{variant:"secondary",icon:"pen",href:pn},"Edit")};var N=e(96374),z=e(99140),J=e(23770),G=e(57220);const H=()=>{const[pt,Qt]=(0,r.useState)(),on=(0,r.useCallback)(()=>{Qt(void 0)},[]),pn=(0,r.useCallback)(aa=>{Qt(aa)},[]),fn=(0,r.useCallback)(aa=>{if(aa&&aa.rulerRule){const Zn=(0,R.P1)((0,G.EV)(aa.namespace.rulesSource),aa.namespace.name,aa.group.name,aa.rulerRule);(0,z.JD)((0,J.KH)(Zn,{navigateTo:"/alerting/list"})),on()}},[on]);return[(0,r.useMemo)(()=>r.createElement(N.u,{isOpen:!!pt,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:()=>fn(pt),onDismiss:on}),[fn,on,pt]),pn,on]};function q(){return r.createElement(o.F,{severity:"info",title:"This rule is part of a federated rule group.",bottomSpacing:0,topSpacing:2},r.createElement(s.B,{direction:"column"},"Federated rule groups are currently an experimental feature.",r.createElement(u.$n,{fill:"text",icon:"book"},r.createElement("a",{href:"https://grafana.com/docs/metrics-enterprise/latest/tenant-management/tenant-federation/#cross-tenant-alerting-and-recording-rule-federation"},"Read documentation"))))}const le=pt=>{const Qt=(0,c.of)(me,pt);return r.createElement(s.B,{direction:"row",gap:.5},r.createElement("div",{className:Qt.dot}))},me=(pt,Qt)=>{const on=pt.spacing(1.25),pn=`calc(${on} / 2.5)`,fn=Qt.color==="error",zn=Qt.color==="success",aa=Qt.color==="warning";return{dot:(0,t.css)`
      width: ${on};
      height: ${on};

      border-radius: 100%;

      background-color: ${pt.colors.secondary.main};
      outline: solid ${pn} ${pt.colors.secondary.transparent};
      margin: ${pn};

      ${zn&&(0,t.css)({backgroundColor:pt.colors.success.main,outlineColor:pt.colors.success.transparent})}

      ${aa&&(0,t.css)({backgroundColor:pt.colors.warning.main,outlineColor:pt.colors.warning.transparent})}

      ${fn&&(0,t.css)({backgroundColor:pt.colors.error.main,outlineColor:pt.colors.error.transparent})}
    `}},k=({health:pt})=>{const Qt=rn(pt),on=Qt?"error":"success",pn=Qt?"Recording error":"Recording";return r.createElement(X,{color:on,text:pn})},ee=({state:pt,health:Qt})=>{let on,pn;switch(pt){case d.cF.Inactive:pn="success",on="Normal";break;case d.cF.Firing:pn="error",on="Firing";break;case d.cF.Pending:pn="warning",on="Pending";break}return rn(Qt)&&(pn="error",on="Error"),Qt==="nodata"&&(pn="warning",on="No data"),r.createElement(X,{color:pn,text:on})};function X({color:pt,text:Qt}){return r.createElement(s.B,{direction:"row",gap:.5,wrap:"nowrap",flex:"0 0 auto"},r.createElement(le,{color:pt}),r.createElement(i.E,{variant:"bodySmall",color:pt},Qt))}var j=e(72095),ne=e(10534),te=e(55196),oe=e(16577),ie=(pt=>(pt.GrafanaManagedAlertRule="Grafana-managed alert rule",pt.CloudAlertRule="Cloud alert rule",pt.CloudRecordingRule="Cloud recording rule",pt))(ie||{});const ue=({rule:pt})=>{const Qt=(0,c.of)(ge);let on;(0,a.lT)(pt.rulerRule)?on="Grafana-managed alert rule":(0,a.i7)(pt.rulerRule)?on="Cloud recording rule":on="Cloud alert rule";const pn=pt.promRule?.evaluationTime,fn=pt.promRule?.lastEvaluation,zn=(0,r.useCallback)(()=>(0,a.lT)(pt.rulerRule)?pt.rulerRule.grafana_alert.uid:"",[pt.rulerRule]),aa=(0,a.i7)(pt.rulerRule)?void 0:pt.annotations??[],Zn=Number.isFinite(pn);return r.createElement(s.B,{direction:"column",gap:3},r.createElement("div",{className:Qt.metadataWrapper},r.createElement(te.P,{direction:"column"},"Rule type",r.createElement(i.E,{color:"primary"},on)),r.createElement(te.P,{direction:"column"},(0,a.lT)(pt.rulerRule)&&r.createElement(r.Fragment,null,"Rule Identifier",r.createElement(s.B,{direction:"row",alignItems:"center",gap:.5},r.createElement(i.E,{color:"primary"},pt.rulerRule.grafana_alert.uid,r.createElement(ne.b,{fill:"text",variant:"secondary",icon:"copy",size:"sm",getText:zn}))))),r.createElement(te.P,{direction:"column"},Zn&&r.createElement(r.Fragment,null,"Last evaluation",fn&&pn&&r.createElement("span",null,r.createElement(i.E,{color:"primary"},(0,j.B)(new Date(fn))," ago"),", took"," ",r.createElement(i.E,{color:"primary"},pn,"ms")))),r.createElement(te.P,{direction:"column"},!(0,a.i7)(pt.rulerRule)&&r.createElement(r.Fragment,null,"Pending period",r.createElement(i.E,{color:"primary"},pt.rulerRule?.for??"0s"))),(0,a.lT)(pt.rulerRule)&&r.createElement(r.Fragment,null,r.createElement(te.P,{direction:"column"},"Alert state if no data or all values are null",r.createElement(i.E,{color:"primary"},pt.rulerRule.grafana_alert.no_data_state)),r.createElement(te.P,{direction:"column"},"Alert state if execution error or timeout",r.createElement(i.E,{color:"primary"},pt.rulerRule.grafana_alert.exec_err_state)))),aa&&r.createElement(r.Fragment,null,r.createElement(i.E,{variant:"h4"},"Annotations"),Object.keys(aa).length===0?r.createElement(i.E,{variant:"bodySmall",color:"secondary",italic:!0},"No annotations"):r.createElement("div",{className:Qt.metadataWrapper},Object.entries(aa).map(([jn,ga])=>r.createElement(te.P,{direction:"column",key:jn},jn,r.createElement(be,{value:ga}))))))};function be({value:pt}){const Qt=pt&&pt.startsWith("http"),on=r.createElement(oe.Y,{input:pt,delimiter:["{{","}}"]});return Qt?r.createElement(l.Y,{variant:"bodySmall",href:pt,external:!0},pt):r.createElement(i.E,{color:"primary"},on)}const ge=pt=>({metadataWrapper:(0,t.css)({display:"grid",gridTemplateColumns:"auto auto",rowGap:pt.spacing(3),columnGap:pt.spacing(12)})});var re=e(32264),ye=e(46013);const Be=(0,r.lazy)(()=>e.e(7409).then(e.bind(e,87409))),ve=(0,r.lazy)(()=>e.e(1121).then(e.bind(e,31121))),Me=({rule:pt})=>{const Qt=re.$.unifiedAlerting.alertStateHistoryBackend,on=re.$.unifiedAlerting.alertStateHistoryPrimary,fn=[Qt,on].some(Zn=>Zn===ye.Q.Loki)?ye.Q.Loki:ye.Q.Annotations,zn=pt.grafana_alert.id??"",aa=pt.grafana_alert.uid;return r.createElement(r.Suspense,{fallback:"Loading..."},fn===ye.Q.Loki&&r.createElement(ve,{ruleUID:aa}),fn===ye.Q.Annotations&&r.createElement(Be,{alertId:zn}))};var ke=e(15054),Se=e(99938);const We=({rule:pt})=>r.createElement(Se.s,{rule:pt,pagination:{itemsPerPage:ke.FG},enableFiltering:!0});var De=e(24120),pe=e(39070),Ne=e(76885),Le=e(65879),He=e(11807),je=e(66602),at=e(39938),Ye=e(69437),$e=e(66718),xe=e(55907),Fe=e(26058),Ee=e(56528),se=e(7921),ae=e(74685);function fe({data:pt,thresholds:Qt}){return pt?r.createElement(ae.j,{data:pt,thresholds:Qt?.config,thresholdsType:Qt?.mode}):null}var Ce=e(20382),Re=e(63066),Oe=e(85828);const ze=({expression:pt})=>r.createElement(Oe.m,{options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastColumn:0,scrollBeyondLastLine:!1,lineNumbers:"off",cursorWidth:0,overviewRulerLanes:0},defaultLanguage:"sql",height:80,defaultValue:pt,width:"100%"});function Xe(pt){return"rawSql"in pt}const Ze=null,et=r.lazy(()=>e.e(8468).then(e.bind(e,58468))),nt=r.lazy(()=>e.e(7011).then(e.bind(e,67011)));function lt({model:pt,dataSource:Qt}){return Qt.type===G.ol.Prometheus&&(0,Re.Bu)(pt)?r.createElement(et,{query:pt.expr}):Qt.type===G.ol.Loki&&(0,Re.Bu)(pt)?r.createElement(nt,{query:pt.expr??""}):Xe(pt)?r.createElement(ze,{expression:pt.rawSql}):r.createElement("pre",null,r.createElement("code",null,(0,Ce.Bh)(pt)))}function rt({rule:pt,queries:Qt,condition:on,evalDataByQuery:pn={}}){const fn=(0,n.keyBy)(Object.values(re.$.datasources),ga=>ga.uid),zn=Qt.filter(ga=>!(0,Ye.f)(ga.model)),aa=Qt.filter(ga=>(0,Ye.f)(ga.model)),Zn=(0,c.of)(en),jn=(0,se.an)(Qt,on);return r.createElement(s.B,{gap:1,direction:"column",flex:"1 1 320px"},r.createElement("div",{className:Zn.maxWidthContainer},r.createElement(s.B,{gap:1,wrap:"wrap","data-testid":"queries-container"},zn.map(({model:ga,relativeTimeRange:Ra,refId:_a,datasourceUid:Za},ms)=>{const rs=fn[Za];return r.createElement(ut,{rule:pt,key:ms,refId:_a,isAlertCondition:on===_a,model:ga,relativeTimeRange:Ra,dataSource:rs,thresholds:jn[_a],queryData:pn[_a]})}))),r.createElement("div",{className:Zn.maxWidthContainer},r.createElement(s.B,{gap:1,wrap:"wrap","data-testid":"expressions-container"},aa.map(({model:ga,refId:Ra,datasourceUid:_a},Za)=>{const ms=fn[_a];return(0,Ye.f)(ga)&&r.createElement(Gt,{key:Za,refId:Ra,isAlertCondition:on===Ra,model:ga,dataSource:ms,evalData:pn[Ra]})}))))}function ut({refId:pt,rule:Qt,thresholds:on,model:pn,dataSource:fn,queryData:zn,relativeTimeRange:aa}){const Zn=(0,c.of)(Ut),jn=(0,Ye.f)(pn),[ga,Ra]=(0,A.mh)(Qt,A.j5.Explore),_a=ga&&Ra,Za=[];if(fn){const rs=fn.name??"[[Data source not found]]",Ja=fn.meta.info.logos.small;Za.push(r.createElement(Ct,{name:rs,imgUrl:Ja,key:"datasource"}))}aa&&Za.push(r.createElement(i.E,{color:"secondary",key:"timerange"},(0,Le.secondsToHms)(aa.from)," to now"));let ms;return!jn&&_a&&(ms=fn&&Et(fn,pn)),r.createElement(r.Fragment,null,r.createElement(Wt,{refId:pt,headerItems:Za,exploreLink:ms},r.createElement("div",{className:Zn.queryPreviewWrapper},r.createElement(je.Xw,null,pn&&fn&&r.createElement(lt,{model:pn,dataSource:fn})))),fn&&r.createElement(fe,{data:zn,thresholds:on}))}function Et(pt,Qt){const{uid:on,type:pn}=pt,{refId:fn,...zn}=Qt;return Ne.kM.renderUrl(`${re.$.appSubUrl}/explore`,{left:JSON.stringify({datasource:pt.uid,queries:[{refId:"A",...zn,datasource:{type:pn,uid:on}}],range:{from:"now-1h",to:"now"}})})}function Ct({name:pt,imgUrl:Qt}){const on=(0,c.of)(Ut);return r.createElement("div",{className:on.dataSource,key:"datasource"},r.createElement("img",{src:Qt,width:16,alt:pt}),pt)}const Ut=pt=>({queryPreviewWrapper:(0,t.css)`
    margin: ${pt.spacing(1)};
  `,contentBox:(0,t.css)`
    flex: 1 0 100%;
  `,visualization:(0,t.css)`
    padding: ${pt.spacing(1)};
  `,dataSource:(0,t.css)({border:`1px solid ${pt.colors.border.weak}`,borderRadius:pt.shape.radius.default,padding:pt.spacing(.5,1),display:"flex",alignItems:"center",gap:pt.spacing(1)})});function Gt({refId:pt,model:Qt,evalData:on,isAlertCondition:pn}){function fn(){switch(Qt.type){case $e.Tz.math:return r.createElement(Xt,{model:Qt});case $e.Tz.reduce:return r.createElement(ft,{model:Qt});case $e.Tz.resample:return r.createElement(_t,{model:Qt});case $e.Tz.classic:return r.createElement(Tt,{model:Qt});case $e.Tz.threshold:return r.createElement(dn,{model:Qt});case $e.Tz.sql:return r.createElement(He.l,{rawSql:Qt.expression||"",datasourceType:Qt.datasource?.type});default:return r.createElement(r.Fragment,null,"Expression not supported: ",Qt.type)}}return r.createElement(Wt,{refId:pt,headerItems:[r.createElement(i.E,{color:"secondary",key:"expression-type"},(0,n.startCase)(Qt.type))],isAlertCondition:pn},fn(),r.createElement(Fe.h,null),on&&r.createElement(Ee.GX,{series:on.series,isAlertCondition:pn}))}function Wt({refId:pt,headerItems:Qt=[],children:on,isAlertCondition:pn,exploreLink:fn}){const zn=(0,c.of)(ot);return r.createElement("div",{className:(0,t.cx)(zn.container)},r.createElement("header",{className:zn.header},r.createElement("span",{className:zn.refId},pt),Qt,r.createElement(Fe.h,null),pn&&r.createElement(at.E,{color:"green",icon:"check",text:"Alert condition"}),fn&&r.createElement(D,{component:r.createElement(u.z9,{size:"md",variant:"secondary",icon:"compass",href:fn},"View in Explore")})),on)}const ot=pt=>({container:(0,t.css)({flex:"1 0 25%",border:`1px solid ${pt.colors.border.weak}`,maxWidth:"100%",borderRadius:pt.shape.radius.default,display:"flex",flexDirection:"column"}),header:(0,t.css)`
    display: flex;
    align-items: center;
    gap: ${pt.spacing(1)};
    padding: ${pt.spacing(1)};
    background-color: ${pt.colors.background.secondary};
  `,textBlock:(0,t.css)({border:`1px solid ${pt.colors.border.weak}`,padding:pt.spacing(.5,1),backgroundColor:pt.colors.background.primary,borderRadius:pt.shape.radius.default}),refId:(0,t.css)({color:pt.colors.text.link,padding:pt.spacing(.5,1),border:`1px solid ${pt.colors.border.weak}`,borderRadius:pt.shape.radius.default})});function Tt({model:pt}){const Qt=(0,c.of)(Pn),on=(0,n.keyBy)(xe.A.reducerTypes,zn=>zn.value),pn=(0,n.keyBy)(xe.A.evalOperators,zn=>zn.value),fn=(0,n.keyBy)(xe.A.evalFunctions,zn=>zn.value);return r.createElement("div",{className:Qt.container},pt.conditions?.map(({query:zn,operator:aa,reducer:Zn,evaluator:jn},ga)=>{const Ra=Vn(jn);return r.createElement(r.Fragment,{key:ga},r.createElement("div",{className:Qt.blue},ga===0?"WHEN":!!aa?.type&&pn[aa?.type]?.text),r.createElement("div",{className:Qt.bold},Zn?.type&&on[Zn.type]?.text),r.createElement("div",{className:Qt.blue},"OF"),r.createElement("div",{className:Qt.bold},zn.params[0]),r.createElement("div",{className:Qt.blue},fn[jn.type].text),r.createElement("div",{className:Qt.bold},Ra?`(${jn.params[0]}; ${jn.params[1]})`:jn.params[0]))}))}const Pn=pt=>({container:(0,t.css)`
    padding: ${pt.spacing(1)};
    display: grid;
    grid-template-columns: max-content max-content max-content max-content max-content max-content;
    gap: ${pt.spacing(0,1)};
  `,...En(pt)});function ft({model:pt}){const Qt=(0,c.of)(Mt),{reducer:on,expression:pn,settings:fn}=pt,zn=$e.Cu.find(jn=>jn.value===on),aa=fn?.mode??$e.Mt.Strict,Zn=$e.HZ.find(jn=>jn.value===aa);return r.createElement("div",{className:Qt.container},r.createElement("div",{className:Qt.label},"Function"),r.createElement("div",{className:Qt.value},zn?.label),r.createElement("div",{className:Qt.label},"Input"),r.createElement("div",{className:Qt.value},pn),r.createElement("div",{className:Qt.label},"Mode"),r.createElement("div",{className:Qt.value},Zn?.label))}const Mt=pt=>({container:(0,t.css)`
    padding: ${pt.spacing(1)};
    display: grid;
    gap: ${pt.spacing(.5)};
    grid-template-rows: 1fr 1fr;
    grid-template-columns: 1fr 1fr 1fr 1fr;

    > :nth-child(6) {
      grid-column: span 3;
    }
  `,...En(pt)});function _t({model:pt}){const Qt=(0,c.of)(nn),{expression:on,window:pn,downsampler:fn,upsampler:zn}=pt,aa=$e.PN.find(jn=>jn.value===fn),Zn=$e.iX.find(jn=>jn.value===zn);return r.createElement("div",{className:Qt.container},r.createElement("div",{className:Qt.label},"Input"),r.createElement("div",{className:Qt.value},on),r.createElement("div",{className:Qt.label},"Resample to"),r.createElement("div",{className:Qt.value},pn),r.createElement("div",{className:Qt.label},"Downsample"),r.createElement("div",{className:Qt.value},aa?.label),r.createElement("div",{className:Qt.label},"Upsample"),r.createElement("div",{className:Qt.value},Zn?.label))}const nn=pt=>({container:(0,t.css)`
    padding: ${pt.spacing(1)};
    display: grid;
    gap: ${pt.spacing(.5)};
    grid-template-columns: 1fr 1fr 1fr 1fr;
    grid-template-rows: 1fr 1fr;
  `,...En(pt)});function dn({model:pt}){const Qt=(0,c.of)(en),{expression:on,conditions:pn}=pt,fn=pn&&pn[0]?.evaluator,zn=$e.zd.find(Ra=>Ra.value===fn?.type),aa=fn?Vn(fn):!1,Zn=pn&&pn[0]?.unloadEvaluator,jn=$e.zd.find(Ra=>Ra.value===Zn?.type),ga=Zn?Vn(Zn):!1;return r.createElement(r.Fragment,null,r.createElement("div",{className:Qt.container},r.createElement("div",{className:Qt.label},"Input"),r.createElement("div",{className:Qt.value},on),fn&&r.createElement(r.Fragment,null,r.createElement("div",{className:Qt.blue},zn?.label),r.createElement("div",{className:Qt.bold},aa?`(${fn.params[0]}; ${fn.params[1]})`:fn.params[0]))),r.createElement("div",{className:Qt.container},Zn&&r.createElement(r.Fragment,null,r.createElement("div",{className:Qt.label},"Stop alerting when "),r.createElement("div",{className:Qt.value},on),r.createElement(r.Fragment,null,r.createElement("div",{className:Qt.blue},jn?.label),r.createElement("div",{className:Qt.bold},ga?`(${Zn.params[0]}; ${Zn.params[1]})`:Zn.params[0])))))}const en=pt=>{const{blue:Qt,bold:on,...pn}=En(pt);return{...pn,maxWidthContainer:(0,t.css)`
      max-width: 100%;
    `,container:(0,t.css)`
      padding: ${pt.spacing(1)};
      display: flex;
      gap: ${pt.spacing(.5)};
    `,blue:(0,t.css)`
      ${Qt};
      margin: auto 0;
    `,bold:(0,t.css)`
      ${on};
      margin: auto 0;
    `}};function Xt({model:pt}){const Qt=(0,c.of)(en),{expression:on}=pt;return r.createElement("div",{className:Qt.container},r.createElement("div",{className:Qt.label},"Input"),r.createElement("div",{className:Qt.value},on))}const En=pt=>({blue:(0,t.css)`
    color: ${pt.colors.text.link};
  `,bold:(0,t.css)`
    font-weight: ${pt.typography.fontWeightBold};
  `,label:(0,t.css)`
    display: flex;
    align-items: center;
    padding: ${pt.spacing(.5,1)};
    background-color: ${pt.colors.background.secondary};
    font-size: ${pt.typography.bodySmall.fontSize};
    line-height: ${pt.typography.bodySmall.lineHeight};
    font-weight: ${pt.typography.fontWeightBold};
    border-radius: ${pt.shape.radius.default};
  `,value:(0,t.css)`
    padding: ${pt.spacing(.5,1)};
    border: 1px solid ${pt.colors.border.weak};
    border-radius: ${pt.shape.radius.default};
  `});function Vn(pt){return pt.type===xe.p.IsWithinRange||pt.type===xe.p.IsOutsideRange}var Wn=e(36135),na=e(28318),Bt=e(1932),ln=e(25968);function mn(pt){if(!pt)return[];const{namespace:Qt,rulerRule:on}=pt,{rulesSource:pn}=Qt;if((0,a.lT)(on)){const fn=on.grafana_alert.data;return Dn(fn,on.for,pt.group.interval)}if((0,G.Eb)(pn)){const fn=Fn(pn,pt);return[hn(fn,pn.uid)]}return[]}function Dn(pt,Qt,on){const pn=(0,ln.ge)(Qt)??(0,ln.ge)(on??"1m"),fn=Math.floor(pn/1e3);return pt.map(zn=>(0,Bt.jM)(zn,aa=>{const Zn=aa.relativeTimeRange?.from??0,jn=Math.max(fn*3,Zn+fn*2);aa.relativeTimeRange={from:jn,to:0}}))}function hn(pt,Qt){return{refId:pt.refId,datasourceUid:Qt,queryType:"",model:pt,relativeTimeRange:{from:360,to:0}}}function Fn(pt,Qt){const on="A";switch(pt.type){case"prometheus":return{refId:on,expr:Qt.query};case"loki":return{refId:on,expr:Qt.query};default:throw new Error(`Query for datasource type ${pt.type} is currently not supported by cloud alert rules.`)}}const wn=({rule:pt})=>{const Qt=(0,r.useMemo)(()=>new na.t,[]),on=(0,De.A)(Qt.get()),pn=Hn(on),fn=(0,r.useMemo)(()=>mn(pt),[pt]),{allDataSourcesAvailable:zn}=(0,Wn.g)(fn),aa=(0,r.useCallback)(()=>{if(fn.length>0&&zn){let jn;pt&&(0,a.lT)(pt.rulerRule)&&(jn=pt.rulerRule.grafana_alert.condition),Qt.run(fn,jn??"A")}},[fn,zn,pt,Qt]);(0,r.useEffect)(()=>{zn&&aa()},[zn,aa]),(0,r.useEffect)(()=>()=>Qt.destroy(),[Qt]);const Zn=(0,a.YN)(pt.group);return r.createElement(r.Fragment,null,pn?"Loading...":r.createElement(r.Fragment,null,(0,a.lT)(pt.rulerRule)&&!Zn&&r.createElement(rt,{rule:pt,condition:pt.rulerRule.grafana_alert.condition,queries:fn,evalDataByQuery:on}),!(0,a.lT)(pt.rulerRule)&&!Zn&&on&&Object.keys(on).length>0&&r.createElement(s.B,{direction:"column",gap:1},fn.map(jn=>r.createElement(ut,{key:jn.refId,rule:pt,refId:jn.refId,model:jn.model,dataSource:Object.values(re.$.datasources).find(ga=>ga.uid===jn.datasourceUid),queryData:on[jn.refId],relativeTimeRange:jn.relativeTimeRange,isAlertCondition:!1}))),!Zn&&!zn&&r.createElement(o.F,{title:"Query not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")))};function Hn(pt){return pt?!!Object.values(pt).find(Qt=>Qt.state===pe.Gu.Loading):!0}const An=()=>r.createElement(r.Fragment,null,"Routing");var In=(pt=>(pt.Query="query",pt.Instances="instances",pt.History="history",pt.Routing="routing",pt.Details="details",pt))(In||{});const kn=()=>{const{rule:pt}=(0,F.k)(),{pageNav:Qt,activeTab:on}=Rn(pt),[pn,fn]=(0,r.useState)(),[zn,aa]=H(),Zn=K({handleDuplicateRule:fn,handleDelete:aa}),{annotations:jn,promRule:ga}=pt,Ra=rn(pt.promRule?.health),_a=(0,a.Z8)(ga),Za=(0,a.YN)(pt.group),ms=(0,a.lT)(pt.rulerRule)&&!!pt.rulerRule.grafana_alert.provenance,rs=jn[h.YH.summary];return r.createElement(b.d,{pageNav:Qt,navId:"alert-list",isLoading:!1,renderTitle:Ja=>r.createElement(kt,{name:Ja,state:_a?ga.state:void 0,health:pt.promRule?.health,ruleType:pt.promRule?.type}),actions:Zn,info:Vt(pt),subTitle:r.createElement(s.B,{direction:"column"},rs,Za&&r.createElement(q,null),ms&&r.createElement(P.Yi,{resource:P.hk.AlertRule,bottomSpacing:0,topSpacing:2}),Ra&&r.createElement(o.F,{title:"Something went wrong when evaluating this alert rule",bottomSpacing:0,topSpacing:2},r.createElement("pre",{style:{marginBottom:0}},r.createElement("code",null,pt.promRule?.lastError??"No error message"))))},r.createElement(s.B,{direction:"column",gap:2},r.createElement(m.J,null,on==="query"&&r.createElement(wn,{rule:pt}),on==="instances"&&r.createElement(We,{rule:pt}),on==="history"&&(0,a.lT)(pt.rulerRule)&&r.createElement(Me,{rule:pt.rulerRule}),on==="routing"&&r.createElement(An,null),on==="details"&&r.createElement(ue,{rule:pt}))),zn,pn&&r.createElement(M.Z,{redirectTo:!0,identifier:pn,isProvisioned:ms,onDismiss:()=>fn(void 0)}))},Vt=pt=>{const{labels:Qt,annotations:on,group:pn}=pt,fn=[],zn=on[h.YH.runbookURL],aa=on[h.YH.dashboardUID],Zn=on[h.YH.panelID],jn=aa&&Zn,ga=aa,Ra=!(0,n.isEmpty)(Qt),_a=pn.interval;return zn&&fn.push({label:"Runbook",value:r.createElement(l.Y,{variant:"bodySmall",href:zn,external:!0},(0,n.truncate)(zn,{length:42}))}),jn?fn.push({label:"Dashboard and panel",value:r.createElement(D,{title:pt.name,component:r.createElement(l.Y,{variant:"bodySmall",href:(0,y.D2)(aa,Zn)},"View panel")})}):ga&&fn.push({label:"Dashboard",value:r.createElement(D,{title:pt.name,component:r.createElement(l.Y,{title:pt.name,variant:"bodySmall",href:(0,y.JM)(aa)},"View dashboard")})}),_a&&fn.push({label:"Evaluation interval",value:r.createElement(i.E,{color:"primary"},"Every ",_a)}),Ra&&fn.push({label:"Labels",value:r.createElement(g.m,{labels:Qt,size:"sm"})}),fn},zt=pt=>{const Qt=new URLSearchParams([["search",pt.map(([on,pn])=>`${on}:"${pn}"`).join(" ")]]);return(0,v.c)("/alerting/list?"+Qt.toString())},kt=({name:pt,state:Qt,health:on,ruleType:pn})=>{const fn=(0,c.of)(Kt),zn=pn===d.JS.Recording;return r.createElement("div",{className:fn.title},r.createElement(u.z9,{variant:"secondary",icon:"angle-left",href:"/alerting/list"}),r.createElement(i.E,{variant:"h1",truncate:!0},pt),Qt&&r.createElement(ee,{state:Qt,health:on}),zn&&r.createElement(k,{health:on}))},rn=pt=>pt==="error"||pt==="err";function yn(){const[pt,Qt]=(0,f.s)(),on=pt.tab;return[gn(on)?on:"query",zn=>{Qt({tab:zn})}]}function gn(pt){return typeof pt=="string"&&Object.values(In).includes(pt)}function Rn(pt){const[Qt,on]=yn(),{annotations:pn,promRule:fn}=pt,zn=pn[h.YH.summary],aa=(0,a.Z8)(fn),Zn=aa?(fn.alerts??[]).length:void 0,jn=(0,T.EL)(pt.namespace).name,ga=pt.group.name,Ra=(0,a.lT)(pt.rulerRule)&&aa,_a=(0,a.KB)(pt.promRule);return{pageNav:{...E.defaultPageNav,text:pt.name,subTitle:zn,children:[{text:"Query and conditions",active:Qt==="query",onClick:()=>{on("query")}},{text:"Instances",active:Qt==="instances",onClick:()=>{on("instances")},tabCounter:Zn,hideFromTabs:_a},{text:"History",active:Qt==="history",onClick:()=>{on("history")},hideFromTabs:!Ra},{text:"Details",active:Qt==="details",onClick:()=>{on("details")}}],parentItem:{text:ga,url:zt([["namespace",jn],["group",ga]]),parentItem:{text:jn,url:zt([["namespace",jn]])}}},activeTab:Qt}}const Kt=()=>({title:(0,t.css)({display:"flex",alignItems:"center",gap:8,minWidth:0})}),mt=kn},80045:(Y,I,e)=>{"use strict";e.d(I,{D:()=>P});var t=e(96540),n=e(8249),r=e(47232),s=e(74135),o=e(23662),m=e(69087),l=e(75591),i=e(4402),c=e(83122),u=e(29158),f=e(24401),d=e(30973);const E=({rule:D,instance:T,extensionPointId:M})=>{const[O,S]=(0,t.useState)(),x=h({instance:T,rule:D},M);if(x.length===0)return null;const A=t.createElement(d.w,{extensions:x,onSelect:S});return t.createElement(t.Fragment,null,t.createElement(c.m,{placement:"bottom-start",overlay:A},t.createElement(u.K,{name:"ellipsis-v","aria-label":"Actions",variant:"secondary"})),!!O&&!!O.path&&t.createElement(f.s,{path:O.path,title:O.title,onDismiss:()=>S(void 0)}))};function h(D,T){return(0,t.useMemo)(()=>{const{extensions:M}=(0,i.Kf)({extensionPointId:T,context:D,limitPerPlugin:3});return M},[D,T])}var y=e(33225),a=e(71223),v=e(84396);const g=({instance:D})=>{const T=(0,y.Hx)(D.annotations),M=(0,y.gO)(T);return t.createElement("div",null,D.value&&t.createElement(v.X,{label:"Value",horizontal:!0},D.value),T.map(([O,S])=>t.createElement(a.s,{key:O,annotationKey:O,value:S,valueLink:M.get(O)})))};var b=e(30423);const P=({rule:D,instances:T,pagination:M,footerRow:O})=>{const S=(0,t.useMemo)(()=>T.length>1?(0,n.yO)(T.map(x=>x.labels)):{},[T]),p=(0,t.useMemo)(()=>T.map(x=>({data:{rule:D,alert:{...x,commonLabels:S}},id:(0,o.RI)(x)})),[S,T,D]);return t.createElement(l.E,{cols:C,isExpandable:!0,items:p,renderExpandedContent:({data:x})=>t.createElement(g,{instance:x.alert}),pagination:M,footerRow:O})},C=[{id:"state",label:"State",renderCell:({data:{alert:{state:D}}})=>t.createElement(b.C,{state:D}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{alert:{labels:D,commonLabels:T}}})=>t.createElement(m.m,{labels:D,commonLabels:T,size:"sm"})},{id:"created",label:"Created",renderCell:({data:{alert:{activeAt:D}}})=>t.createElement(t.Fragment,null,D.startsWith("0001")?"-":(0,r.KQ)(D).format("YYYY-MM-DD HH:mm:ss")),size:"150px"},{id:"actions",label:"",renderCell:({data:{alert:D,rule:T}})=>t.createElement(E,{rule:T,instance:D,extensionPointId:s.S.AlertInstanceAction,key:"alert-instance-extension-point"}),size:"40px"}]},30423:(Y,I,e)=>{"use strict";e.d(I,{C:()=>s});var t=e(96540),n=e(23662),r=e(65415);const s=t.memo(({state:o,isPaused:m=!1,size:l="md",muted:i=!1})=>t.createElement(r.O,{state:(0,n.Wy)(o),size:l,muted:i},(0,n.XI)(o)," ",m?" (Paused)":""));s.displayName="AlertStateTag"},51921:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>m});var t=e(96540),n=e(58476),r=e(96374),s=e(55852),o=e(18461);function m({identifier:i,isProvisioned:c,redirectTo:u=!1,onDismiss:f}){const d=(0,n.zy)(),[E,h]=(0,t.useState)(c?"confirm":"redirect");if(E==="redirect"){const y=o.$9(i),a=d.pathname+d.search,v=new URLSearchParams({copyFrom:y,returnTo:u?a:""});return t.createElement(n.rd,{to:"/alerting/new?"+v.toString(),push:!0})}return t.createElement(r.u,{isOpen:E==="confirm",title:"Copy provisioned alert rule",body:t.createElement("div",null,t.createElement("p",null,"The new rule will ",t.createElement("strong",null,"not")," be marked as a provisioned rule."),t.createElement("p",null,"You will need to set a new evaluation group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>h("redirect"),onDismiss:f})}const l=t.forwardRef(({text:i,ruleIdentifier:c,isProvisioned:u,className:f},d)=>{const[E,h]=(0,t.useState)(!1);return t.createElement(t.Fragment,null,t.createElement(s.$n,{title:"Copy",className:f,size:"sm",key:"clone",variant:"secondary",icon:"copy",onClick:()=>h(!0),ref:d},i),E&&t.createElement(m,{identifier:c,isProvisioned:u,onDismiss:()=>h(!1)}))});l.displayName="CloneRuleButton"},15300:(Y,I,e)=>{"use strict";e.d(I,{Ys:()=>ye,DI:()=>Be});var t=e(32196),n=e(96540),r=e(72724),s=e(47232),o=e(40845),m=e(56034),l=e(97814),i=e(33225),c=e(23662),u=e(25968),f=e(69087),d=e(84396),E=e(2543),h=e(40672),y=e(14778),a=e(32264),v=e(55852),g=e(66864),b=e(83122),P=e(38138),C=e(14578),D=e(96374),T=e(31678),M=e(94822),O=e(19073),S=e(46013),p=e(23770),x=e(98164),A=e(55740),R=e(57220),B=e(56361),U=e(18461),F=e(68291),K=e(51921);const w=({rule:ke,rulesSource:Se})=>{const We=(0,o.of)(V),{group:De}=ke,{StateHistoryModal:pe,showStateHistoryModal:Ne}=(0,S.G)(),Le=(0,T.useDispatch)(),He=(0,y.i)(),[je,at]=(0,n.useState)(),[Ye,$e]=(0,n.useState)(void 0),xe=(0,R.z2)(Se)?Se:(0,x.F9)(Se.jsonData.alertmanagerUid)?.name,[Fe,Ee]=(0,O.mh)(ke,O.j5.Silence),[se,ae]=(0,O.mh)(ke,O.j5.Explore),fe=[],Ce=[],Re=[],Oe=()=>{if(je&&je.rulerRule){const nt=U.P1((0,R.EV)(je.namespace.rulesSource),je.namespace.name,je.group.name,je.rulerRule);Le((0,p.KH)(nt,{navigateTo:void 0})),at(void 0)}},ze=(0,c.YN)(De),Xe=(0,c.Z8)(ke.promRule)&&ke.promRule.state===M.cF.Firing,Ze=Fe&&Ee&&xe,et=()=>(0,B.S2)(Se,ke);if((0,R.Eb)(Se)&&se&&ae&&!ze&&fe.push(n.createElement(v.z9,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"_blank",href:(0,B.Yp)(Se,ke.query)},"See graph")),ke.annotations[A.YH.runbookURL]&&fe.push(n.createElement(v.z9,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"_blank",href:h.sQ.sanitizeUrl(ke.annotations[A.YH.runbookURL])},"View runbook")),ke.annotations[A.YH.dashboardUID]){const nt=ke.annotations[A.YH.dashboardUID],lt=a.$.featureToggles.returnToPrevious;if(nt){fe.push(n.createElement(v.z9,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:lt?void 0:"_blank",href:`d/${encodeURIComponent(nt)}`,onClick:()=>{He(ke.name)}},"Go to dashboard"));const rt=ke.annotations[A.YH.panelID];rt&&fe.push(n.createElement(v.z9,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:lt?void 0:"_blank",href:`d/${encodeURIComponent(nt)}?viewPanel=${encodeURIComponent(rt)}`,onClick:()=>{He(ke.name)}},"Go to panel"))}}return Ze&&fe.push(n.createElement(v.z9,{size:"sm",key:"silence",icon:"bell-slash",target:"_blank",href:(0,B.t7)(xe,ke)},"Silence")),(0,c.lT)(ke.rulerRule)&&fe.push(n.createElement(n.Fragment,{key:"history"},n.createElement(v.$n,{size:"sm",icon:"history",onClick:()=>(0,c.lT)(ke.rulerRule)&&Ne(ke.rulerRule)},"Show state history"),pe)),Xe&&L()&&fe.push(n.createElement(n.Fragment,{key:"declare-incident"},n.createElement(F.b,{title:ke.name,url:et()}))),fe.length||Ce.length||Re.length?n.createElement(n.Fragment,null,n.createElement("div",{className:We.wrapper},n.createElement(g.Gy,{width:"auto"},fe.length?fe:n.createElement("div",null)),n.createElement(g.Gy,{width:"auto"},Ce.length&&Ce,Re.length&&n.createElement(b.m,{overlay:n.createElement(P.W,null,Re.map(nt=>n.createElement(n.Fragment,{key:(0,E.uniqueId)("action_")},nt)))},n.createElement(v.$n,{variant:"secondary",size:"sm"},"More",n.createElement(C.I,{name:"angle-down"}))))),!!je&&n.createElement(D.u,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:Oe,onDismiss:()=>at(void 0)}),Ye&&n.createElement(K.Z,{identifier:Ye.identifier,isProvisioned:Ye.isProvisioned,onDismiss:()=>$e(void 0)})):null};function L(){return!(0,B.y$)()||(0,B.ES)()}const V=ke=>({wrapper:(0,t.css)`
    padding: 0 0 ${ke.spacing(2)} 0;
    gap: ${ke.spacing(1)};
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${ke.colors.border.medium};
  `});var N=e(71223);function z(ke){const Se=(0,o.of)(J),{annotations:We}=ke,De=(0,i.gO)(We);return We.length===0?null:n.createElement("div",{className:Se.annotations},We.map(([pe,Ne])=>n.createElement(N.s,{key:pe,annotationKey:pe,value:Ne,valueLink:De.get(pe)})))}const J=()=>({annotations:(0,t.css)`
    margin-top: 46px;
  `});var G=e(19347),H=e(66718);function q(ke){const{rulesSource:Se,rule:We}=ke,De=(0,o.of)(le),pe=(0,n.useMemo)(()=>{if((0,R.Eb)(Se))return[{name:Se.name,icon:Se.meta.info.logos.small}];if((0,c.lT)(We.rulerRule)){const{data:Ne}=We.rulerRule.grafana_alert,Le=Ne.reduce((He,je)=>{const at=(0,G.l)().getInstanceSettings(je.datasourceUid);return!at||at.uid===H.Uj||(He[at.name]={name:at.name,icon:at.meta.info.logos.small}),He},{});return Object.values(Le)}return[]},[We,Se]);return pe.length===0?null:n.createElement(d.X,{label:"Data source"},pe.map(({name:Ne,icon:Le},He)=>n.createElement("div",{key:Ne},Le&&n.createElement(n.Fragment,null,n.createElement("img",{alt:`${Ne} datasource logo`,className:De.dataSourceIcon,src:Le})," "),Ne)))}function le(ke){const Se=ke.spacing(2);return{dataSourceIcon:(0,t.css)`
      width: ${Se};
      height: ${Se};
    `}}var me=e(28848),k=e(29317),ee=e(41781),X=e(72307),j=e(71713),ne=e(69470),te=e(73750);const oe=({language:ke,expr:Se})=>{const We=(0,n.useMemo)(()=>[(0,ee.D)({onlyIn:pe=>"type"in pe&&pe.type==="code_block",getSyntax:()=>ke},{...me.languages,[ke]:ke==="logql"?j.Ay:ne.Ay})],[ke]),De=(0,n.useMemo)(()=>(0,X.mO)(Se),[Se]);return n.createElement(k.KE,{"data-testid":"expression-editor",plugins:We,value:De})},ie=({expression:ke,rulesSource:Se})=>{const We=(0,o.of)(ue);return n.createElement(te.L,{className:(0,t.cx)(We.well,"slate-query-field")},(0,R.Eb)(Se)?n.createElement(oe,{expr:ke,language:Se.type===R.ol.Loki?"logql":"promql"}):ke)},ue=ke=>({well:(0,t.css)`
    font-family: ${ke.typography.fontFamilyMonospace};
  `});function be(ke){const{annotations:Se,rulesSource:We,rule:De}=ke,pe=ge();return(0,R.Eb)(We)?n.createElement(d.X,{label:"Expression",horizontal:!0,className:(0,t.cx)({[pe.exprRow]:!!Se.length})},n.createElement(ie,{expression:De.query,rulesSource:We})):null}const ge=()=>({exprRow:(0,t.css)`
    margin-bottom: 46px;
  `});var re=e(99938);const ye=15,Be=({rule:ke})=>{const Se=(0,o.of)(Me),{namespace:{rulesSource:We}}=ke,De=(0,i.Hx)(ke.annotations);return n.createElement("div",null,n.createElement(w,{rule:ke,rulesSource:We}),n.createElement("div",{className:Se.wrapper},n.createElement("div",{className:Se.leftSide},n.createElement(ve,{rule:ke}),!!ke.labels&&!!Object.keys(ke.labels).length&&n.createElement(d.X,{label:"Labels",horizontal:!0},n.createElement(f.m,{labels:ke.labels})),n.createElement(be,{rulesSource:We,rule:ke,annotations:De}),n.createElement(z,{annotations:De})),n.createElement("div",{className:Se.rightSide},n.createElement(q,{rulesSource:We,rule:ke}))),n.createElement(d.X,{label:"Matching instances",horizontal:!0},n.createElement(re.s,{rule:ke,itemsDisplayLimit:ye})))},ve=({rule:ke})=>{let Se,We=ke.group.interval,De=ke.promRule?.lastEvaluation,pe=ke.promRule?.evaluationTime;return(0,c.i7)(ke.rulerRule)||(Se=ke.rulerRule?.for??"0s"),n.createElement(n.Fragment,null,We&&n.createElement(d.X,{label:"Evaluate",horizontal:!0},"Every ",We),n.createElement(d.X,{label:"Pending period",horizontal:!0},Se),De&&!(0,u.mo)(De)&&n.createElement(d.X,{label:"Last evaluation",horizontal:!0},n.createElement(m.m,{placement:"top",content:`${(0,r.LE)(De,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},n.createElement("span",null,`${(0,s.KQ)(De).locale("en").fromNow(!0)} ago`))),De&&!(0,u.mo)(De)&&pe!==void 0&&n.createElement(d.X,{label:"Evaluation time",horizontal:!0},n.createElement(m.m,{placement:"top",content:`${pe}s`,theme:"info"},n.createElement("span",null,(0,l.g)({timeInMs:pe*1e3,humanize:!0})))))},Me=ke=>({wrapper:(0,t.css)`
    display: flex;
    flex-direction: row;

    ${ke.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:(0,t.css)`
    flex: 1;
  `,rightSide:(0,t.css)`
    ${ke.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},99938:(Y,I,e)=>{"use strict";e.d(I,{s:()=>C});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(55852),m=e(53876),l=e(78369),i=e(60029),c=e(94354),u=e(94822);const f=({className:M,onStateFilterChange:O,stateFilter:S,filterType:p,itemPerStateStats:x})=>{const A=(0,s.of)(d),R=w=>function(){return x&&x[w]?r.createElement(l.v,{name:x[w].toFixed(0),colorIndex:9,className:A.tag}):null},B=Object.values(u.Gi).map(w=>({label:w,value:w,component:R(w)})),F=[u.cF.Firing,u.cF.Pending].map(w=>({label:(0,n.capitalize)(w),value:w,component:R(w)})),K=p==="grafana"?B:F;return r.createElement("div",{className:M,"data-testid":"alert-instance-state-filter"},r.createElement(i.J,null,"State"),r.createElement(c.z,{options:K,value:S,onChange:O,onClick:w=>{w===S&&O(void 0)}}))};function d(M){return{tag:(0,t.css)`
      font-size: 11px;
      font-weight: normal;
      padding: ${M.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${M.spacing(.5)};
    `}}var E=e(98164),h=e(56361),y=e(64861),a=e(57220),v=e(23662),g=e(80045),b=e(92467);function P({stats:M,onClick:O,href:S}){const p=(0,s.of)(T);return r.createElement("div",{className:p.footerRow},r.createElement("div",null,"Showing ",M.visibleItemsCount," out of ",M.totalItemsCount," instances"),r.createElement(o.z9,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:O,href:S},"Show all ",M.totalItemsCount," alert instances"))}function C(M){const{rule:O,itemsDisplayLimit:S=Number.POSITIVE_INFINITY,pagination:p,enableFiltering:x=!1}=M,{promRule:A,namespace:R,instanceTotals:B}=O,[U,F]=(0,r.useState)(),[K,w]=(0,r.useState)(),[L]=(0,r.useState)(Math.floor(Math.random()*100)),V=`queryString-${L}`,N=(0,s.of)(T),z=(0,a.z2)(R.rulesSource)?a.hY:"prometheus",J=(0,r.useMemo)(()=>(0,v.Z8)(A)&&A.alerts?.length?D(U,K,(0,h.Cp)(y.xB.Importance,A.alerts)):[],[A,K,U]);if(!(0,v.Z8)(A))return null;const G=J.slice(0,S),H=(0,n.countBy)(A.alerts,ne=>(0,u.lh)(ne.state)),q=(0,n.sum)([B.alerting,B.inactive,B.pending,B.nodata]),le=q-G.length,me={totalItemsCount:q,visibleItemsCount:G.length},k=(0,h.w$)(R.rulesSource,M.rule,location.pathname+location.search),ee=(0,b.kc)(B),X=()=>w(void 0),j=le?r.createElement(P,{stats:me,onClick:x?X:void 0,href:x?void 0:k}):void 0;return r.createElement(r.Fragment,null,x&&r.createElement("div",{className:(0,t.cx)(N.flexRow,N.spaceBetween)},r.createElement("div",{className:N.flexRow},r.createElement(m.X,{key:V,defaultQueryString:U,onFilterChange:ne=>F(ne)}),r.createElement(f,{filterType:z,stateFilter:K,onStateFilterChange:w,itemPerStateStats:H}))),!x&&r.createElement("div",{className:N.stats},ee),r.createElement(g.D,{rule:O,instances:G,pagination:p,footerRow:j}))}function D(M,O,S){let p=[...S];if(M){const x=(0,E.J$)(M||"");p=p.filter(({labels:A})=>(0,E.Av)(A,x))}return O&&(p=p.filter(x=>(0,u.lh)(x.state)===O)),p}const T=M=>({flexRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${M.spacing(1)};
      gap: ${M.spacing(1)};
    `,spaceBetween:(0,t.css)`
      justify-content: space-between;
    `,footerRow:(0,t.css)`
      display: flex;
      flex-direction: column;
      gap: ${M.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:(0,t.css)`
      margin-bottom: ${M.spacing(2)};
    `,stats:(0,t.css)`
      display: flex;
      gap: ${M.spacing(1)};
      padding: ${M.spacing(1,0)};
    `})},92467:(Y,I,e)=>{"use strict";e.d(I,{M_:()=>f,j7:()=>d,kc:()=>E});var t=e(2543),n=e.n(t),r=e(55127),s=e.n(r),o=e(96540),m=e(67061),l=e(39938),i=e(54317),c=e(94822);const u={recording:0,alerting:0,[c.cF.Pending]:0,[c.cF.Inactive]:0,paused:0,error:0,nodata:0},f=({namespaces:h})=>{const y={...u};h.forEach(({groups:b})=>{b.forEach(P=>{const C=(0,t.omitBy)(P.totals,t.isUndefined);for(let D in C)y[D]+=C[D]})});const a=E(y),v=!!a.length,g=(0,t.sum)(Object.values(y));return a.unshift(o.createElement(o.Fragment,{key:"total"},g," ",s()("rule",g))),o.createElement(m.B,{direction:"row"},v&&o.createElement("div",null,o.createElement(m.B,{gap:.5},a)))},d=({group:h})=>{const y=h.totals,a=h?.interval,v=E(y),g=!!v.length;return o.createElement(m.B,{direction:"row"},g&&o.createElement("div",null,o.createElement(m.B,{gap:.5},v)),a&&o.createElement(o.Fragment,null,o.createElement("div",null,"|"),o.createElement(l.E,{text:a,icon:"clock-nine",color:"blue"})))};function E(h){const y=[];return h[i.$.Alerting]&&y.push(o.createElement(l.E,{color:"red",key:"firing",text:`${h[i.$.Alerting]} firing`})),h.error&&y.push(o.createElement(l.E,{color:"red",key:"errors",text:`${h.error} errors`})),h.nodata&&y.push(o.createElement(l.E,{color:"blue",key:"nodata",text:`${h.nodata} no data`})),h[i.$.Pending]&&y.push(o.createElement(l.E,{color:"orange",key:"pending",text:`${h[i.$.Pending]} pending`})),h[i.$.Normal]&&h.paused&&y.push(o.createElement(l.E,{color:"green",key:"paused",text:`${h[i.$.Normal]} normal (${h.paused} paused)`})),h[i.$.Normal]&&!h.paused&&y.push(o.createElement(l.E,{color:"green",key:"inactive",text:`${h[i.$.Normal]} normal`})),h.recording&&y.push(o.createElement(l.E,{color:"purple",key:"recording",text:`${h.recording} recording`})),y}},14618:(Y,I,e)=>{"use strict";e.d(I,{s:()=>ue});var t=e(32196),n=e(72880),r=e(91e3),s=e(96540),o=e(70416),m=e(47232),l=e(72724),i=e(40845),c=e(56034),u=e(15054),f=e(83903),d=e(55740),E=e(23662),h=e(75591),y=e(10562),a=e(48205),v=e(82437),g=e(16577),b=e(2543),P=e(58476),C=e(55852),D=e(10534),T=e(38138),M=e(67061),O=e(83122),S=e(14578),p=e(96374),x=e(3169),A=e(31678),R=e(19073),B=e(23770),U=e(57220),F=e(56361),K=e(18461),w=e(3704),L=e(51921);const V=re=>window.matchMedia(`(max-width: ${re}px)`).matches,N=({rule:re,rulesSource:ye})=>{const Be=(0,A.useDispatch)(),ve=(0,P.zy)(),Me=(0,x._2)(),ke=(0,i.of)(J),[Se,We]=(0,s.useState)(void 0),{namespace:De,group:pe,rulerRule:Ne}=re,[Le,He]=(0,s.useState)(),je=ve.pathname+ve.search,at=z(ve.pathname),Ye=(0,E.lT)(re.rulerRule)&&!!re.rulerRule.grafana_alert.provenance,[$e,xe]=(0,R.mh)(re,R.j5.Update),[Fe,Ee]=(0,R.mh)(re,R.j5.Delete),[se,ae]=(0,R.mh)(re,R.j5.Duplicate),[fe,Ce]=(0,R.mh)(re,R.j5.ModifyExport),Re=$e&&xe,Oe=Fe&&Ee,ze=se&&ae,Xe=fe&&Ce,Ze=[],et=[],nt=()=>{if(Le&&Le.rulerRule){const ut=K.P1((0,U.EV)(Le.namespace.rulesSource),Le.namespace.name,Le.group.name,Le.rulerRule);Be((0,B.KH)(ut,{navigateTo:at?"/alerting/list":void 0})),He(void 0)}},lt=()=>(0,F.S2)(ye,re),rt=(0,U.EV)(ye);if(at||Ze.push(s.createElement(c.m,{placement:"top",content:"View"},s.createElement(C.z9,{className:ke.button,title:"View",size:"sm",key:"view",variant:"secondary",icon:"eye",href:(0,F.w$)(ye,re,je)}))),Ne){const ut=K.P1(rt,De.name,pe.name,Ne);if(Re){const Et=(0,w.c)(`/alerting/${encodeURIComponent(K.$9(ut))}/edit`,{returnTo:je});Ze.push(s.createElement(c.m,{placement:"top",content:"Edit"},s.createElement(C.z9,{title:"Edit",className:ke.button,size:"sm",key:"edit",variant:"secondary",icon:"pen",href:Et})))}at&&Ze.push(s.createElement(D.b,{key:"copy",icon:"copy",onClipboardError:Et=>{Me.error("Error while copying URL",Et)},className:ke.button,size:"sm",getText:lt},"Copy link to rule")),ze&&et.push(s.createElement(T.W.Item,{label:"Duplicate",icon:"copy",onClick:()=>We({identifier:ut,isProvisioned:Ye})})),Xe&&et.push(s.createElement(T.W.Item,{label:"Modify export",icon:"edit",url:(0,w.c)(`/alerting/${encodeURIComponent(K.$9(ut))}/modify-export`,{returnTo:ve.pathname+ve.search})})),Oe&&et.push(s.createElement(T.W.Item,{label:"Delete",icon:"trash-alt",onClick:()=>He(re)}))}return Ze.length||et.length?s.createElement(s.Fragment,null,s.createElement(M.B,{gap:1},Ze.map((ut,Et)=>s.createElement(s.Fragment,{key:Et},ut)),et.length>0&&s.createElement(O.m,{overlay:s.createElement(T.W,null,et.map(ut=>s.createElement(s.Fragment,{key:(0,b.uniqueId)("action_")},ut)))},s.createElement(C.$n,{variant:"secondary",size:"sm"},"More",s.createElement(S.I,{name:"angle-down"})))),!!Le&&s.createElement(p.u,{isOpen:!0,title:"Delete rule",body:s.createElement("div",null,s.createElement("p",null,'Deleting "',s.createElement("strong",null,Le.name),'" will permanently remove it from your alert rule list.'),s.createElement("p",null,"Are you sure you want to delete this rule?")),confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:nt,onDismiss:()=>He(void 0)}),Se&&s.createElement(L.Z,{identifier:Se.identifier,isProvisioned:Se.isProvisioned,onDismiss:()=>We(void 0)})):null};function z(re){return re.endsWith("/view")}const J=re=>({button:(0,t.css)`
    padding: 0 ${re.spacing(2)};
  `});var G=e(32264),H=e(82775);function q({rule:re}){const ye=(0,i.of)(le),{exceedsLimit:Be}=(0,s.useMemo)(()=>(0,H.q)(re.group.interval),[re.group.interval]);return Be?s.createElement(c.m,{theme:"error",content:s.createElement("div",null,"A minimum evaluation interval of"," ",s.createElement("span",{className:ye.globalLimitValue},G.$.unifiedAlerting.minInterval)," has been configured in Grafana and will be used instead of the ",re.group.interval," interval configured for the Rule Group.")},s.createElement(S.I,{name:"stopwatch-slash",className:ye.icon})):null}function le(re){return{globalLimitValue:(0,t.css)`
      font-weight: ${re.typography.fontWeightBold};
    `,icon:(0,t.css)`
      fill: ${re.colors.warning.text};
    `}}var me=e(15300),k=e(47775);const ee=({rule:re})=>{const ye=(0,i.of)(X);return(0,k.lf)(re.health)?s.createElement(c.m,{theme:"error",content:re.lastError||"No error message provided."},s.createElement("div",{className:ye.warn},s.createElement(S.I,{name:"exclamation-triangle"}),s.createElement("span",null,"error"))):s.createElement(s.Fragment,null,re.health)},X=re=>({warn:(0,t.css)`
    display: inline-flex;
    flex-direction: row;
    align-items: center;
    gap: ${re.spacing(1)};

    color: ${re.colors.warning.text};
  `});var j=e(62930),ne=e(94822),te=e(30423);const oe=({rule:re,isDeleting:ye,isCreating:Be,isPaused:ve})=>{const Me=(0,i.of)(ie),{promRule:ke}=re,Se=(0,s.useMemo)(()=>{if(ke&&(0,E.Z8)(ke)&&ke.alerts?.length&&ke.state!==ne.cF.Inactive){const We=ke.activeAt?new Date(ke.activeAt):(0,E.Om)(ke);if(We)return s.createElement("span",{title:String(We),className:Me.for},"for"," ",(0,o.dU)({start:We,end:new Date},!1))}return null},[ke,Me]);return ye?s.createElement(M.B,{gap:1},s.createElement(j.y,null),"Deleting"):Be?s.createElement(M.B,{gap:1},s.createElement(j.y,null),"Creating"):ke&&(0,E.Z8)(ke)?s.createElement(M.B,{gap:1},s.createElement(te.C,{state:ke.state,isPaused:ve}),Se):ke&&(0,E.KB)(ke)?s.createElement(s.Fragment,null,"Recording rule"):s.createElement(s.Fragment,null,"n/a")},ie=re=>({for:(0,t.css)`
    font-size: ${re.typography.bodySmall.fontSize};
    color: ${re.colors.text.secondary};
    white-space: nowrap;
    padding-top: 2px;
  `}),ue=({rules:re,className:ye,showGuidelines:Be=!1,emptyMessage:ve="No rules found.",showGroupColumn:Me=!1,showSummaryColumn:ke=!1,showNextEvaluationColumn:Se=!1})=>{const We=(0,i.of)(be),De=(0,t.cx)(We.wrapper,ye,{[We.wrapperMargin]:Be}),pe=(0,s.useMemo)(()=>re.map((He,je)=>({id:`${He.namespace.name}-${He.group.name}-${He.name}-${je}`,data:He})),[re]),Ne=ge(ke,Me,Se);if(!re.length)return s.createElement("div",{className:(0,t.cx)(De,We.emptyMessage)},ve);const Le=Be?y.B:h.E;return s.createElement("div",{className:De,"data-testid":"rules-table"},s.createElement(Le,{cols:Ne,isExpandable:!0,items:pe,renderExpandedContent:({data:He})=>s.createElement(me.DI,{rule:He}),pagination:{itemsPerPage:u.FG},paginationStyles:We.pagination}))},be=re=>({wrapperMargin:(0,t.css)`
    ${re.breakpoints.up("md")} {
      margin-left: 36px;
    }
  `,emptyMessage:(0,t.css)`
    padding: ${re.spacing(1)};
  `,wrapper:(0,t.css)`
    width: auto;
    border-radius: ${re.shape.radius.default};
  `,pagination:(0,t.css)`
    display: flex;
    margin: 0;
    padding-top: ${re.spacing(1)};
    padding-bottom: ${re.spacing(.25)};
    justify-content: center;
    border-left: 1px solid ${re.colors.border.medium};
    border-right: 1px solid ${re.colors.border.medium};
    border-bottom: 1px solid ${re.colors.border.medium};
  `});function ge(re,ye,Be){const{hasRuler:ve,rulerRulesLoaded:Me}=(0,f.y)(),ke=(0,s.useCallback)(Se=>{const We=Se.promRule?.lastEvaluation&&(0,o.vd)(Se.promRule.lastEvaluation),De=Se.group.interval&&(0,o.di)(Se.group.interval);if(!We||!De||(0,E.HH)(Se))return;const pe=(0,o.E9)(Se.group.interval),Ne=Date.parse(Se.promRule?.lastEvaluation||""),Le=(0,o.Ri)(Ne,pe);return(0,n.Y)(Le,new Date)?{humanized:`within ${(0,r.a)(pe)}`,fullDate:`within ${(0,r.a)(pe)}`}:{humanized:`in ${(0,m.KQ)(Le).locale("en").fromNow(!0)}`,fullDate:(0,l.LE)(Le,{format:"YYYY-MM-DD HH:mm:ss"})}},[]);return(0,s.useMemo)(()=>{const Se=[{id:"state",label:"State",renderCell:({data:We})=>{const{namespace:De}=We,{rulesSource:pe}=De,{promRule:Ne,rulerRule:Le}=We,He=!!(ve(pe)&&Me(pe)&&Ne&&!Le),je=!!(ve(pe)&&Me(pe)&&Le&&!Ne),at=(0,E.HH)(We);return s.createElement(oe,{rule:We,isDeleting:He,isCreating:je,isPaused:at})},size:"165px"},{id:"name",label:"Name",renderCell:({data:We})=>We.name,size:Be?4:5},{id:"provisioned",label:"",renderCell:({data:We})=>{const De=We.rulerRule;return(0,E.lT)(De)&&De.grafana_alert.provenance?s.createElement(a.rS,null):null},size:"100px"},{id:"warnings",label:"",renderCell:({data:We})=>s.createElement(q,{rule:We}),size:"45px"},{id:"health",label:"Health",renderCell:({data:{promRule:We,group:De}})=>We?s.createElement(ee,{rule:We}):null,size:"75px"}];return re&&Se.push({id:"summary",label:"Summary",renderCell:({data:We})=>s.createElement(g.Y,{input:We.annotations[d.YH.summary]??""}),size:Be?4:5}),Be&&Se.push({id:"nextEvaluation",label:"Next evaluation",renderCell:({data:We})=>{const De=ke(We);return De&&s.createElement(c.m,{placement:"top",content:`${De?.fullDate}`,theme:"info"},s.createElement("span",null,De?.humanized))},size:2}),ye&&Se.push({id:"group",label:"Group",renderCell:({data:We})=>{const{namespace:De,group:pe}=We;return pe.name==="default"?s.createElement(v.c,{namespace:De.name}):s.createElement(v.c,{namespace:De.name,group:pe.name})},size:5}),Se.push({id:"actions",label:"Actions",renderCell:({data:We})=>s.createElement(N,{rule:We,rulesSource:We.namespace.rulesSource}),size:"200px"}),Se},[re,ye,Be,ve,Me,ke])}},19073:(Y,I,e)=>{"use strict";e.d(I,{Ej:()=>v,Hl:()=>T,L7:()=>D,QI:()=>f,RY:()=>E,e2:()=>a,iI:()=>C,j5:()=>d,mh:()=>g});var t=e(96540),n=e(16233),r=e(60021),s=e(31678),o=e(82843),m=e(70383),l=e(75471),i=e(57220),c=e(23662),u=e(97009),f=(S=>(S.ViewExternalConfiguration="view-external-configuration",S.UpdateExternalConfiguration="update-external-configuration",S.CreateContactPoint="create-contact-point",S.ViewContactPoint="view-contact-point",S.UpdateContactPoint="edit-contact-points",S.DeleteContactPoint="delete-contact-point",S.ExportContactPoint="export-contact-point",S.CreateNotificationTemplate="create-notification-template",S.ViewNotificationTemplate="view-notification-template",S.UpdateNotificationTemplate="edit-notification-template",S.DeleteNotificationTemplate="delete-notification-template",S.DecryptSecrets="decrypt-secrets",S.CreateNotificationPolicy="create-notification-policy",S.ViewNotificationPolicyTree="view-notification-policy-tree",S.UpdateNotificationPolicyTree="update-notification-policy-tree",S.DeleteNotificationPolicy="delete-notification-policy",S.ExportNotificationPolicies="export-notification-policies",S.ViewAutogeneratedPolicyTree="view-autogenerated-policy-tree",S.CreateSilence="create-silence",S.ViewSilence="view-silence",S.UpdateSilence="update-silence",S.ViewMuteTiming="view-mute-timing",S.CreateMuteTiming="create-mute-timing",S.UpdateMuteTiming="update-mute-timing",S.DeleteMuteTiming="delete-mute-timing",S.ExportMuteTimings="export-mute-timings",S))(f||{}),d=(S=>(S.Duplicate="duplicate-alert-rule",S.View="view-alert-rule",S.Update="update-alert-rule",S.Delete="delete-alert-rule",S.Explore="explore-alert-rule",S.Silence="silence-alert-rule",S.ModifyExport="modify-export-rule",S))(d||{}),E=(S=>(S.CreateAlertRule="create-alert-rule",S.ViewAlertRule="view-alert-rule",S.UpdateAlertRule="update-alert-rule",S.DeleteAlertRule="delete-alert-rule",S.ExportGrafanaManagedRules="export-grafana-managed-rules",S.CreateExternalAlertRule="create-external-alert-rule",S.ViewExternalAlertRule="view-external-alert-rule",S.UpdateExternalAlertRule="update-external-alert-rule",S.DeleteExternalAlertRule="delete-external-alert-rule",S))(E||{});const h=!0,y=!1,a=()=>({"create-alert-rule":O(h,s.AccessControlAction.AlertingRuleCreate),"view-alert-rule":O(h,s.AccessControlAction.AlertingRuleRead),"update-alert-rule":O(h,s.AccessControlAction.AlertingRuleUpdate),"delete-alert-rule":O(h,s.AccessControlAction.AlertingRuleDelete),"export-grafana-managed-rules":O(h,s.AccessControlAction.AlertingRuleRead),"create-external-alert-rule":O(h,s.AccessControlAction.AlertingRuleExternalWrite),"view-external-alert-rule":O(h,s.AccessControlAction.AlertingRuleExternalRead),"update-external-alert-rule":O(h,s.AccessControlAction.AlertingRuleExternalWrite),"delete-external-alert-rule":O(h,s.AccessControlAction.AlertingRuleExternalWrite)}),v=S=>a()[S];function g(S,p){const x=P(S);return(0,t.useMemo)(()=>x[p],[x,p])}function b(S,p){const x=P(S);return useMemo(()=>p.map(A=>x[A]),[x,p])}function P(S){const p=S.namespace.rulesSource,x=typeof p=="string"?p:p.name,A=(0,c.lT)(S.rulerRule)&&!!S.rulerRule.grafana_alert.provenance,R=(0,c.YN)(S.group),B=(0,c.lT)(S.rulerRule),U=A||R,{isEditable:F,isRemovable:K,isRulerAvailable:w=!1,loading:L}=(0,u.g)(x,S.rulerRule),[V,N]=v("export-grafana-managed-rules"),z=L?y:w,J=U?y:z,G=(0,l.Wd)(x),H=M(p);return{"duplicate-alert-rule":O(z,G.create),"view-alert-rule":O(h,G.read),"update-alert-rule":[J,F??!1],"delete-alert-rule":[J,K??!1],"explore-alert-rule":O(h,s.AccessControlAction.DataSourcesExplore),"silence-alert-rule":H,"modify-export-rule":[B,N]}}function C(){const{selectedAlertmanager:S,hasConfigurationAPI:p,isGrafanaAlertmanager:x}=(0,m.VI)(),A=(0,l.lV)(S),R=(0,l.jy)(S),B=n.TP.hasRole("Admin")||n.TP.isGrafanaAdmin;return{"view-external-configuration":O(h,s.AccessControlAction.AlertingNotificationsExternalRead),"update-external-configuration":O(p,s.AccessControlAction.AlertingNotificationsExternalWrite),"create-contact-point":O(p,A.create),"view-contact-point":O(h,A.read),"edit-contact-points":O(p,A.update),"delete-contact-point":O(p,A.delete),"export-contact-point":O(x,A.read),"create-notification-template":O(p,A.create),"view-notification-template":O(h,A.read),"edit-notification-template":O(p,A.update),"delete-notification-template":O(p,A.delete),"create-notification-policy":O(p,A.create),"view-notification-policy-tree":O(h,A.read),"update-notification-policy-tree":O(p,A.update),"delete-notification-policy":O(p,A.delete),"export-notification-policies":O(x,A.read),"decrypt-secrets":O(x,A.provisioning.readSecrets),"view-autogenerated-policy-tree":[x,B],"create-silence":O(h,R.create),"view-silence":O(h,R.read),"update-silence":O(h,R.update),"create-mute-timing":O(p,A.create),"view-mute-timing":O(h,A.read),"update-mute-timing":O(p,A.update),"delete-mute-timing":O(p,A.delete),"export-mute-timings":O(x,A.read)}}function D(S){const p=C();return(0,t.useMemo)(()=>p[S],[p,S])}function T(S){const p=C();return(0,t.useMemo)(()=>S.map(x=>p[x]),[p,S])}function M(S){const p=S===i.hY,{useGetAlertmanagerChoiceStatusQuery:x}=o.m,{currentData:A,isLoading:R}=x(void 0,{skip:!p});if(!p||R)return[!1,!1];const B=A?.alertmanagersChoice===r.nA.External,U=A?.alertmanagersChoice===r.nA.All;return O(!B||U,s.AccessControlAction.AlertingInstanceCreate)}const O=(S,p)=>[S,n.TP.hasPermission(p)]},62190:(Y,I,e)=>{"use strict";e.d(I,{W:()=>r});var t=e(96540),n=e(57220);function r(s){return(0,t.useMemo)(()=>(0,n.sq)(s),[s])}},36135:(Y,I,e)=>{"use strict";e.d(I,{g:()=>s});var t=e(96540),n=e(19347),r=e(26657);function s(o){return{allDataSourcesAvailable:(0,t.useMemo)(()=>o.filter(l=>!(0,r.s9)(l.datasourceUid)).every(l=>!!(0,n.l)().getInstanceSettings(l.datasourceUid)),[o])}}},730:(Y,I,e)=>{"use strict";e.d(I,{O3:()=>P,ZU:()=>v,we:()=>h});var t=e(96540),n=e(16817),r=e(31678),s=e(79938),o=e(77583),m=e(23770),l=e(57220),i=e(88467),c=e(18461),u=e(23662),f=e(9518),d=e(61410);function E(C,D){const T=y(D),M=useCombinedRuleNamespaces(D),O=useMemo(()=>{if(!C||!D||M.length===0)return[];const S=[];for(const p of M)for(const x of p.groups)for(const A of x.rules)A.name===C&&S.push(A);return S},[C,D,M]);return{...T,result:O}}function h(C,D,T){const M=(0,l.oh)(D),{dsFeatures:O,isLoadingDsFeatures:S}=P(D),{currentData:p,isLoading:x,error:A}=s.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:D,ruleName:C,namespace:T?.namespace,groupName:T?.groupName}),[R]=s.hK.endpoints.rulerRuleGroup.useLazyQuery(),{loading:B,error:U,value:F}=(0,n.A)(async()=>{if(!M)throw new Error("Unable to obtain data source settings");if(A)throw new Error("Unable to obtain Prometheus rules");const K=p||[],w=[];if(O?.rulerConfig){const N=O.rulerConfig,z=K.map(J=>J.groups.map(G=>({namespace:J,group:G}))).flat();await Promise.allSettled(z.map(async J=>{const G=await R({rulerConfig:N,namespace:J.namespace.name,group:J.group.name}).unwrap();w.push(G)}))}return K.map(N=>(0,f.O6)(M,N,w)).flatMap(N=>N.groups.flatMap(z=>z.rules))},[M,O,x,A,p,R]);return{loading:S||B,error:U,rules:F}}function y(C,D){const T=useDispatch(),M=useUnifiedAlertingSelector(A=>A.promRules),O=a(C,M),S=useUnifiedAlertingSelector(A=>A.rulerRules),p=a(C,S),{loading:x}=useAsync(async()=>{C&&await T(fetchPromAndRulerRulesAction({rulesSourceName:C,identifier:D}))},[T,C]);return{loading:x,error:O.error??isRulerNotSupportedResponse(p)?void 0:p.error,dispatched:O.dispatched&&p.dispatched}}function a(C,D){if(!C)return initialAsyncRequestState;const T=D[C];return T||initialAsyncRequestState}function v({ruleIdentifier:C}){const{ruleSourceName:D}=C,T=(0,l.oh)(D),{dsFeatures:M,isLoadingDsFeatures:O}=P(D),{currentData:S,isLoading:p,error:x}=s.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:C.ruleSourceName,namespace:(0,u.Mj)(C)||(0,u.X4)(C)?C.namespace:void 0,groupName:(0,u.Mj)(C)||(0,u.X4)(C)?C.groupName:void 0,ruleName:(0,u.Mj)(C)||(0,u.X4)(C)?C.ruleName:void 0}),[A,{currentData:R,isLoading:B,error:U}]=s.hK.endpoints.rulerRuleGroup.useLazyQuery(),[F,{currentData:K,isLoading:w,error:L}]=s.hK.endpoints.rulerRules.useLazyQuery();(0,t.useEffect)(()=>{M?.rulerConfig&&(M.rulerConfig&&(0,u.X4)(C)?A({rulerConfig:M.rulerConfig,namespace:C.namespace,group:C.groupName}):(0,u.A4)(C)&&F({rulerConfig:M.rulerConfig}))},[M,A,F,C]);const V=(0,t.useMemo)(()=>{if(S){if((0,u.A4)(C)){const N=(0,f.Ph)("grafana",S,K);for(const z of N)for(const J of z.groups)for(const G of J.rules){const H=c.UP(D,G);if(c.LC(H,C))return G}}if(T&&S.length>0&&((0,u.X4)(C)||(0,u.Mj)(C))){const N=S.map(z=>(0,f.O6)(T,z,R?[R]:[]));for(const z of N)for(const J of z.groups)for(const G of J.rules){const H=c.UP(D,G);if(c.LC(H,C))return G}}}},[C,D,S,R,K,T]);return{loading:O||p||B||w,error:x??U??L,result:V}}const b={rulerConfig:{dataSourceName:l.hY,apiVersion:"legacy"}};function P(C){const D=(0,l.z2)(C),{currentData:T,isLoading:M}=o.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:C},{skip:D});return D?{isLoadingDsFeatures:!1,dsFeatures:b}:{isLoadingDsFeatures:M,dsFeatures:T}}},9518:(Y,I,e)=>{"use strict";e.d(I,{Jr:()=>E,NW:()=>g,O6:()=>f,Ph:()=>u,Tj:()=>b,Ug:()=>v,dy:()=>c});var t=e(2543),n=e.n(t),r=e(96540),s=e(54317),o=e(94822),m=e(57220),l=e(23662),i=e(61410);function c(S,p){const x=(0,i.$)(U=>U.promRules),A=(0,i.$)(U=>U.rulerRules),R=(0,r.useRef)({}),B=(0,r.useMemo)(()=>{if(S){const U=(0,m.Zw)(S);if(!U)throw new Error(`Unknown rules source: ${S}`);return[U]}return(0,m.lS)()},[S]);return(0,r.useMemo)(()=>B.map(U=>{const F=(0,m.Eb)(U)?U.name:U,K=A[F]?.result;let w=x[F]?.result;F===m.hY&&p&&(w=p);const L=R.current[F];if(L&&L.promRules===w&&L.rulerRules===K)return L.result;const V={};Object.entries(K||{}).forEach(([z,J])=>{const G={rulesSource:U,name:z,groups:[]};(0,l.lT)(J[0].rules[0])&&(G.uid=J[0].rules[0].grafana_alert.namespace_uid),V[z]=G,y(G,J)}),w?.forEach(({name:z,groups:J})=>{const G=V[z]=V[z]||{rulesSource:U,name:z,groups:[]};a(G,J)});const N=Object.values(V);return R.current[F]={promRules:w,rulerRules:K,result:N},N}).flat(),[x,A,B,p])}function u(S,p,x){const A={};return Object.entries(x||{}).forEach(([R,B])=>{const U={rulesSource:S,name:R,groups:[]};A[R]=U,y(U,B)}),p?.forEach(({name:R,groups:B})=>{const U=A[R]=A[R]||{rulesSource:S,name:R,groups:[]};a(U,B)}),Object.values(A)}function f(S,p,x){const A={rulesSource:S,name:p.name,groups:[]};return y(A,x),a(A,p.groups),A.groups.forEach(R=>{R.rules=R.rules.filter(B=>B.promRule)}),A}function d(S,p,x){return y(S,x),a(S,p),S}function E(S){return S.map(p=>{const x={...p,groups:[]};return x.groups.push({name:"default",rules:h(p.groups.flatMap(A=>A.rules)),totals:P(p.groups)}),x})}function h(S){return S.sort((p,x)=>p.name.localeCompare(x.name))}function y(S,p=[]){S.groups=p.map(x=>{const A=x.rules.filter(U=>(0,l.i7)(U)).length,R=x.rules.filter(U=>(0,l.lT)(U)&&U.grafana_alert.is_paused).length,B={name:x.name,interval:x.interval,source_tenants:x.source_tenants,rules:[],totals:{paused:R,recording:A}};return B.rules=x.rules.map(U=>D(U,S,B)),B})}function a(S,p){const x=new Map;S.groups.forEach(A=>x.set(A.name,A)),p.forEach(A=>{let R=x.get(A.name);R||(R={name:A.name,rules:[],totals:b(A)},S.groups.push(R),x.set(A.name,R)),R.totals={...R.totals,...b(A)};const B=new Map;R.rules.forEach(U=>{const F=B.get(U.name);F?F.push(U):B.set(U.name,[U])}),(A.rules??[]).forEach(U=>{const F=T(U,B,S.rulesSource);F?(F.promRule=U,F.instanceTotals=(0,l.Z8)(U)?v(U):{},F.filteredInstanceTotals=(0,l.Z8)(U)?g(U):{}):R.rules.push(C(U,S,R))})})}function v(S){const p=(0,t.countBy)(S.alerts,"state");if(S.totals){const{normal:x,...A}=S.totals;return{...A,inactive:x}}return{alerting:p[s.$.Alerting]||p.firing,pending:p[s.$.Pending],inactive:p[s.$.Normal],nodata:p[s.$.NoData],error:p[s.$.Error]||p.err||void 0}}function g(S){if(S.totalsFiltered){const{normal:p,...x}=S.totalsFiltered;return{...x,inactive:p}}return{}}function b(S){if(S.totals){const{firing:R,...B}=S.totals;return{...B,alerting:R}}const p=(0,t.countBy)(S.rules,R=>(0,l.Z8)(R)&&R.state),x=(0,t.countBy)(S.rules,R=>R.health),A=S.rules.filter(R=>(0,l.KB)(R)).length;return{alerting:p[o.cF.Firing],error:x.error,nodata:x.nodata,inactive:p[o.cF.Inactive],pending:p[o.cF.Pending],recording:A}}function P(S){const p={};return S.forEach(x=>{const A=x.totals;Object.entries(A).forEach(([R,B])=>{p[R]||(p[R]=0),p[R]+=B})}),p}function C(S,p,x){return{name:S.name,query:S.query,labels:S.labels||{},annotations:(0,l.Z8)(S)?S.annotations||{}:{},promRule:S,namespace:p,group:x,instanceTotals:(0,l.Z8)(S)?v(S):{},filteredInstanceTotals:(0,l.Z8)(S)?g(S):{}}}function D(S,p,x){return(0,l.$y)(S)?{name:S.alert,query:S.expr,labels:S.labels||{},annotations:S.annotations||{},rulerRule:S,namespace:p,group:x,instanceTotals:{},filteredInstanceTotals:{}}:(0,l.i7)(S)?{name:S.record,query:S.expr,labels:S.labels||{},annotations:{},rulerRule:S,namespace:p,group:x,instanceTotals:{},filteredInstanceTotals:{}}:{name:S.grafana_alert.title,query:"",labels:S.labels||{},annotations:S.annotations||{},rulerRule:S,namespace:p,group:x,instanceTotals:{},filteredInstanceTotals:{}}}function T(S,p,x){const A=p.get(S.name);if(!A)return;if((0,m.z2)(x))return A[0];const R=A.find(U=>!U.promRule&&M(U,S,!0));if(R)return R;const B=A.find(U=>!U.promRule&&M(U,S,!1));if(B)return B}function M(S,p,x=!0){return S.name===p.name?(0,t.isEqual)([x?O(S.query):"",S.labels,S.annotations],[x?O(p.query):"",p.labels||{},(0,l.Z8)(p)?p.annotations||{}:{}]):!1}function O(S){return S.length>1&&S[0]==="("&&S[S.length-1]===")"&&(S=S.slice(1,-1)),S=S.replace(/\s|\n/g,""),S.split("").sort().join("")}},11167:(Y,I,e)=>{"use strict";e.d(I,{a:()=>m});var t=e(96540),n=e(31678),r=e(23770),s=e(88467),o=e(61410);function m(l){const i=(0,n.useDispatch)(),c=(0,o.$)(u=>u.folders);if((0,t.useEffect)(()=>{l&&i((0,r.Om)(l))},[i,l]),l){const u=c[l]||s.jA;return{folder:u.result,loading:u.loading}}return{loading:!1}}},83903:(Y,I,e)=>{"use strict";e.d(I,{y:()=>s});var t=e(96540),n=e(57220),r=e(61410);function s(){const o=(0,r.$)(i=>i.rulerRules),m=(0,t.useCallback)(i=>{const c=typeof i=="string"?i:i.name;return c===n.hY||!!o[c]?.result},[o]),l=(0,t.useCallback)(i=>{const c=(0,n.EV)(i);return!!o[c]?.result},[o]);return{hasRuler:m,rulerRulesLoaded:l}}},97009:(Y,I,e)=>{"use strict";e.d(I,{g:()=>l});var t=e(16233),n=e(77583),r=e(75471),s=e(23662),o=e(11167),m=e(61410);function l(i,c){const u=(0,m.$)(P=>P.dataSources),{currentData:f,isLoading:d}=n.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:i}),E=c&&(0,s.lT)(c)?c.grafana_alert.namespace_uid:void 0,h=(0,r.Wd)(i),{folder:y,loading:a}=(0,o.a)(E);if(!c)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,s.lT)(c)){if(!E)throw new Error(`Rule ${c.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!y)return{isRulerAvailable:!0,isEditable:!1,isRemovable:!1,loading:a};const P=t.TP.hasPermissionInMetadata(h.update,y),C=t.TP.hasPermissionInMetadata(h.delete,y);return{isRulerAvailable:!0,isEditable:P,isRemovable:C,loading:a||d}}const v=!!u[i]?.result?.rulerConfig||!!f?.rulerConfig,g=t.TP.hasPermission(h.update),b=t.TP.hasPermission(h.delete);return{isRulerAvailable:v,isEditable:g&&v,isRemovable:b&&v,loading:d||u[i]?.loading}}},98439:(Y,I,e)=>{"use strict";e.d(I,{W:()=>s});var t=e(2543),n=e.n(t),r=e(96540);function s(o,m=1,l){const[i,c]=(0,r.useState)(m),u=(0,r.useMemo)(()=>(0,t.chunk)(o,l),[o,l]),f=u.length,d=u[i-1]??[],E=(i-1)*l+1,h=(0,t.clamp)(i*l,o.length),y=(0,r.useCallback)(g=>{c((0,t.clamp)(g,1,u.length))},[c,u]),a=(0,r.useCallback)(()=>y(i+1),[i,y]),v=(0,r.useCallback)(()=>y(i-1),[i,y]);return(0,r.useEffect)(()=>c(1),[f]),{page:i,onPageChange:y,numberOfPages:f,pageItems:d,pageStart:E,pageEnd:h,nextPage:a,previousPage:v}}},27747:(Y,I,e)=>{"use strict";e.d(I,{S:()=>c});var t=e(96540),n=e(31678),r=e(23770),s=e(55740),o=e(57220),m=e(88467),l=e(9518),i=e(61410);function c({dashboardUID:u,panelId:f,poll:d=!1}){const E=(0,n.useDispatch)(),h=(0,i.$)(P=>P.promRules[o.hY])??m.jA,y=(0,i.$)(P=>P.rulerRules[o.hY])??m.jA;(0,t.useEffect)(()=>{const P=()=>{E((0,r.mB)({rulesSourceName:o.hY,filter:{dashboardUID:u,panelId:f}})),E((0,r.eB)({rulesSourceName:o.hY,filter:{dashboardUID:u,panelId:f}}))};if(P(),d){const C=setInterval(P,s.HH);return()=>{clearInterval(C)}}return()=>{}},[E,d,f,u]);const a=h.loading||y.loading,v=[h.error,y.error].filter(P=>!!P),g=(0,l.dy)(o.hY);return{rules:(0,t.useMemo)(()=>g.flatMap(P=>P.groups).flatMap(P=>P.rules).filter(P=>P.annotations[s.YH.dashboardUID]===u&&P.annotations[s.YH.panelID]===String(f)),[g,u,f]),errors:v,loading:a}}},12210:(Y,I,e)=>{"use strict";e.d(I,{_:()=>r});var t=e(16817),n=e(27716);function r(s){const{loading:o,error:m,value:l}=(0,t.A)(()=>(0,n.x)(s,{showErrorAlert:!1})),i=l&&!m&&!o,c=l?.enabled;return o&&!l?{loading:!0}:!i||!c?{loading:!1,installed:!1}:{loading:o,installed:!0,settings:l}}},46013:(Y,I,e)=>{"use strict";e.d(I,{G:()=>c,Q:()=>i});var t=e(32196),n=e(96540),r=e(32264),s=e(40845),o=e(37390);const m=(0,n.lazy)(()=>e.e(7409).then(e.bind(e,87409))),l=(0,n.lazy)(()=>e.e(1121).then(e.bind(e,31121)));var i=(f=>(f.Loki="loki",f.Annotations="annotations",f))(i||{});function c(){const[f,d]=(0,n.useState)(!1),[E,h]=(0,n.useState)(),y=(0,s.of)(u),a=r.$.unifiedAlerting.alertStateHistoryBackend,v=r.$.unifiedAlerting.alertStateHistoryPrimary,b=[a,v].some(T=>T==="loki")?"loki":"annotations",P=(0,n.useCallback)(()=>{h(void 0),d(!1)},[]),C=(0,n.useCallback)(T=>{h(T),d(!0)},[]);return{StateHistoryModal:(0,n.useMemo)(()=>E?n.createElement(o.a,{isOpen:f,onDismiss:P,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:y.modal,contentClassName:y.modalContent},n.createElement(n.Suspense,{fallback:"Loading..."},b==="loki"&&n.createElement(l,{ruleUID:E.grafana_alert.uid}),b==="annotations"&&n.createElement(m,{alertId:E.grafana_alert.id??""}))):null,[E,f,P,b,y]),showStateHistoryModal:C,hideStateHistoryModal:P}}const u=f=>({modal:(0,t.css)`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:(0,t.css)`
    height: 100%;
    width: 100%;
    padding: ${f.spacing(2)};
  `})},39964:(Y,I,e)=>{"use strict";e.d(I,{l:()=>s});var t=e(96540),n=e(58476),r=e(12131);function s(){const{search:o}=(0,n.zy)(),m=(0,t.useMemo)(()=>new URLSearchParams(o),[o]),l=(0,t.useCallback)((i,c)=>{r.Ny.partial(i,c)},[]);return[m,l]}},61410:(Y,I,e)=>{"use strict";e.d(I,{$:()=>r});var t=e(1081),n=e(31678);function r(s,o){return(0,n.useSelector)((0,t.Mz)(m=>m.unifiedAlerting,m=>s(m)),o)}},28475:(Y,I,e)=>{"use strict";e.d(I,{Jc:()=>V,kL:()=>z,XY:()=>N});var t=e(94822),n=e(23662);const r=1,s=2,o=3,m=4,l=5,i=6,c=7,u=8,f=9,d=10,E=11,h=12,y=13,a=0,v=1,g=2,b=3,P=4,C=5,D=6,T=7,M=8;var O=e(2543),S=e(48820);const p=S.U1.deserialize({version:14,states:"!vOQOPOOOuOPO'#CiOOOO'#Ci'#CiOQOPO'#CmOOOO'#Cj'#CjQQOPOOO!mOQO'#C^O!rOPO'#CkO!wOPO,59TOOOO,59X,59XOOOO-E6h-E6hOOOO,58x,58xOOOO,59V,59VOOOO-E6i-E6i",stateData:"$[~ORUOTUOUUOVUOWUOXUOYUOZUO[UObPOdQO~OcVOR]XT]XU]XV]XW]XX]XY]XZ]X[]Xb]Xd]X~OSZO~Ob[O~OcVOR]aT]aU]aV]aW]aX]aY]aZ]a[]ab]ad]a~OR~T~U~V~W~Y~Z~[~R[ZYXWVUTb~",goto:"{bPPcPPPPPPPPPPchnPtVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken DashboardToken FreeFormExpression",maxTerm:20,skippedNodes:[0],repeatNodeCount:2,tokenData:"#0PRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[Ia#[#]!$Z#]#`#Y#`#a!.m#a#b#Y#b#c!7g#c#f#Y#f#g!Fe#g#h!Mu#h#i#(o#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQdPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQcPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.kfSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h0P#h#i;{#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0WeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]1i#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1peSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V3R#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3YeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4k#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4reSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U6T#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6[eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7m#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7teSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#W#Y#W#X9V#X$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9^cSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]:i!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:pcSQ[Pqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR<SeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U=e#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR=leSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h>}#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?UeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@g#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@neSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jBP#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBWeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#gCi#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCpeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#WER#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREYeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YFk#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRFrcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]G}!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRHUcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRIheSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#gJy#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRKQeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#dLc#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLjeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jM{#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNSeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e! e#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! lcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!!w!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!#OcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!$beSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!%s#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%zeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!']#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'deSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(u#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(|eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!*_#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*feSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]!+w#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!,OcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!-Z!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-bcSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!.teSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!0V#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0^eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!1o#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1veSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!3X#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3`eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!4q#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4xcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!6T!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6[cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!7neSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!9P#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9WeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!:i#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!:peSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!<R#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<YeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!=k#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=reSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!?T#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?[eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!@m#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@teSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!BV#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!B^eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Co#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CvcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!ER!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EYcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!FleSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!G}#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HUeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!Ig#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IneSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!KP#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!KWcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!Lc!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LjcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!M|eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i# _#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# feSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U#!w#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR##OeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i#$a#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#$heSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y#%y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#&QcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#']!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#'dcSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR#(veSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n#*X#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#*`eSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e#+q#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#+xeSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y#-Z#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#-bcSQbPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#.m!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#.tcSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:123,nameSpaceFilter:125,labelFilter:127,groupFilter:129,ruleFilter:131,stateFilter:72,typeFilter:133,healthFilter:135,dashboardFilter:137},tokenPrec:139}),x={[o]:"datasource",[l]:"namespace",[i]:"label",[u]:"rule",[c]:"group",[f]:"state",[d]:"type",[E]:"health",[h]:"dashboard"};var A=(G=>(G.dataSource="dataSourceFilter",G.nameSpace="nameSpaceFilter",G.label="labelFilter",G.group="groupFilter",G.rule="ruleFilter",G.state="stateFilter",G.type="typeFilter",G.health="healthFilter",G.dashboard="dashboardFilter",G))(A||{});function R(G,H,q){K(G,H,le=>{if(le.type.id===s){const me=B(G,le);if(me.type&&me.value){const k=q[me.type];k&&k(me.value)}}else if(le.type.id===y){const me=q[y];me&&me(U(G,le))}})}function B(G,H){if(H.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const q=H.firstChild;if(!q)return{type:void 0,value:void 0};const le=H.getChild(m),me=le?(0,O.trim)(U(G,le),'"'):void 0;return{type:q.type.id,value:me}}function U(G,H){return G.slice(H.from,H.to).trim().replace(/\"/g,"")}function F(G,H,q){const le=[];K(G,H,k=>{k.type.id===s&&k.firstChild&&le.push(k.firstChild),k.type.id===y&&le.push(k)});let me=[];return le.forEach(k=>{const ee=q.findIndex(X=>X.type===k.type.id);if(ee!==-1){if(k.parent?.type.is(s)){const X=x[k.type.id],j=q.splice(ee,1)[0];me.push(`${X}:${w(j.value)}`)}if(k.type.is(y)){const X=q.splice(ee,1)[0];me.push(X.value)}}}),q.forEach(k=>{k.type===y?me.push(k.value):me.push(`${x[k.type]}:${w(k.value)}`)}),me.join(" ")}function K(G,H,q){const le=H.join(" ");let k=p.configure({dialect:le}).parse(G).cursor();do q(k.node);while(k.next())}function w(G){return/\s/.test(G)?`"${G}"`:G}const L=[A.dataSource,A.nameSpace,A.label,A.group,A.rule,A.state,A.type,A.health,A.dashboard];var V=(G=>(G.Ok="ok",G.Error="error",G.NoData="nodata",G.Unknown="unknown",G))(V||{});function N(G){const H={labels:[],freeFormWords:[],dataSourceNames:[]},q={[o]:le=>H.dataSourceNames.push(le),[l]:le=>H.namespace=le,[c]:le=>H.groupName=le,[u]:le=>H.ruleName=le,[i]:le=>H.labels.push(le),[f]:le=>H.ruleState=J(le),[d]:le=>(0,n.nf)(le)?H.ruleType=le:void 0,[E]:le=>H.ruleHealth=(0,n.f6)(le),[h]:le=>H.dashboardUid=le,[y]:le=>H.freeFormWords.push(le)};return R(G,L,q),H}function z(G,H){const q=[];return H.dataSourceNames&&q.push(...H.dataSourceNames.map(le=>({type:o,value:le}))),H.namespace&&q.push({type:l,value:H.namespace}),H.groupName&&q.push({type:c,value:H.groupName}),H.ruleName&&q.push({type:u,value:H.ruleName}),H.ruleState&&q.push({type:f,value:H.ruleState}),H.ruleType&&q.push({type:d,value:H.ruleType}),H.ruleHealth&&q.push({type:E,value:H.ruleHealth}),H.labels&&q.push(...H.labels.map(le=>({type:i,value:le}))),H.dashboardUid&&q.push({type:h,value:H.dashboardUid}),H.freeFormWords&&q.push(...H.freeFormWords.map(le=>({type:y,value:le}))),F(G,L,q)}function J(G){if(G==="normal")return t.cF.Inactive;if((0,t.Si)(G))return G}},28318:(Y,I,e)=>{"use strict";e.d(I,{t:()=>A});var t=e(2543),n=e(39741),r=e(62467),s=e(66847),o=e(1005),m=e(81160),l=e(62938),i=e(39070),c=e(14236),u=e(72495),f=e(65879),d=e(43127),E=e(89667),h=e(19347),y=e(26657),a=e(12091),v=e(27677),g=e(69437),b=e(81583),P=e(72955),C=e(66718);const D={from:21600,to:0},T=(L,V)=>{const N=M(L,V);if(!N)return D;const{from:z,to:J}=S(N,V);return!z.length&&!J.length?D:{from:Math.max(...z),to:Math.min(...J)}},M=(L,V)=>{switch(L.type){case C.Tz.classic:return O(L);case C.Tz.math:case C.Tz.sql:return p(L,V);case C.Tz.resample:case C.Tz.reduce:case C.Tz.threshold:return x(L)}},O=L=>L.conditions?.map(V=>V.query.params[0]),S=(L,V)=>{let N=[],z=[D.to];for(const J of L){const G=V.find(H=>H.refId===J);!G||!G.relativeTimeRange||(N.push(G.relativeTimeRange.from),z.push(G.relativeTimeRange.to))}return{from:N,to:z}},p=(L,V)=>V.filter(N=>N.queryType==="query"&&L.expression?.includes(N.refId)).map(N=>N.refId),x=L=>L.expression?[L.expression]:void 0;class A{constructor(V=(0,v.AI)(),N=(0,h.l)()){this.backendSrv=V,this.dataSourceSrv=N,this.subject=new n.m(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(V,N){const z=B(V,i.Gu.Done),J=[];for(const H of V){const q=H.model.refId;if((0,g.f)(H.model))continue;const le=await this.dataSourceSrv.get(H.datasourceUid);le instanceof y.iy&&le.filterQuery&&!le.filterQuery(H.model)&&J.push(q)}const G=(0,t.reject)(V,H=>J.includes(H.model.refId));if(G.length===0)return this.subject.next(z);this.subscription=R(this.backendSrv,G,N).subscribe({next:H=>{const q=w(H,(le,me)=>{const k=this.lastResult[le],ee=(0,c.N$)(me,k);return(0,P.B)(ee,k)});this.lastResult=q,this.subject.next(this.lastResult)},error:H=>{this.lastResult=K(this.lastResult,H),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let V=!1;const N=w(this.lastResult,(z,J)=>(J.state===i.Gu.Loading&&(V=!0),{...J,state:i.Gu.Done}));V&&this.subject.next(N)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const R=(L,V,N)=>{const z=B(V,i.Gu.Loading),J={data:{data:V,condition:N},url:"/api/v1/eval",method:"POST",requestId:(0,l.A)()};return(0,u.k)({whileLoading:z,source:L.fetch(J).pipe(F(z),(0,s.W)(G=>(0,r.of)(K(z,G))),(0,b.N)(L,J.requestId),(0,o.u)())})},B=(L,V)=>L.reduce((N,z)=>(N[z.refId]={state:V,series:[],timeRange:U(z,L)},N),{}),U=(L,V)=>{if((0,g.f)(L.model)){const N=T(L.model,V);return f.relativeToTimeRange(N)}return L.relativeTimeRange?f.relativeToTimeRange(L.relativeTimeRange):(console.warn(`Query with refId: ${L.refId} did not have any relative time range, using default.`),(0,d.E2)())},F=L=>(0,m.T)(V=>{const{data:N}=V,z={};for(const[J,G]of Object.entries(N.results)){const{error:H,status:q,frames:le=[]}=G,me=H?[{message:H,refId:J,status:q}]:[];z[J]={errors:me,timeRange:L[J].timeRange,state:i.Gu.Done,series:le.map(E.or)}}return z}),K=(L,V)=>{const N=(0,a.u)(V);return w(L,(z,J)=>({...J,state:i.Gu.Error,error:N}))},w=(L,V)=>{const N={};for(const[z,J]of Object.entries(L))N[z]=V(z,J);return N}},70383:(Y,I,e)=>{"use strict";e.d(I,{Kh:()=>E,VI:()=>u,b9:()=>c});var t=e(96540),n=e(33390),r=e(60021),s=e(62190),o=e(39964),m=e(55740),l=e(57220);const i=t.createContext(void 0),c=({children:h,accessType:y,alertmanagerSourceName:a})=>{const[v,g]=(0,o.l)(),b=(0,s.W)(y),P=b.availableInternalDataSources.concat(b.availableExternalDataSources),C=t.useCallback(U=>{f(P,U)&&(U===l.hY?(n.A.delete(m.Oq),g({[m.DD]:void 0})):(n.A.set(m.Oq,U),g({[m.DD]:U})))},[P,g]),D=v.get(m.DD),T=n.A.get(m.Oq),M=l.hY;t.useEffect(()=>{D&&D!==T&&n.A.set(m.Oq,D)},[D,T]);const O=a??D??T??M,S=f(P,O)?O:void 0,p=(0,l.r3)(S)?.jsonData,x=S===l.hY,A=p?E(p):!1,B={selectedAlertmanager:S,hasConfigurationAPI:x||A,isGrafanaAlertmanager:x,selectedAlertmanagerConfig:p,availableAlertManagers:P,setSelectedAlertmanager:C};return t.createElement(i.Provider,{value:B},h)};function u(){const h=t.useContext(i);if(h===void 0)throw new Error("useAlertmanager must be used within a AlertmanagerContext");return h}function f(h,y){return h.map(v=>v.name).includes(y)}const d=[r.Oz.mimir,r.Oz.cortex,void 0];function E(h){return d.includes(h.implementation)}},23770:(Y,I,e)=>{"use strict";e.d(I,{a7:()=>oe,nO:()=>ye,$8:()=>Be,KH:()=>le,g6:()=>q,EY:()=>ue,Nj:()=>te,D3:()=>re,yo:()=>J,wE:()=>N,nV:()=>G,El:()=>ne,pT:()=>H,IX:()=>U,ef:()=>F,Tp:()=>be,Om:()=>ge,JH:()=>X,mF:()=>ee,Lc:()=>w,mB:()=>B,eB:()=>K,HB:()=>V,DC:()=>z,ly:()=>L,uQ:()=>Me,_$:()=>me,bO:()=>ve,RW:()=>j,LU:()=>ke,DN:()=>Se});var t=e(30038),n=e(2543),r=e(12131),s=e(34867),o=e(94822),m=e(27677),l=e(25027),i=e(32415),c=e(82843),u=e(17172);function f(De){return(0,u.AI)().get("/api/annotations",{alertId:De}).then(pe=>pe?.sort(d))}function d(De,pe){const Ne=(je,at)=>je>at?-1:at>je?1:0,Le=Ne(De.timeEnd,pe.timeEnd);if(Le)return Le;const He=Ne(De.time,pe.time);return He||Ne(De.id,pe.id)}var E=e(92240),h=e(68788),y=e(49498),a=e(28220),v=e(99106),g=e(86590),b=e(98164),P=e(57220),C=e(56361),D=e(88467),T=e(18461),M=e(63066),O=e(23662);function S(De){const pe=async $e=>{if((0,O.A4)($e)){const xe=await(0,a.iy)(De);for(const[Fe,Ee]of Object.entries(xe))for(const se of Ee){const ae=se.rules.find(fe=>(0,O.lT)(fe)&&fe.grafana_alert?.uid===$e.uid);if(ae)return{group:se,ruleSourceName:P.hY,namespace:Fe,namespace_uid:(0,O.lT)(ae)&&ae.grafana_alert.namespace_uid||void 0,rule:ae}}}if((0,O.X4)($e)){const{ruleSourceName:xe,namespace:Fe,groupName:Ee}=$e,se=await(0,a.HO)(De,Fe,Ee);if(!se)return null;const ae=se.rules.find(fe=>{const Ce=T.P1(xe,Fe,se.name,fe);return T.LC(Ce,$e)});return ae?{group:se,ruleSourceName:xe,namespace:Fe,rule:ae}:null}if((0,O.Mj)($e))throw new Error("Native prometheus rules can not be edited in grafana.");return null},Ne=async $e=>{const{namespace:xe,group:Fe,rule:Ee,namespace_uid:se}=$e;if(Fe.rules.length===1){await(0,a.AJ)(De,se||xe,Fe.name);return}await(0,a.E8)(De,se||xe,{...Fe,rules:Fe.rules.filter(ae=>ae!==Ee)})},Le=async($e,xe,Fe)=>{const{dataSourceName:Ee,group:se,namespace:ae}=$e,fe=(0,M.l1)($e);if(Ee&&se&&ae){if(Fe){const Oe=await pe(T.Yd(Fe));if(!Oe)throw new Error("Rule not found.");if(Oe.namespace!==ae||Oe.group.name!==se)await Ne(Oe);else{const ze={...Oe.group,rules:Oe.group.rules.map(Xe=>Xe===Oe.rule?fe:Xe),evaluateEvery:xe};return await(0,a.E8)(De,ae,ze),T.P1(Ee,ae,se,fe)}}const Ce=await(0,a.HO)(De,ae,se),Re=Ce?{...Ce,rules:[...Ce.rules,fe]}:{name:se,rules:[fe]};return await(0,a.E8)(De,ae,Re),T.P1(Ee,ae,se,fe)}else throw new Error("Data source and location must be specified")},He=async($e,xe,Fe)=>{const{folder:Ee,group:se}=$e;if(!Ee)throw new Error("Folder must be specified");const ae=(0,M.Z9)($e),fe=Ee.uid,Ce={name:se,interval:xe};if(!Fe)return je(fe,Ce,ae);const Re=await pe(T.Yd(Fe));if(!Re)throw new Error("Rule not found.");const Oe=Re.namespace_uid===fe,ze=Re.group.name===$e.group;return Oe&&ze?Ye(Re,ae,xe):at(fe,Ce,Re,ae)},je=async($e,xe,Fe)=>{const Ee=await(0,a.HO)(De,$e,xe.name);if(!Ee)throw new Error(`No group found with name "${xe.name}"`);const se={name:xe.name,interval:xe.interval,rules:(Ee.rules??[]).concat(Fe)};return await(0,a.E8)(De,$e,se),{uid:Fe.grafana_alert.uid??"",ruleSourceName:P.hY}},at=async($e,xe,Fe,Ee)=>(p(Fe,Ee),await je($e,xe,Ee)),Ye=async($e,xe,Fe)=>{p($e,xe);const Ee=$e.group.rules.map(se=>(0,O.lT)(se)&&se.grafana_alert.uid===$e.rule.grafana_alert.uid?xe:se);return await(0,a.E8)(De,$e.namespace_uid??"",{name:$e.group.name,interval:Fe,rules:Ee}),{uid:$e.rule.grafana_alert.uid,ruleSourceName:P.hY}};return{findEditableRule:pe,deleteRule:Ne,saveLotexRule:Le,saveGrafanaRule:He}}function p(De,pe){if(!(0,O.lT)(De.rule))throw new Error("The rule is not a Grafana managed rule");const Ne=De.rule.grafana_alert.uid;pe.grafana_alert.uid=Ne}var x=e(25968);function A(De,pe){const Le=De().unifiedAlerting.dataSources[pe]?.result;if(!Le)throw new Error(`Data source configuration is not available for "${pe}" data source`);return Le}function R(De,pe){const Ne=A(De,pe);if(!Ne.rulerConfig)throw new Error(`Ruler API is not available for ${pe}`);return Ne.rulerConfig}const B=(0,t.zD)("unifiedalerting/fetchPromRules",async({rulesSourceName:De,filter:pe,limitAlerts:Ne,matcher:Le,state:He,identifier:je},at)=>{await at.dispatch(z({rulesSourceName:De}));const Ye=(0,l.U7)("unifiedalerting/fetchPromRules",y.sA,{dataSourceName:De,thunk:"unifiedalerting/fetchPromRules"});return await(0,D.$I)(Ye(De,pe,Ne,Le,He,je))}),U=(0,t.zD)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,D.$I)((0,i.Wf)())),F=(0,t.zD)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,D.$I)((0,i.Vv)())),K=(0,t.zD)("unifiedalerting/fetchRulerRules",async({rulesSourceName:De,filter:pe},{dispatch:Ne,getState:Le})=>{await Ne(z({rulesSourceName:De}));const He=R(Le,De),je=(0,l.Ke)("unifiedalerting/fetchRulerRules",a.iy,{dataSourceName:De,thunk:"unifiedalerting/fetchRulerRules"});return await(0,D.$I)(je(He,pe))});function w({rulesSourceName:De,identifier:pe,filter:Ne,limitAlerts:Le,matcher:He,state:je}){return async(at,Ye)=>{await at(z({rulesSourceName:De}));const $e=A(Ye,De);await at(B({rulesSourceName:De,identifier:pe,filter:Ne,limitAlerts:Le,matcher:He,state:je})),$e.rulerConfig&&await at(K({rulesSourceName:De}))}}const L=(0,t.zD)("unifiedalerting/fetchSilences",De=>{const pe=(0,l.QA)("unifiedalerting/fetchSilences",i.Bz,{dataSourceName:De});return(0,D.$I)(pe(De))});function V(De){return(pe,Ne)=>{const{rulerRules:Le}=Ne().unifiedAlerting,He=Le[De];(0,n.isEmpty)(He?.result)&&!(He&&(0,O.$7)(He))&&!He?.loading&&pe(K({rulesSourceName:De}))}}function N(){return async De=>{const pe=(0,P.gR)().map(Ne=>De(z({rulesSourceName:Ne})));await Promise.allSettled(pe)}}const z=(0,t.zD)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:De})=>(0,D.$I)((async()=>{if(De===P.hY)return{name:P.hY,id:P.hY,rulerConfig:{dataSourceName:P.hY,apiVersion:"legacy"}};const pe=(0,P.Jz)(De);if(!pe)throw new Error(`Missing data source configuration for ${De}`);const{id:Ne,name:Le}=pe,je=await(0,l.QA)("unifiedalerting/fetchPromBuildinfo",E.nD,{dataSourceName:De,thunk:"unifiedalerting/fetchPromBuildinfo"})(Le),at=je.features.rulerApiEnabled?{dataSourceName:Le,apiVersion:je.application===o.N1.Cortex?"legacy":"config"}:void 0;return{name:Le,id:Ne,rulerConfig:at}})()),{condition:({rulesSourceName:De},{getState:pe})=>{const Ne=pe().unifiedAlerting.dataSources,Le=!!Ne[De]?.result,He=!!Ne[De]?.error;return!(Le||He)}});function J(De=!1,pe={}){return async(Ne,Le)=>{const He=performance.now();await Promise.allSettled((0,P.gR)().map(async je=>{await Ne(z({rulesSourceName:je}));const{promRules:at,rulerRules:Ye,dataSources:$e}=Le().unifiedAlerting,xe=$e[je].result;if(!xe)return;const Fe=De||!at[je]?.loading,Ee=(De||!Ye[je]?.loading)&&!!xe.rulerConfig;await Promise.allSettled([Fe&&Ne(B({rulesSourceName:je,...pe})),Ee&&Ne(K({rulesSourceName:je}))])})),(0,s.l$)("unifiedalerting/fetchAllPromAndRulerRulesAction",{loadTimeMs:performance.now()-He})}}function G(De=!1){return async(pe,Ne)=>{const{promRules:Le}=Ne().unifiedAlerting;(0,P.gR)().map(He=>{(De||!Le[He]?.loading)&&pe(B({rulesSourceName:He}))})}}const H=(0,t.zD)("unifiedalerting/fetchEditableRule",(De,pe)=>{const Ne=R(pe.getState,De.ruleSourceName);return(0,D.$I)(S(Ne).findEditableRule(De))});function q(De,pe){return async(Ne,Le)=>{(0,D.v5)((async()=>{const He=(0,P.EV)(De.rulesSource),je=R(Le,He);await(0,a.AJ)(je,De.name,pe.name),await Ne(w({rulesSourceName:He}))})(),{successMessage:"Group deleted"})}}function le(De,pe={}){return async(Ne,Le)=>{await Ne(z({rulesSourceName:De.ruleSourceName})),(0,D.v5)((async()=>{const He=R(Le,De.ruleSourceName),je=S(He),at=await je.findEditableRule(De);if(!at)throw new Error("Rule not found.");await je.deleteRule(at),await Ne(w({rulesSourceName:at.ruleSourceName})),pe.navigateTo&&r.Ny.replace(pe.navigateTo)})(),{successMessage:"Rule deleted."})}}const me=(0,t.zD)("unifiedalerting/saveRuleForm",({values:De,existing:pe,redirectOnSave:Ne,evaluateEvery:Le},He)=>(0,D.v5)((0,D.$I)((async()=>{const{type:je}=De;let at;if(je===g.Z.cloudAlerting||je===g.Z.cloudRecording){if(!De.dataSourceName)throw new Error("The Data source has not been defined.");const Ye=R(He.getState,De.dataSourceName);at=await S(Ye).saveLotexRule(De,Le,pe),await He.dispatch(K({rulesSourceName:De.dataSourceName}))}else if(je===g.Z.grafana){const Ye=R(He.getState,P.hY);at=await S(Ye).saveGrafanaRule(De,Le,pe),k(De,pe),await He.dispatch(K({rulesSourceName:P.hY}))}else throw new Error("Unexpected rule form type");if((0,l.fH)(l.le.successSavingAlertRule,{type:je,isNew:(!pe).toString()}),Ne)r.Ny.push(Ne);else{const Ye=T.$9(at);if(!Ye){r.Ny.push("/alerting/list");return}const $e=`/alerting/${encodeURIComponent(Ye)}/edit`;r.Ny.getLocation().pathname!==$e?r.Ny.replace($e):He.dispatch(H(at))}})()),{successMessage:pe?`Rule "${De.name}" updated.`:`Rule "${De.name}" saved.`,errorMessage:"Failed to save rule"}));function k(De,pe){if((0,O.lT)(pe?.rule)){const Le=!!pe?.rule.grafana_alert?.notification_settings?.receiver,He=De.manualRouting,je=!Le&&He,at=Le&&!He;je&&(0,l.Fb)(),at&&(0,l.hJ)()}}const ee=(0,t.zD)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,D.$I)((0,h.Es)())),X=(0,t.zD)("unifiedalerting/fetchGrafanaAnnotations",De=>(0,D.$I)(f(De))),j=(0,t.zD)("unifiedalerting/updateAMConfig",({alertManagerSourceName:De,oldConfig:pe,newConfig:Ne,successMessage:Le,redirectPath:He,redirectSearch:je},at)=>(0,D.v5)((0,D.$I)((async()=>{const Ye=await at.dispatch(c.m.endpoints.getAlertmanagerConfiguration.initiate(De)).unwrap(),$e=(0,n.isEmpty)(Ye.alertmanager_config)&&(0,n.isEmpty)(Ye.template_files),xe=JSON.stringify(Ye)!==JSON.stringify(pe);if(!$e&&xe)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,i.vk)(De,(0,b.MZ)(Ne)),at.dispatch(c.m.util.invalidateTags(["AlertmanagerConfiguration"])),He){const Fe=new URLSearchParams(je??"");r.Ny.push((0,C.nL)(He,De,Fe))}})()),{successMessage:Le})),ne=(0,t.zD)("unifiedalerting/fetchAmAlerts",De=>(0,D.$I)((0,i.Mn)(De,[],!0,!0,!0))),te=(De,pe)=>async Ne=>{await(0,D.v5)((0,i.dk)(De,pe),{successMessage:"Silence expired."}),Ne(L(De)),Ne(ne(De))},oe=(0,t.zD)("unifiedalerting/updateSilence",({alertManagerSourceName:De,payload:pe,exitOnSave:Ne,successMessage:Le})=>(0,D.v5)((0,D.$I)((async()=>{await(0,i.as)(De,pe),Ne&&r.Ny.push((0,C.nL)("/alerting/silences",De))})()),{successMessage:Le})),ie=(De,pe)=>async Ne=>{const Le=await Ne(alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(pe)).unwrap();if(!Le)throw new Error(`Config for ${pe} not found`);if(!Le.alertmanager_config.receivers?.find(je=>je.name===De))throw new Error(`Cannot delete receiver ${De}: not found in config.`);const He={...Le,alertmanager_config:{...Le.alertmanager_config,receivers:Le.alertmanager_config.receivers.filter(je=>je.name!==De)}};return Ne(j({newConfig:He,oldConfig:Le,alertManagerSourceName:pe,successMessage:"Contact point deleted."}))},ue=(De,pe)=>async Ne=>{const Le=await Ne(c.m.endpoints.getAlertmanagerConfiguration.initiate(pe)).unwrap();if(!Le)throw new Error(`Config for ${pe} not found`);if(typeof Le.template_files?.[De]!="string")throw new Error(`Cannot delete template ${De}: not found in config.`);const He={...Le.template_files};delete He[De];const je={...Le,alertmanager_config:{...Le.alertmanager_config,templates:Le.alertmanager_config.templates?.filter(at=>at!==De)},template_files:He};return Ne(j({newConfig:je,oldConfig:Le,alertManagerSourceName:pe,successMessage:"Template deleted."}))},be=(0,t.zD)("unifiedalerting/fetchFolder",De=>(0,D.$I)(m.IB.getFolderByUid(De,{withAccessControl:!0}))),ge=De=>(pe,Ne)=>{Ne().unifiedAlerting.folders[De]?.dispatched||pe(be(De))},re=(0,t.zD)("unifiedalerting/fetchAlertGroups",De=>(0,D.$I)((0,i.f4)(De))),ye=(0,t.zD)("unifiedalerting/deleteAlertManagerConfig",async(De,pe)=>(0,D.v5)((0,D.$I)((async()=>{await(0,i.nd)(De),await pe.dispatch(c.m.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),Be=(De,pe)=>async Ne=>{const Le=await Ne(c.m.endpoints.getAlertmanagerConfiguration.initiate(De)).unwrap(),He=De===P.hY,je=(Le?.alertmanager_config?.mute_time_intervals??[])?.filter(({name:$e})=>$e!==pe)??[],at=(Le?.alertmanager_config?.time_intervals??[])?.filter(({name:$e})=>$e!==pe)??[],Ye=He?{mute_time_intervals:[...je,...at]}:{time_intervals:at,mute_time_intervals:je};if(Le){const{mute_time_intervals:$e,...xe}=Le?.alertmanager_config??{};(0,D.v5)(Ne(j({alertManagerSourceName:De,oldConfig:Le,newConfig:{...Le,alertmanager_config:{...xe,route:Le.alertmanager_config.route?(0,b.Dk)(pe,Le.alertmanager_config?.route):void 0,...Ye}}})),{successMessage:`Deleted "${pe}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})}},ve=(0,t.zD)("unifiedalerting/testReceivers",({alertManagerSourceName:De,receivers:pe,alert:Ne})=>(0,D.v5)((0,D.$I)((0,i.By)(De,pe,Ne)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Me=(De,pe)=>De.filter(Ne=>{const{forDuration:Le}=(0,O.jg)(Ne,pe),He=(0,x.ge)(Le),je=(0,x.ge)(pe);return He!==0&&He<je}),ke=(0,t.zD)("unifiedalerting/updateLotexNamespaceAndGroup",async(De,pe)=>(0,D.v5)((0,D.$I)((async()=>{const{rulesSourceName:Ne,namespaceName:Le,groupName:He,newNamespaceName:je,newGroupName:at,groupInterval:Ye,folderUid:$e}=De,xe=R(pe.getState,Ne),Fe=await(0,a.iy)(xe);if(!!!Fe[Le])throw new Error(`Namespace "${Le}" not found.`);const se=Fe[Le].find(Oe=>Oe.name===He);if(!se)throw new Error(`Group "${He}" not found.`);const ae=!!Fe[Le].find(Oe=>Oe.name===at);if(at!==He&&ae)throw new Error(`Group "${at}" already exists in namespace "${Le}".`);const fe=!!Fe[je],Re=Ne===P.hY?(0,v.wf)(Le):Le;if(je!==Re&&fe)throw new Error(`Namespace "${je}" already exists.`);if(je===Re&&He===at&&Ye===se.interval)throw new Error("Nothing changed.");if(Ye!==se.interval){const Oe=Me(se.rules,Ye??"1m");if(Oe.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${Oe.map(ze=>{const{alertName:Xe}=(0,O.jg)(ze,Ye??"");return Xe}).join(",")}`)}if(je!==Re){for(const Oe of Fe[Le])await(0,a.E8)(xe,je,Oe.name===He?{...Oe,name:at,interval:Ye}:Oe);await(0,a.BK)(xe,$e||Le)}else await(0,a.E8)(xe,$e||Le,{...se,name:at,interval:Ye}),at!==He&&await(0,a.AJ)(xe,$e||Le,He);await pe.dispatch(K({rulesSourceName:Ne}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Se=(0,t.zD)("unifiedalerting/updateRulesOrderForGroup",async(De,pe)=>(0,D.v5)((0,D.$I)((async()=>{const{rulesSourceName:Ne,namespaceName:Le,groupName:He,newRules:je,folderUid:at}=De,Ye=R(pe.getState,Ne),xe=(await(0,a.iy)(Ye))[Le].find(Ee=>Ee.name===He);if(!xe)throw new Error(`Group "${He}" not found.`);if(xe.rules.length!==je.length){const Ee=new Error("Rules count mismatch. Please refresh the page and try again.");throw(0,l.vV)(Ee,{namespaceName:Le,groupName:He}),Ee}const Fe={name:xe.name,interval:xe.interval,rules:je};await(0,a.E8)(Ye,at??Le,Fe),await pe.dispatch(K({rulesSourceName:Ne}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),We=(0,t.zD)("unifiedAlerting/addExternalAlertmanagers",async(De,pe)=>(0,D.v5)((0,D.$I)((async()=>{await(0,i._P)(De),pe.dispatch(F())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},22620:(Y,I,e)=>{"use strict";e.d(I,{H:()=>n});var t=e(32196);const n=r=>(0,t.css)`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${r.spacing(2,0)};
  `},99494:(Y,I,e)=>{"use strict";e.d(I,{W:()=>t});var t=(n=>(n.Incident="grafana-incident-app",n.OnCall="grafana-oncall-app",n.MachineLearning="grafana-ml-app",n))(t||{})},86590:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},41068:(Y,I,e)=>{"use strict";e.d(I,{y:()=>t});var t=(n=>(n.seconds="s",n.minutes="m",n.hours="h",n.days="d",n.weeks="w",n))(t||{})},75471:(Y,I,e)=>{"use strict";e.d(I,{C0:()=>E,HL:()=>m,Q9:()=>h,VQ:()=>l,Wd:()=>d,jy:()=>u,lV:()=>f,q0:()=>y});var t=e(2913),n=e(16233),r=e(31678),s=e(57220);function o(a){return(0,s.z2)(a)?"grafana":"external"}const m={read:{grafana:r.AccessControlAction.AlertingInstanceRead,external:r.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:r.AccessControlAction.AlertingInstanceCreate,external:r.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:r.AccessControlAction.AlertingInstanceUpdate,external:r.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:r.AccessControlAction.AlertingInstanceUpdate,external:r.AccessControlAction.AlertingInstancesExternalWrite}},l={read:{grafana:r.AccessControlAction.AlertingNotificationsRead,external:r.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:r.AccessControlAction.AlertingNotificationsWrite,external:r.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:r.AccessControlAction.AlertingNotificationsWrite,external:r.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:r.AccessControlAction.AlertingNotificationsWrite,external:r.AccessControlAction.AlertingNotificationsExternalWrite}},i={read:r.AccessControlAction.AlertingProvisioningRead,readSecrets:r.AccessControlAction.AlertingProvisioningReadSecrets,write:r.AccessControlAction.AlertingProvisioningWrite},c={read:{grafana:r.AccessControlAction.AlertingRuleRead,external:r.AccessControlAction.AlertingRuleExternalRead},create:{grafana:r.AccessControlAction.AlertingRuleCreate,external:r.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:r.AccessControlAction.AlertingRuleUpdate,external:r.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:r.AccessControlAction.AlertingRuleDelete,external:r.AccessControlAction.AlertingRuleExternalWrite}};function u(a){const v=o(a);return{read:m.read[v],create:m.create[v],update:m.update[v],delete:m.delete[v]}}function f(a){const v=o(a);return{read:l.read[v],create:l.create[v],update:l.update[v],delete:l.delete[v],provisioning:i}}function d(a){const v=o(a);return{read:c.read[v],create:c.create[v],update:c.update[v],delete:c.delete[v]}}function E(a){return()=>n.TP.evaluatePermission(a)}function h(){return{canCreateGrafanaRules:n.TP.hasPermission(r.AccessControlAction.FoldersRead)&&n.TP.hasPermission(c.create.grafana),canCreateCloudRules:n.TP.hasPermission(r.AccessControlAction.DataSourcesRead)&&n.TP.hasPermission(c.create.external),canEditRules:a=>n.TP.hasPermission(d(a).update)}}function y(){const{unifiedAlertingEnabled:a}=(0,t.zj)(),v=n.TP.hasPermission(d(s.hY).read),g=n.TP.hasPermission(d(s.hY).update);return a&&v&&g}},98164:(Y,I,e)=>{"use strict";e.d(I,{$P:()=>A,Av:()=>P,Dk:()=>i,Dm:()=>S,EU:()=>C,F9:()=>M,J$:()=>g,LF:()=>O,Lt:()=>c,MN:()=>f,MU:()=>E,MZ:()=>l,NL:()=>v,UL:()=>x,VE:()=>D,Wc:()=>h,mP:()=>R,uH:()=>p,xH:()=>a});var t=e(2543),n=e.n(t),r=e(60021),s=e(82775),o=e(57220),m=e(32642);function l(B){return B.alertmanager_config.receivers||(B.alertmanager_config.receivers=[{name:"default "}]),B.alertmanager_config.route||(B.alertmanager_config.route={receiver:B.alertmanager_config.receivers[0].name}),B.template_files||(B.template_files={}),B}function i(B,U){return{...U,mute_time_intervals:U.mute_time_intervals?.filter(K=>K!==B)??[],routes:U.routes?.map(K=>i(B,K))}}function c(B,U,F){return{...F,mute_time_intervals:F.mute_time_intervals?.map(K=>K===U?B:K),routes:F.routes?.map(K=>c(B,U,K))}}function u(B){return B.map(([U,F,K])=>[U,F,unquoteWithUnescape(K)])}function f(B){return B.isEqual?B.isRegex?r.ho.regex:r.ho.equal:B.isRegex?r.ho.notRegex:r.ho.notEqual}function d(B){switch(B){case r.ho.equal:return{isEqual:!0,isRegex:!1};case r.ho.notEqual:return{isEqual:!1,isRegex:!1};case r.ho.regex:return{isEqual:!0,isRegex:!0};case r.ho.notRegex:return{isEqual:!1,isRegex:!0}}}function E(B){return{name:B.name,value:B.value,operator:f(B)}}function h(B){return{name:B.name,value:B.value,...d(B.operator)}}function y(B){return`{${B.map(E).reduce((K,w)=>{const L=`${w.name}${w.operator}"${w.value}"`;return K?`${K},${L}`:L},"")}}`}const a=[{label:r.ho.equal,description:"Equals",value:r.ho.equal},{label:r.ho.notEqual,description:"Does not equal",value:r.ho.notEqual},{label:r.ho.regex,description:"Matches regex",value:r.ho.regex},{label:r.ho.notRegex,description:"Does not match regex",value:r.ho.notRegex}];function v(B){const U=f(B);return[B.name,U,B.value]}function g(B){const U=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,F=[];return B.replace(U,(K,w,L,V)=>{const N=L===r.ho.equal||L===r.ho.regex,z=L===r.ho.regex||L===r.ho.notRegex;return F.push({name:w,value:z?b(V.trim()):V.trim(),isEqual:N,isRegex:z}),""}),F}function b(B){try{return new RegExp(B),B}catch{return""}}function P(B,U){return U.every(({name:F,value:K,isRegex:w,isEqual:L})=>Object.entries(B).some(([V,N])=>{const z=F===V;let J;return L&&!w&&(J=K===N),!L&&!w&&(J=K!==N),L&&w&&(J=new RegExp(K).test(N)),!L&&w&&(J=!new RegExp(K).test(N)),z&&J}))}function C(...B){const U=B.map(g).flat(),F=(0,t.uniqWith)(U,t.isEqual);return y(F)}function D(B){return B===o.hY?"default":"unquote"}function T(){return(0,s.k)().filter(B=>B.type===o.ol.Alertmanager)}function M(B){return T().find(U=>B===U.uid)}function O(B){const{times:U,weekdays:F,days_of_month:K,months:w,years:L,location:V}=B,N=S(U,V),z=p(F),J=x(K),G=A(w),H=R(L);return[N,z,J,G,H].join(", ")}function S(B,U){return"Times: "+(B?B?.map(({start_time:F,end_time:K})=>`${F} - ${K} [${U??"UTC"}]`).join(" and "):"All")}function p(B){return"Weekdays: "+(B?.map(U=>{if(U.includes(":"))return U.split(":").map(F=>{const K=F.slice(0,3);return K[0].toLocaleUpperCase()+K.slice(1)}).join("-");{const F=U.slice(0,3);return F[0].toLocaleUpperCase()+F.slice(1)}}).join(", ")??"All")}function x(B){return"Days of the month: "+(B?.join(", ")??"All")}function A(B){return"Months: "+(B?.join(", ")??"All")}function R(B){return"Years: "+(B?.join(", ")??"All")}},33225:(Y,I,e)=>{"use strict";e.d(I,{Hx:()=>o,gO:()=>m});var t=e(96540),n=e(55740),r=e(56361);function s(l){return{dashboardUID:l.find(([i])=>i===n.YH.dashboardUID)?.[1],panelId:l.find(([i])=>i===n.YH.panelID)?.[1]}}function o(l){return(0,t.useMemo)(()=>Object.entries(l||{}).filter(([i,c])=>!!c.trim()),[l])}function m(l){const i=new Map,{panelId:c,dashboardUID:u}=s(l);return u&&i.set(n.YH.dashboardUID,(0,r.JM)(u)),u&&c&&i.set(n.YH.panelID,(0,r.D2)(u,c)),i}},82775:(Y,I,e)=>{"use strict";e.d(I,{k:()=>r,q:()=>s});var t=e(32264),n=e(25968);function r(){return Object.values(t.$.datasources)}function s(o){if(!(0,n.TN)(t.$.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const m=(0,n.M9)(t.$.unifiedAlerting.minInterval);if(!o||!(0,n.TN)(o))return{globalLimit:m,exceedsLimit:!1};const l=(0,n.M9)(o),i=m>l&&l>0;return{globalLimit:m,exceedsLimit:i}}},55740:(Y,I,e)=>{"use strict";e.d(I,{DD:()=>r,H8:()=>E,HH:()=>n,J3:()=>d,Oq:()=>s,U3:()=>m,UU:()=>t,YH:()=>f,cB:()=>l,kl:()=>h,wG:()=>o});const t="ruler not supported",n=2e4,r="alertmanager",s="alerting-alertmanager",o=2e4,m=2e4,l=2e4,i="timeseries",c="table",u="stat";var f=(y=>(y.description="description",y.summary="summary",y.runbookURL="runbook_url",y.alertId="__alertId__",y.dashboardUID="__dashboardUid__",y.panelID="__panelId__",y))(f||{});const d={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},E={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},h=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}]},57220:(Y,I,e)=>{"use strict";e.d(I,{AL:()=>R,EV:()=>p,Eb:()=>A,Jz:()=>y,Zw:()=>K,bD:()=>g,cy:()=>D,gR:()=>O,hP:()=>z,hY:()=>u,lS:()=>S,oh:()=>U,ol:()=>d,qi:()=>h,r3:()=>F,sq:()=>T,v0:()=>x,vv:()=>f,w5:()=>L,y9:()=>N,z2:()=>B});var t=e(19347),n=e(16233),r=e(60021),s=e(31678),o=e(82843),m=e(62190),l=e(70383),i=e(75471),c=e(82775);const u="grafana",f="-- Grafana --";var d=(J=>(J.Alertmanager="alertmanager",J.Loki="loki",J.Prometheus="prometheus",J))(d||{});const E=["loki","prometheus"];function h(){return n.TP.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,c.k)().filter(J=>E.includes(J.type)&&J.jsonData.manageAlerts!==!1).sort((J,G)=>J.name.localeCompare(G.name)):[]}function y(J){return h().find(G=>G.name===J)}function a(){return(0,c.k)().filter(v).sort((J,G)=>J.name.localeCompare(G.name))}function v(J){return J.type==="alertmanager"}function g(J){return J.type==="alertmanager"}function b(){return a().filter(J=>J.jsonData.handleGrafanaManagedAlerts)}const P={name:u,imgUrl:"public/img/grafana_icon.svg",hasConfigurationAPI:!0};function C(){return[P,...a().map(J=>({name:J.name,displayName:J.name,imgUrl:J.meta.info.logos.small,meta:J.meta}))]}function D(J){const G=(0,m.W)(J),H=G.availableExternalDataSources.filter(k=>k.handleGrafanaManagedAlerts),q=G.availableInternalDataSources,{currentData:le}=o.m.useGetAlertmanagerChoiceStatusQuery(void 0);switch(le?.alertmanagersChoice){case r.nA.Internal:return q;case r.nA.External:return H;default:return[...q,...H]}}function T(J){const G=[],H=[],q={instance:i.HL.read,notification:i.VQ.read};if(n.TP.hasPermission(q[J].grafana)&&G.push(P),n.TP.hasPermission(q[J].external)){const le=a().map(me=>({name:me.name,displayName:me.name,imgUrl:me.meta.info.logos.small,meta:me.meta,hasConfigurationAPI:(0,l.Kh)(me.jsonData),handleGrafanaManagedAlerts:me.jsonData.handleGrafanaManagedAlerts}));H.push(...le)}return{availableInternalDataSources:G,availableExternalDataSources:H}}function M(J){const G=U(J);if(!G)throw new Error(`Data source ${J} not found`);if(G.type!=="loki"&&G.type!=="prometheus")throw new Error(`Unexpected data source type ${G.type}`);return G}function O(){const J=h().map(G=>G.name);return n.TP.hasPermission(s.AccessControlAction.AlertingRuleRead)&&J.push(u),J}function S(){const J=h();return n.TP.hasPermission(s.AccessControlAction.AlertingRuleRead)&&J.push(u),J}function p(J){return A(J)?J.name:J}function x(J){return A(J)?J.uid:u}function A(J){return J!==u}function R(J){return J!==u&&F(J)?.jsonData?.implementation===r.Oz.prometheus}function B(J){return J===u}function U(J){return(0,c.k)().find(G=>G.name===J)}function F(J){return(0,c.k)().filter(v).find(G=>G.name===J)}function K(J){return J===u?u:U(J)}function w(J){if(J===u)return u;const G=U(J);if(!G)throw new Error(`Datasource "${J}" not found`);return String(G.id)}function L(J){if(J===u)return u;const G=U(J);if(!G)throw new Error(`Datasource "${J}" not found`);return G.uid}function V(){return(0,t.l)().getList({alerting:!0})[0]}function N(){const J=(0,t.l)().getInstanceSettings("default");return J?.meta.alerting??!1?J:V()}function z(J){return J.jsonData.manageAlerts!==!1}},75214:(Y,I,e)=>{"use strict";e.d(I,{Dd:()=>n,M4:()=>t,x4:()=>s,zm:()=>r});function t(o){return Object.entries(o).map(([m,l])=>`${m}=${l}`).sort()}function n(o){return Object.entries(o).map(([m,l])=>[m,l])}function r(o){const m={};return o.forEach(l=>{m[l[0]]=l[1]}),m}function s(o){const m={};return o.forEach(l=>{l.key&&(m[l.key]=l.value)}),m}},32642:(Y,I,e)=>{"use strict";e.d(I,{Ig:()=>d,J$:()=>u,J9:()=>c,So:()=>m,ot:()=>f,ou:()=>i,qR:()=>o,t8:()=>E});var t=e(2543),n=e.n(t),r=e(60021);const s=[r.ho.regex,r.ho.notRegex,r.ho.notEqual,r.ho.equal];function o(v){if(v.startsWith("{")&&v.endsWith("}"))throw new Error("this function does not support PromQL-style matcher syntax, call parsePromQLStyleMatcher() instead");const g=s.map(T=>[T,v.indexOf(T)]).filter(([T,M])=>M>-1).sort((T,M)=>T[1]-M[1]);if(!g.length)throw new Error(`Invalid matcher: ${v}`);const[b,P]=g[0],C=v.slice(0,P).trim(),D=v.slice(P+b.length);if(!C)throw new Error(`Invalid matcher: ${v}`);return{name:C,value:D,isRegex:b===r.ho.regex||b===r.ho.notRegex,isEqual:b===r.ho.equal||b===r.ho.regex}}function m(v){return h(v)?l(v):[o(v)]}function l(v){if(!h(v))throw new Error("not a PromQL style matcher");const g=/,(?=(?:[^"]*"[^"]*")*[^"]*$)/,b=v.replace(/^\{/,"").replace(/\}$/,"").trim().split(g);return(0,t.compact)(b).flatMap(o).map(P=>({...P,name:d(P.name),value:d(P.value)}))}function i(v){const g=v.filter(b=>!!b.trim()).map(b=>o(b));return(0,t.uniqBy)(g,b=>b.name)}const c=v=>{const g=Object.entries(v).filter(([P])=>!(P.startsWith("__")&&P.endsWith("__"))),b=new URLSearchParams;return g.forEach(([P,C])=>b.append("matcher",`${P}=${C}`)),b},u=v=>{let g=[];return v.matchers&&v.matchers.forEach(b=>{const P=m(b).map(y);g=g.concat(P)}),v.object_matchers&&g.push(...v.object_matchers),v.match_re&&Object.entries(v.match_re).forEach(([b,P])=>{g.push([b,r.ho.regex,P])}),v.match&&Object.entries(v.match).forEach(([b,P])=>{g.push([b,r.ho.equal,P])}),g};function f(v){return`"${v.replace(/[\\"]/g,b=>`\\${b}`)}"`}function d(v){return/^"(.*)"$/.test(v)?v.replace(/^"(.*)"$/,"$1").replace(/\\"/g,'"').replace(/\\\\/g,"\\"):v}const E={default:([v,g,b])=>`${v} ${g} ${b||""}`,unquote:([v,g,b])=>{const P=d(v),C=d(b)||'""';return`${P} ${g} ${C}`}};function h(v){return v.startsWith("{")&&v.endsWith("}")}function y(v){const g=a(v);return[v.name,g,v.value]}function a(v){return v.isEqual?v.isRegex?r.ho.regex:r.ho.equal:v.isRegex?r.ho.notRegex:r.ho.notEqual}},56361:(Y,I,e)=>{"use strict";e.d(I,{BK:()=>x,Cp:()=>V,D2:()=>K,ES:()=>z,GD:()=>A,Ht:()=>P,JM:()=>F,JZ:()=>G,KT:()=>T,NH:()=>R,S2:()=>g,Sl:()=>b,Y9:()=>S,Yp:()=>y,bg:()=>a,i7:()=>v,i9:()=>w,nL:()=>M,qN:()=>U,qy:()=>D,t7:()=>p,w$:()=>h,y$:()=>N});var t=e(2543),n=e.n(t),r=e(61268),s=e(32264),o=e(17172),m=e(18461),l=e(23662),i=e(64861),c=e(94822),u=e(55740),f=e(57220),d=e(32642),E=e(3704);function h(H,q,le){const me=(0,f.EV)(H),k=m.UP(me,q),ee=encodeURIComponent(m.$9(k)),X=encodeURIComponent(me);return(0,E.c)(`/alerting/${X}/${ee}/view`,{returnTo:le})}function y(H,q){const{uid:le,type:me}=H;return(0,E.c)("/explore",{left:JSON.stringify({datasource:H.uid,queries:[{refId:"A",datasource:{uid:le,type:me},expr:q}],range:{from:"now-1h",to:"now"}})})}function a(H,q=""){return(0,E.c)(`/alerting/notifications/receivers/${encodeURIComponent(H)}/edit`,{alertmanager:q})}function v(H,q=""){return(0,E.c)("/alerting/routes/mute-timing/edit",{muteName:H,alertmanager:q})}function g(H,q){return(0,f.Eb)(H)?(0,E.z)(`/alerting/${encodeURIComponent(H.name)}/${encodeURIComponent((0,m.PH)(q.name))}/find`):window.location.href.split("?")[0]}function b(H){return H.reduce((q,{key:le,value:me})=>(q[le]=me,q),{})}const P=H=>{const q=H.queryString===void 0?void 0:String(H.queryString),le=H.alertState===void 0?void 0:String(H.alertState),me=H.dataSource===void 0?void 0:String(H.dataSource),k=H.ruleType===void 0?void 0:String(H.ruleType),ee=H.groupBy===void 0?void 0:String(H.groupBy).split(",");return{queryString:q,alertState:le,dataSource:me,groupBy:ee,ruleType:k}},C=H=>({queryString:H.get("queryString")??void 0,contactPoint:H.get("contactPoint")??void 0}),D=H=>{const q=H.queryString===void 0?void 0:String(H.queryString),le=H.silenceState===void 0?void 0:String(H.silenceState);return{queryString:q,silenceState:le}};function T(H){return Object.entries(H).map(([q,le])=>({key:q,value:le}))}function M(H,q,le){const me=new URLSearchParams(le);return q&&me.set(u.DD,q),`${H}?${me.toString()}`}const O=H=>H.replace(/\"/g,'\\"');function S(H){return H.startsWith('"')&&H.endsWith('"')?O(H):`"${O(H)}"`}function p(H,q){const le={alertname:q.name,...q.labels};return x(H,le)}function x(H,q){const le=new URLSearchParams;return le.append("alertmanager",H),(0,d.J9)(q).forEach((k,ee)=>le.append(ee,k)),(0,E.c)("/alerting/silence/new",le)}function A(H){return(0,E.c)(`/datasources/edit/${H}`)}function R(H){return(0,E.c)(`/dashboards/f/${H}`)}function B(H,q){return createUrl(`/dashboards/f/${H}/${q}/alerting`)}function U(H){return(0,E.c)(`/dashboards/f/${H}/settings`)}function F(H){return(0,E.c)(`/d/${encodeURIComponent(H)}`)}function K(H,q){const le=new URLSearchParams({viewPanel:q});return(0,E.c)(`/d/${encodeURIComponent(H)}`,le)}function w(H,q,le,me=1e3){const k=new Date().getTime(),ee=()=>H().catch(X=>{if(q(X)&&new Date().getTime()-k<le)return new Promise(j=>setTimeout(j,me)).then(ee);throw X});return ee()}const L={[c.Gi.Alerting]:1,[c.cF.Firing]:1,[c.Gi.Error]:1,[c.Gi.Pending]:2,[c.cF.Pending]:2,[c.cF.Inactive]:2,[c.Gi.NoData]:3,[c.Gi.Normal]:4};function V(H,q){if(H===i.xB.Importance)return(0,t.sortBy)(q,me=>[L[(0,c.lh)(me.state)],(0,l.RI)(me).toLocaleLowerCase()]);if(H===i.xB.TimeAsc)return(0,t.sortBy)(q,me=>[new Date(me.activeAt)||new Date,(0,l.RI)(me).toLocaleLowerCase()]);if(H===i.xB.TimeDesc)return(0,t.sortBy)(q,me=>[new Date(me.activeAt)||new Date,(0,l.RI)(me).toLocaleLowerCase()]).reverse();const le=(0,t.sortBy)(q,me=>(0,l.RI)(me).toLocaleLowerCase());return H===i.xB.AlphaDesc&&le.reverse(),le}function N(){return s.$.buildInfo.edition===r.r.OpenSource}function z(){return s.$.buildInfo.env==="development"}function J(H){return"message"in H}function G(H){return(0,o.NF)(H)?H.data.message:J(H)?H.message:String(H)}},88467:(Y,I,e)=>{"use strict";e.d(I,{$I:()=>u,BU:()=>P,CZ:()=>E,J7:()=>i,ML:()=>C,Vf:()=>g,Xw:()=>c,jA:()=>m,p0:()=>h,t4:()=>b,v5:()=>f});var t=e(30038),n=e(26272),r=e(17172),s=e(10096),o=e(25027);const m=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function l(D,T=m,M){if(D.pending.match(M))return{result:T.result,loading:!0,error:T.error,dispatched:!0,requestId:M.meta.requestId};if(D.fulfilled.match(M)){if(T.requestId===void 0||T.requestId===M.meta.requestId)return{...T,result:M.payload,loading:!1,error:void 0}}else if(D.rejected.match(M)&&T.requestId===M.meta.requestId)return{...T,loading:!1,error:M.error};return T}function i(D,T){return(0,t.Z0)({name:D,initialState:m,reducers:{},extraReducers:M=>M.addDefaultCase((O,S)=>l(T,O,S))})}function c(D,T,M){return(0,t.Z0)({name:D,initialState:{},reducers:{},extraReducers:O=>O.addDefaultCase((S,p)=>{if((0,t.$S)(T)(p)){const x=p,A=M(x.meta.arg);return{...S,[A]:l(T,S[A],x)}}return S})})}function u(D){return D.catch(T=>{throw{message:E(T),code:T.statusCode}})}function f(D,T){return D.then(M=>(T.successMessage&&s.lE.emit(n.r1.alertSuccess,[T.successMessage]),M)).catch(M=>{const O=E(M);throw s.lE.emit(n.r1.alertError,[`${T.errorMessage??"Error"}: ${O}`]),M})}const d="Unknown Error";function E(D){if((0,r.NF)(D))if(D.data?.message){let M=D.data?.message;return typeof D.data?.error=="string"&&(M+=`; ${D.data.error}`),M}else{if(Array.isArray(D.data)&&D.data.length&&D.data[0]?.message)return D.data.map(M=>M?.message).filter(M=>!!M).join(" ");if(D.statusText)return D.statusText}const T=D?.message;return T||((0,o.fH)(o.le.unknownMessageFromError,{error:JSON.stringify(D)}),d)}function h(D){return Object.values(D).every(y)}function y(D){return D.dispatched&&!D.loading}function a(D){return Object.values(D).every(v)}function v(D){return D.dispatched&&!D.loading&&!D.error}function g(D){return Object.values(D).some(C)}function b(D){return Object.values(D).some(T=>T.dispatched)}function P(D){return Object.values(D).some(v)}function C(D){return D?D.dispatched&&D.loading:!1}},63066:(Y,I,e)=>{"use strict";e.d(I,{Bu:()=>q,IJ:()=>T,J6:()=>z,JE:()=>p,Q8:()=>D,QX:()=>B,Qk:()=>U,Rk:()=>le,XI:()=>F,Z9:()=>A,ir:()=>me,l1:()=>O,mp:()=>N,pY:()=>C,qO:()=>K});var t=e(2543),n=e.n(t),r=e(43127),s=e(65879),o=e(32264),m=e(19347),l=e(26657),i=e(27857),c=e(21969),u=e(74730),f=e(66718),d=e(94822),E=e(55907),h=e(86590),y=e(75471),a=e(55740),v=e(57220),g=e(56361),b=e(23662),P=e(25968);const C="1m",D="grafana.alerting.manualRouting",T=()=>{const{canCreateGrafanaRules:k,canCreateCloudRules:ee}=(0,y.Q9)();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:a.kl,dataSourceName:null,type:k?h.Z.grafana:ee?h.Z.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:d.Q8.NoData,execErrState:d.Q8.Error,evaluateFor:"5m",evaluateEvery:C,manualRouting:M(),contactPoints:{},overrideGrouping:!1,overrideTimings:!1,muteTimeIntervals:[],namespace:"",expression:"",forTime:1,forTimeUnit:"m"})},M=()=>o.$.featureToggles.alertingSimplifiedRouting??!1?localStorage.getItem(D)!=="false":!1;function O(k){const{name:ee,expression:X,forTime:j,forTimeUnit:ne,keepFiringForTime:te,keepFiringForTimeUnit:oe,type:ie}=k;if(ie===h.Z.cloudAlerting){let ue;return te&&oe&&(ue=`${te}${oe}`),{alert:ee,for:`${j}${ne}`,keep_firing_for:ue,annotations:(0,g.Sl)(k.annotations||[]),labels:(0,g.Sl)(k.labels||[]),expr:X}}else if(ie===h.Z.cloudRecording)return{record:ee,labels:(0,g.Sl)(k.labels||[]),expr:X};throw new Error(`unexpected rule type: ${ie}`)}function S(k,ee){const X=[...(0,g.KT)(k||{})];return ee&&X.push({key:"",value:""}),X}function p(k){const ee=[...k];return a.kl.map(j=>j.key).forEach((j,ne)=>{const te=ee.findIndex(oe=>oe.key===j);if(te===-1){const oe={key:j,value:""};ee.splice(ne,0,oe)}else te!==ne&&ee.splice(ne,0,ee.splice(te,1)[0])}),ee}function x(k,ee){if(ee?.grafana?.selectedContactPoint&&k)return{receiver:ee?.grafana?.selectedContactPoint,mute_time_intervals:ee?.grafana?.muteTimeIntervals,group_by:ee?.grafana?.overrideGrouping?ee?.grafana?.groupBy:void 0,group_wait:ee?.grafana?.overrideTimings&&ee?.grafana?.groupWaitValue?ee?.grafana?.groupWaitValue:void 0,group_interval:ee?.grafana?.overrideTimings&&ee?.grafana?.groupIntervalValue?ee?.grafana?.groupIntervalValue:void 0,repeat_interval:ee?.grafana?.overrideTimings&&ee?.grafana?.repeatIntervalValue?ee?.grafana?.repeatIntervalValue:void 0}}function A(k){const{name:ee,condition:X,noDataState:j,execErrState:ne,evaluateFor:te,queries:oe,isPaused:ie,contactPoints:ue,manualRouting:be}=k;if(X){const ge=x(be,ue);return{grafana_alert:{title:ee,condition:X,no_data_state:j,exec_err_state:ne,data:oe.map(G),is_paused:!!ie,notification_settings:ge},for:te,annotations:(0,g.Sl)(k.annotations||[]),labels:(0,g.Sl)(k.labels||[])}}throw new Error("Cannot create rule without specifying alert condition")}function R(k){const ee=k.notification_settings?{selectedContactPoint:k.notification_settings.receiver,muteTimeIntervals:k.notification_settings.mute_time_intervals??[],overrideGrouping:Array.isArray(k.notification_settings.group_by)&&k.notification_settings.group_by.length>0,overrideTimings:[k.notification_settings.group_wait,k.notification_settings.group_interval,k.notification_settings.repeat_interval].some(Boolean),groupBy:k.notification_settings.group_by||[],groupWaitValue:k.notification_settings.group_wait||"",groupIntervalValue:k.notification_settings.group_interval||"",repeatIntervalValue:k.notification_settings.repeat_interval||""}:void 0;return ee?{[v.hY]:ee}:void 0}function B(k){const{ruleSourceName:ee,namespace:X,group:j,rule:ne}=k,te=T();if((0,v.z2)(ee))if((0,b.lT)(ne)){const oe=ne.grafana_alert,ie=R(oe);return{...te,name:oe.title,type:h.Z.grafana,group:j.name,evaluateEvery:j.interval||te.evaluateEvery,evaluateFor:ne.for||"0",noDataState:oe.no_data_state,execErrState:oe.exec_err_state,queries:oe.data,condition:oe.condition,annotations:p(S(ne.annotations,!1)),labels:S(ne.labels,!0),folder:{title:X,uid:oe.namespace_uid},isPaused:oe.is_paused,contactPoints:ie,manualRouting:!!ie}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,b.$y)(ne)){const ie={refId:"A",datasourceUid:(0,m.l)().getInstanceSettings(ee)?.uid??"",queryType:"",relativeTimeRange:(0,r.Cn)(),expr:ne.expr,model:{refId:"A",hide:!1,expr:ne.expr}},ue=U(ne);return{...te,...ue,queries:[ie],annotations:p(S(ne.annotations,!1)),type:h.Z.cloudAlerting,dataSourceName:ee,namespace:X,group:j.name}}else if((0,b.i7)(ne)){const oe=F(ne);return{...te,...oe,type:h.Z.cloudRecording,dataSourceName:ee,namespace:X,group:j.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function U(k){const ee=T(),[X,j]=k.for?(0,P.P1)(k.for):[0,"s"],[ne,te]=k.keep_firing_for?(0,P.P1)(k.keep_firing_for):[ee.keepFiringForTime,ee.keepFiringForTimeUnit];return{name:k.alert,expression:k.expr,forTime:X,forTimeUnit:j,keepFiringForTime:ne,keepFiringForTimeUnit:te,annotations:S(k.annotations,!1),labels:S(k.labels,!0)}}function F(k){return{name:k.record,expression:k.expr,labels:S(k.labels,!0)}}const K=()=>{const k=(0,v.y9)();if(!k)return[...L("A","B")];const ee=(0,r.Cn)();return[{refId:"A",datasourceUid:k.uid,queryType:"",relativeTimeRange:ee,model:{refId:"A"}},...L("B","C")]},w=k=>{const ee=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:k[0]?.uid||"",queryType:"",relativeTimeRange:ee,model:{refId:"A"}}]},L=(...k)=>{const ee=k[0],X=k[1],j={refId:k[0],type:f.Tz.reduce,datasource:{uid:f.Uj,type:l.dR.type},conditions:[{type:"query",evaluator:{params:[],type:E.p.IsAbove},operator:{type:"and"},query:{params:[ee]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},ne={refId:X,type:f.Tz.threshold,datasource:{uid:f.Uj,type:l.dR.type},conditions:[{type:"query",evaluator:{params:[0],type:E.p.IsAbove},operator:{type:"and"},query:{params:[X]},reducer:{params:[],type:"last"}}],expression:ee};return[{refId:ee,datasourceUid:f.Uj,queryType:"",model:j},{refId:X,datasourceUid:f.Uj,queryType:"",model:ne}]},V=async(k,ee,X,j,ne,te)=>{const oe=[];for(const ie of k){const ue=await(0,m.l)().get(ie.datasource?.uid?ie.datasource:j),be={uid:ue.uid,type:ue.type},ge=s.relativeToTimeRange(ee),{interval:re,intervalMs:ye}=J(ge,te??ue.interval,ne),Be={__interval:{text:re,value:re},__interval_ms:{text:ye,value:ye},...X},ve=ue.interpolateVariablesInQueries?ue.interpolateVariablesInQueries([ie],Be)[0]:ie;if(be.uid===f.Uj){const Me={refId:ve.refId,queryType:"",relativeTimeRange:ee,datasourceUid:f.Uj,model:ve};oe.push(Me)}else{const Me=(0,m.l)().getInstanceSettings(be);if(Me&&Me.meta.alerting){const ke={refId:ve.refId,queryType:ve.queryType??"",relativeTimeRange:ee,datasourceUid:Me.uid,model:{...ve,maxDataPoints:ne,intervalMs:ye}};oe.push(ke)}}}return oe},N=async(k,ee)=>{const{targets:X}=k;if(!k.id||!ee.uid)return;const j=s.timeRangeToRelative(s.convertRawToRange(ee.time)),ne=await V(X,j,k.scopedVars||{},k.datasource??void 0,k.maxDataPoints??void 0,k.interval??void 0);if(!ne.length||!ne.find(ue=>ue.datasourceUid!==f.Uj))return;if(!ne.find(ue=>ue.datasourceUid===f.Uj)){const[ue,be]=L((0,c.W3)(ne),"-");ne.push(ue);const[ge,re]=L(ue.refId,(0,c.W3)(ne));ne.push(re)}const{folderTitle:te,folderUid:oe}=ee.meta;return{type:h.Z.grafana,folder:oe&&te?{uid:oe,title:te}:void 0,queries:ne,name:k.title,condition:ne[ne.length-1].refId,annotations:[{key:a.YH.dashboardUID,value:ee.uid},{key:a.YH.panelID,value:String(k.id)}]}},z=async k=>{if(!k.state.key)return;const ee=i.jh.getTimeRange(k),X=(0,u.un)(k);if(!X)return;const{queries:j,datasource:ne,maxDataPoints:te,minInterval:oe}=X.state,ie=(0,u.YQ)(k);if(!ie||!ie.state.uid)return;const ue=await V(j,s.timeRangeToRelative(s.convertRawToRange(ee.state.value.raw)),{__sceneObject:{value:k}},ne,te,oe);if(!ue.length||!ue.find(ye=>ye.datasourceUid!==f.Uj))return;if(!ue.find(ye=>ye.datasourceUid===f.Uj)){const[ye,Be]=L((0,c.W3)(ue),"-");ue.push(ye);const[ve,Me]=L(ye.refId,(0,c.W3)(ue));ue.push(Me)}const{folderTitle:be,folderUid:ge}=ie.state.meta;return{type:h.Z.grafana,folder:ge&&be?{uid:ge,title:be}:void 0,queries:ue,name:k.state.title,condition:ue[ue.length-1].refId,annotations:[{key:a.YH.dashboardUID,value:ie.state.uid},{key:a.YH.panelID,value:String((0,u.Cs)(k))}]}};function J(k,ee,X){return X?s.calculateInterval(k,X,ee):ee&&s.intervalToMs(ee)>1e3?{interval:ee,intervalMs:s.intervalToMs(ee)}:{interval:"1s",intervalMs:1e3}}function G(k){const ee=k.model;return H(ee)&&ee.instant&&ee.range?{...k,model:{...ee,range:!0,instant:!1}}:k}function H(k){return"expr"in k&&"instant"in k&&"range"in k}function q(k){return"expr"in k}const le=k=>({...k,queries:k.queries?.map(ee=>(0,t.omit)(ee,"model.hide"))});function me(k){return le(B(k))}},18461:(Y,I,e)=>{"use strict";e.d(I,{$9:()=>b,LC:()=>u,Ns:()=>C,P1:()=>m,PH:()=>y,UP:()=>i,VY:()=>M,Yd:()=>c,c:()=>a,qg:()=>v,uE:()=>O,x6:()=>g});var t=e(2543),n=e.n(t),r=e(12131),s=e(57220),o=e(23662);function m(S,p,x,A){return(0,o.lT)(A)?{uid:A.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:S,namespace:p,groupName:x,ruleName:(0,o.$y)(A)?A.alert:A.record,rulerRuleHash:C(A)}}function l(S,p,x,A){return{ruleSourceName:S,namespace:p,groupName:x,ruleName:A.name,ruleHash:D(A)}}function i(S,p){const x=p.namespace.name,A=p.group.name;if(p.rulerRule)return m(S,x,A,p.rulerRule);if(p.promRule)return l(S,x,A,p.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function c(S){return m(S.ruleSourceName,S.namespace,S.group.name,S.rule)}function u(S,p){return(0,o.A4)(S)&&(0,o.A4)(p)?S.uid===p.uid:(0,o.X4)(S)&&(0,o.X4)(p)?S.groupName===p.groupName&&S.namespace===p.namespace&&S.ruleName===p.ruleName&&S.rulerRuleHash===p.rulerRuleHash&&S.ruleSourceName===p.ruleSourceName:(0,o.Mj)(S)&&(0,o.Mj)(p)?S.groupName===p.groupName&&S.namespace===p.namespace&&S.ruleName===p.ruleName&&S.ruleHash===p.ruleHash&&S.ruleSourceName===p.ruleSourceName:!1}const f="cri",d="pri";function E(S){return S.replace(/\$/g,"_DOLLAR_")}function h(S){return S.replace(/\_DOLLAR\_/g,"$")}function y(S){return S.replace(/\//g,"").replace(/\\/g,"")}function a(S){return S.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function v(S,p=!1){const A=(p?decodeURIComponent(S):S).split("$");if(A.length===1)return{uid:S,ruleSourceName:"grafana"};if(A.length===6){const[R,B,U,F,K,w]=A.map(h).map(a);if(R===f)return{ruleSourceName:B,namespace:U,groupName:F,ruleName:K,rulerRuleHash:w};if(R===d)return{ruleSourceName:B,namespace:U,groupName:F,ruleName:K,ruleHash:w}}throw new Error(`Failed to parse rule location: ${S}`)}function g(S,p=!1){if(S)try{return v(S,p)}catch{return}}function b(S){return(0,o.A4)(S)?S.uid:(0,o.X4)(S)?[f,S.ruleSourceName,S.namespace,S.groupName,S.ruleName,S.rulerRuleHash].map(String).map(E).map(y).join("$"):[d,S.ruleSourceName,S.namespace,S.groupName,S.ruleName,S.ruleHash].map(String).map(E).map(y).join("$")}function P(S){let p=0;if(S.length===0)return p;for(let x=0;x<S.length;x++){const A=S.charCodeAt(x);p=(p<<5)-p+A,p=p&p}return p}function C(S){if((0,o.i7)(S))return P(JSON.stringify([S.record,S.expr,T(S.labels)])).toString();if((0,o.$y)(S))return P(JSON.stringify([S.alert,S.expr,T(S.annotations),T(S.labels)])).toString();if((0,o.lT)(S))return S.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function D(S){if((0,o.KB)(S))return P(JSON.stringify([S.type,S.query,T(S.labels)])).toString();if((0,o.Z8)(S))return P(JSON.stringify([S.type,S.query,T(S.annotations),T(S.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function T(S){return JSON.stringify(Object.entries(S||{}).sort((p,x)=>p[0].localeCompare(x[0])))}function M(S){return(0,o.A4)(S)?s.hY:S.ruleSourceName}function O(S){const{pathname:p=""}=r.Ny.getLocation(),{id:x}=S;return x?(0,t.nth)(p.split("/"),-2):void 0}},23662:(Y,I,e)=>{"use strict";e.d(I,{$7:()=>a,$y:()=>f,A4:()=>v,HH:()=>h,KB:()=>u,Mj:()=>P,Om:()=>x,RI:()=>y,TU:()=>M,Wy:()=>S,X4:()=>g,XI:()=>D,YN:()=>A,Z8:()=>c,dS:()=>O,f6:()=>C,i7:()=>d,jg:()=>B,lT:()=>E,nf:()=>b,qz:()=>R});var t=e(2543),n=e.n(t),r=e(43585),s=e(94822),o=e(28475),m=e(55740),l=e(57220),i=e(25968);function c(F){return typeof F=="object"&&F.type===s.JS.Alerting}function u(F){return typeof F=="object"&&F.type===s.JS.Recording}function f(F){return typeof F=="object"&&"alert"in F}function d(F){return typeof F=="object"&&"record"in F}function E(F){return typeof F=="object"&&"grafana_alert"in F}function h(F){return F.rulerRule&&E(F.rulerRule)&&!!F.rulerRule.grafana_alert.is_paused}function y(F){return JSON.stringify(F.labels)}function a(F){return F.error&&F.error?.message?.includes(m.UU)}function v(F){return"uid"in F}function g(F){return"rulerRuleHash"in F}function b(F){return Object.values(s.JS).includes(F)}function P(F){return"ruleHash"in F}function C(F){switch(F){case"ok":return o.Jc.Ok;case"nodata":return o.Jc.NoData;case"error":case"err":return o.Jc.Error;case"unknown":return o.Jc.Unknown;default:return}}function D(F){return F===s.cF.Inactive?"Normal":(0,t.capitalize)(F)}const T=F=>F.reduce((K,{dataSourceName:w,name:L,groups:V})=>(V.forEach(({name:N,rules:z})=>{z.forEach(J=>{c(J)&&K.push({dataSourceName:w,namespaceName:L,groupName:N,rule:J})})}),K),[]),M=F=>c(F.promRule)?F.promRule:null,O=F=>F.reduce((K,{rulesSource:w,name:L,groups:V})=>(V.forEach(({name:N,rules:z})=>{z.forEach(J=>{J.promRule&&c(J.promRule)&&K.push({dataSourceName:(0,l.EV)(w),namespaceName:L,groupName:N,...J})})}),K),[]);function S(F){let K;return Object.values(r.O).includes(F)?K=F:K=(0,s.lh)(F),p[K]}const p={[s.cF.Inactive]:"good",[s.cF.Firing]:"bad",[s.cF.Pending]:"warning",[s.Gi.Alerting]:"bad",[s.Gi.Error]:"bad",[s.Gi.NoData]:"info",[s.Gi.Normal]:"good",[s.Gi.Pending]:"warning",[r.O.NoData]:"info",[r.O.Paused]:"warning",[r.O.Alerting]:"bad",[r.O.OK]:"good",[r.O.Unknown]:"info"};function x(F){return F?.alerts?F.alerts.reduce((K,w)=>{const L=(0,s.lh)(w.state)!==s.Gi.Normal;if(w.activeAt&&L){const V=new Date(w.activeAt);if(K===null||K.getTime()>V.getTime())return V}return K},null):null}function A(F){return Array.isArray(F.source_tenants)}function R(F){return E(F)?F.grafana_alert.title:f(F)?F.alert:d(F)?F.record:""}const B=(F,K)=>{const w={alertName:"",forDuration:"0s",evaluationsToFire:0};return E(F)?{alertName:F.grafana_alert.title,forDuration:F.for,evaluationsToFire:U(F.for,K)}:f(F)?{alertName:F.alert,forDuration:F.for??"0s",evaluationsToFire:U(F.for??"0s",K)}:w},U=(F,K)=>{const w=(0,i.ge)(K),L=(0,i.ge)(F);return L===0&&w!==0?1:w===0||L/w<1?0:Math.ceil(L/w)+1}},25968:(Y,I,e)=>{"use strict";e.d(I,{M9:()=>c,P1:()=>n,TN:()=>o,ge:()=>u,mo:()=>f,sc:()=>s,yl:()=>d});var t=e(41068);function n(E){const h=E.match(/(\d+)(\w+)/);if(h)return[Number(h[1]),h[2]];throw new Error(`Invalid interval description: ${E}`)}function r(E){const{sec:h,count:y}=describeInterval(E);return h*y}const s=Object.entries(t.y).map(([E,h])=>({label:E[0].toUpperCase()+E.slice(1),value:h}));function o(E){try{return c(E),!0}catch{return!1}}const m={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},l=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),i=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t.y).join(", ")}`);function c(E){let h=E,y=[];function a(g){const b=l.exec(g),P=b?.groups?.value&&b?.groups?.type;if(!b||!P)throw i;b&&b.groups?.value&&b.groups?.type&&(h=h.replace(b[0],""),y.push([Number(b.groups.value),b.groups.type])),h&&a(h)}if(a(E),!y.length)throw i;return y.reduce((g,[b,P])=>{const C=b*m[P];return g+C},0)}const u=E=>{try{return c(E)}catch{return 0}},f=E=>E.includes("0001-01-01T00");function d(E){return E%(1e3*60*60)===0?E/(1e3*60*60)+"h":E%(1e3*60)===0?E/(1e3*60)+"m":E%1e3===0?E/1e3+"s":E.toFixed()+"ms"}},3704:(Y,I,e)=>{"use strict";e.d(I,{c:()=>n,z:()=>r});var t=e(32264);function n(s,o){const l=new URLSearchParams(o).toString();return`${t.$.appSubUrl}${s}${l?`?${l}`:""}`}function r(s,o){const l=new URLSearchParams(o).toString();try{const i=new URL(t.$.appSubUrl,t.$.appUrl);return i.pathname=s,`${i.href}${l?`?${l}`:""}`}catch{return n(s,o)}}},10154:(Y,I,e)=>{"use strict";e.d(I,{Xm:()=>s,rJ:()=>r,vJ:()=>n,vy:()=>o});var t=e(17172);function n(m){return(0,t.AI)().post("/api/annotations",m)}function r(m){return(0,t.AI)().put(`/api/annotations/${m.id}`,m)}function s(m){return(0,t.AI)().delete(`/api/annotations/${m.id}`)}async function o(){return(await(0,t.AI)().get("/api/annotations/tags")).result.tags.map(({tag:l,count:i})=>({term:l,count:i}))}},82241:(Y,I,e)=>{"use strict";e.d(I,{A:()=>D});var t=e(96540),n=e(75505),r=e(39070),s=e(76287),o=e(13544),m=e(68402),l=e(62930),i=e(55852),c=e(42418),u=e(14792),f=e(74856),d=e(34214),E=e(27302),h=e(42493),y=e(28240),a=e(8790),v=e(83195),g=e(56034),b=e(14578),P=e(88323);class C extends t.PureComponent{constructor(M){super(M),this.updateFields=()=>{const O=this.props.response?.panelData,S=O?.series?.[0]??O?.annotations?.[0];if(S&&S.fields){const p=S.fields.map(x=>{const A=(0,y.Ct)(x,S);let R="";for(let B=0;B<S.length;B++){if(B>0&&(R+=", "),B>2){R+="...";break}R+=x.values[B]}return R.length>50&&(R=R.substring(0,50)+"..."),{label:`${A} (${x.type})`,value:A,description:R}});this.setState({fieldNames:p})}},this.onFieldSourceChange=(O,S)=>{const p=this.props.mappings||{},x=p[O]||{};this.props.change({...p,[O]:{...x,source:S.value||a.V.Field}})},this.onFieldNameChange=(O,S)=>{const p=this.props.mappings||{};if(!S){const A={...this.props.mappings};delete A[O],this.props.change(A);return}const x=p[O]||{};this.props.change({...p,[O]:{...x,value:S.value,source:a.V.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(M){M.response!==this.props.response&&this.updateFields()}renderRow(M,O,S){const{fieldNames:p}=this.state;let x=[...p];const A=O.value;let R=p.find(U=>A===U.value);A&&!R&&x.push({label:A,value:A});let B=S?S[M.key]:"";if(B&&M.key.startsWith("time")){const U=(0,v.j_)("dateTimeAsIso");B=(0,v.cN)(U(B))}return B==null&&(B=""),t.createElement("tr",{key:M.key},t.createElement("td",null,M.label||M.key," ",M.help&&t.createElement(g.m,{content:M.help},t.createElement(b.I,{name:"info-circle"}))),t.createElement("td",null,t.createElement(P.l6,{value:R,options:x,placeholder:M.placeholder||M.key,onChange:U=>{this.onFieldNameChange(M.key,U)},noOptionsMessage:"Unknown field names",allowCustomValue:!0,isClearable:!0})),t.createElement("td",null,`${B}`))}render(){const M=this.props.response?.events?.[0],O=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,h.kj.map(S=>this.renderRow(S,O[S.key]||{},M))))}}class D extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:M,annotation:O}=this.props;if((0,h.E7)(M))return;const S=(0,u.UA)().getCurrent();if(!S)return;this.setState({running:!0});const p=await(0,n.s)((0,E.b)({range:(0,f.jG)().timeRange(),panel:new d.a({}),dashboard:S},M,O));this.setState({running:!1,response:p})},this.onQueryChange=M=>{this.props.onChange({...this.props.annotation,target:M})},this.onMappingChange=M=>{this.props.onChange({...this.props.annotation,mappings:M})},this.onAnnotationChange=M=>{this.props.onChange(M)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(M){this.props.annotation!==M.annotation&&!(0,h.E7)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:M,annotation:O}=this.props,p={...h.CU,...M.annotations}.prepareAnnotation(O);p!==O?this.props.onChange(p):this.onRunQuery()}getStatusSeverity(M){const{events:O,panelData:S}=M;return S?.errors||S?.error?"error":O?.length?"success":"warning"}renderStatusText(M,O){const{events:S,panelData:p}=M;if(O||M?.panelData?.state===r.Gu.Loading||!M)return t.createElement("p",null,"loading...");if(p?.errors)return t.createElement(t.Fragment,null,p.errors.map((A,R)=>t.createElement("p",{key:R},A.message)));if(p?.error)return t.createElement("p",null,p.error.message??"There was an error fetching data");if(!S?.length)return t.createElement("p",null,"No events found");const x=p?.series?.[0]??p?.annotations?.[0];return t.createElement("p",null,S.length," events (from ",x?.fields.length," fields)")}renderStatus(){const{response:M,running:O}=this.state;return M?t.createElement(t.Fragment,null,t.createElement(m.$,{v:2}),t.createElement("div",null,O?t.createElement(l.y,null):t.createElement(i.$n,{"data-testid":o.Tp.components.Annotations.editor.testButton,variant:"secondary",size:"xs",onClick:this.onRunQuery},"Test annotation query")),t.createElement(m.$,{v:2,layout:"block"}),t.createElement(c.F,{"data-testid":o.Tp.components.Annotations.editor.resultContainer,severity:this.getStatusSeverity(M),title:"Query result"},this.renderStatusText(M,O))):null}render(){const{datasource:M,annotation:O,datasourceInstanceSettings:S}=this.props,{response:p}=this.state;let x=M.annotations?.QueryEditor||M.components?.QueryEditor;if(!x)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const A={...M.annotations?.getDefaultQuery?.(),...O.target??{refId:"Anno"}};return t.createElement(t.Fragment,null,t.createElement(s.p,{instanceSettings:S},t.createElement(x,{key:M?.name,query:A,datasource:M,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:p?.panelData,range:(0,f.jG)().timeRange(),annotation:O,onAnnotationChange:this.onAnnotationChange})),(0,h.JX)(M)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(C,{response:p,mappings:O.mappings,change:this.onMappingChange})))}}},27302:(Y,I,e)=>{"use strict";e.d(I,{b:()=>u});var t=e(62467),n=e(69862),r=e(81160),s=e(65879),o=e(41987),m=e(39374),l=e(42493);let i=100;function c(){return"AQ"+i++}function u(f,d,E){const h={...l.CU,...d.annotations},y={...h.getDefaultQuery?.(),...E},a=h.prepareAnnotation(y);if(!a)return(0,t.of)({});const v=h.prepareQuery(a);if(!v)return(0,t.of)({});const g=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=s.calculateInterval(f.range,g,d.interval),P={__interval:{text:b.interval,value:b.interval},__interval_ms:{text:b.intervalMs.toString(),value:b.intervalMs},__annotation:{text:a.name,value:a}},C={startTime:Date.now(),requestId:c(),range:f.range,maxDataPoints:g,scopedVars:P,...b,app:o.Jk.Dashboard,timezone:f.dashboard.timezone,targets:[{...v,refId:"Anno"}]};return(0,m.BN)(d,C).pipe((0,n.Z)(D=>{const T=D?.series.length?D.series:D.annotations;return T?.length?h.processEvents(a,T).pipe((0,r.T)(M=>({panelData:D,events:M}))):(0,t.of)({panelData:D,events:[]})}))}},42493:(Y,I,e)=>{"use strict";e.d(I,{CU:()=>f,E7:()=>b,JX:()=>g,kj:()=>E});var t=e(2543),n=e.n(t),r=e(62467),s=e(69862),o=e(81160),m=e(57934),l=e(11261),i=e(28240),c=e(8790),u=e(2913);const f={prepareAnnotation:P=>{if((0,t.isString)(P?.query)){const{query:C,...D}=P;return{...D,target:{refId:"annotation_query",query:C},mappings:{}}}return P},prepareQuery:P=>P.target,processEvents:(P,C)=>a(C,P.mappings)};function d(){return P=>P.pipe((0,s.Z)(C=>{if(!C?.length)return(0,r.of)(void 0);if(C.length===1)return(0,r.of)(C[0]);const D={interpolate:T=>T};return(0,r.of)(C).pipe(m.c.mergeTransformer.operator({},D),(0,o.T)(T=>T[0]))}))}const E=[{key:"time",field:P=>P.fields.find(C=>C.type===l.PU.time),placeholder:"time, or the first time field"},{key:"timeEnd",label:"end time",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:P=>P.fields.find(C=>C.type===l.PU.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],h=[{key:"color"},{key:"isRegion"},{key:"source"}],y=[...u.config.publicDashboardAccessToken?h:[],...E,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function a(P,C){return(0,r.of)(P).pipe(d(),(0,o.T)(D=>{if(!D?.length)return[];let T=!1,M=!1;const O={};for(const x of D.fields){const A=(0,i.Ct)(x,D);O[A.toLowerCase()]=x}C||(C={});const S=[];for(const x of y){const A=C[x.key]||{};if(A.source===c.V.Skip)continue;const R={key:x.key,split:x.split};if(A.source===c.V.Text)R.text=A.value;else{const B=(A.value||x.key).toLowerCase();R.field=O[B],!R.field&&x.field&&(R.field=x.field(D))}(R.field||R.text)&&(S.push(R),R.key==="time"?T=!0:R.key==="text"&&(M=!0))}if(!T||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const p=[];for(let x=0;x<D.length;x++){const A={type:"default",color:"red"};for(const R of S){let B;if(R.text)B=R.text;else if(R.field&&(B=R.field.values[x],B!==void 0&&R.regex)){const U=R.regex.exec(B);U&&(B=U[1]?U[1]:U[0])}B!=null&&(R.split&&typeof B=="string"&&(B=B.split(",")),A[R.key]=B)}p.push(A)}return p}))}const v=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function g(P){const{type:C}=P;return!(C==="datasource"||v.includes(C))}function b(P){const{type:C}=P;return v.includes(C)}},93584:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>u,QB:()=>i,Ri:()=>l,Sf:()=>s,cV:()=>o,h8:()=>m});var t=e(30038);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},r=(0,t.Z0)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(f,d)=>{const{keys:E,keysIncludingExpired:h}=d.payload,y=d.payload.keys.length===0&&d.payload.keysIncludingExpired.length>0?!0:f.includeExpired;return{...f,hasFetched:!0,keys:E,keysIncludingExpired:h,includeExpired:y}},setSearchQuery:(f,d)=>({...f,searchQuery:d.payload}),includeExpiredToggled:f=>({...f,includeExpired:!f.includeExpired}),isFetching:f=>({...f,hasFetched:!1}),setMigrationResult:(f,d)=>({...f,migrationResult:d.payload})}}),{apiKeysLoaded:s,includeExpiredToggled:o,isFetching:m,setSearchQuery:l,setMigrationResult:i}=r.actions,u={apiKeys:r.reducer}},73399:(Y,I,e)=>{"use strict";e.d(I,{getAuthProviderStatus:()=>u,getRegisteredAuthProviders:()=>l,initAuthConfig:()=>f});var t=e(10096),n=e(27677),r=e(31678);const s=[],o={};function m(E,h){s.find(y=>y.id===E.id)||(s.push(E),h&&(o[E.id]=h))}function l(){return s}function i(E){return s.find(h=>h.id===E)}function c(E){const h=[];for(const[y,a]of Object.entries(E)){const v=s.find(g=>`auth.${g.id}`===y);if(v){const g={...a,providerId:v.id,displayName:a.name||v.displayName};h.push(g)}}return h}async function u(E){if(o[E]){const h=o[E];return h()}return{configured:!1,enabled:!1}}function f(){m({id:"ldap",type:"LDAP",protocol:"LDAP",displayName:"LDAP",configPath:"ldap"},d)}async function d(){if(t.TP.hasPermission(r.AccessControlAction.SettingsRead)){const h=(await(0,n.AI)().get("/api/admin/settings"))["auth.ldap"]||{};return{configured:h.enabled==="true",enabled:h.enabled==="true",hide:h.enabled!=="true"}}return{configured:!1,enabled:!1}}},20604:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>h,MH:()=>l,Nh:()=>i,Oy:()=>d,SH:()=>c,TO:()=>o,jA:()=>s,sr:()=>m});var t=e(30038);const n={settings:{},providerStatuses:{},isLoading:!1,providers:[]},r=(0,t.Z0)({name:"authConfig",initialState:n,reducers:{settingsUpdated:(y,a)=>({...y,settings:a.payload}),providerStatusesLoaded:(y,a)=>({...y,providerStatuses:a.payload}),loadingBegin:y=>({...y,isLoading:!0}),loadingEnd:y=>({...y,isLoading:!1}),setError:(y,a)=>({...y,updateError:a.payload}),resetError:y=>({...y,updateError:void 0}),setWarning:(y,a)=>({...y,warning:a.payload}),resetWarning:y=>({...y,warning:void 0}),providersLoaded:(y,a)=>({...y,providers:a.payload})}}),{settingsUpdated:s,providerStatusesLoaded:o,loadingBegin:m,loadingEnd:l,setError:i,resetError:c,setWarning:u,resetWarning:f,providersLoaded:d}=r.actions,h={authConfig:r.reducer}},55314:(Y,I,e)=>{"use strict";e.d(I,{G2:()=>b,Ko:()=>v,Vc:()=>T,aF:()=>C,cU:()=>y,e8:()=>M,hT:()=>E.hT,iB:()=>O,kH:()=>P,uz:()=>g,vZ:()=>a,wt:()=>D});var t=e(93020),n=e(75505),r=e(71733),s=e(39070),o=e(17172),m=e(12131),l=e(82467),i=e(3169),c=e(10096),u=e(6473),f=e(37690),d=e(92955),E=e(51066);function h({baseURL:S}){async function p(x){try{const{data:A,...R}=await(0,n.s)((0,o.AI)().fetch({...x,url:S+x.url,showErrorAlert:x.showErrorAlert}));return{data:A,meta:R}}catch(A){return x.manageError?x.manageError(A):{error:A}}}return p}const y=(0,t.xP)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:h({baseURL:"/api"}),endpoints:S=>({listFolders:S.query({providesTags:p=>p?.map(x=>({type:"getFolder",id:x.uid}))??[],query:({parentUid:p,limit:x,page:A,permission:R})=>({url:"/folders",params:{parentUid:p,limit:x,page:A,permission:R}})}),getFolder:S.query({providesTags:(p,x,A)=>[{type:"getFolder",id:A}],query:p=>({url:`/folders/${p}`,params:{accesscontrol:!0}})}),newFolder:S.mutation({query:({title:p,parentUid:x})=>({method:"POST",url:"/folders",data:{title:p,parentUid:x}}),onQueryStarted:({parentUid:p},{queryFulfilled:x,dispatch:A})=>{x.then(async({data:R})=>{await c.TP.fetchUserPermissions(),A((0,l.dx)((0,i.tZ)("Folder created"))),A((0,f.bw)({parentUID:p,pageSize:d.md})),m.Ny.push(r.I.stripBaseFromUrl(R.url))})}}),saveFolder:S.mutation({invalidatesTags:["getFolder"],query:({uid:p,title:x,version:A})=>({method:"PUT",url:`/folders/${p}`,data:{title:x,version:A}}),onQueryStarted:({parentUid:p},{queryFulfilled:x,dispatch:A})=>{x.then(()=>{A((0,f.bw)({parentUID:p,pageSize:d.md}))})}}),moveFolder:S.mutation({invalidatesTags:["getFolder"],query:({folder:p,destinationUID:x})=>({url:`/folders/${p.uid}/move`,method:"POST",data:{parentUID:x}}),onQueryStarted:({folder:p,destinationUID:x},{queryFulfilled:A,dispatch:R})=>{const{parentUid:B}=p;A.then(()=>{R((0,f.bw)({parentUID:B,pageSize:d.md})),R((0,f.bw)({parentUID:x,pageSize:d.md}))})}}),deleteFolder:S.mutation({query:({uid:p})=>({url:`/folders/${p}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:p},{queryFulfilled:x,dispatch:A})=>{x.then(()=>{A((0,f.bw)({parentUID:p,pageSize:d.md}))})}}),getAffectedItems:S.query({queryFn:async p=>{const A=Object.keys(p.folder).filter(U=>p.folder[U]).map(U=>(0,o.AI)().get(`/api/folders/${U}/counts`)),R=await Promise.all(A),B={folder:Object.values(p.folder).filter(s.zz).length,dashboard:Object.values(p.dashboard).filter(s.zz).length,libraryPanel:0,alertRule:0};for(const U of R)B.folder+=U.folder??0,B.dashboard+=U.dashboard,B.alertRule+=U.alertrule,B.libraryPanel+=U.librarypanel;return{data:B}}}),moveItems:S.mutation({invalidatesTags:["getFolder"],queryFn:async({selectedItems:p,destinationUID:x},A,R,B)=>{const U=Object.keys(p.dashboard).filter(K=>p.dashboard[K]),F=Object.keys(p.folder).filter(K=>p.folder[K]);for(const K of F)await B({url:`/folders/${K}/move`,method:"POST",data:{parentUID:x}});for(const K of U){const L={dashboard:(await(0,o.AI)().get(`/api/dashboards/uid/${K}`)).dashboard,folderUid:x,overwrite:!1,message:""};await B({url:"/dashboards/db",method:"POST",data:L})}return{data:void 0}},onQueryStarted:({destinationUID:p,selectedItems:x},{queryFulfilled:A,dispatch:R})=>{const B=Object.keys(x.dashboard).filter(F=>x.dashboard[F]),U=Object.keys(x.folder).filter(F=>x.folder[F]);A.then(()=>{R((0,f.bw)({parentUID:p,pageSize:d.md})),R((0,f.Zw)([...U,...B]))})}}),deleteItems:S.mutation({queryFn:async({selectedItems:p},x,A,R)=>{const B=Object.keys(p.dashboard).filter(F=>p.dashboard[F]),U=Object.keys(p.folder).filter(F=>p.folder[F]);for(const F of U)await R({url:`/folders/${F}`,method:"DELETE",params:{forceDeleteRules:!1}});for(const F of B)await R({url:`/dashboards/uid/${F}`,method:"DELETE"});return{data:void 0}},onQueryStarted:({selectedItems:p},{queryFulfilled:x,dispatch:A})=>{const R=Object.keys(p.dashboard).filter(U=>p.dashboard[U]),B=Object.keys(p.folder).filter(U=>p.folder[U]);x.then(()=>{A((0,f.Zw)([...B,...R]))})}}),saveDashboard:S.mutation({query:({dashboard:p,folderUid:x,message:A,overwrite:R,showErrorAlert:B})=>({url:"/dashboards/db",method:"POST",showErrorAlert:B,data:{dashboard:p,folderUid:x,message:A??"",overwrite:!!R}}),onQueryStarted:({folderUid:p},{queryFulfilled:x,dispatch:A})=>{u.t.ignoreNextSave(),x.then(async()=>{await c.TP.fetchUserPermissions(),A((0,f.bw)({parentUID:p,pageSize:d.md}))})}}),importDashboard:S.mutation({query:({dashboard:p,overwrite:x,inputs:A,folderUid:R})=>({method:"POST",url:"/dashboards/import",data:{dashboard:p,overwrite:x,inputs:A,folderUid:R}}),onQueryStarted:({folderUid:p},{queryFulfilled:x,dispatch:A})=>{x.then(async R=>{A((0,f.bw)({parentUID:p,pageSize:d.md}));const B=r.I.stripBaseFromUrl(R.data.importedUrl);m.Ny.push(B)})}})})}),{endpoints:a,useDeleteFolderMutation:v,useDeleteItemsMutation:g,useGetAffectedItemsQuery:b,useGetFolderQuery:P,useMoveFolderMutation:C,useMoveItemsMutation:D,useNewFolderMutation:T,useSaveDashboardMutation:M,useSaveFolderMutation:O}=y},92955:(Y,I,e)=>{"use strict";e.d(I,{aw:()=>f,md:()=>c,uT:()=>u});var t=e(32264),n=e(17172),r=e(53477),s=e(24439),o=e(40957),m=e(10096),l=e(31678),i=e(49952);const c=50;async function u(d,E,h=1,y=c){if(d&&!t.$.featureToggles.nestedFolders)return[];const a=(0,n.AI)();let v=[];m.TP.hasPermission(l.AccessControlAction.FoldersRead)&&(v=await a.get("/api/folders",{parentUid:d,page:h,limit:y}));const g=t.$.appSubUrl??"";return v.map(b=>({kind:"folder",uid:b.uid,title:b.title,parentTitle:E,parentUID:d,url:(0,i.I)(b.uid)?void 0:`${g}/dashboards/f/${b.uid}/`}))}async function f(d,E=1,h=c){const a=await(0,s.getGrafanaSearcher)().search({kind:["dashboard"],query:"*",location:d||"general",from:(E-1)*h,limit:h});return a.view.map(v=>{const g=(0,o.hI)(v,a.view);return g.parentUID===r.TF&&(g.parentUID=void 0),g})}},43907:(Y,I,e)=>{"use strict";e.d(I,{x:()=>i});var t=e(96540),n=e(70255),r=e(94753),s=e(42418),o=e(55314),m=e(44836);function l(c,u,f,d){const E=c+u+f+d,h=[];c&&h.push((0,m.t)("browse-dashboards.counts.folder","{{count}} folder",{count:c})),u&&h.push((0,m.t)("browse-dashboards.counts.dashboard","{{count}} dashboard",{count:u})),f&&h.push((0,m.t)("browse-dashboards.counts.libraryPanel","{{count}} library panel",{count:f})),d&&h.push((0,m.t)("browse-dashboards.counts.alertRule","{{count}} alert rule",{count:d}));let y=(0,m.t)("browse-dashboards.counts.total","{{count}} item",{count:E});return h.length>0&&(y+=`: ${h.join(", ")}`),y}const i=({selectedItems:c})=>{const{data:u,isFetching:f,isLoading:d,error:E}=(0,o.G2)(c);return t.createElement(t.Fragment,null,t.createElement(r.E,{element:"p",color:"secondary"},u&&l(u.folder,u.dashboard,u.libraryPanel,u.alertRule),(f||d)&&t.createElement(n.A,{width:200})),E&&t.createElement(s.F,{severity:"error",title:"Unable to retrieve descendant information"}))}},49952:(Y,I,e)=>{"use strict";e.d(I,{I:()=>r,e:()=>n});var t=e(32264);function n(s,o){return s+o.uid}function r(s){return s===t.$.sharedWithMeFolderUID}},36141:(Y,I,e)=>{"use strict";e.d(I,{Ii:()=>l,Zw:()=>o,bw:()=>m});var t=e(53477),n=e(31678),r=e(92955),s=e(93519);const o=(0,n.createAsyncThunk)("browseDashboards/refreshParents",async(i,{getState:c,dispatch:u})=>{const{browseDashboards:f}=c(),{rootItems:d,childrenByParentUID:E}=f,h=new Set;for(const y of i){const a=(0,s.R)(d?.items??[],E,y);h.add(a?.parentUID)}for(const y of h)u(m({parentUID:y,pageSize:r.md}))}),m=(0,n.createAsyncThunk)("browseDashboards/refetchChildren",async({parentUID:i,pageSize:c})=>{const u=i===t.TF?void 0:i;let f=1,d="folder",E=await(0,r.uT)(u,void 0,f,c),h=E.length<c;if(d==="folder"&&h){d="dashboard",f=1;const y=await(0,r.aw)(u,f,c);h=y.length<c,E=E.concat(y)}return{children:E,lastPageOfKind:h,page:f,kind:d}}),l=(0,n.createAsyncThunk)("browseDashboards/fetchNextChildrenPage",async({parentUID:i,excludeKinds:c=[],pageSize:u},f)=>{const d=!c.includes("dashboard"),E=i===t.TF?void 0:i,h=f.getState().browseDashboards,y=E?h.childrenByParentUID[E]:h.rootItems;let a=1,v;if(y?y.lastFetchedKind==="dashboard"&&!y.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${E} but that collection is fully loaded`):y.lastFetchedKind==="folder"&&y.lastKindHasMoreItems?(a=y.lastFetchedPage+1,v="folder"):d&&(a=y.lastFetchedKind==="folder"?1:y.lastFetchedPage+1,v="dashboard"):(a=1,v="folder"),!v)return;let g=v==="folder"?await(0,r.uT)(E,void 0,a,u):await(0,r.aw)(E,a,u),b=g.length<u;if(v==="folder"&&b&&d){v="dashboard",a=1;const P=await(0,r.aw)(E,a,u);b=P.length<u,g=g.concat(P)}return{children:g,lastPageOfKind:b,page:a,kind:v}})},37690:(Y,I,e)=>{"use strict";e.d(I,{Am:()=>u,Ii:()=>n.Ii,bw:()=>n.bw,Zw:()=>n.Zw,ku:()=>c,cT:()=>t.cT,wn:()=>t.wn,t$:()=>t.t$,xK:()=>C,eC:()=>a,Ms:()=>b,V6:()=>P,q0:()=>v,QE:()=>g,Zg:()=>D});var t=e(79763),n=e(36141),r=e(96540),s=e(1081),o=e(31678),m=e(92955),l=e(49952),i=e(93519);const c=M=>M.browseDashboards.rootItems,u=M=>M.browseDashboards.childrenByParentUID,f=M=>M.browseDashboards.openFolders,d=M=>M.browseDashboards.selectedItems,E=(0,s.Mz)(c,u,f,(M,O)=>O,(M,O,S,p)=>T(p,M,O,S)),h=(0,s.Mz)(d,M=>Object.values(M).some(O=>Object.values(O).some(S=>S))),y=(0,s.Mz)(d,u,(M,O)=>{const S={dashboard:{...M.dashboard},folder:{...M.folder}};for(const p of Object.keys(M.folder))if(M.folder[p]){const A=O[p];if(A)for(const R of A.items)R.kind==="dashboard"&&(S.dashboard[R.uid]=!1),R.kind==="folder"&&(S.folder[R.uid]=!1)}return S});function a(M){return(0,o.useSelector)(O=>(M?O.browseDashboards.childrenByParentUID[M]:O.browseDashboards.rootItems)?"fulfilled":"pending")}function v(M){return(0,o.useSelector)(O=>E(O,M))}function g(){return(0,o.useSelector)(M=>h(M))}function b(){return(0,o.useSelector)(d)}function P(){return(0,o.useSelector)(M=>M.browseDashboards.childrenByParentUID)}function C(){return(0,o.useSelector)(M=>y(M))}function D(M=[]){const O=(0,o.useDispatch)(),S=(0,r.useRef)(!1);return(0,r.useCallback)(x=>{if(S.current)return Promise.resolve();S.current=!0;const A=O((0,n.Ii)({parentUID:x,excludeKinds:M,pageSize:m.md}));return A.finally(()=>S.current=!1),A},[O,M])}function T(M,O,S,p,x=0,A=[],R=[]){function B(N,z,J){if(A.includes(N.kind)||R.includes(N.uid))return[];const G=T(N.uid,O,S,p,J+1,A,R),H=!!p[N.uid],q=S[N.uid]?.items.length===0;H&&q&&!A.includes("empty-folder")&&G.push({isOpen:!1,level:J+1,item:{kind:"ui",uiKind:"empty-folder",uid:N.uid+"empty-folder"},parentUID:z});const le={item:N,parentUID:z,level:J,isOpen:H},me=[le,...G];return(0,l.I)(le.item.uid)&&me.push({item:{kind:"ui",uiKind:"divider",uid:"shared-with-me-divider"},parentUID:z,level:J+1,isOpen:!1}),me}const U=M&&p[M]||x===0,F=M?S[M]:O;let w=((M?U&&F?.items:F?.items)||[]).flatMap(N=>B(N,M,x));const L=A.includes("dashboard")&&F?.lastFetchedKind==="dashboard";return(x===0&&!F||U&&F&&!(F.isFullyLoaded||L))&&(w=w.concat((0,i.T)(m.md,M,x))),w}},79763:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>P,cT:()=>b,wn:()=>v,t$:()=>g});var t={};e.r(t),e.d(t,{fetchNextChildrenPageFulfilled:()=>l,refetchChildrenFulfilled:()=>m,setAllSelection:()=>u,setFolderOpenState:()=>i,setItemSelectionState:()=>c});var n=e(30038),r=e(36141),s=e(49952),o=e(93519);function m(C,D){const{children:T,page:M,kind:O,lastPageOfKind:S}=D.payload,{parentUID:p}=D.meta.arg,x={items:T,lastFetchedKind:O,lastFetchedPage:M,lastKindHasMoreItems:!S,isFullyLoaded:O==="dashboard"&&S};p?C.childrenByParentUID[p]=x:C.rootItems=x}function l(C,D){const T=D.payload;if(!T)return;const{children:M,page:O,kind:S,lastPageOfKind:p}=T,{parentUID:x,excludeKinds:A=[]}=D.meta.arg,U={items:((x?C.childrenByParentUID[x]:C.rootItems)?.items??[]).concat(M),lastFetchedKind:S,lastFetchedPage:O,lastKindHasMoreItems:!p,isFullyLoaded:(A.includes("dashboard")||S==="dashboard")&&p};if(!x){C.rootItems=U;return}if(C.childrenByParentUID[x]=U,C.selectedItems.folder[x])for(const K of M)C.selectedItems[K.kind][K.uid]=!0}function i(C,D){const{folderUID:T,isOpen:M}=D.payload;C.openFolders[T]=M}function c(C,D){const{item:T,isSelected:M}=D.payload;if((0,s.I)(T.uid))return;function O(S,p){if(C.selectedItems[S][p]=M,S!=="folder")return;let x=C.childrenByParentUID[p];for(const A of x?.items??[])O(A.kind,A.uid)}if(O(T.kind,T.uid),!M){let S=T.parentUID;for(;S;){const p=(0,o.R)(C.rootItems?.items??[],C.childrenByParentUID,S);if(!p)break;C.selectedItems[p.kind][p.uid]=!1,S=p.parentUID}}C.selectedItems.$all=C.rootItems?.items?.every(S=>C.selectedItems[S.kind][S.uid])??!1}function u(C,D){const{isSelected:T,folderUID:M}=D.payload;if(!(M&&(0,s.I)(M)))if(C.selectedItems.$all=T,T){let S=function(p){if(p&&(0,s.I)(p))return;const x=p?C.childrenByParentUID[p]:C.rootItems;if(x)for(const A of x.items)(0,s.I)(A.uid)||(C.selectedItems[A.kind][A.uid]=T,A.kind==="folder"&&S(A.uid))};var O=S;S(M)}else for(const S in C.selectedItems){if(!(S==="dashboard"||S==="panel"||S==="folder"))continue;const p=C.selectedItems[S];for(const x in p)p[x]=T}}const{fetchNextChildrenPageFulfilled:f,refetchChildrenFulfilled:d,...E}=t,h={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},y=(0,n.Z0)({name:"browseDashboards",initialState:h,reducers:E,extraReducers:C=>{C.addCase(r.Ii.fulfilled,f),C.addCase(r.bw.fulfilled,d)}}),a=y.reducer,{setFolderOpenState:v,setItemSelectionState:g,setAllSelection:b}=y.actions,P={browseDashboards:a}},93519:(Y,I,e)=>{"use strict";e.d(I,{R:()=>t,T:()=>n});function t(r,s,o){for(const m of r)if(m.uid===o)return m;for(const m in s){const l=s[m];if(l){for(const i of l.items)if(i.uid===o)return i}}}function n(r,s,o){return new Array(r).fill(null).map((m,l)=>({parentUID:s,level:o,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${s}-pagination-${l}`}}))}},6320:(Y,I,e)=>{"use strict";e.d(I,{b:()=>n,q:()=>t});const t="connections",n={Base:`/${t}`,DataSources:`/${t}/datasources`,DataSourcesNew:`/${t}/datasources/new`,DataSourcesEdit:`/${t}/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${t}/add-new-connection`,DataSourcesDetails:`/${t}/datasources/:id`,ConnectDataOutdated:`/${t}/connect-data`,YourConnectionsOutdated:`/${t}/your-connections`}},67023:(Y,I,e)=>{"use strict";e.d(I,{k:()=>o});var t=e(60455),n=e.n(t),r=e(91890),s=e(87490);const o=(m,l,i)=>{let c={},u={};if(m.type===r.CC.Regex&&m.expression){const f=new RegExp(m.expression,"gi"),E=(typeof l=="string"?l:(0,s.MA)(l)).matchAll(f);for(const h of E)h.groups?u=h.groups:u[m.mapValue||i]=h[1]||h[0]}else m.type===r.CC.Logfmt&&(u=n().parse(l));return Object.keys(u).forEach(f=>{const d=typeof u[f]=="string"?u[f]:(0,s.MA)(u[f]);c[f]={value:d}}),c}},40511:(Y,I,e)=>{"use strict";e.d(I,{F0:()=>i,bQ:()=>c,lW:()=>u});var t=e(41053),n=e(75505),r=e(19347),s=e(76888),o=e(18380);const m=({sourceUID:f,targetUID:d,...E})=>{const h=(0,r.l)().getInstanceSettings(f),y=(0,r.l)().getInstanceSettings(d);if((E?.orgId===void 0||E?.orgId===null||E?.orgId===0)&&o.kb.logWarning("Invalid correlation config: Missing org id."),h&&h?.uid!==void 0&&y&&y.uid!==void 0)return{...E,source:h,target:y};o.kb.logWarning("Invalid correlation config: Missing source or target.",{source:JSON.stringify(h),target:JSON.stringify(y)})},l=f=>!!f,i=f=>({...f,correlations:f.correlations.map(m).filter(l)});function c(f){return f.data}const u=()=>{const{backend:f}=(0,s.Il)(),[d,E]=(0,t.A)(P=>(0,n.s)(f.fetch({url:"/api/datasources/correlations",params:{page:P.page},method:"GET",showErrorAlert:!1})).then(c).then(i),[f]),[h,y]=(0,t.A)(({sourceUID:P,...C})=>f.post(`/api/datasources/uid/${P}/correlations`,C).then(D=>{const T=m(D.result);if(T!==void 0)return T;throw new Error("invalid sourceUID")}),[f]),[a,v]=(0,t.A)(({sourceUID:P,uid:C})=>f.delete(`/api/datasources/uid/${P}/correlations/${C}`),[f]),[g,b]=(0,t.A)(({sourceUID:P,uid:C,...D})=>f.patch(`/api/datasources/uid/${P}/correlations/${C}`,D).then(T=>{const M=m(T.result);if(M!==void 0)return M;throw new Error("invalid sourceUID")}),[f]);return{create:{execute:y,...h},update:{execute:b,...g},get:{execute:E,...d},remove:{execute:v,...a}}}},18380:(Y,I,e)=>{"use strict";e.d(I,{$q:()=>f,J6:()=>u,cA:()=>i,kb:()=>h,tZ:()=>E});var t=e(75505),n=e(91890),r=e(17172),s=e(19347),o=e(34867),m=e(9651),l=e(40511);const i=(y,a,v)=>(y.forEach(g=>{const b=g.refId;if(!b)return;let P=v[b];if(P===void 0&&g.meta?.preferredVisualisationType==="rawPrometheus"){const D=(0,m.a)(b);P=v[D]}const C=a.filter(D=>D.source.uid===P);c(g,C)}),y),c=(y,a)=>{y.fields.forEach(v=>{v.config.links=v.config.links?.filter(g=>g.origin!==n.x0.Correlations)||[],a.map(g=>{if(g.config?.field===v.name){const b=g.config?.target||{};v.config.links.push({internal:{query:{...b,datasource:{uid:g.target.uid}},datasourceUid:g.target.uid,datasourceName:g.target.name,transformations:g.config?.transformations},url:"",title:g.label||g.target.name,origin:n.x0.Correlations})}})})},u=async y=>(0,t.s)((0,r.AI)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:y}})).then(l.bQ).then(l.F0),f=async(y,a)=>(0,r.AI)().post(`/api/datasources/uid/${y}/correlations`,a),d=async y=>y.datasourceInstance?.meta.mixed?await(0,s.l)().get(y.queries[0].datasource):y.datasourceInstance,E=async(y,a)=>Promise.all([d(y),d(a)]).then(v=>v[0]?.name!==void 0&&v[1]?.name!==void 0?`${v[0]?.name} to ${v[1]?.name}`:""),h=(0,o.DW)("features.correlations")},41524:(Y,I,e)=>{"use strict";e.d(I,{W:()=>r});var t=e(11261);function n(){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyz",m=s.length,l=new Map;return i=>{const c=l.get(i);if(c!=null)return c;const u=[...i].map(f=>f.toLowerCase()&&f!==f.toUpperCase()?o.charAt(Math.floor(Math.random()*m)):f.toUpperCase()&&f!==f.toUpperCase()?s.charAt(Math.floor(Math.random()*m)):f).join("");return l.set(i,u),u}}function r(s,o){if(!(o.labels||o.names||o.values))return s;const m=new Set(["time","value","exemplar","traceid","id","uid","uuid","__name__","le","name"]),l=n();return s.map(i=>{let{schema:c,data:u}=i;if(c&&u){if(o.labels){for(const f of c.fields)if(f.labels){const d={};for(const[E,h]of Object.entries(f.labels))d[E]=l(h);f.labels=d}}if(o.names)for(const f of c.fields)f.name?.length&&!m.has(f.name.toLowerCase())&&(f.name=l(f.name));o.values&&c.fields.forEach((f,d)=>{if(f.type===t.PU.string&&u){const E=u.values[d].map(h=>l(String(h)));u.values[d]=E}})}return{schema:c,data:u}})}},72255:(Y,I,e)=>{"use strict";e.d(I,{m6:()=>g,sP:()=>C});var t=e(71733),n=e(17172),r=e(12131),s=e(32264),o=e(2619),m=e(33390),l=e(78160),i=e(17493),c=e(14792),u=e(79999),f=e(16833),d=e(31678),E=e(71176),h=e(85445),y=e(77431);const a=500,v="loadDashboardScene",g="__grafana_home_uid__";class b extends o.Q{constructor(){super(...arguments),this.cache={}}async fetchDashboard({uid:T,route:M,urlFolderUid:O,keepDashboardFromExploreInLocalStorage:S}){const p=m.A.getObject(u.us);if(p)return S||(0,u.yZ)(),p;const x=M===d.DashboardRoutes.Home?g:T,A=this.getFromCache(x);if(A)return A;let R;try{switch(M){case d.DashboardRoutes.New:R=(0,E.X)(O);break;case d.DashboardRoutes.Home:if(R=await(0,n.AI)().get("/api/dashboards/home"),R.redirectUri)return R;R?.meta&&(R.meta.canSave=!1,R.meta.canShare=!1,R.meta.canStar=!1);break;case d.DashboardRoutes.Public:return await i.np.loadDashboard("public","",T);default:R=await i.np.loadDashboard("db","",T),M===d.DashboardRoutes.Embedded&&(R.meta.isEmbedded=!0)}if(R.meta.url&&M===d.DashboardRoutes.Normal){const B=t.I.stripBaseFromUrl(R.meta.url),U=r.Ny.getLocation().pathname;B!==U&&(r.Ny.replace({...r.Ny.getLocation(),pathname:B}),console.log("not correct url correcting",B,U))}R.meta.folderUid&&await(0,y.Q)(R.meta.folderUid),this.dashboardCache={dashboard:R,ts:Date.now(),cacheKey:x}}catch(B){if((0,n.NF)(B)&&B.cancelled)return null;throw console.error(B),B}return R}async loadSnapshot(T){try{const M=await this.loadSnapshotScene(T);this.setState({dashboard:M,isLoading:!1})}catch(M){this.setState({isLoading:!1,loadError:String(M)})}}async loadSnapshotScene(T){const M=await i.np.loadDashboard("snapshot",T,"");if(M?.dashboard)return(0,h.wM)(M);throw new Error("Snapshot not found")}async loadDashboard(T){try{(0,l.j)(v);const M=await this.loadScene(T);if(!M)return;s.$.publicDashboardAccessToken&&M.state.controls?.state.hideTimeControls||M.startUrlSync(),this.setState({dashboard:M,isLoading:!1});const O=(0,l.z)(v);(0,f.D)(M,O?.duration)}catch(M){this.setState({isLoading:!1,loadError:String(M)})}}async loadScene(T){const M=!!(m.A.getObject(u.us)&&T.keepDashboardFromExploreInLocalStorage===!1);this.setState({isLoading:!0});const O=await this.fetchDashboard(T),S=this.cache[T.uid];if(!M&&S&&S.state.version===O?.dashboard.version)return S;if(O?.dashboard){const p=(0,h.wM)(O);return T.uid&&!M&&(this.cache[T.uid]=p),p}if(O?.redirectUri){const p=t.I.stripBaseFromUrl(O.redirectUri);return r.Ny.replace(p),null}throw new Error("Dashboard not found")}getFromCache(T){const M=this.dashboardCache;return M&&M.cacheKey===T&&Date.now()-M?.ts<a?M.dashboard:null}clearState(){(0,c.UA)().setCurrent(void 0),this.setState({dashboard:void 0,loadError:void 0,isLoading:!1,panelEditor:void 0})}setDashboardCache(T,M){this.dashboardCache={dashboard:M,ts:Date.now(),cacheKey:T}}clearDashboardCache(){this.dashboardCache=void 0}}let P=null;function C(){return P||(P=new b({})),P}},77431:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>o});var t=e(82467),n=e(27677),r=e(71101),s=e(99140);async function o(m){try{const l=await n.IB.getFolderByUid(m);s.M_.dispatch((0,t.Vz)((0,r.R4)(l)))}catch(l){console.warn("Error fetching parent folder",m,"for dashboard",l)}}},79280:(Y,I,e)=>{"use strict";e.d(I,{p:()=>i});var t=e(96540),n=e(13544),r=e(90613),s=e(67061),o=e(94753),m=e(55852),l=e(44836);function i(c){return t.createElement(r.a,{alignItems:"center",padding:4},t.createElement(s.B,{direction:"column",alignItems:"center",gap:2},t.createElement(o.E,{element:"h3",textAlignment:"center"},t.createElement(l.x6,{key:"transformations.empty.add-transformation-header"},"Start transforming data")),t.createElement(o.E,{element:"p",textAlignment:"center","data-testid":n.Tp.components.Transforms.noTransformationsMessage},t.createElement(l.x6,{key:"transformations.empty.add-transformation-body"},"Transformations allow data to be changed in various ways before your visualization is shown.",t.createElement("br",null),"This includes joining data together, renaming fields, making calculations, formatting data for display, and more.")),t.createElement(m.$n,{icon:"plus",variant:"primary",size:"md",onClick:c.onShowPicker,"data-testid":n.Tp.components.Transforms.addTransformationButton},"Add transformation")))}},19293:(Y,I,e)=>{"use strict";e.d(I,{i:()=>In,L:()=>kn});var t=e(12131),n=e(32264),r=e(27857),s=e(41507),o=e(60656),m=e(74730),l=e(32196),i=e(96540),c=e(40845),u=e(63021),f=e(40276),d=e(40980),E=e(66864),h=e(95689),y=e(42418),a=e(39558),v=e(40675),g=e(10096),b=e(14618),P=e(27747),C=e(75471),D=e(58476),T=e(16817),M=e(76885),O=e(34867),S=e(55852),p=e(25027),x=e(63066);const A=({panel:Vt,className:zt})=>{const kt=(0,D.zy)(),{loading:rn,value:yn}=(0,T.A)(()=>(0,x.J6)(Vt),[Vt]);if(rn)return i.createElement(S.$n,{disabled:!0},"New alert rule");if(!yn)return i.createElement(y.F,{severity:"info",title:"No alerting capable query found"},"Cannot create alerts from this panel because no query to an alerting capable datasource is found.");const gn=async()=>{(0,O.fH)(p.le.alertRuleFromPanel);const Rn=await(0,x.J6)(Vt),Kt=M.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(Rn),returnTo:kt.pathname+kt.search});t.Ny.push(Kt)};return i.createElement(S.$n,{icon:"bell",onClick:gn,className:zt,"data-testid":"create-alert-rule-button"},"New alert rule")};var R=(Vt=>(Vt.Queries="queries",Vt.Transformations="transformations",Vt.Alert="alert",Vt))(R||{});class B extends r.Bs{constructor(zt){super({}),this.tabId=R.Alert,this.TabComponent=kt=>K({...kt,model:this}),this._panelManager=zt}static{this.Component=U}getTabLabel(){return"Alert"}getDashboardUID(){return this.getDashboard().state.uid}getDashboard(){return(0,m.YQ)(this._panelManager)}getLegacyPanelId(){return(0,m.Cs)(this._panelManager.state.panel)}getCanCreateRules(){const zt=(0,C.Wd)("grafana");return this.getDashboard().state.meta.canSave&&g.TP.hasPermission(zt.create)}get panelManager(){return this._panelManager}get panel(){return this._panelManager.state.panel}}function U(Vt){const{model:zt}=Vt,kt=(0,c.of)(F),{errors:rn,loading:yn,rules:gn}=(0,P.S)({dashboardUID:zt.getDashboardUID(),panelId:zt.getLegacyPanelId()}),Rn=rn.length?i.createElement(y.F,{title:"Errors loading rules",severity:"error"},rn.map((pt,Qt)=>i.createElement("div",{key:Qt},"Failed to load Grafana rules state: ",pt.message||"Unknown error."))):null;if(yn&&!gn.length)return i.createElement(i.Fragment,null,Rn,i.createElement(a._,{text:"Loading rules..."}));const{panel:Kt}=zt,mt=zt.getCanCreateRules();return gn.length?i.createElement(i.Fragment,null,i.createElement(b.s,{rules:gn}),mt&&i.createElement(A,{className:kt.newButton,panel:Kt})):i.createElement("div",{className:kt.noRulesWrapper},i.createElement("p",null,"There are no alert rules linked to this panel."),mt&&i.createElement(A,{panel:Kt}))}const F=Vt=>({newButton:(0,l.css)({marginTop:Vt.spacing(3)}),noRulesWrapper:(0,l.css)({margin:Vt.spacing(2),backgroundColor:Vt.colors.background.secondary,padding:Vt.spacing(3)})});function K(Vt){const{model:zt}=Vt,{rules:kt}=(0,P.S)({dashboardUID:zt.getDashboardUID(),panelId:zt.getLegacyPanelId(),poll:!1});return i.createElement(v.o,{key:Vt.key,label:zt.getTabLabel(),icon:"bell",counter:kt.length,active:Vt.active,onChangeTab:Vt.onChangeTab})}var w=e(41987),L=e(13544),V=e(19347),N=e(21969),z=e(53478),J=e(64152),G=e(44932),H=e(37464),q=e(14348),le=e(7928);class me extends r.Bs{constructor(zt){super({}),this.tabId=R.Queries,this.icon="database",this.onOpenInspector=()=>{this._panelManager.inspectPanel()},this.onChangeDataSource=async(kt,rn)=>{this._panelManager.changePanelDataSource(kt,rn)},this.onQueryOptionsChange=kt=>{this._panelManager.changeQueryOptions(kt)},this.onQueriesChange=kt=>{this._panelManager.changeQueries(kt)},this.onRunQueries=()=>{this._panelManager.queryRunner.runQueries()},this.addQueryClick=()=>{const kt=this.getQueries();this.onQueriesChange((0,N.U7)(kt,this.newQuery()))},this.onAddQuery=kt=>{const rn=this.getQueries(),yn=this._panelManager.state.dsSettings;this.onQueriesChange((0,N.U7)(rn,kt,{type:yn?.type,uid:yn?.uid}))},this.onAddExpressionClick=()=>{const kt=this.getQueries();this.onQueriesChange((0,N.U7)(kt,z.Ex.newQuery()))},this.TabComponent=kt=>ee({...kt,model:this}),this._panelManager=zt}static{this.Component=k}getTabLabel(){return"Queries"}getItemsCount(){return this.getQueries().length}buildQueryOptions(){const zt=this._panelManager,kt=this._panelManager.state.panel,rn=this._panelManager.queryRunner,yn=r.jh.getTimeRange(kt);let gn={from:void 0,shift:void 0,hide:void 0};yn instanceof le.v&&(gn={from:yn.state.timeFrom,shift:yn.state.timeShift,hide:yn.state.hideTimeOverride});let Rn=rn.state.queries;return{cacheTimeout:zt.state.dsSettings?.meta.queryOptions?.cacheTimeout?rn.state.cacheTimeout:void 0,queryCachingTTL:zt.state.dsSettings?.cachingConfig?.enabled?rn.state.queryCachingTTL:void 0,dataSource:{default:zt.state.dsSettings?.isDefault,type:zt.state.dsSettings?.type,uid:zt.state.dsSettings?.uid},queries:Rn,maxDataPoints:rn.state.maxDataPoints,minInterval:rn.state.minInterval,timeRange:gn}}getQueries(){return this._panelManager.queryRunner.state.queries}newQuery(){const{dsSettings:zt,datasource:kt}=this._panelManager.state;let rn;return zt?.meta.mixed?kt?.meta.mixed?rn=(0,V.l)().getInstanceSettings(n.$.defaultDatasource):rn=kt:rn=zt,{...kt?.getDefaultQuery?.(w.Jk.PanelEditor),datasource:{uid:rn?.uid,type:rn?.type}}}isExpressionsSupported(zt){return(zt.meta.alerting||zt.meta.mixed)===!0}renderExtraActions(){return J.m.getAllExtraRenderAction().map((zt,kt)=>zt({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:kt})).filter(Boolean)}get queryRunner(){return this._panelManager.queryRunner}get panelManager(){return this._panelManager}}function k({model:Vt}){const{datasource:zt,dsSettings:kt}=Vt.panelManager.useState(),{data:rn,queries:yn}=Vt.panelManager.queryRunner.useState();if(!zt||!kt||!rn)return null;const gn=!(0,q.kN)(kt.name);return i.createElement(i.Fragment,null,i.createElement(H.K,{data:rn,dsSettings:kt,dataSource:zt,options:Vt.buildQueryOptions(),onDataSourceChange:Vt.onChangeDataSource,onOptionsChange:Vt.onQueryOptionsChange,onOpenQueryInspector:Vt.onOpenInspector}),i.createElement(G.L,{data:rn,queries:yn,dsSettings:kt,onAddQuery:Vt.onAddQuery,onQueriesChange:Vt.onQueriesChange,onRunQueries:Vt.onRunQueries}),i.createElement(E.Gy,{spacing:"md",align:"flex-start"},gn&&i.createElement(S.$n,{icon:"plus",onClick:Vt.addQueryClick,variant:"secondary","data-testid":L.Tp.components.QueryTab.addQuery},"Add query"),n.$.expressionsEnabled&&Vt.isExpressionsSupported(kt)&&i.createElement(S.$n,{icon:"plus",onClick:Vt.onAddExpressionClick,variant:"secondary","data-testid":L.Tp.components.QueryTab.addExpression},i.createElement("span",null,"Expression\xA0")),Vt.renderExtraActions()))}function ee(Vt){const{model:zt}=Vt,kt=zt.queryRunner.useState();return i.createElement(v.o,{key:Vt.key,label:zt.getTabLabel(),icon:"database",counter:kt.queries.length,active:Vt.active,onChangeTab:Vt.onChangeTab})}var X=e(55244),j=e(19727),ne=e(96374),te=e(57650),oe=e(79280),ie=e(97497),ue=e(29158),be=e(21427),ge=e(66879);function re(Vt){const{isOpen:zt,series:kt,onClose:rn,onTransformationAdd:yn}=Vt,[gn,Rn]=(0,i.useState)({search:"",showIllustrations:!0}),Kt=fn=>Rn({...gn,search:fn.currentTarget.value}),mt=fn=>Rn({...gn,showIllustrations:fn}),pt=fn=>Rn({...gn,selectedFilter:fn}),Qt=(0,i.useMemo)(()=>ie.h.list().sort((fn,zn)=>fn.name>zn.name?1:zn.name>fn.name?-1:0),[]),on=Qt.filter(fn=>gn.selectedFilter&&gn.selectedFilter!==ge.e&&!fn.categories?.has(gn.selectedFilter)?!1:fn.name.toLocaleLowerCase().includes(gn.search.toLocaleLowerCase())),pn=i.createElement(i.Fragment,null,on.length," / ",Qt.length," \xA0\xA0",i.createElement(ue.K,{name:"times",onClick:()=>{Rn({...gn,search:""})},tooltip:"Clear search"}));if(zt)return i.createElement(be.R,{data:kt,onTransformationAdd:yn,xforms:on,search:gn.search,noTransforms:!1,suffix:gn.search!==""?pn:i.createElement(i.Fragment,null),selectedFilter:gn.selectedFilter,onSearchChange:Kt,onSearchKeyDown:()=>{},showIllustrations:gn.showIllustrations,onShowIllustrationsChange:mt,onSelectedFilterChange:pt,onClose:rn})}class ye extends r.Bs{constructor(zt){super({}),this.tabId=R.Transformations,this.icon="process",this.TabComponent=kt=>ke({...kt,model:this}),this._panelManager=zt}static{this.Component=Be}getTabLabel(){return"Transformations"}getQueryRunner(){return this._panelManager.queryRunner}getDataTransformer(){return this._panelManager.dataTransformer}onChangeTransformations(zt){this._panelManager.changeTransformations(zt)}get panelManager(){return this._panelManager}}function Be({model:Vt}){const zt=(0,c.of)(Me),kt=Vt.getQueryRunner().useState(),{data:rn,transformations:yn}=Vt.getDataTransformer().useState(),gn=yn,[Rn,Kt]=(0,i.useState)(!1),[mt,pt]=(0,i.useState)(!1),Qt=()=>Kt(!0),on=()=>Kt(!1);if(!rn||!kt.data)return;const pn=i.createElement(re,{onClose:on,onTransformationAdd:fn=>{fn.value!==void 0&&(Vt.onChangeTransformations([...gn,{id:fn.value,options:{}}]),on())},isOpen:Rn,series:rn.series});return gn.length<1?i.createElement(i.Fragment,null,i.createElement(oe.p,{onShowPicker:Qt}),pn):i.createElement(i.Fragment,null,i.createElement(ve,{data:kt.data,transformations:gn,model:Vt}),i.createElement(j.e,null,i.createElement(S.$n,{icon:"plus",variant:"secondary",onClick:Qt,"data-testid":L.Tp.components.Transforms.addTransformationButton},"Add another transformation"),i.createElement(S.$n,{"data-testid":L.Tp.components.Transforms.removeAllTransformationsButton,className:zt.removeAll,icon:"times",variant:"secondary",onClick:()=>pt(!0)},"Delete all transformations")),i.createElement(ne.u,{isOpen:mt,title:"Delete all transformations?",body:"By deleting all transformations, you will go back to the main selection screen.",confirmText:"Delete all",onConfirm:()=>{Vt.onChangeTransformations([]),pt(!1)},onDismiss:()=>pt(!1)}),pn)}function ve({transformations:Vt,model:zt,data:kt}){const rn=Vt.map((gn,Rn)=>({id:`${Rn} - ${gn.id}`,transformation:gn})),yn=gn=>{if(!gn||!gn.destination)return;const Rn=gn.source.index,Kt=gn.destination.index;if(Rn===Kt)return;const mt=Array.from(rn),[pt]=mt.splice(Rn,1);mt.splice(Kt,0,pt),zt.onChangeTransformations(mt.map(Qt=>Qt.transformation))};return i.createElement(X.JY,{onDragEnd:yn},i.createElement(X.gL,{droppableId:"transformations-list",direction:"vertical"},gn=>i.createElement("div",{ref:gn.innerRef,...gn.droppableProps},i.createElement(te.A,{onChange:(Rn,Kt)=>{const mt=Vt.slice();mt[Rn]=Kt,zt.onChangeTransformations(mt)},onRemove:Rn=>{const Kt=Vt.slice();Kt.splice(Rn,1),zt.onChangeTransformations(Kt)},configs:rn,data:kt}),gn.placeholder)))}const Me=Vt=>({removeAll:(0,l.css)({marginLeft:Vt.spacing(2)})});function ke(Vt){const{model:zt}=Vt,kt=zt.getDataTransformer().useState();return i.createElement(v.o,{key:Vt.key,label:zt.getTabLabel(),icon:"process",counter:kt.transformations.length,active:Vt.active,onChangeTab:Vt.onChangeTab})}class Se extends r.Bs{constructor(zt){super({tab:R.Queries,tabs:[]}),this._urlSync=new r.So(this,{keys:["tab"]}),this._initialTabsBuilt=!1,this.onChangeTab=kt=>{this.setState({tab:kt.tabId})},this.panelManager=zt,this.addActivationHandler(()=>this.onActivate())}static{this.Component=We}getUrlState(){return{tab:this.state.tab}}updateFromUrl(zt){zt.tab&&typeof zt.tab=="string"&&this.setState({tab:zt.tab})}onActivate(){const zt=this.panelManager.state.panel;return this.setupPanelSubscription(zt),this.buildTabs(),this._subs.add(this.panelManager.subscribeToState((kt,rn)=>{kt.panel!==rn.panel&&(this.buildTabs(),this.setupPanelSubscription(kt.panel))})),()=>{this.panelSubscription&&(this.panelSubscription.unsubscribe(),this.panelSubscription=void 0)}}setupPanelSubscription(zt){this.panelSubscription&&(this._initialTabsBuilt=!1,this.panelSubscription.unsubscribe()),this.panelSubscription=zt.subscribeToState(()=>{zt.getPlugin()&&!this._initialTabsBuilt&&(this.buildTabs(),this._initialTabsBuilt=!0)})}buildTabs(){const kt=this.panelManager.state.panel,rn=this.panelManager.queryRunner,yn=[];if(kt){const gn=kt.getPlugin();if(!gn)return;if(gn.meta.skipDataQuery){this.setState({tabs:yn});return}else rn&&yn.push(new me(this.panelManager)),yn.push(new ye(this.panelManager)),(0,h.e)(gn)&&yn.push(new B(this.panelManager))}this.setState({tabs:yn})}}function We({model:Vt}){const{tab:zt,tabs:kt}=Vt.useState(),rn=(0,c.of)(De);if(!kt)return;const yn=kt.find(gn=>gn.tabId===zt);return i.createElement("div",{className:rn.dataPane},i.createElement(u.U,{hideBorder:!0,className:rn.tabsBar},kt.map((gn,Rn)=>i.createElement(gn.TabComponent,{key:`${gn.getTabLabel()}-${Rn}`,active:gn.tabId===zt,onChangeTab:()=>Vt.onChangeTab(gn)}))),i.createElement(f.E,{className:rn.scroll},i.createElement(d.J,{className:rn.tabContent},i.createElement(E.mc,null,yn&&i.createElement(yn.Component,{model:yn})))))}function De(Vt){return{dataPane:(0,l.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0,height:"100%",width:"100%"}),tabContent:(0,l.css)({padding:Vt.spacing(2),border:`1px solid ${Vt.colors.border.weak}`,borderLeft:"none",borderBottom:"none",borderTopRightRadius:Vt.shape.radius.default,flexGrow:1}),tabsBar:(0,l.css)({flexShrink:0,paddingLeft:Vt.spacing(2)}),scroll:(0,l.css)({background:Vt.colors.background.primary})}}var pe=e(27746),Ne=e(78235),Le=e(54174),He=e(40996),je=e(37390),at=e(10354),Ye=e(14578),$e=e(57767),xe=e(43535);const Fe=({libraryPanel:Vt,isUnsavedPrompt:zt,onDismiss:kt,onConfirm:rn,onDiscard:yn})=>{const[gn,Rn]=(0,i.useState)(""),Kt=(0,T.A)(async()=>{const fn=await(0,$e.xV)(Vt.state.uid);return fn.length>0?fn.map(zn=>zn.title):[]},[Vt.state.uid]),[mt,pt]=(0,i.useState)([]);(0,He.A)(()=>Kt.value?pt(Kt.value.filter(fn=>fn.toLowerCase().includes(gn.toLowerCase()))):pt([]),300,[Kt.value,gn]);const Qt=(0,c.of)(xe.o),on=(0,i.useCallback)(()=>{yn()},[yn]),pn=zt?"Unsaved library panel changes":"Save library panel";return i.createElement(je.a,{title:pn,icon:"save",onDismiss:kt,isOpen:!0},i.createElement("div",null,i.createElement("p",{className:Qt.textInfo},"This update will affect ",i.createElement("strong",null,Vt.state._loadedPanel?.meta?.connectedDashboards," ",Vt.state._loadedPanel?.meta?.connectedDashboards===1?"dashboard":"dashboards","."),"The following dashboards using the panel will be affected:"),i.createElement(at.p,{className:Qt.dashboardSearch,prefix:i.createElement(Ye.I,{name:"search"}),placeholder:"Search affected dashboards",value:gn,onChange:fn=>Rn(fn.currentTarget.value)}),Kt.loading?i.createElement("p",null,"Loading connected dashboards..."):i.createElement("table",{className:Qt.myTable},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Dashboard name"))),i.createElement("tbody",null,mt.map((fn,zn)=>i.createElement("tr",{key:`dashrow-${zn}`},i.createElement("td",null,fn))))),i.createElement(je.a.ButtonRow,null,i.createElement(S.$n,{variant:"secondary",onClick:kt,fill:"outline"},"Cancel"),zt&&i.createElement(S.$n,{variant:"destructive",onClick:on},"Discard"),i.createElement(S.$n,{onClick:()=>{rn()}},"Update all"))))};var Ee=e(21633);function se(Vt){const{paneOptions:zt}=Vt,[kt,rn]=i.useState({collapsed:!1}),yn=(0,i.useCallback)((on,pn)=>{if(on<=0&&pn<=0)return;const fn=pn/on*(1-on);kt.collapsed&&fn>zt.collapseBelowPixels&&rn({collapsed:!1}),!kt.collapsed&&fn<zt.collapseBelowPixels&&rn({collapsed:!0})},[kt,zt.collapseBelowPixels]),gn=(0,i.useCallback)((on,pn)=>{if(on<=0&&pn<=0)return;const fn=1-on,zn=kt.snapSize===0,aa=pn/on,jn=(zt.snapOpenToPixels??aa/2)/aa;kt.collapsed?rn(zn?{snapSize:Math.max(fn,jn),collapsed:!1}:{snapSize:0,collapsed:!0}):zn&&rn({snapSize:fn,collapsed:!1})},[kt,zt.snapOpenToPixels]),Rn=(0,i.useCallback)(()=>{rn({collapsed:!kt.collapsed})},[kt.collapsed]),{containerProps:Kt,primaryProps:mt,secondaryProps:pt,splitterProps:Qt}=(0,Ee.h)({...Vt,onResizing:yn,onSizeChanged:gn});return pt.style.overflow="hidden",pt.style.minWidth="unset",pt.style.minHeight="unset",kt.snapSize?(mt.style={...mt.style,flexGrow:1-kt.snapSize},pt.style.flexGrow=kt.snapSize):kt.snapSize===0&&(mt.style.flexGrow=1,pt.style.flexGrow=0,pt.style.minWidth="unset",pt.style.minHeight="unset",pt.style.overflow="unset"),{containerProps:Kt,primaryProps:mt,secondaryProps:pt,splitterProps:Qt,splitterState:kt,onToggleCollapse:Rn}}function ae({model:Vt}){const zt=(0,m.YQ)(Vt),{optionsPane:kt}=Vt.useState(),rn=(0,c.of)(Ce),{containerProps:yn,primaryProps:gn,secondaryProps:Rn,splitterProps:Kt,splitterState:mt,onToggleCollapse:pt}=se({direction:"row",dragPosition:"end",initialSize:.75,paneOptions:{collapseBelowPixels:250,snapOpenToPixels:400}});return i.createElement(i.Fragment,null,i.createElement(Ne.c,{dashboard:zt}),i.createElement("div",{...yn},i.createElement("div",{...gn,className:(0,l.cx)(gn.className,rn.body)},i.createElement(fe,{model:Vt})),i.createElement("div",{...Kt}),i.createElement("div",{...Rn,className:(0,l.cx)(Rn.className,rn.optionsPane)},mt.collapsed&&i.createElement("div",{className:rn.expandOptionsWrapper},i.createElement(pe.I,{tooltip:"Open options pane",icon:"arrow-to-right",onClick:pt,variant:"canvas",className:rn.rotate180,"aria-label":"Open options pane"})),!mt.collapsed&&i.createElement(kt.Component,{model:kt}))))}function fe({model:Vt}){const zt=(0,m.YQ)(Vt),{vizManager:kt,dataPane:rn,showLibraryPanelSaveModal:yn,showLibraryPanelUnlinkModal:gn}=Vt.useState(),{sourcePanel:Rn}=kt.useState(),Kt=(0,m.Yr)(Rn.resolve()),{controls:mt,scopes:pt}=zt.useState(),Qt=(0,c.of)(Ce),{containerProps:on,primaryProps:pn,secondaryProps:fn,splitterProps:zn,splitterState:aa,onToggleCollapse:Zn}=se({direction:"column",dragPosition:"start",initialSize:.5,paneOptions:{collapseBelowPixels:150}});return on.className=(0,l.cx)(on.className,Qt.container),rn||(pn.style.flexGrow=1),i.createElement("div",{className:(0,l.cx)(Qt.pageContainer,mt&&!pt&&Qt.pageContainerWithControls,pt&&Qt.pageContainerWithScopes)},pt&&i.createElement(pt.Component,{model:pt}),mt&&i.createElement("div",{className:(0,l.cx)(Qt.controlsWrapper,pt&&Qt.controlsWrapperWithScopes)},i.createElement(mt.Component,{model:mt})),i.createElement("div",{...on},i.createElement("div",{...pn},i.createElement(kt.Component,{model:kt})),yn&&Kt&&i.createElement(Fe,{libraryPanel:Kt,onDismiss:Vt.onDismissLibraryPanelSaveModal,onConfirm:Vt.onConfirmSaveLibraryPanel,onDiscard:Vt.onDiscard}),gn&&Kt&&i.createElement(Le.l,{onDismiss:Vt.onDismissUnlinkLibraryPanelModal,onConfirm:Vt.onConfirmUnlinkLibraryPanel,isOpen:!0}),rn&&i.createElement(i.Fragment,null,i.createElement("div",{...zn}),i.createElement("div",{...fn},aa.collapsed&&i.createElement("div",{className:Qt.expandDataPane},i.createElement(S.$n,{tooltip:"Open query pane",icon:"arrow-to-right",onClick:Zn,variant:"secondary",size:"sm",className:Qt.openDataPaneButton,"aria-label":"Open query pane"})),!aa.collapsed&&i.createElement(rn.Component,{model:rn})))))}function Ce(Vt){return{pageContainer:(0,l.css)({display:"grid",gridTemplateAreas:`
        "panels"`,gridTemplateColumns:"1fr",gridTemplateRows:"1fr",height:"100%"}),pageContainerWithControls:(0,l.css)({gridTemplateAreas:`
        "controls"
        "panels"`,gridTemplateRows:"auto 1fr"}),pageContainerWithScopes:(0,l.css)({gridTemplateAreas:`
        "scopes controls"
        "panels panels"`,gridTemplateColumns:`${Vt.spacing(32)} 1fr`,gridTemplateRows:"auto 1fr"}),container:(0,l.css)({gridArea:"panels",height:"100%"}),canvasContent:(0,l.css)({label:"canvas-content",display:"flex",flexDirection:"column",flexBasis:"100%",flexGrow:1,minHeight:0,width:"100%"}),body:(0,l.css)({label:"body",flexGrow:1,display:"flex",flexDirection:"column",minHeight:0}),optionsPane:(0,l.css)({flexDirection:"column",borderLeft:`1px solid ${Vt.colors.border.weak}`,background:Vt.colors.background.primary}),expandOptionsWrapper:(0,l.css)({display:"flex",flexDirection:"column",padding:Vt.spacing(2,1)}),expandDataPane:(0,l.css)({display:"flex",flexDirection:"row",padding:Vt.spacing(1),borderTop:`1px solid ${Vt.colors.border.weak}`,borderRight:`1px solid ${Vt.colors.border.weak}`,background:Vt.colors.background.primary,flexGrow:1,justifyContent:"space-around"}),rotate180:(0,l.css)({rotate:"180deg"}),controlsWrapper:(0,l.css)({display:"flex",flexDirection:"column",flexGrow:0,gridArea:"controls",padding:Vt.spacing(2,0,2,2)}),controlsWrapperWithScopes:(0,l.css)({padding:Vt.spacing(2,0)}),openDataPaneButton:(0,l.css)({width:Vt.spacing(8),justifyContent:"center",svg:{rotate:"-90deg"}})}}var Re=e(67647),Oe=e(67061),ze=e(26443),Xe=e(17706),Ze=e(22290),et=e(66211),nt=e(15292),lt=e(94354),rt=e(88323),ut=e(64919),Et=e(21744),Ct=e(20214),Ut=e(74410),Gt=e(48192),Wt=e(74097),ot=e(92378),Tt=e(6923),Pn=e(20455),ft=e(32023);function Mt(Vt,zt,kt){const rn=new Gt.C({title:"Panel options",id:"Panel options",isOpenDefault:!0}),yn=ft.b4.getPanelLinks(zt),gn=yn?.state.rawLinks??[],Rn=(0,m.YQ)(zt);return rn.addItem(new Wt.v({title:"Title",value:zt.state.title,popularRank:1,render:function(){return i.createElement(nn,{vizManager:Vt})},addon:n.$.featureToggles.dashgpt&&i.createElement(Ut.h,{onGenerate:Kt=>Vt.setPanelTitle(Kt),panel:(0,Pn.Z6)(zt),dashboard:(0,Pn.Uy)(Rn)})})).addItem(new Wt.v({title:"Description",value:zt.state.description,render:function(){return i.createElement(dn,{panel:zt})},addon:n.$.featureToggles.dashgpt&&i.createElement(Ct.t,{onGenerate:Kt=>zt.setState({description:Kt}),panel:(0,Pn.Z6)(zt)})})).addItem(new Wt.v({title:"Transparent background",render:function(){return i.createElement(nt.d,{value:zt.state.displayMode==="transparent",id:"transparent-background",onChange:()=>{zt.setState({displayMode:zt.state.displayMode==="transparent"?"default":"transparent"})}})}})).addCategory(new Gt.C({title:"Panel links",id:"Panel links",isOpenDefault:!1,itemsCount:gn?.length}).addItem(new Wt.v({title:"Panel links",render:()=>i.createElement(_t,{panelLinks:yn??void 0})}))).addCategory(new Gt.C({title:"Repeat options",id:"Repeat options",isOpenDefault:!1}).addItem(new Wt.v({title:"Repeat by variable",description:"Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard.",render:function(){return i.createElement(ot.U,{id:"repeat-by-variable-select",parent:zt,repeat:kt,onChange:mt=>{const pt={repeat:mt};mt&&!Vt.state.repeatDirection&&(pt.repeatDirection="h"),Vt.setState(pt)}})}})).addItem(new Wt.v({title:"Repeat direction",showIf:()=>!!Vt.state.repeat,render:function(){const mt=[{label:"Horizontal",value:"h"},{label:"Vertical",value:"v"}];return i.createElement(lt.z,{options:mt,value:Vt.state.repeatDirection??"h",onChange:pt=>Vt.setState({repeatDirection:pt})})}})).addItem(new Wt.v({title:"Max per row",showIf:()=>!!(Vt.state.repeat&&Vt.state.repeatDirection==="h"),render:function(){const mt=[2,3,4,6,8,12].map(pt=>({label:pt.toString(),value:pt}));return i.createElement(rt.l6,{options:mt,value:Vt.state.maxPerRow,onChange:pt=>Vt.setState({maxPerRow:pt.value})})}})))}function _t({panelLinks:Vt}){const{rawLinks:zt}=Vt?Vt.useState():{rawLinks:[]};return i.createElement(ut.e,{links:zt,onChange:kt=>Vt?.setState({rawLinks:kt}),getSuggestions:Tt.Fq,data:[]})}function nn({vizManager:Vt}){const{title:zt}=Vt.state.panel.useState();return i.createElement(at.p,{"data-testid":"panel-edit-panel-title-input",value:zt,onChange:kt=>Vt.setPanelTitle(kt.currentTarget.value)})}function dn({panel:Vt}){const{description:zt}=Vt.useState();return i.createElement(Et.f,{id:"description-text-area",value:zt,onChange:kt=>Vt.setState({description:kt.currentTarget.value})})}const en=i.memo(({vizManager:Vt,searchQuery:zt,listMode:kt,data:rn})=>{const{panel:yn,sourcePanel:gn,repeat:Rn}=Vt.useState(),Kt=gn.resolve().parent,{options:mt,fieldConfig:pt,_pluginInstanceState:Qt}=yn.useState(),on=(0,i.useMemo)(()=>Mt(Vt,yn,Rn),[Vt,yn,Rn]),pn=(0,i.useMemo)(()=>{const jn=yn.getPlugin();if(jn)return(0,et.Z4)({panel:yn,data:rn,plugin:jn,eventBus:yn.getPanelContext().eventBus,instanceState:Qt})},[yn,mt,pt,Qt]),fn=(0,i.useMemo)(()=>{if(Kt instanceof o.F)return(0,et.tN)(Kt)},[Kt]),zn=(0,i.useMemo)(()=>(0,Ze.v)(pt,yn.getPlugin()?.fieldConfigRegistry,rn?.series??[],zt,jn=>{yn.onFieldConfigChange(jn,!0)}),[zt,yn,pt]),aa=zt.length>0,Zn=[];if(aa)Zn.push((0,ze.Po)([on,...fn?[fn]:[],...pn??[]],zn,zt));else switch(kt){case ze.gs.All:fn&&Zn.push(fn.render()),Zn.push(on.render());for(const jn of pn??[])Zn.push(jn.render());for(const jn of zn)Zn.push(jn.render());break;case ze.gs.Overrides:for(const jn of zn)Zn.push(jn.render());default:break}return Zn});en.displayName="PanelOptions";var Xt=e(78685),En=e(88575),Vn=e(15054),Wn=e(32696),na=e(56707),Bt=e(86292),ln=e(53543);function mn({vizManager:Vt,data:zt,onChange:kt}){const{panel:rn}=Vt.useState(),yn=(0,c.of)(Dn),[gn,Rn]=(0,i.useState)(""),Kt=!1,mt=Kt?Vn.MM:Vn.wV,pt=Kt?Wn.__.Widgets:Wn.__.Visualizations,Qt=(0,i.useMemo)(()=>new ln.R(rn),[rn]),on=(0,i.useMemo)(()=>new Set([Wn.__.Widgets,Wn.__.Visualizations,Wn.__.Suggestions]),[]),[pn,fn]=(0,Xt.A)(mt,pt);(0,i.useEffect)(()=>{pn&&!on.has(pn)&&fn(pt)},[pt,pn,fn,on]);const zn=[{label:"Visualizations",value:Wn.__.Visualizations},{label:"Suggestions",value:Wn.__.Suggestions}],aa=Zn=>{Vt.changePluginType(Zn.pluginId),kt()};return i.createElement("div",{className:yn.wrapper},i.createElement(Re.Z,{className:yn.filter,value:gn,onChange:Rn,autoFocus:!0,placeholder:"Search for..."}),i.createElement(En.D,{className:yn.customFieldMargin},i.createElement(lt.z,{options:zn,value:pn,onChange:fn,fullWidth:!0})),i.createElement(f.E,null,pn===Wn.__.Visualizations&&i.createElement(Bt.G,{pluginId:rn.state.pluginId,searchQuery:gn,onChange:aa}),pn===Wn.__.Suggestions&&i.createElement(na.a,{onChange:aa,searchQuery:gn,panel:Qt,data:zt})))}const Dn=Vt=>({wrapper:(0,l.css)({display:"flex",flexDirection:"column",flexGrow:1,padding:Vt.spacing(2,1),height:"100%",gap:Vt.spacing(2),border:`1px solid ${Vt.colors.border.weak}`,borderRight:"none",borderBottom:"none",borderTopLeftRadius:Vt.shape.radius.default}),customFieldMargin:(0,l.css)({marginBottom:Vt.spacing(1)}),filter:(0,l.css)({minHeight:Vt.spacing(4)})});class hn extends r.Bs{constructor(zt){super({searchQuery:"",listMode:ze.gs.All,...zt}),this.onToggleVizPicker=()=>{this.setState({isVizPickerOpen:!this.state.isVizPickerOpen})},this.onSetSearchQuery=kt=>{this.setState({searchQuery:kt})},this.onSetListMode=kt=>{this.setState({listMode:kt})}}static{this.Component=({model:zt})=>{const{isVizPickerOpen:kt,searchQuery:rn,listMode:yn}=zt.useState(),gn=r.jh.getAncestor(zt,In).state.vizManager,{pluginId:Rn}=gn.state.panel.useState(),{data:Kt}=r.jh.getData(gn.state.panel).useState(),mt=(0,c.of)(Fn);return i.createElement(i.Fragment,null,!kt&&i.createElement(i.Fragment,null,i.createElement("div",{className:mt.top},i.createElement(wn,{pluginId:Rn,onOpen:zt.onToggleVizPicker}),i.createElement(Re.Z,{className:mt.searchOptions,value:rn,placeholder:"Search options",onChange:zt.onSetSearchQuery})),i.createElement("div",{className:mt.listOfOptions},i.createElement(en,{vizManager:gn,searchQuery:rn,listMode:yn,data:Kt}))),kt&&i.createElement(mn,{vizManager:gn,onChange:zt.onToggleVizPicker,data:Kt}))}}}function Fn(Vt){return{top:(0,l.css)({display:"flex",flexDirection:"column",padding:Vt.spacing(2,1),gap:Vt.spacing(2)}),listOfOptions:(0,l.css)({display:"flex",flexDirection:"column",flexGrow:"1",overflow:"auto"}),searchOptions:(0,l.css)({minHeight:Vt.spacing(4)}),searchWrapper:(0,l.css)({padding:Vt.spacing(2,2,2,0)}),vizField:(0,l.css)({marginBottom:Vt.spacing(1)}),rotateIcon:(0,l.css)({rotate:"180deg"})}}function wn({pluginId:Vt,onOpen:zt}){const kt=(0,c.of)(Hn),rn=(0,i.useMemo)(()=>(0,Xe.A4)().filter(yn=>yn.id===Vt)[0],[Vt]);return i.createElement(Oe.B,{gap:1},i.createElement(pe.I,{className:kt.vizButton,tooltip:"Click to change visualization",imgSrc:rn.info.logos.small,onClick:zt,"data-testid":L.Tp.components.PanelEditor.toggleVizPicker,"aria-label":"Change Visualization",variant:"canvas",isOpen:!1,fullWidth:!0},rn.name))}function Hn(Vt){return{vizButton:(0,l.css)({textAlign:"left"})}}var An=e(89681);class In extends r.Bs{constructor(zt){super(zt),this._initialRepeatOptions={},this._discardChanges=!1,this.onDiscard=()=>{this._discardChanges=!0,t.Ny.partial({editPanel:null})},this.onSaveLibraryPanel=()=>{this.setState({showLibraryPanelSaveModal:!0})},this.onConfirmSaveLibraryPanel=()=>{this.state.vizManager.commitChanges(),t.Ny.partial({editPanel:null})},this.onDismissLibraryPanelSaveModal=()=>{this.setState({showLibraryPanelSaveModal:!1})},this.onUnlinkLibraryPanel=()=>{this.setState({showLibraryPanelUnlinkModal:!0})},this.onDismissUnlinkLibraryPanelModal=()=>{this.setState({showLibraryPanelUnlinkModal:!1})},this.onConfirmUnlinkLibraryPanel=()=>{this.state.vizManager.unlinkLibraryPanel(),this.setState({showLibraryPanelUnlinkModal:!1})};const{repeat:kt,repeatDirection:rn,maxPerRow:yn}=zt.vizManager.state;this._initialRepeatOptions={repeat:kt,repeatDirection:rn,maxPerRow:yn},this.addActivationHandler(this._activationHandler.bind(this))}static{this.Component=ae}_activationHandler(){const zt=this.state.vizManager,kt=zt.state.panel;return this._subs.add(zt.subscribeToState((rn,yn)=>{rn.panel.state.pluginId!==yn.panel.state.pluginId&&this._initDataPane(rn.panel.state.pluginId)})),this._initDataPane(kt.state.pluginId),()=>{this._discardChanges?this.state.isNewPanel&&(0,m.YQ)(this).removePanel(zt.state.sourcePanel.resolve()):this.commitChanges()}}_initDataPane(zt){const kt=n.$.panels[zt].skipDataQuery;kt&&this.state.dataPane&&(t.Ny.partial({tab:null},!0),this.setState({dataPane:void 0})),!kt&&!this.state.dataPane&&this.setState({dataPane:new Se(this.state.vizManager)})}getUrlKey(){return this.state.panelId.toString()}getPageNav(zt,kt){return{text:"Edit panel",parentItem:(0,m.YQ)(this).getPageNav(zt,kt)}}commitChanges(){const zt=(0,m.YQ)(this);zt.state.isEditing||zt.onEnterEditMode();const yn=this.state.vizManager.state.sourcePanel.resolve().parent,gn=yn instanceof o.F,Rn=gn?yn.parent:yn;if(!gn){if(!(Rn instanceof s.U)){console.error("Unsupported scene object type");return}this.commitChangesToSource(Rn)}}commitChangesToSource(zt){let kt=zt.state.width??1,rn=zt.state.height;const yn=this.state.vizManager,gn=this._initialRepeatOptions.repeatDirection==="h"&&yn.state.repeatDirection==="v",Rn=this._initialRepeatOptions.repeatDirection==="v"&&yn.state.repeatDirection==="h";gn?kt=Math.floor(kt/(zt.state.maxPerRow??1)):Rn&&(kt=24),zt.setState({body:yn.state.panel.clone(),repeatDirection:yn.state.repeatDirection,variableName:yn.state.repeat,maxPerRow:yn.state.maxPerRow,width:kt,height:rn})}}function kn(Vt,zt=!1){return new In({panelId:(0,m.Cs)(Vt),optionsPane:new hn({}),vizManager:An.j.createFor(Vt),isNewPanel:zt})}},89681:(Y,I,e)=>{"use strict";e.d(I,{j:()=>M});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(581),m=e(19347),l=e(32264),i=e(12131),c=e(27857),u=e(40845),f=e(84423),d=e(36974),E=e(47311),h=e(57767),y=e(93117),a=e(13530),v=e(45429),g=e(41507),b=e(60656),P=e(7928),C=e(20455),D=e(74730),T=(S=>(S[S.Fill=0]="Fill",S[S.Fit=1]="Fit",S[S.Exact=2]="Exact",S))(T||{});class M extends c.Bs{constructor(p){super(p),this._cachedPluginOptions={},this._detectPanelModelChanges=(0,n.debounce)(()=>{const{hasChanges:x}=(0,v.yO)((0,C.Z6)(this.state.sourcePanel.resolve()),(0,C.Z6)(this.state.panel));this.setState({isDirty:x})},250),this._handleStateChange=x=>{a.l.isUpdatingPersistedState(x)&&this._detectPanelModelChanges()},this.addActivationHandler(()=>this._onActivate())}static createFor(p){let x={};const A=p.parent instanceof b.F?p.parent.parent:p.parent;if(!(A instanceof g.U))throw console.error("VizPanel is not a child of a dashboard grid item"),new Error("VizPanel is not a child of a dashboard grid item");const{variableName:R,repeatDirection:B,maxPerRow:U}=A.state;x={repeat:R,repeatDirection:B,maxPerRow:U};let F;return A.parent?.state.$variables&&(F=A.parent.state.$variables.clone()),new M({$variables:F,panel:p.clone(),sourcePanel:p.getRef(),...x})}_onActivate(){this.loadDataSource();const p=this.subscribeToEvent(c.bZ,this._handleStateChange);return()=>{p.unsubscribe()}}async loadDataSource(){if(!this.state.panel.state.$data)return;let x=this.queryRunner.state.datasource;try{let A,R;if(x)A=await(0,m.l)().get(x),R=(0,m.l)().getInstanceSettings(x);else{const U=(0,D.YQ)(this).state.uid??"",F=(0,d.CW)(U);F?.datasourceUid!==null&&(R=(0,m.l)().getInstanceSettings({uid:F?.datasourceUid}),R&&(A=await(0,m.l)().get({uid:F?.datasourceUid,type:R.type}),this.queryRunner.setState({datasource:{uid:F?.datasourceUid,type:R.type}})))}A&&R&&(this.setState({datasource:A,dsSettings:R}),(0,E.tw)({type:R.type,uid:R.uid}))}catch(A){const R=await(0,m.l)().get(l.$.defaultDatasource),B=(0,m.l)().getInstanceSettings(l.$.defaultDatasource);R&&B&&(this.setState({datasource:R,dsSettings:B}),this.queryRunner.setState({datasource:{uid:B.uid,type:B.type}})),console.error(A)}}changePluginType(p){const{options:x,fieldConfig:A,pluginId:R,...B}=c.Go.cloneSceneObjectState(this.state.panel.state);let U={defaults:{...A.defaults,custom:{}},overrides:(0,o.aW)(A.overrides,o.nx)};this._cachedPluginOptions[R]={options:x,fieldConfig:A};const F=this._cachedPluginOptions[p]?.options,K=this._cachedPluginOptions[p]?.fieldConfig;K&&(U=(0,o.H9)(U,K));const w=new c.Eb({options:F??{},fieldConfig:U,pluginId:p,...B});if(!this.state.panel.state.$data&&!l.$.panels[p].skipDataQuery){let z=(0,d.CW)((0,D.YQ)(this).state.uid)?.datasourceUid;z||(z=l.$.defaultDatasource),w.setState({$data:new c.Es({$data:new c.dt({datasource:{uid:z},queries:[{refId:"A"}]}),transformations:[]})})}const L=w.getPlugin(),V={title:w.state.title,options:w.state.options,fieldConfig:w.state.fieldConfig,id:1,type:p},N=L?.onPanelTypeChanged?.(V,R,x,A);N&&w.onOptionsChange(N,!0),L?.onPanelMigration&&w.setState({pluginVersion:(0,f.Ar)(L)}),this.setState({panel:w}),this.loadDataSource()}async changePanelDataSource(p,x){const{dsSettings:A}=this.state,R=this.queryRunner,B=A?await(0,m.l)().get({uid:A.uid}):void 0,U=await(0,m.l)().get({uid:p.uid}),F=R.state.queries,K=x||await(0,y.y)(U,p.uid,F,B);R.setState({datasource:{type:p.type,uid:p.uid},queries:K}),x&&R.runQueries(),this.loadDataSource()}changeQueryOptions(p){const x=this.state.panel,A=this.queryRunner,R=x.state.$timeRange,B={},U={};p.maxDataPoints!==A.state.maxDataPoints&&(B.maxDataPoints=p.maxDataPoints??void 0),p.minInterval!==A.state.minInterval&&p.minInterval!==null&&(B.minInterval=p.minInterval),p.timeRange&&(U.timeFrom=p.timeRange.from??void 0,U.timeShift=p.timeRange.shift??void 0,U.hideTimeOverride=p.timeRange.hide),R instanceof P.v?U.timeFrom!==void 0||U.timeShift!==void 0?R.setState(U):x.setState({$timeRange:void 0}):x.setState({$timeRange:new P.v(U)}),p.cacheTimeout!==A?.state.cacheTimeout&&(B.cacheTimeout=p.cacheTimeout),p.queryCachingTTL!==A?.state.queryCachingTTL&&(B.queryCachingTTL=p.queryCachingTTL),A.setState(B),A.runQueries()}changeQueries(p){this.queryRunner.setState({queries:p})}changeTransformations(p){const x=this.dataTransformer;x.setState({transformations:p}),x.reprocessTransformations()}inspectPanel(){const p=this.state.panel,x=(0,D.Cs)(p);i.Ny.partial({inspect:x,inspectTab:"query"})}get queryRunner(){const p=(0,D.un)(this.state.panel);if(!p)throw new Error("Query runner not found");return p}get dataTransformer(){const p=this.state.panel.state.$data;if(!p||!(p instanceof c.Es))throw new Error("Could not find SceneDataTransformer for panel");return p}toggleTableView(){if(this.state.tableView){this.setState({tableView:void 0});return}this.setState({tableView:c.d0.table().setTitle("").setOption("showTypeIcons",!0).setOption("showHeader",!0).setData(this.dataTransformer).build()})}unlinkLibraryPanel(){const p=this.state.sourcePanel.resolve();if(!(p.parent instanceof b.F))throw new Error("VizPanel is not a child of a library panel");const x=p.parent.parent;if(!(x instanceof g.U))throw new Error("Library panel not a child of a grid item");const A=this.state.panel.clone({$data:this.state.$data?.clone()});x.setState({body:A}),this.setState({sourcePanel:A.getRef()})}commitChanges(){const p=this.state.sourcePanel.resolve();this.commitChangesTo(p)}commitChangesTo(p){const x={variableName:this.state.repeat,repeatDirection:this.state.repeatDirection,maxPerRow:this.state.maxPerRow};if(p.parent instanceof g.U&&p.parent.setState({...x,body:this.state.panel.clone()}),p.parent instanceof b.F&&p.parent.parent instanceof g.U){const A=p.parent.clone({panel:this.state.panel.clone()});p.parent.parent.setState({body:A,...x}),(0,h.GX)(A).then(R=>{p.parent instanceof b.F&&A.setPanelFromLibPanel(R)})}}getPanelSaveModel(){const p=this.state.sourcePanel.resolve(),A=p.parent instanceof b.F?p.parent.parent:p.parent;if(!(A instanceof g.U))return{error:"Unsupported panel parent"};const R=A.clone({body:this.state.panel.clone()});return(0,C.ZB)(R)}setPanelTitle(p){this.state.panel.setState({title:p,hoverHeader:p===""})}static{this.Component=({model:p})=>{const{panel:x,tableView:A}=p.useState(),R=(0,u.of)(O),B=A??x,U=B.state.$data;return(0,s.useEffect)(()=>U?.activate(),[U]),s.createElement(s.Fragment,null,s.createElement("div",{className:R.wrapper},s.createElement(B.Component,{model:B})))}}}function O(S){return{wrapper:(0,t.css)({height:"100%",width:"100%",paddingLeft:S.spacing(2)})}}},13530:(Y,I,e)=>{"use strict";e.d(I,{l:()=>h});var t=e(27857),n=e(67278);const r=()=>new n.c(new URL(e.p+e.u(9666),e.b));var s=e(89681),o=e(38477),m=e(33278),l=e(41507),i=e(63117),c=e(60656),u=e(42397),f=e(7928),d=e(20455),E=e(17663);class h{constructor(a){this._dashboard=a}static isUpdatingPersistedState({payload:a}){return Object.keys(a.partialUpdate).length===0?!1:!!(a.changedObject instanceof t.Eb||a.changedObject instanceof l.U||a.changedObject instanceof f.v||a.changedObject instanceof s.j&&(Object.prototype.hasOwnProperty.call(a.partialUpdate,"repeat")||Object.prototype.hasOwnProperty.call(a.partialUpdate,"repeatDirection")||Object.prototype.hasOwnProperty.call(a.partialUpdate,"maxPerRow"))||a.changedObject instanceof t.dt&&!Object.prototype.hasOwnProperty.call(a.partialUpdate,"data")||a.changedObject instanceof t.Es&&!Object.prototype.hasOwnProperty.call(a.partialUpdate,"data")||a.changedObject instanceof u.$||a.changedObject instanceof c.F&&Object.prototype.hasOwnProperty.call(a.partialUpdate,"name")||a.changedObject instanceof t.WM&&(Object.prototype.hasOwnProperty.call(a.partialUpdate,"intervals")||Object.prototype.hasOwnProperty.call(a.partialUpdate,"refresh"))||a.changedObject instanceof t.Gg.K2||a.changedObject instanceof t.kh||a.changedObject instanceof l.U||a.changedObject instanceof t.hy||a.changedObject instanceof i.H$&&Object.keys(a.partialUpdate).some(v=>i.vk.includes(v))||a.changedObject instanceof t.JZ||a.changedObject instanceof m.x&&Object.prototype.hasOwnProperty.call(a.partialUpdate,"hideTimeControls")||a.changedObject instanceof t.Pj||a.changedObject instanceof o.g&&!Object.prototype.hasOwnProperty.call(a.partialUpdate,"data")||a.changedObject instanceof t.Gg.en||(0,E.c7)(a.changedObject))}onStateChanged(a){h.isUpdatingPersistedState(a)&&this.detectSaveModelChanges()}detectSaveModelChanges(){this._changesWorker?.postMessage({changed:(0,d.Uy)(this._dashboard),initial:this._dashboard.getInitialSaveModel()})}hasMetadataChanges(){return this._dashboard.state.meta.folderUid!==this._dashboard.getInitialState()?.meta.folderUid}updateIsDirty(a){const{hasChanges:v}=a;v||this.hasMetadataChanges()?this._dashboard.state.isDirty||this._dashboard.setState({isDirty:!0}):this._dashboard.state.isDirty&&this._dashboard.setState({isDirty:!1})}init(){this._changesWorker=r()}startTrackingChanges(){this._changesWorker||this.init(),this._changesWorker.onmessage=a=>{this.updateIsDirty(a.data)},this._changeTrackerSub=this._dashboard.subscribeToEvent(t.bZ,this.onStateChanged.bind(this))}stopTrackingChanges(){this._changeTrackerSub?.unsubscribe()}terminate(){this.stopTrackingChanges(),this._changesWorker?.terminate()}}},45429:(Y,I,e)=>{"use strict";e.d(I,{Yy:()=>o,yO:()=>i});var t=e(56596);function n(c,u){try{let f=c;for(const d of u)f=f[d];return f}catch{return}}function r(c,u){return typeof c==typeof u&&(typeof c=="string"&&c===u||Array.isArray(c)&&c.length===u.length&&c.every((f,d)=>f===u[d]))}function s(c,u){return c===u||c&&u&&c.selected===u.selected&&r(c.text,u.text)&&r(c.value,u.value)}function o(c,u,f,d,E){const h=c,y=u,a=m(y,h),v=l(y,h,d),g=y.refresh!==h.refresh;f||(y.time=h.time),E||(y.refresh=h.refresh);const b=(0,t.G4)(h,y),P=Object.values(b).reduce((C,D)=>C+D.length,0);return{changedSaveModel:y,initialSaveModel:h,diffs:b,diffCount:P,hasChanges:P>0,hasTimeChanges:a,isNew:y.version===0,hasVariableValueChanges:v,hasRefreshChange:g}}function m(c,u){return c.time?.from!==u.time?.from||c.time?.to!==u.time?.to}function l(c,u,f){const d=u.templating?.list??[],E=c.templating?.list??[];let h=!1;for(const y of E){const a=d.find(({name:v,type:g})=>v===y.name&&g===y.type);if(a&&(a.current&&delete a.current.selected,s(y.current,a.current)||(h=!0),!f)){const v=y;v.type==="adhoc"?v.filters=a.filters:v.type!=="groupby"&&(y.current=a.current,y.options=a.options)}}return h}function i(c,u){const f=(0,t.G4)(u,c),d=Object.values(f).reduce((E,h)=>E+h.length,0);return{changedSaveModel:c,initialSaveModel:u,diffs:f,diffCount:d,hasChanges:d>0}}},57109:(Y,I,e)=>{"use strict";e.d(I,{o:()=>u});var t=e(96540),n=e(27857),r=e(87978),s=e(44836),o=e(16678),m=e(32023),l=e(74730),i=e(41507),c=e(60656);class u extends n.Bs{constructor(){super(...arguments),this.onClose=()=>{(0,l.YQ)(this).closeModal()},this.onAddLibraryPanel=d=>{const E=(0,l.YQ)(this),h=E.state.body;if(!(h instanceof n.hy))throw new Error("Trying to add a library panel in a layout that is not SceneGridLayout");const y=m.b4.getNextPanelId(E),a=new c.F({title:"Panel Title",uid:d.uid,name:d.name,panelKey:(0,l.XA)(y)}),v=new i.U({height:l.sw,width:l.vm,x:0,y:0,body:a,key:`grid-item-${y}`});h.setState({children:[v,...h.state.children]}),this.onClose()}}static{this.Component=({model:d})=>{const E=(0,s.t)("library-panel.add-widget.title","Add panel from panel library");return t.createElement(r._,{title:E,onClose:d.onClose},t.createElement(o.j,{onClick:d.onAddLibraryPanel,variant:o.s.Tight,showPanelFilter:!0}))}}}},91309:(Y,I,e)=>{"use strict";e.d(I,{C:()=>P,S:()=>C});var t=e(65474),n=e(81160),r=e(52622),s=e(43585),o=e(14236),m=e(39070),l=e(17172),i=e(32264),c=e(27857),u=e(82467),f=e(3169),d=e(10096),E=e(94954),h=e(55740),y=e(23662),a=e(99140),v=e(31678),g=e(94822),b=e(74730);class P extends c.VE{constructor(T){super({isEnabled:!0,...T,isHidden:!0}),this.hasAlertRules=!0,this.topic=r.QR.AlertStates,this.handleError=M=>{const O=(0,f.gi)("AlertStatesDataLayer",(0,E.q)(M));(0,a.JD)((0,u.dx)(O))}}onEnable(){const T=c.jh.getTimeRange(this);this._timeRangeSub=T.subscribeToState(()=>{this.runWithTimeRange(T)})}onDisable(){this._timeRangeSub?.unsubscribe()}runLayer(){const T=c.jh.getTimeRange(this);this.runWithTimeRange(T)}async runWithTimeRange(T){const M=(0,b.YQ)(this),{uid:O,id:S}=M.state;if(this.querySub&&this.querySub.unsubscribe(),!this.canWork(T))return;const p=(0,t.H)((0,l.AI)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:O},`dashboard-query-runner-unified-alert-states-${S}`)).pipe((0,n.T)(x=>{if(x.status==="success"){this.hasAlertRules=!1;const A={};return x.data.groups.forEach(R=>R.rules.forEach(B=>{if((0,y.Z8)(B)&&B.annotations&&B.annotations[h.YH.panelID]){this.hasAlertRules=!0;const U=Number(B.annotations[h.YH.panelID]),F=C(B.state);A[U]?F===s.O.Alerting&&A[U].state!==s.O.Alerting?A[U].state=s.O.Alerting:F===s.O.Pending&&A[U].state!==s.O.Alerting&&A[U].state!==s.O.Pending&&(A[U].state=s.O.Pending):A[U]={state:F,id:Object.keys(A).length,panelId:U,dashboardId:S}}})),Object.values(A)}throw new Error("Unexpected alert rules response.")}));this.querySub=p.subscribe({next:x=>{const A=(0,o.Vc)(x);this.publishResults({state:m.Gu.Done,series:[{...A,meta:{...A.meta,dataTopic:r.QR.AlertStates}}],timeRange:T.state.value})},error:x=>{this.handleError(x),this.publishResults({state:m.Gu.Error,series:[],errors:[{message:(0,E.q)(x)}],timeRange:T.state.value})}})}canWork(T){const M=(0,b.YQ)(this),{uid:O}=M.state;return!(!O||i.$.publicDashboardAccessToken||T.state.value.raw.to!=="now"||this.hasAlertRules===!1||!(d.TP.hasPermission(v.AccessControlAction.AlertingRuleRead)&&d.TP.hasPermission(v.AccessControlAction.AlertingRuleExternalRead)))}}function C(D){return D===g.cF.Firing?s.O.Alerting:D===g.cF.Pending?s.O.Pending:s.O.OK}},38477:(Y,I,e)=>{"use strict";e.d(I,{g:()=>l});var t=e(43127),n=e(33948),r=e(52622),s=e(32264),o=e(27857),m=e(90569);class l extends o.tV.g{async resolveDataSource(c){return s.$.publicDashboardAccessToken?new m.X:super.resolveDataSource(c)}processEvents(c,u){if(s.$.publicDashboardAccessToken){const f={series:[],timeRange:(0,t.E2)(),state:u.state},d=(0,n.I)(u.events);return d.meta={...d.meta,dataTopic:r.QR.Annotations},f.annotations=[d],f}else return super.processEvents(c,u)}}},33278:(Y,I,e)=>{"use strict";e.d(I,{x:()=>g});var t=e(32196),n=e(96540),r=e(27857),s=e(40845),o=e(67061),m=e(90613),l=e(13544),i=e(32264),c=e(15292);function u({panelEditor:C}){const D=C.state.vizManager,{panel:T,tableView:M}=D.useState(),O=i.$.panels[T.state.pluginId].skipDataQuery;return n.createElement(n.Fragment,null,!O&&n.createElement(c.K,{label:"Table view",showLabel:!0,id:"table-view",value:!!M,onClick:()=>D.toggleTableView(),"aria-label":"toggle-table-view","data-testid":l.Tp.components.PanelEditor.toggleTableView}))}var f=e(74730),d=e(80997),E=e(56034),h=e(52424),y=e(6923),a=e(4588);function v({links:C,uid:D}){return!C||!D?null:n.createElement(n.Fragment,null,C.map((T,M)=>{const O=(0,y.mQ)().getAnchorInfo(T),S=`${T.title}-$${M}`;if(T.type==="dashboards")return n.createElement(h.aK,{key:S,link:T,linkInfo:O,dashboardUID:D});const p=a.G[T.icon],x=n.createElement(h.Zx,{icon:p,href:(0,d.Jf)(O.href),target:T.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":l.Tp.components.DashboardLinks.link},O.title);return n.createElement("div",{key:S,"data-testid":l.Tp.components.DashboardLinks.container},T.tooltip?n.createElement(E.m,{content:O.tooltip},x):x)}))}class g extends r.Bs{constructor(D){super({variableControls:[],timePicker:D.timePicker??new r.KE({}),refreshPicker:D.refreshPicker??new r.WM({}),...D}),this._variableDependency=new r.Sh(this,{onAnyVariableChanged:this._onAnyVariableChanged.bind(this)})}static{this.Component=b}_onAnyVariableChanged(){(0,f.YQ)(this).state.links?.length>0&&this.forceRender()}}function b({model:C}){const{variableControls:D,refreshPicker:T,timePicker:M,hideTimeControls:O}=C.useState(),S=(0,f.YQ)(C),{links:p,meta:x,editPanel:A}=S.useState(),R=(0,s.of)(P),B=location.search.includes("scene-debugger");return n.createElement("div",{className:(0,t.cx)(R.controls,x.isEmbedded&&R.embedded)},n.createElement(o.B,{grow:1,wrap:"wrap"},D.map(U=>n.createElement(U.Component,{model:U,key:U.state.key})),n.createElement(m.a,{grow:1}),!A&&n.createElement(v,{links:p,uid:S.state.uid}),A&&n.createElement(u,{panelEditor:A})),!O&&n.createElement(o.B,{justifyContent:"flex-end"},n.createElement(M.Component,{model:M}),n.createElement(T.Component,{model:T})),B&&n.createElement(r.or,{scene:C,key:"scene-debugger"}))}function P(C){return{controls:(0,t.css)({display:"flex",alignItems:"flex-start",flex:"100%",gap:C.spacing(1),flexDirection:"row",flexWrap:"nowrap",position:"sticky",top:0,background:C.colors.background.canvas,zIndex:C.zIndex.activePanel,width:"100%",marginLeft:"auto",[C.breakpoints.down("sm")]:{flexDirection:"column-reverse",alignItems:"stretch"}}),embedded:(0,t.css)({background:"unset",position:"unset"})}}},16279:(Y,I,e)=>{"use strict";e.d(I,{s:()=>r});var t=e(96540),n=e(27857);class r extends n.ps{constructor(o){super({...o,name:o.name??"Data layers",annotationLayers:o.annotationLayers??[]}),this.addActivationHandler(()=>this._onActivate())}_onActivate(){return this._subs.add(this.subscribeToState((o,m)=>{o.annotationLayers!==m.annotationLayers&&(this.querySub?.unsubscribe(),this.subscribeToAllLayers(this.getAllLayers()))})),this.subscribeToAllLayers(this.getAllLayers()),()=>{this.querySub?.unsubscribe()}}addAnnotationLayer(o){this.setState({annotationLayers:[...this.state.annotationLayers,o]})}getAllLayers(){const o=[...this.state.annotationLayers];return this.state.alertStatesLayer&&o.push(this.state.alertStatesLayer),o}static{this.Component=({model:o})=>{const{annotationLayers:m}=o.useState();return t.createElement(t.Fragment,null,m.map(l=>t.createElement(l.Component,{model:l,key:l.state.key})))}}}},39820:(Y,I,e)=>{"use strict";e.d(I,{L:()=>o});var t=e(27857),n=e(14348),r=e(74730),s=e(60656);class o extends t.Bs{constructor(l){super(l),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){const l=this.parent;let i,c;if(!(l instanceof t.dt))throw new Error("DashboardDatasourceBehaviour must be attached to a SceneQueryRunner");if(l.state.datasource?.uid!==n.K)return;try{i=(0,r.YQ)(l)}catch{return}const u=l.state.queries.find(a=>a.panelId!==void 0);if(!u)return;const f=u.panelId,d=(0,r.XA)(f),E=(0,r.vL)(i,d);if(!(E instanceof t.Eb))return;const h=(0,r.un)(E);let y;if(h)this.prevRequestId&&this.prevRequestId!==h.state.data?.request?.requestId&&l.runQueries();else if(E.parent instanceof s.F)E.parent.isActive||(y=E.parent.activate()),c=E.parent.subscribeToState((a,v)=>{this.handleLibPanelStateUpdates(a,v,l)});else throw new Error("Could not find SceneQueryRunner for panel");return()=>{this.prevRequestId=h?.state.data?.request?.requestId,c&&c.unsubscribe(),y&&y()}}handleLibPanelStateUpdates(l,i,c){if(l.panel&&l.panel!==i.panel){if(!((0,r.un)(l.panel)instanceof t.dt))throw new Error("Could not find SceneQueryRunner for panel");c.runQueries()}}}},41507:(Y,I,e)=>{"use strict";e.d(I,{U:()=>E});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(32264),m=e(27857),l=e(15054),i=e(74730),c=e(57109),u=e(60656),f=e(7196),d=e(30195);class E extends m.Bs{constructor(v){super(v),this._variableDependency=new m.Sh(this,{variableNames:this.state.variableName?[this.state.variableName]:[],onVariableUpdateCompleted:this._onVariableUpdateCompleted.bind(this)}),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.state.variableName&&(this._subs.add(this.subscribeToState((v,g)=>this._handleGridResize(v,g))),this._performRepeat())}_onVariableUpdateCompleted(){this.state.variableName&&this._performRepeat()}_handleGridResize(v,g){const b=this.state.repeatedPanels?.length??1,P={};if(v.height!==g.height){if(this.getRepeatDirection()==="v"){const C=Math.ceil(v.height/b);P.itemHeight=C}else{const C=Math.ceil(b/this.getMaxPerRow());P.itemHeight=Math.ceil(v.height/C)}P.itemHeight!==this.state.itemHeight&&this.setState(P)}}_performRepeat(){if(this.state.body instanceof c.o||!this.state.variableName||this._variableDependency.hasDependencyInLoadingState())return;const v=m.jh.lookupVariable(this.state.variableName,this)??new m.yP({name:"_____default_sys_repeat_var_____",options:[],value:"",text:"",query:"A"});if(!(v instanceof m.n8)){console.error("DashboardGridItem: Variable is not a MultiValueVariable");return}const{values:g,texts:b}=(0,i.a7)(v);if((0,n.isEqual)(this._prevRepeatValues,g))return;this._prevRepeatValues=g;const P=this.state.body instanceof u.F?this.state.body.state.panel:this.state.body,C=[];for(let p=0;p<g.length;p++){const x={$variables:new m.Pj({variables:[new m.xc({name:v.state.name,value:g[p],text:String(b[p])})]}),key:`${P.state.key}-clone-${p}`};p>0&&(x.menu=new m.Lw({$behaviors:[f.t0]}));const A=P.clone(x);C.push(A)}const D=this.getRepeatDirection(),T={repeatedPanels:C},M=this.state.itemHeight??10,O=this.state.height,S=this.getMaxPerRow();if(D==="h"){const p=Math.ceil(C.length/S);T.height=p*M}else T.height=C.length*M;if(this.setState(T),O!==this.state.height){const p=m.jh.getLayout(this);p instanceof m.hy&&p.forceRender()}this.publishEvent(new d.d({source:this}),!0)}getMaxPerRow(){return this.state.maxPerRow??4}getRepeatDirection(){return this.state.repeatDirection==="v"?"v":"h"}getClassName(){return this.state.variableName?"panel-repeater-grid-item":""}isRepeated(){return this.state.variableName!==void 0}static{this.Component=({model:v})=>{const{repeatedPanels:g,itemHeight:b,variableName:P,body:C}=v.useState(),D=g?.length??0,T=h(v.getRepeatDirection(),D,v.getMaxPerRow(),b??10);if(!P){if(C instanceof m.Eb)return s.createElement(C.Component,{model:C,key:C.state.key});if(C instanceof u.F)return s.createElement(C.Component,{model:C,key:C.state.key});if(C instanceof c.o)return s.createElement(C.Component,{model:C,key:C.state.key})}return g?s.createElement("div",{className:T},g.map(M=>s.createElement("div",{className:y,key:M.state.key},s.createElement(M.Component,{model:M,key:M.state.key})))):null}}}function h(a,v,g,b){return(0,s.useMemo)(()=>{const P=o.$.theme2,C=b*l.sD*v+(v-1)*l.dU;if(a==="h"){const D=Math.ceil(v/g),T=Math.min(v,g);return(0,t.css)({display:"grid",height:"100%",width:"100%",gridTemplateColumns:`repeat(${T}, 1fr)`,gridTemplateRows:`repeat(${D}, 1fr)`,gridColumnGap:P.spacing(1),gridRowGap:P.spacing(1),[P.breakpoints.down("md")]:{display:"flex",flexDirection:"column",height:C}})}return(0,t.css)({display:"flex",height:"100%",width:"100%",flexDirection:"column",gap:P.spacing(1),[P.breakpoints.down("md")]:{height:C}})},[a,v,g,b])}const y=(0,t.css)({display:"flex",flexGrow:1,position:"relative"})},63117:(Y,I,e)=>{"use strict";e.d(I,{H$:()=>el,vk:()=>Bi});var t=e(71733),n=e(26272),r=e(41987),s=e(32264),o=e(12131),m=e(27857),l=e(28138),i=e(15054),c=e(17422),u=e(33390),f=e(14792),d=e(34214),E=e(6473),h=e(11230),y=e(80484),a=e(28444),v=e(13530),g=e(96540),b=e(63021),P=e(40675),C=e(87978),D=e(54943),T=e(76459),M=e.n(T),O=e(49785),S=e(13544),p=e(55852),x=e(42418),A=e(67061),R=e(88575),B=e(10354),U=e(21744),F=e(15292),K=e(90613),w=e(60029),L=e(36607),V=e(71500),N=e(17172);function z(it){return(0,N.NF)(it)&&it.data&&it.data.status==="version-mismatch"}function J(it){return(0,N.NF)(it)&&it.data&&it.data.status==="name-exists"}function G(it){return(0,N.NF)(it)&&it.data&&it.data.status==="plugin-dashboard"}function H({cancelButton:it,saveButton:_e}){return g.createElement(x.F,{title:"Name already exists",severity:"error"},g.createElement("p",null,"A dashboard with the same name in selected folder already exists. Would you still like to save this dashboard?"),g.createElement(K.a,{paddingTop:2},g.createElement(A.B,{alignItems:"center"},it,_e(!0))))}function q({overwrite:it,isLoading:_e,isValid:st,onSave:ht}){return g.createElement(p.$n,{disabled:!st||_e,icon:_e?"spinner":void 0,onClick:()=>ht(it),variant:it?"destructive":"primary","data-testid":S.Tp.components.Drawer.DashboardSaveDrawer.saveButton},_e?"Saving...":it?"Save and overwrite":"Save")}var le=e(41053),me=e(14110),k=e(3169),ee=e(91219),X=e(55314),j=e(31678),ne=e(36974);function te(it=!1){const _e=(0,j.useDispatch)(),st=(0,k._2)(),[ht]=(0,X.e8)(),[Te,we]=(0,le.A)(async(Ue,Ge,ct)=>{{const vt=await ht({dashboard:Ge,folderUid:ct.folderUid,message:ct.message,overwrite:ct.overwrite,showErrorAlert:!1});if("error"in vt)throw vt.error;const At=vt.data;Ue.saveCompleted(Ge,At,ct.folderUid),l.A.publish(new a.Eu),st.success("Dashboard saved"),(0,ne.ko)(At.uid),it?(0,me.rR)("grafana_dashboard_copied",{name:Ge.title,url:At.url}):(0,me.rR)(`grafana_dashboard_${At.uid?"saved":"created"}`,{name:Ge.title,url:At.url});const jt=o.Ny.getLocation(),qt=t.I.stripBaseFromUrl(At.url);return qt!==jt.pathname&&setTimeout(()=>{Ue.stopUrlSync(),o.Ny.push({pathname:qt,search:jt.search}),Ue.startUrlSync()}),Ue.state.meta.isStarred&&_e((0,ee.TU)({id:At.uid,title:Ue.state.title,url:qt})),vt.data}},[_e,st]);return{state:Te,onSaveDashboard:we}}function oe({dashboard:it,changeInfo:_e}){const{changedSaveModel:st}=_e,{register:ht,handleSubmit:Te,setValue:we,formState:Ue,getValues:Ge,watch:ct}=(0,O.mN)({mode:"onBlur",defaultValues:{title:_e.isNew?st.title:`${st.title} Copy`,description:st.description??"",folder:{uid:it.state.meta.folderUid,title:it.state.meta.folderTitle},copyTags:!1}}),{errors:vt,isValid:At,defaultValues:jt}=Ue,qt=ct(),{state:an,onSaveDashboard:xn}=te(!1),Un=async Xn=>{const Gn=Ge(),Yn=ge(st,Gn,_e.isNew);(await xn(it,Yn,{overwrite:Xn,folderUid:Gn.folder.uid})).status==="success"&&it.closeModal()},Cn=g.createElement(p.$n,{variant:"secondary",onClick:()=>it.closeModal(),fill:"outline"},"Cancel"),Ln=Xn=>g.createElement(q,{isValid:At,isLoading:an.loading,onSave:Un,overwrite:Xn});function la(Xn){return J(Xn)?g.createElement(H,{cancelButton:Cn,saveButton:Ln}):g.createElement(g.Fragment,null,Xn&&g.createElement(x.F,{title:"Failed to save dashboard",severity:"error"},g.createElement("p",null,Xn.message)),g.createElement(A.B,{alignItems:"center"},Cn,Ln(!1)))}return g.createElement("form",{onSubmit:Te(()=>Un(!1))},g.createElement(R.D,{label:g.createElement(ie,{dashboard:st,onChange:we}),invalid:!!vt.title,error:vt.title?.message},g.createElement(B.p,{...ht("title",{required:"Required",validate:be}),"aria-label":"Save dashboard title field","data-testid":S.Tp.components.Drawer.DashboardSaveDrawer.saveAsTitleInput,onChange:M()(async Xn=>{we("title",Xn.target.value,{shouldValidate:!0})},400)})),g.createElement(R.D,{label:g.createElement(ue,{dashboard:st,onChange:we}),invalid:!!vt.description,error:vt.description?.message},g.createElement(U.f,{...ht("description",{required:!1}),"aria-label":"Save dashboard description field",autoFocus:!0})),g.createElement(R.D,{label:"Folder"},g.createElement(L.d,{onChange:(Xn,Gn)=>we("folder",{uid:Xn,title:Gn}),value:qt.folder?.uid,initialTitle:jt.folder.title,dashboardId:st.id??void 0,enableCreateNew:!0})),!_e.isNew&&g.createElement(R.D,{label:"Copy tags"},g.createElement(F.d,{...ht("copyTags")})),g.createElement(K.a,{paddingTop:2},la(an.error)))}function ie(it){return g.createElement(A.B,{justifyContent:"space-between"},g.createElement(w.J,{htmlFor:"description"},"Title"))}function ue(it){return g.createElement(A.B,{justifyContent:"space-between"},g.createElement(w.J,{htmlFor:"description"},"Description"))}async function be(it,_e){if(it===_e.folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await V.P.validateNewDashboardName(_e.folder.uid??"general",it),!0}catch(st){return st instanceof Error?st.message:"Dashboard name is invalid"}}function ge(it,_e,st){return{...it,id:null,uid:"",title:_e.title,description:_e.description,tags:st||_e.copyTags?it.tags:[]}}var re=e(10880);function ye({dashboard:it,drawer:_e,changeInfo:st}){const{changedSaveModel:ht,hasChanges:Te}=st,{state:we,onSaveDashboard:Ue}=te(!1),[Ge,ct]=(0,g.useState)({folderUid:it.state.meta.folderUid}),vt=async an=>{(await Ue(it,ht,{...Ge,overwrite:an})).status==="success"&&(it.closeModal(),_e.state.onSaveSuccess?.())},At=g.createElement(p.$n,{variant:"secondary",onClick:()=>it.closeModal(),fill:"outline"},"Cancel"),jt=an=>g.createElement(q,{isValid:Te,isLoading:we.loading,onSave:vt,overwrite:an});function qt(an){return z(an)?g.createElement(x.F,{title:"Someone else has updated this dashboard",severity:"error"},g.createElement("p",null,"Would you still like to save this dashboard?"),g.createElement(K.a,{paddingTop:2},g.createElement(A.B,{alignItems:"center"},At,jt(!0)))):J(an)?g.createElement(H,{cancelButton:At,saveButton:jt}):G(an)?g.createElement(x.F,{title:"Plugin dashboard",severity:"error"},g.createElement("p",null,"Your changes will be lost when you update the plugin. Use ",g.createElement("strong",null,"Save As")," to create custom version."),g.createElement(K.a,{paddingTop:2},g.createElement(A.B,{alignItems:"center"},At,jt(!0)))):g.createElement(g.Fragment,null,an&&g.createElement(x.F,{title:"Failed to save dashboard",severity:"error"},g.createElement("p",null,an.message)),g.createElement(A.B,{alignItems:"center"},At,jt(!1),!Te&&g.createElement("div",null,"No changes to save")))}return g.createElement(A.B,{gap:2,direction:"column"},g.createElement(Be,{drawer:_e,changeInfo:st}),g.createElement(R.D,{label:"Message"},g.createElement(U.f,{"aria-label":"message",value:Ge.message??"",onChange:an=>{ct({...Ge,message:an.currentTarget.value})},placeholder:"Add a note to describe your changes (optional).",autoFocus:!0,rows:5})),qt(we.error))}function Be({drawer:it,changeInfo:_e}){const{saveVariables:st=!1,saveTimeRange:ht=!1,saveRefresh:Te=!1}=it.useState(),{hasTimeChanges:we,hasVariableValueChanges:Ue,hasRefreshChange:Ge}=_e;return g.createElement(A.B,{direction:"column",alignItems:"flex-start"},we&&g.createElement(re.S,{id:"save-timerange",checked:ht,onChange:it.onToggleSaveTimeRange,label:"Update default time range",description:"Will make current time range the new default","data-testid":S.Tp.pages.SaveDashboardModal.saveTimerange}),Ge&&g.createElement(re.S,{id:"save-refresh",label:"Update default refresh value",description:"Will make the current refresh the new default",checked:Te,onChange:it.onToggleSaveRefresh,"data-testid":S.Tp.pages.SaveDashboardModal.saveRefresh}),Ue&&g.createElement(re.S,{id:"save-variables",label:"Update default variable values",description:"Will make the current values the new default",checked:st,onChange:it.onToggleSaveVariables,"data-testid":S.Tp.pages.SaveDashboardModal.saveVariables}))}var ve=e(32196),Me=e(4213),ke=e.n(Me),Se=e(70713),We=e(32372),De=e(10534);function pe({dashboard:it,drawer:_e,changeInfo:st}){const ht=(0,g.useMemo)(()=>JSON.stringify(st.changedSaveModel,null,2),[st]),Te=(0,g.useCallback)(()=>{const we=new Blob([ht],{type:"application/json;charset=utf-8"});(0,Me.saveAs)(we,st.changedSaveModel.title+"-"+new Date().getTime()+".json")},[st.changedSaveModel,ht]);return g.createElement("div",{className:Ne.container},g.createElement(A.B,{direction:"column",gap:2,grow:1},g.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",g.createElement("br",null),g.createElement("i",null,"See"," ",g.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),g.createElement("br",null)," ",g.createElement("br",null),g.createElement("strong",null,"File path: ")," ",it.state.meta.provisionedExternalId),g.createElement(Be,{drawer:_e,changeInfo:st}),g.createElement("div",{className:Ne.json},g.createElement(Se.Ay,{disableWidth:!0},({height:we})=>g.createElement(We.B,{width:"100%",height:we,language:"json",showLineNumbers:!0,showMiniMap:ht.length>100,value:ht,readOnly:!0}))),g.createElement(K.a,{paddingTop:2},g.createElement(A.B,{gap:2},g.createElement(p.$n,{variant:"secondary",onClick:_e.onClose,fill:"outline"},"Cancel"),g.createElement(De.b,{icon:"copy",getText:()=>ht},"Copy JSON to clipboard"),g.createElement(p.$n,{type:"submit",onClick:Te},"Save JSON to file")))))}const Ne={container:(0,ve.css)({height:"100%",display:"flex"}),json:(0,ve.css)({flexGrow:1,maxHeight:"800px"})};var Le=e(20455),He=e(45429);function je(it,_e,st,ht){const Te=(0,He.Yy)(it.getInitialSaveModel(),(0,Le.Uy)(it),_e,st,ht),we=it.getInitialState()?.meta.folderUid!==it.state.meta.folderUid;return{...Te,hasFolderChanges:we,hasChanges:Te.hasChanges||we}}class at extends m.Bs{constructor(){super(...arguments),this.onClose=()=>{this.state.dashboardRef.resolve().setState({overlay:void 0})},this.onToggleSaveTimeRange=()=>{this.setState({saveTimeRange:!this.state.saveTimeRange})},this.onToggleSaveVariables=()=>{this.setState({saveVariables:!this.state.saveVariables})},this.onToggleSaveRefresh=()=>{this.setState({saveRefresh:!this.state.saveRefresh})}}static{this.Component=({model:_e})=>{const{showDiff:st,saveAsCopy:ht,saveTimeRange:Te,saveVariables:we,saveRefresh:Ue}=_e.useState(),Ge=je(_e.state.dashboardRef.resolve(),Te,we,Ue),{changedSaveModel:ct,initialSaveModel:vt,diffs:At,diffCount:jt,hasFolderChanges:qt}=Ge,an=jt+(qt?1:0),xn=_e.state.dashboardRef.resolve(),{meta:Un}=xn.useState(),{provisioned:Cn,folderTitle:Ln}=Un,la=g.createElement(b.U,null,g.createElement(P.o,{label:"Details",active:!st,onChangeTab:()=>_e.setState({showDiff:!1})}),an>0&&g.createElement(P.o,{label:"Changes",active:st,onChangeTab:()=>_e.setState({showDiff:!0}),counter:an}));let Xn="Save dashboard";ht?Xn="Save dashboard copy":Cn&&(Xn="Provisioned dashboard");const Gn=()=>st?g.createElement(D.l,{diff:At,oldValue:vt,newValue:ct,hasFolderChanges:qt,oldFolder:xn.getInitialState()?.meta.folderTitle,newFolder:Ln}):ht||Ge.isNew?g.createElement(oe,{dashboard:xn,changeInfo:Ge}):Cn?g.createElement(pe,{dashboard:xn,changeInfo:Ge,drawer:_e}):g.createElement(ye,{dashboard:xn,changeInfo:Ge,drawer:_e});return g.createElement(C._,{title:Xn,subtitle:xn.state.title,onClose:_e.onClose,tabs:la},Gn())}}}var Ye=e(85445),$e=e(57714),xe=e(64423),Fe=e(18226),Ee=e(94624),se=e(72724),ae=e(3591),fe=e(41507),Ce=e(13989),Re=e(53543),Oe=e(74730);class ze{constructor(_e){this._scene=_e,this.events=new Fe.o,this._subs=new xe.yU;const st=m.jh.getTimeRange(_e);this.formatDate=this.formatDate.bind(this),this._subs.add(st.subscribeToState((ht,Te)=>{ht.value!==Te.value&&this.events.publish(new ae.sR(ht.value))}))}get id(){return this._scene.state.id??null}get uid(){return this._scene.state.uid??null}get title(){return this._scene.state.title}get description(){return this._scene.state.description}get editable(){return this._scene.state.editable}get graphTooltip(){return this._getSyncMode()}get timepicker(){return{refresh_intervals:this._scene.state.controls.state.refreshPicker.state.intervals,hidden:this._scene.state.controls.state.hideTimeControls??!1}}get timezone(){return this.getTimezone()}get weekStart(){return m.jh.getTimeRange(this._scene).state.weekStart}get tags(){return this._scene.state.tags}get links(){return this._scene.state.links}get meta(){return this._scene.state.meta}get time(){const _e=m.jh.getTimeRange(this._scene);return{from:_e.state.from,to:_e.state.to}}get panels(){return Xe(this._scene,st=>st instanceof m.Eb).map(st=>new Re.R(st))}get annotations(){const _e={list:[]};return this._scene.state.$data instanceof m.kh&&(_e.list=(0,Ce.O)(this._scene.state.$data.state.layers)),_e}getTimezone(){return m.jh.getTimeRange(this._scene).getTimeZone()}sharedTooltipModeEnabled(){return this._getSyncMode()>0}sharedCrosshairModeOnly(){return this._getSyncMode()===1}_getSyncMode(){if(this._scene.state.$behaviors){for(const _e of this._scene.state.$behaviors)if(_e instanceof m.Gg.K2)return _e.state.sync}return Ee.y.Off}otherPanelInFullscreen(_e){return!1}formatDate(_e,st){return(0,se.LE)(_e,{format:st,timeZone:this.getTimezone()})}getPanelById(_e){const st=(0,Oe.vL)(this._scene,(0,Oe.XA)(_e));return st?new Re.R(st):null}removePanel(_e){const st=(0,Oe.vL)(this._scene,(0,Oe.XA)(_e.id));if(!st){console.error("Trying to remove a panel that was not found in scene",_e);return}const ht=st.parent;if(!(ht instanceof fe.U)){console.error("Trying to remove a panel that is not wrapped in DashboardGridItem");return}const Te=m.jh.getLayout(st);if(!(Te instanceof m.hy)){console.error("Trying to remove a panel in a layout that is not SceneGridLayout ");return}if(Te===ht.parent&&Te.setState({children:Te.state.children.filter(we=>we!==ht)}),ht.parent instanceof m.tI){const we=Te.clone({children:Te.state.children.filter(Ue=>Ue!==ht)});Te.parent instanceof m.hy&&Te.parent.setState({children:Te.parent.state.children.map(Ue=>Ue===Te?we:Ue)})}}canEditAnnotations(_e){return this._scene.canEditDashboard()?_e?!!this._scene.state.meta.annotationsPermissions?.dashboard.canEdit:!!this._scene.state.meta.annotationsPermissions?.organization.canEdit:!1}panelInitialized(){}destroy(){this.events.removeAllListeners(),this._subs.unsubscribe()}hasUnsavedChanges(){return this._scene.state.isDirty}}function Xe(it,_e){let st=[];return it.forEachChild(ht=>{_e(ht)?st.push(ht):st=st.concat(Xe(ht,_e))}),st}var Ze=e(32023);function et(it){let _e=5381;for(let st=0;st<it.length;st++)_e=_e*33^it.charCodeAt(st);return _e>>>0}var nt=e(11982),lt=e(57109),rt=e(58476),ut=e(64388),Et=e(40845),Ct=e(40276),Ut=e(17205),Gt=e(68064),Wt=e(78235);function ot({model:it}){const{controls:_e,overlay:st,editview:ht,editPanel:Te,isEmpty:we,scopes:Ue,meta:Ge}=it.useState(),{isExpanded:ct}=Ue?.useState()??{},vt=(0,Et.of)(Tt),At=(0,rt.zy)(),jt=(0,j.useSelector)(la=>la.navIndex),qt=it.getPageNav(At,jt),an=it.getBodyToRender(),xn=(0,c.tc)(jt,"dashboards/browse"),Un=!Ge.url&&!Ge.slug&&!Ge.isNew&&!Ge.isSnapshot;if(ht)return g.createElement(g.Fragment,null,g.createElement(ht.Component,{model:ht}),st&&g.createElement(st.Component,{model:st}));const Cn=g.createElement(Gt.A,{dashboard:it,canCreate:!!it.state.meta.canEdit}),Ln=g.createElement("div",{className:(0,ve.cx)(vt.body)},g.createElement(an.Component,{model:an}));return g.createElement(Ut.Y,{navModel:xn,pageNav:qt,layout:ut.k.Custom},Te&&g.createElement(Te.Component,{model:Te}),!Te&&g.createElement("div",{className:(0,ve.cx)(vt.pageContainer,_e&&!Ue&&vt.pageContainerWithControls,Ue&&vt.pageContainerWithScopes,Ue&&ct&&vt.pageContainerWithScopesExpanded)},Ue&&g.createElement(Ue.Component,{model:Ue}),g.createElement(Wt.c,{dashboard:it}),!Un&&_e&&g.createElement("div",{className:(0,ve.cx)(vt.controlsWrapper,Ue&&!ct&&vt.controlsWrapperWithScopes)},g.createElement(_e.Component,{model:_e})),g.createElement(Ct.E,{autoHeightMin:"100%",className:vt.scrollbarContainer,testId:S.Tp.pages.Dashboard.DashNav.scrollContainer},g.createElement("div",{className:(0,ve.cx)(vt.canvasContent,Un&&vt.homePagePadding)},g.createElement(g.Fragment,null,we&&Cn),Ln))),st&&g.createElement(st.Component,{model:st}))}function Tt(it){return{pageContainer:(0,ve.css)({display:"grid",gridTemplateAreas:`
        "panels"`,gridTemplateColumns:"1fr",gridTemplateRows:"1fr",height:"100%"}),pageContainerWithControls:(0,ve.css)({gridTemplateAreas:`
        "controls"
        "panels"`,gridTemplateRows:"auto 1fr"}),pageContainerWithScopes:(0,ve.css)({gridTemplateAreas:`
        "scopes controls"
        "panels panels"`,gridTemplateColumns:`${it.spacing(32)} 1fr`,gridTemplateRows:"auto 1fr"}),pageContainerWithScopesExpanded:(0,ve.css)({gridTemplateAreas:`
        "scopes controls"
        "scopes panels"`}),scrollbarContainer:(0,ve.css)({gridArea:"panels"}),controlsWrapper:(0,ve.css)({display:"flex",flexDirection:"column",flexGrow:0,gridArea:"controls",padding:it.spacing(2)}),controlsWrapperWithScopes:(0,ve.css)({padding:it.spacing(2,2,2,0)}),homePagePadding:(0,ve.css)({padding:it.spacing(2,2)}),canvasContent:(0,ve.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:it.spacing(0,2),flexBasis:"100%",flexGrow:1}),body:(0,ve.css)({label:"body",flexGrow:1,display:"flex",gap:"8px",marginBottom:it.spacing(2)})}}var Pn=e(65123),ft=e(54612),Mt=e(16560),_t=e(86460),nn=e(14578),dn=e(62930),en=e(88323),Xt=e(66864),En=e(16233),Vn=e(83195),Wn=e(2619),na=e(2543),Bt=e(89667),ln=e(52622),mn=e(39070),Dn=e(68706),hn=e(60656),Fn=e(41524);function wn(it){const _e=[];if(it?.series)for(const st of it.series)_e.push((0,Bt.Nw)(st));if(it?.annotations)for(const st of it.annotations){const ht=(0,Bt.Nw)(st);ht.schema?.meta||(ht.schema.meta={}),ht.schema.meta.dataTopic=ln.QR.Annotations,_e.push(ht)}return _e}function Hn(it,_e){const st={panelType:it.state.pluginId,datasource:"??"},ht=s.$.buildInfo.versionString;let Te=`| Key | Value |
|--|--|
| Panel | ${st.panelType} @ ${it.state.pluginVersion??ht} |
| Grafana | ${ht} // ${s.$.buildInfo.edition} |
`;return _e&&(Te+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+_e+"\n```\n</details>"),Te}async function An(it,_e,st){let ht;const Te=it.parent instanceof hn.F,we=Te?it.parent.parent:it.parent;Te?ht={...(0,Le.ZB)(we),...(0,Le.Z6)(it)}:ht=(0,Le.ZB)(we);const Ue=(0,na.cloneDeep)(zt),Ge={panelType:it.state.pluginId,datasource:"??"},ct=(0,Oe.un)(it);if(!ct.state.data)return;const vt=ct.state.data,At=ct?.state.datasource,jt=(0,Fn.W)(wn(vt),_e),qt=s.$.buildInfo.versionString,an=ct.state.queries??[],xn=vt.annotations?vt.annotations.reduce((Cn,Ln)=>Ln.length+Cn,0):0,Un=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${Ge.panelType} @ ${ht.pluginVersion??qt}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${an.map(Cn=>{const Ln=Cn.datasource??At;return`${Cn.refId}[${Ln?.type}]`}).join(", ")}</td>
    </tr>
    ${In(ht)}
    ${kn(vt,jt)}
    ${Vt(vt)}
    <tr>
      <th>Grafana</th>
      <td>${qt} // ${s.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(Ue.panels[0]={...ht,...Ue.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:Dn.nj.Snapshot,snapshot:jt}]},delete Ue.panels[0].libraryPanel,ht.transformations?.length){const Cn=Ue.panels[Ue.panels.length-1];Cn.title=Cn.title+" (after transformations)";const Ln=(0,na.cloneDeep)(Cn);Ln.id=100,Ln.title="Data (before transformations)",Ln.gridPos.w=24,Ln.targets[0].withTransforms=!1,Ue.panels.push(Ln)}return xn>0&&Ue.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:ln.QR.Annotations,refId:"A"}]}),Ue.panels[1].options.content=Un,Ue.panels[2].options.content=JSON.stringify(ht,null,2),Ue.title=`Debug: ${ht.title} // ${(0,se.LE)(new Date)}`,Ue.tags=["debug",`debug-${Ge.panelType}`],Ue.time={from:st.from.toISOString(),to:st.to.toISOString()},Ue}function In(it){return it.transformations?`<tr>
      <th>Transform</th>
      <td>${it.transformations.map(_e=>_e.id).join(", ")}</td>
  </tr>`:""}function kn(it,_e){let st=it.series.length??0,ht=0,Te=0;for(const we of it.series)ht+=we.fields.length,Te+=we.length;return`<tr><th>Data</th><td>${it.state!==mn.Gu.Done?it.state:""} ${st} frames, ${ht} fields, ${Te} rows </td></tr>`}function Vt(it){return it.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${it.annotations.reduce((_e,st)=>st.length+_e,0)}</td>
</tr>`:""}const zt={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37};var kt=(it=>(it[it.Support=0]="Support",it[it.Data=1]="Data",it))(kt||{}),rn=(it=>(it[it.PanelSnapshot=0]="PanelSnapshot",it[it.GithubComment=1]="GithubComment",it))(rn||{});class yn extends Wn.Q{constructor(_e){super({panel:_e,panelTitle:m.jh.interpolate(_e,_e.state.title,{},"text"),currentTab:0,showMessage:1,snapshotText:"",markdownText:"",randomize:{},snapshotUpdate:0,options:[{label:"GitHub comment",description:"Copy and paste this message into a GitHub issue or comment",value:1},{label:"Panel support snapshot",description:"Dashboard JSON used to help troubleshoot visualization issues",value:0}]}),this.onCurrentTabChange=st=>{this.setState({currentTab:st})},this.onShowMessageChange=st=>{this.setState({showMessage:st.value})},this.onGetMarkdownForClipboard=()=>{const{markdownText:st}=this.state,ht=Math.pow(1024,2)*1.5;return st.length>ht?(this.setState({error:{title:"Copy to clipboard failed",message:"Snapshot is too large, consider download and attaching a file instead"}}),""):st},this.onDownloadDashboard=()=>{const{snapshotText:st,panelTitle:ht}=this.state,Te=new Blob([st],{type:"text/plain"}),we=`debug-${ht}-${(0,se.LE)(new Date)}.json.txt`;ke()(Te,we)},this.onSetSnapshotText=st=>{this.setState({snapshotText:st})},this.onToggleRandomize=st=>{const{randomize:ht}=this.state;this.setState({randomize:{...ht,[st]:!ht[st]}})}}async buildDebugDashboard(){const{panel:_e,randomize:st,snapshotUpdate:ht}=this.state,Te=await An(_e,st,m.jh.getTimeRange(_e).state.value),we=JSON.stringify(Te,null,2),Ue=Hn(_e,we),Ge=(0,Vn.cN)((0,Vn.j_)("bytes")(we?.length??0));let ct;if(Te)try{ct=(0,Ye.wM)({dashboard:Te,meta:{isEmbedded:!0}}).state.body}catch(vt){console.log("Error creating scene:",vt)}this.setState({snapshot:Te,snapshotText:we,markdownText:Ue,snapshotSize:Ge,snapshotUpdate:ht+1,scene:ct})}}function gn({panel:it,onClose:_e}){const st=(0,Et.of)(Rn),ht=(0,g.useMemo)(()=>new yn(it),[it]),Te=it.getPlugin(),{currentTab:we,loading:Ue,error:Ge,options:ct,showMessage:vt,snapshotSize:At,markdownText:jt,snapshotText:qt,randomize:an,panelTitle:xn,scene:Un}=ht.useState();if((0,g.useEffect)(()=>{ht.buildDebugDashboard()},[ht,Te,an]),!Te)return null;const Cn=[{label:"Snapshot",value:kt.Support},{label:"Data",value:kt.Data}],Ln=s.$.supportBundlesEnabled&&En.TP.hasPermission(j.AccessControlAction.ActionSupportBundlesCreate);return g.createElement(C._,{title:"Get help with this panel",size:"lg",onClose:_e,subtitle:g.createElement(A.B,{direction:"column",gap:1},g.createElement(A.B,{direction:"row",gap:1},g.createElement(_t.y,{featureState:r.Ay.beta}),g.createElement("a",{href:"https://grafana.com/docs/grafana/latest/troubleshooting/",target:"blank",className:"external-link",rel:"noopener noreferrer"},"Troubleshooting docs ",g.createElement(nn.I,{name:"external-link-alt"}))),g.createElement("span",{className:"muted"},"To request troubleshooting help, send a snapshot of this panel to Grafana Labs Technical Support. The snapshot contains query response data and panel settings."),Ln&&g.createElement("span",{className:"muted"},"You can also retrieve a support bundle containing information concerning your Grafana instance and configured datasources in the ",g.createElement("a",{href:"/support-bundles"},"support bundles section"),".")),tabs:g.createElement(b.U,null,Cn.map((la,Xn)=>g.createElement(P.o,{key:`${la.value}-${Xn}`,label:la.label,active:la.value===we,onChangeTab:()=>ht.onCurrentTabChange(la.value)})))},Ue&&g.createElement(dn.y,null),Ge&&g.createElement(x.F,{title:Ge.title},Ge.message),we===kt.Data&&g.createElement("div",{className:st.code},g.createElement("div",{className:st.opts},g.createElement(R.D,{label:"Template",className:st.field},g.createElement(en.l6,{options:ct,value:vt,onChange:ht.onShowMessageChange})),vt===rn.GithubComment?g.createElement(De.b,{icon:"copy",getText:ht.onGetMarkdownForClipboard},"Copy to clipboard"):g.createElement(p.$n,{icon:"download-alt",onClick:ht.onDownloadDashboard},"Download (",At,")")),g.createElement(Se.Ay,{disableWidth:!0},({height:la})=>g.createElement(We.B,{width:"100%",height:la,language:vt===rn.GithubComment?"markdown":"json",showLineNumbers:!0,showMiniMap:!0,value:vt===rn.GithubComment?jt:qt,readOnly:!1,onBlur:ht.onSetSnapshotText}))),we===kt.Support&&g.createElement(g.Fragment,null,g.createElement(R.D,{label:"Randomize data",description:"Modify the original data to hide sensitve information.  Note the lengths will stay the same, and duplicate values will be equal."},g.createElement(Xt.Gy,null,g.createElement(F.K,{label:"Labels",id:"randomize-labels",showLabel:!0,value:!!an.labels,onChange:()=>ht.onToggleRandomize("labels")}),g.createElement(F.K,{label:"Field names",id:"randomize-field-names",showLabel:!0,value:!!an.names,onChange:()=>ht.onToggleRandomize("names")}),g.createElement(F.K,{label:"String values",id:"randomize-string-values",showLabel:!0,value:!!an.values,onChange:()=>ht.onToggleRandomize("values")}))),g.createElement(R.D,{label:"Support snapshot",description:`Panel: ${xn}`},g.createElement(A.B,null,g.createElement(p.$n,{icon:"download-alt",onClick:ht.onDownloadDashboard},"Dashboard (",At,")"),g.createElement(De.b,{icon:"github",getText:ht.onGetMarkdownForClipboard,title:"Copy a complete GitHub comment to the clipboard"},"Copy to clipboard"))),g.createElement(Se.Ay,{disableWidth:!0},({height:la})=>g.createElement("div",{style:{height:la,overflow:"auto"}},Un&&g.createElement(Un.Component,{model:Un})))))}const Rn=it=>({code:(0,ve.css)({flexGrow:1,height:"100%",overflow:"scroll"}),field:(0,ve.css)({width:"100%"}),opts:(0,ve.css)({display:"flex",width:"100%",flexGrow:0,alignItems:"center",justifyContent:"flex-end","& button":{marginLeft:it.spacing(1)}})});var Kt=e(44836),mt=e(61453);class pt extends m.Bs{constructor(_e){super({..._e,options:{withTransforms:!0,withFieldConfig:!0}}),this.onOptionsChange=st=>{this.setState({options:st})}}getTabLabel(){return(0,Kt.t)("dashboard.inspect.data-tab","Data")}getTabValue(){return Mt.q.Data}static{this.Component=({model:_e})=>{const{options:st}=_e.useState(),ht=_e.state.panelRef.resolve(),Te=m.jh.getData(ht),{data:we}=on(Te,st.withTransforms).useState(),Ue=m.jh.getTimeRange(ht);return g.createElement(mt.q,{isLoading:we?.state===mn.Gu.Loading,data:we?.series,options:st,hasTransformations:Qt(Te),timeZone:Ue.getTimeZone(),panelPluginId:ht.state.pluginId,dataName:ht.state.title,fieldConfig:ht.state.fieldConfig,onOptionsChange:_e.onOptionsChange})}}}function Qt(it){return it instanceof m.Es?it.state.transformations.length>0:!1}function on(it,_e){return!_e&&it instanceof m.Es&&it.state.$data?it.state.$data:it}var pn=e(18803),fn=e(26323),zn=e(77938),aa=e(6204),Zn=e(89681);class jn extends m.Bs{constructor(_e){super({..._e,source:"panel-json",jsonText:ga("panel-json",_e.panelRef.resolve())}),this.onChangeSource=st=>{this.setState({source:st.value,jsonText:ga(st.value,this.state.panelRef.resolve())})},this.onApplyChange=()=>{const st=this.state.panelRef.resolve(),ht=(0,Oe.YQ)(st),Te=JSON.parse(this.state.jsonText),we=new d.a(Te),Ue=(0,Ye.tt)(we),Ge=m.Go.cloneSceneObjectState(Ue.state);if(!(st.parent instanceof fe.U)){console.error("Cannot update state of panel",st,Ue);return}this.state.onClose(),ht.state.isEditing||ht.onEnterEditMode(),st.parent.setState(Ge),(0,aa.B9)(Mt.q.JSON,"apply",{panel_type_changed:st.state.pluginId!==we.type,panel_id_changed:(0,Oe.Cs)(st)!==we.id,panel_grid_pos_changed:Za(st.parent.state,Ge),panel_targets_changed:ms((0,Oe.un)(st),(0,Oe.un)(Ge.$data))})},this.onCodeEditorBlur=st=>{this.setState({jsonText:st})}}getTabLabel(){return(0,Kt.t)("dashboard.inspect.json-tab","JSON")}getTabValue(){return Mt.q.JSON}getOptions(){const _e=this.state.panelRef.resolve(),st=_e.state.$data??_e.parent?.state.$data,ht=[{label:(0,Kt.t)("dashboard.inspect-json.panel-json-label","Panel JSON"),description:(0,Kt.t)("dashboard.inspect-json.panel-json-description","The model saved in the dashboard JSON that configures how everything works."),value:"panel-json"}];return st&&(ht.push({label:(0,Kt.t)("dashboard.inspect-json.panel-data-label","Panel data"),description:(0,Kt.t)("dashboard.inspect-json.panel-data-description","The raw model passed to the panel visualization"),value:"panel-data"}),ht.push({label:(0,Kt.t)("dashboard.inspect-json.dataframe-label","DataFrame JSON (from Query)"),description:(0,Kt.t)("dashboard.inspect-json.dataframe-description","Raw data without transformations and field config applied. "),value:"data-frames"})),ht}isEditable(){if(this.state.source!=="panel-json")return!1;const _e=this.state.panelRef.resolve();return _e.parent instanceof hn.F||_e.parent instanceof fe.U&&_e.parent.isRepeated()?!1:(0,Oe.YQ)(_e).state.meta.canEdit}static{this.Component=({model:_e})=>{const{source:st,jsonText:ht}=_e.useState(),Te=(0,Et.of)(fn.A),we=_e.getOptions();return g.createElement("div",{className:Te.wrap},g.createElement("div",{className:Te.toolbar,"aria-label":S.Tp.components.PanelInspector.Json.content},g.createElement(R.D,{label:(0,Kt.t)("dashboard.inspect-json.select-source","Select source"),className:"flex-grow-1"},g.createElement(en.l6,{inputId:"select-source-dropdown",options:we,value:we.find(Ue=>Ue.value===st)??we[0].value,onChange:_e.onChangeSource})),_e.isEditable()&&g.createElement(p.$n,{className:Te.toolbarItem,onClick:_e.onApplyChange},"Apply")),g.createElement("div",{className:Te.content},g.createElement(Se.Ay,{disableWidth:!0},({height:Ue})=>g.createElement(We.B,{width:"100%",height:Ue,language:"json",showLineNumbers:!0,showMiniMap:ht.length>100,value:ht,readOnly:!_e.isEditable(),onBlur:_e.onCodeEditorBlur}))))}}}function ga(it,_e){let st={};switch(it){case"panel-json":{(0,aa.B9)(Mt.q.JSON,"panelData");const ht=_e.parent instanceof hn.F,Te=ht?_e.parent.parent:_e.parent;if(ht){st=Ra(_e);break}if(_e.parent instanceof Zn.j){st=_e.parent.getPanelSaveModel();break}Te instanceof fe.U&&(st=(0,Le.ZB)(Te));break}case"panel-data":{(0,aa.B9)(Mt.q.JSON,"panelJSON");const ht=m.jh.getData(_e);ht.state.data&&(st=_e.applyFieldConfig(ht.state.data));break}case"data-frames":{(0,aa.B9)(Mt.q.JSON,"dataFrame");const ht=m.jh.getData(_e);ht.state.data&&(ht instanceof m.Es&&ht.state.$data?.state.data?st=(0,pn.B6)(ht.state.$data.state.data):st=(0,pn.B6)(ht.state.data))}}return(0,zn.p)(st)}function Ra(it){if(!(it.parent instanceof hn.F))throw"Panel not child of LibraryVizPanel";if(!(it.parent.parent instanceof fe.U))throw"LibraryPanel not child of DashboardGridItem";const _e=it.parent.parent,st={x:_e.state.x||0,y:_e.state.y||0,h:_e.state.height||0,w:_e.state.width||0},ht=_a(it),Te=(0,Le.Z6)(it,st,!1,_e);return{libraryPanel:{...ht},...Te}}function _a(it){if(!(it.parent instanceof hn.F))throw new Error("Panel not a child of LibraryVizPanel");if(!it.parent.state._loadedPanel)throw new Error("Library panel not loaded");return it.parent.state._loadedPanel}function Za(it,_e){return it.x!==_e.x||it.y!==_e.y||it.width!==_e.width||it.height!==_e.height}function ms(it,_e){return it===void 0||_e===void 0?!1:!(0,na.isEqual)(it.state.queries,_e.state.queries)}class rs extends m.Bs{getTabLabel(){return(0,Kt.t)("dashboard.inspect.meta-tab","Meta data")}getTabValue(){return Mt.q.Meta}static{this.Component=({model:_e})=>{const{panelRef:st,dataSource:ht}=_e.state,Te=m.jh.getData(st.resolve()),we=ht.components?.MetadataInspector;return!Te.state.data||!we?null:g.createElement(we,{datasource:ht,data:Te.state.data.series})}}}var Ja=e(90820);class Ns extends m.Bs{constructor(){super(...arguments),this.onRefreshQuery=()=>{const _e=(0,Oe.un)(this.state.panelRef.resolve());_e&&_e.runQueries()}}getTabLabel(){return(0,Kt.t)("dashboard.inspect.query-tab","Query")}getTabValue(){return Mt.q.Query}static{this.Component=({model:_e})=>{const st=m.jh.getData(_e.state.panelRef.resolve()).useState();return st.data?g.createElement(Ja.e,{data:st.data,onRefreshQuery:_e.onRefreshQuery}):null}}}var ls=e(32067);class cs extends m.Bs{getTabLabel(){return(0,Kt.t)("dashboard.inspect.stats-tab","Stats")}getTabValue(){return Mt.q.Stats}static{this.Component=({model:_e})=>{const st=m.jh.getData(_e.state.panelRef.resolve()).useState(),ht=m.jh.getTimeRange(_e.state.panelRef.resolve());return st.data?g.createElement(ls.N,{data:st.data,timeZone:ht.getTimeZone()}):null}}}class ds extends m.Bs{constructor(_e){super(_e),this.onClose=()=>{const st=(0,Oe.YQ)(this);o.Ny.push((0,nt.uZ)({uid:st.state.uid,slug:st.state.meta.slug,currentQueryParams:o.Ny.getLocation().search,updateQuery:{inspect:null,inspectTab:null}}))},this.addActivationHandler(()=>this._activationHandler())}static{this.Component=ps}_activationHandler(){this.buildTabs(0)}async buildTabs(_e){const st=this.state.panelRef,ht=st?.resolve()?.getPlugin(),Te=[];if(ht||(_e<2e3?setTimeout(()=>this.buildTabs(_e+100),100):this.setState({pluginNotLoaded:!0})),st){if((0,ft.$)(ht)){const we=m.jh.getData(st.resolve());Te.push(new pt({panelRef:st})),Te.push(new cs({panelRef:st})),Te.push(new Ns({panelRef:st}));const Ue=await(0,Pn.BN)(we.state.data);Ue&&Te.push(new rs({panelRef:st,dataSource:Ue}))}Te.push(new jn({panelRef:st,onClose:this.onClose}))}this.setState({tabs:Te})}getDrawerTitle(){const _e=this.state.panelRef?.resolve();return _e?m.jh.interpolate(_e,`Inspect: ${_e.state.title}`):"Inspect panel"}}function ps({model:it}){const{tabs:_e,pluginNotLoaded:st,panelRef:ht}=it.useState(),Te=(0,rt.zy)(),we=new URLSearchParams(Te.search);if(!_e)return null;const Ue=we.get("inspectTab"),Ge=_e.find(vt=>vt.getTabValue()===Ue)??_e[0],ct=ht.resolve();return Ue===Mt.q.Help?g.createElement(gn,{panel:ct,onClose:it.onClose}):g.createElement(C._,{title:it.getDrawerTitle(),onClose:it.onClose,size:"md",tabs:g.createElement(b.U,null,_e.map(vt=>g.createElement(P.o,{key:vt.state.key,label:vt.getTabLabel(),active:vt===Ge,href:t.I.getUrlForPartial(Te,{inspectTab:vt.getTabValue()})})))},st&&g.createElement(x.F,{title:"Panel plugin not loaded"},"Make sure the panel you want to inspect is visible and has been displayed before opening inspect."),Ge&&Ge.Component&&g.createElement(Ge.Component,{model:Ge}))}var Vr=e(19293),ur=e(10096),ks=e(22391),ws=e(19347),Yr=e(38477);class Os{constructor(_e){this._scene=_e}getKeys(){return["editIndex"]}getUrlState(){const _e=this._scene.state;return{editIndex:_e.editIndex!==void 0?String(_e.editIndex):void 0}}updateFromUrl(_e){let st={};typeof _e.editIndex=="string"?st={editIndex:Number(_e.editIndex)}:st={editIndex:void 0},Object.keys(st).length>0&&this._scene.setState(st)}}var Es=e(16817),us=e(84167),tr=e(77268),Ts=e(82241),Jr=e(51612),Bo=e(46502);const nr="New annotation",io=({annotation:it,editIndex:_e,panels:st,onUpdate:ht,onBackToList:Te,onDelete:we})=>{const Ue=(0,Et.of)(Eo),Ge=(0,g.useMemo)(()=>it.filter?it.filter.exclude?2:1:0,[it.filter]),{value:ct}=(0,Es.A)(()=>(0,ws.l)().get(it.datasource),[it.datasource]),vt=(0,ws.l)().getInstanceSettings(it.datasource),At=Gn=>{ht({...it,name:Gn.currentTarget.value},_e)},jt=Gn=>{const Yn=(0,ks.p$)(Gn);it.datasource?.type!==Yn.type?ht({datasource:Yn,builtIn:it.builtIn,enable:it.enable,iconColor:it.iconColor,name:it.name,hide:it.hide,filter:it.filter,mappings:it.mappings,type:it.type},_e):ht({...it,datasource:Yn},_e)},qt=Gn=>{const Yn=Gn.currentTarget;ht({...it,[Yn.name]:Yn.type==="checkbox"?Yn.checked:Yn.value},_e)},an=Gn=>{ht({...it,iconColor:Gn},_e)},xn=Gn=>{let Yn=Gn.value===0?void 0:{exclude:Gn.value===2,ids:it.filter?.ids??[]};ht({...it,filter:Yn},_e)},Un=Gn=>{if(!Array.isArray(Gn))return;const Yn={exclude:Ge===2,ids:[]};Gn.forEach(Ma=>Ma.value&&Yn.ids.push(Ma.value)),ht({...it,filter:Yn},_e)},Cn=()=>{we(_e),Te()},Ln=it.name===nr,la=(Gn,Yn)=>Gn.label&&Yn.label?Gn.label.toLowerCase().localeCompare(Yn.label.toLowerCase()):-1,Xn=(0,g.useMemo)(()=>st.filter(Gn=>s.$.panels[Gn.state.pluginId]).map(Gn=>({value:(0,Oe.Cs)(Gn),label:Gn.state.title??`Panel ${(0,Oe.Cs)(Gn)}`,description:Gn.state.description,imgUrl:s.$.panels[Gn.state.pluginId].info.logos.small})).sort(la)??[],[st]);return g.createElement("div",null,g.createElement(us.n,{className:Ue.settingsForm},g.createElement(R.D,{label:"Name"},g.createElement(B.p,{"data-testid":S.Tp.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Ln,value:it.name,onChange:At})),g.createElement(R.D,{label:"Data source",htmlFor:"data-source-picker"},g.createElement(Jr.s,{annotations:!0,variables:!0,current:it.datasource,onChange:jt})),g.createElement(R.D,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},g.createElement(re.S,{name:"enable",id:"enable",value:it.enable,onChange:qt,"data-testid":S.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.enable})),g.createElement(R.D,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},g.createElement(re.S,{name:"hide",id:"hide",value:it.hide,onChange:qt,"data-testid":S.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.hide})),g.createElement(R.D,{label:"Color",description:"Color to use for the annotation event markers"},g.createElement(Xt.Gy,null,g.createElement(tr.a,{value:it?.iconColor,onChange:an}))),g.createElement(R.D,{label:"Show in","data-testid":S.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},g.createElement(g.Fragment,null,g.createElement(en.l6,{options:$o,value:Ge,onChange:xn,"data-testid":S.Tp.components.Annotations.annotationsTypeInput}),Ge!==0&&g.createElement(en.KF,{options:Xn,value:Xn.filter(Gn=>it.filter?.ids.includes(Gn.value)),onChange:Un,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:Ue.select,"data-testid":S.Tp.components.Annotations.annotationsChoosePanelInput})))),g.createElement(us.n,null,g.createElement("h3",{className:"page-heading"},"Query"),ct?.annotations&&vt&&g.createElement(Ts.A,{datasource:ct,datasourceInstanceSettings:vt,annotation:it,onChange:Gn=>ht(Gn,_e)}),ct&&!ct.annotations&&g.createElement(Bo.F,{datasource:ct,annotation:it,onChange:Gn=>ht(Gn,_e)})),g.createElement(A.B,null,!it.builtIn&&g.createElement(p.$n,{variant:"destructive",onClick:Cn,"data-testid":S.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.delete},"Delete"),g.createElement(p.$n,{variant:"secondary",onClick:Te,"data-testid":S.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.apply},"Back to list")))},Eo=it=>({settingsForm:(0,ve.css)({maxWidth:it.spacing(60),marginBottom:it.spacing(2)}),select:(0,ve.css)({marginTop:"8px"})});var Ko=(it=>(it[it.AllPanels=0]="AllPanels",it[it.IncludePanels=1]="IncludePanels",it[it.ExcludePanels=2]="ExcludePanels",it))(Ko||{});const $o=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var br=e(29158),_r=e(91605),lo=e(7521),Vo=e(46991);const co="Add annotation query",Xr=({annotations:it,onNew:_e,onEdit:st,onMove:ht,onDelete:Te})=>{const we=(0,Et.of)(Zr),Ue=it.length===0||it.length===1&&it[0].builtIn,Ge=vt=>vt.enable===!1?g.createElement("em",{className:"muted"},"(Disabled) \xA0 ",vt.name):vt.builtIn?g.createElement("em",{className:"muted"},vt.name," \xA0 (Built-in)"):g.createElement(g.Fragment,null,vt.name),ct=(0,ws.l)();return g.createElement(Xt.gW,null,it.length>0&&g.createElement("div",{className:we.table},g.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},g.createElement("thead",null,g.createElement("tr",null,g.createElement("th",null,"Query name"),g.createElement("th",null,"Data source"),g.createElement("th",{colSpan:3}))),g.createElement("tbody",{"data-testid":S.Tp.pages.Dashboard.Settings.Annotations.List.annotations},it.map((vt,At)=>g.createElement("tr",{key:`${vt.name}-${At}`},vt.builtIn?g.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>st(At)},g.createElement(p.$n,{size:"sm",fill:"text",variant:"secondary"},Ge(vt))):g.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>st(At)},g.createElement(p.$n,{size:"sm",fill:"text",variant:"secondary"},Ge(vt))),g.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>st(At)},ct.getInstanceSettings(vt.datasource)?.name||vt.datasource?.uid),g.createElement("td",{role:"gridcell",style:{width:"1%"}},At!==0&&g.createElement(br.K,{name:"arrow-up",onClick:()=>ht(At,zr.UP),tooltip:"Move up"})),g.createElement("td",{role:"gridcell",style:{width:"1%"}},it.length>1&&At!==it.length-1?g.createElement(br.K,{name:"arrow-down",onClick:()=>ht(At,zr.DOWN),tooltip:"Move down"}):null),g.createElement("td",{role:"gridcell",style:{width:"1%"}},!vt.builtIn&&g.createElement(_r.e,{size:"sm",onConfirm:()=>Te(At),"aria-label":`Delete query with title "${vt.name}"`}))))))),Ue&&g.createElement(lo.A,{onClick:_e,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:co,infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!Ue&&g.createElement(Vo.d,{"data-testid":S.Tp.pages.Dashboard.Settings.Annotations.List.addAnnotationCTAV2,onClick:_e},"New query"))},Zr=()=>({table:(0,ve.css)({width:"100%",overflowX:"auto"})});var zr=(it=>(it[it.UP=-1]="UP",it[it.DOWN=1]="DOWN",it))(zr||{});class yo extends m.Bs{constructor(){super(...arguments),this._urlSync=new Os(this),this.onNew=()=>{const _e={name:nr,enable:!0,datasource:(0,ks.p$)((0,ws.l)().getInstanceSettings(null)),iconColor:"red"},st=new Yr.g({query:_e,name:_e.name,isEnabled:!!_e.enable,isHidden:!!_e.hide}),ht=Ze.b4.getDataLayers(this._dashboard);ht.addAnnotationLayer(st),this.setState({editIndex:ht.state.annotationLayers.length-1})},this.onEdit=_e=>{this.setState({editIndex:_e})},this.onBackToList=()=>{this.setState({editIndex:void 0})},this.onMove=(_e,st)=>{const ht=Ze.b4.getDataLayers(this._dashboard),Te=[...ht.state.annotationLayers],[we]=Te.splice(_e,1);Te.splice(_e+st,0,we),ht.setState({annotationLayers:Te})},this.onDelete=_e=>{const st=Ze.b4.getDataLayers(this._dashboard),ht=[...st.state.annotationLayers];ht.splice(_e,1),st.setState({annotationLayers:ht})},this.onUpdate=(_e,st)=>{const ht=this.getDataLayer(st);ht.setState({name:_e.name,isEnabled:!!_e.enable,isHidden:!!_e.hide,query:_e}),ht.runLayer()}}static{this.Component=qr}getUrlKey(){return"annotations"}get _dashboard(){return(0,Oe.YQ)(this)}getDataLayer(_e){const ht=Ze.b4.getDataLayers(this._dashboard).state.annotationLayers[_e];if(!(ht instanceof m.tV.g))throw new Error("AnnotationsDataLayer not found at index "+_e);return ht}getDashboard(){return this._dashboard}}function qr({model:it}){const _e=it.getDashboard(),{annotationLayers:st}=Ze.b4.getDataLayers(_e).useState(),{navModel:ht,pageNav:Te}=sr(_e,it.getUrlKey()),{editIndex:we}=it.useState(),Ue=Ze.b4.getVizPanels(_e),Ge=(0,Ce.O)(st);return we!=null&&we<st.length?g.createElement(Pr,{annotationLayer:it.getDataLayer(we),pageNav:Te,panels:Ue,editIndex:we,navModel:ht,dashboard:_e,onUpdate:it.onUpdate,onBackToList:it.onBackToList,onDelete:it.onDelete}):g.createElement(Ut.Y,{navModel:ht,pageNav:Te,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:_e}),g.createElement(Xr,{annotations:Ge,onNew:it.onNew,onEdit:it.onEdit,onDelete:it.onDelete,onMove:it.onMove}))}function Pr({annotationLayer:it,pageNav:_e,navModel:st,panels:ht,editIndex:Te,dashboard:we,onUpdate:Ue,onBackToList:Ge,onDelete:ct}){const vt=_e.children.find(an=>an.active);vt.parentItem=_e;const{name:At,query:jt}=it.useState(),qt={text:At,parentItem:vt};return g.createElement(Ut.Y,{navModel:st,pageNav:qt,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:we}),g.createElement(io,{annotation:jt,editIndex:Te,panels:ht,onUpdate:Ue,onBackToList:Ge,onDelete:ct}))}var uo=e(14588),Ws=e(65857),xt=e(6199),wt=e(4588);class vn extends m.Bs{constructor(){super(...arguments),this._urlSync=new Os(this),this.onNewLink=()=>{this.links=[...this.links,wt.q],this.setState({editIndex:this.links.length-1})},this.onDelete=_e=>{this.links=[...this.links.slice(0,_e),...this.links.slice(_e+1)],this.setState({editIndex:void 0})},this.onDuplicate=_e=>{this.links=[...this.links,{..._e}]},this.onOrderChange=(_e,st)=>{this.links=uo.moveItemImmutably(this.links,_e,_e+st)},this.onEdit=_e=>{this.setState({editIndex:_e})},this.onUpdateLink=_e=>{const st=this.state.editIndex;st!==void 0&&(this.links=[...this.links.slice(0,st),_e,...this.links.slice(st+1)])},this.onGoBack=()=>{this.setState({editIndex:void 0})}}static{this.Component=un}getUrlKey(){return"links"}get dashboard(){return(0,Oe.YQ)(this)}get links(){return this.dashboard.state.links}set links(_e){this.dashboard.setState({links:_e})}}function un({model:it}){const{editIndex:_e}=it.useState(),st=(0,Oe.YQ)(it),{links:ht}=st.useState(),{navModel:Te,pageNav:we}=sr(st,it.getUrlKey()),Ue=_e!==void 0?ht[_e]:void 0;return Ue?g.createElement(Mn,{pageNav:we,navModel:Te,link:Ue,dashboard:st,onChange:it.onUpdateLink,onGoBack:it.onGoBack}):g.createElement(Ut.Y,{navModel:Te,pageNav:we,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:st}),g.createElement(xt.X,{links:ht,onNew:it.onNewLink,onEdit:it.onEdit,onDelete:it.onDelete,onDuplicate:it.onDuplicate,onOrderChange:it.onOrderChange}))}function Mn({pageNav:it,link:_e,navModel:st,dashboard:ht,onChange:Te,onGoBack:we}){const Ue=it.children.find(ct=>ct.active);Ue.parentItem=it;const Ge={text:"Edit link",parentItem:Ue};return g.createElement(Ut.Y,{navModel:st,pageNav:Ge,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:ht}),g.createElement(Ws.d,{link:_e,onUpdate:Te,onGoBack:we}))}var _n=e(79924),Jn=e(94354),pa=e(57418),Da=e(75590),Ha=e(81394),es=e(27966),Ba=e(77431),Fa=e(42941),Is=e(96374),Hs=e(37390);function Bs({dashboard:it}){const[_e,st]=(0,Fa.A)(!1);return g.createElement(g.Fragment,null,g.createElement(p.$n,{variant:"destructive",onClick:st,"aria-label":"Dashboard settings page delete dashboard button"},g.createElement(Kt.x6,{i18nKey:"dashboard-settings.dashboard-delete-button"},"Delete dashboard")),_e&&g.createElement(ar,{dashboard:it,onClose:st}))}function ar({dashboard:it,onClose:_e}){const[,st]=(0,le.A)(async()=>{_e(),await it.deleteDashboard()},[it,_e]);return it.state.meta.provisioned?g.createElement(eo,{dashboard:it,onClose:_e}):g.createElement(Is.u,{isOpen:!0,body:g.createElement(g.Fragment,null,g.createElement("p",null,"Do you want to delete this dashboard?"),g.createElement("p",null,it.state.title)),onConfirm:st,onDismiss:_e,title:"Delete",icon:"trash-alt",confirmText:"Delete"})}function eo({dashboard:it,onClose:_e}){return g.createElement(Hs.a,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:_e},g.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),g.createElement("p",null,g.createElement("i",null,"See"," ",g.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),g.createElement("br",null),"File path: ",it.state.meta.provisionedExternalId),g.createElement(Hs.a.ButtonRow,null,g.createElement(p.$n,{variant:"primary",onClick:_e},"OK")))}const Rs=[{label:"Editable",value:!0},{label:"Read-only",value:!1}],Do=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];class Nr extends m.Bs{constructor(){super(...arguments),this.onTitleChange=_e=>{this._dashboard.setState({title:_e})},this.onDescriptionChange=_e=>{this._dashboard.setState({description:_e})},this.onTagsChange=_e=>{this._dashboard.setState({tags:_e})},this.onFolderChange=async(_e,st)=>{const ht={...this._dashboard.state.meta,folderUid:_e||this._dashboard.state.meta.folderUid,folderTitle:st||this._dashboard.state.meta.folderTitle};ht.folderUid&&await(0,Ba.Q)(ht.folderUid),this._dashboard.setState({meta:ht})},this.onEditableChange=_e=>{this._dashboard.setState({editable:_e})},this.onTimeZoneChange=_e=>{this.getTimeRange().setState({timeZone:_e})},this.onWeekStartChange=_e=>{this.getTimeRange().setState({weekStart:_e})},this.onRefreshIntervalChange=_e=>{this.getRefreshPicker()?.setState({intervals:_e})},this.onNowDelayChange=_e=>{this.getTimeRange()?.setState({UNSAFE_nowDelay:_e})},this.onHideTimePickerChange=_e=>{this.getDashboardControls()?.setState({hideTimeControls:_e})},this.onLiveNowChange=_e=>{try{const st=this.getLiveNowTimer();_e?st.enable():st.disable()}catch(st){console.error(st)}},this.onTooltipChange=_e=>{this.getCursorSync()?.setState({sync:_e})},this.onDeleteDashboard=()=>{}}get _dashboard(){return(0,Oe.YQ)(this)}getUrlKey(){return"settings"}getDashboard(){return this._dashboard}getTimeRange(){return m.jh.getTimeRange(this._dashboard)}getRefreshPicker(){return this.getDashboardControls().state.refreshPicker}getCursorSync(){return Ze.b4.getCursorSync(this._dashboard)}getLiveNowTimer(){const _e=m.jh.findObject(this._dashboard,st=>st instanceof m.Gg.en);if(_e instanceof m.Gg.en)return _e;throw new Error("LiveNowTimer could not be found")}getDashboardControls(){return this._dashboard.state.controls}static{this.Component=({model:_e})=>{const st=_e.getDashboard(),{navModel:ht,pageNav:Te}=sr(st,_e.getUrlKey()),{title:we,description:Ue,tags:Ge,meta:ct,editable:vt}=st.useState(),{sync:At}=_e.getCursorSync()?.useState()||{},{timeZone:jt,weekStart:qt,UNSAFE_nowDelay:an}=_e.getTimeRange().useState(),{intervals:xn}=_e.getRefreshPicker().useState(),{hideTimeControls:Un}=_e.getDashboardControls().useState(),{enabled:Cn}=_e.getLiveNowTimer().useState();return g.createElement(Ut.Y,{navModel:ht,pageNav:Te,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:st}),g.createElement("div",{style:{maxWidth:"600px"}},g.createElement(K.a,{marginBottom:5},g.createElement(R.D,{label:g.createElement(A.B,{justifyContent:"space-between"},g.createElement(w.J,{htmlFor:"title-input"},g.createElement(Kt.x6,{i18nKey:"dashboard-settings.general.title-label"},"Title")),s.$.featureToggles.dashgpt&&g.createElement(es.Z,{onGenerate:Ln=>_e.onTitleChange(Ln)}))},g.createElement(B.p,{id:"title-input",name:"title",value:we,onChange:Ln=>_e.onTitleChange(Ln.target.value)})),g.createElement(R.D,{label:g.createElement(A.B,{justifyContent:"space-between"},g.createElement(w.J,{htmlFor:"description-input"},(0,Kt.t)("dashboard-settings.general.description-label","Description")),s.$.featureToggles.dashgpt&&g.createElement(Ha.V,{onGenerate:Ln=>_e.onDescriptionChange(Ln)}))},g.createElement(U.f,{id:"description-input",name:"description",value:Ue,onChange:Ln=>_e.onDescriptionChange(Ln.target.value)})),g.createElement(R.D,{label:(0,Kt.t)("dashboard-settings.general.tags-label","Tags")},g.createElement(_n.u,{id:"tags-input",tags:Ge,onChange:_e.onTagsChange,width:40})),g.createElement(R.D,{label:(0,Kt.t)("dashboard-settings.general.folder-label","Folder")},g.createElement(L.d,{value:ct.folderUid,onChange:_e.onFolderChange,initialTitle:ct.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,skipInitialLoad:!0})),g.createElement(R.D,{label:(0,Kt.t)("dashboard-settings.general.editable-label","Editable"),description:(0,Kt.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},g.createElement(Jn.z,{value:vt,options:Rs,onChange:_e.onEditableChange}))),g.createElement(Da.p,{onTimeZoneChange:_e.onTimeZoneChange,onWeekStartChange:_e.onWeekStartChange,onRefreshIntervalChange:_e.onRefreshIntervalChange,onNowDelayChange:_e.onNowDelayChange,onHideTimePickerChange:_e.onHideTimePickerChange,onLiveNowChange:_e.onLiveNowChange,refreshIntervals:xn,timePickerHidden:Un,nowDelay:an||"",liveNow:Cn,timezone:jt||"",weekStart:qt||""}),g.createElement(pa.M,{label:(0,Kt.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},g.createElement(R.D,{label:(0,Kt.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,Kt.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},g.createElement(Jn.z,{onChange:_e.onTooltipChange,options:Do,value:At}))),g.createElement(K.a,{marginTop:3},ct.canDelete&&g.createElement(Bs,{dashboard:st}))))}}}class ja extends m.Bs{constructor(_e){super({..._e,jsonText:""}),this.onCodeEditorBlur=st=>{this.setState({jsonText:st})},this.onSaveSuccess=st=>{const ht=JSON.parse(this.state.jsonText),Te=this.getDashboard();ht.version=st.version;const we={dashboard:ht,meta:Te.state.meta},Ue=(0,Ye.wM)(we),Ge=m.Go.cloneSceneObjectState(Ue.state);Te.pauseTrackingChanges(),Te.setInitialSaveModel(we.dashboard),Te.setState(Ge),this.setState({jsonText:this.getJsonText()})},this.addActivationHandler(()=>this.setState({jsonText:this.getJsonText()}))}getUrlKey(){return"json-model"}getDashboard(){return(0,Oe.YQ)(this)}getSaveModel(){const _e=this.getDashboard();return(0,Le.Uy)(_e)}getJsonText(){const _e=this.getSaveModel();return(0,zn.p)(_e)}static{this.Component=({model:_e})=>{const{state:st,onSaveDashboard:ht}=te(!1),[Te,we]=(0,g.useState)(!1),Ue=_e.getDashboard(),{navModel:Ge,pageNav:ct}=sr(Ue,_e.getUrlKey()),vt=Ue.useState().meta.canSave,{jsonText:At}=_e.useState(),jt=async Cn=>{const Ln=await ht(Ue,JSON.parse(_e.state.jsonText),{folderUid:Ue.state.meta.folderUid,overwrite:Cn});we(!0),Ln.status==="success"?(_e.onSaveSuccess(Ln),we(!1)):we(!0)},qt=Cn=>g.createElement(p.$n,{type:"submit",onClick:()=>{jt(Cn)},variant:Cn?"destructive":"primary"},Cn?"Save and overwrite":g.createElement(Kt.x6,{i18nKey:"dashboard-settings.json-editor.save-button"},"Save changes")),an=g.createElement(p.$n,{variant:"secondary",onClick:()=>we(!1),fill:"outline"},"Cancel"),xn=(0,Et.of)(bs);function Un(Cn){if(Cn&&Te){if(z(Cn))return g.createElement(x.F,{title:"Someone else has updated this dashboard",severity:"error"},g.createElement("p",null,"Would you still like to save this dashboard?"),g.createElement(K.a,{paddingTop:2},g.createElement(A.B,{alignItems:"center"},an,qt(!0))));if(J(Cn))return g.createElement(H,{saveButton:qt,cancelButton:an});if(G(Cn))return g.createElement(x.F,{title:"Plugin dashboard",severity:"error"},g.createElement("p",null,"Your changes will be lost when you update the plugin. Use ",g.createElement("strong",null,"Save As")," to create custom version."),g.createElement(K.a,{paddingTop:2},g.createElement(A.B,{alignItems:"center"},qt(!0))))}return g.createElement(g.Fragment,null,Cn&&Te&&g.createElement(x.F,{title:"Failed to save dashboard",severity:"error"},g.createElement("p",null,Cn.message)),g.createElement(A.B,{alignItems:"center"},qt(!1)))}return g.createElement(Ut.Y,{navModel:Ge,pageNav:ct,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:Ue}),g.createElement("div",{className:xn.wrapper},g.createElement(Kt.x6,{i18nKey:"dashboard-settings.json-editor.subtitle"},"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."),g.createElement(We.B,{width:"100%",value:At,language:"json",showLineNumbers:!0,showMiniMap:!0,containerStyles:xn.codeEditor,onBlur:_e.onCodeEditorBlur}),vt&&g.createElement(K.a,{paddingTop:2},Un(st.error))))}}}const bs=it=>({wrapper:(0,ve.css)({display:"flex",height:"100%",flexDirection:"column",gap:it.spacing(2)}),codeEditor:(0,ve.css)({flexGrow:1})});var wr=e(5108);class ts extends m.Bs{static{this.Component=to}get _dashboard(){return(0,Oe.YQ)(this)}getUrlKey(){return"permissions"}getDashboard(){return this._dashboard}}function to({model:it}){const _e=it.getDashboard(),{uid:st}=_e.useState(),{navModel:ht,pageNav:Te}=sr(_e,it.getUrlKey()),we=ur.TP.hasPermission(j.AccessControlAction.DashboardsPermissionsWrite);return g.createElement(Ut.Y,{navModel:ht,pageNav:Te,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:_e}),g.createElement(wr.x,{resource:"dashboards",resourceId:st??"",canSetPermissions:we}))}var mo=e(75505),_o=e(79422),Hi=e(71678),ns=e(39558),ji=e(8964),Si=e(58975),Gi=e(85140),ii=e(14329),Xs=e(41820),li=e(85830),Mi=e(89458),Ks=e(17663);function xi({onChange:it,type:_e}){const st=(0,g.useMemo)(()=>(0,Ks.B$)(),[]),ht=(0,g.useMemo)(()=>st.find(Te=>Te.value===_e)??st[0],[st,_e]);return g.createElement(Mi.v,{name:"Select variable type",value:ht,options:st,onChange:it,testId:S.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}function Qi({variable:it,onTypeChange:_e,onGoBack:st,onDelete:ht,onValidateVariableName:Te}){const we=(0,Et.of)(kr),[Ue,Ge]=(0,g.useState)(null),{name:ct,type:vt,label:At,description:jt,hide:qt,key:an}=it.useState(),xn=(0,Ks.bZ)(vt)?(0,Ks.CD)(vt):void 0,[Un,Cn]=(0,le.A)(async()=>{await(0,mo.s)(it.validateAndUpdate())},[it]),Ln=Ia=>{Ia.value&&_e(Ia.value)},la=(0,g.useCallback)(Ia=>{const[,Xa]=Te(Ia.currentTarget.value,an);Ue!==Xa&&Ge(Xa)},[an,Ue,Te]),Xn=Ia=>{Ue||it.setState({name:Ia.currentTarget.value})},Gn=Ia=>it.setState({label:Ia.currentTarget.value}),Yn=Ia=>it.setState({description:Ia.currentTarget.value}),Ma=Ia=>it.setState({hide:Ia}),Ua=(0,Ks.n_)(it),ha=Ia=>()=>{(0,me.rR)("Delete variable"),ht(ct),Ia()};return g.createElement("form",{"aria-label":"Variable editor Form"},g.createElement(xi,{onChange:Ln,type:vt}),g.createElement(Si.Y,null,"General"),g.createElement(ii._,{name:"Name",description:"The name of the template variable. (Max. 50 characters)",placeholder:"Variable name",defaultValue:ct??"",onChange:la,onBlur:Xn,testId:S.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:li.M.MaxSize,required:!0,invalid:!!Ue,error:Ue}),g.createElement(ii._,{name:"Label",description:"Optional display name",placeholder:"Label name",defaultValue:At??"",onBlur:Gn,testId:S.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),g.createElement(Gi.Z,{name:"Description",defaultValue:jt??"",placeholder:"Descriptive text",onBlur:Yn,width:52}),g.createElement(ji.D,{onChange:Ma,hide:qt||_o.rw.hide,type:vt}),xn&&g.createElement(xn,{variable:it,onRunQuery:Cn}),Ua&&g.createElement(Xs.j,{options:it.getOptionsForSelect()}),g.createElement("div",{className:we.buttonContainer},g.createElement(A.B,{gap:2},g.createElement(Hi.$s,null,({showModal:Ia,hideModal:Xa})=>g.createElement(p.$n,{variant:"destructive",fill:"outline",onClick:()=>{Ia(Is.u,{title:"Delete variable",body:`Are you sure you want to delete: ${ct}?`,confirmText:"Delete variable",onConfirm:ha(Xa),onDismiss:Xa,isOpen:!0})}},"Delete")),g.createElement(p.$n,{variant:"secondary","data-testid":S.Tp.pages.Dashboard.Settings.Variables.Edit.General.applyButton,onClick:st},"Back to list"),Ua&&g.createElement(p.$n,{disabled:Un.loading,variant:"secondary","data-testid":S.Tp.pages.Dashboard.Settings.Variables.Edit.General.submitButton,onClick:Cn},Un.loading?g.createElement(ns._,{className:we.loadingPlaceHolder,text:"Running query..."}):"Run query"))))}const kr=it=>({buttonContainer:(0,ve.css)({marginTop:it.spacing(2)}),loadingPlaceHolder:(0,ve.css)({marginBottom:0})});var no=e(55244);function Zs({index:it,variable:_e,onEdit:st,onDuplicate:ht,onDelete:Te}){const we=(0,Et.$j)(),Ue=(0,Et.of)(bo),Ge=(0,Ks.Ao)(_e),ct=_e.state,vt=ct.name,[At,jt]=(0,g.useState)(!1),qt=xn=>()=>{jt(xn)},an=()=>{(0,me.rR)("Delete variable"),Te(vt)};return g.createElement(no.sx,{draggableId:JSON.stringify(vt),index:it},(xn,Un)=>g.createElement("tr",{ref:xn.innerRef,...xn.draggableProps,style:{userSelect:Un.isDragging?"none":"auto",background:Un.isDragging?we.colors.background.secondary:void 0,...xn.draggableProps.style}},g.createElement("td",{role:"gridcell",className:Ue.column},g.createElement(p.$n,{size:"xs",fill:"text",onClick:Cn=>{Cn.preventDefault(),st(vt)},className:Ue.nameLink,"data-testid":S.Tp.pages.Dashboard.Settings.Variables.List.tableRowNameFields(ct.name)},ct.name)),g.createElement("td",{role:"gridcell",className:Ue.definitionColumn,onClick:Cn=>{Cn.preventDefault(),st(vt)},"data-testid":S.Tp.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(ct.name)},Ge),g.createElement("td",{role:"gridcell",className:Ue.column},g.createElement("div",{className:Ue.icons},g.createElement(br.K,{onClick:Cn=>{Cn.preventDefault(),(0,me.rR)("Duplicate variable"),ht(vt)},name:"copy",tooltip:"Duplicate variable","data-testid":S.Tp.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(ct.name)}),g.createElement(br.K,{onClick:Cn=>{Cn.preventDefault(),jt(!0)},name:"trash-alt",tooltip:"Remove variable","data-testid":S.Tp.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(ct.name)}),g.createElement(Is.u,{isOpen:At,title:"Delete variable",body:`Are you sure you want to delete: ${ct.name}?`,confirmText:"Delete variable",onConfirm:an,onDismiss:qt(!1)}),g.createElement("div",{...xn.dragHandleProps,className:Ue.dragHandle},g.createElement(nn.I,{name:"draggabledots",size:"lg"}))))))}function bo(it){return{dragHandle:(0,ve.css)({cursor:"grab",marginLeft:it.spacing(1)}),column:(0,ve.css)({width:"1%"}),nameLink:(0,ve.css)({cursor:"pointer",color:it.colors.primary.text}),definitionColumn:(0,ve.css)({width:"100%",maxWidth:"200px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),iconPassed:(0,ve.css)({color:it.v1.palette.greenBase,marginRight:it.spacing(2)}),iconFailed:(0,ve.css)({color:it.v1.palette.orange,marginRight:it.spacing(2)}),icons:(0,ve.css)({display:"flex",gap:it.spacing(2),alignItems:"center"})}}function Po({variables:it,onChangeOrder:_e,onDelete:st,onDuplicate:ht,onAdd:Te,onEdit:we}){const Ue=(0,Et.of)(ci),Ge=ct=>{!ct.destination||!ct.source||((0,me.rR)("Variable drag and drop"),_e(ct.source.index,ct.destination.index))};return g.createElement("div",null,g.createElement("div",null,it.length===0&&g.createElement(ao,{onAdd:Te}),it.length>0&&g.createElement(A.B,{direction:"column",gap:3},g.createElement("div",{className:Ue.tableContainer},g.createElement("table",{className:"filter-table filter-table--hover","data-testid":S.Tp.pages.Dashboard.Settings.Variables.List.table,role:"grid"},g.createElement("thead",null,g.createElement("tr",null,g.createElement("th",null,"Variable"),g.createElement("th",null,"Definition"),g.createElement("th",{colSpan:5}))),g.createElement(no.JY,{onDragEnd:Ge},g.createElement(no.gL,{droppableId:"variables-list",direction:"vertical"},ct=>g.createElement("tbody",{ref:ct.innerRef,...ct.droppableProps},it.map((vt,At)=>{const jt=vt.state;return g.createElement(Zs,{index:At,key:`${jt.name}-${At}`,variable:vt,onDelete:st,onDuplicate:ht,onEdit:we})}),ct.placeholder))))),g.createElement(A.B,null,g.createElement(p.$n,{"data-testid":S.Tp.pages.Dashboard.Settings.Variables.List.newButton,onClick:Te,icon:"plus"},"New variable")))))}function ao({onAdd:it}){return g.createElement("div",null,g.createElement(lo.A,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:_e=>{_e.preventDefault(),it()}}))}const ci=()=>({tableContainer:(0,ve.css)({overflow:"scroll",width:"100%"})});class di extends m.Bs{constructor(){super(...arguments),this._urlSync=new Os(this),this.getVariableIndex=_e=>this.getVariables().findIndex(ht=>ht.state.name===_e),this.replaceEditVariable=_e=>{const st=this.state.editIndex??-1,{variables:ht}=this.getVariableSet().state;if(!ht[st]){console.error("Variable not found");return}const we=[...ht.slice(0,st),_e,...ht.slice(st+1)];this.getVariableSet().setState({variables:we})},this.onDelete=_e=>{const st=this.getVariableIndex(_e),{variables:ht}=this.getVariableSet().state;if(st===-1){console.error("Variable not found");return}const Te=[...ht.slice(0,st),...ht.slice(st+1)];this.getVariableSet().setState({variables:Te}),this.setState({editIndex:void 0})},this.onDuplicated=_e=>{const st=this.getVariableIndex(_e),ht=this.getVariableSet().state.variables;if(st===-1){console.error("Variable not found");return}const Te=ht[st];let we=0,Ue=`copy_of_${Te.state.name}`;for(;ht.some(vt=>vt.state.name===Ue);)we++,Ue=`copy_of_${Te.state.name}_${we}`;const Ge=Te.clone(Te.state);Ge.setState({name:Ue});const ct=[...ht.slice(0,st+1),Ge,...ht.slice(st+1)];this.getVariableSet().setState({variables:ct})},this.onOrderChanged=(_e,st)=>{const ht=this.getVariableSet().state.variables;if(!this.getVariableSet())return;if(_e<0||_e>=ht.length||st<0||st>=ht.length){console.error("Invalid index");return}const Te=[...ht],we=Te.splice(_e,1);Te.splice(st,0,we[0]),this.getVariableSet().setState({variables:Te})},this.onEdit=_e=>{const st=this.getVariableIndex(_e);if(st===-1){console.error("Variable not found");return}this.setState({editIndex:st})},this.onAdd=()=>{const _e=this.getVariables(),st=_e.length,ht=(0,Ks.kh)(_e);this.getVariableSet().setState({variables:[...this.getVariables(),ht]}),this.setState({editIndex:st})},this.onTypeChange=_e=>{const st=this.state.editIndex??-1,{variables:ht}=this.getVariableSet().state,Te=ht[st];if(!Te){console.error("Variable not found");return}const{name:we,label:Ue}=Te.state,Ge=(0,Ks.No)(_e,{name:we,label:Ue});this.replaceEditVariable(Ge)},this.onGoBack=()=>{this.setState({editIndex:void 0})},this.onValidateVariableName=(_e,st)=>{let ht=null;Ks.cH.test(_e)||(ht="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Ks.mJ.test(_e)||(ht="Only word characters are allowed in variable names");const Te=this.getVariableSet().getByName(_e)?.state;return Te&&Te.key!==st&&(ht="Variable with the same name already exists"),ht?[!0,ht]:[!1,null]}}static{this.Component=Oi}getUrlKey(){return"variables"}getDashboard(){return(0,Oe.YQ)(this)}getVariableSet(){return m.jh.getVariables(this.getDashboard())}getVariables(){return this.getVariableSet().state.variables}}function Oi({model:it}){const _e=it.getDashboard(),{navModel:st,pageNav:ht}=sr(_e,it.getUrlKey()),{onDelete:Te,onDuplicated:we,onOrderChanged:Ue,onEdit:Ge,onTypeChange:ct,onGoBack:vt,onAdd:At}=it,{variables:jt}=it.getVariableSet().useState(),{editIndex:qt}=it.useState();if(qt!==void 0&&jt[qt]){const an=jt[qt];if(an)return g.createElement(Yi,{variable:an,onTypeChange:ct,onGoBack:vt,pageNav:ht,navModel:st,dashboard:_e,onDelete:Te,onValidateVariableName:it.onValidateVariableName})}return g.createElement(Ut.Y,{navModel:st,pageNav:ht,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:_e}),g.createElement(Po,{variables:jt,onDelete:Te,onDuplicate:we,onChangeOrder:Ue,onAdd:At,onEdit:Ge}))}function Yi({variable:it,pageNav:_e,navModel:st,dashboard:ht,onTypeChange:Te,onGoBack:we,onDelete:Ue,onValidateVariableName:Ge}){const ct=_e.children.find(jt=>jt.active);ct.parentItem=_e;const{name:vt}=it.useState(),At={text:vt,parentItem:ct};return g.createElement(Ut.Y,{navModel:st,pageNav:At,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:ht}),g.createElement(Qi,{variable:it,onTypeChange:Te,onGoBack:we,onDelete:Ue,onValidateVariableName:Ge,key:it.state.key}))}const Ii=10;class Ai extends m.Bs{constructor(_e){super({..._e,versions:[],isLoading:!0,isAppending:!0,viewMode:"list",isNewLatest:!1,diffData:{lhs:"",rhs:""}}),this._limit=Ii,this._start=0,this.fetchVersions=(st=!1)=>{const ht=this._dashboard.state.uid;ht&&(this.setState({isAppending:st}),$e.wL.getHistoryList(ht,{limit:this._limit,start:this._start}).then(Te=>{this.setState({isLoading:!1,versions:[...this.state.versions??[],...this.decorateVersions(Te)]}),this._start+=this._limit}).catch(Te=>console.log(Te)).finally(()=>this.setState({isAppending:!1})))},this.getDiff=async()=>{const st=this.versions.filter(ct=>ct.checked),[ht,Te]=st,we=ht.version===this._dashboard.state.version;if(this.setState({isLoading:!0}),!this._dashboard.state.uid)return;const Ue=await $e.wL.getDashboardVersion(this._dashboard.state.uid,Te.version),Ge=await $e.wL.getDashboardVersion(this._dashboard.state.uid,ht.version);this.setState({baseInfo:Te,isLoading:!1,isNewLatest:we,newInfo:ht,viewMode:"compare",diffData:{lhs:Ue.data,rhs:Ge.data}})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:"",rhs:""},isNewLatest:!1,newInfo:void 0,versions:this.versions.map(st=>({...st,checked:!1})),viewMode:"list"})},this.onCheck=(st,ht)=>{this.setState({versions:this.versions.map(Te=>Te.id===ht?{...Te,checked:st.currentTarget.checked}:Te)})},this.addActivationHandler(()=>{this.fetchVersions()})}static{this.Component=Ji}get _dashboard(){return(0,Oe.YQ)(this)}get diffData(){return this.state.diffData??{lhs:"",rhs:""}}get versions(){return this.state.versions??[]}get limit(){return this._limit}get start(){return this._start}getUrlKey(){return"versions"}getDashboard(){return this._dashboard}getTimeRange(){return m.jh.getTimeRange(this._dashboard)}decorateVersions(_e){const st=this.getTimeRange().getTimeZone();return _e.map(ht=>({...ht,createdDateString:(0,se.LE)(ht.created,{timeZone:st}),ageString:(0,se.fq)(ht.created,{timeZone:st}),checked:!1}))}}function Ji({model:it}){const _e=it.getDashboard(),{isLoading:st,isAppending:ht,viewMode:Te,baseInfo:we,newInfo:Ue,isNewLatest:Ge}=it.useState(),{navModel:ct,pageNav:vt}=sr(_e,it.getUrlKey()),At=it.versions.filter(Cn=>Cn.checked).length===2,jt=it.versions.length>1,qt=it.versions.length>=it.limit,an=it.versions.find(Cn=>Cn.version===1),xn=g.createElement(g.Fragment,null,g.createElement($e.me,{onClick:it.reset,baseVersion:we?.version,newVersion:Ue?.version,isNewLatest:Ge}),st?g.createElement(ui,{msg:"Fetching changes\u2026"}):g.createElement($e.Cc,{newInfo:Ue,baseInfo:we,isNewLatest:Ge,diffData:it.diffData,onRestore:_e.onRestore})),Un=g.createElement(g.Fragment,null,st?g.createElement(ui,{msg:"Fetching history list\u2026"}):g.createElement($e.bS,{versions:it.versions,onCheck:it.onCheck,canCompare:At,onRestore:_e.onRestore}),ht&&g.createElement(ui,{msg:"Fetching more entries\u2026"}),jt&&g.createElement($e.rJ,{hasMore:qt,canCompare:At,getVersions:it.fetchVersions,getDiff:it.getDiff,isLastPage:!!an}));return g.createElement(Ut.Y,{navModel:ct,pageNav:vt,layout:ut.k.Standard},g.createElement(Wt.c,{dashboard:_e}),Te==="compare"?xn:Un)}const ui=({msg:it})=>g.createElement(Xt.Gy,null,g.createElement(dn.y,null),g.createElement("em",null,it));function sr(it,_e){const st=(0,rt.zy)(),ht=(0,j.useSelector)(Ge=>Ge.navIndex),Te=(0,c.tc)(ht,"dashboards/browse"),we=it.getPageNav(st,ht),Ue={text:"Settings",url:t.I.getUrlForPartial(st,{editview:"settings",editIndex:null}),children:[],parentItem:we};return it.state.meta.canEdit&&(Ue.children.push({text:(0,Kt.t)("dashboard-settings.general.title","General"),url:t.I.getUrlForPartial(st,{editview:"settings",editIndex:null}),active:_e==="settings"}),Ue.children.push({text:(0,Kt.t)("dashboard-settings.annotations.title","Annotations"),url:t.I.getUrlForPartial(st,{editview:"annotations",editIndex:null}),active:_e==="annotations"}),Ue.children.push({text:(0,Kt.t)("dashboard-settings.variables.title","Variables"),url:t.I.getUrlForPartial(st,{editview:"variables",editIndex:null}),active:_e==="variables"}),Ue.children.push({text:(0,Kt.t)("dashboard-settings.links.title","Links"),url:t.I.getUrlForPartial(st,{editview:"links",editIndex:null}),active:_e==="links"})),it.state.id&&it.state.meta.canSave&&Ue.children.push({text:(0,Kt.t)("dashboard-settings.versions.title","Versions"),url:t.I.getUrlForPartial(st,{editview:"versions",editIndex:null}),active:_e==="versions"}),it.state.id&&it.state.meta.canAdmin&&ur.TP.hasPermission(j.AccessControlAction.DashboardsPermissionsRead)&&Ue.children.push({text:(0,Kt.t)("dashboard-settings.permissions.title","Permissions"),url:t.I.getUrlForPartial(st,{editview:"permissions",editIndex:null}),active:_e==="permissions"}),Ue.children.push({text:(0,Kt.t)("dashboard-settings.json-editor.title","JSON Model"),url:t.I.getUrlForPartial(st,{editview:"json-model",editIndex:null}),active:_e==="json-model"}),{navModel:Te,pageNav:Ue}}function fo(it){switch(it){case"annotations":return new yo({});case"variables":return new di({});case"links":return new vn({});case"versions":return new Ai({});case"json-model":return new ja({});case"permissions":return new ts({});case"settings":default:return new Nr({})}}class fr extends m.Bs{constructor(_e){super(_e),this.addActivationHandler(this._activationHandler.bind(this))}_activationHandler(){const _e=this.state.panelRef.resolve(),st=m.Go.cloneSceneObjectState(_e.state,{key:_e.state.key+"-view",$variables:this.getScopedVariables(_e)}),ht=new m.Eb(st);return this.setState({body:ht}),()=>{ht.state.$data&&_e.setState({$data:ht.state.$data.clone()})}}getScopedVariables(_e){const st=gr(_e),ht=[];if(st&&st.state.$variables)for(const Te of st.state.$variables.state.variables)ht.push(Te.clone());if(_e.state.$variables)for(const Te of _e.state.$variables.state.variables)ht.push(Te.clone());if(ht.length>0)return new m.Pj({variables:ht})}getUrlKey(){return this.state.panelRef.resolve().state.key}static{this.Component=({model:_e})=>{const{body:st}=_e.useState();return st?g.createElement(st.Component,{model:st}):null}}}function gr(it){try{return m.jh.getAncestor(it,m.tI)}catch{return}}var mi=e(30195);class fi{constructor(_e){this._scene=_e}getKeys(){return["inspect","viewPanel","editPanel","editview","autofitpanels"]}getUrlState(){const _e=this._scene.state;return{inspect:_e.inspectPanelKey,autofitpanels:_e.body instanceof m.hy&&_e.body.state.UNSAFE_fitPanels?"true":void 0,viewPanel:_e.viewPanelScene?.getUrlKey(),editview:_e.editview?.getUrlKey(),editPanel:_e.editPanel?.getUrlKey()||void 0}}updateFromUrl(_e){const{inspectPanelKey:st,viewPanelScene:ht,isEditing:Te,editPanel:we}=this._scene.state,Ue={};if(typeof _e.editview=="string"&&this._scene.canEditDashboard()?(Ue.editview=fo(_e.editview),Te||(this._scene.state.editable?setTimeout(()=>this._scene.onEnterEditMode()):Ue.editview=void 0)):_e.hasOwnProperty("editview")&&(Ue.editview=void 0),typeof _e.inspect=="string"){let Ge=(0,Oe.vL)(this._scene,_e.inspect);if(!Ge){l.A.emit(n.r1.alertError,["Panel not found"]),o.Ny.partial({inspect:null});return}if((0,Oe.Yr)(Ge)){this._handleLibraryPanel(Ge,ct=>{if(ct.state.key===void 0)throw new Error("library panel key is undefined");const vt=new ds({$behaviors:[new zo({panelKey:ct.state.key})]});this._scene.setState({overlay:vt,inspectPanelKey:ct.state.key})});return}Ue.inspectPanelKey=_e.inspect,Ue.overlay=new ds({$behaviors:[new zo({panelKey:_e.inspect})]})}else st&&(Ue.inspectPanelKey=void 0,Ue.overlay=void 0);if(typeof _e.viewPanel=="string"){const Ge=(0,Oe.vL)(this._scene,_e.viewPanel);if(!Ge){if((0,Oe.SN)(_e.viewPanel)){this._handleViewRepeatClone(_e.viewPanel);return}l.A.emit(n.r1.alertError,["Panel not found"]),o.Ny.partial({viewPanel:null});return}if((0,Oe.Yr)(Ge)){this._handleLibraryPanel(Ge,ct=>this._buildLibraryPanelViewScene(ct));return}Ue.viewPanelScene=new fr({panelRef:Ge.getRef()})}else ht&&_e.viewPanel===null&&(Ue.viewPanelScene=void 0);if(typeof _e.editPanel=="string"){const Ge=(0,Oe.vL)(this._scene,_e.editPanel);if(!Ge){console.warn(`Panel ${_e.editPanel} not found`);return}if(Te||this._scene.onEnterEditMode(),(0,Oe.Yr)(Ge)){this._handleLibraryPanel(Ge,ct=>{this._scene.setState({editPanel:(0,Vr.L)(ct)})});return}Ue.editPanel=(0,Vr.L)(Ge)}else we&&_e.editPanel===null&&(Ue.editPanel=void 0);if(this._scene.state.body instanceof m.hy){const Ge=typeof _e.autofitpanels=="string";!!this._scene.state.body.state.UNSAFE_fitPanels!==Ge&&this._scene.state.body.setState({UNSAFE_fitPanels:Ge})}Object.keys(Ue).length>0&&this._scene.setState(Ue)}_buildLibraryPanelViewScene(_e){this._scene.setState({viewPanelScene:new fr({panelRef:_e.getRef()})})}_handleLibraryPanel(_e,st){if(!(_e.parent instanceof hn.F))throw new Error("Panel is not a child of a LibraryVizPanel");const ht=_e.parent;ht.state.isLoaded?st(_e):(ht.subscribeToState(Te=>{st(Te.panel)}),ht.activate())}_handleViewRepeatClone(_e){this._eventSub||(this._eventSub=this._scene.subscribeToEvent(mi.d,()=>{const st=(0,Oe.vL)(this._scene,_e);st&&(this._eventSub?.unsubscribe(),this._scene.setState({viewPanelScene:new fr({panelRef:st.getRef()})}))}))}}class zo extends m.Bs{constructor(_e){super(_e),this._onActivate=()=>{const st=this.parent;if(!st||!(st instanceof ds))throw new Error("ResolveInspectPanelByKey must be attached to a PanelInspectDrawer");const ht=(0,Oe.YQ)(st);if(!ht)return;const Te=this.state.panelKey;let we=(0,Oe.vL)(ht,Te);ht.state.editPanel&&(we=ht.state.editPanel.state.vizManager.state.panel),ht.state.viewPanelScene&&ht.state.viewPanelScene.state.body&&(we=ht.state.viewPanelScene.state.body),we&&st.setState({panelRef:we.getRef()})},this.addActivationHandler(this._onActivate)}}var gi=e(79284),pi=e(52594);class Hr extends m.Bs{constructor(){super({dashboards:[],filteredDashboards:[],isLoading:!1,searchQuery:""}),this._url=s.$.bootData.settings.listDashboardScopesEndpoint||"/apis/scope.grafana.app/v0alpha1/scopedashboards"}static{this.Component=Xi}async fetchDashboards(_e){if(!_e)return this.setState({dashboards:[],filteredDashboards:[],isLoading:!1});this.setState({isLoading:!0});const st=await this.fetchDashboardsUids(_e),ht=await this.fetchDashboardsDetails(st);this.setState({dashboards:ht,filteredDashboards:this.filterDashboards(ht,this.state.searchQuery),isLoading:!1})}changeSearchQuery(_e){this.setState({filteredDashboards:_e?this.filterDashboards(this.state.dashboards,_e):this.state.dashboards,searchQuery:_e??""})}async fetchDashboardsUids(_e){try{return(await(0,N.AI)().get(this._url,{scope:_e})).items.find(ht=>!!ht.spec.dashboards&&ht.spec.scope===_e)?.spec.dashboards??[]}catch{return[]}}async fetchDashboardsDetails(_e){try{return(await Promise.all(_e.map(ht=>this.fetchDashboardDetails(ht)))).filter(ht=>!!ht)}catch{return(0,ae.J7)().publish({type:n.r1.alertError.name,payload:["Failed to fetch suggested dashboards"]}),[]}}async fetchDashboardDetails(_e){try{const st=await(0,N.AI)().get(`/api/dashboards/uid/${_e}`);return{uid:st.dashboard.uid,title:st.dashboard.title,url:st.meta.url}}catch{return}}filterDashboards(_e,st){const ht=st.toLowerCase();return _e.filter(Te=>Te.title.toLowerCase().includes(ht))}}function Xi({model:it}){const{filteredDashboards:_e,isLoading:st}=it.useState(),ht=(0,Et.of)(Ri);return g.createElement(g.Fragment,null,g.createElement("div",{className:ht.searchInputContainer},g.createElement(B.p,{prefix:g.createElement(nn.I,{name:"search"}),disabled:st,onChange:Te=>it.changeSearchQuery(Te.currentTarget.value)})),g.createElement(Ct.E,null,_e.map((Te,we)=>g.createElement("div",{key:we,className:ht.dashboardItem},g.createElement(pi.Link,{to:{pathname:Te.url,search:o.Ny.getLocation().search}},Te.title)))))}const Ri=it=>({searchInputContainer:(0,ve.css)({flex:"0 1 auto"}),dashboardItem:(0,ve.css)({padding:it.spacing(1,0),borderBottom:`1px solid ${it.colors.border.weak}`,":first-child":{paddingTop:0}})});class Zi extends m.Bs{constructor(){super({isLoading:!0,pendingValue:void 0,scopes:[],value:void 0}),this._urlSync=new m.So(this,{keys:["scope"]}),this._url=s.$.bootData.settings.listScopesEndpoint||"/apis/scope.grafana.app/v0alpha1/scopes"}static{this.Component=hi}getUrlState(){return{scope:this.state.value}}updateFromUrl(_e){const st=_e.scope??void 0;this.setScope(Array.isArray(st)?st[0]:st)}getSelectedScope(){return this.state.scopes.find(_e=>_e.uid===this.state.value)}setScope(_e){if(this.state.isLoading)return this.setState({pendingValue:_e});this.state.scopes.find(st=>st.uid===_e)||(_e=void 0),this.setState({value:_e})}async fetchScopes(){this.setState({isLoading:!0});try{const _e=await(0,N.AI)().get(this._url);this.setScopesAfterFetch(_e.items.map(({metadata:{uid:st},spec:ht})=>({uid:st,...ht})))}catch{(0,ae.J7)().publish({type:n.r1.alertError.name,payload:["Failed to fetch scopes"]}),this.setScopesAfterFetch([])}finally{this.setState({isLoading:!1})}}setScopesAfterFetch(_e){let st=this.state.pendingValue??this.state.value;_e.find(ht=>ht.uid===st)||(st=void 0),this.setState({scopes:_e,pendingValue:void 0,value:st})}}function hi({model:it}){const{scopes:_e,isLoading:st,value:ht}=it.useState(),Te=it.parent.useState(),we="isViewing"in Te?!!Te.isViewing:!1,Ue=_e.map(({uid:Ge,title:ct,category:vt})=>({label:ct,value:Ge,description:vt}));return g.createElement(en.l6,{isClearable:!0,isLoading:st,disabled:we,options:Ue,value:ht,onChange:Ge=>it.setScope(Ge?.value??void 0)})}class go extends m.Bs{static{this.Component=Li}constructor(){super({dashboards:new Hr,filters:new Zi,isExpanded:!1,isViewing:!1}),this.addActivationHandler(()=>{this.state.filters.fetchScopes();const _e=this.state.filters.subscribeToState((ht,Te)=>{ht.value!==Te.value&&(this.state.dashboards.fetchDashboards(ht.value),m.jh.getTimeRange(this.parent).onRefresh())}),st=this.parent?.subscribeToState(ht=>{const Te="isEditing"in ht?!!ht.isEditing:!1;Te!==this.state.isViewing&&(Te?this.enterViewMode():this.exitViewMode())});return()=>{_e.unsubscribe(),st?.unsubscribe()}})}toggleIsExpanded(){this.setState({isExpanded:!this.state.isExpanded})}enterViewMode(){this.setState({isExpanded:!1,isViewing:!0})}exitViewMode(){this.setState({isViewing:!1})}}function Li({model:it}){const{filters:_e,dashboards:st,isExpanded:ht,isViewing:Te}=it.useState(),we=(0,Et.of)(vi);return g.createElement("div",{className:(0,ve.cx)(we.container,ht&&we.containerExpanded)},g.createElement("div",{className:(0,ve.cx)(we.filtersContainer,ht&&we.filtersContainerExpanded)},!Te&&g.createElement(br.K,{name:"arrow-to-right","aria-label":ht?"Collapse scope filters":"Expand scope filters",className:(0,ve.cx)(!ht&&we.iconNotExpanded),"data-testid":"scopes-scene-toggle-expand-button",onClick:()=>it.toggleIsExpanded()}),g.createElement(_e.Component,{model:_e})),ht&&g.createElement("div",{className:we.dashboardsContainer,"data-testid":"scopes-scene-dashboards-container"},g.createElement(st.Component,{model:st})))}const vi=it=>({container:(0,ve.css)({display:"flex",flexDirection:"column",gridArea:"scopes"}),containerExpanded:(0,ve.css)({backgroundColor:it.colors.background.primary,height:"100%"}),filtersContainer:(0,ve.css)({display:"flex",flex:"0 1 auto",flexDirection:"row",padding:it.spacing(2,2,2,2)}),filtersContainerExpanded:(0,ve.css)({borderBottom:`1px solid ${it.colors.border.weak}`,padding:it.spacing(2)}),iconNotExpanded:(0,ve.css)({transform:"scaleX(-1)"}),dashboardsContainer:(0,ve.css)({display:"flex",flex:"1 1 auto",flexDirection:"column",gap:it.spacing(3),overflow:"hidden",padding:it.spacing(2)})});var hl=e(6411),Xo=e.n(hl);class Cr{constructor(){this._binds=[]}addBinding(_e){Xo().bind(_e.key,st=>{st.preventDefault(),st.stopPropagation(),st.returnValue=!1,_e.onTrigger()},"keydown"),this._binds.push(_e)}removeAll(){this._binds.forEach(_e=>{Xo().unbind(_e.key,_e.type)}),this._binds=[]}}var so=e(58441),_s=e(7196);function Ei(it){const _e=new Cr;return _e.addBinding({key:"v",onTrigger:Fr(it,st=>{it.state.viewPanelScene||o.Ny.push((0,nt.r7)(st))})}),_e.addBinding({key:"e",onTrigger:Fr(it,async st=>{if(st.getRoot()instanceof el){const Te=(0,Oe.Cs)(st);it.state.editPanel||o.Ny.push((0,nt.e0)(Te))}})}),_e.addBinding({key:"p s",onTrigger:Fr(it,async st=>{it.showModal(new so.Z({panelRef:st.getRef(),dashboardRef:it.getRef()}))})}),_e.addBinding({key:"i",onTrigger:Fr(it,async st=>{o.Ny.push((0,nt.Uu)(st))})}),_e.addBinding({key:"p x",onTrigger:Fr(it,async st=>{const ht=await(0,nt.Lp)(st);ht&&o.Ny.push(ht)})}),_e.addBinding({key:"p l",onTrigger:Fr(it,_s.vR)}),_e.addBinding({key:"d r",onTrigger:()=>m.jh.getTimeRange(it).onRefresh()}),_e.addBinding({key:"t z",onTrigger:()=>{Co(it)}}),_e.addBinding({key:"ctrl+z",onTrigger:()=>{Co(it)}}),_e.addBinding({key:"t left",onTrigger:()=>{qi(it,"left")}}),_e.addBinding({key:"t right",onTrigger:()=>{qi(it,"right")}}),_e.addBinding({key:"d s",onTrigger:it.onOpenSettings}),_e.addBinding({key:"mod+s",onTrigger:()=>it.openSaveDrawer({})}),_e.addBinding({key:"p r",onTrigger:Fr(it,st=>{it.state.isEditing&&(0,_s.MI)(it,st)})}),_e.addBinding({key:"p d",onTrigger:Fr(it,st=>{it.state.isEditing&&it.duplicatePanel(st)})}),()=>_e.removeAll}function Fr(it,_e){return()=>{const st=document.querySelectorAll(":hover");for(let ht=st.length-1;ht>0;ht--){const Te=st[ht];if(Te instanceof HTMLElement&&Te.dataset?.vizPanelKey){const we=Te.dataset?.vizPanelKey,Ue=m.jh.findObject(it,Ge=>Ge.state.key===we);if(Ue&&Ue instanceof m.Eb){_e(Ue);return}}}}}function Co(it){Ze.b4.getTimePicker(it)?.onZoom()}function qi(it,_e){const st=Ze.b4.getTimePicker(it);st&&(_e==="left"&&st.onMoveBackward(),_e==="right"&&st.onMoveForward())}const Bi=["title","description","tags","editable","graphTooltip","links","meta"];class el extends m.Bs{constructor(_e){super({title:"Dashboard",meta:{},editable:!0,body:_e.body??new m.G1({children:[]}),links:_e.links??[],hasCopiedPanel:u.A.exists(i.tH),scopes:_e.uid&&s.$.featureToggles.scopeFilters?new go:void 0,..._e}),this._urlSync=new fi(this),this._variableDependency=new tl(this),this._fromExplore=!1,this.onEnterEditMode=(st=!1)=>{this._fromExplore=st,this._initialState=m.Go.cloneSceneObjectState(this.state),this._initialUrlState=o.Ny.getLocation(),this.setState({isEditing:!0}),this.propagateEditModeChange(),this._changeTracker.startTrackingChanges()},this.onRestore=async st=>{const ht=await $e.wL.restoreDashboard(st.uid,st.version);if(!Number.isInteger(ht.version))return!1;const Te={dashboard:new d.G(st.data),meta:this.state.meta},we=(0,Ye.wM)(Te),Ue=m.Go.cloneSceneObjectState(we.state);return Ue.version=ht.version,this.setState(Ue),this.exitEditMode({skipConfirm:!0,restoreInitialState:!1}),!0},this.onOpenSettings=()=>{o.Ny.partial({editview:"settings"})},this._changeTracker=new v.l(this),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=ot}_activationHandler(){let _e=window.__grafanaSceneContext;window.__grafanaSceneContext=this,this.state.isEditing&&(this._initialUrlState=o.Ny.getLocation(),this._changeTracker.startTrackingChanges()),this.state.meta.isNew&&(this.onEnterEditMode(),this.setState({isDirty:!0})),!this.state.meta.isEmbedded&&this.state.uid&&E.t.watch(this.state.uid);let st=()=>{};s.$.publicDashboardAccessToken||(st=Ei(this));const ht=new ze(this);return(0,f.UA)().setCurrent(ht),()=>{window.__grafanaSceneContext=_e,st(),this._changeTracker.terminate(),this.stopUrlSync(),ht.destroy(),E.t.leave()}}startUrlSync(){this.state.meta.isEmbedded||(0,m.Is)().initSync(this)}stopUrlSync(){(0,m.Is)().cleanUp(this)}saveCompleted(_e,st,ht){this._initialSaveModel={..._e,id:st.id,uid:st.uid,version:st.version},this._changeTracker.stopTrackingChanges(),this.setState({version:st.version,isDirty:!1,uid:st.uid,id:st.id,meta:{...this.state.meta,uid:st.uid,url:st.url,slug:st.slug,folderUid:ht,isNew:!1}}),this._changeTracker.startTrackingChanges()}propagateEditModeChange(){this.state.body instanceof m.hy&&(this.state.body.setState({isDraggable:this.state.isEditing,isResizable:this.state.isEditing}),(0,Oe.X0)(this.state.body,!0))}exitEditMode({skipConfirm:_e,restoreInitialState:st}){if(!this.canDiscard()){console.error("Trying to discard back to a state that does not exist, initialState undefined");return}if(!this.state.isDirty||_e){this.exitEditModeConfirmed(st||this.state.isDirty);return}l.A.publish(new a.bY({title:"Discard changes to dashboard?",text:"You have unsaved changes to this dashboard. Are you sure you want to discard them?",icon:"trash-alt",yesText:"Discard",onConfirm:this.exitEditModeConfirmed.bind(this)}))}exitEditModeConfirmed(_e=!0){this._changeTracker.stopTrackingChanges(),this.stopUrlSync(),o.Ny.replace(t.I.getUrlForPartial(this._initialUrlState,{editPanel:null,editview:null,inspect:null,inspectTab:null})),this._fromExplore&&this.cleanupStateFromExplore(),_e?this.setState({...this._initialState,isEditing:!1}):this.setState({isEditing:!1}),this.startUrlSync(),this.propagateEditModeChange()}cleanupStateFromExplore(){this._fromExplore=!1,this._initialSaveModel?.panels&&(this._initialSaveModel.panels=this._initialSaveModel.panels.slice(1)),this._initialState&&this._initialState.body instanceof m.hy&&this._initialState.body.setState({children:this._initialState.body.state.children.slice(1)})}canDiscard(){return this._initialState!==void 0}pauseTrackingChanges(){this._changeTracker.stopTrackingChanges()}resumeTrackingChanges(){this._changeTracker.startTrackingChanges()}openSaveDrawer({saveAsCopy:_e,onSaveSuccess:st}){this.state.isEditing&&this.setState({overlay:new at({dashboardRef:this.getRef(),saveAsCopy:_e,onSaveSuccess:st})})}getPageNav(_e,st){const{meta:ht,viewPanelScene:Te,editPanel:we}=this.state;let Ue={text:this.state.title,url:(0,nt.uZ)({uid:this.state.uid,slug:ht.slug,currentQueryParams:_e.search,updateQuery:{viewPanel:null,inspect:null,editview:null,editPanel:null,tab:null},isHomeDashboard:!ht.url&&!ht.slug&&!ht.isNew})};const{folderUid:Ge}=ht;if(Ge){const ct=(0,c.tc)(st,`folder-dashboards-${Ge}`).main;ct.id!=="not-found"&&(Ue={...Ue,parentItem:ct})}return Te&&(Ue={text:"View panel",parentItem:Ue}),we&&(Ue={text:"Edit panel",parentItem:Ue}),Ue}getBodyToRender(){return this.state.viewPanelScene??this.state.body}getInitialState(){return this._initialState}addRow(_e){if(!(this.state.body instanceof m.hy))throw new Error("Trying to add a panel in a layout that is not SceneGridLayout");const st=this.state.body,ht=st.state.children.findIndex(we=>we instanceof m.tI),Te=st.state.children.splice(0,ht===-1?st.state.children.length:ht).map(we=>we.clone());Te&&_e.setState({children:Te}),st.setState({children:[_e,...st.state.children]})}removeRow(_e,st=!1){if(!(this.state.body instanceof m.hy))throw new Error("Trying to add a panel in a layout that is not SceneGridLayout");const ht=this.state.body,Te=ht.state.children.filter(we=>we.state.key!==_e.state.key);if(!st){const we=_e.state.children.map(Ge=>Ge.clone()),Ue=ht.state.children.findIndex(Ge=>Ge.state.key===_e.state.key);Te.splice(Ue,0,...we)}ht.setState({children:Te})}addPanel(_e){if(!(this.state.body instanceof m.hy))throw new Error("Trying to add a panel in a layout that is not SceneGridLayout");const st=this.state.body,ht=(0,Oe.Cs)(_e),Te=new fe.U({height:Oe.sw,width:Oe.vm,x:0,y:0,body:_e,key:`grid-item-${ht}`});st.setState({children:[Te,...st.state.children]})}duplicatePanel(_e){if(!_e.parent)return;const st=(0,Ze.WZ)(_e),ht=st?st.parent:_e.parent;if(!(ht instanceof fe.U)){console.error("Trying to duplicate a panel in a layout that is not DashboardGridItem");return}let Te,we,Ue;const Ge=Ze.b4.getNextPanelId(this);if(st){const vt=m.Go.cloneSceneObjectState(ht.state);Ue=new fe.U({x:vt.x,y:vt.y,width:vt.width,height:vt.height,body:new hn.F({title:st.state.title,uid:st.state.uid,name:st.state.name,panelKey:(0,Oe.XA)(Ge)})})}else ht instanceof fe.U?(Te=m.Go.cloneSceneObjectState(ht.state.body.state),we=m.jh.getData(ht.state.body).clone()):(Te=m.Go.cloneSceneObjectState(_e.state),we=m.jh.getData(_e).clone()),delete we.state.data?.alertState,Ue=new fe.U({x:ht.state.x,y:ht.state.y,height:Oe.sw,width:Oe.vm,body:new m.Eb({...Te,$data:we,key:(0,Oe.XA)(Ge)})});if(!(this.state.body instanceof m.hy)){console.error("Trying to duplicate a panel in a layout that is not SceneGridLayout ");return}const ct=this.state.body;if(ht.parent instanceof m.tI){const vt=ht.parent;vt.setState({children:[...vt.state.children,Ue]}),ct.forceRender();return}ct.setState({children:[...ct.state.children,Ue]})}copyPanel(_e){if(!_e.parent)return;let st=_e.parent;if(_e.parent instanceof hn.F){const Te=_e.parent;if(!Te.parent)return;st=Te.parent}if(!(st instanceof fe.U))throw console.error("Trying to copy a panel that is not DashboardGridItem child"),new Error("Trying to copy a panel that is not DashboardGridItem child");const ht=(0,Le.ZB)(st);u.A.set(i.tH,JSON.stringify(ht)),l.A.emit(n.r1.alertSuccess,["Panel copied. Use **Paste panel** toolbar action to paste."]),this.setState({hasCopiedPanel:!0})}pastePanel(){if(!(this.state.body instanceof m.hy))throw new Error("Trying to add a panel in a layout that is not SceneGridLayout");const _e=u.A.get(i.tH),st=JSON.parse(_e),ht=new d.a(st),Te=ht.libraryPanel?(0,Ye.Al)(ht):(0,Ye.tt)(ht),we=this.state.body;if(!(Te instanceof fe.U))throw new Error("Cannot paste invalid grid item");const Ue=Ze.b4.getNextPanelId(this);if(Te instanceof fe.U&&Te.state.body instanceof hn.F){const Ge=(0,Oe.XA)(Ue);Te.state.body.setState({panelKey:Ge});const ct=Te.state.body.state.panel;ct instanceof m.Eb&&ct.setState({key:Ge})}else Te instanceof fe.U&&Te.state.body?Te.state.body.setState({key:(0,Oe.XA)(Ue)}):Te instanceof fe.U&&Te.state.body.setState({key:(0,Oe.XA)(Ue)});Te.setState({height:Oe.sw,width:Oe.vm,x:0,y:0,key:`grid-item-${Ue}`}),we.setState({children:[Te,...we.state.children]}),this.setState({hasCopiedPanel:!1}),u.A.delete(i.tH)}removePanel(_e){const st=[],ht=_e.parent instanceof hn.F?_e.parent.parent?.state.key:_e.parent?.state.key;if(!ht)return;let Te;try{Te=m.jh.getAncestor(_e,m.tI)}catch{Te=void 0}if(Te){Te.state.children.forEach(Ue=>{Ue.state.key!==ht&&st.push(Ue)}),Te.setState({children:st}),this.state.body.forceRender();return}this.state.body.forEachChild(Ue=>{Ue.state.key!==ht&&st.push(Ue)});const we=this.state.body;(we instanceof m.hy||we instanceof m.G1)&&we.setState({children:st})}unlinkLibraryPanel(_e){if(!_e.parent)return;const st=_e.parent;if(!(st instanceof fe.U)){console.error("Trying to unlinka a lib panel in a layout that is not DashboardGridItem");return}st?.setState({body:_e.state.panel?.clone()})}showModal(_e){this.setState({overlay:_e})}closeModal(){this.setState({overlay:void 0})}async onStarDashboard(){const{meta:_e,uid:st}=this.state;if(st)try{const ht=await(0,f.UA)().starDashboard(st,!!_e.isStarred);this.setState({meta:{..._e,isStarred:ht}})}catch(ht){console.error("Failed to star dashboard",ht)}}onShowAddLibraryPanelDrawer(){this.setState({overlay:new lt.o({})})}onCreateNewRow(){const _e=(0,Oe.Ws)(this);return this.addRow(_e),(0,Oe.Cs)(_e)}onCreateNewPanel(){this.state.isEditing||this.onEnterEditMode();const _e=(0,Oe.O8)(this);return this.addPanel(_e),_e}enrichDataRequest(_e){const st=(0,Oe.YQ)(_e);let ht=(0,Oe.xz)(_e);st.state.isEditing&&st.state.editPanel&&(ht=st.state.editPanel.state.vizManager.state.panel);let Te=0;return ht&&ht.state.key&&((0,Oe.SN)(ht.state.key)?Te=et(ht?.state.key):Te=(0,Oe.Cs)(ht)),{app:r.Jk.Dashboard,dashboardUID:this.state.uid,panelId:Te,panelPluginId:ht?.state.pluginId,scope:this.state.scopes?.state.filters.getSelectedScope()}}canEditDashboard(){const{meta:_e}=this.state;return!!(_e.canEdit||_e.canMakeEditable)}getInitialSaveModel(){return this._initialSaveModel}setInitialSaveModel(_e){this._initialSaveModel=_e}async deleteDashboard(){await(0,h.A_)(this.state.uid,!0),this.setState({isDirty:!1}),o.Ny.replace("/")}}class tl{constructor(_e){this._dashboard=_e,this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(){return!1}variableUpdateCompleted(_e,st){st&&l.A.publish(new y.og({refreshAll:!0,panelIds:[]}));const ht=this._dashboard.state.body;if(ht instanceof m.hy){for(const Te of ht.state.children)if(!(!(Te instanceof m.tI)||!Te.state.$behaviors))for(const we of Te.state.$behaviors)we instanceof gi.L&&(we.isWaitingForVariables||we.state.variableName===_e.state.name&&st)&&we.performRepeat()}}}},60656:(Y,I,e)=>{"use strict";e.d(I,{F:()=>u});var t=e(96540),n=e(27857),r=e(34214),s=e(57767),o=e(96556),m=e(41507),l=e(42397),i=e(7196),c=e(21970);class u extends n.Bs{constructor(h){super({panel:h.panel??f(h.title,h.panelKey),isLoaded:h.isLoaded??!1,...h}),this._onActivate=()=>{this.state.isLoaded||this.loadLibraryPanelFromPanelModel()},this.addActivationHandler(this._onActivate)}static{this.Component=d}setPanelFromLibPanel(h){if(this.state._loadedPanel?.version===h.version)return;const y=new r.a(h.model),a={title:y.title,key:this.state.panelKey,options:y.options??{},fieldConfig:y.fieldConfig,pluginId:y.type,pluginVersion:y.pluginVersion,displayMode:y.transparent?"transparent":void 0,description:y.description,hoverHeader:!y.title&&!y.timeFrom&&!y.timeShift,hoverHeaderOffset:0,$data:(0,o.w)(y),menu:new n.Lw({$behaviors:[i._i]}),titleItems:[new l.$({rawLinks:y.links,menu:new l.m({$behaviors:[i.oV]})}),new c.W]},v=new n.Eb(a),g=this.parent;if(y.repeat&&g instanceof m.U&&g.parent instanceof n.hy){this._parent=void 0;const b=new m.U({key:g.state.key,x:g.state.x,y:g.state.y,width:y.repeatDirection==="h"?24:g.state.width,height:g.state.height,itemHeight:g.state.height,body:this,variableName:y.repeat,repeatedPanels:[],repeatDirection:y.repeatDirection==="h"?"h":"v",maxPerRow:y.maxPerRow});g.parent.setState({children:g.parent.state.children.map(P=>P.state.key===g.state.key?b:P)})}this.setState({panel:v,_loadedPanel:h,isLoaded:!0,name:h.name})}async loadLibraryPanelFromPanelModel(){let h=this.state.panel;try{const y=await(0,s.Yr)(this.state.uid,!0);this.setPanelFromLibPanel(y),this.parent instanceof m.U&&this.parent.setState({variableName:y.model.repeat,repeatDirection:y.model.repeatDirection==="h"?"h":"v",maxPerRow:y.model.maxPerRow})}catch{h.setState({_pluginLoadError:`Unable to load library panel: ${this.state.uid}`})}}}function f(E,h){return new n.Eb({key:h,title:E,menu:new n.Lw({$behaviors:[i._i]})})}function d({model:E}){const{panel:h}=E.useState();return h?t.createElement(h.Component,{model:h}):null}},78235:(Y,I,e)=>{"use strict";e.d(I,{c:()=>U});var t=e(32196),n=e(96540),r=e(13544),s=e(32264),o=e(12131),m=e(40845),l=e(27746),i=e(14578),c=e(39938),u=e(83122),f=e(38138),d=e(55852),E=e(19727),h=e(15068),y=e(75269),a=e(10804),v=e(10096),g=e(44836),b=e(14792),P=e(2609),C=e(19293),D=e(58441),T=e(7758),M=e(99246),O=e(40672),S=e(96374),p=e(28138),x=e(28444);function A(N){return n.createElement(l.I,{key:"button-snapshot","data-testid":"button-snapshot",tooltip:(0,g.t)("dashboard.toolbar.open-original","Open original dashboard"),icon:"link",onClick:()=>R(N.originalURL)})}const R=N=>{const z=N??"",J=O.sQ.sanitizeUrl(z);try{const G=new URL(J,s.$.appUrl),H=new URL(s.$.appUrl);G.host!==H.host?p.A.publish(new x.S8({component:S.u,props:{title:"Proceed to external site?",modalClass:(0,t.css)({width:"max-content",maxWidth:"80vw"}),body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,z)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:()=>{window.location.href=G.href}}})):o.Ny.push(J)}catch(G){console.error("Failed to open original dashboard",G)}};var B=e(60656);const U=n.memo(({dashboard:N})=>{const z=n.createElement(F,{dashboard:N});return n.createElement(y.H,{actions:z})});U.displayName="NavToolbarActions";function F({dashboard:N}){const{isEditing:z,viewPanelScene:J,isDirty:G,uid:H,meta:q,editview:le,editPanel:me,editable:k,hasCopiedPanel:ee}=N.useState(),{isPlaying:X}=P._o.useState(),[j,ne]=(0,n.useState)(!1),te=v.TP.hasEditPermissionInFolders,oe=[],ie=(0,m.of)(V),ue=!!me,be=!!J,ge=L(me),re=w(me),ye=!!ee,Be=!le&&!be&&!ue,ve=z&&Be;ue||K(oe,M.C.left,"left-actions"),oe.push({group:"icon-actions",condition:H&&!!q.canStar&&Be&&!z,render:()=>{let We=q.isStarred?(0,g.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,g.t)("dashboard.toolbar.mark-favorite","Mark as favorite");return n.createElement(l.I,{tooltip:We,icon:n.createElement(i.I,{name:q.isStarred?"favorite":"star",size:"lg",type:q.isStarred?"mono":"default"}),key:"star-dashboard-button","data-testid":r.Tp.components.NavToolbar.markAsFavorite,onClick:()=>{T.c.toolbarFavoritesClick(),N.onStarDashboard()}})}}),q.publicDashboardEnabled&&oe.push({group:"icon-actions",condition:H&&!!q.canStar&&Be&&!z,render:()=>n.createElement(c.E,{color:"blue",text:"Public",key:"public-dashboard-button-badge",className:ie.publicBadge,"data-testid":r.Tp.pages.Dashboard.DashNav.publicDashboardTag})});const Me=s.$.buildInfo.env==="development";oe.push({group:"icon-actions",condition:Me&&H&&Be&&!z,render:()=>n.createElement(l.I,{key:"view-in-old-dashboard-button",tooltip:"Switch to old dashboard page",icon:"apps",onClick:()=>{o.Ny.partial({scenes:!1})}})}),oe.push({group:"icon-actions",condition:q.isSnapshot&&!z,render:()=>n.createElement(A,{key:"go-to-snapshot-origin",originalURL:N.getInitialSaveModel()?.snapshot?.originalUrl??""})}),!ue&&!z&&K(oe,M.C.right,"icon-actions"),oe.push({group:"add-panel",condition:ve,render:()=>n.createElement(u.m,{key:"add-panel-dropdown",onVisibleChange:We=>{ne(We),T.c.toolbarAddClick()},overlay:()=>n.createElement(f.W,null,n.createElement(f.W.Item,{key:"add-visualization",testId:r.Tp.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,g.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const We=N.onCreateNewPanel();T.c.toolbarAddButtonClicked({item:"add_visualization"}),N.setState({editPanel:(0,C.L)(We,!0)})}}),n.createElement(f.W.Item,{key:"add-panel-lib",testId:r.Tp.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,g.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{N.onShowAddLibraryPanelDrawer(),T.c.toolbarAddButtonClicked({item:"add_library_panel"})}}),n.createElement(f.W.Item,{key:"add-row",testId:r.Tp.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,g.t)("dashboard.add-menu.row","Row"),onClick:()=>{N.onCreateNewRow(),T.c.toolbarAddButtonClicked({item:"add_row"})}}),n.createElement(f.W.Item,{key:"paste-panel",disabled:!ye,testId:r.Tp.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,g.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{N.pastePanel(),T.c.toolbarAddButtonClicked({item:"paste_panel"})}})),placement:"bottom",offset:[0,6]},n.createElement(d.$n,{key:"add-panel-button",variant:"primary",size:"sm",fill:"outline","data-testid":r.Tp.components.PageToolbar.itemButton("Add button")},n.createElement(g.x6,{i18nKey:"dashboard.toolbar.add"},"Add"),n.createElement(i.I,{name:j?"angle-up":"angle-down",size:"lg"})))}),oe.push({group:"playlist-actions",condition:X&&Be&&!z,render:()=>n.createElement(l.I,{key:"play-list-prev","data-testid":r.Tp.pages.Dashboard.DashNav.playlistControls.prev,tooltip:(0,g.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:()=>P._o.prev()})}),oe.push({group:"playlist-actions",condition:X&&Be&&!z,render:()=>n.createElement(l.I,{key:"play-list-stop",onClick:()=>P._o.stop(),"data-testid":r.Tp.pages.Dashboard.DashNav.playlistControls.stop},n.createElement(g.x6,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist"))}),oe.push({group:"playlist-actions",condition:X&&Be&&!z,render:()=>n.createElement(l.I,{key:"play-list-next","data-testid":r.Tp.pages.Dashboard.DashNav.playlistControls.next,tooltip:(0,g.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:()=>P._o.next(),narrow:!0})}),oe.push({group:"back-button",condition:(be||ue)&&!re,render:()=>n.createElement(d.$n,{onClick:()=>{o.Ny.partial({viewPanel:null,editPanel:null})},tooltip:"",key:"back",variant:"secondary",size:"sm",icon:"arrow-left","data-testid":r.Tp.components.NavToolbar.editDashboard.backToDashboardButton},"Back to dashboard")}),oe.push({group:"back-button",condition:!!le,render:()=>n.createElement(d.$n,{onClick:()=>{o.Ny.partial({editview:null})},tooltip:"",key:"back",fill:"text",variant:"secondary",size:"sm",icon:"arrow-left","data-testid":r.Tp.components.NavToolbar.editDashboard.backToDashboardButton},"Back to dashboard")}),oe.push({group:"main-buttons",condition:H&&!z&&!q.isSnapshot&&!X,render:()=>n.createElement(d.$n,{key:"share-dashboard-button",tooltip:(0,g.t)("dashboard.toolbar.share","Share dashboard"),size:"sm",className:ie.buttonWithExtraMargin,fill:"outline",onClick:()=>{T.c.toolbarShareClick(),N.showModal(new D.Z({dashboardRef:N.getRef()}))},"data-testid":r.Tp.components.NavToolbar.shareDashboard},"Share")}),oe.push({group:"main-buttons",condition:!z&&N.canEditDashboard()&&!be&&!X&&k,render:()=>n.createElement(d.$n,{onClick:()=>{N.onEnterEditMode()},tooltip:"Enter edit mode",key:"edit",className:ie.buttonWithExtraMargin,variant:"primary",size:"sm","data-testid":r.Tp.components.NavToolbar.editDashboard.editButton},"Edit")}),oe.push({group:"main-buttons",condition:!z&&N.canEditDashboard()&&!be&&!X&&!k,render:()=>n.createElement(d.$n,{onClick:()=>{N.onEnterEditMode(),N.setState({editable:!0,meta:{...q,canEdit:!0}})},tooltip:"This dashboard was marked as read only",key:"edit",className:ie.buttonWithExtraMargin,variant:"secondary",size:"sm","data-testid":r.Tp.components.NavToolbar.editDashboard.editButton},"Make editable")}),oe.push({group:"settings",condition:z&&N.canEditDashboard()&&Be,render:()=>n.createElement(d.$n,{onClick:()=>{N.onOpenSettings()},tooltip:"Dashboard settings",fill:"text",size:"sm",key:"settings",variant:"secondary","data-testid":r.Tp.components.NavToolbar.editDashboard.settingsButton},"Settings")}),oe.push({group:"main-buttons",condition:z&&!q.isNew&&Be,render:()=>n.createElement(d.$n,{onClick:()=>N.exitEditMode({skipConfirm:!1}),tooltip:"Exits edit mode and discards unsaved changes",size:"sm",key:"discard",fill:"text",variant:"primary","data-testid":r.Tp.components.NavToolbar.editDashboard.exitButton},"Exit edit")}),oe.push({group:"main-buttons",condition:ue&&!re&&!le&&!be,render:()=>n.createElement(d.$n,{onClick:me?.onDiscard,tooltip:me?.state.isNewPanel?"Discard panel":"Discard panel changes",size:"sm",disabled:!ge||!G,key:"discard",fill:"outline",variant:"destructive","data-testid":r.Tp.components.NavToolbar.editDashboard.discardChangesButton},me?.state.isNewPanel?"Discard panel":"Discard panel changes")}),oe.push({group:"main-buttons",condition:ue&&re&&!le&&!be,render:()=>n.createElement(d.$n,{onClick:me?.onDiscard,tooltip:"Discard library panel changes",size:"sm",key:"discardLibraryPanel",fill:"outline",variant:"destructive","data-testid":r.Tp.components.NavToolbar.editDashboard.discardChangesButton},"Discard library panel changes")}),oe.push({group:"main-buttons",condition:ue&&re&&!le&&!be,render:()=>n.createElement(d.$n,{onClick:me?.onUnlinkLibraryPanel,tooltip:"Unlink library panel",size:"sm",key:"unlinkLibraryPanel",fill:"outline",variant:"secondary","data-testid":r.Tp.components.NavToolbar.editDashboard.unlinkLibraryPanelButton},"Unlink library panel")}),oe.push({group:"main-buttons",condition:ue&&re&&!le&&!be,render:()=>n.createElement(d.$n,{onClick:me?.onSaveLibraryPanel,tooltip:"Save library panel",size:"sm",key:"saveLibraryPanel",fill:"outline",variant:"primary","data-testid":r.Tp.components.NavToolbar.editDashboard.saveLibraryPanelButton},"Save library panel")}),oe.push({group:"main-buttons",condition:z&&!re&&(q.canSave||te),render:()=>{if(q.isNew)return n.createElement(d.$n,{onClick:()=>{T.c.toolbarSaveClick(),N.openSaveDrawer({})},className:ie.buttonWithExtraMargin,tooltip:"Save changes",key:"save",size:"sm",variant:"primary","data-testid":r.Tp.components.NavToolbar.editDashboard.saveButton},"Save dashboard");if(te&&!q.canSave&&!q.canMakeEditable)return n.createElement(d.$n,{onClick:()=>{T.c.toolbarSaveClick(),N.openSaveDrawer({saveAsCopy:!0})},className:ie.buttonWithExtraMargin,tooltip:"Save as copy",key:"save",size:"sm",variant:G?"primary":"secondary"},"Save as copy");const We=n.createElement(f.W,null,n.createElement(f.W.Item,{label:"Save",icon:"save",onClick:()=>{T.c.toolbarSaveClick(),N.openSaveDrawer({})}}),n.createElement(f.W.Item,{label:"Save as copy",icon:"copy",onClick:()=>{T.c.toolbarSaveAsClick(),N.openSaveDrawer({saveAsCopy:!0})}}));return n.createElement(E.e,{className:ie.buttonWithExtraMargin,key:"save"},n.createElement(d.$n,{onClick:()=>{T.c.toolbarSaveClick(),N.openSaveDrawer({})},tooltip:"Save changes",size:"sm","data-testid":r.Tp.components.NavToolbar.editDashboard.saveButton,variant:G?"primary":"secondary"},"Save dashboard"),n.createElement(u.m,{overlay:We},n.createElement(d.$n,{icon:"angle-down",variant:G?"primary":"secondary",size:"sm"})))}});const ke=[];let Se="";for(const We of oe)We.condition&&(Se&&Se!==We.group&&Se&&ke.push(n.createElement(a.K,{key:`${We.group}-separator`})),ke.push(We.render()),Se=We.group);return n.createElement(h.U,{alignment:"right"},ke)}function K(N,z,J){if(z.length>0)for(const G of z){const H={dashboard:(0,b.UA)().getCurrent()};if(G.show(H)){const q=G.component;N.push({group:J,condition:!0,render:()=>n.createElement(q,{...H,key:N.length})})}}}function w(N){const[z,J]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(N){const G=N.state.vizManager.subscribeToState(H=>J(H.sourcePanel.resolve().parent instanceof B.F));return()=>{G.unsubscribe()}}J(!1)},[N]),z}function L(N){const[z,J]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(N){const G=N.state.vizManager.subscribeToState(H=>J(H.isDirty||!1));return()=>{G.unsubscribe()}}J(!1)},[N]),z}function V(N){return{buttonWithExtraMargin:(0,t.css)({margin:N.spacing(0,.5)}),publicBadge:(0,t.css)({color:"grey",backgroundColor:"transparent",border:"1px solid"})}}},42397:(Y,I,e)=>{"use strict";e.d(I,{$:()=>c,m:()=>f});var t=e(96540),n=e(27857),r=e(91052),s=e(14578),o=e(83122),m=e(27746),l=e(38138),i=e(7196);class c extends n.Bs{static{this.Component=u}}function u({model:E}){const{menu:h,rawLinks:y}=E.useState();if(!(E.parent instanceof n.Eb))throw new Error("VizPanelLinks must be a child of VizPanel");if(!y||y.length===0)return null;if(y.length===1){const a=(0,i.eQ)(E.parent)[0];return t.createElement(r.NR.TitleItem,{href:a.href,onClick:a.onClick,target:a.target,title:a.title},t.createElement(s.I,{name:"external-link-alt",size:"md"}))}return t.createElement(o.m,{overlay:()=>t.createElement(h.Component,{model:h,key:h.state.key})},t.createElement(m.I,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links"}))}class f extends n.Bs{static{this.Component=d}}function d({model:E}){const{links:h}=E.useState();return h?t.createElement(l.W,null,h?.map((y,a)=>t.createElement(l.W.Item,{key:a,label:y.title,url:y.href,target:y.target,onClick:y.onClick}))):null}},7196:(Y,I,e)=>{"use strict";e.d(I,{eQ:()=>ye,MI:()=>ve,oV:()=>re,_i:()=>ie,t0:()=>ue,vR:()=>ke});var t=e(74135),n=e(1933),r=e(76885),s=e(32264),o=e(4402),m=e(12131),l=e(27857),i=e(28138),c=e(44836),u=e(63066),f=e(22699),d=e(16560),E=e(32349),h=e(75462),y=e(19347),a=e(74730),v=e(75176),g=e(40588),b=e(96540),P=e(56833);class C extends l.Bs{static{this.Component=D}constructor(pe){super(pe),this.trail=T(pe)}}function D({model:De}){return b.createElement(De.trail.Component,{model:De.trail})}function T({metric:De,filters:pe,dataSourceUid:Ne,timeRange:Le}){return new P.b({$timeRange:Le,metric:De,initialDS:Ne,initialFilters:pe,embedded:!0})}var M=e(32196),O=e(40845),S=e(87978),p=e(28444);function x(De){const{scene:pe,title:Ne,onDismiss:Le}=De,He=(0,O.of)(B);return b.createElement(S._,{title:Ne,onClose:Le,size:"lg"},b.createElement("div",{className:He.drawerInnerWrapper},b.createElement(pe.Component,{model:pe})))}class A extends l.Bs{constructor(pe){super(pe)}static Component({model:pe}){const Ne=pe.useState();return b.createElement(x,{...Ne})}}function R(De){const pe={component:x,props:De};appEvents.publish(new ShowModalReactEvent(pe))}function B(De){return{drawerInnerWrapper:(0,M.css)({display:"flex",padding:De.spacing(2),background:De.isDark?De.colors.background.canvas:De.colors.background.primary,position:"absolute",left:0,right:0,top:0})}}var U=e(76040);function F(De){return De.op==="="}function K(De){return De.state.$timeRange.clone()}function w({metric:De,labelFilters:pe}){if(pe.length===0)return De;const Ne=`{${pe.map(({label:Le,op:He,value:je})=>`${Le}${He}"${je}"`)}}`;return`${De}${Ne}`}function L(De){return De?.map(pe=>({key:pe.label,value:pe.value,operator:pe.op}))}function V(De){const pe=[];return De.forEach(Ne=>{const Le=(0,U.u)(Ne);if(Le.errors.length>0)return;const{metric:He,labels:je}=Le.query;pe.push({metric:He,labelFilters:je.filter(F),query:Ne}),Le.query.binaryQueries?.forEach(({query:{metric:at,labels:Ye}})=>{pe.push({metric:at,labelFilters:Ye.filter(F),query:Ne})})}),pe}async function N(De,pe,Ne){if(pe.state.pluginId!=="timeseries")return;const Le=(0,a.un)(pe);if(Le==null)return;const{queries:He,datasource:je,data:at}=Le.state;if(je==null||je.type!=="prometheus")return;const Ye=await(0,y.l)().get(je);if(Ye.interpolateVariablesInQueries==null)return;const $e=Ye.interpolateVariablesInQueries(He,{__sceneObject:{value:pe}},at?.request?.filters).filter(q),Fe=V($e.map(Ee=>Ee.expr)).map(Ee=>({text:w(Ee),onClick:H(Ee,De,Ye)}));Fe.length>0&&Ne.push({text:"Explore metrics",iconClassName:"code-branch",subMenu:z(Fe)})}function z(De){const pe=new Set;function Ne({text:Le}){const He=pe.size;return pe.add(Le),pe.size>He}return De.filter(Ne)}function J({metric:De,labelFilters:pe,query:Ne},Le,He){return{metric:De,filters:L(pe),dataSourceUid:He,timeRange:Le}}function G(De,pe,Ne){const Le=K(pe),He=J(De,Le,Ne.uid),je=new C(He);return je.trail.addActivationHandler(()=>{je.trail.state.topScene instanceof v.R&&je.trail.state.topScene.setActionView("breakdown")}),{scene:je,title:"Explore metrics"}}function H(De,pe,Ne){return()=>{const Le=G(De,pe,Ne),He=new A({...Le,onDismiss:()=>pe.closeModal()});(0,g.z)("exploration_started",{cause:"dashboard_panel"}),pe.showModal(He)}}function q(De){return"expr"in De}var le=e(58441),me=e(7758),k=e(11982),ee=e(63117),X=e(60656),j=e(42397),ne=e(54174);class te extends l.Bs{constructor(){super(...arguments),this.onDismiss=()=>{(0,a.YQ)(this).closeModal()},this.onConfirm=()=>{const pe=(0,a.YQ)(this);pe.unlinkLibraryPanel(this.state.panelRef.resolve()),pe.closeModal()}}static{this.Component=oe}}function oe({model:De}){return b.createElement(ne.l,{isOpen:!0,onConfirm:()=>{De.onConfirm(),De.onDismiss()},onDismiss:De.onDismiss})}function ie(De,pe=!1){(async()=>{const Le=De.parent,He=Le.parent,je=Le.getPlugin(),at=[],Ye=[],$e=(0,a.YQ)(Le),{isEmbedded:xe}=$e.state.meta,Fe=await be(Le);if(xe){Fe&&De.setState({items:[Fe]});return}const Ee=!!$e.state.editPanel;Ee||at.push({text:(0,c.t)("panel.header-menu.view","View"),iconClassName:"eye",shortcut:"v",onClick:()=>me.c.panelMenuItemClicked("view"),href:(0,k.r7)(Le)}),$e.canEditDashboard()&&$e.state.editable&&!pe&&!Ee&&at.push({text:(0,c.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",shortcut:"e",onClick:()=>me.c.panelMenuItemClicked("edit"),href:(0,k.e0)((0,a.Cs)(Le))}),at.push({text:(0,c.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:()=>{me.c.panelMenuItemClicked("share"),$e.showModal(new le.Z({panelRef:Le.getRef(),dashboardRef:$e.getRef()}))},shortcut:"p s"}),$e.state.isEditing&&!pe&&!Ee&&Ye.push({text:(0,c.t)("panel.header-menu.duplicate","Duplicate"),onClick:()=>{me.c.panelMenuItemClicked("duplicate"),$e.duplicatePanel(Le)},shortcut:"p d"}),Ee||Ye.push({text:(0,c.t)("panel.header-menu.copy","Copy"),onClick:()=>{me.c.panelMenuItemClicked("copy"),$e.copyPanel(Le)}}),$e.state.isEditing&&!pe&&!Ee&&(He instanceof X.F?Ye.push({text:(0,c.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),onClick:()=>{me.c.panelMenuItemClicked("unlinkLibraryPanel"),$e.showModal(new te({panelRef:He.getRef()}))}}):Ye.push({text:(0,c.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:()=>{me.c.panelMenuItemClicked("createLibraryPanel"),$e.showModal(new le.Z({panelRef:Le.getRef(),dashboardRef:$e.getRef(),activeTab:f.wr.libraryPanel}))}})),Ye.push({text:(0,c.t)("panel.header-menu.new-alert-rule","New alert rule"),onClick:ae=>Me(Le)}),Se(Le.state.options)&&!Ee&&Ye.push({text:Le.state.options.legend.showLegend?(0,c.t)("panel.header-menu.hide-legend","Hide legend"):(0,c.t)("panel.header-menu.show-legend","Show legend"),onClick:ae=>{ae.preventDefault(),ke(Le)},shortcut:"p l"}),$e.canEditDashboard()&&je&&!je.meta.skipDataQuery&&!pe&&Ye.push({text:(0,c.t)("panel.header-menu.get-help","Get help"),onClick:ae=>{ae.preventDefault(),We(Le,d.q.Help)}}),s.$.featureToggles.exploreMetrics&&await N($e,Le,at),Fe&&at.push(Fe),at.push(ge(je,Le,$e));const{extensions:se}=(0,o.Kf)({extensionPointId:t.S.DashboardPanelMenu,context:Be(Le,$e),limitPerPlugin:3});se.length>0&&!$e.state.isEditing&&at.push({text:"Extensions",iconClassName:"plug",type:"submenu",subMenu:(0,h.N9)(se)}),Ye.length&&at.push({type:"submenu",text:(0,c.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:Ye,onClick:ae=>{ae.preventDefault()}}),$e.state.isEditing&&!pe&&!Ee&&(at.push({text:"",type:"divider"}),at.push({text:(0,c.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:()=>{me.c.panelMenuItemClicked("remove"),ve($e,Le)},shortcut:"p r"})),De.setState({items:at})})()}const ue=De=>ie(De,!0);async function be(De){const pe=await(0,k.Lp)(De);if(pe)return{text:(0,c.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",shortcut:"p x",onClick:()=>me.c.panelMenuItemClicked("explore"),href:pe}}function ge(De,pe,Ne){const Le=[];return De&&!De.meta.skipDataQuery&&(Le.push({text:(0,c.t)("panel.header-menu.inspect-data","Data"),href:(0,k.Uu)(pe,d.q.Data),onClick:He=>{He.preventDefault(),m.Ny.partial({inspect:pe.state.key,inspectTab:d.q.Data}),me.c.panelMenuInspectClicked(d.q.Data)}}),Ne instanceof ee.H$&&Ne.state.meta.canEdit&&Le.push({text:(0,c.t)("panel.header-menu.query","Query"),href:(0,k.Uu)(pe,d.q.Query),onClick:He=>{He.preventDefault(),m.Ny.partial({inspect:pe.state.key,inspectTab:d.q.Query}),me.c.panelMenuInspectClicked(d.q.Query)}})),Le.push({text:(0,c.t)("panel.header-menu.inspect-json","Panel JSON"),href:(0,k.Uu)(pe,d.q.JSON),onClick:He=>{He.preventDefault(),m.Ny.partial({inspect:pe.state.key,inspectTab:d.q.JSON}),me.c.panelMenuInspectClicked(d.q.JSON)}}),{text:(0,c.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",shortcut:"i",href:(0,k.Uu)(pe),onClick:He=>{He.isDefaultPrevented()||(m.Ny.partial({inspect:pe.state.key,inspectTab:d.q.Data}),me.c.panelMenuInspectClicked(d.q.Data))},subMenu:Le.length>0?Le:void 0}}function re(De){if(!(De.parent instanceof j.$))throw new Error("parent of VizPanelLinksMenu must be VizPanelLinks");const pe=De.parent.parent;if(!(pe instanceof l.Eb))throw new Error("parent of VizPanelLinks must be VizPanel");De.setState({links:ye(pe)})}function ye(De){const pe=(He,je)=>l.jh.interpolate(De,He,je),Ne=(0,E.CH)(De,pe);if(!Ne)return[];const Le=Ne.getLinks(pe);return Le.map(He=>({...He,onClick:(je,at)=>{me.c.panelLinkClicked({has_multiple_links:Le.length>1}),He.onClick?.(je,at)}}))}function Be(De,pe){const Ne=l.jh.getTimeRange(De);let Le=(0,a.un)(De);const He=Le?.state.queries,je=(0,a.Cs)(De);let at={};if(De.state.$variables&&De.state.$variables.state.variables.forEach(Ye=>{Ye instanceof l.xc&&(at={...at,[Ye.state.name]:{value:Ye.getValue(),text:Ye.getValueText()}})}),De.parent?.parent instanceof l.tI){const Ye=De.parent.parent;Ye.state.$variables&&Ye.state.$variables.state.variables.forEach($e=>{$e instanceof l.xc&&(at={...at,[$e.state.name]:{value:$e.getValue(),text:$e.getValueText()}})})}return{id:je,pluginId:De.state.pluginId,title:De.state.title,timeRange:Ne.state.value.raw,timeZone:(0,n.O)({timeZone:Ne.getTimeZone()}),dashboard:{uid:pe.state.uid,title:pe.state.title,tags:pe.state.tags||[]},targets:He,scopedVars:at,data:Le?.state.data}}function ve(De,pe){i.A.publish(new p.bY({title:"Remove panel",text:"Are you sure you want to remove this panel?",icon:"trash-alt",yesText:"Remove",onConfirm:()=>De.removePanel(pe)}))}const Me=async De=>{me.c.panelMenuItemClicked("create-alert");const pe=await(0,u.J6)(De),Ne=r.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(pe),returnTo:location.pathname+location.search});m.Ny.push(Ne),me.c.panelMenuItemClicked("create-alert")};function ke(De){const pe=De.state.options;Se(pe)&&typeof pe.legend.showLegend=="boolean"&&De.onOptionsChange({legend:{showLegend:!pe.legend.showLegend}}),me.c.panelMenuItemClicked("toggleLegend")}function Se(De){return De!=null&&typeof De=="object"&&"legend"in De}const We=(De,pe)=>{m.Ny.partial({inspect:De.state.key,inspectTab:pe}),me.c.panelMenuInspectClicked(pe??d.q.Data)}},21970:(Y,I,e)=>{"use strict";e.d(I,{W:()=>o});var t=e(96540),n=e(27857),r=e(2038),s=e(74730);class o extends n.Bs{constructor(){super({}),this.onActivate=()=>{const i=this.parent;if(!i||!(i instanceof n.Eb))throw new Error("PanelNotices can be used only as title items for VizPanel")},this.addActivationHandler(this.onActivate)}static{this.Component=m}getPanel(){const i=this.parent;return i&&i instanceof n.Eb?i:null}}function m({model:l}){const i=l.getPanel(),u=n.jh.getData(l).useState();if(!i)return null;const f=(0,s.Cs)(i);return u.data?.series?t.createElement(r.Z,{frames:u.data?.series,panelId:f}):null}},7928:(Y,I,e)=>{"use strict";e.d(I,{v:()=>d});var t=e(32196),n=e(96540),r=e(43127),s=e(65879),o=e(85858),m=e(27857),l=e(40845),i=e(56034),c=e(15666),u=e(91052),f=e(14578);class d extends m.XQ{static{this.Component=E}constructor(a={}){super({...a,from:"now-6h",to:"now",value:(0,r.E2)()}),this.addActivationHandler(()=>this._onActivate())}_onActivate(){this._subs.add(this.subscribeToState((a,v)=>{if(a.timeFrom!==v.timeFrom||a.timeShift!==v.timeShift){const{timeInfo:g,timeRange:b}=this.getTimeOverride(this.getAncestorTimeRange().state.value);this.setState({timeInfo:g,value:b})}}))}ancestorTimeRangeChanged(a){const v=this.getTimeOverride(a.value);this.setState({value:v.timeRange,timeInfo:v.timeInfo})}getTimeOverride(a){const{timeFrom:v,timeShift:g}=this.state,b={timeInfo:"",timeRange:a};if(v){const P=m.jh.interpolate(this,this.state.timeFrom),C=s.describeTextRange(P);if(C.invalid)return b.timeInfo="invalid time override",b;s.isRelativeTimeRange(a.raw)&&(b.timeInfo=C.display,b.timeRange={from:o.parse(C.from),to:o.parse(C.to),raw:{from:C.from,to:C.to}})}if(g){const P=m.jh.interpolate(this,this.state.timeShift);if(s.describeTextRange(P).invalid)return b.timeInfo="invalid timeshift",b;const D="-"+P;b.timeInfo+=" timeshift "+D;const T=o.parseDateMath(D,b.timeRange.from,!1),M=o.parseDateMath(D,b.timeRange.to,!0);b.timeRange={from:T,to:M,raw:{from:T,to:M}}}return b}}function E({model:y}){const{timeInfo:a,hideTimeOverride:v}=y.useState(),g=(0,l.of)(h);return!a||v?null:n.createElement(i.m,{content:n.createElement(c.xS,{timeRange:y.state.value,timeZone:y.getTimeZone()})},n.createElement(u.NR.TitleItem,{className:g.timeshift},n.createElement(f.I,{name:"clock-nine",size:"sm"})," ",a))}const h=y=>({timeshift:(0,t.css)({color:y.colors.text.link,gap:y.spacing(.5),whiteSpace:"nowrap"})})},79284:(Y,I,e)=>{"use strict";e.d(I,{L:()=>m});var t=e(2543),n=e.n(t),r=e(27857),s=e(74730),o=e(30195);class m extends r.Bs{constructor(d){super(d),this._variableDependency=new r.Sh(this,{variableNames:[this.state.variableName],onVariableUpdateCompleted:()=>{}}),this.isWaitingForVariables=!1,this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.performRepeat()}_getRow(){if(!(this.parent instanceof r.tI))throw new Error("RepeatedRowBehavior: Parent is not a SceneGridRow");return this.parent}_getLayout(){const d=r.jh.getLayout(this);if(!(d instanceof r.hy))throw new Error("RepeatedRowBehavior: Layout is not a SceneGridLayout");return d}performRepeat(){if(this.isWaitingForVariables=this._variableDependency.hasDependencyInLoadingState(),this.isWaitingForVariables)return;const d=r.jh.lookupVariable(this.state.variableName,this.parent?.parent);if(!d){console.error("RepeatedRowBehavior: Variable not found");return}if(!(d instanceof r.n8)){console.error("RepeatedRowBehavior: Variable is not a MultiValueVariable");return}const E=this._getRow(),h=this._getLayout(),{values:y,texts:a}=(0,s.a7)(d);if((0,t.isEqual)(this._prevRepeatValues,y))return;this._prevRepeatValues=y;const v=[],g=E.state.children,b=l(g);let P=0;for(let C=0;C<y.length;C++){const D=[],T=y[C];for(const O of g){const p=(O.state.y??0)+(b+1)*C,x=C>0?`${O.state.key}-clone-${T}`:O.state.key,A=O.clone({key:x,y:p});C>0&&u(A,T),D.push(A),P<p+A.state.height&&(P=p+A.state.height)}const M=this.getRowClone(E,C,T,a[C],b,D);v.push(M)}i(h,v,P,E),this.publishEvent(new o.d({source:this}),!0)}getRowClone(d,E,h,y,a,v){if(E===0)return d.setState({$variables:new r.Pj({variables:[new r.xc({name:this.state.variableName,value:h,text:String(y)})]}),children:v}),d;const g=d.state.y??0;return d.clone({key:`${d.state.key}-clone-${h}`,$variables:new r.Pj({variables:[new r.xc({name:this.state.variableName,value:h,text:String(y)})]}),$behaviors:[],children:v,y:g+a*E+E,actions:void 0})}removeBehavior(){const d=this._getRow(),E=this._getLayout(),h=c(this._getLayout(),this._getRow());E.setState({children:h}),d.setState({$behaviors:d.state.$behaviors.filter(y=>y!==this),$variables:void 0})}}function l(f){let d=0,E=Number.MAX_VALUE;if(f.length===0)return 0;for(const h of f)h.state.y+h.state.height>d&&(d=h.state.y+h.state.height),h.state.y<E&&(E=h.state.y);return d-E}function i(f,d,E,h){const y=c(f,h),a=y.indexOf(h);if(a===-1)throw new Error("RowRepeaterBehavior: Parent row not found in layout children");const v=[...y.slice(0,a),...d,...y.slice(a+1)];if(y.length>a+1){const g=y.slice(a+1),b=g[0].state.y,P=E-b;for(const C of g)if(C.setState({y:C.state.y+P}),C instanceof r.tI)for(const D of C.state.children)D.setState({y:D.state.y+P})}f.setState({children:v})}function c(f,d){return f.state.children.filter(E=>!E.state.key?.startsWith(`${d.state.key}-clone-`))}function u(f,d){f.forEachChild(E=>{E.setState({key:`${E.state.key}-clone-${d}`}),u(E,d)})}},54174:(Y,I,e)=>{"use strict";e.d(I,{l:()=>r});var t=e(96540),n=e(96374);const r=({isOpen:s,onConfirm:o,onDismiss:m})=>t.createElement(n.u,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{o(),m()},onDismiss:m,isOpen:s})},58029:(Y,I,e)=>{"use strict";e.d(I,{u:()=>S});var t=e(32196),n=e(96540),r=e(27857),s=e(72109),o=e(40845),m=e(14578),l=e(28138),i=e(14348),c=e(28444),u=e(74730),f=e(41507),d=e(79284),E=e(71678),h=e(37390),y=e(49785),a=e(13544),v=e(88575),g=e(10354),b=e(42418),P=e(55852),C=e(92378);const D=({repeat:x,title:A,parent:R,warning:B,onUpdate:U,onCancel:F})=>{const[K,w]=(0,n.useState)(x),L=(0,n.useCallback)(J=>w(J),[w]),{handleSubmit:V,register:N}=(0,y.mN)({defaultValues:{title:A}}),z=J=>{U(J.title,K)};return n.createElement("form",{onSubmit:V(z)},n.createElement(v.D,{label:"Title"},n.createElement(g.p,{...N("title"),type:"text"})),n.createElement(v.D,{label:"Repeat for"},n.createElement(C.U,{parent:R,repeat:K,onChange:L})),B&&n.createElement(b.F,{"data-testid":a.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0},B),n.createElement(h.a.ButtonRow,null,n.createElement(P.$n,{type:"button",variant:"secondary",onClick:F,fill:"outline"},"Cancel"),n.createElement(P.$n,{type:"submit"},"Update")))},T=({repeat:x,title:A,parent:R,onDismiss:B,onUpdate:U,warning:F})=>{const K=(0,o.of)(M);return n.createElement(h.a,{isOpen:!0,title:"Row options",onDismiss:B,className:K.modal},n.createElement(D,{parent:R,repeat:x,title:A,onCancel:B,onUpdate:U,warning:F}))},M=()=>({modal:(0,t.css)({label:"RowOptionsModal",width:"500px"})}),O=({repeat:x,title:A,parent:R,onUpdate:B,warning:U})=>{const F=K=>(w,L)=>{B(w,L),K()};return n.createElement(E.$s,null,({showModal:K,hideModal:w})=>n.createElement("button",{type:"button",className:"pointer","aria-label":"Row options",onClick:()=>{K(T,{title:A,repeat:x,parent:R,onDismiss:w,onUpdate:F(w),warning:U})}},n.createElement(m.I,{name:"cog"})))};O.displayName="RowOptionsButton";class S extends r.Bs{constructor(){super(...arguments),this.onUpdate=(A,R)=>{const B=this.getParent();let U;if(B.state.$behaviors)for(let F of B.state.$behaviors)F instanceof d.L&&(U=F);if(R&&!U){const F=new d.L({variableName:R});B.setState({$behaviors:[...B.state.$behaviors??[],F]})}else U&&U.removeBehavior();A!==B.state.title&&B.setState({title:A})},this.onDelete=()=>{l.A.publish(new c.bY({title:"Delete row",text:"Are you sure you want to remove this row and all its panels?",altActionText:"Delete row only",icon:"trash-alt",onConfirm:()=>{this.getDashboard().removeRow(this.getParent(),!0)},onAltAction:()=>{this.getDashboard().removeRow(this.getParent())}}))},this.getWarning=()=>{if(this.getParent().state.children.some(U=>{if(!(U instanceof f.U))return!1;const F=U.state.body;return F instanceof r.Eb?(0,u.un)(F)?.state.datasource?.uid===i.K:!1}))return n.createElement("div",null,n.createElement("p",null,"Panels in this row use the ",i.K," data source. These panels will reference the panel in the original row, not the ones in the repeated rows."),n.createElement(s.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-rows"},"Learn more"))}}getParent(){if(!(this.parent instanceof r.tI))throw new Error("RowActions must have a SceneGridRow parent");return this.parent}getDashboard(){return(0,u.YQ)(this)}static{this.Component=({model:A})=>{const R=A.getDashboard(),B=A.getParent(),{title:U}=B.useState(),{meta:F,isEditing:K}=R.useState(),w=(0,o.of)(p),L=B.state.$behaviors?.find(V=>V instanceof d.L);return n.createElement(n.Fragment,null,F.canEdit&&K&&n.createElement(n.Fragment,null,n.createElement("div",{className:w.rowActions},n.createElement(O,{title:U,repeat:L instanceof d.L?L.state.variableName:void 0,parent:R,onUpdate:A.onUpdate,warning:A.getWarning()}),n.createElement("button",{type:"button",onClick:A.onDelete,"aria-label":"Delete row"},n.createElement(m.I,{name:"trash-alt"})))))}}}const p=x=>({rowActions:(0,t.css)({color:x.colors.text.secondary,lineHeight:"27px",button:{color:x.colors.text.secondary,paddingLeft:x.spacing(2),background:"transparent",border:"none","&:hover":{color:x.colors.text.maxContrast}}})})},30195:(Y,I,e)=>{"use strict";e.d(I,{d:()=>n});var t=e(65463);class n extends t.x{static{this.type="dashboard-repeats-processed"}}},71176:(Y,I,e)=>{"use strict";e.d(I,{X:()=>n});var t=e(79422);function n(r){const s={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{...t.Ye,uid:"",title:"New dashboard",panels:[]}};return r&&(s.meta.folderUid=r),s}},70665:(Y,I,e)=>{"use strict";e.d(I,{x:()=>t});const t={name:"grafana",uid:"grafana"}},13989:(Y,I,e)=>{"use strict";e.d(I,{O:()=>n});var t=e(27857);function n(r){const s=[];for(const o of r){if(!(o instanceof t.tV.g))continue;const m={...o.state.query,enable:!!o.state.isEnabled,hide:!!o.state.isHidden};s.push(m)}return s}},53287:(Y,I,e)=>{"use strict";e.d(I,{C:()=>m});var t=e(32264),n=e(27857),r=e(79422),s=e(73134),o=e(74730);function m(i){const c=[];for(const u of i.state.variables){const f={name:u.state.name,label:u.state.label,description:u.state.description??void 0,skipUrlSync:!!u.state.skipUrlSync,hide:u.state.hide||r.zL.dontHide,type:u.state.type};if(n.Go.isQueryVariable(u)){let d=[];u.state.refresh===s.CO.never&&(d=l(u.state)),c.push({...f,current:{value:u.state.value,text:u.state.text},options:d,query:u.state.query,definition:u.state.definition,datasource:u.state.datasource,sort:u.state.sort,refresh:u.state.refresh,regex:u.state.regex,allValue:u.state.allValue,includeAll:u.state.includeAll,multi:u.state.isMulti,skipUrlSync:u.state.skipUrlSync})}else if(n.Go.isCustomVariable(u))c.push({...f,current:{text:u.state.value,value:u.state.value},options:l(u.state),query:u.state.query,multi:u.state.isMulti,allValue:u.state.allValue,includeAll:u.state.includeAll});else if(n.Go.isDataSourceVariable(u))c.push({...f,current:{value:u.state.value,text:u.state.text},options:[],regex:u.state.regex,refresh:s.CO.onDashboardLoad,query:u.state.pluginId,multi:u.state.isMulti,allValue:u.state.allValue,includeAll:u.state.includeAll});else if(n.Go.isConstantVariable(u))c.push({...f,current:{value:u.state.value,text:u.state.value},query:u.state.value,hide:r.zL.hideVariable});else if(n.Go.isIntervalVariable(u)){const d=(0,o.bx)(u.state.intervals);c.push({...f,current:{text:u.state.value,value:u.state.value},query:d,refresh:u.state.refresh,options:u.state.intervals.map(E=>({value:E,text:E,selected:E===u.state.value})),auto:u.state.autoEnabled,auto_min:u.state.autoMinInterval,auto_count:u.state.autoStepCount})}else if(n.Go.isTextBoxVariable(u)){const d={text:u.state.value,value:u.state.value};c.push({...f,current:d,options:[{...d,selected:!0}],query:u.state.value})}else if(n.Go.isGroupByVariable(u)&&t.$.featureToggles.groupByVariable)c.push({...f,datasource:u.state.datasource,options:u.state.defaultOptions?.map(d=>({text:d.text,value:String(d.value)})),current:{text:u.state.text,value:u.state.value}});else if(n.Go.isAdHocVariable(u))c.push({...f,name:u.state.name,type:"adhoc",datasource:u.state.datasource,baseFilters:u.state.baseFilters,filters:u.state.filters,defaultKeys:u.state.defaultKeys});else throw new Error("Unsupported variable type")}for(const u of c)u.hide===r.zL.dontHide&&delete u.hide,u.skipUrlSync||delete u.skipUrlSync,u.label===""&&delete u.label,u.multi||delete u.multi,u.sort===s.ZG.disabled&&delete u.sort;return c}function l(i){return i.options.map(c=>({value:String(c.value),text:c.label,selected:Array.isArray(i.value)?i.value.includes(c.value):i.value===c.value}))}},85445:(Y,I,e)=>{"use strict";e.d(I,{Al:()=>J,tt:()=>G,EH:()=>N,wM:()=>w});var t=e(2543),n=e(32264),r=e(27857),s=e(34214),o=e(91309),m=e(38477),l=e(33278),i=e(16279),c=e(41507),u=e(74730);class f{constructor(ee,X){this._sceneObject=X,this.state={name:ee,type:"dashboard_macro"}}getValue(ee){const X=(0,u.YQ)(this._sceneObject);switch(ee){case"uid":return X.state.uid||"";case"title":case"name":case"id":default:return X.state.title}}getValueText(){return""}}function d(){const k=r.Go.registerVariableMacro("__dashboard",f);return()=>k()}var E=e(63117),h=e(60656),y=e(42397),a=e(7196),v=e(21970),g=e(7928),b=e(79284),P=e(58029),C=e(41987),D=e(69129),T=e(10154),M=e(32023);function O(k,ee){ee.app=C.Jk.Dashboard,ee.canAddAnnotations=()=>{const X=(0,u.YQ)(k);return!S(X)||!X.canEditDashboard()?!1:!!X.state.meta.annotationsPermissions?.dashboard.canAdd},ee.canEditAnnotations=X=>{const j=(0,u.YQ)(k);return j.canEditDashboard()?X?!!j.state.meta.annotationsPermissions?.dashboard.canEdit:!!j.state.meta.annotationsPermissions?.organization.canEdit:!1},ee.canDeleteAnnotations=X=>{const j=(0,u.YQ)(k);return j.canEditDashboard()?X?!!j.state.meta.annotationsPermissions?.dashboard.canDelete:!!j.state.meta.annotationsPermissions?.organization.canDelete:!1},ee.onAnnotationCreate=async X=>{const j=(0,u.YQ)(k),ne=X.from!==X.to,te={dashboardUID:j.state.uid,panelId:(0,u.Cs)(k),isRegion:ne,time:X.from,timeEnd:ne?X.to:0,tags:X.tags,text:X.description};await(0,T.vJ)(te),p(j),ee.eventBus.publish(new D.We(te))},ee.onAnnotationUpdate=async X=>{const j=(0,u.YQ)(k),ne=X.from!==X.to,te={id:X.id,dashboardUID:j.state.uid,panelId:(0,u.Cs)(k),isRegion:ne,time:X.from,timeEnd:ne?X.to:0,tags:X.tags,text:X.description};await(0,T.rJ)(te),p(j),ee.eventBus.publish(new D.We(te))},ee.onAnnotationDelete=async X=>{await(0,T.Xm)({id:X}),p((0,u.YQ)(k)),ee.eventBus.publish(new D.We({id:X}))},ee.onAddAdHocFilter=X=>{const j=(0,u.YQ)(k),ne=(0,u.un)(k);if(!ne)return;const te=x(j,ne.state.datasource);A(te,X)},ee.onUpdateData=X=>Promise.resolve(!0)}function S(k){const ee=M.b4.getDataLayers(k);for(const X of ee.state.annotationLayers)if(X instanceof r.tV.g&&X.state.isEnabled&&X.state.query.builtIn)return X}function p(k){const ee=S(k);ee&&ee.runLayer()}function x(k,ee){const X=r.jh.getVariables(k);for(const ne of X.state.variables)if(r.Go.isAdHocVariable(ne)){const te=ne.state.datasource;if(te===ee||te?.uid===ee?.uid)return ne}const j=new r.H9({name:"Filters",datasource:ee,useQueriesAsFilterForOptions:!0});return X.setState({variables:[...X.state.variables,j]}),j}function A(k,ee){for(const X of k.state.filters)if(X.key===ee.key){k.setState({filters:k.state.filters.map(j=>j.key===ee.key?ee:j)});return}k.setState({filters:[...k.state.filters,ee]})}var R=e(96556),B=e(7758),U=e(84423);function F(k){return function(X,j){if(j.angularPanelCtrl){X.options={angularOptions:k.getOptionsToRemember()};return}if((!k.options||Object.keys(k.options).length===0)&&(0,t.defaults)(X,k.getOptionsToRemember()),k.autoMigrateFrom){const ne=U.NB[k.autoMigrateFrom]!=null,te=k.getOptionsToRemember(),oe=k.autoMigrateFrom;if(j.onPanelTypeChanged){const ie=ne?{angular:te}:te.options;Object.assign(X.options,j.onPanelTypeChanged(X,oe,ie,X.fieldConfig))}}}}var K=e(70665);function w(k){const ee=new s.G(k.dashboard,k.meta),X=N(ee);return X.setInitialSaveModel(k.dashboard),X}function L(k){const ee=[];let X=null,j=[];for(const ne of k)if(ne.type==="row")X?X.id!==ne.id&&(ee.push(V(X,j)),X=ne,j=[]):ne.collapsed?ee.push(V(ne,[])):X=ne;else if(ne.libraryPanel?.uid&&!("model"in ne.libraryPanel)){const te=J(ne);if(!te)continue;X?j.push(te):ee.push(te)}else{ne.snapshotData&&le(ne);const te=G(ne);X?j.push(te):ee.push(te)}return X&&ee.push(V(X,j)),ee}function V(k,ee){k.collapsed&&k.panels&&(ee=k.panels.map(ne=>{if(ne instanceof s.a||(ne=new s.a(ne)),ne.libraryPanel?.uid&&!("model"in ne.libraryPanel)){const te=J(ne);if(!te)throw new Error("Failed to build grid item for library panel");return te}return G(ne)}));let X,j=ee;return k.repeat&&(X=[new b.L({variableName:k.repeat})]),new r.tI({key:(0,u.XA)(k.id),title:k.title,y:k.gridPos.y,isCollapsed:k.collapsed,children:j,$behaviors:X,actions:new P.u({})})}function N(k){let ee,X=[],j;if(k.templating?.list?.length){const oe=k.templating.list.map(ie=>{try{return z(ie)}catch(ue){return console.error(ue),null}}).filter(ie=>!!ie);ee=new r.Pj({variables:oe})}else ee=new r.Pj({variables:[]});k.annotations?.list?.length&&!k.isSnapshot()&&(X=k.annotations?.list.map(oe=>new m.g({key:(0,t.uniqueId)("annotations-"),query:oe,name:oe.name,isEnabled:!!oe.enable,isHidden:!!oe.hide})));let ne=n.$.unifiedAlertingEnabled;return ne||k.panels.find(oe=>!!oe.alert)&&(ne=!0),ne&&(j=new o.C({key:"alert-states",name:"Alert States"})),new E.H$({description:k.description,editable:k.editable,id:k.id,isDirty:!1,links:k.links||[],meta:k.meta,tags:k.tags||[],title:k.title,uid:k.uid,version:k.version,body:new r.hy({isLazy:!0,children:L(k.panels),$behaviors:[me]}),$timeRange:new r.JZ({from:k.time.from,to:k.time.to,fiscalYearStartMonth:k.fiscalYearStartMonth,timeZone:k.timezone,weekStart:k.weekStart,UNSAFE_nowDelay:k.timepicker?.nowDelay}),$variables:ee,$behaviors:[new r.Gg.K2({sync:k.graphTooltip}),new r.Gg.Hf,d,H,new r.Gg.en({enabled:k.liveNow})],$data:new i.s({annotationLayers:X,alertStatesLayer:j}),controls:new l.x({variableControls:[new r.K8({}),new r.i7],timePicker:new r.KE({}),refreshPicker:new r.WM({refresh:k.refresh,intervals:k.timepicker.refresh_intervals,withText:!0}),hideTimeControls:k.timepicker.hidden})})}function z(k){const ee={name:k.name,label:k.label,description:k.description};if(k.type==="adhoc")return new r.H9({...ee,description:k.description,skipUrlSync:k.skipUrlSync,hide:k.hide,datasource:k.datasource,applyMode:"auto",filters:k.filters??[],baseFilters:k.baseFilters??[],defaultKeys:k.defaultKeys,useQueriesAsFilterForOptions:!0});if(k.type==="custom")return new r.yP({...ee,value:k.current?.value??"",text:k.current?.text??"",query:k.query,isMulti:k.multi,allValue:k.allValue||void 0,includeAll:k.includeAll,defaultToAll:!!k.includeAll,skipUrlSync:k.skipUrlSync,hide:k.hide});if(k.type==="query")return new r.fS({...ee,value:k.current?.value??"",text:k.current?.text??"",query:k.query,datasource:k.datasource,sort:k.sort,refresh:k.refresh,regex:k.regex,allValue:k.allValue||void 0,includeAll:k.includeAll,defaultToAll:!!k.includeAll,isMulti:k.multi,skipUrlSync:k.skipUrlSync,hide:k.hide,definition:k.definition});if(k.type==="datasource")return new r.mI({...ee,value:k.current?.value??"",text:k.current?.text??"",regex:k.regex,pluginId:k.query,allValue:k.allValue||void 0,includeAll:k.includeAll,defaultToAll:!!k.includeAll,skipUrlSync:k.skipUrlSync,isMulti:k.multi,hide:k.hide});if(k.type==="interval"){const X=(0,u.Sm)(k.query),j=(0,u.pk)(k,X);return new r.Yj({...ee,value:j,intervals:X,autoEnabled:k.auto,autoStepCount:k.auto_count,autoMinInterval:k.auto_min,refresh:k.refresh,skipUrlSync:k.skipUrlSync,hide:k.hide})}else{if(k.type==="constant")return new r.x0({...ee,value:k.query,skipUrlSync:k.skipUrlSync,hide:k.hide});if(k.type==="textbox"){let X;return k?.current?.value?typeof k.current.value=="string"?X=k.current.value:X=k.current.value[0]:X=k.query,new r.TS({...ee,value:X,skipUrlSync:k.skipUrlSync,hide:k.hide})}else{if(n.$.featureToggles.groupByVariable&&k.type==="groupby")return new r.ZG({...ee,datasource:k.datasource,value:k.current?.value||[],text:k.current?.text||[],skipUrlSync:k.skipUrlSync,hide:k.hide,defaultOptions:k.options});throw new Error(`Scenes: Unsupported variable type ${k.type}`)}}}function J(k){if(!k.libraryPanel)return null;const ee=new h.F({title:k.title,uid:k.libraryPanel.uid,name:k.libraryPanel.name,panelKey:(0,u.XA)(k.id)});return new c.U({key:`grid-item-${k.id}`,y:k.gridPos.y,x:k.gridPos.x,width:k.gridPos.w,height:k.gridPos.h,itemHeight:k.gridPos.h,body:ee})}function G(k){const ee=k.repeatDirection==="h"?"h":"v",X=k.repeat?{variableName:k.repeat,repeatDirection:ee}:{},j=[];j.push(new y.$({rawLinks:k.links,menu:new y.m({$behaviors:[a.oV]})})),j.push(new v.W);const ne={key:(0,u.XA)(k.id),title:k.title,description:k.description,pluginId:k.type,options:k.options??{},fieldConfig:k.fieldConfig,pluginVersion:k.pluginVersion,displayMode:k.transparent?"transparent":void 0,hoverHeader:!k.title&&!k.timeFrom&&!k.timeShift,hoverHeaderOffset:0,$data:(0,R.w)(k),titleItems:j,extendPanelContext:O,_UNSAFE_customMigrationHandler:F(k)};n.$.publicDashboardAccessToken||(ne.menu=new r.Lw({$behaviors:[a._i]})),(k.timeFrom||k.timeShift)&&(ne.$timeRange=new g.v({timeFrom:k.timeFrom,timeShift:k.timeShift,hideTimeOverride:k.hideTimeOverride}));const te=new r.Eb(ne);return new c.U({key:`grid-item-${k.id}`,x:k.gridPos.x,y:k.gridPos.y,width:ee==="h"?24:k.gridPos.w,height:k.gridPos.h,itemHeight:k.gridPos.h,body:te,maxPerRow:k.maxPerRow,...X})}function H(k){k.subscribeToEvent(r.Kw,ee=>{const{interaction:X}=ee.payload;switch(X){case"panel-status-message-clicked":B.c.panelStatusMessageClicked();break;case"panel-cancel-query-clicked":B.c.panelCancelQueryClicked();break;case"panel-menu-shown":B.c.panelMenuShown();break}})}const q=k=>k.map(ee=>({data:{values:ee.fields.map(X=>X.values).filter(X=>X!==void 0)},schema:{fields:ee.fields.map(X=>({name:X.name,type:X.type,config:X.config}))}})),le=k=>{k.snapshotData&&(k.datasource=K.x,k.targets=[{refId:k.snapshotData[0]?.refId??"",datasource:k.datasource,queryType:"snapshot",snapshot:q(k.snapshotData)}],k.snapshotData=[])};function me(k){(0,u.YQ)(k).setState({isEmpty:k.state.children.length===0});const ee=k.subscribeToState((X,j)=>{(X.children.length!==j.children.length||X.children!==j.children)&&(0,u.YQ)(k).setState({isEmpty:X.children.length===0})});return()=>{ee.unsubscribe()}}},20455:(Y,I,e)=>{"use strict";e.d(I,{Uy:()=>C,Z6:()=>M,ZB:()=>T,c:()=>x});var t=e(2543),n=e.n(t),r=e(92041),s=e(27857),o=e(79422),m=e(73134),l=e(28874),i=e(18803),c=e(79056),u=e(68706),f=e(16279),d=e(41507),E=e(60656),h=e(7928),y=e(79284),a=e(32023),v=e(74730),g=e(70665),b=e(13989),P=e(53287);function C(R,B=!1){const U=R.state,F=U.$timeRange.state,K=U.$data,w=U.$variables,L=U.body;let V=[],N=[];if(L instanceof s.hy){for(const k of L.state.children)if(k instanceof d.U&&(k.state.variableName?V=V.concat(S(k,U,B)):V.push(T(k,U,B))),k instanceof s.tI){if(k.state.key.indexOf("-clone-")>0&&!B)continue;p(k,V,U,B)}}let z=[];K instanceof f.s&&(z=(0,b.O)(K.state.annotationLayers)),w instanceof s.Pj&&(N=(0,P.C)(w));const J=U.controls?.state,G=J?.refreshPicker,H=A({refresh_intervals:G?.state.intervals,hidden:J?.hideTimeControls,nowDelay:F.UNSAFE_nowDelay},o.lt),q=U.$behaviors?.find(k=>k instanceof s.Gg.K2)?.state.sync??o.Ye.graphTooltip,le=U.$behaviors?.find(k=>k instanceof s.Gg.en)?.isEnabled||void 0,me={...o.Ye,title:U.title,description:U.description||void 0,uid:U.uid,id:U.id,editable:U.editable,time:{from:F.from,to:F.to},timepicker:H,panels:V,annotations:{list:z},templating:{list:N},version:U.version,timezone:F.timeZone,fiscalYearStartMonth:F.fiscalYearStartMonth,weekStart:F.weekStart,tags:U.tags,links:U.links,graphTooltip:q,liveNow:le,schemaVersion:c.O2,refresh:G?.state.refresh};return(0,l.v)(me)}function D(R,B){if(!R.state.panel)throw new Error("Library panel has no panel");return{id:(0,v.Cs)(R.state.panel),title:R.state.title,gridPos:B,libraryPanel:{name:R.state.name,uid:R.state.uid}}}function T(R,B,U=!1){let F,K=0,w=0,L=0,V=0;if(R.state.body instanceof E.F)return K=R.state.x??0,w=R.state.y??0,L=R.state.width??0,V=R.state.height??0,D(R.state.body,{x:K,y:w,w:L,h:V});let N=R;if(B&&B.editPanel?.state.vizManager&&B.editPanel.state.vizManager.state.sourcePanel.resolve()===R.state.body){const J=R.clone();J.state.body instanceof s.Eb&&(B.editPanel.state.vizManager.commitChangesTo(J.state.body),N=J)}if(!(N.state.body instanceof s.Eb))throw new Error("DashboardGridItem body expected to be VizPanel");if(F=N.state.body,K=N.state.x??0,w=N.state.y??0,L=N.state.width??0,V=N.state.height??0,!F)throw new Error("Unsupported grid item type");return M(F,{x:K,y:w,h:V,w:L},U,N)}function M(R,B,U=!1,F){const K={id:(0,v.Cs)(R),type:R.state.pluginId,title:R.state.title,description:R.state.description??void 0,gridPos:B,fieldConfig:R.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:R.state.displayMode==="transparent",pluginVersion:R.state.pluginVersion,...O(R,U)};if(R.state.options){const{angularOptions:V,...N}=R.state.options;K.options=N,V&&(0,t.defaults)(K,V)}const w=R.state.$timeRange;w instanceof h.v&&(K.timeFrom=w.state.timeFrom,K.timeShift=w.state.timeShift,K.hideTimeOverride=w.state.hideTimeOverride),F instanceof d.U&&(F.state.variableName&&(K.repeat=F.state.variableName),F.state.maxPerRow&&(K.maxPerRow=F.state.maxPerRow),F.state.repeatDirection&&(K.repeatDirection=F.getRepeatDirection()));const L=a.b4.getPanelLinks(R);return K.links=L?.state.rawLinks??[],K.links.length===0&&delete K.links,K.transformations?.length===0&&delete K.transformations,K.transparent||delete K.transparent,K}function O(R,B=!1){const U=R.state.$data,F={},K=(0,v.un)(R);if(K&&(F.targets=K.state.queries,F.maxDataPoints=K.state.maxDataPoints,F.datasource=K.state.datasource,K.state.cacheTimeout&&(F.cacheTimeout=K.state.cacheTimeout),K.state.queryCachingTTL&&(F.queryCachingTTL=K.state.queryCachingTTL),K.state.minInterval&&(F.interval=K.state.minInterval)),U instanceof s.Es&&(F.transformations=U.state.transformations),U&&B){F.datasource=g.x;let w=(0,i.B6)(U.state.data);U instanceof s.Es&&(w=(0,i.B6)(U.state.$data.state.data)),F.targets=[{refId:"A",datasource:F.datasource,queryType:u.nj.Snapshot,snapshot:w}]}return F}function S(R,B,U=!1){if(U){if(R.state.body instanceof E.F){const{x:F=0,y:K=0,width:w=0,height:L=0}=R.state;return[D(R.state.body,{x:F,y:K,w,h:L})]}if(R.state.repeatedPanels){const F=R.state.itemHeight??10,K=Math.ceil(R.state.repeatedPanels.length/R.getMaxPerRow()),w=Math.ceil(R.state.repeatedPanels.length/K),L=24/w,V=F;return R.state.repeatedPanels.map((z,J)=>{let G=0,H=0;R.state.repeatDirection==="v"?(G=R.state.x,H=J*V):(G=J%w*L,H=R.state.y+Math.floor(J/w)*V);const q={x:G,y:H,w:L,h:V},le=z.state.$variables.getByName(R.state.variableName);return{id:(0,v.Cs)(z),type:z.state.pluginId,title:z.state.title,gridPos:q,options:z.state.options,fieldConfig:z.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:z.state.displayMode==="transparent",scopedVars:{[R.state.variableName]:{text:le?.state.text,value:le?.state.value}},...O(z,U)}})}return[]}else return[T(R,B)]}function p(R,B,U,F=!1){const K=!!R.state.isCollapsed,w={type:"row",id:(0,v.Cs)(R),title:R.state.title,gridPos:{x:R.state.x??0,y:R.state.y??0,w:R.state.width??24,h:R.state.height??1},collapsed:K,panels:[]};if(R.state.$behaviors?.length){const V=R.state.$behaviors[0];V instanceof y.L&&(w.repeat=V.state.variableName)}if(F&&R.state.$variables){const N=R.state.$variables.state.variables.reduce((z,J)=>({...z,[J.state.name]:{text:J.state.text,value:J.state.value}}),{});w.scopedVars=N}B.push(w);let L=[];F?R.state.children.forEach(V=>{V instanceof d.U&&(V.state.variableName?L=L.concat(S(V,U,!K)):L.push(T(V,U,!K)))}):L=R.state.children.map(V=>{if(!(V instanceof d.U))throw new Error("Row child expected to be DashboardGridItem");return T(V,U)}),R.state.isCollapsed?w.panels=L:B.push(...L)}function x(R,B,U,F){let K={...U,title:R,time:{from:B.from.toISOString(),to:B.to.toISOString()},links:[]};if(F){const w=U.panels?.find(L=>L.id===(0,v.Cs)(F));w&&(w.gridPos={w:24,x:0,y:0,h:20},K={...K,panels:[w]})}if(K.panels?.forEach(w=>{"links"in w&&(w.links=[])}),K.annotations){const L=(K.annotations.list?.filter(V=>V.enable)||[]).map(V=>({name:V.name,enable:V.enable,iconColor:V.iconColor,type:V.type,builtIn:V.builtIn,hide:V.hide,snapshotData:[]}));K.annotations.list=L}return K.templating&&K.templating.list?.forEach(w=>{"query"in w&&(w.query=""),"options"in w&&(w.options=w.current&&!(0,r.R)(w.current)?[w.current]:[]),"refresh"in w&&(w.refresh=m.CO.never)}),K}function A(R,B){const U={...R};for(const F in B)(0,t.isEqual)(U[F],B[F])&&delete U[F];return U}},46502:(Y,I,e)=>{"use strict";e.d(I,{F:()=>r});var t=e(96540),n=e(7376);class r extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(o){o.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const o=(0,n.E)(),m='<plugin-component type="annotations-query-ctrl"> </plugin-component>',l={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=o.load(this.ref,l,m),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(l.ctrl.ignoreNextWatcherFiring){l.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(l.ctrl.currentAnnotation)}),this.scopeProps=l}render(){return t.createElement("div",{ref:o=>this.ref=o})}}},65857:(Y,I,e)=>{"use strict";e.d(I,{d:()=>d});var t=e(96540),n=e(88575),r=e(10354),s=e(88323),o=e(79924),m=e(57418),l=e(10880),i=e(55852),c=e(4588);const u=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],f=Object.keys(c.G).map(E=>({label:E,value:E}));function d({link:E,onUpdate:h,onGoBack:y}){const a=C=>{h({...E,tags:C})},v=C=>{const D={...E,type:C.value};D.type==="dashboards"?(D.url="",D.tooltip=""):D.tags=[],h(D)},g=C=>{h({...E,icon:C.value})},b=C=>{const D=C.currentTarget;h({...E,[D.name]:D.type==="checkbox"?D.checked:D.value})},P=E.title===c.q.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.D,{label:"Title"},t.createElement(r.p,{name:"title",id:"title",value:E.title,onChange:b,autoFocus:P})),t.createElement(n.D,{label:"Type"},t.createElement(s.l6,{inputId:"link-type-input",value:E.type,options:u,onChange:v})),E.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.D,{label:"With tags"},t.createElement(o.u,{tags:E.tags,onChange:a}))),E.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.D,{label:"URL"},t.createElement(r.p,{name:"url",value:E.url,onChange:b})),t.createElement(n.D,{label:"Tooltip"},t.createElement(r.p,{name:"tooltip",value:E.tooltip,onChange:b,placeholder:"Open dashboard"})),t.createElement(n.D,{label:"Icon"},t.createElement(s.l6,{value:E.icon,options:f,onChange:g}))),t.createElement(m.M,{label:"Options",isOpen:!0},E.type==="dashboards"&&t.createElement(n.D,null,t.createElement(l.S,{label:"Show as dropdown",name:"asDropdown",value:E.asDropdown,onChange:b})),t.createElement(n.D,null,t.createElement(l.S,{label:"Include current time range",name:"keepTime",value:E.keepTime,onChange:b})),t.createElement(n.D,null,t.createElement(l.S,{label:"Include current template variable values",name:"includeVars",value:E.includeVars,onChange:b})),t.createElement(n.D,null,t.createElement(l.S,{label:"Open link in new tab",name:"targetBlank",value:E.targetBlank,onChange:b}))),t.createElement(i.$n,{variant:"secondary",onClick:y},"Back to list"))}},6199:(Y,I,e)=>{"use strict";e.d(I,{X:()=>f});var t=e(32196),n=e(96540),r=e(40845),s=e(14578),o=e(66864),m=e(64149),l=e(29158),i=e(91605),c=e(55852),u=e(7521);function f({links:E,onNew:h,onOrderChange:y,onEdit:a,onDuplicate:v,onDelete:g}){const b=(0,r.of)(d);return E.length===0?n.createElement("div",null,n.createElement(u.A,{onClick:h,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):n.createElement(n.Fragment,null,n.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Type"),n.createElement("th",null,"Info"),n.createElement("th",{colSpan:3}))),n.createElement("tbody",null,E.map((C,D)=>n.createElement("tr",{key:`${C.title}-${D}`},n.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>a(D)},n.createElement(s.I,{name:"external-link-alt"})," \xA0 ",C.type),n.createElement("td",{role:"gridcell"},n.createElement(o.Gy,null,C.title&&n.createElement("span",{className:b.titleWrapper},C.title),C.type==="link"&&n.createElement("span",{className:b.urlWrapper},C.url),C.type==="dashboards"&&n.createElement(m.L,{tags:C.tags??[]}))),n.createElement("td",{style:{width:"1%"},role:"gridcell"},D!==0&&n.createElement(l.K,{name:"arrow-up",onClick:()=>y(D,-1),tooltip:"Move link up"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},E.length>1&&D!==E.length-1?n.createElement(l.K,{name:"arrow-down",onClick:()=>y(D,1),tooltip:"Move link down"}):null),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(l.K,{name:"copy",onClick:()=>v(C),tooltip:"Copy link"})),n.createElement("td",{style:{width:"1%"},role:"gridcell"},n.createElement(i.e,{"aria-label":`Delete link with title "${C.title}"`,size:"sm",onConfirm:()=>g(D)})))))),n.createElement(c.$n,{className:b.newLinkButton,icon:"plus",onClick:h},"New link"))}const d=E=>({titleWrapper:(0,t.css)({width:"20vw",textOverflow:"ellipsis",overflow:"hidden"}),urlWrapper:(0,t.css)({width:"40vw",textOverflow:"ellipsis",overflow:"hidden"}),newLinkButton:(0,t.css)({marginTop:E.spacing(3)})})},4588:(Y,I,e)=>{"use strict";e.d(I,{G:()=>n,q:()=>t});const t={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},n={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"}},27803:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>u});var t=e(96540),n=e(72436),r=e(13544),s=e(88575),o=e(42418),m=e(15292),l=e(32372),i=e(51612),c=e(58975);function u({datasource:f,infoText:d,onDataSourceChange:E,onDefaultKeysChange:h,defaultKeys:y}){const a=(0,t.useCallback)(v=>{const g=(0,n.Jh)(`key,value
`+v)[0],b=[];for(let P=0;P<g.length;P++)b.push({text:g.fields[0].values[P],value:g.fields[1].values[P]});h?.(b)},[h]);return t.createElement(t.Fragment,null,t.createElement(c.Y,null,"Ad-hoc options"),t.createElement(s.D,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(i.s,{current:f,onChange:E,width:30,variables:!0,noDefault:!0})),d?t.createElement(o.F,{title:d,severity:"info","data-testid":r.Tp.pages.Dashboard.Settings.Variables.Edit.AdHocFiltersVariable.infoText}):null,h&&t.createElement(t.Fragment,null,t.createElement(s.D,{label:"Use static key dimensions",description:"Provide dimensions as CSV: dimensionName, dimensionId"},t.createElement(m.d,{"data-testid":r.Tp.pages.Dashboard.Settings.Variables.Edit.AdHocFiltersVariable.modeToggle,value:y!==void 0,onChange:v=>{h(y===void 0?[]:void 0)}})),y!==void 0&&t.createElement(l.B,{height:300,language:"csv",value:y.map(v=>`${v.text},${v.value}`).join(`
`),onBlur:a,onSave:a,showMiniMap:!1,showLineNumbers:!0})))}},95802:(Y,I,e)=>{"use strict";e.d(I,{d:()=>o});var t=e(96540),n=e(13544),r=e(58975),s=e(14329);function o({onChange:m,constantValue:l}){return t.createElement(t.Fragment,null,t.createElement(r.Y,null,"Constant options"),t.createElement(s._,{defaultValue:l,name:"Value",placeholder:"your metric prefix",onBlur:m,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}},58711:(Y,I,e)=>{"use strict";e.d(I,{w:()=>m});var t=e(96540),n=e(13544),r=e(58975),s=e(85140),o=e(94618);function m({query:l,multi:i,allValue:c,includeAll:u,onQueryChange:f,onMultiChange:d,onIncludeAllChange:E,onAllValueChange:h}){return t.createElement(t.Fragment,null,t.createElement(r.Y,null,"Custom options"),t.createElement(s.Z,{name:"Values separated by comma",defaultValue:l,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onBlur:f,required:!0,width:52,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),t.createElement(r.Y,null,"Selection options"),t.createElement(o.B,{multi:i,includeAll:u,allValue:c,onMultiChange:d,onIncludeAllChange:E,onAllValueChange:h}))}},98917:(Y,I,e)=>{"use strict";e.d(I,{y:()=>l});var t=e(96540),n=e(13544),r=e(94618),s=e(58975),o=e(89458),m=e(14329);function l({query:i,regex:c,optionTypes:u,onChange:f,onRegExBlur:d,multi:E,includeAll:h,allValue:y,onMultiChange:a,onIncludeAllChange:v,onAllValueChange:g}){const b=u.find(P=>P.value===i)??u[0];return t.createElement(t.Fragment,null,t.createElement(s.Y,null,"Data source options"),t.createElement(o.v,{name:"Type",value:b,options:u,onChange:f,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),t.createElement(m._,{defaultValue:c,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onBlur:d,description:t.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",t.createElement("br",null),t.createElement("br",null),"Example: ",t.createElement("code",null,"/^prod/"))}),t.createElement(s.Y,null,"Selection options"),t.createElement(r.B,{multi:E,includeAll:h,allValue:y,onMultiChange:a,onIncludeAllChange:v,onAllValueChange:g}))}},49317:(Y,I,e)=>{"use strict";e.d(I,{s:()=>c});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(99615),m=e(58975),l=e(89458),i=e(14329);function c({intervals:f,onIntervalsChange:d,onAutoEnabledChange:E,onAutoMinIntervalChanged:h,onAutoCountChanged:y,autoEnabled:a,autoMinInterval:v,autoStepCount:g}){const b=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(D=>({label:`${D}`,value:D})),P=(0,s.of)(u),C=b.find(D=>D.value===g)??b[0];return n.createElement(n.Fragment,null,n.createElement(m.Y,null,"Interval options"),n.createElement(i._,{defaultValue:f,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onBlur:d,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),n.createElement(o.c,{value:a,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:E,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.autoEnabledCheckbox}),a&&n.createElement("div",{className:P.autoFields},n.createElement(l.v,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:C,options:b,onChange:y,width:9,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.stepCountIntervalSelect}),n.createElement(i._,{value:v,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:h,width:11,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.minIntervalInput})))}const u=f=>({autoFields:(0,t.css)({marginTop:f.spacing(2),display:"flex",flexDirection:"column"})})},44890:(Y,I,e)=>{"use strict";e.d(I,{u:()=>p});var t=e(96540),n=e(16817),r=e(13544),s=e(19347),o=e(88575),m=e(39070),l=e(72574),i=e(90613),c=e(94753),u=e(24240);function f({query:x,datasource:A,VariableQueryEditor:R,onLegacyQueryChange:B,onQueryChange:U,timeRange:F}){let K;return typeof x=="string"?K=x||(A.variables?.getDefaultQuery?.()??""):K={...A.variables?.getDefaultQuery?.(),...x},R&&(0,u.VN)(R,A)?t.createElement(i.a,{marginBottom:2},t.createElement(c.E,{element:"h4"},"Query"),t.createElement(i.a,{marginTop:1},t.createElement(R,{key:A.uid,datasource:A,query:K,templateSrv:(0,l.w)(),onChange:B}))):R&&(0,u.CH)(R,A)?t.createElement(i.a,{marginBottom:2},t.createElement(c.E,{element:"h4"},"Query"),t.createElement(i.a,{marginTop:1},t.createElement(R,{key:A.uid,datasource:A,query:K,onChange:U,onRunQuery:()=>{},data:{series:[],state:m.Gu.Done,timeRange:F},range:F,onBlur:()=>{},history:[]}))):null}var d=e(94618),E=e(51612),h=e(70766),y=e(12470),a=e(40845),v=e(94354),g=e(60619);const b=[{label:"On dashboard load",value:y.CO.onDashboardLoad},{label:"On time range change",value:y.CO.onTimeRangeChanged}];function P({onChange:x,refresh:A,testId:R}){const B=(0,a.$j)(),[U,F]=(0,t.useState)(!1);(0,g.Y)({breakpoint:B.breakpoints.values.sm,onChange:w=>{F(!w.matches)}});const K=(0,t.useMemo)(()=>b.find(w=>w.value===A)?.value??b[0].value,[A]);return t.createElement(o.D,{label:"Refresh",description:"When to update the values of this variable","data-testid":R},t.createElement(v.z,{options:b,onChange:x,value:K,size:U?"sm":"md"}))}var C=e(89458),D=e(80484);const T=[{label:"Disabled",value:D.ZG.disabled},{label:"Alphabetical (asc)",value:D.ZG.alphabeticalAsc},{label:"Alphabetical (desc)",value:D.ZG.alphabeticalDesc},{label:"Numerical (asc)",value:D.ZG.numericalAsc},{label:"Numerical (desc)",value:D.ZG.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:D.ZG.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:D.ZG.alphabeticalCaseInsensitiveDesc},{label:"Natural (asc)",value:D.ZG.naturalAsc},{label:"Natural (desc)",value:D.ZG.naturalDesc}];function M({onChange:x,sort:A,testId:R}){const B=(0,t.useMemo)(()=>T.find(U=>U.value===A)??T[0],[A]);return t.createElement(C.v,{name:"Sort",description:"How to sort the values of this variable",value:B,options:T,onChange:x,testId:R,width:25})}var O=e(58975),S=e(85140);function p({datasource:x,onDataSourceChange:A,query:R,onQueryChange:B,onLegacyQueryChange:U,timeRange:F,regex:K,onRegExChange:w,sort:L,onSortChange:V,refresh:N,onRefreshChange:z,isMulti:J,onMultiChange:G,includeAll:H,onIncludeAllChange:q,allValue:le,onAllValueChange:me}){const{value:k}=(0,n.A)(async()=>{const j=await(0,s.l)().get(x??""),ne=await(0,h.y)(j);return{datasource:j,VariableQueryEditor:ne}},[x]),{datasource:ee,VariableQueryEditor:X}=k??{};return t.createElement(t.Fragment,null,t.createElement(O.Y,null,"Query options"),t.createElement(o.D,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(E.s,{current:x,onChange:A,variables:!0,width:30})),ee&&X&&t.createElement(f,{onQueryChange:B,onLegacyQueryChange:U,datasource:ee,query:R,VariableQueryEditor:X,timeRange:F}),t.createElement(S.Z,{defaultValue:K??"",name:"Regex",description:t.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",t.createElement("br",null),"Named capture groups can be used to separate the display text and value (",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onBlur:w,testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),t.createElement(M,{testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,onChange:V,sort:L}),t.createElement(P,{testId:r.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelectV2,onChange:z,refresh:N}),t.createElement(O.Y,null,"Selection options"),t.createElement(d.B,{multi:!!J,includeAll:!!H,allValue:le,onMultiChange:G,onIncludeAllChange:q,onAllValueChange:me}))}},94618:(Y,I,e)=>{"use strict";e.d(I,{B:()=>m});var t=e(96540),n=e(13544),r=e(66864),s=e(99615),o=e(14329);function m({multi:l,includeAll:i,allValue:c,onMultiChange:u,onIncludeAllChange:f,onAllValueChange:d}){return t.createElement(r.gW,{spacing:"md",height:"inherit"},t.createElement(s.c,{value:l,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:u,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsMultiSwitch}),t.createElement(s.c,{value:i,name:"Include All option",description:"Enables an option to include all variables",onChange:f,testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsIncludeAllSwitch}),i&&t.createElement(o._,{defaultValue:c??"",onBlur:d,name:"Custom all value",placeholder:"blank = auto",testId:n.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInput}))}},99615:(Y,I,e)=>{"use strict";e.d(I,{c:()=>s});var t=e(16792),n=e(96540),r=e(10880);function s({value:o,name:m,description:l,onChange:i,ariaLabel:c,testId:u}){const f=(0,t.Bi)();return n.createElement(r.S,{id:f,label:m,description:l,value:o,onChange:i,"aria-label":c,"data-testid":u})}},8964:(Y,I,e)=>{"use strict";e.d(I,{D:()=>m});var t=e(96540),n=e(12470),r=e(88575),s=e(94354);const o=[{label:"Label and value",value:n.zL.dontHide},{label:"Value",value:n.zL.hideLabel},{label:"Nothing",value:n.zL.hideVariable}];function m({onChange:l,hide:i,type:c}){const u=(0,t.useMemo)(()=>o.find(f=>f.value===i)?.value??o[0].value,[i]);return c==="constant"?null:t.createElement(r.D,{label:"Show on dashboard"},t.createElement(s.z,{options:o,onChange:l,value:u}))}},58975:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(17408);function o({className:l,...i}){const c=(0,r.of)(m);return n.createElement(s.s,{...i,className:(0,t.cx)(c.legend,l)})}function m(l){return{legend:(0,t.css)({marginTop:l.spacing(3),marginBottom:l.spacing(1)})}}},89458:(Y,I,e)=>{"use strict";e.d(I,{v:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(88575),o=e(88323);function m({name:i,description:c,value:u,options:f,onChange:d,testId:E,width:h}){const y=(0,r.of)(l),a=(0,n.useId)(),v=`variable-select-input-${i}-${a}`;return n.createElement(s.D,{label:i,description:c,htmlFor:v},n.createElement(o.l6,{"data-testid":E,inputId:v,onChange:d,value:u,width:h??30,options:f,className:y.selectContainer}))}function l(i){return{selectContainer:(0,t.css)({marginRight:i.spacing(.5)})}}},85140:(Y,I,e)=>{"use strict";e.d(I,{$:()=>i,Z:()=>l});var t=e(32196),n=e(16792),r=e(96540),s=e(40845),o=e(88575),m=e(21744);function l({value:c,defaultValue:u,name:f,description:d,placeholder:E,onChange:h,onBlur:y,ariaLabel:a,required:v,width:g,testId:b}){const P=(0,s.of)(i),C=(0,n.Bi)();return r.createElement(o.D,{label:f,description:d,htmlFor:C},r.createElement(m.f,{id:C,rows:2,value:c,defaultValue:u,onChange:h,onBlur:y,placeholder:E,required:v,"aria-label":a,cols:g,className:P.textarea,"data-testid":b}))}function i(c){return{textarea:(0,t.css)({whiteSpace:"pre-wrap",minHeight:c.spacing(4),height:"auto",overflow:"auto",padding:`${c.spacing(.75)} ${c.spacing(1)}`,width:"inherit",[c.breakpoints.down("sm")]:{width:"100%"}})}}},14329:(Y,I,e)=>{"use strict";e.d(I,{_:()=>o});var t=e(16792),n=e(96540),r=e(88575),s=e(10354);function o({value:m,defaultValue:l,name:i,placeholder:c="",onChange:u,testId:f,width:d,required:E,onBlur:h,grow:y,description:a,invalid:v,error:g,maxLength:b}){const P=(0,t.Bi)(i);return n.createElement(r.D,{label:i,description:a,invalid:v,error:g,htmlFor:P},n.createElement(s.p,{type:"text",id:P,placeholder:c,value:m,defaultValue:l,onChange:u,onBlur:h,width:y?void 0:d??30,"data-testid":f,maxLength:b,required:E}))}},41820:(Y,I,e)=>{"use strict";e.d(I,{j:()=>i});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(39268),m=e(76892),l=e(55852);const i=({options:u})=>{const[f,d]=(0,n.useState)(20),[E,h]=(0,n.useState)([]),y=(0,n.useCallback)(v=>{v.preventDefault(),d(f+20)},[f,d]),a=(0,s.of)(c);return(0,n.useEffect)(()=>h(u.slice(0,f)),[f,u]),E.length?n.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},n.createElement("h5",null,"Preview of values"),n.createElement(o.C,null,E.map((v,g)=>n.createElement(o.C,{key:`${v.value}-${g}`,className:a.optionContainer},n.createElement(m.c,{"data-testid":r.Tp.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},n.createElement("div",{className:a.label},v.label))))),u.length>f&&n.createElement(o.C,{className:a.optionContainer},n.createElement(l.$n,{onClick:y,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};i.displayName="VariableValuesPreview";function c(u){return{wrapper:(0,t.css)({display:"flex",flexDirection:"column",marginTop:u.spacing(2)}),optionContainer:(0,t.css)({marginLeft:u.spacing(.5),marginBottom:u.spacing(.5)}),label:(0,t.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}},17663:(Y,I,e)=>{"use strict";e.d(I,{cH:()=>ee,mJ:()=>X,Ao:()=>q,e4:()=>le,kh:()=>J,CD:()=>N,No:()=>z,B$:()=>V,n_:()=>H,bZ:()=>K,c7:()=>k});var t=e(2543),n=e(32264),r=e(19347),s=e(27857),o=e(79422),m=e(74730),l=e(96540),i=e(16817),c=e(27803);function u(j){const{variable:ne}=j,{datasource:te,defaultKeys:oe}=ne.useState(),{value:ie}=(0,i.A)(async()=>await(0,r.l)().get(te),[te]),ue=ie?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.",be=re=>{const ye={uid:re.uid,type:re.type};ne.setState({datasource:ye})},ge=re=>{ne.setState({defaultKeys:re})};return l.createElement(c.Q,{datasource:te??void 0,infoText:ue,onDataSourceChange:be,defaultKeys:oe,onDefaultKeysChange:ge})}var f=e(95802);function d({variable:j}){const{value:ne}=j.useState(),te=oe=>{j.setState({value:oe.currentTarget.value})};return l.createElement(f.d,{constantValue:String(ne),onChange:te})}var E=e(58711);function h({variable:j,onRunQuery:ne}){const{query:te,isMulti:oe,allValue:ie,includeAll:ue}=j.useState(),be=Be=>{j.setState({isMulti:Be.currentTarget.checked})},ge=Be=>{j.setState({includeAll:Be.currentTarget.checked})},re=Be=>{j.setState({query:Be.currentTarget.value}),ne()},ye=Be=>{j.setState({allValue:Be.currentTarget.value})};return l.createElement(E.w,{query:te??"",multi:!!oe,allValue:ie??"",includeAll:!!ue,onMultiChange:be,onIncludeAllChange:ge,onQueryChange:re,onAllValueChange:ye})}var y=e(98917);function a({variable:j,onRunQuery:ne}){const{pluginId:te,regex:oe,isMulti:ie,allValue:ue,includeAll:be}=j.useState(),ge=le(),re=ke=>{j.setState({pluginId:ke.value}),ne()},ye=ke=>{j.setState({regex:ke.currentTarget.value}),ne()},Be=ke=>{j.setState({isMulti:ke.currentTarget.checked})},ve=ke=>{j.setState({includeAll:ke.currentTarget.checked})},Me=ke=>{j.setState({allValue:ke.currentTarget.value})};return l.createElement(y.y,{query:te,regex:oe,multi:ie||!1,allValue:ue,includeAll:be||!1,optionTypes:ge,onChange:re,onRegExBlur:ye,onMultiChange:Be,onIncludeAllChange:ve,onAllValueChange:Me})}var v=e(72436),g=e(13544),b=e(88575),P=e(42418),C=e(15292),D=e(32372),T=e(51612),M=e(58975);function O({datasource:j,defaultOptions:ne,infoText:te,onDataSourceChange:oe,onDefaultOptionsChange:ie}){const ue=(0,l.useCallback)(be=>{const ge=(0,v.Jh)(`key,value
`+be)[0],re=[];for(let ye=0;ye<ge.length;ye++)re.push({text:ge.fields[0].values[ye],value:ge.fields[1].values[ye]});ie(re)},[ie]);return l.createElement(l.Fragment,null,l.createElement(M.Y,null,"Group by options"),l.createElement(b.D,{label:"Data source",htmlFor:"data-source-picker"},l.createElement(T.s,{current:j,onChange:oe,width:30,variables:!0,noDefault:!0})),te?l.createElement(P.F,{title:te,severity:"info","data-testid":g.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.infoText}):null,l.createElement(b.D,{label:"Use static Group By dimensions",description:"Provide dimensions as CSV: dimensionName, dimensionId"},l.createElement(C.d,{"data-testid":g.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.modeToggle,value:ne!==void 0,onChange:be=>{ie(ne===void 0?[]:void 0)}})),ne!==void 0&&l.createElement(D.B,{height:300,language:"csv",value:ne.map(be=>`${be.text},${be.value}`).join(`
`),onBlur:ue,onSave:ue,showMiniMap:!1,showLineNumbers:!0}))}function S(j){const{variable:ne,onRunQuery:te}=j,{datasource:oe,defaultOptions:ie}=ne.useState(),{value:ue}=(0,i.A)(async()=>await(0,r.l)().get(oe),[ne.state]),be=ue?.getTagKeys?"Group by dimensions are applied automatically to all queries that target this data source":"This data source does not support group by variable yet.",ge=async ye=>{const Be={uid:ye.uid,type:ye.type};ne.setState({datasource:Be}),te()},re=async ye=>{ne.setState({defaultOptions:ye}),te()};return l.createElement(O,{defaultOptions:ie,datasource:oe??void 0,infoText:oe?be:void 0,onDataSourceChange:ge,onDefaultOptionsChange:re})}var p=e(49317);function x({variable:j,onRunQuery:ne}){const{intervals:te,autoStepCount:oe,autoEnabled:ie,autoMinInterval:ue,value:be}=j.useState(),ge=(0,m.bx)(te),re=Me=>{const ke=(0,m.Sm)(Me.currentTarget.value),Se=ke.includes(be)?be:ke[0];j.setState({intervals:ke,value:Se}),ne()},ye=Me=>{j.setState({autoStepCount:Me.value})},Be=Me=>{j.setState({autoEnabled:Me.target.checked})},ve=Me=>{j.setState({autoMinInterval:Me.currentTarget.value})};return l.createElement(p.s,{intervals:ge,autoStepCount:oe,autoEnabled:ie,onAutoCountChanged:ye,onIntervalsChange:re,onAutoEnabledChange:Be,onAutoMinIntervalChanged:ve,autoMinInterval:ue})}var A=e(44890);function R({variable:j,onRunQuery:ne}){const{datasource:te,regex:oe,sort:ie,refresh:ue,isMulti:be,includeAll:ge,allValue:re,query:ye}=j.useState(),{value:Be}=s.jh.getTimeRange(j).useState(),ve=Le=>{j.setState({regex:Le.currentTarget.value})},Me=Le=>{j.setState({sort:Le.value})},ke=Le=>{j.setState({refresh:Le})},Se=Le=>{j.setState({isMulti:Le.currentTarget.checked})},We=Le=>{j.setState({includeAll:Le.currentTarget.checked})},De=Le=>{j.setState({allValue:Le.currentTarget.value})},pe=Le=>{const He={uid:Le.uid,type:Le.type};if(j.state.datasource&&j.state.datasource.type!==He.type){j.setState({datasource:He,query:"",definition:""});return}j.setState({datasource:He})},Ne=Le=>{let He;typeof Le=="string"?He=Le:Le.hasOwnProperty("query")&&typeof Le.query=="string"?He=Le.query:He="",j.setState({query:Le,definition:He}),ne()};return l.createElement(A.u,{datasource:te??void 0,onDataSourceChange:pe,query:ye,onQueryChange:Ne,onLegacyQueryChange:Ne,timeRange:Be,regex:oe,onRegExChange:ve,sort:ie,onSortChange:Me,refresh:ue,onRefreshChange:ke,isMulti:!!be,onMultiChange:Se,includeAll:!!ge,onIncludeAllChange:We,allValue:re??"",onAllValueChange:De})}var B=e(14329);function U({defaultValue:j,value:ne,onChange:te,onBlur:oe}){return l.createElement(l.Fragment,null,l.createElement(M.Y,null,"Text options"),l.createElement(B._,{value:ne,defaultValue:j,name:"Default value",placeholder:"default value, if any",onChange:te,onBlur:oe,width:30,testId:g.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function F({variable:j}){const{value:ne}=j.useState(),te=oe=>{j.setState({value:oe.currentTarget.value})};return l.createElement(U,{defaultValue:ne,onBlur:te})}function K(j){return j!=="system"}const w={custom:{name:"Custom",description:"Define variable values manually",editor:h},query:{name:"Query",description:"Variable values are fetched from a datasource query",editor:R},constant:{name:"Constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share",editor:d},interval:{name:"Interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",editor:x},datasource:{name:"Data source",description:"Enables you to dynamically switch the data source for multiple panels",editor:a},adhoc:{name:"Ad hoc filters",description:"Add key/value filters on the fly",editor:u},groupby:{name:"Group by",description:"Add keys to group by on the fly",editor:S},textbox:{name:"Textbox",description:"Define a textbox variable, where users can enter any arbitrary string",editor:F}},L=["query","custom","textbox","constant","datasource","interval","adhoc","groupby"];function V(){const j=L.map(ne=>({label:w[ne].name,value:ne,description:w[ne].description}));return n.$.featureToggles.groupByVariable?j:j.filter(ne=>ne.value!=="groupby")}function N(j){return w[j].editor}function z(j,ne){switch(j){case"custom":return new s.yP(ne);case"query":return new s.fS(ne);case"constant":return new s.x0({...ne,hide:o.zL.hideVariable});case"interval":return new s.Yj(ne);case"datasource":return new s.mI(ne);case"adhoc":return new s.H9(ne);case"groupby":return new s.ZG(ne);case"textbox":return new s.TS(ne)}}function J(j){const te=G("query",j);return new s.fS({name:te})}function G(j,ne){let te=0,oe=`${j}${te}`;for(;ne.find(ie=>ie.state.name===oe);)oe=`${j}${++te}`;return oe}function H(j){return"options"in j.state||"intervals"in j.state}function q(j){let ne="";return j instanceof s.fS?ne=j.state.definition||(typeof j.state.query=="string"?j.state.query:""):j instanceof s.mI?ne=String(j.state.pluginId):j instanceof s.yP?ne=j.state.query:j instanceof s.Yj?ne=(0,m.bx)(j.state.intervals):(j instanceof s.TS||j instanceof s.x0)&&(ne=String(j.state.value)),ne}function le(){const j=(0,r.l)().getList({metrics:!0,variables:!0}),ne=(0,t.chain)(j).uniqBy("meta.id").map(te=>({label:te.meta.name,value:te.meta.id})).value();return ne.unshift({label:"",value:""}),ne}function me(j){return"type"in j.state&&"getValue"in j}function k(j){return me(j)?s.Go.isAdHocVariable(j)||s.Go.isConstantVariable(j)||s.Go.isCustomVariable(j)||s.Go.isDataSourceVariable(j)||s.Go.isIntervalVariable(j)||s.Go.isQueryVariable(j)||s.Go.isTextBoxVariable(j)||s.Go.isGroupByVariable(j):!1}const ee=/^(?!__).*$/,X=/^\w+$/},19626:(Y,I,e)=>{"use strict";e.d(I,{D:()=>d});var t=e(32196),n=e(2543),r=e(96540),s=e(40845),o=e(14578);const m=({diff:h})=>{const y=(0,s.of)(l),a=!(0,n.isUndefined)(h.originalValue)&&!(0,n.isArray)(h.originalValue)&&!(0,n.isObject)(h.originalValue),v=!(0,n.isUndefined)(h.value)&&!(0,n.isArray)(h.value)&&!(0,n.isObject)(h.value);return r.createElement(r.Fragment,null,a&&r.createElement("span",{className:y},String(h.originalValue)),a&&v?r.createElement(o.I,{name:"arrow-right"}):null,v&&r.createElement("span",{className:y},String(h.value)))},l=h=>(0,t.css)({backgroundColor:h.colors.action.hover,borderRadius:h.shape.radius.default,color:h.colors.text.primary,fontSize:h.typography.body.fontSize,margin:h.spacing(0,.5),padding:h.spacing(.25,.5)});var i=e(56596);const c={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0,endLineNumber:0},u=({diff:h,title:y})=>{const a=(0,s.of)(f);return h?r.createElement(r.Fragment,null,r.createElement(o.I,{type:"mono",name:"circle",className:a[h.op],size:"xs"})," ",r.createElement("span",{className:a.embolden},y)," ",r.createElement("span",null,(0,i.Fl)(h,h.path.length>1))," ",r.createElement(m,{diff:h})):r.createElement("div",{className:a.withoutDiff},r.createElement(o.I,{type:"mono",name:"circle",className:a.replace,size:"xs"})," ",r.createElement("span",{className:a.embolden},y)," ",r.createElement("span",null,(0,i.Fl)(c,!1)))},f=h=>({embolden:(0,t.css)({fontWeight:h.typography.fontWeightBold}),add:(0,t.css)({color:h.colors.success.main}),replace:(0,t.css)({color:h.colors.success.main}),move:(0,t.css)({color:h.colors.success.main}),copy:(0,t.css)({color:h.colors.success.main}),_get:(0,t.css)({color:h.colors.success.main}),test:(0,t.css)({color:h.colors.success.main}),remove:(0,t.css)({color:h.colors.success.main}),withoutDiff:(0,t.css)({marginBottom:h.spacing(1)})}),d=({diffs:h,title:y})=>{const a=(0,s.of)(E);return h.length===1?r.createElement("div",{className:a.container,"data-testid":"diffGroup"},r.createElement(u,{title:y,diff:h[0]})):r.createElement("div",{className:a.container,"data-testid":"diffGroup"},r.createElement(u,{title:y}),r.createElement("ul",{className:a.list},h.map((v,g)=>r.createElement("li",{className:a.listItem,key:`${(0,n.last)(v.path)}__${g}`},r.createElement("span",null,(0,i.Fl)(v))," ",r.createElement(m,{diff:v})))))},E=h=>({container:(0,t.css)({}),list:(0,t.css)({marginLeft:h.spacing(4)}),listItem:(0,t.css)({marginBottom:h.spacing(1),"&:last-child":{marginBottom:0}})})},22764:(Y,I,e)=>{"use strict";e.d(I,{M:()=>l});var t=e(32196),n=e(96540),r=e(24773),s=e.n(r),o=e(84140),m=e(40845);const l=({oldValue:i,newValue:c})=>{const u=(0,m.$j)(),f={variables:{dark:{diffViewerBackground:u.colors.background.canvas,diffViewerColor:u.colors.text.primary,addedBackground:(0,o.A)(u.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,o.A)(u.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,o.A)(u.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,o.A)(u.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,o.A)(u.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,o.A)(u.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:u.colors.background.primary,gutterBackgroundDark:u.colors.background.primary,highlightBackground:(0,o.A)(u.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,o.A)(u.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:u.colors.background.secondary,codeFoldBackground:u.colors.background.secondary,emptyLineBackground:u.colors.background.secondary,gutterColor:u.colors.text.disabled,addedGutterColor:u.colors.text.primary,removedGutterColor:u.colors.text.primary,codeFoldContentColor:u.colors.text.disabled,diffViewerTitleBackground:u.colors.background.secondary,diffViewerTitleColor:u.colors.text.disabled,diffViewerTitleBorderColor:u.colors.border.strong}},codeFold:{fontSize:u.typography.bodySmall.fontSize},gutter:{pre:{color:(0,o.A)(u.colors.text.disabled).setAlpha(1).toString(),opacity:.61}}};return n.createElement("div",{className:(0,t.css)({fontSize:u.typography.bodySmall.fontSize,pre:{all:"revert"}})},n.createElement(s(),{styles:f,oldValue:i,newValue:c,splitView:!1,compareMethod:r.DiffMethod.CSS,useDarkTheme:u.isDark}))}},57714:(Y,I,e)=>{"use strict";e.d(I,{Cc:()=>A,me:()=>b,bS:()=>h,rJ:()=>T,wL:()=>r});var t=e(17172);class n{getHistoryList(U,F){return typeof U!="string"?Promise.resolve([]):(0,t.AI)().get(`api/dashboards/uid/${U}/versions`,F)}getDashboardVersion(U,F){return typeof U!="string"?Promise.resolve({}):(0,t.AI)().get(`api/dashboards/uid/${U}/versions/${F}`)}restoreDashboard(U,F){if(typeof U!="string")return Promise.resolve({});const K=`api/dashboards/uid/${U}/restore`;return(0,t.AI)().post(K,{version:F})}}const r=new n;var s=e(32196),o=e(96540),m=e(40845),l=e(10880),i=e(78369),c=e(71678),u=e(55852),f=e(96374),d=e(3169);const E=({hideModal:B,onRestore:U,version:F})=>{const K=(0,d._2)(),w=async()=>{await U(F)?K.success("Dashboard restored",`Restored from version ${F.version}`):K.error("Dashboard restore failed",`Failed to restore from version ${F.version}`),B()};return o.createElement(f.u,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:B,onConfirm:w,body:o.createElement("p",null,"Are you sure you want to restore the dashboard to version ",F.version,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${F.version}`})},h=({versions:B,canCompare:U,onCheck:F,onRestore:K})=>{const w=(0,m.of)(y);return o.createElement("div",{className:w.margin},o.createElement("table",{className:"filter-table"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{className:"width-4"}),o.createElement("th",{className:"width-4"},"Version"),o.createElement("th",{className:"width-14"},"Date"),o.createElement("th",{className:"width-10"},"Updated by"),o.createElement("th",null,"Notes"),o.createElement("th",null))),o.createElement("tbody",null,B.map((L,V)=>o.createElement("tr",{key:L.id},o.createElement("td",null,o.createElement(l.S,{"aria-label":`Toggle selection of version ${L.version}`,className:(0,s.css)({display:"inline"}),checked:L.checked,onChange:N=>F(N,L.id),disabled:!L.checked&&U})),o.createElement("td",null,L.version),o.createElement("td",null,L.createdDateString),o.createElement("td",null,L.createdBy),o.createElement("td",null,L.message),o.createElement("td",{className:"text-right"},V===0?o.createElement(i.v,{name:"Latest",colorIndex:17}):o.createElement(c.$s,null,({showModal:N,hideModal:z})=>o.createElement(u.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{N(E,{version:L,hideModal:z,onRestore:K})}},"Restore"))))))))};function y(B){return{margin:(0,s.css)({marginBottom:B.spacing(4)})}}var a=e(2543),v=e(29158),g=e(14578);const b=({onClick:B=a.noop,baseVersion:U=0,newVersion:F=0,isNewLatest:K=!1})=>{const w=(0,m.of)(P);return o.createElement("h3",{className:w.header},o.createElement(v.K,{name:"arrow-left",size:"xl",onClick:B,tooltip:"Reset version"}),o.createElement("span",null,"Comparing ",U," ",o.createElement(g.I,{name:"arrows-h"})," ",F," ",K&&o.createElement("cite",{className:"muted"},"(Latest)")))},P=B=>({header:(0,s.css)({fontSize:B.typography.h3.fontSize,display:"flex",gap:B.spacing(2),marginBottom:B.spacing(2)})});var C=e(67061),D=e(56034);const T=({hasMore:B,canCompare:U,getVersions:F,getDiff:K,isLastPage:w})=>o.createElement(C.B,null,B&&o.createElement(u.$n,{type:"button",onClick:()=>F(!0),variant:"secondary",disabled:w},"Show more versions"),o.createElement(D.m,{content:"Select two versions to start comparing",placement:"bottom"},o.createElement(u.$n,{type:"button",disabled:!U,onClick:K,icon:"code-branch"},"Compare versions")));var M=e(90613),O=e(57418),S=e(19626),p=e(22764),x=e(56596);const A=({baseInfo:B,newInfo:U,diffData:F,isNewLatest:K,onRestore:w})=>{const L=(0,x.G4)(F.lhs,F.rhs),V=(0,m.of)(R);return o.createElement(C.B,{direction:"column",gap:1},o.createElement(C.B,{justifyContent:"space-between",alignItems:"center"},o.createElement(C.B,{alignItems:"center"},o.createElement("span",{className:(0,s.cx)(V.versionInfo,V.noMarginBottom)},o.createElement("strong",null,"Version ",B.version)," updated by ",B.createdBy," ",B.ageString,B.message),o.createElement(g.I,{name:"arrow-right",size:"sm"}),o.createElement("span",{className:V.versionInfo},o.createElement("strong",null,"Version ",U.version)," updated by ",U.createdBy," ",U.ageString,U.message)),K&&o.createElement(c.$s,null,({showModal:N,hideModal:z})=>o.createElement(u.$n,{variant:"destructive",icon:"history",onClick:()=>{N(E,{version:B,onRestore:w,hideModal:z})}},"Restore to version ",B.version))),Object.entries(L).map(([N,z])=>o.createElement(S.D,{diffs:z,key:N,title:N})),o.createElement(M.a,{paddingTop:2},o.createElement(O.M,{isOpen:!1,label:"View JSON Diff"},o.createElement(p.M,{oldValue:JSON.stringify(F.lhs,null,2),newValue:JSON.stringify(F.rhs,null,2)}))))},R=B=>({versionInfo:(0,s.css)({color:B.colors.text.secondary,fontSize:B.typography.bodySmall.fontSize}),noMarginBottom:(0,s.css)({marginBottom:0})})},56596:(Y,I,e)=>{"use strict";e.d(I,{Fl:()=>m,G4:()=>o});var t=e(16111),n=e(25504),r=e(2543),s=e.n(r);const o=(c,u)=>{const f=(0,t.UD)(c,u),d=n.stringify(c,null,2),E=n.stringify(u,null,2),h=v=>v.map(g=>{let b,P,C=0,D=0;const T=(0,r.tail)(g.path.split("/"));return g.op==="replace"&&E.pointers[g.path]&&(b=(0,r.get)(c,T),P=g.value,C=E.pointers[g.path].value.line,D=E.pointers[g.path].valueEnd.line),g.op==="add"&&E.pointers[g.path]&&(P=g.value,C=E.pointers[g.path].value.line,D=E.pointers[g.path].valueEnd.line),g.op==="remove"&&d.pointers[g.path]&&(b=(0,r.get)(c,T),C=d.pointers[g.path].value.line,D=d.pointers[g.path].valueEnd.line),{op:g.op,value:P,path:T,originalValue:b,startLineNumber:C,endLineNumber:D}}),y=v=>(0,r.sortBy)(v,"startLineNumber"),a=v=>v.reduce((g,b)=>{const P=b.path[0];return g[P]||(g[P]=[]),g[P].push(b),g},{});return(0,r.flow)([h,y,a])(f)},m=(c,u=!0)=>{const f=(0,r.last)(c.path),d=l(f),E=c.op==="remove"?c.originalValue:c.value;let h=i(c.op);return u&&(d?h+=` item ${f}`:(0,r.isArray)(E)&&!(0,r.isEmpty)(E)?h+=` ${E.length} ${f}`:h+=` ${f}`),h},l=c=>!(0,r.isNaN)((0,r.toNumber)(c)),i=c=>c==="add"?"added":c==="remove"?"deleted":"changed"},58441:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>Ze});var t=e(96540),n=e(32264),r=e(27857),s=e(25897),o=e(37390),m=e(40980),l=e(10096),i=e(44836),c=e(72254),u=e(60656),f=e(7758),d=e(74730),E=e(4213),h=e.n(E),y=e(16817),a=e(70713),v=e(66864),g=e(88575),b=e(15292),P=e(55852),C=e(32372),D=e(10534),T=e(15858),M=e(22699),O=e(34214),S=e(20455),p=e(73788);class x extends r.Bs{constructor(lt){super({isSharingExternally:!1,isViewingJSON:!1,...lt}),this.tabId=M.wr.export,this._exporter=new T.M,this.onShareExternallyChange=()=>{this.setState({isSharingExternally:!this.state.isSharingExternally})},this.onViewJSON=()=>{this.setState({isViewingJSON:!this.state.isViewingJSON})}}static{this.Component=A}getTabLabel(){return(0,i.t)("share-modal.tab-title.export","Export")}getClipboardText(){}async getExportableDashboardJson(){const{dashboardRef:lt,isSharingExternally:rt}=this.state,ut=(0,S.Uy)(lt.resolve());return rt?await this._exporter.makeExportable(new O.G(ut,void 0,{getVariablesFromState:()=>(0,p.E)(window.__grafanaSceneContext)})):ut}async onSaveAsFile(){const lt=await this.getExportableDashboardJson(),rt=JSON.stringify(lt,null,2),{isSharingExternally:ut}=this.state,Et=new Blob([rt],{type:"application/json;charset=utf-8"}),Ct=new Date().getTime();let Ut="dashboard";"title"in lt&&lt.title&&(Ut=lt.title),h()(Et,`${Ut}-${Ct}.json`),f.c.exportDownloadJsonClicked({externally:ut})}}function A({model:nt}){const{isSharingExternally:lt,isViewingJSON:rt,modalRef:ut}=nt.useState(),Et=(0,y.A)(async()=>{if(rt){const Ut=await nt.getExportableDashboardJson();return JSON.stringify(Ut,null,2)}return""},[rt]),Ct=(0,i.t)("share-modal.export.share-externally-label","Export for sharing externally");return t.createElement(t.Fragment,null,!rt&&t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(v.gW,{spacing:"md"},t.createElement(g.D,{label:Ct},t.createElement(b.d,{id:"share-externally-toggle",value:lt,onChange:nt.onShareExternallyChange}))),t.createElement(o.a.ButtonRow,null,t.createElement(P.$n,{variant:"secondary",onClick:()=>{ut?.resolve().onDismiss()},fill:"outline"},t.createElement(i.x6,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(P.$n,{variant:"secondary",icon:"brackets-curly",onClick:nt.onViewJSON},t.createElement(i.x6,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(P.$n,{variant:"primary",icon:"save",onClick:()=>nt.onSaveAsFile()},t.createElement(i.x6,{i18nKey:"share-modal.export.save-button"},"Save to file")))),rt&&t.createElement(t.Fragment,null,t.createElement(a.Ay,{disableHeight:!0},({width:Ut})=>Et.value?t.createElement(C.B,{value:Et.value??"",language:"json",showMiniMap:!1,height:"500px",width:Ut}):Et.loading?t.createElement("div",null,"Loading..."):null),t.createElement(o.a.ButtonRow,null,t.createElement(P.$n,{variant:"secondary",fill:"outline",onClick:nt.onViewJSON,icon:"arrow-left"},t.createElement(i.x6,{i18nKey:"share-modal.export.back-button"},"Back to export config")),t.createElement(D.b,{variant:"secondary",icon:"copy",disabled:Et.loading,getText:()=>Et.value??""},t.createElement(i.x6,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard")),t.createElement(P.$n,{variant:"primary",icon:"save",disabled:Et.loading,onClick:()=>nt.onSaveAsFile()},t.createElement(i.x6,{i18nKey:"share-modal.export.save-button"},"Save to file")))))}var R=e(86394),B=e(41507);class U extends r.Bs{constructor(){super(...arguments),this.tabId=M.wr.libraryPanel}static{this.Component=F}getTabLabel(){return(0,i.t)("share-modal.tab-title.library-panel","Library panel")}}function F({model:nt}){const{panelRef:lt,dashboardRef:rt,modalRef:ut}=nt.useState();if(!lt)return null;const Et=lt.resolve();if(Et.parent instanceof B.U){const Ct=rt.resolve(),Ut=(0,S.ZB)(Et.parent),Gt=new O.a(Ut),Wt=(0,S.Uy)(Ct),ot=new O.G(Wt);return t.createElement(R.j,{initialFolderUid:Ct.state.meta.folderUid,dashboard:ot,panel:Gt,onDismiss:()=>{ut?.resolve().onDismiss()}})}return null}var K=e(47232),w=e(13544),L=e(12131),V=e(84167),N=e(10354),z=e(14578),J=e(42418),G=e(7030),H=e(87895),q=e(11982);class le extends r.Bs{constructor(lt){super({...lt,useLockedTime:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}),this.tabId=M.wr.link,this.onToggleLockedTime=()=>{this.setState({useLockedTime:!this.state.useLockedTime}),this.buildUrl()},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl}),this.buildUrl()},this.onThemeChange=rt=>{this.setState({selectedTheme:rt}),this.buildUrl()},this.getShareUrl=()=>this.state.shareUrl,this.addActivationHandler(()=>{this.buildUrl()})}static{this.Component=me}async buildUrl(){const{panelRef:lt,dashboardRef:rt,useLockedTime:ut,useShortUrl:Et,selectedTheme:Ct}=this.state,Ut=rt.resolve(),Gt=lt?.resolve(),Wt=L.Ny.getLocation(),ot=r.jh.getTimeRange(Gt??Ut),Tt={};Gt&&(Tt.viewPanel=Gt.state.key),ut&&(Tt.from=ot.state.value.from.toISOString(),Tt.to=ot.state.value.to.toISOString()),Ct!=="current"&&(Tt.theme=Ct);let Pn=(0,q.uZ)({uid:Ut.state.uid,slug:Ut.state.meta.slug,currentQueryParams:Wt.search,updateQuery:Tt,absolute:!0});Et&&(Pn=await(0,G.f)(Pn));let ft=Tt;Gt&&(delete ft.viewPanel,ft.panelId=Gt.state.key,ft["__feature.dashboardSceneSolo"]=!0);const Mt=(0,q.uZ)({uid:Ut.state.uid,currentQueryParams:Wt.search,updateQuery:{...Tt,panelId:Gt?.state.key},absolute:!0,soloRoute:!0,render:!0,timeZone:k(ot.getTimeZone())});this.setState({shareUrl:Pn,imageUrl:Mt})}getTabLabel(){return(0,i.t)("share-modal.tab-title.link","Link")}onCopy(){f.c.shareLinkCopied({currentTimeRange:this.state.useLockedTime,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}}function me({model:nt}){const lt=nt.useState(),{panelRef:rt,dashboardRef:ut}=lt,Et=ut.resolve(),Ct=rt?.resolve(),Gt=r.jh.getTimeRange(Ct??Et).state.to==="now",{useLockedTime:Wt,useShortUrl:ot,selectedTheme:Tt,shareUrl:Pn,imageUrl:ft}=lt,Mt=w.Tp.pages.SharePanelModal,_t=!!Et.state.uid,nn=(0,i.t)("share-modal.link.time-range-label","Lock time range"),dn=(0,i.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),en=(0,i.t)("share-modal.link.shorten-url","Shorten URL"),Xt=(0,i.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(V.n,null,t.createElement(g.D,{label:nn,description:Gt?dn:""},t.createElement(b.d,{id:"share-current-time-range",value:Wt,onChange:nt.onToggleLockedTime})),t.createElement(H.w,{selectedTheme:Tt,onChange:nt.onThemeChange}),t.createElement(g.D,{label:en},t.createElement(b.d,{id:"share-shorten-url",value:ot,onChange:nt.onUrlShorten})),t.createElement(g.D,{label:Xt},t.createElement(N.p,{id:"link-url-input",value:Pn,readOnly:!0,addonAfter:t.createElement(D.b,{icon:"copy",variant:"primary",getText:nt.getShareUrl,onClipboardCopy:nt.onCopy},t.createElement(i.x6,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),Ct&&n.$.rendererAvailable&&t.createElement(t.Fragment,null,_t&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:ft,target:"_blank",rel:"noreferrer","aria-label":Mt.linkToRenderedImage},t.createElement(z.I,{name:"camera"}),"\xA0",t.createElement(i.x6,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!_t&&t.createElement(J.F,{severity:"info",title:(0,i.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(i.x6,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),Ct&&!n.$.rendererAvailable&&t.createElement(J.F,{severity:"info",title:(0,i.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(i.x6,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}function k(nt){const lt="UTC"+encodeURIComponent((0,K.KQ)().format("Z"));if(nt==="utc")return"UTC";if(nt==="browser"){if(!window.Intl)return lt;const ut=window.Intl.DateTimeFormat().resolvedOptions();return ut.timeZone?ut.timeZone:lt}return nt}var ee=e(35280),X=e(7928);class j extends r.Bs{constructor(lt){super(lt),this.tabId=M.wr.embed}static{this.Component=ne}getTabLabel(){return(0,i.t)("share-modal.tab-title.panel-embed","Embed")}}function ne({model:nt}){const{panelRef:lt,dashboardRef:rt}=nt.useState(),ut=lt.resolve(),Et=rt.resolve(),{uid:Ct}=Et.useState(),Ut=(0,d.Cs)(ut),Gt=r.jh.getTimeRange(ut),Wt=Gt instanceof X.v?Gt.state.timeFrom:void 0;return t.createElement(ee.D,{panel:{id:Ut,timeFrom:Wt},range:Gt.state.value,dashboard:{uid:Ct??"",time:Gt.state.value},buildIframe:te(Et)})}const te=nt=>(lt,rt,ut,Et,Ct)=>{const Ut=(0,M.XV)({useCurrentTimeRange:lt,selectedTheme:ut,panel:Et,range:Ct}),Gt=Ut.get("editPanel")??Ut.get("viewPanel")??"";return Ut.set("panelId",Gt),Ut.delete("editPanel"),Ut.delete("viewPanel"),Ut.set("__feature.dashboardSceneSolo","true"),`<iframe src="${(0,q.uZ)({absolute:!0,soloRoute:!0,uid:nt.state.uid,slug:nt.state.meta.slug,currentQueryParams:Ut.toString()})}" width="450" height="200" frameborder="0"></iframe>`};var oe=e(5805),ie=e(17172),ue=e(94354),be=e(69064);const ge=()=>{const nt={label:(0,i.t)("share-modal.snapshot.expire-week","1 Week"),value:604800};return[{label:(0,i.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,i.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},nt,{label:(0,i.t)("share-modal.snapshot.expire-never","Never"),value:0}]},re=()=>ge()[2];class ye extends r.Bs{constructor(lt){super({...lt,snapshotName:lt.dashboardRef.resolve().state.title,selectedExpireOption:re()}),this.tabId=M.wr.snapshot,this.onSnasphotNameChange=rt=>{this.setState({snapshotName:rt.trim()})},this.onExpireChange=rt=>{this.setState({selectedExpireOption:ge().find(ut=>ut.value===rt)})},this.onSnapshotCreate=async(rt=!1)=>{const{selectedExpireOption:ut}=this.state,Et=this.prepareSnapshot(),Ct={dashboard:Et,name:Et.title,expires:ut?.value,external:rt};try{return await(0,be.s)().create(Ct)}finally{rt?f.c.publishSnapshotClicked({expires:Ct.expires}):f.c.publishSnapshotLocalClicked({expires:Ct.expires})}},this.addActivationHandler(()=>{this._onActivate()})}static{this.Component=Be}_onActivate(){(0,be.s)().getSharingOptions().then(lt=>{this.isActive&&this.setState({snapshotSharingOptions:lt})})}getTabLabel(){return(0,i.t)("share-modal.tab-title.snapshot","Snapshot")}prepareSnapshot(){const lt=r.jh.getTimeRange(this),{dashboardRef:rt,panelRef:ut}=this.state,Et=(0,S.Uy)(rt.resolve(),!0);return(0,S.c)(this.state.snapshotName||"",lt.state.value,Et,ut?.resolve())}}function Be({model:nt}){const{snapshotName:lt,selectedExpireOption:rt,modalRef:ut,snapshotSharingOptions:Et}=nt.useState(),[Ct,Ut]=(0,oe.default)(async(ot=!1)=>nt.onSnapshotCreate(ot)),[Gt,Wt]=(0,oe.default)(async ot=>await(0,ie.AI)().get(ot));return Gt.value?t.createElement(i.x6,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."):t.createElement(t.Fragment,null,!Ct.value&&t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(g.D,{label:(0,i.t)("share-modal.snapshot.name","Snapshot name")},t.createElement(N.p,{id:"snapshot-name-input",width:30,defaultValue:lt,onBlur:ot=>nt.onSnasphotNameChange(ot.target.value)})),t.createElement(g.D,{label:(0,i.t)("share-modal.snapshot.expire","Expire")},t.createElement(ue.z,{id:"expire-select-input",options:ge(),value:rt?.value,onChange:nt.onExpireChange})),t.createElement(o.a.ButtonRow,null,t.createElement(P.$n,{variant:"secondary",onClick:()=>{ut?.resolve().onDismiss()},fill:"outline"},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),Et?.externalEnabled&&t.createElement(P.$n,{variant:"secondary",disabled:Ct.loading,onClick:()=>Ut(!0)},Et?.externalSnapshotName),t.createElement(P.$n,{variant:"primary",disabled:Ct.loading,onClick:()=>Ut()},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.local-button"},"Publish Snapshot")))),Ct.value&&t.createElement(t.Fragment,null,t.createElement(g.D,{label:(0,i.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(N.p,{id:"snapshot-url-input",value:Ct.value.url,readOnly:!0,addonAfter:t.createElement(D.b,{icon:"copy",variant:"primary",getText:()=>Ct.value.url},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(P.$n,{fill:"outline",size:"md",variant:"destructive",onClick:()=>{Wt(Ct.value.deleteUrl)}},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot.")))))}var ve=e(72686),Me=e(4785),ke=e(32196),Se=e(40845),We=e(59037),De=e(31678),pe=e(96374);class Ne extends r.Bs{static{this.Component=Le}constructor(lt){super({confirmVariant:"destructive",dismissText:"Cancel",dismissVariant:"secondary",icon:"exclamation-triangle",confirmButtonVariant:"destructive",...lt})}onDismiss(){}}function Le({model:nt}){const lt=nt.useState();return t.createElement(pe.u,{...lt})}var He=e(26657),je=e(31204),at=e(31193);const Ye=async nt=>{let lt=new Set;for(const rt of nt)je.z.has(rt)&&await(0,at.tR)().get(rt)instanceof He.iy||lt.add(rt);return Array.from(lt)};function $e(nt){const lt=new Set,rt=nt.state.body;if(!(rt instanceof r.hy))return[];for(const ut of rt.state.children){if(ut instanceof B.U){const Et=Fe(ut);for(const Ct of Et)lt.add(Ct)}if(ut instanceof r.tI){const Et=xe(ut);for(const Ct of Et)lt.add(Ct)}}return Array.from(lt).sort()}function xe(nt){return new Set(nt.state.children.map(rt=>Fe(rt)).flat())}function Fe(nt){let lt;if(nt instanceof B.U)if(nt.state.body instanceof u.F)lt=nt.state.body.state.panel;else if(nt.state.body instanceof r.Eb)lt=nt.state.body;else throw new Error("DashboardGridItem body expected to be VizPanel");if(!lt)throw new Error("Unsupported grid item type");const rt=lt.state.$data,ut=new Set;if(rt instanceof r.dt)for(const Et of rt.state.queries)ut.add(Et.datasource?.type??"");if(rt instanceof r.Es){const Et=rt.state.$data;if(Et instanceof r.dt)for(const Ct of Et.state.queries)ut.add(Ct.datasource?.type??"")}return Array.from(ut)}function Ee(nt){const{value:lt}=(0,y.A)(async()=>{const rt=$e(nt);return Ye(rt)},[]);return lt}function se({model:nt,publicDashboard:lt,isGetLoading:rt}){const ut=(0,Se.of)(ae),Et=l.TP.hasPermission(De.AccessControlAction.DashboardsPublicWrite),{dashboardRef:Ct}=nt.useState(),Ut=Ct.resolve(),{isDirty:Gt}=Ut.useState(),[Wt]=(0,ve.bN)(),ot=(Ut.state.$variables?.state.variables.length??0)>0,Tt=Ee(Ut),ft=r.jh.getTimeRange(nt).useState();return t.createElement(We.b,{dashboard:Ut,publicDashboard:lt,unsupportedDatasources:Tt,onRevoke:()=>{Ut.showModal(new Ne({isOpen:!0,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL",body:t.createElement("p",{className:ut.description},"Are you sure you want to revoke this URL? The dashboard will no longer be public."),onDismiss:()=>{Ut.showModal(new Ze({dashboardRef:Ct,activeTab:"Public Dashboard"}))},onConfirm:()=>{Wt({dashboard:Ut,dashboardUid:Ut.state.uid,uid:lt.uid}),Ut.closeModal()}}))},timeRange:ft.value,showSaveChangesAlert:Et&&Gt,hasTemplateVariables:ot})}const ae=nt=>({description:(0,ke.css)({fontSize:nt.typography.body.fontSize})});var fe=e(22234);function Ce({model:nt}){const{dashboardRef:lt}=nt.useState(),rt=lt.resolve(),ut=Ee(rt),Et=(rt.state.$variables?.state.variables.length??0)>0;return t.createElement(fe.D,{dashboard:rt,unsupportedDatasources:ut,unsupportedTemplateVariables:Et})}class Re extends r.Bs{constructor(){super(...arguments),this.tabId=M.wr.publicDashboard}static{this.Component=Oe}getTabLabel(){return(0,i.t)("share-modal.tab-title.public-dashboard","Public Dashboard")}}function Oe({model:nt}){const{data:lt,isLoading:rt}=(0,ve.Bs)(nt.state.dashboardRef.resolve().state.uid);return t.createElement(t.Fragment,null,rt?t.createElement(Me.a,null):(0,c.lI)(lt)?t.createElement(se,{model:nt,publicDashboard:lt,isGetLoading:rt}):t.createElement(Ce,{model:nt}))}const ze=[];function Xe(nt){ze.push(nt)}class Ze extends r.Bs{constructor(lt){super({activeTab:"link",...lt}),this.onDismiss=()=>{(0,d.YQ)(this).closeModal()},this.onChangeTab=rt=>{f.c.sharingTabChanged({item:rt.value}),this.setState({activeTab:rt.value})},this.addActivationHandler(()=>this.buildTabs())}static{this.Component=et}buildTabs(){const{dashboardRef:lt,panelRef:rt}=this.state,ut=this.getRef(),Et=[new le({dashboardRef:lt,panelRef:rt,modalRef:ut})],Ct=(0,d.YQ)(this);if(rt||Et.push(new x({dashboardRef:lt,modalRef:ut})),l.TP.isSignedIn&&n.$.snapshotEnabled&&Ct.canEditDashboard()&&Et.push(new ye({panelRef:rt,dashboardRef:lt,modalRef:ut})),rt){Et.push(new j({panelRef:rt,dashboardRef:lt}));const Ut=rt.resolve(),Gt=Ut.parent instanceof u.F;Ut instanceof r.Eb&&(Gt||Et.push(new U({panelRef:rt,dashboardRef:lt,modalRef:ut})))}rt||Et.push(...ze.map(Ut=>new Ut({dashboardRef:lt,modalRef:ut}))),(0,c.iR)()&&Et.push(new Re({dashboardRef:lt,modalRef:ut})),this.setState({tabs:Et})}}function et({model:nt}){const{panelRef:lt,tabs:rt,activeTab:ut}=nt.useState(),Et=lt?(0,i.t)("share-modal.panel.title","Share Panel"):(0,i.t)("share-modal.dashboard.title","Share");if(!rt)return;const Ct=rt?.map(Wt=>({label:Wt.getTabLabel(),value:Wt.tabId})),Ut=t.createElement(s.J,{title:Et,icon:"share-alt",tabs:Ct,activeTab:ut,onChangeTab:nt.onChangeTab}),Gt=rt.find(Wt=>Wt.tabId===ut);return t.createElement(o.a,{isOpen:!0,title:Ut,onDismiss:nt.onDismiss},t.createElement(m.J,null,Gt&&t.createElement(Gt.Component,{model:Gt})))}},53543:(Y,I,e)=>{"use strict";e.d(I,{R:()=>r});var t=e(27857),n=e(74730);class r{constructor(o){this._vizPanel=o}get id(){const o=(0,n.Cs)(this._vizPanel);return isNaN(o)?(console.error("VizPanel key could not be translated to a legacy numeric panel id",this._vizPanel),0):o}get description(){return this._vizPanel.state.description}get type(){return this._vizPanel.state.pluginId}get title(){return this._vizPanel.state.title}get transformations(){return this._vizPanel.state.$data instanceof t.Es?this._vizPanel.state.$data.state.transformations:[]}get targets(){const o=(0,n.un)(this._vizPanel);return o?o.state.queries:[]}get datasource(){return(0,n.un)(this._vizPanel)?.state.datasource}get options(){return this._vizPanel.state.options}get fieldConfig(){return this._vizPanel.state.fieldConfig}get pluginVersion(){return this._vizPanel.state.pluginVersion}}},96556:(Y,I,e)=>{"use strict";e.d(I,{w:()=>s});var t=e(32264),n=e(27857),r=e(39820);function s(o){if(!o.targets?.length||t.$.panels[o.type]?.skipDataQuery)return;let m;return m=new n.dt({datasource:o.datasource??void 0,queries:o.targets,maxDataPoints:o.maxDataPoints??void 0,maxDataPointsFromWidth:!0,cacheTimeout:o.cacheTimeout,queryCachingTTL:o.queryCachingTTL,minInterval:o.interval??void 0,dataLayerFilter:{panelId:o.id},$behaviors:[new r.L({})]}),new n.Es({$data:m,transformations:o.transformations||[]})}},32023:(Y,I,e)=>{"use strict";e.d(I,{WZ:()=>h,b4:()=>y});var t=e(27857),n=e(16279),r=e(41507),s=e(60656),o=e(42397),m=e(74730);function l(a){return a.state.controls?.state.timePicker}function i(a){return a.state.controls?.state.refreshPicker}function c(a){return a.state.titleItems&&Array.isArray(a.state.titleItems)&&a.state.titleItems[0]instanceof o.$?a.state.titleItems[0]:null}function u(a){const v=[];return a.state.body.forEachChild(g=>{if(!(g instanceof r.U)&&!(g instanceof t.tI))throw new Error("Child is not a DashboardGridItem or SceneGridRow, invalid scene");g instanceof r.U?g.state.body instanceof t.Eb&&v.push(g.state.body):g instanceof t.tI&&g.forEachChild(b=>{b instanceof r.U&&b.state.body instanceof t.Eb&&v.push(b.state.body)})}),v}function f(a){const v=t.jh.getData(a);if(!(v instanceof n.s))throw new Error("DashboardDataLayerSet not found");return v}function d(a){const v=a.state.$behaviors?.find(g=>g instanceof t.Gg.K2);if(v instanceof t.Gg.K2)return v}function E(a){let v=0;const g=a.state.body;if(!(g instanceof t.hy))throw new Error("Dashboard body is not a SceneGridLayout");for(const b of g.state.children){if(b instanceof r.U){const P=b.state.body;if(P){const C=P instanceof s.F?(0,m.RQ)(P):(0,m.Cs)(P);C>v&&(v=C)}}if(b instanceof t.tI){const P=(0,m.Cs)(b);P>v&&(v=P);for(const C of b.state.children)if(C instanceof r.U){const D=C.state.body;if(D){const T=D instanceof s.F?(0,m.RQ)(D):(0,m.Cs)(D);T>v&&(v=T)}}}}return v+1}const h=a=>a.parent instanceof s.F?a.parent:a.parent instanceof r.U&&a.parent.state.body instanceof s.F?a.parent.state.body:null,y={getTimePicker:l,getRefreshPicker:i,getPanelLinks:c,getVizPanels:u,getDataLayers:f,getNextPanelId:E,getCursorSync:d}},73788:(Y,I,e)=>{"use strict";e.d(I,{E:()=>r});var t=e(27857),n=e(53287);function r(s){const o=t.jh.getVariables(s);return(0,n.C)(o)}},7758:(Y,I,e)=>{"use strict";e.d(I,{c:()=>r});var t=e(14110);let n=!1;const r={dashboardInitialized:o=>{s("init_dashboard_completed",{...o})},panelMenuShown:o=>{s("panelheader_menu",{...o,item:"menu"})},panelMenuItemClicked:o=>{s("panelheader_menu",{item:o})},panelMenuInspectClicked(o){s("panelheader_menu",{item:"inspect",tab:o})},panelLinkClicked:o=>{s("panelheader_datalink_clicked",o)},panelStatusMessageClicked:o=>{s("panelheader_statusmessage_clicked",o)},panelCancelQueryClicked:o=>{s("panelheader_cancelquery_clicked",o)},sharingTabChanged:o=>{s("sharing_category_clicked",o)},shareLinkCopied:o=>{s("sharing_link_copy_clicked",o)},embedSnippetCopy:o=>{s("sharing_embed_copy_clicked",o)},publishSnapshotClicked:o=>{s("sharing_snapshot_publish_clicked",o)},publishSnapshotLocalClicked:o=>{s("sharing_snapshot_local_clicked",o)},exportDownloadJsonClicked:o=>{s("sharing_export_download_json_clicked",o)},exportCopyJsonClicked:o=>{s("sharing_export_copy_json_clicked",o)},exportSaveJsonClicked:o=>{s("sharing_export_save_json_clicked",o)},exportViewJsonClicked:o=>{s("sharing_export_view_json_clicked",o)},generatePublicDashboardUrlClicked:o=>{s("sharing_public_generate_url_clicked",o)},revokePublicDashboardEmailClicked:o=>{s("sharing_public_email_revoke_clicked",o)},resendPublicDashboardEmailClicked:o=>{s("sharing_public_email_resend_clicked",o)},publicDashboardEmailInviteClicked:o=>{s("sharing_public_email_invite_clicked",o)},publicDashboardShareTypeChange:o=>{s("sharing_public_can_view_clicked",o)},publicDashboardTimeSelectionChanged:o=>{s("sharing_public_time_picker_clicked",o)},publicDashboardAnnotationsSelectionChanged:o=>{s("sharing_public_annotations_clicked",o)},publicDashboardUrlCopied:o=>{s("sharing_public_copy_url_clicked",o)},publicDashboardPauseSharingClicked:o=>{s("sharing_public_pause_clicked",o)},revokePublicDashboardClicked:o=>{s("sharing_public_revoke_clicked",o)},emptyDashboardButtonClicked:o=>{s("emptydashboard_clicked",o)},toolbarAddButtonClicked:o=>{s("toolbar_add_clicked",o)},toolbarFavoritesClick:()=>{s("toolbar_actions_clicked",{item:"favorites"})},toolbarSettingsClick:()=>{s("toolbar_actions_clicked",{item:"settings"})},toolbarRefreshClick:()=>{s("toolbar_actions_clicked",{item:"refresh"})},toolbarTimePickerClick:()=>{s("toolbar_actions_clicked",{item:"time_picker"})},toolbarZoomClick:()=>{s("toolbar_actions_clicked",{item:"zoom_out_time_range"})},toolbarShareClick:()=>{s("toolbar_actions_clicked",{item:"share"})},toolbarSaveClick:()=>{s("toolbar_actions_clicked",{item:"save"})},toolbarSaveAsClick:()=>{s("toolbar_actions_clicked",{item:"save_as"})},toolbarAddClick:()=>{s("toolbar_actions_clicked",{item:"add"})},setScenesContext:()=>(n=!0,()=>{n=!1})},s=(o,m)=>{const l=n?{scenesView:!0}:{};m?(0,t.rR)(`dashboards_${o}`,{...m,...l}):(0,t.rR)(`dashboards_${o}`)}},99246:(Y,I,e)=>{"use strict";e.d(I,{C:()=>t,Y:()=>n});const t={left:[],right:[]};function n(r,s){t[r].push(s)}},11982:(Y,I,e)=>{"use strict";e.d(I,{Lp:()=>E,Uu:()=>d,e0:()=>f,r7:()=>u,uZ:()=>c});var t=e(76885),n=e(71733),r=e(12131),s=e(32264),o=e(27857),m=e(10096),l=e(87490),i=e(74730);function c(h){let y=`/d/${h.uid}`;h.uid||(y="/dashboard/new"),h.soloRoute&&(y=`/d-solo/${h.uid}`),h.slug&&(y+=`/${h.slug}`),h.subPath&&(y+=h.subPath),h.render&&(y="/render"+y,h.updateQuery={...h.updateQuery,width:1e3,height:500,tz:h.timeZone}),h.isHomeDashboard&&(y="/");const a=h.currentQueryParams?(0,r.SE)(h.currentQueryParams):{};if(h.updateQuery)for(const g of Object.keys(h.updateQuery))h.updateQuery[g]===null||h.updateQuery[g]===void 0?delete a[g]:a[g]=h.updateQuery[g];const v=t.kM.renderUrl(y,a);return h.absolute?s.$.appUrl+v.slice(1):v}function u(h){return n.I.getUrlForPartial(r.Ny.getLocation(),{viewPanel:h.state.key})}function f(h){return n.I.getUrlForPartial(r.Ny.getLocation(),{editPanel:h})}function d(h,y){const a=h.state.key?.replace("-view","");return n.I.getUrlForPartial(r.Ny.getLocation(),{inspect:a,inspectTab:y})}function E(h){const y=h.getPlugin(),a=(0,i.un)(h);if(!m.TP.hasAccessToExplore()||y?.meta.skipDataQuery||!a)return Promise.resolve(void 0);const v=o.jh.getTimeRange(h);return(0,l.Xe)({queries:a.state.queries,dsRef:a.state.datasource,timeRange:v.state.value,scopedVars:{__sceneObject:{value:h}},adhocFilters:a.state.data?.request?.filters})}},74730:(Y,I,e)=>{"use strict";e.d(I,{Cs:()=>y,O8:()=>x,RQ:()=>a,SN:()=>p,Sm:()=>C,Ws:()=>A,X0:()=>b,XA:()=>h,YQ:()=>O,Yr:()=>R,a7:()=>P,bx:()=>D,pk:()=>T,sw:()=>d,un:()=>M,vL:()=>v,vm:()=>E,xz:()=>S});var t=e(22391),n=e(19347),r=e(27857),s=e(81515),o=e(39820),m=e(63117),l=e(60656),i=e(42397),c=e(7196),u=e(58029),f=e(32023);const d=8,E=12;function h(B){return`panel-${B}`}function y(B){return parseInt(B.state.key.replace("panel-",""),10)}function a(B){return parseInt(B.state.panelKey.replace("panel-",""),10)}function v(B,U){if(!U)return null;const F=g(B,U);if(F)return F;const K=parseInt(U,10);return isNaN(K)?null:g(B,h(K))}function g(B,U){if(!U)return null;const F=r.jh.findObject(B,K=>K.state.key===U?!0:(K instanceof r.Eb,!1));if(F){if(F instanceof r.Eb)return F;throw new Error(`Found panel with key ${U} but it was not a VizPanel`)}return null}function b(B,U){B.forEachChild(F=>{F.isActive&&(F.forceRender(),b(F,U))})}function P(B){const{value:U,text:F,options:K}=B.state;return B.hasAllValue()?{values:K.map(w=>w.value),texts:K.map(w=>w.label)}:{values:Array.isArray(U)?U:[U],texts:Array.isArray(F)?F:[F]}}function C(B){const U=B.match(/(["'])(.*?)\1|\w+/g);if(!U)return s.Ez.query?.split(",")??[];const F=new Set,K=U.reduce((w,L)=>{const V=L.replace(/["']+/g,"");return V.startsWith("$__auto_interval_")||w.add(V),w},F);return Array.from(K)}function D(B){return Array.isArray(B)?B.join(","):""}function T(B,U){const F=Array.isArray(B.current.value)?B.current.value[0]:B.current.value;return F.startsWith("$__auto_interval_")?"$__auto":U.includes(F)?F:U[0]}function M(B){if(!B)return;const U=B.state.$data??B.parent?.state.$data;if(U instanceof r.dt)return U;if(U instanceof r.Es)return M(U)}function O(B){const U=B.getRoot();if(U instanceof m.H$)return U;throw new Error("SceneObject root is not a DashboardScene")}function S(B){return B instanceof r.Eb?B:B.parent?S(B.parent):null}function p(B){return B.includes("clone")}function x(B){const U=f.b4.getNextPanelId(B);return new r.Eb({title:"Panel Title",key:h(U),pluginId:"timeseries",titleItems:[new i.$({menu:new i.m({})})],hoverHeaderOffset:0,menu:new r.Lw({$behaviors:[c._i]}),$data:new r.Es({$data:new r.dt({queries:[{refId:"A"}],datasource:(0,t.p$)((0,n.l)().getInstanceSettings(null)),$behaviors:[new o.L({})]}),transformations:[]})})}function A(B){const U=f.b4.getNextPanelId(B);return new r.tI({key:h(U),title:"Row title",actions:new u.u({}),y:0})}function R(B){if(B.parent instanceof l.F)return B.parent}},72686:(Y,I,e)=>{"use strict";e.d(I,{$L:()=>v,AK:()=>b,Bs:()=>f,NA:()=>g,NY:()=>a,Sm:()=>u,T2:()=>E,U9:()=>d,_e:()=>y,bN:()=>h,g9:()=>C,kd:()=>P});var t=e(93020),n=e(75505),r=e(17172),s=e(82467),o=e(3169),m=e(63117);function l(D){return typeof D=="object"&&D!=null&&"error"in D}const i=({baseUrl:D})=>async T=>{try{const{data:M,...O}=await(0,n.s)((0,r.AI)().fetch({...T,url:D+T.url,showErrorAlert:T.showErrorAlert}));return{data:M,meta:O}}catch(M){return T.manageError?T.manageError(M):{error:M}}},c=D=>({error:(0,r.NF)(D)&&D.status!==404?D:null}),u=(0,t.xP)({reducerPath:"publicDashboardApi",baseQuery:i({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:D=>({getPublicDashboard:D.query({query:T=>({url:`/dashboards/uid/${T}/public-dashboards`,manageError:c,showErrorAlert:!1}),async onQueryStarted(T,{dispatch:M,queryFulfilled:O}){try{await O}catch(S){l(S)&&(0,r.NF)(S.error)&&M((0,s.dx)((0,o.gi)(S.error.data.message)))}},providesTags:(T,M,O)=>[{type:"PublicDashboard",id:O}]}),createPublicDashboard:D.mutation({query:T=>({url:`/dashboards/uid/${T.dashboard instanceof m.H$?T.dashboard.state.uid:T.dashboard.uid}/public-dashboards`,method:"POST",data:T.payload}),async onQueryStarted({dashboard:T,payload:M},{dispatch:O,queryFulfilled:S}){const{data:p}=await S;O((0,s.dx)((0,o.tZ)("Dashboard is public!"))),T instanceof m.H$?T.setState({meta:{...T.state.meta,publicDashboardEnabled:p.isEnabled,publicDashboardUid:p.uid}}):T.updateMeta({publicDashboardUid:p.uid,publicDashboardEnabled:p.isEnabled})},invalidatesTags:(T,M,{dashboard:O})=>[{type:"PublicDashboard",id:O instanceof m.H$?O.state.uid:O.uid}]}),updatePublicDashboard:D.mutation({query:({payload:T,dashboard:M})=>({url:`/dashboards/uid/${M instanceof m.H$?M.state.uid:M.uid}/public-dashboards/${T.uid}`,method:"PATCH",data:T}),async onQueryStarted({dashboard:T},{dispatch:M,queryFulfilled:O}){const{data:S}=await O;M((0,s.dx)((0,o.tZ)("Public dashboard updated!"))),T instanceof m.H$?T.setState({meta:{...T.state.meta,publicDashboardEnabled:S.isEnabled,publicDashboardUid:S.uid}}):T.updateMeta?.({publicDashboardUid:S.uid,publicDashboardEnabled:S.isEnabled})},invalidatesTags:(T,M,{payload:O})=>[{type:"PublicDashboard",id:O.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:D.mutation({query:()=>({url:""})}),deleteRecipient:D.mutation({query:()=>({url:""})}),reshareAccessToRecipient:D.mutation({query:()=>({url:""})}),getActiveUsers:D.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:D.query({query:()=>({url:""}),providesTags:(T,M,O)=>[{type:"ActiveUserDashboards",id:O}]}),listPublicDashboards:D.query({query:(T=1)=>({url:`/dashboards/public-dashboards?page=${T}&perpage=8`}),transformResponse:T=>({...T,totalPages:Math.ceil(T.totalCount/T.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:D.mutation({query:T=>({url:`/dashboards/uid/${T.dashboardUid}/public-dashboards/${T.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:T,uid:M},{dispatch:O,queryFulfilled:S}){await S,O((0,s.dx)((0,o.tZ)("Public dashboard deleted!"))),T instanceof m.H$?T.setState({meta:{...T.state.meta,publicDashboardUid:M,publicDashboardEnabled:!1}}):T?.updateMeta({publicDashboardUid:M,publicDashboardEnabled:!1})},invalidatesTags:(T,M,{dashboardUid:O})=>[{type:"PublicDashboard",id:O},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]}),revokeAllAccess:D.mutation({query:()=>({url:""})})})}),{useGetPublicDashboardQuery:f,useCreatePublicDashboardMutation:d,useUpdatePublicDashboardMutation:E,useDeletePublicDashboardMutation:h,useListPublicDashboardsQuery:y,useAddRecipientMutation:a,useDeleteRecipientMutation:v,useReshareAccessToRecipientMutation:g,useGetActiveUsersQuery:b,useGetActiveUserDashboardsQuery:P,useRevokeAllAccessMutation:C}=u},15858:(Y,I,e)=>{"use strict";e.d(I,{M:()=>u});var t=e(2543),n=e(19347),r=e(2913),s=e(57767),o=e(82792),m=e(98796),l=e(24240),i=e(80484);function c(f){return!!(f.libraryPanel?.name&&f.libraryPanel?.uid)}class u{async makeExportable(d){d.cleanUpRepeats();const E=d.getSaveModelCloneOld();E.id=null,d.processRepeats();const h=[],y={},a={},v={},g=new Map;for(const D of E.getVariables())v[D.name]=D;const b=(D,T)=>{if(D.datasource===void 0){D.datasource=T;return}let M=D.datasource,O=null;const S=M?.uid;return S&&S.indexOf("$")===0&&(O=v[S.substring(1)],O&&O.current&&(M=O.current.value)),(0,n.l)().get(M).then(p=>{if(p.meta?.builtIn||(y["datasource"+p.meta?.id]={type:"datasource",id:p.meta.id,name:p.meta.name,version:p.meta.info.version||"1.0.0"},O))return;const x=D.libraryPanel,A=x?"-for-library-panel":"";let R="DS_"+p.name.replace(" ","_").toUpperCase()+A.toUpperCase();if(a[R]={name:R,label:p.name,description:"",type:"datasource",pluginId:p.meta?.id,pluginName:p.meta?.name,usage:a[R]?.usage},x){const B=a[R]?.usage?.libraryPanels||[];B.push({name:x.name,uid:x.uid}),a[R].usage={libraryPanels:B}}D.datasource={type:p.meta.id,uid:"${"+R+"}"}})},P=async D=>{if(D.type!=="row"){if(await b(D),D.targets)for(const M of D.targets)await b(M,D.datasource);const T=r.Ay.panels[D.type];T&&(y["panel"+T.id]={type:"panel",id:T.id,name:T.name,version:T.info.version})}},C=async D=>{if((0,o.X)(D)){const{name:T,uid:M}=D.libraryPanel;let O=D.libraryPanel.model;O||(O=(await(0,s.Yr)(M,!0)).model),await b(O);const{gridPos:S,id:p,...x}=O;g.has(M)||g.set(M,{name:T,uid:M,kind:m.i.Panel,model:x})}};try{for(const M of E.panels)if(await P(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const O of M.panels)await P(O);for(const M of E.getVariables())(0,l.P4)(M)&&(await b(M),M.options=[],M.current={},M.refresh=M.refresh!==i.CO.never?M.refresh:i.CO.onDashboardLoad);for(const M of E.annotations.list)await b(M);y.grafana={type:"grafana",id:"grafana",name:"SyncCity",version:r.Ay.buildInfo.version};for(const M of E.panels)if(await C(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const O of M.panels)await C(O);(0,t.each)(a,M=>{h.push(M)});for(const M of E.getVariables())if((0,l.VO)(M)){const O="VAR_"+M.name.replace(" ","_").toUpperCase();h.push({name:O,type:"constant",label:M.label||M.name,value:M.query,description:""}),M.query="${"+O+"}",M.current={value:M.query,text:M.query,selected:!1},M.options=[M.current]}const D=[...g.entries()].reduce((M,[O,S])=>(M[O]=S,M),{}),T=(0,t.defaults)({__inputs:h,__elements:D,__requires:(0,t.sortBy)(y,["id"])},E);for(let M=0;M<T.panels.length;M++){const O=T.panels[M];c(O)&&(T.panels[M]={gridPos:O.gridPos,id:O.id,libraryPanel:{uid:O.libraryPanel.uid,name:O.libraryPanel.name}})}return T}catch(D){return console.error("Export failed:",D),{error:D}}}}},20120:(Y,I,e)=>{"use strict";e.d(I,{fP:()=>j,Ay:()=>te});var t=e(32196),n=e(96540),r=e(63329),s=e(58476),o=e(40672),m=e(13544),l=e(12131),i=e(69731),c=e(96374),u=e(39938),f=e(19727),d=e(27746),E=e(71678),h=e(15068),y=e(75269),a=e(10804),v=e(2913),g=e(3169),b=e(10096),P=e(16021),C=e(44836),D=e(91219),T=e(83122),M=e(55852),O=e(14578),S=e(32264),p=e(38138),x=e(36974),A=e(7758),R=e(31678),B=e(28601);const F=({dashboard:ue})=>{const be=(0,n.useMemo)(()=>(0,x._u)(),[]),ge=(0,R.useDispatch)(),re=(0,R.useSelector)(ye=>ye.dashboard.initialDatasource);return n.createElement(p.W,null,n.createElement(p.W.Item,{key:"add-visualisation",testId:m.Tp.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,C.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const ye=(0,x.OK)(ue,re);A.c.toolbarAddButtonClicked({item:"add_visualization"}),l.Ny.partial({editPanel:ye}),ge((0,B.Ub)(void 0))}}),S.$.featureToggles.vizAndWidgetSplit&&n.createElement(p.W.Item,{key:"add-widget",testId:m.Tp.pages.AddDashboard.itemButton("Add new widget menu item"),label:(0,C.t)("dashboard.add-menu.widget","Widget"),onClick:()=>{A.c.toolbarAddButtonClicked({item:"add_widget"}),l.Ny.partial({addWidget:!0})}}),n.createElement(p.W.Item,{key:"add-row",testId:m.Tp.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,C.t)("dashboard.add-menu.row","Row"),onClick:()=>{A.c.toolbarAddButtonClicked({item:"add_row"}),(0,x.SD)(ue)}}),n.createElement(p.W.Item,{key:"add-panel-lib",testId:m.Tp.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,C.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{A.c.toolbarAddButtonClicked({item:"import_from_library"}),(0,x.s3)(ue)}}),n.createElement(p.W.Item,{key:"add-panel-clipboard",testId:m.Tp.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,C.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{A.c.toolbarAddButtonClicked({item:"paste_panel"}),(0,x.no)(ue,be)},disabled:!be}))},w=({dashboard:ue,onToolbarAddMenuOpen:be})=>{const[ge,re]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{ge&&be&&be()},[ge,be]),n.createElement(T.m,{overlay:()=>n.createElement(F,{dashboard:ue}),placement:"bottom",offset:[0,6],onVisibleChange:re},n.createElement(M.$n,{variant:"secondary",size:"sm",fill:"outline","data-testid":m.Tp.components.PageToolbar.itemButton("Add button")},n.createElement(C.x6,{i18nKey:"dashboard.toolbar.add"},"Add"),n.createElement(O.I,{name:ge?"angle-up":"angle-down",size:"lg"})))};var L=e(70497),V=e(14792),N=e(2609),z=e(81862),J=e(28444),G=e(99246),H=e(93030),q=e(62367);const le=({dashboard:ue})=>n.createElement(M.$n,{"data-testid":m.Tp.pages.Dashboard.DashNav.shareButton,variant:"primary",size:"sm",onClick:()=>{A.c.toolbarShareClick(),l.Ny.partial({shareView:"link"})}},n.createElement(C.x6,{i18nKey:"dashboard.toolbar.share-button"},"Share")),me={setStarred:D.ci,updateTimeZoneForSession:z.Cj},k=(0,r.connect)(null,me),ee=m.Tp.pages.Dashboard.DashNav;function X(ue){registerDynamicDashNavAction("left",ue)}function j(ue){(0,G.Y)("right",ue)}const ne=n.memo(ue=>{(0,s.zy)();const be=(0,i.C)();(0,P.u)(ue.dashboard.events,J.Cf);const ge=ue.dashboard.snapshot?.originalUrl??"",re=()=>{window.location.href=o.sQ.sanitizeUrl(ue.dashboard.snapshot.originalUrl)},ye=(0,g._2)(),Be=()=>{try{const at=new URL(o.sQ.sanitizeUrl(ge),v.Ay.appUrl),Ye=new URL(v.Ay.appUrl);at.host!==Ye.host?b.lE.publish(new J.S8({component:c.u,props:{title:"Proceed to external site?",modalClass:oe,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,ge)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:re}})):re()}catch(at){ye.error("Invalid URL",at instanceof Error?at.message:void 0)}},ve=()=>{A.c.toolbarFavoritesClick();const at=(0,V.UA)(),{dashboard:Ye,setStarred:$e}=ue;at.starDashboard(Ye.uid,!!Ye.meta.isStarred).then(xe=>{$e({id:Ye.uid,title:Ye.title,url:Ye.meta.url??"",isStarred:xe}),Ye.meta.isStarred=xe,be()})},Me=()=>{A.c.toolbarSettingsClick(),l.Ny.partial({editview:"settings"})},ke=()=>{N._o.prev()},Se=()=>{N._o.next()},We=()=>{N._o.stop(),be()},De=(at,Ye)=>{at.map(($e,xe)=>{const Fe=$e.component,Ee=n.createElement(Fe,{...ue,key:`button-custom-${xe}`});typeof $e.index=="number"?Ye.splice($e.index,0,Ee):Ye.push(Ee)})},pe=()=>N._o.state.isPlaying,Ne=()=>{const{dashboard:at,kioskMode:Ye}=ue,{canStar:$e,isStarred:xe}=at.meta,Fe=[];if(Ye||pe())return[];if($e){let Ee=xe?(0,C.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,C.t)("dashboard.toolbar.mark-favorite","Mark as favorite");Fe.push(n.createElement(H._,{tooltip:Ee,icon:xe?"favorite":"star",iconType:xe?"mono":"default",iconSize:"lg",onClick:ve,key:"button-star"}))}return at.meta.publicDashboardEnabled&&Fe.push(n.createElement(u.E,{color:"blue",text:"Public",key:"public-dashboard-button-badge",className:ie,"data-testid":ee.publicDashboardTag})),v.Ay.featureToggles.scenes&&Fe.push(n.createElement(H._,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>{l.Ny.partial({scenes:!0})}})),De(G.C.left,Fe),Fe},Le=()=>n.createElement(f.e,{key:"playlist-buttons"},n.createElement(d.I,{tooltip:(0,C.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:ke,narrow:!0}),n.createElement(d.I,{onClick:We},n.createElement(C.x6,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(d.I,{tooltip:(0,C.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:Se,narrow:!0})),He=()=>{const{dashboard:at,updateTimeZoneForSession:Ye,hideTimePicker:$e}=ue;return $e?null:n.createElement(q.$,{dashboard:at,onChangeTimeZone:Ye,onToolbarRefreshClick:A.c.toolbarRefreshClick,onToolbarZoomClick:A.c.toolbarZoomClick,onToolbarTimePickerClick:A.c.toolbarTimePickerClick,key:"time-controls"})},je=()=>{const{dashboard:at,isFullscreen:Ye,kioskMode:$e,hideTimePicker:xe}=ue,{canSave:Fe,canEdit:Ee,showSettings:se,canShare:ae}=at.meta,{snapshot:fe}=at,Ce=fe&&fe.originalUrl,Re=[];return pe()?[Le(),He()]:$e===R.KioskMode.TV?[He()]:(Ce&&Re.push(n.createElement(d.I,{tooltip:(0,C.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:Be,icon:"link",key:"button-snapshot"})),Fe&&!Ye&&Re.push(n.createElement(E.$s,{key:"button-save"},({showModal:Oe,hideModal:ze})=>n.createElement(d.I,{tooltip:(0,C.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{A.c.toolbarSaveClick(),Oe(L.$,{dashboard:at,onDismiss:ze})}}))),De(G.C.right,Re),se&&Re.push(n.createElement(d.I,{tooltip:(0,C.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Me,key:"button-settings"})),Ee&&!Ye&&Re.push(n.createElement(w,{dashboard:at,onToolbarAddMenuOpen:A.c.toolbarAddClick,key:"panel-add-dropdown"})),ae&&Re.push(n.createElement(le,{key:"button-share",dashboard:at})),xe||Re.push(n.createElement(a.K,{key:"toolbar-separator"})),Re.push(He()),Re)};return n.createElement(y.H,{actions:n.createElement(n.Fragment,null,Ne(),n.createElement(a.K,{leftActionsSeparator:!0}),n.createElement(h.U,{alignment:"right"},je()))})});ne.displayName="DashNav";const te=k(ne),oe=(0,t.css)({width:"max-content",maxWidth:"80vw"}),ie=(0,t.css)({color:"grey",backgroundColor:"transparent",border:"1px solid"})},93030:(Y,I,e)=>{"use strict";e.d(I,{_:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(29158);const o=({icon:l,iconType:i,iconSize:c,tooltip:u,onClick:f,children:d})=>{const E=(0,r.of)(m);return n.createElement("div",{className:E.noBorderContainer},l&&n.createElement(s.K,{name:l,size:c,iconType:i,tooltip:u,tooltipPlacement:"bottom",onClick:f}),d)},m=l=>({noBorderContainer:(0,t.css)`
    padding: 0 ${l.spacing(.5)};
    display: flex;
  `})},62367:(Y,I,e)=>{"use strict";e.d(I,{$:()=>f});var t=e(96540),n=e(85858),r=e(3591),s=e(11134),o=e(25573),m=e(10096),l=e(44836),i=e(16233),c=e(74856),u=e(28444);class f extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=E=>{(0,c.jG)().setAutoRefresh(E),this.forceUpdate()},this.onRefresh=()=>((0,c.jG)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{m.lE.publish(new u.Io({direction:u.xL.Left}))},this.onMoveForward=()=>{m.lE.publish(new u.Io({direction:u.xL.Right}))},this.onChangeTimePicker=E=>{const{dashboard:h}=this.props,y=h.timepicker,a=y.nowDelay&&E.raw.to==="now",v=n.isMathString(E.raw.from)?E.raw.from:E.from,g=n.isMathString(E.raw.to)?E.raw.to:E.to,b={from:v,to:a?"now-"+y.nowDelay:g};(0,c.jG)().setTime(b)},this.onChangeTimeZone=E=>{this.props.dashboard.timezone=E,this.props.onChangeTimeZone(E),this.onRefresh()},this.onChangeFiscalYearStartMonth=E=>{this.props.dashboard.fiscalYearStartMonth=E,this.onRefresh()},this.onZoom=()=>{this.props.onToolbarZoomClick&&this.props.onToolbarZoomClick(),m.lE.publish(new u.U0({scale:2}))},this.onRefreshClick=()=>{this.props.onToolbarRefreshClick&&this.props.onToolbarRefreshClick(),this.onRefresh()}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(r.sR,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:E,isOnCanvas:h}=this.props,{refresh_intervals:y}=E.timepicker,a=(0,c.jG)().getValidIntervals(y||s.cb),v=(0,c.jG)().timeRange(),g=E.getTimezone(),b=E.fiscalYearStartMonth,P=E.panelInEdit?.isEditing;let C;return E.refresh===i.SM&&(C=(0,c.jG)().getAutoRefreshInteval().interval),t.createElement(t.Fragment,null,t.createElement(o.m,{value:v,onChange:this.onChangeTimePicker,timeZone:g,fiscalYearStartMonth:b,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:h,onToolbarTimePickerClick:this.props.onToolbarTimePickerClick}),t.createElement(s.cC,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefreshClick,value:E.refresh,intervals:a,isOnCanvas:h,tooltip:(0,l.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:P,showAutoInterval:!0,text:C}))}}},16495:(Y,I,e)=>{"use strict";e.d(I,{U:()=>t.Ay});var t=e(20120)},46991:(Y,I,e)=>{"use strict";e.d(I,{d:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(55852);const o=({children:l,...i})=>{const c=(0,r.of)(m);return n.createElement("div",{className:c.buttonWrapper},n.createElement(s.$n,{icon:"plus",...i},l))},m=l=>({buttonWrapper:(0,t.css)`
    padding: ${l.spacing(3)} 0;
  `})},75590:(Y,I,e)=>{"use strict";e.d(I,{p:()=>v});var t=e(2543),n=e(96540),r=e(65879),s=e(13544),o=e(57418),m=e(88575),l=e(20333),i=e(15648),c=e(10354),u=e(15292),f=e(44836),d=e(11134),E=e(74856);const h=({refreshIntervals:g,onRefreshIntervalChange:b,getIntervalsFunc:P=a,validateIntervalsFunc:C=y})=>{const[D,T]=(0,n.useState)(P(g??d.cb)),[M,O]=(0,n.useState)(null);(0,n.useEffect)(()=>{const A=P(g??d.cb);T(A)},[P,g]);const S=(0,n.useMemo)(()=>Array.isArray(D)?D.join(","):"",[D]),p=(0,n.useCallback)(A=>{const R=A.currentTarget.value?A.currentTarget.value.split(","):[];T(R)},[T]),x=(0,n.useCallback)(A=>{const R=C(D);R===null&&b(P(D)),O(R)},[P,D,b,C]);return n.createElement(m.D,{label:(0,f.t)("dashboard-settings.general.auto-refresh-label","Auto refresh"),description:(0,f.t)("dashboard-settings.general.auto-refresh-description","Define the auto refresh intervals that should be available in the auto refresh list."),error:M,invalid:!!M},n.createElement(c.p,{id:"auto-refresh-input",invalid:!!M,value:S,onChange:p,onBlur:x}))},y=(g,b={getTimeSrv:E.jG})=>{try{return a(g,b),null}catch(P){return P instanceof Error?P.message:"Invalid intervals"}},a=(g,b={getTimeSrv:E.jG})=>{const P=g.filter(C=>C.trim()!=="").map(C=>C.replace(/\s+/g,""));return[...new Set(b.getTimeSrv().getValidIntervals(P))]};class v extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=b=>{const P=b.currentTarget.value;if((0,t.isEmpty)(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);if(r.isValidTimeSpan(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=b=>{typeof b=="string"&&this.props.onTimeZoneChange(b)},this.onWeekStartChange=b=>{this.props.onWeekStartChange(b)}}render(){return n.createElement(o.M,{label:(0,f.t)("dashboard-settings.time-picker.time-options-label","Time options"),isOpen:!0},n.createElement(m.D,{label:(0,f.t)("dashboard-settings.time-picker.time-zone-label","Time zone"),"data-testid":s.Tp.components.TimeZonePicker.containerV2},n.createElement(l.U,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(m.D,{label:(0,f.t)("dashboard-settings.time-picker.week-start-label","Week start"),"data-testid":s.Tp.components.WeekStartPicker.containerV2},n.createElement(i.l,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(h,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(m.D,{label:(0,f.t)("dashboard-settings.time-picker.now-delay-label","Now delay"),description:(0,f.t)("dashboard-settings.time-picker.now-delay-description","Exclude recent data that may be incomplete.")},n.createElement(c.p,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(m.D,{label:(0,f.t)("dashboard-settings.time-picker.hide-time-picker","Hide time picker")},n.createElement(u.d,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(m.D,{label:(0,f.t)("dashboard-settings.time-picker.refresh-live-dashboards-label","Refresh live dashboards"),description:(0,f.t)("dashboard-settings.time-picker.refresh-live-dashboards-description","Continuously re-draw panels where the time range references 'now'")},n.createElement(u.d,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},16561:(Y,I,e)=>{"use strict";e.d(I,{s:()=>zr});var t=e(96540),n=e(58476),r=e(71733),s=e(13544),o=e(12131),m=e(55852),l=e(15068),i=e(75269),c=e(17205),u=e(44836),f=e(16233),d=e(31678),E=e(28444),h=e(63329),y=e(23546),a=e(32196),v=e(16817),g=e(14110),b=e(40845),P=e(57418),C=e(66864),D=e(62930),T=e(56034),M=e(14578),O=e(29158),S=e(37390);const p=({nodes:xt,edges:wt,direction:vn,width:un,height:Mn,onDoubleClick:_n})=>{const Jn=(0,t.useRef)(null),pa=(0,t.useRef)(null),Da=(0,t.useCallback)(Ha=>{_n&&_n(Ha.nodes[0])},[_n]);return(0,t.useEffect)(()=>((async()=>{const es=await e.e(5083).then(e.t.bind(e,83416,23)),Ba={nodes:x(es,xt),edges:A(es,wt)},Fa={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:vn??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Jn.current=new es.Network(pa.current,Ba,Fa),Jn.current?.on("doubleClick",Da)})(),()=>{Jn.current&&Jn.current.off("doubleClick")}),[vn,wt,xt,Da]),t.createElement("div",null,t.createElement("div",{ref:pa,style:{width:un??"100%",height:Mn??"60vh"}}))};function x(xt,wt){const vn=wt.map(un=>({...un,shape:"box"}));return new xt.DataSet(vn)}function A(xt,wt){const vn=wt.map(un=>({...un,arrows:"to",dashes:!0}));return new xt.DataSet(vn)}function R({edges:xt,nodes:wt,show:vn,title:un,children:Mn}){const[_n,Jn]=(0,t.useState)(vn),pa=(0,t.useCallback)(()=>Jn(!0),[Jn]),Da=(0,t.useCallback)(()=>Jn(!1),[Jn]);return t.createElement(t.Fragment,null,t.createElement(S.a,{isOpen:_n,title:un,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:Da,onDismiss:Da},t.createElement(p,{nodes:wt,edges:xt})),Mn({showModal:pa}))}const B=({id:xt,usages:wt})=>{const vn=(0,t.useMemo)(()=>wt.find(Mn=>Mn.variable.id===xt),[xt,wt]);if(!vn)return null;const un=vn.nodes.map(Mn=>Mn.label.includes(`$${xt}`)?{...Mn,color:"#FB7E81"}:Mn);return t.createElement(R,{show:!1,title:`Showing usages for: $${xt}`,nodes:un,edges:vn.edges},({showModal:Mn})=>t.createElement(O.K,{onClick:()=>Mn(),name:"code-branch",tooltip:"Show usages","data-testid":"VariablesUnknownButton"}))};var U=e(12846);const F=1e3;function K({variables:xt,dashboard:wt}){const[vn,un]=(0,t.useState)(!1),[Mn,_n]=(0,t.useState)(0),[Jn,pa]=(0,t.useState)([]),Da=(0,b.of)(N);(0,t.useEffect)(()=>_n(Ba=>Ba+1),[xt,wt]);const{loading:Ha}=(0,v.A)(async()=>{if(vn&&Mn>0){const Ba=Date.now(),Fa=await(0,U.g0)(xt,wt),Hs=Date.now()-Ba;return Hs>=F&&(0,g.rR)("Slow unknown variables expansion",{elapsed:Hs}),_n(0),pa(Fa),Fa}return[]},[xt,wt,vn,Mn]),es=Ba=>{Ba&&(0,g.rR)("Unknown variables section expanded"),un(Ba)};return t.createElement("div",{className:Da.container},t.createElement(P.M,{label:t.createElement(w,null),isOpen:vn,onToggle:es},Ha&&t.createElement(C.gW,{justify:"center"},t.createElement(C.Gy,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(D.y,null))),!Ha&&Jn&&t.createElement(t.Fragment,null,Jn.length===0&&t.createElement(L,null),Jn.length>0&&t.createElement(V,{usages:Jn}))))}function w(){const xt=(0,b.of)(N);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(T.m,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(M.I,{name:"info-circle",className:xt.infoIcon})))}function L(){return t.createElement("span",null,"No renamed or missing variables found.")}function V({usages:xt}){const wt=(0,b.of)(N);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,xt.map(vn=>{const{variable:un}=vn,{id:Mn,name:_n}=un;return t.createElement("tr",{key:Mn},t.createElement("td",{className:wt.firstColumn},t.createElement("span",null,_n)),t.createElement("td",{className:wt.defaultColumn}),t.createElement("td",{className:wt.defaultColumn}),t.createElement("td",{className:wt.defaultColumn}),t.createElement("td",{className:wt.lastColumn},t.createElement(B,{id:un.id,usages:xt})))})))}const N=xt=>({container:(0,a.css)`
    margin-top: ${xt.spacing(4)};
    padding-top: ${xt.spacing(4)};
  `,infoIcon:(0,a.css)`
    margin-left: ${xt.spacing(1)};
  `,defaultColumn:(0,a.css)`
    width: 1%;
  `,firstColumn:(0,a.css)`
    width: 1%;
    vertical-align: top;
    color: ${xt.colors.text.maxContrast};
  `,lastColumn:(0,a.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var z=e(48594),J=e(87421),G=e(56968),H=e(75096),q=e(96374);function le({varName:xt,isOpen:wt=!1,onConfirm:vn,onDismiss:un}){return t.createElement(q.u,{title:"Delete variable",isOpen:wt,onConfirm:vn,onDismiss:un,body:`
      Are you sure you want to delete variable "${xt}"?
    `,modalClass:me.modal,confirmText:"Delete"})}const me={modal:(0,a.css)({width:"max-content",maxWidth:"80vw"})};var k=e(39070),ee=e(8964),X=e(58975),j=e(85140),ne=e(14329),te=e(41820),oe=e(20601),ie=e(24240),ue=e(72401),be=e(89458);function ge({onChange:xt,type:wt}){const vn=(0,t.useMemo)(()=>(0,H.AX)(),[]),un=(0,t.useMemo)(()=>vn.find(Mn=>Mn.value===wt)??vn[0],[vn,wt]);return t.createElement(be.v,{name:"Select variable type",value:un,options:vn,onChange:xt,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var re=e(2543),ye=e(27238),Be=e(3843);const ve=xt=>async wt=>{const{rootStateKey:vn}=xt;wt((0,z.kb)(vn,(0,Be.sJ)({name:(0,J.dn)(xt).name,id:xt.id})))},Me=xt=>async(wt,vn)=>{const{rootStateKey:un}=xt;wt((0,z.kb)(un,(0,Be.T7)((0,H.qD)(xt))))},ke=(xt,wt)=>(vn,un)=>{const{id:Mn,rootStateKey:_n}=xt;let Jn=null;if(wt.match(/^(?!__).*$/)||(Jn="Template names cannot begin with '__', that's reserved for Grafana's global variables"),wt.match(/^\w+$/)||(Jn="Only word characters are allowed in variable names"),(0,J.SS)(_n,un()).filter(Ha=>Ha.name===wt&&Ha.id!==Mn).length&&(Jn="Variable with the same name already exists"),Jn){vn((0,z.kb)(_n,(0,Be.DW)({newName:wt,errorText:Jn})));return}vn(Se(xt,wt))},Se=(xt,wt)=>(vn,un)=>{const{rootStateKey:Mn}=xt,_n=(0,J.dn)(xt,un());if(_n.name===wt){vn((0,z.kb)(Mn,(0,Be.FN)((0,H.qD)(xt,{newName:wt}))));return}const Jn={...(0,re.cloneDeep)(_n),name:wt,id:wt},pa=_n.global,Da=_n.index,Ha=(0,H.jX)(Jn);vn((0,z.kb)(Mn,(0,G.QV)((0,H.qD)(Ha,{global:pa,index:Da,model:Jn})))),vn((0,z.kb)(Mn,(0,Be.FN)((0,H.qD)(Ha,{newName:wt})))),vn((0,z.kb)(Mn,(0,G.Hr)((0,H.qD)(xt,{reIndex:!1}))))},We=(xt,wt="query")=>(vn,un)=>{const Mn=(0,H.q4)(xt),_n=(0,J.SS)(Mn,un()),Jn=pe(wt,_n),pa={type:wt,id:Jn},Da=!1,Ha=(0,J.hk)(Mn,un()),es=(0,re.cloneDeep)(oe.B.get(wt).initialState);es.id=Jn,es.name=Jn,es.rootStateKey=Mn,vn((0,z.kb)(Mn,(0,G.QV)((0,H.qD)(pa,{global:Da,model:es,index:Ha})))),o.Ny.partial({editIndex:_n.length})},De=xt=>(wt,vn)=>{const un=(0,H.q4)(xt),Mn=vn(),_n=(0,J.nS)(un,Mn),Jn=Mn.dashboard.getModel(),{usages:pa}=(0,U.hM)(_n,Jn),Da=(0,U.Ow)(pa);wt((0,z.kb)(un,(0,ye.bX)({usages:pa,usagesNetwork:Da})))};function pe(xt,wt){let vn=0,un=`${xt}${vn}`;for(;wt.find(Mn=>Mn.id===un);)un=`${xt}${++vn}`;return un}var Ne=e(85830);const Le=(xt,wt)=>({editor:(0,J.nx)(wt.identifier.rootStateKey,xt).editor,variable:(0,J.dn)(wt.identifier,xt)}),He=xt=>({...(0,y.bindActionCreators)({variableEditorMount:ve,variableEditorUnMount:Me,changeVariableName:ke,updateOptions:ue.mZ},xt),changeVariableProp:(wt,vn,un)=>xt((0,z.kb)(wt.rootStateKey,(0,G.QP)((0,H.qD)(wt,{propName:vn,propValue:un})))),changeVariableType:(wt,vn)=>xt((0,z.kb)(wt.rootStateKey,(0,G.l_)((0,H.qD)(wt,{newType:vn})))),removeVariable:wt=>{xt((0,z.kb)(wt.rootStateKey,(0,G.Hr)((0,H.qD)(wt,{reIndex:!0}))))}}),je=(0,h.connect)(Le,He);class at extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=wt=>{wt.preventDefault(),this.props.changeVariableName(this.props.identifier,wt.currentTarget.value)},this.onTypeChange=wt=>{wt.value&&this.props.changeVariableType(this.props.identifier,wt.value)},this.onLabelChange=wt=>{wt.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",wt.currentTarget.value)},this.onDescriptionChange=wt=>{this.props.changeVariableProp(this.props.identifier,"description",wt.currentTarget.value)},this.onHideChange=wt=>{this.props.changeVariableProp(this.props.identifier,"hide",wt)},this.onPropChanged=({propName:wt,propValue:vn,updateOptions:un=!1})=>{this.props.changeVariableProp(this.props.identifier,wt,vn),un&&this.props.updateOptions((0,H.jX)(this.props.variable))},this.onHandleSubmit=async wt=>{wt.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,H.jX)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),o.Ny.partial({editIndex:null})},this.onApply=()=>{o.Ny.partial({editIndex:null})},this.getVariableOptions=()=>{const{variable:wt}=this.props;return(0,ie.SP)(wt)?wt.options.map(vn=>({label:String(vn.text),value:String(vn.value)})):[]}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:wt}=this.props,vn=oe.B.get(this.props.variable.type).editor;if(!vn)return null;const un=wt.state===k.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(ge,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(X.Y,null,"General"),t.createElement(ne._,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Ne.M.MaxSize,required:!0}),t.createElement(ne._,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(j.Z,{name:"Description",value:wt.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(ee.D,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),vn&&t.createElement(vn,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,ie.SP)(this.props.variable)?t.createElement(te.j,{options:this.getVariableOptions()}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(C.Gy,{spacing:"md",height:"inherit"},t.createElement(m.$n,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(m.$n,{type:"submit","data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:un,variant:"secondary"},"Run query",un&&t.createElement(M.I,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(m.$n,{variant:"primary",onClick:this.onApply,"data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(le,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Ye=je(at);var $e=e(55244),xe=e(67061),Fe=e(7521),Ee=e(99140);const se=({variables:xt})=>{const wt=(0,t.useMemo)(()=>(0,U.hI)(xt),[xt]),vn=(0,t.useMemo)(()=>(0,U.qJ)(xt),[xt]);return vn.length?t.createElement(R,{show:!1,title:"Dependencies",nodes:(0,U.H7)(wt,vn),edges:vn},({showModal:un})=>t.createElement(m.$n,{onClick:()=>{(0,g.rR)("Show variable dependencies"),un()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},ae=xt=>t.createElement(h.Provider,{store:Ee.M_},t.createElement(se,{...xt})),fe=({id:xt,usages:wt,isAdhoc:vn})=>{const un=(0,t.useMemo)(()=>wt.find(_n=>_n.variable.id===xt),[wt,xt]);if(wt.length===0||vn||!un)return null;const Mn=un.nodes.map(_n=>_n.label.includes(`$${xt}`)?{..._n,color:"#FB7E81"}:_n);return t.createElement(R,{show:!1,title:`Showing usages for: $${xt}`,nodes:Mn,edges:un.edges},({showModal:_n})=>t.createElement(O.K,{onClick:()=>{(0,g.rR)("Show variable usages"),_n()},name:"code-branch",tooltip:"Show usages"}))};function Ce({index:xt,variable:wt,usageTree:vn,usagesNetwork:un,onEdit:Mn,onDuplicate:_n,onDelete:Jn}){const pa=(0,b.$j)(),Da=(0,b.of)(ze),Ha=Re(wt),Ba=(0,U.PK)(wt.id,vn)>0||wt.type==="adhoc",Fa=(0,H.jX)(wt);return t.createElement($e.sx,{draggableId:JSON.stringify(Fa),index:xt},(Is,Hs)=>t.createElement("tr",{ref:Is.innerRef,...Is.draggableProps,style:{userSelect:Hs.isDragging?"none":"auto",background:Hs.isDragging?pa.colors.background.secondary:void 0,...Is.draggableProps.style}},t.createElement("td",{role:"gridcell",className:Da.column},t.createElement(m.$n,{size:"xs",fill:"text",onClick:Bs=>{Bs.preventDefault(),Mn(Fa)},className:Da.nameLink,"aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowNameFields(wt.name)},wt.name)),t.createElement("td",{role:"gridcell",className:Da.definitionColumn,onClick:Bs=>{Bs.preventDefault(),Mn(Fa)},"aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(wt.name)},Ha),t.createElement("td",{role:"gridcell",className:Da.column},t.createElement("div",{className:Da.icons},t.createElement(Oe,{passed:Ba}),t.createElement(fe,{id:wt.id,isAdhoc:wt.type==="adhoc",usages:un}),t.createElement(O.K,{onClick:Bs=>{Bs.preventDefault(),(0,g.rR)("Duplicate variable"),_n(Fa)},name:"copy",tooltip:"Duplicate variable","aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(wt.name)}),t.createElement(O.K,{onClick:Bs=>{Bs.preventDefault(),(0,g.rR)("Delete variable"),Jn(Fa)},name:"trash-alt",tooltip:"Remove variable","aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(wt.name)}),t.createElement("div",{...Is.dragHandleProps,className:Da.dragHandle},t.createElement(M.I,{name:"draggabledots",size:"lg"}))))))}function Re(xt){let wt="";return xt.type==="query"?xt.definition?wt=xt.definition:typeof xt.query=="string"&&(wt=xt.query):(0,ie.SP)(xt)&&(wt=xt.query),wt}function Oe({passed:xt}){const wt=(0,b.of)(ze);return xt?t.createElement(M.I,{name:"check",className:wt.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(M.I,{name:"exclamation-triangle",className:wt.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function ze(xt){return{dragHandle:(0,a.css)`
      cursor: grab;
      margin-left: ${xt.spacing(1)};
    `,column:(0,a.css)`
      width: 1%;
    `,nameLink:(0,a.css)`
      cursor: pointer;
      color: ${xt.colors.primary.text};
    `,definitionColumn:(0,a.css)`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:(0,a.css)`
      color: ${xt.v1.palette.greenBase};
      margin-right: ${xt.spacing(2)};
    `,iconFailed:(0,a.css)`
      color: ${xt.v1.palette.orange};
      margin-right: ${xt.spacing(2)};
    `,icons:(0,a.css)`
      display: flex;
      gap: ${xt.spacing(2)};
      align-items: center;
    `}}function Xe({variables:xt,usages:wt,usagesNetwork:vn,onChangeOrder:un,onAdd:Mn,onEdit:_n,onDelete:Jn,onDuplicate:pa}){const Da=(0,b.of)(et),Ha=es=>{if(!es.destination||!es.source)return;(0,g.rR)("Variable drag and drop");const Ba=JSON.parse(es.draggableId);un(Ba,xt[es.source.index].index,xt[es.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,xt.length===0&&t.createElement(Ze,{onAdd:Mn}),xt.length>0&&t.createElement(xe.B,{direction:"column",gap:4},t.createElement("div",{className:Da.tableContainer},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement($e.JY,{onDragEnd:Ha},t.createElement($e.gL,{droppableId:"variables-list",direction:"vertical"},es=>t.createElement("tbody",{ref:es.innerRef,...es.droppableProps},xt.map((Ba,Fa)=>t.createElement(Ce,{index:Fa,key:`${Ba.name}-${Fa}`,variable:Ba,usageTree:wt,usagesNetwork:vn,onDelete:Jn,onDuplicate:pa,onEdit:_n})),es.placeholder))))),t.createElement(xe.B,null,t.createElement(ae,{variables:xt}),t.createElement(m.$n,{"aria-label":s.Tp.pages.Dashboard.Settings.Variables.List.newButton,onClick:Mn,icon:"plus"},"New variable")))))}function Ze({onAdd:xt}){return t.createElement("div",null,t.createElement(Fe.A,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:wt=>{wt.preventDefault(),xt()}}))}const et=()=>({tableContainer:(0,a.css)`
    overflow: scroll;
    width: 100%;
  `}),nt=(xt,wt)=>{const{uid:vn}=wt.dashboard,un=(0,J.nx)(vn,xt);return{variables:(0,J.nS)(vn,xt),idInEditor:un.editor.id,usagesNetwork:un.inspect.usagesNetwork,usages:un.inspect.usages}},lt=xt=>({...(0,y.bindActionCreators)({createNewVariable:We,initListMode:De},xt),changeVariableOrder:(wt,vn,un)=>xt((0,z.kb)(wt.rootStateKey,(0,G.hj)((0,H.qD)(wt,{fromIndex:vn,toIndex:un})))),duplicateVariable:wt=>xt((0,z.kb)(wt.rootStateKey,(0,G.ut)((0,H.qD)(wt,{newId:void 0})))),removeVariable:wt=>{xt((0,z.kb)(wt.rootStateKey,(0,G.Hr)((0,H.qD)(wt,{reIndex:!0}))))}}),rt=(0,h.connect)(nt,lt);class ut extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=wt=>{const vn=this.props.variables.findIndex(un=>un.id===wt.id);o.Ny.partial({editIndex:vn})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(wt,vn,un)=>{this.props.changeVariableOrder(wt,vn,un)},this.onDuplicateVariable=wt=>{this.props.duplicateVariable(wt)},this.onModalOpen=wt=>{this.setState({variableId:wt})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:wt,variables:vn,sectionNav:un}=this.props,Mn=wt!=null?vn[wt]:void 0,_n=un.node,Jn=_n.parentItem?{..._n.parentItem,url:_n.url}:void 0,pa=Mn?{text:Mn.name,parentItem:Jn}:Jn;return t.createElement(c.Y,{navModel:this.props.sectionNav,pageNav:pa},!Mn&&t.createElement(Xe,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!Mn&&this.props.variables.length>0&&t.createElement(K,{variables:this.props.variables,dashboard:this.props.dashboard}),Mn&&t.createElement(Ye,{identifier:(0,H.jX)(Mn)}),t.createElement(le,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const Et=rt(ut);var Ct=e(5108),Ut=e(10096);const Gt=({dashboard:xt,sectionNav:wt})=>{const vn=Ut.TP.hasPermission(d.AccessControlAction.DashboardsPermissionsWrite),un=wt.node.parentItem;return t.createElement(c.Y,{navModel:wt,pageNav:un},t.createElement(Ct.x,{resource:"dashboards",resourceId:xt.uid,canSetPermissions:vn}))};var Wt=e(78050),ot=e(22391),Tt=e(19347),Pn=e(84167),ft=e(88575),Mt=e(10354),_t=e(10880),nn=e(88323),dn=e(77268),en=e(2913),Xt=e(82241),En=e(46502),Vn=e(51612);const Wn="New annotation",na=({editIdx:xt,dashboard:wt})=>{const vn=(0,b.of)(Bt),[un,Mn]=(0,t.useState)(wt.annotations.list[xt]),_n=(0,t.useMemo)(()=>un.filter?un.filter.exclude?2:1:0,[un.filter]),{value:Jn}=(0,v.A)(()=>(0,Tt.l)().get(un.datasource),[un.datasource]),pa=(0,Tt.l)().getInstanceSettings(un.datasource),Da=ja=>{const bs=[...wt.annotations.list];bs.splice(xt,1,ja),Mn(ja),wt.annotations.list=bs},Ha=ja=>{Da({...un,name:ja.currentTarget.value})},es=ja=>{const bs=(0,ot.p$)(ja);un.datasource?.type!==bs.type?Da({datasource:bs,builtIn:un.builtIn,enable:un.enable,iconColor:un.iconColor,name:un.name,hide:un.hide,filter:un.filter,mappings:un.mappings,type:un.type}):Da({...un,datasource:bs})},Ba=ja=>{const bs=ja.currentTarget;Da({...un,[bs.name]:bs.type==="checkbox"?bs.checked:bs.value})},Fa=ja=>{Da({...un,iconColor:ja})},Is=ja=>{let bs=ja.value===0?void 0:{exclude:ja.value===2,ids:un.filter?.ids??[]};Da({...un,filter:bs})},Hs=ja=>{if(!Array.isArray(ja))return;const bs={exclude:_n===2,ids:[]};ja.forEach(wr=>wr.value&&bs.ids.push(wr.value)),Da({...un,filter:bs})},Bs=ln,ar=()=>{o.Ny.partial({editview:null,editIndex:null})},eo=()=>{const ja=wt.annotations.list;wt.annotations.list=[...ja.slice(0,xt),...ja.slice(xt+1)],ln()},Rs=un.name===Wn,Do=(ja,bs)=>ja.label&&bs.label?ja.label.toLowerCase().localeCompare(bs.label.toLowerCase()):-1,Nr=(0,t.useMemo)(()=>wt?.panels.filter(ja=>en.Ay.panels[ja.type]).map(ja=>({value:ja.id,label:ja.title??`Panel ${ja.id}`,description:ja.description,imgUrl:en.Ay.panels[ja.type].info.logos.small})).sort(Do)??[],[wt]);return t.createElement("div",null,t.createElement(Pn.n,{className:vn.settingsForm},t.createElement(ft.D,{label:"Name"},t.createElement(Mt.p,{"aria-label":s.Tp.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Rs,value:un.name,onChange:Ha})),t.createElement(ft.D,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(Vn.s,{annotations:!0,variables:!0,current:un.datasource,onChange:es})),t.createElement(ft.D,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(_t.S,{name:"enable",id:"enable",value:un.enable,onChange:Ba})),t.createElement(ft.D,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(_t.S,{name:"hide",id:"hide",value:un.hide,onChange:Ba})),t.createElement(ft.D,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(C.Gy,null,t.createElement(dn.a,{value:un?.iconColor,onChange:Fa}))),t.createElement(ft.D,{label:"Show in","aria-label":s.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},t.createElement(t.Fragment,null,t.createElement(nn.l6,{options:Dn,value:_n,onChange:Is,"aria-label":s.Tp.components.Annotations.annotationsTypeInput}),_n!==0&&t.createElement(nn.KF,{options:Nr,value:Nr.filter(ja=>un.filter?.ids.includes(ja.value)),onChange:Hs,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:vn.select,"aria-label":s.Tp.components.Annotations.annotationsChoosePanelInput})))),t.createElement(Pn.n,null,t.createElement("h3",{className:"page-heading"},"Query"),Jn?.annotations&&pa&&t.createElement(Xt.A,{datasource:Jn,datasourceInstanceSettings:pa,annotation:un,onChange:Da}),Jn&&!Jn.annotations&&t.createElement(En.F,{datasource:Jn,annotation:un,onChange:Da})),t.createElement(xe.B,null,!un.builtIn&&t.createElement(m.$n,{variant:"destructive",onClick:eo},"Delete"),t.createElement(m.$n,{variant:"secondary",onClick:ar,"data-testid":s.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),t.createElement(m.$n,{variant:"primary",onClick:Bs},"Apply")))},Bt=xt=>({settingsForm:(0,a.css)({maxWidth:xt.spacing(60),marginBottom:xt.spacing(2)}),select:(0,a.css)`
      margin-top: 8px;
    `});function ln(){o.Ny.partial({editIndex:null})}var mn=(xt=>(xt[xt.AllPanels=0]="AllPanels",xt[xt.IncludePanels=1]="IncludePanels",xt[xt.ExcludePanels=2]="ExcludePanels",xt))(mn||{});const Dn=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var hn=e(14588),Fn=e(91605),wn=e(46991);const Hn=({dashboard:xt,onNew:wt,onEdit:vn})=>{const un=(0,b.of)(An),[Mn,_n]=(0,t.useState)(xt.annotations.list),Jn=(Ba,Fa)=>{xt.annotations.list=hn.moveItemImmutably(Mn,Ba,Ba+Fa),_n(xt.annotations.list)},pa=Ba=>{xt.annotations.list=[...Mn.slice(0,Ba),...Mn.slice(Ba+1)],_n(xt.annotations.list)},Da=Mn.length===0||Mn.length===1&&Mn[0].builtIn,Ha=Ba=>Ba.enable===!1?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Ba.name)):Ba.builtIn?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},Ba.name," \xA0 (Built-in)")):t.createElement(t.Fragment,null,Ba.name),es=(0,Tt.l)();return t.createElement(C.gW,null,Mn.length>0&&t.createElement("div",{className:un.table},t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,xt.annotations.list.map((Ba,Fa)=>t.createElement("tr",{key:`${Ba.name}-${Fa}`},Ba.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>vn(Fa)},t.createElement(m.$n,{size:"sm",fill:"text",variant:"secondary"},Ha(Ba))):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>vn(Fa)},t.createElement(m.$n,{size:"sm",fill:"text",variant:"secondary"},Ha(Ba))),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>vn(Fa)},es.getInstanceSettings(Ba.datasource)?.name||Ba.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Fa!==0&&t.createElement(O.K,{name:"arrow-up",onClick:()=>Jn(Fa,-1),tooltip:"Move up"})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},xt.annotations.list.length>1&&Fa!==xt.annotations.list.length-1?t.createElement(O.K,{name:"arrow-down",onClick:()=>Jn(Fa,1),tooltip:"Move down"}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!Ba.builtIn&&t.createElement(Fn.e,{size:"sm",onConfirm:()=>pa(Fa),"aria-label":`Delete query with title "${Ba.name}"`}))))))),Da&&t.createElement(Fe.A,{onClick:wt,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!Da&&t.createElement(wn.d,{"data-testid":s.Tp.pages.Dashboard.Settings.Annotations.List.addAnnotationCTAV2,onClick:wt},"New query"))},An=()=>({table:(0,a.css)`
    width: 100%;
    overflow-x: scroll;
  `});function In({dashboard:xt,editIndex:wt,sectionNav:vn}){const un=()=>{const Jn={name:Wn,enable:!0,datasource:(0,ot.p$)((0,Tt.l)().getInstanceSettings(null)),iconColor:"red"};xt.annotations.list=[...xt.annotations.list,{...Jn}],o.Ny.partial({editIndex:xt.annotations.list.length-1})},Mn=Jn=>{o.Ny.partial({editIndex:Jn})},_n=wt!=null&&wt<xt.annotations.list.length;return t.createElement(c.Y,{navModel:vn,pageNav:kn(xt,wt,vn.node)},!_n&&t.createElement(Hn,{dashboard:xt,onNew:un,onEdit:Mn}),_n&&t.createElement(na,{dashboard:xt,editIdx:wt}))}function kn(xt,wt,vn){const un=vn.parentItem;if(wt==null)return un;const Mn=xt.annotations.list[wt];if(Mn)return{text:Mn.name,parentItem:un&&{...un,url:vn.url}}}var Vt=e(32264),zt=e(90613),kt=e(60029),rn=e(21744),yn=e(79924),gn=e(94354),Rn=e(36607),Kt=e(3673),mt=e(71678),pt=e(14792),Qt=e(5805),on=e(11230);const pn={cleanUpDashboardAndVariables:Kt.Bz},fn=(0,h.connect)(null,pn),zn=({hideModal:xt,cleanUpDashboardAndVariables:wt,dashboard:vn})=>{const un=vn.meta.provisioned,[,Mn]=(0,Qt.default)(async()=>{await(0,on.A_)(vn.uid,!0),wt(),xt(),o.Ny.replace("/")},[xt]);return un?t.createElement(aa,{hideModal:xt,provisionedId:vn.meta.provisionedExternalId}):t.createElement(q.u,{isOpen:!0,body:t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,vn.title)),onConfirm:Mn,onDismiss:xt,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},aa=({hideModal:xt,provisionedId:wt})=>t.createElement(S.a,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:xt,className:(0,a.css)`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",wt),t.createElement(S.a.ButtonRow,null,t.createElement(m.$n,{variant:"primary",onClick:xt},"OK"))),Zn=fn(zn),jn=()=>{const xt=(0,pt.UA)().getCurrent();return t.createElement(mt.$s,null,({showModal:wt,hideModal:vn})=>t.createElement(m.$n,{variant:"destructive",onClick:()=>{wt(Zn,{dashboard:xt,hideModal:vn})},"aria-label":"Dashboard settings page delete dashboard button"},t.createElement(u.x6,{i18nKey:"dashboard-settings.dashboard-delete-button"},"Delete Dashboard")))};var ga=e(81394),Ra=e(27966),_a=e(75590);const Za=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function ms({dashboard:xt,updateTimeZone:wt,updateWeekStart:vn,sectionNav:un}){const[Mn,_n]=(0,t.useState)(0),[Jn,pa]=(0,t.useState)(xt.title),[Da,Ha]=(0,t.useState)(xt.description),es=un.node.parentItem,Ba=(ts,to)=>{xt.meta.folderUid=ts,xt.meta.folderTitle=to,xt.meta.hasUnsavedFolderChange=!0,_n(Mn+1)},Fa=t.useCallback(ts=>{xt.title=ts,pa(ts)},[pa,xt]),Is=t.useCallback(ts=>{xt.description=ts,Ha(ts)},[Ha,xt]),Hs=ts=>{xt.graphTooltip=ts,_n(Mn+1)},Bs=ts=>{xt.timepicker.refresh_intervals=ts.filter(to=>to.trim()!=="")},ar=ts=>{xt.timepicker.nowDelay=ts},eo=ts=>{xt.timepicker.hidden=ts,_n(Mn+1)},Rs=ts=>{xt.liveNow=ts,_n(Mn+1)},Do=ts=>{xt.timezone=ts,_n(Mn+1),wt(ts)},Nr=ts=>{xt.weekStart=ts,_n(Mn+1),vn(ts)},ja=ts=>{xt.tags=ts,_n(Mn+1)},bs=ts=>{xt.editable=ts,_n(Mn+1)},wr=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(c.Y,{navModel:un,pageNav:es},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(zt.a,{marginBottom:5},t.createElement(ft.D,{label:t.createElement(xe.B,{justifyContent:"space-between"},t.createElement(kt.J,{htmlFor:"title-input"},t.createElement(u.x6,{i18nKey:"dashboard-settings.general.title-label"},"Title")),Vt.$.featureToggles.dashgpt&&t.createElement(Ra.Z,{onGenerate:Fa}))},t.createElement(Mt.p,{id:"title-input",name:"title",value:Jn,onChange:ts=>Fa(ts.target.value)})),t.createElement(ft.D,{label:t.createElement(xe.B,{justifyContent:"space-between"},t.createElement(kt.J,{htmlFor:"description-input"},(0,u.t)("dashboard-settings.general.description-label","Description")),Vt.$.featureToggles.dashgpt&&t.createElement(ga.V,{onGenerate:Is}))},t.createElement(rn.f,{id:"description-input",name:"description",value:Da,onChange:ts=>Is(ts.target.value)})),t.createElement(ft.D,{label:(0,u.t)("dashboard-settings.general.tags-label","Tags")},t.createElement(yn.u,{id:"tags-input",tags:xt.tags,onChange:ja,width:40})),t.createElement(ft.D,{label:(0,u.t)("dashboard-settings.general.folder-label","Folder")},t.createElement(Rn.d,{value:xt.meta.folderUid,onChange:Ba,initialTitle:xt.meta.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,dashboardId:xt.id,skipInitialLoad:!0})),t.createElement(ft.D,{label:(0,u.t)("dashboard-settings.general.editable-label","Editable"),description:(0,u.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect")},t.createElement(gn.z,{value:xt.editable,options:wr,onChange:bs}))),t.createElement(_a.p,{onTimeZoneChange:Do,onWeekStartChange:Nr,onRefreshIntervalChange:Bs,onNowDelayChange:ar,onHideTimePickerChange:eo,onLiveNowChange:Rs,refreshIntervals:xt.timepicker.refresh_intervals,timePickerHidden:xt.timepicker.hidden,nowDelay:xt.timepicker.nowDelay,timezone:xt.timezone,weekStart:xt.weekStart,liveNow:xt.liveNow}),t.createElement(P.M,{label:(0,u.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0},t.createElement(ft.D,{label:(0,u.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,u.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect")},t.createElement(gn.z,{onChange:Hs,options:Za,value:xt.graphTooltip}))),t.createElement(zt.a,{marginTop:3},xt.meta.canDelete&&t.createElement(jn,null))))}const rs={updateTimeZone:Kt.lC,updateWeekStart:Kt.Ss},Ns=(0,h.connect)(null,rs)(ms);var ls=e(32372),cs=e(6473);function ds({dashboard:xt,sectionNav:wt}){const vn=xt.getSaveModelClone(),[un,Mn]=(0,t.useState)(JSON.stringify(vn,null,2)),_n=wt.node.parentItem,Jn=async()=>{await(0,pt.UA)().saveJSONDashboard(un),cs.t.reloadPage()},pa=(0,b.of)(ps);return t.createElement(c.Y,{navModel:wt,pageNav:_n},t.createElement("div",{className:pa.wrapper},t.createElement(u.x6,{i18nKey:"dashboard-settings.json-editor.subtitle"},"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."),t.createElement(ls.B,{value:un,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:Mn,containerStyles:pa.codeEditor}),xt.meta.canSave&&t.createElement("div",null,t.createElement(m.$n,{type:"submit",onClick:Jn},t.createElement(u.x6,{i18nKey:"dashboard-settings.json-editor.save-button"},"Save changes")))))}const ps=xt=>({wrapper:(0,a.css)({display:"flex",height:"100%",flexDirection:"column",gap:xt.spacing(2)}),codeEditor:(0,a.css)({flexGrow:1})});var Vr=e(4588),ur=e(65857);const ks=({editLinkIdx:xt,dashboard:wt,onGoBack:vn})=>{const[un,Mn]=(0,t.useState)(xt!==null?wt.links[xt]:Vr.q),_n=Jn=>{const pa=[...wt.links];pa.splice(xt,1,Jn),wt.links=pa,Mn(Jn)};return t.createElement(ur.d,{link:un,onUpdate:_n,onGoBack:vn})};var ws=e(6199);const Yr=({dashboard:xt,onNew:wt,onEdit:vn})=>{const[un,Mn]=(0,t.useState)(xt.links),_n=(Da,Ha)=>{xt.links=hn.moveItemImmutably(un,Da,Da+Ha),Mn(xt.links)},Jn=Da=>{xt.links=[...un,{...Da}],Mn(xt.links)},pa=Da=>{xt.links=[...un.slice(0,Da),...un.slice(Da+1)],Mn(xt.links)};return t.createElement(ws.X,{links:un,onNew:wt,onEdit:vn,onDuplicate:Jn,onDelete:pa,onOrderChange:_n})};function Os({dashboard:xt,sectionNav:wt,editIndex:vn}){const[un,Mn]=(0,t.useState)(!1),_n=()=>{Mn(!1),o.Ny.partial({editIndex:void 0})},Jn=()=>{xt.links=[...xt.links,{...Vr.q}],Mn(!0),o.Ny.partial({editIndex:xt.links.length-1})},pa=es=>{Mn(!1),o.Ny.partial({editIndex:es})},Da=vn!==void 0;let Ha=wt.node.parentItem;if(Da){Ha={text:un?"New link":"Edit link",subTitle:un?"Create a new link on your dashboard":"Edit a specific link of your dashboard"};const Fa=wt.node.url;Ha.parentItem=wt.node.parentItem&&{...wt.node.parentItem,url:Fa}}return t.createElement(c.Y,{navModel:wt,pageNav:Ha},!Da&&t.createElement(Yr,{dashboard:xt,onNew:Jn,onEdit:pa}),Da&&t.createElement(ks,{dashboard:xt,editLinkIdx:vn,onGoBack:_n}))}var Es=e(57714),us=e(19626),tr=e(22764),Ts=e(56596),Jr=e(41053),Bo=e(3169);const nr=async(xt,wt)=>(cs.t.ignoreNextSave(),await Es.wL.restoreDashboard(wt.uid,xt)),io=xt=>{const wt=(0,d.useSelector)(_n=>_n.dashboard.getModel()),[vn,un]=(0,Jr.A)(async()=>await nr(xt,wt),[]),Mn=(0,Bo._2)();return(0,t.useEffect)(()=>{if(vn.value){const _n=o.Ny.getLocation(),Jn=r.I.stripBaseFromUrl(vn.value.url),pa=_n.state?.routeReloadCounter;o.Ny.replace({..._n,pathname:Jn,state:{routeReloadCounter:pa?pa+1:1}}),Mn.success("Dashboard restored",`Restored from version ${xt}`)}},[vn,xt,Mn]),{state:vn,onRestoreDashboard:un}},Eo=({hideModal:xt,version:wt})=>{const{state:vn,onRestoreDashboard:un}=io(wt);return(0,t.useEffect)(()=>{!vn.loading&&vn.value&&xt()},[vn,xt]),t.createElement(q.u,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:xt,onConfirm:un,body:t.createElement("p",null,"Are you sure you want to restore the dashboard to version ",wt,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${wt}`})},Ko=({baseInfo:xt,newInfo:wt,diffData:vn,isNewLatest:un})=>{const Mn=(0,Ts.G4)(vn.lhs,vn.rhs),_n=(0,b.of)($o);return t.createElement(xe.B,{direction:"column",gap:1},t.createElement(xe.B,{justifyContent:"space-between",alignItems:"center"},t.createElement(xe.B,{alignItems:"center"},t.createElement("span",{className:(0,a.cx)(_n.versionInfo,_n.noMarginBottom)},t.createElement("strong",null,"Version ",xt.version)," updated by ",xt.createdBy," ",xt.ageString,xt.message),t.createElement(M.I,{name:"arrow-right",size:"sm"}),t.createElement("span",{className:_n.versionInfo},t.createElement("strong",null,"Version ",wt.version)," updated by ",wt.createdBy," ",wt.ageString,wt.message)),un&&t.createElement(mt.$s,null,({showModal:Jn,hideModal:pa})=>t.createElement(m.$n,{variant:"destructive",icon:"history",onClick:()=>{Jn(Eo,{version:xt.version,hideModal:pa})}},"Restore to version ",xt.version))),Object.entries(Mn).map(([Jn,pa])=>t.createElement(us.D,{diffs:pa,key:Jn,title:Jn})),t.createElement(zt.a,{paddingTop:2},t.createElement(P.M,{isOpen:!1,label:"View JSON Diff"},t.createElement(tr.M,{oldValue:JSON.stringify(vn.lhs,null,2),newValue:JSON.stringify(vn.rhs,null,2)}))))},$o=xt=>({versionInfo:(0,a.css)({color:xt.colors.text.secondary,fontSize:xt.typography.bodySmall.fontSize}),noMarginBottom:(0,a.css)({marginBottom:0})});var br=e(78369);const _r=({versions:xt,canCompare:wt,onCheck:vn})=>{const un=(0,b.of)(lo);return t.createElement("div",{className:un.margin},t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{className:"width-4"}),t.createElement("th",{className:"width-4"},"Version"),t.createElement("th",{className:"width-14"},"Date"),t.createElement("th",{className:"width-10"},"Updated by"),t.createElement("th",null,"Notes"),t.createElement("th",null))),t.createElement("tbody",null,xt.map((Mn,_n)=>t.createElement("tr",{key:Mn.id},t.createElement("td",null,t.createElement(_t.S,{"aria-label":`Toggle selection of version ${Mn.version}`,className:(0,a.css)({display:"inline"}),checked:Mn.checked,onChange:Jn=>vn(Jn,Mn.id),disabled:!Mn.checked&&wt})),t.createElement("td",null,Mn.version),t.createElement("td",null,Mn.createdDateString),t.createElement("td",null,Mn.createdBy),t.createElement("td",null,Mn.message),t.createElement("td",{className:"text-right"},_n===0?t.createElement(br.v,{name:"Latest",colorIndex:17}):t.createElement(mt.$s,null,({showModal:Jn,hideModal:pa})=>t.createElement(m.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Jn(Eo,{version:Mn.version,hideModal:pa})}},"Restore"))))))))};function lo(xt){return{margin:(0,a.css)({marginBottom:xt.spacing(4)})}}const Vo=10;class co extends t.PureComponent{constructor(wt){super(wt),this.getVersions=(vn=!1)=>{this.setState({isAppending:vn}),Es.wL.getHistoryList(this.props.dashboard.uid,{limit:this.limit,start:this.start}).then(un=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(un)]}),this.start+=this.limit}).catch(un=>console.log(un)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const vn=this.state.versions.filter(Da=>Da.checked),[un,Mn]=vn,_n=un.version===this.props.dashboard.version;this.setState({isLoading:!0});const Jn=await Es.wL.getDashboardVersion(this.props.dashboard.uid,Mn.version),pa=await Es.wL.getDashboardVersion(this.props.dashboard.uid,un.version);this.setState({baseInfo:Mn,isLoading:!1,isNewLatest:_n,newInfo:un,viewMode:"compare",diffData:{lhs:Jn.data,rhs:pa.data}})},this.decorateVersions=vn=>vn.map(un=>({...un,createdDateString:this.props.dashboard.formatDate(un.created),ageString:this.props.dashboard.getRelativeTime(un.created),checked:!1})),this.onCheck=(vn,un)=>{this.setState({versions:this.state.versions.map(Mn=>Mn.id===un?{...Mn,checked:vn.currentTarget.checked}:Mn)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:"",rhs:""},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(vn=>({...vn,checked:!1})),viewMode:"list"})},this.limit=Vo,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:"",rhs:""}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(wt=>wt.version===1)}render(){const{versions:wt,viewMode:vn,baseInfo:un,newInfo:Mn,isNewLatest:_n,isLoading:Jn,diffData:pa}=this.state,Da=wt.filter(Fa=>Fa.checked).length===2,Ha=wt.length>1,es=wt.length>=this.limit,Ba=this.props.sectionNav.node.parentItem;return vn==="compare"?t.createElement(c.Y,{navModel:this.props.sectionNav,pageNav:Ba},t.createElement(Es.me,{onClick:this.reset,baseVersion:un?.version,newVersion:Mn?.version,isNewLatest:_n}),Jn?t.createElement(Xr,{msg:"Fetching changes\u2026"}):t.createElement(Ko,{newInfo:Mn,baseInfo:un,isNewLatest:_n,diffData:pa})):t.createElement(c.Y,{navModel:this.props.sectionNav,pageNav:Ba},Jn?t.createElement(Xr,{msg:"Fetching history list\u2026"}):t.createElement(_r,{versions:wt,onCheck:this.onCheck,canCompare:Da}),this.state.isAppending&&t.createElement(Xr,{msg:"Fetching more entries\u2026"}),Ha&&t.createElement(Es.rJ,{hasMore:es,canCompare:Da,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const Xr=({msg:xt})=>t.createElement(C.Gy,null,t.createElement(D.y,null),t.createElement("em",null,xt)),Zr=()=>o.Ny.partial({editview:null,editIndex:null});function zr({dashboard:xt,editview:wt,pageNav:vn,sectionNav:un}){const[Mn,_n]=(0,t.useState)(0);(0,t.useEffect)(()=>{xt.events.subscribe(E.Cf,()=>_n(ar=>ar+1))},[xt]);const Jn=(0,t.useMemo)(()=>yo(xt),[xt,Mn]),pa=()=>{xt.meta.hasUnsavedFolderChange=!1},Da=Jn.find(ar=>ar.id===wt)??Jn[0],Ha=f.TP.hasEditPermissionInFolders,es=xt.meta.canSave,Ba=(0,n.zy)(),Fa=Ws(Ba),Is=Pr(vn,un,Jn,Da,Ba),Hs="sm",Bs=[t.createElement(m.$n,{"data-testid":s.Tp.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:Hs,onClick:Zr},"Close"),Ha&&t.createElement(Wt.m,{dashboard:xt,onSaveSuccess:pa,variant:"secondary",key:"save as",size:Hs}),es&&t.createElement(Wt.C,{dashboard:xt,onSaveSuccess:pa,key:"Save",size:Hs})];return t.createElement(t.Fragment,null,t.createElement(i.H,{actions:t.createElement(l.U,{alignment:"right"},Bs)}),t.createElement(Da.component,{sectionNav:Is,dashboard:xt,editIndex:Fa}))}function yo(xt){const wt=[],vn=(0,u.t)("dashboard-settings.general.title","General");xt.meta.canEdit&&(wt.push({title:vn,id:"settings",icon:"sliders-v-alt",component:Ns}),wt.push({title:(0,u.t)("dashboard-settings.annotations.title","Annotations"),id:"annotations",icon:"comment-alt",component:In,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),wt.push({title:(0,u.t)("dashboard-settings.variables.title","Variables"),id:"templating",icon:"calculator-alt",component:Et,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),wt.push({title:(0,u.t)("dashboard-settings.links.title","Links"),id:"links",icon:"link",component:Os})),xt.meta.canMakeEditable&&wt.push({title:vn,icon:"sliders-v-alt",id:"settings",component:uo}),xt.id&&xt.meta.canSave&&wt.push({title:(0,u.t)("dashboard-settings.versions.title","Versions"),id:"versions",icon:"history",component:co});const un=(0,u.t)("dashboard-settings.permissions.title","Permissions");return xt.id&&xt.meta.canAdmin&&f.TP.hasPermission(d.AccessControlAction.DashboardsPermissionsRead)&&wt.push({title:un,id:"permissions",icon:"lock",component:Gt}),wt.push({title:(0,u.t)("dashboard-settings.json-editor.title","JSON Model"),id:"dashboard_json",icon:"arrow",component:ds}),wt}function qr(xt,wt){return{...xt,parentItem:xt.parentItem?qr(xt.parentItem,wt):wt}}function Pr(xt,wt,vn,un,Mn){const _n={text:(0,u.t)("dashboard-settings.settings.title","Settings"),children:[],icon:"apps",hideFromBreadcrumbs:!1,url:r.I.getUrlForPartial(Mn,{editview:"settings",editIndex:null})};_n.children=vn.map(pa=>({text:pa.title,icon:pa.icon,id:pa.id,url:r.I.getUrlForPartial(Mn,{editview:pa.id,editIndex:null}),active:pa===un,parentItem:_n,subTitle:pa.subTitle}));const Jn=qr(xt,wt.node);return _n.parentItem=Jn,{main:_n,node:_n.children.find(pa=>pa.active)}}function uo({dashboard:xt,sectionNav:wt}){return t.createElement(c.Y,{navModel:wt},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(m.$n,{type:"submit",onClick:()=>xt.makeEditable()},"Make editable"))}function Ws(xt){const wt=new URLSearchParams(xt.search).get("editIndex");if(wt!=null)return parseInt(wt,10)}},10740:(Y,I,e)=>{"use strict";e.d(I,{n:()=>w,C:()=>K});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(94753),m=e(60782),l=e(62930),i=e(56034),c=e(42418),u=e(67061),f=e(10354),d=e(14578),E=e(72109),h=e(29158);const y=({currentPage:V,numberOfPages:N,onNavigate:z,hideWhenSinglePage:J,className:G})=>{const H=(0,r.of)(a);return J&&N<=1?null:n.createElement("div",{className:(0,t.cx)(H.wrapper,G)},n.createElement(h.K,{name:"angle-left",size:"md",tooltip:"Previous",onClick:()=>z(V-1),disabled:V===1}),V," of ",N,n.createElement(h.K,{name:"angle-right",size:"md",tooltip:"Next",onClick:()=>z(V+1),disabled:V===N}))},a=V=>({wrapper:(0,t.css)({display:"flex",flexDirection:"row",gap:16,userSelect:"none"})});var v=e(16817),g=e(65418),b=e(34867),P=e(3169),C=e(3363);const D=(0,b.DW)("features.dashboards.genai");var T=(V=>(V.IDLE="idle",V.GENERATING="generating",V.COMPLETED="completed",V))(T||{});const M=1e4;function O(V=C.C4,N=1){const[z,J]=(0,n.useState)([]),[G,H]=(0,n.useState)(!1),[q,le]=(0,n.useState)(""),[me,k]=(0,n.useState)("idle"),[ee,X]=(0,n.useState)(),{error:j}=(0,P._2)();let ne="";const te=(0,n.useCallback)(ge=>{k("idle"),J([]),H(!1),X(ge),j("Failed to generate content using OpenAI","Please try again or if the problem persists, contact your organization admin."),console.error(ge),D.logError(ge,{messages:JSON.stringify(z),model:V,temperature:String(N)})},[z,V,N,j]);(0,n.useEffect)(()=>{z.length>0&&le("")},[z]);const{error:oe,value:ie}=(0,v.A)(async()=>await(0,C.QX)(),[C.QX]),{error:ue,value:be}=(0,v.A)(async()=>{if(!ie||!z.length)return{enabled:ie};k("generating"),X(void 0);const ge=g.qH({model:V,temperature:N,messages:z}).pipe(g.qA());return{enabled:ie,stream:ge.subscribe({next:re=>{ne=re},error:te,complete:()=>{le(ne),k("completed"),setTimeout(()=>{k("idle")}),J([]),H(!1),X(void 0)}})}},[z,ie]);return(0,n.useEffect)(()=>()=>{be?.stream&&be.stream.unsubscribe()},[be]),(0,n.useEffect)(()=>{G&&(be?.stream?.unsubscribe(),k("idle"),H(!1),X(void 0),J([]))},[G,be?.stream]),(0,n.useEffect)(()=>{let ge;return me==="generating"&&q===""&&(ge=setTimeout(()=>{te(new Error(`OpenAI stream timed out after ${M}ms`))},M)),()=>{ge&&clearTimeout(ge)}},[me,q,te]),(ue||oe)&&X(ue||oe),{setMessages:J,setStopGeneration:H,messages:z,reply:q,streamStatus:me,error:ee,value:be}}const S=({history:V,index:N,reply:z,streamStatus:J,onNavigate:G})=>{const H=(0,r.of)(p),q=V.length,le=()=>z&&J!==T.IDLE?z:V[N-1];return n.createElement(n.Fragment,null,n.createElement("div",{className:H.contentWrapper},n.createElement(o.E,{element:"p",color:"secondary"},le())),n.createElement(y,{currentPage:N,numberOfPages:q,onNavigate:G,hideWhenSinglePage:!1,className:H.paginationWrapper}))},p=V=>({paginationWrapper:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:15}),contentWrapper:(0,t.css)({display:"flex",flexBasis:"100%",flexGrow:3,whiteSpace:"pre-wrap",maxHeight:110,overflowY:"scroll",backgroundColor:V.colors.background.secondary,border:`1px solid ${V.colors.border.weak}`,padding:V.spacing(1),minHeight:60})}),x=({onSuggestionClick:V,isGenerating:N})=>{const z=(0,r.of)(A);return n.createElement("div",{className:z.quickSuggestionsWrapper},n.createElement(s.$n,{onClick:()=>V(C.HG.Shorter),size:"sm",variant:"secondary",icon:"paragraph",disabled:N},C.HG.Shorter),n.createElement(s.$n,{onClick:()=>V(C.HG.MoreDescriptive),size:"sm",variant:"secondary",icon:"document-layout-left",disabled:N},C.HG.MoreDescriptive),n.createElement(s.$n,{onClick:()=>V(C.HG.Regenerate),icon:"sync",size:"sm",variant:"secondary",disabled:N},C.HG.Regenerate))},A=V=>({quickSuggestionsWrapper:(0,t.css)({display:"flex",flexDirection:"row",gap:8})});var R=e(57725);const B=.5,U=({eventTrackingSrc:V,history:N,messages:z,onApplySuggestion:J,updateHistory:G})=>{const H=(0,r.of)(F),[q,le]=(0,n.useState)(1),[me,k]=(0,n.useState)(!1),[ee,X]=(0,n.useState)(""),{setMessages:j,setStopGeneration:ne,reply:te,streamStatus:oe,error:ie}=O(C.C4,B),ue=oe===T.GENERATING,be=(We,De)=>(0,R.XX)(V,We,De);(0,n.useEffect)(()=>{!ue&&te!==""&&le(1)},[ue,te]),(0,n.useEffect)(()=>{oe===T.COMPLETED&&G((0,C.Kb)(te))},[oe,te,G]),(0,n.useEffect)(()=>{ie&&k(!0),oe===T.GENERATING&&k(!1)},[ie,oe]);const ge=We=>{Be(We),be(R.KR.customFeedback,{customFeedback:We})},re=()=>{ue?(ne(!0),te!==""&&G((0,C.Kb)(te))):J(N[q-1])},ye=We=>{le(We),be(We>q?R.KR.backHistoryItem:R.KR.forwardHistoryItem)},Be=We=>{We!==C.HG.Regenerate?z=[...z,...(0,C.To)(N[q-1],We)]:z=[...z,...(0,C.To)(N[q-1],"Please, regenerate")],j(z),We in C.HG&&be(R.KR.quickFeedback,{quickFeedbackItem:We})},ve=We=>We.key==="Enter"&&ge(ee),Me=We=>X(We.currentTarget.value),ke=()=>ge(ee),Se=()=>be(R.KR.linkToDocs);return n.createElement("div",{className:H.container},me&&n.createElement(c.F,{title:""},n.createElement(u.B,{direction:"column"},n.createElement("p",null,"Sorry, I was unable to complete your request. Please try again."))),n.createElement(S,{history:N,index:q,onNavigate:ye,reply:(0,C.Kb)(te),streamStatus:oe}),n.createElement("div",{className:H.actionButtons},n.createElement(x,{onSuggestionClick:Be,isGenerating:ue})),n.createElement(f.p,{placeholder:"Tell AI what to do next...",suffix:n.createElement(s.$n,{icon:"enter",variant:"secondary",fill:"text","aria-label":"Send custom feedback",onClick:ke,disabled:ee===""},"Send"),value:ee,onChange:Me,onKeyDown:ve}),n.createElement("div",{className:H.applySuggestion},n.createElement(u.B,{justifyContent:"flex-end",direction:"row"},n.createElement(s.$n,{icon:ue?"fa fa-spinner":"check",onClick:re},ue?K:"Apply"))),n.createElement("div",{className:H.footer},n.createElement(d.I,{name:"exclamation-circle","aria-label":"exclamation-circle",className:H.infoColor}),n.createElement(o.E,{variant:"bodySmall",color:"secondary"},"This content is AI-generated using the"," ",n.createElement(E.Y,{variant:"bodySmall",inline:!0,href:"https://grafana.com/docs/grafana-cloud/alerting-and-irm/machine-learning/llm-plugin/",external:!0,onClick:Se},"Grafana LLM plugin"))))},F=V=>({container:(0,t.css)({display:"flex",flexDirection:"column",width:520,maxHeight:350,paddingBottom:25}),applySuggestion:(0,t.css)({paddingTop:V.spacing(2)}),actions:(0,t.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),footer:(0,t.css)({position:"absolute",bottom:0,left:0,width:"100%",display:"flex",flexDirection:"row",margin:0,padding:V.spacing(1),paddingLeft:V.spacing(2),alignItems:"center",gap:V.spacing(1),borderTop:`1px solid ${V.colors.border.weak}`,marginTop:V.spacing(2)}),infoColor:(0,t.css)({color:V.colors.info.main}),actionButtons:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"24px 0 8px 0"})}),K="Stop generating",w=({text:V="Auto-generate",toggleTipTitle:N="",onClick:z,model:J=C.C4,messages:G,onGenerate:H,temperature:q=1,eventTrackingSrc:le,disabled:me})=>{const k=(0,r.of)(L),{setMessages:ee,setStopGeneration:X,reply:j,value:ne,error:te,streamStatus:oe}=O(J,q),[ie,ue]=(0,n.useState)([]),[be,ge]=(0,n.useState)(!1),re=ie.length>0,ye=oe===T.GENERATING,Be=!re,ve=me||ne&&!ne.enabled&&!te,Me=je=>(0,R.XX)(le,je),ke=je=>{oe===T.GENERATING?X(!0):re?ge(!0):(z?.(je),ee(Le()));const at=te?R.KR.erroredRetryButton:ye?R.KR.stopGenerationButton:Be?R.KR.autoGenerateButton:R.KR.improveButton;Me(at)},Se=(0,n.useCallback)(je=>{ie.indexOf(je)===-1&&ue([je,...ie])},[ie]);if((0,n.useEffect)(()=>{oe===T.COMPLETED&&j&&H((0,C.Kb)(j))},[oe,j,H]),(0,n.useEffect)(()=>{oe===T.COMPLETED&&Se((0,C.Kb)(j))},[ie,oe,j,Se]),!ne?.enabled)return null;const We=je=>{Me(R.KR.applySuggestion),H(je),ge(!1)},De=()=>{if(!ye)return te||ne&&!ne?.enabled?"exclamation-circle":"ai"},pe=()=>{let je=V;return te&&(je="Retry"),ye&&(je=K),re&&(je="Improve"),je},Ne=n.createElement(s.$n,{icon:De(),onClick:ke,fill:"text",size:"sm",disabled:ve,variant:te?"destructive":"primary"},pe()),Le=()=>typeof G=="function"?G():G,He=()=>{if(re){const je=n.createElement(o.E,{element:"p"},N);return n.createElement(m.G,{title:je,content:n.createElement(U,{history:ie,messages:Le(),onApplySuggestion:We,updateHistory:Se,eventTrackingSrc:le}),placement:"left-start",fitContent:!0,show:be,onClose:()=>ge(!1),onOpen:()=>ge(!0)},Ne)}return Ne};return n.createElement("div",{className:k.wrapper},ye&&n.createElement(l.y,{size:"sm",className:k.spinner}),Be?n.createElement(i.m,{show:te?void 0:!1,interactive:!0,content:"Failed to generate content using OpenAI. Please try again or if the problem persist, contact your organization admin."},Ne):He())},L=V=>({wrapper:(0,t.css)({display:"flex"}),spinner:(0,t.css)({color:V.colors.text.link})})},81394:(Y,I,e)=>{"use strict";e.d(I,{V:()=>i});var t=e(96540),n=e(14792),r=e(10740),s=e(57725),o=e(3363);const l=`You are an expert in creating Grafana Dashboards.
Your goal is to write a descriptive and concise dashboard description.
You will be given the title and description of the dashboard's panels.
The dashboard description is meant to explain the purpose of the dashboard and what its panels show.
If the dashboard has no panels, the description should be "Empty dashboard"
There should be no numbers in the description except where they are important.
The dashboard description should not have the dashboard title or any quotation marks in it.
The description should be, at most, 300 characters.
Respond with only the description of the dashboard.`,i=({onGenerate:u})=>t.createElement(r.n,{messages:c,onGenerate:u,eventTrackingSrc:s.ec.dashboardDescription,toggleTipTitle:"Improve your dashboard description"});function c(){const u=(0,n.UA)().getCurrent(),f=(0,o.BB)(u);return[{content:l,role:o.Xh.system},{content:`The title of the dashboard is "${u.title}"
${f}`,role:o.Xh.user}]}},27966:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>i});var t=e(96540),n=e(14792),r=e(10740),s=e(57725),o=e(3363);const l=`You are an expert in creating Grafana Dashboards.
Your goal is to write a concise dashboard title.
You will be given the title and description of the dashboard's panels.
The dashboard title is meant to say what it shows on one line for users to navigate to it.
If the dashboard has no panels, the title should be "Empty dashboard"
There should be no numbers in the title.
The dashboard title should not have quotation marks in it.
The title should be, at most, 50 characters.
Respond with only the title of the dashboard.`,i=({onGenerate:u})=>t.createElement(r.n,{messages:c,onGenerate:u,eventTrackingSrc:s.ec.dashboardTitle,toggleTipTitle:"Improve your dashboard title"});function c(){const u=(0,n.UA)().getCurrent();return[{content:l,role:o.Xh.system},{content:`The panels in the dashboard are: ${(0,o.BB)(u)}`,role:o.Xh.user}]}},20214:(Y,I,e)=>{"use strict";e.d(I,{t:()=>i});var t=e(96540),n=e(14792),r=e(10740),s=e(57725),o=e(3363);const l=`You are an expert in creating Grafana Panels.
You will be given the title and description of the dashboard the panel is in as well as the JSON for the panel.
Your goal is to write a descriptive and concise panel description.
The panel description is meant to explain the purpose of the panel, not just its attributes.
Do not refer to the panel; simply describe its purpose.
There should be no numbers in the description except for thresholds.
The description should be, at most, 200 characters.`,i=({onGenerate:u,panel:f})=>t.createElement(r.n,{messages:()=>c(f),onGenerate:u,eventTrackingSrc:s.ec.panelDescription,toggleTipTitle:"Improve your panel description"});function c(u){const f=(0,n.UA)().getCurrent(),d=(0,o.hn)(u);return[{content:l,role:o.Xh.system},{content:`The panel is part of a dashboard with the title: ${f.title}
The panel is part of a dashboard with the description: ${f.description}
This is the JSON which defines the panel: ${d}`,role:o.Xh.user}]}},74410:(Y,I,e)=>{"use strict";e.d(I,{h:()=>l});var t=e(96540),n=e(10740),r=e(57725),s=e(3363);const m="You are an expert in creating Grafana Panels.Your goal is to write short, descriptive, and concise panel title.The title should be shorter than 50 characters.",l=({onGenerate:c,panel:u,dashboard:f})=>t.createElement(n.n,{messages:()=>i(u,f),onGenerate:c,eventTrackingSrc:r.ec.panelTitle,toggleTipTitle:"Improve your panel title"});function i(c,u){const f=(0,s.hn)(c);return[{content:m,role:s.Xh.system},{content:`The panel is part of a dashboard with the title: ${u.title}
The panel is part of a dashboard with the description: ${u.description}
Use this JSON object which defines the panel: ${f}`,role:s.Xh.user}]}},57725:(Y,I,e)=>{"use strict";e.d(I,{KR:()=>s,XX:()=>o,ec:()=>r});var t=e(14110);const n="dashboards_autogenerate_clicked";var r=(m=>(m.panelDescription="panel-description",m.panelTitle="panel-title",m.dashboardChanges="dashboard-changes",m.dashboardTitle="dashboard-title",m.dashboardDescription="dashboard-description",m.unknown="unknown",m))(r||{}),s=(m=>(m.autoGenerateButton="auto-generate-button",m.erroredRetryButton="errored-retry-button",m.stopGenerationButton="stop-generating-button",m.improveButton="improve-button",m.backHistoryItem="back-history-item",m.forwardHistoryItem="forward-history-item",m.quickFeedback="quick-feedback",m.linkToDocs="link-to-docs",m.customFeedback="custom-feedback",m.applySuggestion="apply-suggestion",m))(s||{});function o(m,l,i){(0,t.rR)(n,{src:m,item:l,...i})}},3363:(Y,I,e)=>{"use strict";e.d(I,{C4:()=>v,HG:()=>a,Xh:()=>y,Yy:()=>b,BB:()=>D,To:()=>C,hn:()=>T,QX:()=>P,Kb:()=>g});var t=e(2543),n=e(65418),r=e(32264),s=e(90254),o=e(34214);function m(M,O){return M===O?O:Array.isArray(M)&&Array.isArray(O)?c(M,O):l(M)&&l(O)?i(M,O):O}function l(M){return typeof M=="object"&&!Array.isArray(M)&&M!==null}function i(M,O){const S=Object.keys(M),p={};for(const x of S)O.hasOwnProperty(x)&&(Array.isArray(M[x])&&Array.isArray(O[x])||typeof M[x]=="object"&&typeof O[x]=="object"?p[x]=m(M[x],O[x]):p[x]=O[x]);return p}function c(M,O){const S=new Array(M.length).fill(void 0),p=new Set([...Array(M.length).keys()]),x=new Set([...Array(O.length).keys()]);for(let A=0;A<M.length&&x.size!==0;A++){let R=M[A];for(let B=0;B<O.length;B++){if(!x.has(B))continue;let U=O[B];U=m(R,U),JSON.stringify(R)===JSON.stringify(U)&&(p.delete(A),x.delete(B),S[A]=U)}}return u(M,O,S,p,x),S.filter(A=>A!==void 0)}function u(M,O,S,p,x){let A={};x.forEach(B=>{let U=O[B];if(typeof U!="object"||Array.isArray(U)){S.push(U),x.delete(B);return}p.forEach(F=>{let K=M[F];if(typeof K!="object"||Array.isArray(K)){p.delete(F);return}let w=0;for(const L in K){let V=K[L];if(!U.hasOwnProperty(L))continue;let N=U[L];typeof V!="string"&&typeof V!="number"||typeof V!=typeof N||V===N&&(L==="id"&&(w+=1e3),w++)}w!==0&&(A[w]===void 0&&(A[w]=[]),A[w].push([F,B]))})});const R=Object.keys(A).map(Number);R.sort((B,U)=>U-B);for(const B of R){let U=A[B];for(const F of U){const[K,w]=F;p.has(K)&&x.has(w)&&(S[K]=O[w],p.delete(K),x.delete(w))}}for(const B of x)S.push(O[B])}function f(M){const O=M.split(`
`);let S=M[0].startsWith("Index")?4:3,p=O.slice(0,S);const x=/("title"|Title|\{|\}|\[|\])/i;for(let A=S;A<O.length;A++){let R=O[A];(x.test(R)||R.startsWith("+")||R.startsWith("-"))&&p.push(R)}return p.join(`
`)+`
`}function d(M){if(M===null||M==="")return null;if(Array.isArray(M)){const S=M.map(p=>d(p)).filter(p=>p!==null);return S.length>0?S:null}if(typeof M!="object")return M;const O={};for(const S in M){const p=d(M[S]);if(p!==null){if(Array.isArray(p)&&p.length===0||typeof p=="object"&&Object.keys(p).length===0)continue;O[S]=p}}return Object.keys(O).length>0?O:null}function E(M){return JSON.parse(JSON.stringify(M,null,2))}function h(M){let O=E(M.getOriginalDashboard()),S=E(new o.G(O).getSaveModelClone()),p=E(M.getSaveModelClone());S=d(m(O,S)),p=d(m(S,p)),O=d(O);let x=(0,s.ss)("Before migration changes","After migration changes",JSON.stringify(O,null,2),JSON.stringify(S,null,2),"","",{context:20}),A=(0,s.ss)("Before user changes","After user changes",JSON.stringify(S,null,2),JSON.stringify(p,null,2),"","",{context:20});return x=f(x),A=f(A),{migrationDiff:x,userDiff:A}}var y=(M=>(M.system="system",M.user="user",M))(y||{}),a=(M=>(M.Shorter="Even shorter",M.MoreDescriptive="More descriptive",M.Regenerate="Regenerate",M))(a||{});const v="gpt-4",g=M=>M.replace(/^"|"$/g,"");function b(M){const{migrationDiff:O,userDiff:S}=h(M);return{userChanges:S,migrationChanges:O}}async function P(){return r.$.apps["grafana-llm-app"]?n.vK().then(M=>M.ok):!1}const C=(M,O)=>[{role:"system",content:`Your previous response was: ${M}. The user has provided the following feedback: ${O}. Re-generate your response according to the provided feedback.`}];function D(M){const O=(x,A)=>`- Panel ${A}
- Title: ${x.title}${x.description?`
- Description: ${x.description}`:""}`,S=M.panels.map(O);let p;if(S.length<=10)p=`The panels in the dashboard are:
${S.join(`
`)}`;else{const x=M.panels.filter(B=>B.description),A=M.panels.filter(B=>!B.description);let R;x.length>=10?R=x.slice(10).map(O).join(`
`):(R=x.map(O).join(`
`),R+=`
`,R+=A.slice(10-x.length).map(O).join("n")),p=`There are ${S.length} panels.
Due to space constraints, only the information for ten of them is presented.
These ten are not necessarily the first ten, but prioritized to those with descriptions.
The panels in the dashboard are:
${R}`}return p}function T(M){const O=["datasource","title","description","targets","type"],S={...(0,t.pick)(M,O),options:(0,t.pick)(M.options,["content"])};return JSON.stringify(S,null,2)}},18803:(Y,I,e)=>{"use strict";e.d(I,{B6:()=>f,E_:()=>E,jD:()=>d});var t=e(2543),n=e.n(t),r=e(72985),s=e(89667),o=e(52622),m=e(72724),l=e(39070),i=e(32264),c=e(41524),u=e(68706);function f(g){const b=[];if(g?.series)for(const P of g.series)b.push((0,s.Nw)(P));if(g?.annotations)for(const P of g.annotations){const C=(0,s.Nw)(P);C.schema?.meta||(C.schema.meta={}),C.schema.meta.dataTopic=o.QR.Annotations,b.push(C)}return b}function d(g,b){const P=g.getSaveModel(),C={panelType:P.type,datasource:"??"},D=i.$.buildInfo.versionString;let T=`| Key | Value |
|--|--|
| Panel | ${C.panelType} @ ${P.pluginVersion??D} |
| Grafana | ${D} // ${i.$.buildInfo.edition} |
`;return b&&(T+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+b+"\n```\n</details>"),T}async function E(g,b,P){const C=g.getSaveModel(),D=(0,t.cloneDeep)(v),T={panelType:C.type,datasource:"??"},M=await(0,r._)(g.getQueryRunner().getData({withFieldConfig:!1,withTransforms:!1})),O=g.datasource,S=(0,c.W)(f(M),b),p=i.$.buildInfo.versionString,x=C?.targets??[],A=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${T.panelType} @ ${C.pluginVersion??p}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${x.map(R=>{const B=R.datasource??O;return`${R.refId}[${B?.type}]`}).join(", ")}</td>
    </tr>
    ${h(C)}
    ${y(M,S)}
    ${a(M)}
    <tr>
      <th>Grafana</th>
      <td>${p} // ${i.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(D.panels[0]={...C,...D.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:u.nj.Snapshot,snapshot:S}]},C.transformations?.length){const R=D.panels[D.panels.length-1];R.title=R.title+" (after transformations)";const B=(0,t.cloneDeep)(R);B.id=100,B.title="Data (before transformations)",B.gridPos.w=24,B.targets[0].withTransforms=!1,D.panels.push(B)}return M.annotations?.length&&D.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:o.QR.Annotations,refId:"A"}]}),D.panels[1].options.content=A,D.panels[2].options.content=JSON.stringify(C,null,2),D.title=`Debug: ${C.title} // ${(0,m.LE)(new Date)}`,D.tags=["debug",`debug-${T.panelType}`],D.time={from:P.from.toISOString(),to:P.to.toISOString()},D}function h(g){return g.transformations?`<tr>
      <th>Transform</th>
      <td>${g.transformations.map(b=>b.id).join(", ")}</td>
  </tr>`:""}function y(g,b){let P=g.series.length??0,C=0,D=0;for(const T of g.series)C+=T.fields.length,D+=T.length;return`<tr><th>Data</th><td>${g.state!==l.Gu.Done?g.state:""} ${P} frames, ${C} fields, ${D} rows </td></tr>`}function a(g){return g.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${g.annotations.map((b,P)=>`<span>${b.length}</span>`)}</td>
</tr>`:""}const v={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37}},65123:(Y,I,e)=>{"use strict";e.d(I,{BN:()=>i,kx:()=>c,sd:()=>l});var t=e(96540),n=e(24705),r=e(19347),s=e(44836),o=e(16560),m=e(54612);const l=u=>(0,n.A)(async()=>i(u),[u]).value;async function i(u){const f=u?.request?.targets||[];if(u&&u.series&&f.length){for(const d of u.series)if(d.meta&&d.meta.custom){const E=await(0,r.l)().get(f[0].datasource);if(E&&E.components?.MetadataInspector)return E}}}const c=(u,f,d,E,h)=>(0,t.useMemo)(()=>{const y=[];return(0,m.$)(d)&&(y.push({label:(0,s.t)("dashboard.inspect.data-tab","Data"),value:o.q.Data}),y.push({label:(0,s.t)("dashboard.inspect.stats-tab","Stats"),value:o.q.Stats})),h&&y.push({label:(0,s.t)("dashboard.inspect.meta-tab","Meta data"),value:o.q.Meta}),y.push({label:(0,s.t)("dashboard.inspect.json-tab","JSON"),value:o.q.JSON}),E&&y.push({label:(0,s.t)("dashboard.inspect.error-tab","Error"),value:o.q.Error}),f.meta.canEdit&&(0,m.$)(d)&&y.push({label:(0,s.t)("dashboard.inspect.query-tab","Query"),value:o.q.Query}),y},[d,h,f,E])},57755:(Y,I,e)=>{"use strict";e.d(I,{D:()=>f});var t=e(32196),n=e(96540),r=e(78685),s=e(13544),o=e(53402),m=e(40845),l=e(55852),i=e(83277),c=e(53466);const u="showCategory",f=n.memo(({id:h,title:y,children:a,forceOpen:v,isOpenDefault:g=!0,renderTitle:b,className:P,itemsCount:C,isNested:D=!1,sandboxId:T})=>{const[M,O]=(0,r.A)(E(h),{isExpanded:g}),[S,p]=(0,n.useState)(M?.isExpanded??g),x=(0,n.useRef)(0),A=(0,n.useRef)(null),[R,B]=(0,i.s)(),U=R[u]===h;(0,n.useEffect)(()=>{x.current&&Date.now()-x.current<200||(U||v)&&(S||p(!0),U&&A.current?.scrollIntoView())},[v,S,U]);const F=(0,n.useCallback)(()=>{x.current=Date.now(),B({[u]:S?void 0:h},!0),O({isExpanded:!S}),p(!S)},[O,p,B,S,h]);b||(b=function(z){return z||C===void 0||C===0?y:n.createElement("span",null,y," ",n.createElement(o.p,{value:C}))});const K=(0,m.of)(d),w=(0,t.cx)({[K.box]:!0,[K.boxNestedExpanded]:D&&S},P),L=(0,t.cx)(K.header,{[K.headerExpanded]:S,[K.headerNested]:D}),V=(0,t.cx)(K.body,{[K.bodyNested]:D});return n.createElement("div",{className:w,"data-testid":"options-category","data-plugin-sandbox":T,"aria-label":s.Tp.components.OptionsGroup.group(h),ref:A},n.createElement("div",{className:L,onClick:F},n.createElement(l.$n,{"aria-label":s.Tp.components.OptionsGroup.toggle(h),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":S,className:K.toggleButton,icon:S?"angle-down":"angle-right",onClick:F}),n.createElement("h6",{id:`button-${h}`,className:K.title},b(S))),S&&n.createElement("div",{className:V,id:h,"aria-labelledby":`button-${h}`},a))});f.displayName="OptionsPaneCategory";const d=h=>({box:(0,t.css)({borderTop:`1px solid ${h.colors.border.weak}`}),boxNestedExpanded:(0,t.css)({marginBottom:h.spacing(2)}),title:(0,t.css)({flexGrow:1,overflow:"hidden",lineHeight:1.5,fontSize:"1rem",paddingLeft:"6px",fontWeight:h.typography.fontWeightMedium,margin:0}),header:(0,t.css)({display:"flex",cursor:"pointer",alignItems:"center",padding:h.spacing(.5),color:h.colors.text.primary,fontWeight:h.typography.fontWeightMedium,"&:hover":{background:h.colors.emphasize(h.colors.background.primary,.03)}}),toggleButton:(0,t.css)({alignSelf:"baseline"}),headerExpanded:(0,t.css)({color:h.colors.text.primary}),headerNested:(0,t.css)({padding:h.spacing(.5,0,.5,0)}),body:(0,t.css)({padding:h.spacing(1,2,1,4)}),bodyNested:(0,t.css)({position:"relative",paddingRight:0,"&:before":{content:"''",position:"absolute",top:0,left:"8px",width:"1px",height:"100%",background:h.colors.border.weak}})}),E=h=>`${c.wi}.optionGroup[${h}]`},48192:(Y,I,e)=>{"use strict";e.d(I,{C:()=>r});var t=e(96540),n=e(57755);class r{constructor(o){this.props=o,this.items=[],this.categories=[]}addItem(o){return o.parent=this,this.items.push(o),this}addCategory(o){return o.props.isNested=!0,o.parent=this,this.categories.push(o),this}getCategory(o){let m=this.categories.find(l=>l.props.id===o);return m||(m=new r({title:o,id:o}),this.addCategory(m)),m}render(o){return this.props.customRender?this.props.customRender():t.createElement(n.D,{key:this.props.title,...this.props},this.items.map(m=>m.render(o)),this.categories.map(m=>m.render(o)))}}},74097:(Y,I,e)=>{"use strict";e.d(I,{v:()=>d});var t=e(32196),n=e(96540),r=e(23257),s=e.n(r),o=e(13544),m=e(60029),l=e(88575),i=e(40845),c=e(56034);function u({overrides:y}){const a=(0,i.of)(f);return n.createElement("div",{className:a.wrapper},y.map((v,g)=>n.createElement(c.m,{content:v.tooltip,key:g.toString(),placement:"top"},n.createElement("div",{"aria-label":v.description,className:a[v.type]}))))}const f=y=>{const a={width:8,height:8,borderRadius:y.shape.radius.circle,marginLeft:y.spacing(1),top:"-1px"};return{wrapper:(0,t.css)({display:"flex"}),rule:(0,t.css)({...a,position:"relative",backgroundColor:y.colors.primary.main}),data:(0,t.css)({...a,position:"relative",backgroundColor:y.colors.warning.main})}};class d{constructor(a){this.props=a}getLabel(a){const{title:v,description:g,overrides:b,addon:P}=this.props;if(!a)return this.parent.props.title===v&&!b?.length?null:n.createElement(E,{title:v,description:g,overrides:b,addon:P});const C=[];return this.parent.parent&&C.push(this.highlightWord(this.parent.parent.props.title,a)),this.parent.props.title!==v&&C.push(this.highlightWord(this.parent.props.title,a)),n.createElement(m.J,{description:g&&this.highlightWord(g,a),category:C},this.highlightWord(v,a),b&&b.length>0&&n.createElement(u,{overrides:b}))}highlightWord(a,v){return n.createElement(s(),{textToHighlight:a,searchWords:[v],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:a}=this.props;!a||a.length}render(a){const{title:v,description:g,render:b,showIf:P,skipField:C}=this.props,D=`${this.parent.props.id} ${v}`;return P&&!P()?null:C?b():n.createElement(l.D,{label:this.getLabel(a),description:g,key:D,"aria-label":o.Tp.components.PanelEditor.OptionsPane.fieldLabel(D)},b())}}function E({title:y,description:a,overrides:v,addon:g}){const b=(0,i.of)(h);return n.createElement("div",{className:b.container},n.createElement(m.J,{description:a},y,v&&v.length>0&&n.createElement(u,{overrides:v})),g)}function h(y){return{container:(0,t.css)`
      display: flex;
      justify-content: space-between;
    `}}},26443:(Y,I,e)=>{"use strict";e.d(I,{gs:()=>k,Ff:()=>le,Po:()=>ee});var t=e(32196),n=e(96540),r=e(32264),s=e(40845),o=e(67647),m=e(94354),l=e(40276),i=e(74106),c=e(82792),u=e(63329),f=e(7376),d=e(79971),E=e(40334),h=e(33390);function y(j,ne){h.A.set(`panel-edit-section-${j}`,ne?"true":"false")}function a(j,ne){return h.A.getBool(`panel-edit-section-${j}`,ne)}const v=(j,ne)=>({angularPanelComponent:(0,E.U)(j,ne.panel)?.angularComponent}),g={changePanelPlugin:d.gW},b=(0,u.connect)(v,g);class P extends n.PureComponent{constructor(ne){super(ne)}componentDidMount(){this.loadAngularOptions()}componentDidUpdate(ne){(this.props.plugin!==ne.plugin||this.props.angularPanelComponent!==ne.angularPanelComponent)&&this.cleanUpAngularOptions(),this.loadAngularOptions()}componentWillUnmount(){this.cleanUpAngularOptions()}cleanUpAngularOptions(){this.angularOptions&&(this.angularOptions.destroy(),this.angularOptions=null)}loadAngularOptions(){const{panel:ne,angularPanelComponent:te,changePanelPlugin:oe}=this.props;if(!this.element||!te||this.angularOptions)return;const ie=te.getScope();if(!ie.$$childHead){setTimeout(()=>{this.forceUpdate()});return}const ue=ie.$$childHead.ctrl;ue.initEditMode(),ue.onPluginTypeChange=ye=>{oe({panel:ne,pluginId:ye.id})};let be="";for(let ye=0;ye<ue.editorTabs.length;ye++){const Be=ue.editorTabs[ye];Be.isOpen=a(Be.title,ye===0),be+=`
      <div class="panel-options-group" ng-cloak>
        <div class="panel-options-group__header" ng-click="toggleOptionGroup(${ye})" aria-label="${Be.title} section">
          <div class="panel-options-group__icon">
            <icon name="ctrl.editorTabs[${ye}].isOpen ? 'angle-down' : 'angle-right'"></icon>
          </div>
          <div class="panel-options-group__title">${Be.title}</div>
        </div>
        <div class="panel-options-group__body" ng-if="ctrl.editorTabs[${ye}].isOpen">
          <panel-editor-tab editor-tab="ctrl.editorTabs[${ye}]" ctrl="ctrl"></panel-editor-tab>
        </div>
      </div>
      `}const ge=(0,f.E)(),re={ctrl:ue,toggleOptionGroup:ye=>{const Be=ue.editorTabs[ye];Be.isOpen=!Be.isOpen,y(Be.title,!!Be.isOpen)}};this.angularOptions=ge.load(this.element,re,be),this.angularOptions.digest()}render(){return n.createElement("div",{ref:ne=>this.element=ne})}}const C=(0,u.connect)(v,g)(P);var D=e(57755),T=e(22290),M=e(10354);const O=({panel:j,formatDate:ne})=>{const te=(0,s.of)(S),oe=j.libraryPanel?.meta;return oe?n.createElement("div",{className:te.info},n.createElement("div",{className:te.libraryPanelInfo},`Used on ${oe.connectedDashboards} `,oe.connectedDashboards===1?"dashboard":"dashboards"),n.createElement("div",{className:te.libraryPanelInfo},"Last edited on ",ne?.(oe.updated,"L")??oe.updated," by",oe.updatedBy.avatarUrl&&n.createElement("img",{width:"22",height:"22",className:te.userAvatar,src:oe.updatedBy.avatarUrl,alt:`Avatar for ${oe.updatedBy.name}`}),oe.updatedBy.name)):null},S=j=>({info:(0,t.css)`
      line-height: 1;
    `,libraryPanelInfo:(0,t.css)`
      color: ${j.colors.text.secondary};
      font-size: ${j.typography.bodySmall.fontSize};
    `,userAvatar:(0,t.css)`
      border-radius: ${j.shape.radius.circle};
      box-sizing: content-box;
      width: 22px;
      height: 22px;
      padding-left: ${j.spacing(1)};
      padding-right: ${j.spacing(1)};
    `});var p=e(48192),x=e(74097);function A(j){const{panel:ne,onPanelConfigChange:te,dashboard:oe}=j,ie=new p.C({title:"Library panel options",id:"Library panel options",isOpenDefault:!0});return(0,c.X)(ne)&&ie.addItem(new x.v({title:"Name",value:ne.libraryPanel.name,popularRank:1,render:function(){return n.createElement(M.p,{id:"LibraryPanelFrameName",defaultValue:ne.libraryPanel.name,onBlur:be=>te("libraryPanel",{...ne.libraryPanel,name:be.currentTarget.value})})}})).addItem(new x.v({title:"Information",render:function(){return n.createElement(O,{panel:ne,formatDate:oe.formatDate})}})),ie}var R=e(13544),B=e(21744),U=e(15292),F=e(64919),K=e(88323),w=e(6923),L=e(20214),V=e(74410),N=e(92378);function z(j){const{dashboard:ne,panel:te,onPanelConfigChange:oe}=j,ie=new p.C({title:"Panel options",id:"Panel options",isOpenDefault:!0}),ue=ge=>{const re=document.getElementById("PanelFrameTitle");re instanceof HTMLInputElement&&(re.value=ge,oe("title",ge))},be=ge=>{const re=document.getElementById("description-text-area");re instanceof HTMLTextAreaElement&&(re.value=ge,oe("description",ge))};return ie.addItem(new x.v({title:"Title",value:te.title,popularRank:1,render:function(){return n.createElement(M.p,{"data-testid":R.Tp.components.PanelEditor.OptionsPane.fieldInput("Title"),id:"PanelFrameTitle",defaultValue:te.title,onBlur:re=>oe("title",re.currentTarget.value)})},addon:r.$.featureToggles.dashgpt&&n.createElement(V.h,{onGenerate:ue,panel:te.getSaveModel(),dashboard:ne.getSaveModelClone()})})).addItem(new x.v({title:"Description",description:te.description,value:te.description,render:function(){return n.createElement(B.f,{"data-testid":R.Tp.components.PanelEditor.OptionsPane.fieldInput("Description"),id:"description-text-area",defaultValue:te.description,onBlur:re=>oe("description",re.currentTarget.value)})},addon:r.$.featureToggles.dashgpt&&n.createElement(L.t,{onGenerate:be,panel:te.getSaveModel()})})).addItem(new x.v({title:"Transparent background",render:function(){return n.createElement(U.d,{"data-testid":R.Tp.components.PanelEditor.OptionsPane.fieldInput("Transparent background"),value:te.transparent,id:"transparent-background",onChange:re=>oe("transparent",re.currentTarget.checked)})}})).addCategory(new p.C({title:"Panel links",id:"Panel links",isOpenDefault:!1,itemsCount:te.links?.length}).addItem(new x.v({title:"Panel links",render:function(){return n.createElement(F.e,{links:te.links,onChange:re=>oe("links",re),getSuggestions:w.Fq,data:[]})}}))).addCategory(new p.C({title:"Repeat options",id:"Repeat options",isOpenDefault:!1}).addItem(new x.v({title:"Repeat by variable",description:"Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard.",render:function(){return n.createElement(N.G,{id:"repeat-by-variable-select",repeat:te.repeat,onChange:re=>{oe("repeat",re)}})}})).addItem(new x.v({title:"Repeat direction",showIf:()=>!!te.repeat,render:function(){const re=[{label:"Horizontal",value:"h"},{label:"Vertical",value:"v"}];return n.createElement(m.z,{options:re,value:te.repeatDirection||"h",onChange:ye=>oe("repeatDirection",ye)})}})).addItem(new x.v({title:"Max per row",showIf:()=>!!(te.repeat&&te.repeatDirection==="h"),render:function(){const re=[2,3,4,6,8,12].map(ye=>({label:ye.toString(),value:ye}));return n.createElement(K.l6,{options:re,value:te.maxPerRow,onChange:ye=>oe("maxPerRow",ye.value)})}})))}var J=e(66211);class G{constructor(ne,te){this.categories=ne,this.overrides=te}search(ne){const te=new RegExp(ne,"i"),ie=this.collectHits(this.categories,te,[]).sort(H).map(ge=>ge.item),be=this.collectHits(this.overrides,te,[]).sort(H).map(ge=>ge.item);return{optionHits:ie,overrideHits:this.buildOverrideHitCategories(be),totalCount:this.getAllOptionsCount(this.categories)}}collectHits(ne,te,oe){for(const ie of ne){const ue=te.test(ie.props.title);for(const be of ie.items){if(te.test(be.props.title)){oe.push({item:be,rank:1});continue}if(be.props.description&&te.test(be.props.description)){oe.push({item:be,rank:2});continue}ue&&oe.push({item:be,rank:3})}ie.categories.length>0&&this.collectHits(ie.categories,te,oe)}return oe}getAllOptionsCount(ne){let te=0;for(const oe of ne)te+=oe.items.length,oe.categories.length>0&&(te+=this.getAllOptionsCount(oe.categories));return te}buildOverrideHitCategories(ne){const te={};for(const oe of ne){let ie=te[oe.parent.props.title];ie||(ie=te[oe.parent.props.title]=new p.C(oe.parent.props),ie.addItem(oe.parent.items[0])),ie.items[0].props.title!==oe.props.title&&ie.addItem(oe)}return Object.values(te)}}function H(j,ne){return j.rank-ne.rank}function q(j){const ne=[];for(const te of j)for(const oe of te.items)oe.props.title==="Unit"&&(oe.props.popularRank=2),oe.props.title==="Min"&&(oe.props.popularRank=3),oe.props.title==="Max"&&(oe.props.popularRank=4),oe.props.title==="Display name"&&(oe.props.popularRank=5),oe.props.popularRank&&ne.push(oe);return ne.sort((te,oe)=>te.props.popularRank-oe.props.popularRank)}const le=j=>{const{plugin:ne,dashboard:te,panel:oe}=j,[ie,ue]=(0,n.useState)(""),[be,ge]=(0,n.useState)("All"),re=(0,s.of)(X),[ye,Be,ve]=(0,n.useMemo)(()=>[z(j),(0,J.Zm)(j),A(j)],[oe.configRev,j.data,j.instanceState,ie]),Me=(0,n.useMemo)(()=>(0,T.v)(j.panel.fieldConfig,j.plugin.fieldConfigRegistry,j.data?.series??[],ie,j.onFieldConfigsChange),[oe.configRev,j.data,j.instanceState,ie]),ke=[],Se=ie.length>0,We=(0,n.useMemo)(me,[]),De=(0,c.X)(oe)?[ve,ye,...Be]:[ye,...Be];if(Se)ke.push(ee(De,Me,ie)),j.plugin.angularPanelCtrl&&ke.push(n.createElement("div",{className:re.searchNotice,key:"Search notice"},"This is an old visualization type that does not support searching all options."));else switch(be){case"All":(0,c.X)(oe)&&ke.push(ve.render()),ke.push(ye.render()),j.plugin.angularPanelCtrl&&ke.push(n.createElement(C,{plugin:ne,dashboard:te,panel:oe,key:"AngularOptions"}));for(const Ne of Be)ke.push(Ne.render());for(const Ne of Me)ke.push(Ne.render());break;case"Overrides":for(const Ne of Me)ke.push(Ne.render());break;case"Recent":ke.push(n.createElement(D.D,{id:"Recent options",title:"Recent options",key:"Recent options",forceOpen:1},q(De).map(Ne=>Ne.render())));break}const pe=!Se&&!ne.fieldConfigRegistry.isEmpty();return n.createElement("div",{className:re.wrapper},n.createElement("div",{className:re.formBox},oe.isAngularPlugin()&&!ne.meta.angular?.hideDeprecation&&n.createElement(i.c,{className:re.angularDeprecationWrapper,showPluginDetailsLink:!0,pluginId:ne.meta.id,pluginType:ne.meta.type,angularSupportEnabled:r.$?.angularSupportEnabled,interactionElementId:"panel-options"}),n.createElement("div",{className:re.formRow},n.createElement(o.Z,{width:0,value:ie,onChange:ue,placeholder:"Search options"})),pe&&n.createElement("div",{className:re.formRow},n.createElement(m.z,{options:We,value:be,fullWidth:!0,onChange:ge}))),n.createElement("div",{className:re.scrollWrapper},n.createElement(l.E,{autoHeightMin:"100%"},n.createElement("div",{className:re.mainBox},ke))))};function me(){return[{label:"All",value:"All"},{label:"Overrides",value:"Overrides"}]}var k=(j=>(j.All="All",j.Overrides="Overrides",j.Recent="Recent",j))(k||{});function ee(j,ne,te){const oe=new G(j,ne),{optionHits:ie,totalCount:ue,overrideHits:be}=oe.search(te);return n.createElement("div",{key:"search results"},n.createElement(D.D,{id:"Found options",title:`Matched ${ie.length}/${ue} options`,key:"Normal options",forceOpen:1},ie.map(ge=>ge.render(te))),be.map(ge=>ge.render(te)))}const X=j=>({wrapper:(0,t.css)`
    height: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;

    .search-fragment-highlight {
      color: ${j.colors.warning.text};
      background: transparent;
    }
  `,searchBox:(0,t.css)`
    display: flex;
    flex-direction: column;
    min-height: 0;
  `,formRow:(0,t.css)`
    margin-bottom: ${j.spacing(1)};
  `,formBox:(0,t.css)`
    padding: ${j.spacing(1)};
    background: ${j.colors.background.primary};
    border: 1px solid ${j.components.panel.borderColor};
    border-top-left-radius: ${j.shape.borderRadius(1.5)};
    border-bottom: none;
  `,closeButton:(0,t.css)`
    margin-left: ${j.spacing(1)};
  `,searchHits:(0,t.css)`
    padding: ${j.spacing(1,1,0,1)};
  `,scrollWrapper:(0,t.css)`
    flex-grow: 1;
    min-height: 0;
  `,searchNotice:(0,t.css)`
    font-size: ${j.typography.size.sm};
    color: ${j.colors.text.secondary};
    padding: ${j.spacing(1)};
    text-align: center;
  `,mainBox:(0,t.css)`
    background: ${j.colors.background.primary};
    border: 1px solid ${j.components.panel.borderColor};
    border-top: none;
    flex-grow: 1;
  `,angularDeprecationWrapper:(0,t.css)`
    padding: ${j.spacing(1)};
  `})},22290:(Y,I,e)=>{"use strict";e.d(I,{v:()=>O});var t=e(32196),n=e(2543),r=e(96540),s=e(85200),o=e(37055),m=e(84349),l=e(51986),i=e(40845),c=e(6923),u=e(23257),f=e.n(u),d=e(66864),E=e(60029),h=e(53402),y=e(29158),a=e(88575),v=e(57755);const g=({property:A,context:R,registry:B,onChange:U,onRemove:F,isSystemOverride:K,searchQuery:w})=>{const L=(0,i.of)(b),V=B?.getIfExists(A.id),N=(0,r.useId)();if(!V)return null;const z=Array.isArray(A.value)||A.id===o.uo.Thresholds||A.id===o.uo.Links||A.id===o.uo.Mappings,J=V.category?.filter(q=>q!==V.name);let G;const H=(q=!0,le=!1)=>(me=!1)=>r.createElement(d.Gy,{justify:"space-between"},r.createElement(E.J,{category:J,description:q?V.description:void 0,htmlFor:N},r.createElement(f(),{textToHighlight:V.name,searchWords:[w],highlightClassName:"search-fragment-highlight"}),!me&&le&&V.getItemsCount&&r.createElement(h.p,{value:V.getItemsCount(A.value)})),!K&&r.createElement("div",null,r.createElement(y.K,{name:"times",onClick:F,tooltip:"Remove label"})));return z?G=r.createElement(v.D,{id:V.name,renderTitle:H(!1,!0),className:(0,t.css)`
          padding-left: 0;
          padding-right: 0;
        `,isNested:!0,isOpenDefault:A.value!==void 0},r.createElement(V.override,{value:A.value,onChange:q=>{U(q)},item:V,context:R})):G=r.createElement("div",null,r.createElement(a.D,{label:H()(),description:V.description},r.createElement(V.override,{value:A.value,onChange:q=>{U(q)},item:V,context:R,id:N}))),r.createElement("div",{className:(0,t.cx)(z&&L.collapsibleOverrideEditor,!z&&"dynamicConfigValueEditor--nonCollapsible")},G)},b=A=>({collapsibleOverrideEditor:(0,t.css)`
      label: collapsibleOverrideEditor;
      & + .dynamicConfigValueEditor--nonCollapsible {
        margin-top: ${A.spacing(1)};
      }
    `});var P=e(48192),C=e(74097),D=e(14578);const T=({isExpanded:A,registry:R,matcherUi:B,overrideName:U,override:F,onOverrideRemove:K})=>{const w=(0,i.of)(M),V=F.properties.map(z=>R.getIfExists(z.id)).filter(z=>!!z).map(z=>z?.name).join(", "),N=B.optionsToLabel(F.matcher.options);return r.createElement("div",null,r.createElement(d.Gy,{justify:"space-between"},r.createElement("div",null,U),r.createElement(y.K,{name:"trash-alt",onClick:K,tooltip:"Remove override"})),!A&&r.createElement("div",{className:w.overrideDetails},r.createElement("div",{className:w.options,title:N},N," ",r.createElement(D.I,{name:"angle-right"})," ",V)))};T.displayName="OverrideTitle";const M=A=>({matcherUi:(0,t.css)`
      padding: ${A.spacing(1)};
    `,propertyPickerWrapper:(0,t.css)`
      margin-top: ${A.spacing(2)};
    `,overrideDetails:(0,t.css)`
      font-size: ${A.typography.bodySmall.fontSize};
      color: ${A.colors.text.secondary};
      font-weight: ${A.typography.fontWeightRegular};
    `,options:(0,t.css)`
      overflow: hidden;
      padding-right: ${A.spacing(4)};
    `,unknownLabel:(0,t.css)`
      margin-bottom: 0;
    `});function O(A,R,B,U,F){const K=[],w=A;if(!R||R.isEmpty())return[];const L=(J,G)=>{let H=(0,n.cloneDeep)(w.overrides);H[J]=G,F({...w,overrides:H})},V=J=>{let G=(0,n.cloneDeep)(w.overrides);G.splice(J,1),F({...w,overrides:G})},N=J=>{const G=s.sJ.get(J.value);G&&F({...w,overrides:[...w.overrides,{matcher:{id:G.id,options:G.defaultOptions},properties:[]}]})},z={data:B,getSuggestions:J=>(0,c.Hf)(B,J),isOverride:!0};for(let J=0;J<w.overrides.length;J++){const G=w.overrides[J],H=`Override ${J+1}`,q=m.g.get(G.matcher.id),le=S(R),me=(0,o.Ow)(G),k=G.properties.length===0?1:0,ee=new P.C({title:H,id:H,forceOpen:k,renderTitle:function(te){return r.createElement(T,{override:G,isExpanded:te,registry:R,overrideName:H,matcherUi:q,onOverrideRemove:()=>V(J)})}}),X=ne=>{G.matcher.options=ne,L(J,G)},j=(ne,te)=>{const oe=R.get(te.value),ie={id:oe.id,value:oe.defaultValue};G.properties?ne.properties.push(ie):ne.properties=[ie],L(J,ne)};ee.addItem(new C.v({title:q.name,render:function(){return r.createElement(q.component,{id:`${q.matcher.id}-${J}`,matcher:q.matcher,data:B??[],options:G.matcher.options,onChange:X})}}));for(let ne=0;ne<G.properties.length;ne++){const te=G.properties[ne],oe=R.getIfExists(te.id);if(!oe)continue;const ie=be=>{G.properties[ne].value=be,L(J,G)},ue=()=>{G.properties.splice(ne,1),L(J,G)};ee.addItem(new C.v({title:oe.name,skipField:!0,render:function(){return r.createElement(g,{key:`${te.id}/${ne}`,isSystemOverride:me,onChange:ie,onRemove:ue,property:te,registry:R,context:z,searchQuery:U})}}))}!me&&G.matcher.options&&ee.addItem(new C.v({title:"----------",skipField:!0,render:function(){return r.createElement(l.i,{key:"Add override property",label:"Add override property",variant:"secondary",isFullWidth:!0,icon:"plus",menuPlacement:"auto",options:le,onChange:te=>j(G,te)})}})),K.push(ee)}return K.push(new P.C({title:"add button",id:"add button",customRender:function(){return r.createElement(p,{key:"Add override"},r.createElement(l.i,{icon:"plus",label:"Add field override",variant:"secondary",menuPlacement:"auto",isFullWidth:!0,size:"md",options:m.g.list().filter(G=>!G.excludeFromPicker).map(G=>({label:G.name,value:G.id,description:G.description})),onChange:G=>N(G)}))}})),K}function S(A){return A.list().filter(R=>!R.hideFromOverrides).map(R=>{let B=R.name;return R.category&&(B=[...R.category,R.name].join(" > ")),{label:B,value:R.id,description:R.description}})}function p({children:A}){const R=(0,i.of)(x);return r.createElement("div",{className:R},A)}function x(A){return(0,t.css)({borderTop:`1px solid ${A.colors.border.weak}`,padding:`${A.spacing(2)}`,display:"flex"})}},66211:(Y,I,e)=>{"use strict";e.d(I,{g5:()=>C,tN:()=>b,Zm:()=>g,Z4:()=>P});var t=e(2543),n=e(96540),r=e(60264),s=e(10354),o=e(32196),m=e(72724),l=e(40845);const i=({libraryPanel:D})=>{const T=(0,l.of)(c),M=D.useState(),O=M.$timeRange?.getTimeZone(),S=M._loadedPanel?.meta;return S?n.createElement("div",{className:T.info},n.createElement("div",{className:T.libraryPanelInfo},`Used on ${S.connectedDashboards} `,S.connectedDashboards===1?"dashboard":"dashboards"),n.createElement("div",{className:T.libraryPanelInfo},(0,m.LE)(S.updated,{format:"L",timeZone:O})," by",S.updatedBy.avatarUrl&&n.createElement("img",{className:T.userAvatar,src:S.updatedBy.avatarUrl,alt:`Avatar for ${S.updatedBy.name}`}),S.updatedBy.name)):null},c=D=>({info:(0,o.css)({lineHeight:1}),libraryPanelInfo:(0,o.css)({color:D.colors.text.secondary,fontSize:D.typography.bodySmall.fontSize}),userAvatar:(0,o.css)({borderRadius:D.shape.radius.circle,boxSizing:"content-box",width:"22px",height:"22px",paddingLeft:D.spacing(1),paddingRight:D.spacing(1)})});var u=e(6923),f=e(48192),d=e(74097);const E="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",h="An override rule exists for this property";function y(D,T,M){const O=[];if(M){for(const p of M)for(const x of p.fields)if((0,t.get)(x.config,D.path)!=null){O.push({type:"data",description:E,tooltip:E});break}}return T.overrides.some(p=>p.properties.some(x=>x.id===D.id))&&O.push({type:"rule",description:h,tooltip:h}),O}var a=e(54612);function v({data:D,replaceVariables:T,options:M,eventBus:O,instanceState:S}){const p=D?.series??[];return{data:p,replaceVariables:T,options:M,eventBus:O,getSuggestions:A=>(0,u.Hf)(p,A),instanceState:S}}function g(D){const{plugin:T,panel:M,onPanelOptionsChanged:O,onFieldConfigsChange:S,data:p,dashboard:x,instanceState:A}=D,R=M.getOptions(),B=M.fieldConfig,U={},F=v({data:p,replaceVariables:M.replaceVariables,options:R,eventBus:x.events,instanceState:A}),K=L=>{const V=(L&&L[0])??`${T.meta.name}`,N=U[V];return N||(U[V]=new f.C({title:V,id:V,sandboxId:T.meta.id}))},w={getValue:L=>(0,t.get)(R,L),onChange:(L,V)=>{const N=(0,a.Sf)(R,L,V);O(N)}};C(T.getPanelOptionsSupplier(),w,K,F);for(const L of T.fieldConfigRegistry.list()){if(L.isCustom){if(L.showIf&&!L.showIf(B.defaults.custom,p?.series))continue}else if(L.showIf&&!L.showIf(B.defaults,p?.series))continue;if(L.hideFromDefaults)continue;const V=K(L.category),N=L.editor,z=B.defaults,J=L.isCustom?z.custom?(0,t.get)(z.custom,L.path):void 0:(0,t.get)(z,L.path);L.getItemsCount&&(V.props.itemsCount=L.getItemsCount(J)),V.addItem(new d.v({title:L.name,description:L.description,overrides:y(L,B,p?.series),render:function(){const H=q=>{S((0,a.EQ)(B,L.path,q,L.isCustom))};return n.createElement(N,{value:J,onChange:H,item:L,context:F,id:L.id})}}))}return Object.values(U)}function b(D){const T=new f.C({title:"Library panel options",id:"Library panel options",isOpenDefault:!0});return T.addItem(new d.v({title:"Name",value:D,popularRank:1,render:function(){return n.createElement(s.p,{id:"LibraryPanelFrameName","data-testid":"library panel name input",defaultValue:D.state.name,onBlur:O=>D.setState({name:O.currentTarget.value})})}})).addItem(new d.v({title:"Information",render:function(){return n.createElement(i,{libraryPanel:D})}})),T}function P(D){const{plugin:T,panel:M,data:O,eventBus:S,instanceState:p}=D,x={},A=K=>{const w=K?.[0]??T.meta.name,L=x[w];return L||(x[w]=new f.C({title:w,id:w,sandboxId:T.meta.id}))},R=M.state.options,B={getValue:K=>(0,t.get)(R,K),onChange:(K,w)=>{const L=(0,a.Sf)(R,K,w);M.onOptionsChange(L)}},U=v({data:O,replaceVariables:M.interpolate,options:R,eventBus:S,instanceState:p});C(T.getPanelOptionsSupplier(),B,A,U);const F=M.state.fieldConfig;for(const K of T.fieldConfigRegistry.list()){const w=K.showIf&&(K.isCustom?!K.showIf(F.defaults.custom,O?.series):!K.showIf(F.defaults,O?.series));if(K.hideFromDefaults||w)continue;const L=A(K.category),V=K.editor,N=F.defaults,z=K.isCustom?N.custom?(0,t.get)(N.custom,K.path):void 0:(0,t.get)(N,K.path);K.getItemsCount&&(L.props.itemsCount=K.getItemsCount(z)),L.addItem(new d.v({title:K.name,description:K.description,overrides:y(K,F,O?.series),render:function(){const G=H=>{M.onFieldConfigChange((0,a.EQ)(F,K.path,H,K.isCustom),!0)};return n.createElement(V,{value:z,onChange:G,item:K,context:U,id:K.id})}}))}return Object.values(x)}function C(D,T,M,O,S){const p=new r.pv;D(p,O);for(const x of p.getItems()){if(x.showIf&&!x.showIf(O.options,O.data))continue;let A=S;if(A?x.category?.[0]?.length&&(A=A.getCategory(x.category[0])):A=M(x.category),(0,r.iF)(x)){const B=x.getNestedValueAccess(T),U=B.getContext?B.getContext(O):{...O,options:T.getValue(x.path)};C(x.getBuilder(),B,M,U,A);continue}const R=x.editor;A.addItem(new d.v({title:x.name,description:x.description,render:function(){return n.createElement(R,{value:T.getValue(x.path),onChange:U=>{T.onChange(x.path,U)},item:x,context:O,id:x.id})}}))}}},53466:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>b,GU:()=>f,MJ:()=>E,Ox:()=>h,eK:()=>a,fR:()=>y,kw:()=>v,wi:()=>l});var t=e(30038),n=e(39070),r=e(43127),s=e(33390),o=e(84423),m=e(32696);const l="grafana.dashboard.editor.ui",i={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:m.q5.Fill},c=()=>{const P=s.A.getObject(l,i);let C={...P};return typeof P.topPaneSize=="string"&&(C={...P,topPaneSize:parseFloat(P.topPaneSize)/100}),{getPanel:()=>new o.a9({}),getSourcePanel:()=>new o.a9({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,r.E2)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...i,...C}}},u=(0,t.Z0)({name:"panelEditor",initialState:c(),reducers:{updateEditorInitState:(P,C)=>{P.getPanel=()=>C.payload.panel,P.getSourcePanel=()=>C.payload.sourcePanel,P.initDone=!0,P.isOpen=!0,P.shouldDiscardChanges=!1},setEditorPanelData:(P,C)=>{P.getData=()=>C.payload},setDiscardChanges:(P,C)=>{P.shouldDiscardChanges=C.payload},setPanelEditorUIState:(P,C)=>{P.ui={...P.ui,...C.payload},!P.ui.isPanelOptionsVisible&&P.isVizPickerOpen&&(P.isVizPickerOpen=!1)},toggleVizPicker:(P,C)=>{P.isVizPickerOpen=C.payload,P.isVizPickerOpen&&(P.ui.isPanelOptionsVisible=!0)},toggleTableView(P){P.tableViewEnabled=!P.tableViewEnabled},closeEditor:P=>{P.getPanel=()=>new o.a9({}),P.getSourcePanel=()=>new o.a9({}),P.isOpen=!1,P.initDone=!1,P.isVizPickerOpen=!1,P.tableViewEnabled=!1}}}),{updateEditorInitState:f,setEditorPanelData:d,setDiscardChanges:E,closeEditor:h,setPanelEditorUIState:y,toggleVizPicker:a,toggleTableView:v}=u.actions,b={panelEditor:u.reducer}},95689:(Y,I,e)=>{"use strict";e.d(I,{a:()=>l,e:()=>i});var t=e(41811),n=e(2913),r=e(16233),s=e(75471),o=e(57220),m=e(32696);const l=(0,t.A)((c,u)=>{const f=[];if(!u)return f;let d=m.M8.Visualize;if(u.meta.skipDataQuery)return[];u.meta.skipDataQuery||(d=m.M8.Query,f.push({id:m.M8.Query,text:"Query",icon:"database",active:!1}),f.push({id:m.M8.Transform,text:"Transform data",icon:"process",active:!1})),i(u)&&f.push({id:m.M8.Alert,text:"Alert",icon:"bell",active:!1});const E=f.find(h=>h.id===(c||d))??f[0];return E.active=!0,f});function i(c){const{unifiedAlertingEnabled:u=!1}=(0,n.zj)(),f=r.TP.hasPermission((0,s.Wd)(o.hY).read);if(!(u&&f))return!1;const E=c.meta.id==="graph",h=c.meta.id==="timeseries";return E||h}},32696:(Y,I,e)=>{"use strict";e.d(I,{M8:()=>t,Nt:()=>s,__:()=>m,q5:()=>n});var t=(l=>(l.Query="query",l.Transform="transform",l.Visualize="visualize",l.Alert="alert",l))(t||{}),n=(l=>(l[l.Fill=0]="Fill",l[l.Fit=1]="Fit",l[l.Exact=2]="Exact",l))(n||{}),r=(l=>(l[l.Off=0]="Off",l[l.Table=1]="Table",l))(r||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],o=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var m=(l=>(l[l.Visualizations=0]="Visualizations",l[l.LibraryPanels=1]="LibraryPanels",l[l.Suggestions=2]="Suggestions",l[l.Widgets=3]="Widgets",l))(m||{})},54612:(Y,I,e)=>{"use strict";e.d(I,{$:()=>m,A:()=>o,EQ:()=>l,Sf:()=>i});var t=e(2543),n=e.n(t),r=e(15054),s=e(32696);function o(c,u,f,d){if(c===s.q5.Fill)return{width:u,height:f};const E=8*6,a=(window.innerWidth-60-r.dU*4)/r.cV*d.gridPos.w,v=r.sD*d.gridPos.h+E,g=Math.min(u/a,f/v);return a<=u&&v<=f?{width:a,height:v}:{width:a*g,height:v*g}}function m(c){return c?.meta.skipDataQuery===!1}const l=(c,u,f,d)=>{let E={...c.defaults};const h=f==null||f==="";return d?E.custom?h?E.custom=(0,t.omit)(E.custom,u):E.custom=i(E.custom,u,f):h||(E.custom=i(E.custom,u,f)):h?E=(0,t.omit)(E,u):E=i(E,u,f),{...c,defaults:E}};function i(c,u,f){const d=Array.isArray(u)?u:u.split("."),E=d.shift();if(E.endsWith("]")){const y=E.lastIndexOf("["),a=+E.substring(y+1,E.length-1),v=E.substring(0,y);let g=c[v];const b=Array.isArray(g)?[...g]:[];return d.length&&(g=b[a],(g==null||typeof g!="object")&&(g={}),f=i(g,d,f)),b[a]=f,{...c,[v]:b}}if(!d.length)return{...c,[E]:f};let h=c[E];return(h==null||typeof h!="object")&&(h={}),{...c,[E]:i(h,d,f)}}},92378:(Y,I,e)=>{"use strict";e.d(I,{G:()=>m,U:()=>l});var t=e(96540),n=e(27857),r=e(88323),s=e(31678),o=e(87421);const m=({repeat:i,onChange:c,id:u})=>{const f=(0,s.useSelector)(h=>(0,o.SS)((0,o.y7)(h),h)),d=(0,t.useMemo)(()=>{const h=f.map(y=>({label:y.name,value:y.name}));return h.length===0&&h.unshift({label:"No template variables found",value:null}),h.unshift({label:"Disable repeating",value:null}),h},[f]),E=(0,t.useCallback)(h=>c(h.value),[c]);return t.createElement(r.l6,{inputId:u,value:i,onChange:E,options:d})},l=({parent:i,repeat:c,id:u,onChange:f})=>{const E=(0,t.useMemo)(()=>n.jh.getVariables(i),[i]).useState().variables,h=(0,t.useMemo)(()=>{const a=E.map(v=>({label:v.state.name,value:v.state.name}));return a.length===0&&a.unshift({label:"No template variables found",value:null}),a.unshift({label:"Disable repeating",value:null}),a},[E]),y=(0,t.useCallback)(a=>f(a.value),[f]);return t.createElement(r.l6,{inputId:u,value:c,onChange:y,options:h})}},78050:(Y,I,e)=>{"use strict";e.d(I,{C:()=>l,m:()=>i});var t=e(96540),n=e(13544),r=e(14110),s=e(71678),o=e(55852),m=e(70497);const l=({dashboard:c,onSaveSuccess:u,size:f})=>t.createElement(s.$s,null,({showModal:d,hideModal:E})=>t.createElement(o.$n,{size:f,onClick:()=>{d(m.$,{dashboard:c,onSaveSuccess:u,onDismiss:E})},"aria-label":n.Tp.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),i=({dashboard:c,onClick:u,onSaveSuccess:f,variant:d,size:E})=>t.createElement(s.$s,null,({showModal:h,hideModal:y})=>t.createElement(o.$n,{size:E,onClick:()=>{(0,r.rR)("grafana_dashboard_save_as_clicked"),u?.(),h(m.$,{dashboard:c,onSaveSuccess:f,onDismiss:y,isCopy:!0})},variant:d,"aria-label":n.Tp.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},54943:(Y,I,e)=>{"use strict";e.d(I,{l:()=>i});var t=e(96540),n=e(16817),r=e(67061),s=e(62930),o=e(90613),m=e(19626),l=e(22764);const i=({diff:c,oldValue:u,newValue:f,hasFolderChanges:d,oldFolder:E,newFolder:h})=>{const y=(0,n.A)(async()=>{const v=JSON.stringify(u??{},null,2),g=JSON.stringify(f??{},null,2);let b;const P=[];let C=0;if(c)for(const[D,T]of Object.entries(c)){const M=t.createElement(m.D,{diffs:T,key:D,title:D});D==="schemaVersion"?b=M:P.push(M),C+=T.length}return{schemaChange:b,diffs:P,count:C,showDiffs:C<15,jsonView:t.createElement(l.M,{oldValue:v,newValue:g})}},[c,u,f]),{value:a}=y;return t.createElement(r.B,{direction:"column",gap:1},d&&t.createElement(m.D,{diffs:[{op:"replace",value:h,originalValue:E,path:[],startLineNumber:0,endLineNumber:0}],key:"folder",title:"folder"}),(!a||!u)&&t.createElement(s.y,null),a&&a.count>=1?t.createElement(t.Fragment,null,a&&a.schemaChange&&a.schemaChange,a&&a.showDiffs&&a.diffs,t.createElement(o.a,{paddingTop:1},t.createElement("h4",null,"Full JSON diff"),a.jsonView)):t.createElement(o.a,{paddingTop:1},"No changes in the dashboard JSON"))}},70497:(Y,I,e)=>{"use strict";e.d(I,{$:()=>Le});var t=e(96540),n=e(17172),r=e(32264),s=e(87978),o=e(63021),m=e(40675),l=e(56596),i=e(32196),c=e(16817),u=e(40845),f=e(42418),d=e(27677);function E({dashboard:He}){const je=(0,u.of)(h),{loading:at,value:Ye,error:$e}=(0,c.A)(async()=>{const Fe=He.getSaveModelCloneOld();return d.IB.validateDashboard(Fe).catch(se=>{if(se.status>=500)throw se;return se.data})},[He]);let xe;if(at)xe=t.createElement(f.F,{severity:"info",title:"Checking dashboard validity"});else if(Ye)Ye.isValid||(xe=t.createElement(f.F,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:je.error},Ye.message)));else{const Fe=$e?.message??"Unknown error";xe=t.createElement(f.F,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:je.error},Fe))}return xe?t.createElement("div",{className:je.root},xe):null}const h=He=>({root:(0,i.css)({marginTop:He.spacing(1)}),error:(0,i.css)({fontFamily:He.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),y=E;var a=e(54943),v=e(96374),g=e(37390),b=e(55852),P=e(78050),C=e(41053),D=e(71733),T=e(14110),M=e(12131),O=e(28138),S=e(3169),p=e(91219),x=e(55314),A=e(31678),R=e(28444),B=e(36974);const U=async(He,je,at,Ye)=>{const $e=await Ye({dashboard:He,folderUid:je.folderUid??at.meta.folderUid??He.meta?.folderUid,message:je.message,overwrite:je.overwrite});if("error"in $e)throw $e.error;return $e.data},F=(He=!1)=>{const je=(0,A.useDispatch)(),at=(0,S._2)(),[Ye]=(0,x.e8)(),[$e,xe]=(0,C.A)(async(Fe,Ee,se)=>{try{const ae=await U(Fe,Ee,se,Ye);se.version=ae.version,Fe.version=ae.version,se.clearUnsavedChanges(Fe,Ee),O.A.publish(new R.Eu),at.success("Dashboard saved"),(0,B.ko)(ae.uid),He?(0,T.rR)("grafana_dashboard_copied",{name:se.title,url:ae.url}):(0,T.rR)(`grafana_dashboard_${se.id?"saved":"created"}`,{name:se.title,url:ae.url});const fe=M.Ny.getLocation().pathname,Ce=D.I.stripBaseFromUrl(ae.url);return Ce!==fe&&setTimeout(()=>M.Ny.replace(Ce)),se.meta.isStarred&&je((0,p.TU)({id:se.uid,title:se.title,url:Ce})),ae}catch(ae){throw ae instanceof Error&&at.error(ae.message??"Error saving dashboard"),ae}},[je,at]);return{state:$e,onDashboardSave:xe}},K=({dashboard:He,dashboardSaveModel:je,error:at,onDismiss:Ye,setErrorIsHandled:$e})=>{const{onDashboardSave:xe}=F();return t.createElement(t.Fragment,null,at.data&&at.data.status==="version-mismatch"&&t.createElement(v.u,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await xe(je,{overwrite:!0},He),Ye()},onDismiss:Ye}),at.data&&at.data.status==="name-exists"&&t.createElement(v.u,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await xe(je,{overwrite:!0},He),Ye()},onDismiss:Ye}),at.data&&at.data.status==="plugin-dashboard"&&t.createElement(w,{dashboard:He,onDismiss:()=>{$e(!0),Ye()}}))},w=({onDismiss:He,dashboard:je})=>{const{onDashboardSave:at}=F(),Ye=(0,u.of)(V);return t.createElement(g.a,{className:Ye.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:He},t.createElement("div",{className:Ye.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(g.a.ButtonRow,null,t.createElement(b.$n,{variant:"secondary",onClick:He,fill:"outline"},"Cancel"),t.createElement(P.m,{onClick:He,dashboard:je,onSaveSuccess:He}),t.createElement(b.$n,{variant:"destructive",onClick:async()=>{await at(je.getSaveModelClone(),{overwrite:!0},je),He()}},"Overwrite")))},L=He=>{switch(He){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},V=He=>({modal:(0,i.css)`
    width: 500px;
  `,modalText:(0,i.css)`
    font-size: ${He.typography.h4.fontSize};
    color: ${He.colors.text.primary};
    margin-bottom: ${He.spacing(4)}
    padding-top: ${He.spacing(2)};
  `,modalButtonRow:(0,i.css)`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${He.spacing(2)};
    }
  `});var N=e(51253),z=e(16504),J=e(88575),G=e(67061),H=e(60029),q=e(10354),le=e(21744),me=e(15292),k=e(36607),ee=e(71500),X=e(81394),j=e(27966);const ne=He=>{const je=He.getSaveModelClone();return je.id=null,je.uid="",je.title+=" Copy",je.editable=!0,He.id>0&&je.panels&&je.panels.forEach(at=>{at.type==="graph"&&at.alert&&delete at.thresholds,delete at.alert}),je},te=({dashboard:He,isLoading:je,isNew:at,onSubmit:Ye,onCancel:$e,onSuccess:xe})=>{const Fe={title:at?He.title:`${He.title} Copy`,description:He.description,$folder:{uid:He.meta.folderUid,title:He.meta.folderTitle},copyTags:!1},Ee=se=>async ae=>{if(ae&&ae===se().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await ee.P.validateNewDashboardName(se().$folder.uid??"general",ae),!0}catch(fe){return fe instanceof Error?fe.message:"Dashboard name is invalid"}};return t.createElement(N.l,{defaultValues:Fe,onSubmit:async se=>{if(!Ye)return;const ae=ne(He);ae.title=se.title,ae.description=se.description,!at&&!se.copyTags&&(ae.tags=[]),(await Ye(ae,{folderUid:se.$folder.uid},He)).status==="success"&&xe()}},({register:se,control:ae,errors:fe,getValues:Ce})=>t.createElement(t.Fragment,null,t.createElement(z.e,{render:({field:{ref:Re,...Oe}})=>t.createElement(J.D,{label:t.createElement(G.B,{justifyContent:"space-between"},t.createElement(H.J,{htmlFor:"title"},"Title"),r.$.featureToggles.dashgpt&&at&&t.createElement(j.Z,{onGenerate:ze=>Oe.onChange(ze)})),invalid:!!fe.title,error:fe.title?.message},t.createElement(q.p,{...Oe,onChange:ze=>Oe.onChange(ze.target.value),"aria-label":"Save dashboard title field",autoFocus:!0})),control:ae,name:"title",rules:{validate:Ee(Ce)}}),t.createElement(z.e,{render:({field:{ref:Re,...Oe}})=>t.createElement(J.D,{label:t.createElement(G.B,{justifyContent:"space-between"},t.createElement(H.J,{htmlFor:"description"},"Description"),r.$.featureToggles.dashgpt&&at&&t.createElement(X.V,{onGenerate:ze=>Oe.onChange(ze)})),invalid:!!fe.description,error:fe.description?.message},t.createElement(le.f,{...Oe,onChange:ze=>Oe.onChange(ze.target.value),"aria-label":"Save dashboard description field",autoFocus:!0})),control:ae,name:"description"}),t.createElement(J.D,{label:"Folder"},t.createElement(z.e,{render:({field:{ref:Re,...Oe}})=>t.createElement(k.d,{...Oe,onChange:(ze,Xe)=>Oe.onChange({uid:ze,title:Xe}),value:Oe.value?.uid,initialTitle:He.meta.folderTitle,dashboardId:He.id,enableCreateNew:!0}),control:ae,name:"$folder"})),!at&&t.createElement(J.D,{label:"Copy tags"},t.createElement(me.d,{...se("copyTags")})),t.createElement(G.B,null,t.createElement(b.$n,{type:"button",variant:"secondary",onClick:$e,fill:"outline"},"Cancel"),t.createElement(b.$n,{disabled:je,type:"submit","aria-label":"Save dashboard button"},je?"Saving...":"Save"))))};var oe=e(13544),ie=e(10880),ue=e(10740),be=e(57725),ge=e(3363);const re=["You are an expert in Grafana Dashboards","Your goal is to write a description of the changes for a dashboard to display to the user","You will be given human-readable diffs with most irrelevant lines filtered out"].join(`.
`),ye=["Respond only with the diff description, which is meant to be loaded directly into the application for the user.",'If there are no substantial user or migration changes, the correct description is "Minor changes only"',`If there are too many changes of either kind, and those changes have a message saying 'too long', the correct response for that section is "Too many changes to auto-summarize"`,"In a diff, lines beginning with - are removed, and lines beginning with + are added.","Lines with neither + nor - are included for context. Be careful not to mark them as added or removed if they do not start with + or -.","If a line is changed, it will show a previous version removed and a new version added","When referring to panel changes, use the panel title","When using panel title, wrap it with double quotes","When the panel changes position, just mention that the panel has changed position","When an entire panel is added or removed, use the panel title and only say it was added or removed and disregard the rest of the changes for that panel","Group together similar changes into one line when multiple panels are affected","Refer to templating elements as variables","Try to make the response as short as possible"].join(`.
`),Be=({dashboard:He,onGenerate:je,disabled:at})=>{const Ye=(0,t.useCallback)(()=>ve(He),[He]);return t.createElement(ue.n,{messages:Ye,onGenerate:je,temperature:0,model:"gpt-3.5-turbo-16k",eventTrackingSrc:be.ec.dashboardChanges,toggleTipTitle:"Improve your dashboard changes summary",disabled:at})};function ve(He){let{userChanges:je,migrationChanges:at}=(0,ge.Yy)(He);return je.length>8e3&&(je="User changes were too long, fill in the user changes section with 'User changes too long to auto-summarize'"),at.split(`
`).length<10?at="No significant migration changes":at.length>8e3&&(at="Migration changes were too long, fill in the migration changes section with 'Migration changes too long to auto-summarize'"),[{content:re,role:ge.Xh.system},{content:`Summarize the following user changes diff under "User changes":
${je}`,role:ge.Xh.system},{content:`Be sure to only include substantial user changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Do not include "User Changes" section if there are no substantial user changes to report.`,role:ge.Xh.system},{content:`Summarize the following migration changes diff under "Migration changes":
${at}`,role:ge.Xh.system},{content:`Be sure to only include substantial migration changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Ignore any threshold step changes or templating list changes.
Ignore other changes and do not include them in the summary. Do not include "Migration Changes" section if there are no substantial migration changes to report.
If there are substantial migration changes, add "Some autogenerated changes are included to update the dashboard to the latest valid schema version" at the end.`,role:ge.Xh.system},{content:ye,role:ge.Xh.system}]}const Me=({dashboard:He,isLoading:je,saveModel:at,options:Ye,onSubmit:$e,onCancel:xe,onSuccess:Fe,onOptionsChange:Ee})=>{const se=(0,t.useMemo)(()=>He.hasTimeChanged(),[He]),ae=(0,t.useMemo)(()=>He.hasVariablesChanged(),[He]),[fe,Ce]=(0,t.useState)(!1),[Re,Oe]=(0,t.useState)(Ye.message),ze=(0,u.of)(ke);return t.createElement("form",{onSubmit:async Xe=>{if(Xe.preventDefault(),!$e)return;Ce(!0),Ye={...Ye,message:Re},(await $e(at.clone,Ye,He)).status==="success"?Fe():Ce(!1)},style:{maxWidth:600}},t.createElement(G.B,{gap:2,direction:"column",alignItems:"flex-start"},se&&t.createElement(ie.S,{checked:!!Ye.saveTimerange,onChange:()=>Ee({...Ye,saveTimerange:!Ye.saveTimerange}),label:"Save current time range as dashboard default","aria-label":oe.Tp.pages.SaveDashboardModal.saveTimerange}),ae&&t.createElement(ie.S,{checked:!!Ye.saveVariables,onChange:()=>Ee({...Ye,saveVariables:!Ye.saveVariables}),label:"Save current variable values as dashboard default","aria-label":oe.Tp.pages.SaveDashboardModal.saveVariables}),t.createElement("div",{className:ze.message},r.$.featureToggles.aiGeneratedDashboardChanges&&t.createElement(Be,{dashboard:He,onGenerate:Xe=>{Ee({...Ye,message:Xe}),Oe(Xe)},disabled:!at.hasChanges}),t.createElement(le.f,{"aria-label":"message",value:Re,onChange:Xe=>{Ee({...Ye,message:Xe.currentTarget.value}),Oe(Xe.currentTarget.value)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5})),t.createElement(G.B,{alignItems:"center"},t.createElement(b.$n,{variant:"secondary",onClick:xe,fill:"outline"},"Cancel"),t.createElement(b.$n,{type:"submit",disabled:!at.hasChanges||je,icon:fe?"spinner":void 0,"aria-label":oe.Tp.pages.SaveDashboardModal.save},je?"Saving...":"Save"),!at.hasChanges&&t.createElement("div",null,"No changes to save"))))};function ke(He){return{message:(0,i.css)`
      display: flex;
      align-items: end;
      flex-direction: column;
      width: 100%;
    `}}var Se=e(4213),We=e(66864),De=e(10534);const pe=({dashboard:He,onCancel:je})=>{const[at,Ye]=(0,t.useState)(()=>{const xe=He.getSaveModelClone();return delete xe.id,JSON.stringify(xe,null,2)}),$e=(0,t.useCallback)(()=>{const xe=new Blob([at],{type:"application/json;charset=utf-8"});(0,Se.saveAs)(xe,He.title+"-"+new Date().getTime()+".json")},[He.title,at]);return t.createElement(t.Fragment,null,t.createElement(G.B,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",He.meta.provisionedExternalId),t.createElement(le.f,{spellCheck:!1,value:at,onChange:xe=>{Ye(xe.currentTarget.value)},className:Ne.json}),t.createElement(We.Gy,null,t.createElement(b.$n,{variant:"secondary",onClick:je,fill:"outline"},"Cancel"),t.createElement(De.b,{icon:"copy",getText:()=>at},"Copy JSON to clipboard"),t.createElement(b.$n,{type:"submit",onClick:$e},"Save JSON to file"))))},Ne={json:(0,i.css)`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},Le=({dashboard:He,onDismiss:je,onSaveSuccess:at,isCopy:Ye})=>{const[$e,xe]=(0,t.useState)({}),Fe=He.getOriginalDashboard(),Ee=He.meta.provisioned,se=He.version===0,ae=!!He.meta.hasUnsavedFolderChange,[fe,Ce]=(0,t.useState)(!1),Re=(0,t.useMemo)(()=>{const rt=He.getSaveModelClone({saveTimerange:!!$e.saveTimerange,saveVariables:!!$e.saveVariables});if(!Fe)return{clone:rt,diff:{},diffCount:0,hasChanges:!1};const ut=(0,l.G4)(Fe,rt);let Et=0;for(const Ct of Object.values(ut))Et+=Ct.length;return{clone:rt,diff:ut,diffCount:Et,hasChanges:(Et>0||ae)&&!se}},[He,Fe,$e,se,ae]),[Oe,ze]=(0,t.useState)(!1),{state:Xe,onDashboardSave:Ze}=F(Ye),et=at?()=>{je(),at()}:je,nt=()=>Oe?t.createElement(a.l,{diff:Re.diff,oldValue:Fe,newValue:Re.clone}):se||Ye?t.createElement(te,{dashboard:He,isLoading:Xe.loading,onCancel:je,onSuccess:et,onSubmit:Ze,isNew:se}):Ee?t.createElement(pe,{dashboard:He,onCancel:je,onSuccess:et}):t.createElement(Me,{dashboard:He,isLoading:Xe.loading,saveModel:Re,onCancel:je,onSuccess:et,onSubmit:Ze,options:$e,onOptionsChange:xe});if(Xe.error&&!fe&&(0,n.NF)(Xe.error)&&L(Xe.error.data.status))return t.createElement(K,{error:Xe.error,dashboard:He,dashboardSaveModel:Re.clone,onDismiss:je,setErrorIsHandled:Ce});let lt="Save dashboard";return Ye?lt="Save dashboard copy":Ee&&(lt="Provisioned dashboard"),t.createElement(s._,{title:lt,onClose:je,subtitle:He.title,tabs:t.createElement(o.U,null,t.createElement(m.o,{label:"Details",active:!Oe,onChangeTab:()=>ze(!1)}),Re.hasChanges&&t.createElement(m.o,{label:"Changes",active:Oe,onChangeTab:()=>ze(!0),counter:Re.diffCount}))},nt(),r.$.featureToggles.showDashboardValidationWarnings&&t.createElement(y,{dashboard:He}))}},35280:(Y,I,e)=>{"use strict";e.d(I,{D:()=>E});var t=e(96540),n=e(94701),r=e(14110),s=e(88575),o=e(15292),m=e(21744),l=e(37390),i=e(10534),c=e(44836),u=e(7758),f=e(87895),d=e(22699);function E({panel:h,dashboard:y,range:a,buildIframe:v=d.CF}){const[g,b]=(0,t.useState)(!0),[P,C]=(0,t.useState)("current"),[D,T]=(0,t.useState)("");(0,n.A)(()=>{(0,r.rR)("grafana_dashboards_embed_share_viewed")}),(0,t.useEffect)(()=>{const A=v(g,y.uid,P,h,a);T(A)},[P,g,y,h,a,v]);const M=A=>{T(A.currentTarget.value)},O=()=>{b(A=>!A)},S=A=>{C(A)},x=y.time.to==="now"?(0,c.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(c.x6,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(s.D,{label:(0,c.t)("share-modal.embed.time-range","Current time range"),description:x},t.createElement(o.d,{id:"share-current-time-range",value:g,onChange:O})),t.createElement(f.w,{selectedTheme:P,onChange:S}),t.createElement(s.D,{label:(0,c.t)("share-modal.embed.html","Embed HTML"),description:(0,c.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(m.f,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:D,onChange:M})),t.createElement(l.a.ButtonRow,null,t.createElement(i.b,{icon:"copy",variant:"primary",getText:()=>D,onClipboardCopy:()=>{u.c.embedSnippetCopy({currentTimeRange:g,theme:P})}},t.createElement(c.x6,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}},86394:(Y,I,e)=>{"use strict";e.d(I,{j:()=>o});var t=e(96540),n=e(14110),r=e(44836),s=e(96227);const o=({panel:m,initialFolderUid:l,onDismiss:i})=>((0,t.useEffect)(()=>{(0,n.rR)("grafana_dashboards_library_panel_share_viewed")},[]),m?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(r.x6,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(s.b,{panel:m,initialFolderUid:l,onDismiss:i})):null)},7686:(Y,I,e)=>{"use strict";e.d(I,{Zy:()=>j});var t=e(96540),n=e(25897),r=e(37390),s=e(40980),o=e(40845),m=e(2913),l=e(10096),i=e(44836),c=e(4785),u=e(72254),f=e(7758),d=e(82792),E=e(35280),h=e(4213),y=e(88575),a=e(15292),v=e(55852),g=e(15858),b=e(28444),P=e(70713),C=e(32372),D=e(10534);function T({json:ne,onDismiss:te}){const oe=(0,t.useCallback)(()=>ne,[ne]);return t.createElement(r.a,{title:"JSON",onDismiss:te,onClickBackdrop:te,isOpen:!0},t.createElement(P.Ay,{disableHeight:!0},({width:ie})=>t.createElement(C.B,{value:ne,language:"json",showMiniMap:!1,height:"500px",width:ie})),t.createElement(r.a.ButtonRow,null,t.createElement(D.b,{icon:"copy",getText:oe,onClipboardCopy:()=>{f.c.exportCopyJsonClicked()}},t.createElement(i.x6,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class M extends t.PureComponent{constructor(te){super(te),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onSaveAsFile=()=>{const{dashboard:oe}=this.props,{shareExternally:ie}=this.state;f.c.exportSaveJsonClicked({externally:ie}),ie?this.exporter.makeExportable(oe).then(ue=>{this.openSaveAsDialog(ue)}):this.openSaveAsDialog(oe.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:oe}=this.props,{shareExternally:ie}=this.state;f.c.exportViewJsonClicked({externally:ie}),ie?this.exporter.makeExportable(oe).then(ue=>{this.openJsonModal(ue)}):this.openJsonModal(oe.getSaveModelClone())},this.openSaveAsDialog=oe=>{const ie=JSON.stringify(oe,null,2),ue=new Blob([ie],{type:"application/json;charset=utf-8"}),be=new Date().getTime();(0,h.saveAs)(ue,`${oe.title}-${be}.json`)},this.openJsonModal=oe=>{l.lE.publish(new b.S8({props:{json:JSON.stringify(oe,null,2)},component:T})),this.props.onDismiss?.()},this.state={shareExternally:!1},this.exporter=new g.M}render(){const{onDismiss:te}=this.props,{shareExternally:oe}=this.state,ie=(0,i.t)("share-modal.export.share-externally-label","Export for sharing externally");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(y.D,{label:ie},t.createElement(a.d,{id:"share-externally-toggle",value:oe,onChange:this.onShareExternallyChange})),t.createElement(r.a.ButtonRow,null,t.createElement(v.$n,{variant:"secondary",onClick:te,fill:"outline"},t.createElement(i.x6,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(v.$n,{variant:"secondary",onClick:this.onViewJson},t.createElement(i.x6,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(v.$n,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(i.x6,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var O=e(86394),S=e(13544),p=e(84167),x=e(10354),A=e(72109),R=e(42418),B=e(87895),U=e(22699);class F extends t.PureComponent{constructor(te){super(te),this.buildUrl=async()=>{const{panel:oe,dashboard:ie}=this.props,{useCurrentTimeRange:ue,useShortUrl:be,selectedTheme:ge}=this.state,re=await(0,U.Xe)(ue,ge,oe,be),ye=(0,U.Lb)(ue,ie.uid,ge,oe);this.setState({shareUrl:re,imageUrl:ye})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=oe=>{this.setState({selectedTheme:oe})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""},this.onCopy=this.onCopy.bind(this)}componentDidMount(){this.buildUrl()}componentDidUpdate(te,oe){const{useCurrentTimeRange:ie,useShortUrl:ue,selectedTheme:be}=this.state;(oe.useCurrentTimeRange!==ie||oe.selectedTheme!==be||oe.useShortUrl!==ue)&&this.buildUrl()}onCopy(){f.c.shareLinkCopied({currentTimeRange:this.state.useCurrentTimeRange,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl})}render(){const{panel:te,dashboard:oe}=this.props,ie=oe?oe.time.to==="now":!1,{useCurrentTimeRange:ue,useShortUrl:be,selectedTheme:ge,shareUrl:re,imageUrl:ye}=this.state,Be=S.Tp.pages.SharePanelModal,ve=!!oe.id,Me=(0,i.t)("share-modal.link.time-range-label","Lock time range"),ke=(0,i.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Se=(0,i.t)("share-modal.link.shorten-url","Shorten URL"),We=(0,i.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(p.n,null,t.createElement(y.D,{label:Me,description:ie?ke:""},t.createElement(a.d,{id:"share-current-time-range",value:ue,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(B.w,{selectedTheme:ge,onChange:this.onThemeChange}),t.createElement(y.D,{label:Se},t.createElement(a.d,{id:"share-shorten-url",value:be,onChange:this.onUrlShorten})),t.createElement(y.D,{label:We},t.createElement(x.p,{id:"link-url-input",value:re,readOnly:!0,addonAfter:t.createElement(D.b,{icon:"copy",variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onCopy},t.createElement(i.x6,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),te&&m.Ay.rendererAvailable&&t.createElement(t.Fragment,null,ve&&t.createElement(A.Y,{href:ye,external:!0,icon:"camera","aria-label":Be.linkToRenderedImage},(0,i.t)("share-modal.link.rendered-image","Direct link rendered image")),!ve&&t.createElement(R.F,{severity:"info",title:(0,i.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(i.x6,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),te&&!m.Ay.rendererAvailable&&t.createElement(R.F,{severity:"info",title:(0,i.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(i.x6,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the",t.createElement(A.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var K=e(92041),w=e(17172),L=e(88323),V=e(62930),N=e(74856),z=e(80484),J=e(69064);class G extends t.PureComponent{constructor(te){super(te),this.createSnapshot=oe=>()=>{const{timeoutSeconds:ie}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,oe)},ie*1e3)},this.saveSnapshot=async(oe,ie)=>{const{snapshotExpires:ue,timeoutSeconds:be}=this.state,ge=this.dashboard.getSaveModelCloneOld();this.scrubDashboard(ge);const re={dashboard:ge,name:ge.title,expires:ue,external:ie};try{const ye=await(0,J.s)().create(re);this.setState({deleteUrl:ye.deleteUrl,snapshotUrl:ye.url,step:2})}finally{ie?f.c.publishSnapshotClicked({expires:ue,timeout:be}):f.c.publishSnapshotLocalClicked({expires:ue,timeout:be}),this.setState({isLoading:!1})}},this.scrubDashboard=oe=>{const{panel:ie}=this.props,{snapshotName:ue}=this.state;oe.title=ue,oe.time=(0,N.jG)().timeRange(),oe.links=[],oe.panels.forEach(ge=>{ge.targets=[],ge.links=[],ge.datasource=null});const be=oe.annotations.list.filter(ge=>ge.enable);if(oe.annotations.list=be.map(ge=>({name:ge.name,enable:ge.enable,iconColor:ge.iconColor,snapshotData:ge.snapshotData,type:ge.type,builtIn:ge.builtIn,hide:ge.hide})),oe.getVariables().forEach(ge=>{"query"in ge&&(ge.query=""),"options"in ge&&(ge.options=ge.current&&!(0,K.R)(ge.current)?[ge.current]:[]),"refresh"in ge&&(ge.refresh=z.CO.never)}),ie){const ge=ie.getSaveModel();ge.gridPos.w=24,ge.gridPos.x=0,ge.gridPos.y=0,ge.gridPos.h=20,oe.panels=[ge]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(ge=>{delete ge.snapshotData}),this.dashboard.annotations.list.forEach(ge=>{delete ge.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:oe}=this.state;await(0,w.AI)().get(oe),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=oe=>{this.setState({snapshotName:oe.target.value})},this.onTimeoutChange=oe=>{this.setState({timeoutSeconds:Number(oe.target.value)})},this.onExpireChange=oe=>{this.setState({selectedExpireOption:oe,snapshotExpires:oe.value})},this.dashboard=te.dashboard,this.expireOptions=[{label:(0,i.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,i.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,i.t)("share-modal.snapshot.expire-week","1 Week"),value:60*60*24*7},{label:(0,i.t)("share-modal.snapshot.expire-never","Never"),value:0}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[2],snapshotExpires:this.expireOptions[2].value,snapshotName:te.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const te=await(0,J.s)().getSharingOptions();this.setState({sharingButtonText:te.externalSnapshotName,externalEnabled:te.externalEnabled})}renderStep1(){const{onDismiss:te}=this.props,{snapshotName:oe,selectedExpireOption:ie,timeoutSeconds:ue,isLoading:be,sharingButtonText:ge,externalEnabled:re}=this.state,ye=(0,i.t)("share-modal.snapshot.name","Snapshot name"),Be=(0,i.t)("share-modal.snapshot.expire","Expire"),ve=(0,i.t)("share-modal.snapshot.timeout","Timeout (seconds)"),Me=(0,i.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(y.D,{label:ye},t.createElement(x.p,{id:"snapshot-name-input",width:30,value:oe,onChange:this.onSnapshotNameChange})),t.createElement(y.D,{label:Be},t.createElement(L.l6,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:ie,onChange:this.onExpireChange})),t.createElement(y.D,{label:ve,description:Me},t.createElement(x.p,{id:"timeout-input",type:"number",width:21,value:ue,onChange:this.onTimeoutChange})),t.createElement(r.a.ButtonRow,null,t.createElement(v.$n,{variant:"secondary",onClick:te,fill:"outline"},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),re&&t.createElement(v.$n,{variant:"secondary",disabled:be,onClick:this.createSnapshot(!0)},ge),t.createElement(v.$n,{variant:"primary",disabled:be,onClick:this.createSnapshot()},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.local-button"},"Publish Snapshot"))))}renderStep2(){const{snapshotUrl:te}=this.state;return t.createElement(t.Fragment,null,t.createElement(y.D,{label:(0,i.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(x.p,{id:"snapshot-url-input",value:te,readOnly:!0,addonAfter:t.createElement(D.b,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(v.z9,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(i.x6,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:te,step:oe}=this.state;return t.createElement(t.Fragment,null,oe===1&&this.renderStep1(),oe===2&&this.renderStep2(),oe===3&&this.renderStep3(),te&&t.createElement(V.y,{inline:!0}))}}const H=[],q=[];function le(ne){H.push(ne)}function me(ne){q.push(ne)}function k(ne,te,oe){const ue=[{label:(0,i.t)("share-modal.tab-title.link","Link"),value:U.wr.link,component:F}];if(l.TP.isSignedIn&&m.config.snapshotEnabled&&ne){const ge=(0,i.t)("share-modal.tab-title.snapshot","Snapshot");ue.push({label:ge,value:U.wr.snapshot,component:G})}if(te){const ge=(0,i.t)("share-modal.tab-title.embed","Embed");if(ue.push({label:ge,value:U.wr.embed,component:E.D}),!(0,d.X)(te)){const re=(0,i.t)("share-modal.tab-title.library-panel","Library panel");ue.push({label:re,value:U.wr.libraryPanel,component:O.j})}ue.push(...q)}else{const ge=(0,i.t)("share-modal.tab-title.export","Export");ue.push({label:ge,value:U.wr.export,component:M}),ue.push(...H)}(0,u.iR)()&&ue.push({label:(0,i.t)("share-modal.tab-title.public-dashboard-title","Public dashboard"),value:U.wr.publicDashboard,component:c.b});const be=ue.find(ge=>ge.value===oe);return{tabs:ue,activeTab:be?.value??ue[0].value}}function ee(ne){const{tabs:te,activeTab:oe}=k(ne.dashboard.canEditDashboard(),ne.panel,ne.activeTab);return{tabs:te,activeTab:oe}}class X extends t.Component{constructor(te){super(te),this.onSelectTab=oe=>{this.setState(ie=>({...ie,activeTab:oe.value})),f.c.sharingTabChanged({item:oe.value})},this.state=ee(te)}getActiveTab(){const{tabs:te,activeTab:oe}=this.state;return te.find(ie=>ie.value===oe)}renderTitle(){const{panel:te}=this.props,{activeTab:oe}=this.state,ie=te?(0,i.t)("share-modal.panel.title","Share Panel"):(0,i.t)("share-modal.dashboard.title","Share"),ue=this.props.dashboard.canEditDashboard(),be=k(ue,this.props.panel,this.state.activeTab).tabs;return t.createElement(n.J,{title:ie,icon:"share-alt",tabs:be,activeTab:oe,onChangeTab:this.onSelectTab})}render(){const{dashboard:te,panel:oe}=this.props,ue=this.getActiveTab().component;return t.createElement(r.a,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(s.J,null,t.createElement(ue,{dashboard:te,panel:oe,onDismiss:this.props.onDismiss})))}}const j=(0,o.cV)(X)},59037:(Y,I,e)=>{"use strict";e.d(I,{K:()=>ge,b:()=>be});var t=e(32196),n=e(96540),r=e(49785),s=e(13544),o=e(32264),m=e(33378),l=e(40845),i=e(88575),c=e(10354),u=e(10534),f=e(15292),d=e(60029),E=e(66864),h=e(55852),y=e(71678),a=e(44836),v=e(72686),g=e(21380),b=e(7758),P=e(90591),C=e(16233),D=e(31678),T=e(52908);const M=()=>{const{width:ye}=(0,T.A)();return ye>1024};var O=e(7686),S=e(22699),p=e(29304),x=e(42418);const A=()=>n.createElement(x.F,{title:(0,a.t)("public-dashboard.modal-alerts.save-dashboard-changes-alert-title","Please save your dashboard changes before updating the public configuration"),severity:"warning",bottomSpacing:0});var R=e(12257),B=e(10872),U=e(72254),F=e(84167),K=e(54230);const w=s.Tp.pages.ShareDashboardModal.PublicDashboard,L=({disabled:ye,onChange:Be,register:ve,timeRange:Me})=>n.createElement(n.Fragment,null,n.createElement(F.n,{disabled:ye},n.createElement(E.gW,{spacing:"md"},n.createElement(E.PE,{orientation:1,spacing:"xs",justify:"space-between"},n.createElement(d.J,{description:(0,a.t)("public-dashboard.settings-configuration.default-time-range-label-desc","The public dashboard uses the default time range settings of the dashboard")},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-configuration.default-time-range-label"},"Default time range")),n.createElement(K.b,{value:Me,disabled:!0,onChange:()=>{}})),n.createElement(E.PE,{orientation:0,spacing:"sm"},n.createElement(f.d,{...ve("isTimeSelectionEnabled"),"data-testid":w.EnableTimeRangeSwitch,onChange:ke=>{Be("isTimeSelectionEnabled",ke.currentTarget.checked),b.c.publicDashboardTimeSelectionChanged({enabled:ke.currentTarget.checked})}}),n.createElement(d.J,{description:(0,a.t)("public-dashboard.settings-configuration.time-range-picker-label-desc","Allow viewers to change time range")},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-configuration.time-range-picker-label"},"Time range picker enabled"))),n.createElement(E.PE,{orientation:0,spacing:"sm"},n.createElement(f.d,{...ve("isAnnotationsEnabled"),onChange:ke=>{Be("isAnnotationsEnabled",ke.currentTarget.checked),b.c.publicDashboardAnnotationsSelectionChanged({enabled:ke.currentTarget.checked})},"data-testid":w.EnableAnnotationsSwitch}),n.createElement(d.J,{description:(0,a.t)("public-dashboard.settings-configuration.show-annotations-label-desc","Show annotations on public dashboard")},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-configuration.show-annotations-label"},"Show annotations"))))));var V=e(19727),N=e(94354),z=e(62930),J=e(63117);const G=s.Tp.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,H=({recipients:ye,dashboardUid:Be,publicDashboardUid:ve})=>{const Me=(0,l.of)(le),[ke,{isLoading:Se}]=(0,v.$L)(),[We,{isLoading:De}]=(0,v.NA)(),pe=Se||De,Ne=(He,je)=>{b.c.revokePublicDashboardEmailClicked(),ke({recipientUid:He,recipientEmail:je,dashboardUid:Be,uid:ve})},Le=He=>{b.c.resendPublicDashboardEmailClicked(),We({recipientUid:He,uid:ve})};return n.createElement("table",{className:Me.table,"data-testid":G.EmailSharingList},n.createElement("tbody",null,ye.map((He,je)=>n.createElement("tr",{key:He.uid},n.createElement("td",null,He.recipient),n.createElement("td",null,n.createElement(V.e,{className:Me.tableButtonsContainer},n.createElement(h.$n,{type:"button",variant:"destructive",fill:"text",title:(0,a.t)("public-dashboard.email-sharing.revoke-button-title","Revoke"),size:"sm",disabled:pe,onClick:()=>Ne(He.uid,He.recipient),"data-testid":`${G.DeleteEmail}-${je}`},n.createElement(a.x6,{i18nKey:"public-dashboard.email-sharing.revoke-button"},"Revoke")),n.createElement(h.$n,{type:"button",variant:"primary",fill:"text",title:(0,a.t)("public-dashboard.email-sharing.resend-button-title","Resend"),size:"sm",disabled:pe,onClick:()=>Le(He.uid),"data-testid":`${G.ReshareLink}-${je}`},n.createElement(a.x6,{i18nKey:"public-dashboard.email-sharing.resend-button"},"Resend"))))))))},q=({dashboard:ye})=>{const{width:Be}=(0,T.A)(),ve=(0,l.of)(le),Me=ye instanceof J.H$?ye.state.uid:ye.uid,{data:ke}=(0,v.Bs)(Me),[Se]=(0,v.T2)(),[We,{isLoading:De}]=(0,v.NY)(),pe=C.TP.hasPermission(D.AccessControlAction.DashboardsPublicWrite),{register:Ne,setValue:Le,control:He,watch:je,handleSubmit:at,formState:{errors:Ye},reset:$e}=(0,r.mN)({defaultValues:{shareType:ke?.share||U.Xo.PUBLIC,email:""},mode:"onSubmit"}),xe=Ee=>{const se={dashboard:ye,payload:{...ke,share:Ee}};Se(se)},Fe=async Ee=>{b.c.publicDashboardEmailInviteClicked(),await We({recipient:Ee.email,uid:ke.uid,dashboardUid:Me}).unwrap(),$e({email:"",shareType:U.Xo.EMAIL})};return n.createElement("form",{onSubmit:at(Fe)},n.createElement(F.n,{disabled:!pe,"data-testid":G.Container,className:ve.container},n.createElement(i.D,{label:(0,a.t)("public-dashboard.config.can-view-dashboard-radio-button-label","Can view dashboard"),className:ve.field},n.createElement(r.xI,{name:"shareType",control:He,render:({field:Ee})=>{const{ref:se,...ae}=Ee,fe=[{label:(0,a.t)("public-dashboard.config.public-share-type-option-label","Anyone with a link"),value:U.Xo.PUBLIC},{label:(0,a.t)("public-dashboard.config.email-share-type-option-label","Only specified people"),value:U.Xo.EMAIL}];return n.createElement(N.z,{...ae,size:Be<480?"sm":"md",options:fe,onChange:Ce=>{b.c.publicDashboardShareTypeChange({shareType:Ce===U.Xo.EMAIL?"email":"public"}),Le("shareType",Ce),xe(Ce)}})}})),je("shareType")===U.Xo.EMAIL&&n.createElement(n.Fragment,null,n.createElement(i.D,{label:(0,a.t)("public-dashboard.email-sharing.invite-field-label","Invite"),description:(0,a.t)("public-dashboard.email-sharing.invite-field-desc","Invite people by email"),error:Ye.email?.message,invalid:!!Ye.email?.message||void 0,className:ve.field},n.createElement("div",{className:ve.emailContainer},n.createElement(c.p,{className:ve.emailInput,placeholder:"email",autoCapitalize:"none",...Ne("email",{required:(0,a.t)("public-dashboard.email-sharing.input-required-email-text","Email is required"),pattern:{value:U._l,message:(0,a.t)("public-dashboard.email-sharing.input-invalid-email-text","Invalid email")}}),"data-testid":G.EmailSharingInput}),n.createElement(h.$n,{type:"submit",variant:"primary",disabled:De,"data-testid":G.EmailSharingInviteButton},n.createElement(a.x6,{i18nKey:"public-dashboard.email-sharing.invite-button"},"Invite"),De&&n.createElement(z.y,null)))),!!ke?.recipients?.length&&n.createElement(H,{recipients:ke.recipients,dashboardUid:Me,publicDashboardUid:ke.uid}))))},le=ye=>({container:(0,t.css)`
    label: emailConfigContainer;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${ye.spacing(3)};
  `,field:(0,t.css)`
    label: field-noMargin;
    margin-bottom: 0;
  `,emailContainer:(0,t.css)`
    label: emailContainer;
    display: flex;
    gap: ${ye.spacing(1)};
  `,emailInput:(0,t.css)`
    label: emailInput;
    flex-grow: 1;
  `,table:(0,t.css)`
    label: table;
    display: flex;
    max-height: 220px;
    overflow-y: scroll;

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${ye.spacing(.5,1)};

      :nth-child(odd) {
        background: ${ye.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:(0,t.css)`
    display: flex;
    justify-content: end;
  `});var me=e(67892),k=e(29158);function ee({headerElement:ye,isContentVisible:Be=!1,onRowToggle:ve,title:Me,...ke}){const Se=(0,l.of)(X),We=ye&&me.renderOrCallToRender(ye,{className:Se.summaryWrapper});return n.createElement("div",{className:Se.wrapper},n.createElement("div",{className:Se.header},n.createElement(k.K,{name:Be?"angle-down":"angle-right",tooltip:Be?(0,a.t)("public-dashboard.settings-bar-header.collapse-settings-tooltip","Collapse settings"):(0,a.t)("public-dashboard.settings-bar-header.expand-settings-tooltip","Expand settings"),className:Se.collapseIcon,onClick:ve,"aria-expanded":Be,...ke}),Me&&n.createElement("div",{className:Se.titleWrapper,onClick:ve},n.createElement("span",{className:Se.title},Me)),We))}ee.displayName="SettingsBarHeader";function X(ye){return{wrapper:(0,t.css)({label:"header",padding:ye.spacing(.5,.5),borderRadius:ye.shape.radius.default,background:ye.colors.background.secondary,minHeight:ye.spacing(4),"&:focus":{outline:"none"}}),header:(0,t.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,t.css)({marginLeft:ye.spacing(.5),color:ye.colors.text.disabled}),titleWrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${ye.spacing(.5)}`,[ye.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,t.css)({fontWeight:ye.typography.fontWeightBold,marginLeft:ye.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,t.css)({display:"flex",flexWrap:"wrap",[ye.breakpoints.down("sm")]:{flex:"2 2"}})}}function j({children:ye,title:Be,headerElement:ve,...Me}){const ke=(0,l.of)(ne),[Se,We]=(0,n.useState)(!1);function De(){We(pe=>!pe)}return n.createElement(n.Fragment,null,n.createElement(ee,{onRowToggle:De,isContentVisible:Se,title:Be,headerElement:ve,...Me}),Se&&n.createElement("div",{className:ke.content},ye))}j.displayName="SettingsBar";const ne=ye=>({content:(0,t.css)({marginTop:ye.spacing(1),marginLeft:ye.spacing(4)})});var te=e(3799);function oe({className:ye,isDataLoading:Be=!1,timeRange:ve,timeSelectionEnabled:Me,annotationsEnabled:ke}){const Se=(0,l.of)(ie),We=(0,a.t)("public-dashboard.settings-summary.time-range-picker-enabled-text","Time range picker = enabled"),De=(0,a.t)("public-dashboard.settings-summary.time-range-picker-disabled-text","Time range picker = disabled"),pe=(0,a.t)("public-dashboard.settings-summary.annotations-show-text","Annotations = show"),Ne=(0,a.t)("public-dashboard.settings-summary.annotations-hide-text","Annotations = hide");return Be?n.createElement("div",{className:(0,t.cx)(Se.summaryWrapper,ye)},n.createElement(z.y,{className:Se.summary,inline:!0,size:"sm"})):n.createElement("div",{className:(0,t.cx)(Se.summaryWrapper,ye)},n.createElement("span",{className:Se.summary},n.createElement(a.x6,{i18nKey:"public-dashboard.settings-summary.time-range-text"},"Time range = "),n.createElement(te.f,{className:Se.timeRange,value:ve})),n.createElement("span",{className:Se.summary},Me?We:De),n.createElement("span",{className:Se.summary},ke?pe:Ne))}oe.displayName="SettingsSummary";const ie=ye=>({summaryWrapper:(0,t.css)({display:"flex"}),summary:(0,t.css)`
      label: collapsedText;
      margin-left: ${ye.spacing.gridSize*2}px;
      font-size: ${ye.typography.bodySmall.fontSize};
      color: ${ye.colors.text.secondary};
    `,timeRange:(0,t.css)({display:"inline-block"})}),ue=s.Tp.pages.ShareDashboardModal.PublicDashboard;function be({onRevoke:ye,timeRange:Be,hasTemplateVariables:ve=!1,showSaveChangesAlert:Me=!1,unsupportedDatasources:ke=[],publicDashboard:Se,dashboard:We}){const De=(0,l.of)(re),pe=M(),[Ne,{isLoading:Le}]=(0,v.T2)(),He=C.TP.hasPermission(D.AccessControlAction.DashboardsPublicWrite),je=!He||Le,at=!!o.$.featureToggles.publicDashboardsEmailSharing&&(0,m.a)("publicDashboardsEmailSharing"),{handleSubmit:Ye,setValue:$e,register:xe}=(0,r.mN)({defaultValues:{isAnnotationsEnabled:Se?.annotationsEnabled,isTimeSelectionEnabled:Se?.timeSelectionEnabled,isPaused:!Se?.isEnabled}}),Fe=async ae=>{const{isAnnotationsEnabled:fe,isTimeSelectionEnabled:Ce,isPaused:Re}=ae;Ne({dashboard:We,payload:{...Se,annotationsEnabled:fe,timeSelectionEnabled:Ce,isEnabled:!Re}})},Ee=async(ae,fe)=>{$e(ae,fe),await Ye(Ce=>Fe(Ce))()};function se(){b.c.publicDashboardUrlCopied()}return n.createElement("div",{className:De.configContainer},Me&&n.createElement(A,null),!He&&n.createElement(p.t,{mode:"edit"}),ve&&n.createElement(B.D,null),ke.length>0&&n.createElement(R.s,{unsupportedDataSources:ke.join(", ")}),at&&n.createElement(q,{dashboard:We}),n.createElement(i.D,{label:(0,a.t)("public-dashboard.config.dashboard-url-field-label","Dashboard URL"),className:De.fieldSpace},n.createElement(c.p,{value:(0,U.mL)(Se.accessToken),readOnly:!0,disabled:!Se?.isEnabled,"data-testid":ue.CopyUrlInput,addonAfter:n.createElement(u.b,{"data-testid":ue.CopyUrlButton,variant:"primary",disabled:!Se?.isEnabled,getText:()=>(0,U.mL)(Se.accessToken),onClipboardCopy:se},n.createElement(a.x6,{i18nKey:"public-dashboard.config.copy-button"},"Copy"))})),n.createElement(i.D,{className:De.fieldSpace},n.createElement(E.PE,null,n.createElement(f.d,{...xe("isPaused"),disabled:je,onChange:ae=>{b.c.publicDashboardPauseSharingClicked({paused:ae.currentTarget.checked}),Ee("isPaused",ae.currentTarget.checked)},"data-testid":ue.PauseSwitch}),n.createElement(d.J,{className:(0,t.css)`
              margin-bottom: 0;
            `},n.createElement(a.x6,{i18nKey:"public-dashboard.config.pause-sharing-dashboard-label"},"Pause sharing dashboard")))),n.createElement(i.D,{className:De.fieldSpace},n.createElement(j,{title:(0,a.t)("public-dashboard.config.settings-title","Settings"),headerElement:({className:ae})=>n.createElement(oe,{className:ae,isDataLoading:Le,timeRange:Be,timeSelectionEnabled:Se?.timeSelectionEnabled,annotationsEnabled:Se?.annotationsEnabled}),"data-testid":ue.SettingsDropdown},n.createElement(L,{disabled:je,onChange:Ee,register:xe,timeRange:Be}))),n.createElement(E.PE,{orientation:pe?0:1,justify:pe?"flex-end":"flex-start",align:pe?"center":"normal"},n.createElement(E.Gy,{justify:"flex-end"},n.createElement(h.$n,{title:(0,a.t)("public-dashboard.config.revoke-public-URL-button-title","Revoke public URL"),onClick:ye,type:"button",disabled:je,"data-testid":ue.DeleteButton,variant:"destructive",fill:"outline"},n.createElement(a.x6,{i18nKey:"public-dashboard.config.revoke-public-URL-button"},"Revoke public URL")))))}function ge({publicDashboard:ye,unsupportedDatasources:Be}){const Me=(0,D.useSelector)(Ne=>Ne.dashboard).getModel(),ke=(0,g.z)(Me.getDefaultTime(),Me),Se=C.TP.hasPermission(D.AccessControlAction.DashboardsPublicWrite),We=(0,U.kD)(Me.getVariables()),[De]=(0,v.bN)(),pe=Ne=>{De({dashboard:Me,uid:ye.uid,dashboardUid:Me.uid}),Ne()};return n.createElement(y.$s,null,({showModal:Ne,hideModal:Le})=>n.createElement(be,{publicDashboard:ye,dashboard:Me,unsupportedDatasources:Be,timeRange:ke,showSaveChangesAlert:Se&&Me.hasUnsavedChanges(),hasTemplateVariables:We,onRevoke:()=>{b.c.revokePublicDashboardClicked(),Ne(P.m,{dashboardTitle:Me.title,onConfirm:()=>pe(Le),onDismiss:()=>{Ne(O.Zy,{dashboard:Me,onDismiss:Le,activeTab:S.wr.publicDashboard})}})}}))}const re=ye=>({configContainer:(0,t.css)`
    label: config container;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${ye.spacing(3)};
  `,fieldSpace:(0,t.css)`
    label: field space;
    width: 100%;
    margin-bottom: 0;
  `,timeRange:(0,t.css)({display:"inline-block"})})},22234:(Y,I,e)=>{"use strict";e.d(I,{M:()=>S,D:()=>O});var t=e(32196),n=e(96540),r=e(49785),s=e(13544),o=e(40845),m=e(55852),l=e(62930),i=e(44836),c=e(16233),u=e(72686),f=e(7758),d=e(31678),E=e(29304),h=e(12257),y=e(10872),a=e(72254),v=e(71415),g=e(84167),b=e(66864),P=e(10880);const C=s.Tp.pages.ShareDashboardModal.PublicDashboard,D=({disabled:x,register:A})=>{const R=(0,o.of)(T),B=[{type:"publicAcknowledgment",description:(0,i.t)("public-dashboard.acknowledgment-checkboxes.public-ack-desc","Your entire dashboard will be public*"),testId:C.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:(0,i.t)("public-dashboard.acknowledgment-checkboxes.public-ack-tooltip","Learn more about public dashboards")}},{type:"dataSourcesAcknowledgment",description:(0,i.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-desc","Publishing currently only works with a subset of data sources*"),testId:C.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:(0,i.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-tooltip","Learn more about public datasources")}},{type:"usageAcknowledgment",description:(0,i.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc","Making a dashboard public will cause queries to run each time it is viewed, which may increase costs*"),testId:C.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:(0,i.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc-tooltip","Learn more about query caching")}}];return n.createElement(n.Fragment,null,n.createElement("p",{className:R.title},n.createElement(i.x6,{i18nKey:"public-dashboard.acknowledgment-checkboxes.ack-title"},"Before you make the dashboard public, acknowledge the following:")),n.createElement(g.n,{disabled:x},n.createElement(b.gW,{spacing:"md"},B.map(U=>n.createElement(b.Gy,{key:U.type,spacing:"none",align:"center"},n.createElement(P.S,{...A(U.type,{required:!0}),label:U.description,"data-testid":U.testId}),n.createElement(m.z9,{variant:"primary",href:U.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:U.info.tooltip}))))))},T=x=>({title:(0,t.css)`
    font-weight: ${x.typography.fontWeightBold};
  `}),M=s.Tp.pages.ShareDashboardModal.PublicDashboard,O=({unsupportedDatasources:x=[],unsupportedTemplateVariables:A=!1,dashboard:R,hasError:B=!1})=>{const U=(0,o.of)(p),F=c.TP.hasPermission(d.AccessControlAction.DashboardsPublicWrite),[K,{isLoading:w,isError:L}]=(0,u.U9)(),V=()=>{K({dashboard:R,payload:{isEnabled:!0}}),f.c.generatePublicDashboardUrlClicked({})},{handleSubmit:N,register:z,formState:{isValid:J}}=(0,r.mN)({mode:"onChange"}),G=!F||w||L||B;return n.createElement("div",{className:U.container},n.createElement("div",null,n.createElement("p",{className:U.title},n.createElement(i.x6,{i18nKey:"public-dashboard.create-page.welcome-title"},"Welcome to public dashboards!")),n.createElement("p",{className:U.description},n.createElement(i.x6,{i18nKey:"public-dashboard.create-page.unsupported-features-desc"},"Currently, we don\u2019t support template variables or frontend data sources"))),!F&&n.createElement(E.t,{mode:"create"}),A&&n.createElement(y.D,null),x.length>0&&n.createElement(h.s,{unsupportedDataSources:x.join(", ")}),n.createElement("form",{onSubmit:N(V)},n.createElement("div",{className:U.checkboxes},n.createElement(D,{disabled:G,register:z})),n.createElement("div",{className:U.buttonContainer},n.createElement(m.$n,{type:"submit",disabled:G||!J,"data-testid":M.CreateButton},n.createElement(i.x6,{i18nKey:"public-dashboard.create-page.generate-public-url-button"},"Generate public URL"),w&&n.createElement(l.y,{className:U.loadingSpinner})))))};function S({hasError:x}){const R=(0,d.useSelector)(F=>F.dashboard).getModel(),{unsupportedDataSources:B}=(0,v.Z)(R),U=(0,a.kD)(R.getVariables());return n.createElement(O,{dashboard:R,unsupportedDatasources:B,unsupportedTemplateVariables:U,hasError:x})}const p=x=>({container:(0,t.css)`
    display: flex;
    flex-direction: column;
    gap: ${x.spacing(4)};
  `,title:(0,t.css)`
    font-size: ${x.typography.h4.fontSize};
    margin: ${x.spacing(0,0,2)};
  `,description:(0,t.css)`
    color: ${x.colors.text.secondary};
    margin-bottom: ${x.spacing(0)};
  `,checkboxes:(0,t.css)`
    margin: ${x.spacing(0,0,4)};
  `,buttonContainer:(0,t.css)`
    display: flex;
    justify-content: end;
  `,loadingSpinner:(0,t.css)`
    margin-left: ${x.spacing(1)};
  `})},29304:(Y,I,e)=>{"use strict";e.d(I,{t:()=>m});var t=e(96540),n=e(13544),r=e(42418),s=e(44836);const o=n.Tp.pages.ShareDashboardModal.PublicDashboard,m=({mode:l})=>t.createElement(r.F,{severity:"info",title:(0,s.t)("public-dashboard.modal-alerts.no-upsert-perm-alert-title","You don\u2019t have permission to {{ mode }} a public dashboard",{mode:l}),"data-testid":o.NoUpsertPermissionsWarningAlert,bottomSpacing:0},t.createElement(s.x6,{i18nKey:"public-dashboard.modal-alerts.no-upsert-perm-alert-desc"},"Contact your admin to get permission to ",{mode:l}," public dashboards"))},12257:(Y,I,e)=>{"use strict";e.d(I,{s:()=>u});var t=e(32196),n=e(46942),r=e.n(n),s=e(96540),o=e(13544),m=e(40845),l=e(42418),i=e(44836);const c=o.Tp.pages.ShareDashboardModal.PublicDashboard,u=({unsupportedDataSources:d})=>{const E=(0,m.of)(f);return s.createElement(l.F,{severity:"warning",title:(0,i.t)("public-dashboard.modal-alerts.unsupported-data-source-alert-title","Unsupported data sources"),"data-testid":c.UnsupportedDataSourcesWarningAlert,bottomSpacing:0},s.createElement("p",{className:E.unsupportedDataSourceDescription},s.createElement(i.x6,{i18nKey:"public-dashboard.modal-alerts.unsupported-data-source-alert-desc"},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",{unsupportedDataSources:d},".")),s.createElement("a",{href:"https://grafana.com/docs/grafana/next/dashboards/dashboard-public/",className:r()("text-link",E.unsupportedDataSourceDescription)},s.createElement(i.x6,{i18nKey:"public-dashboard.modal-alerts.unsupport-data-source-alert-readmore-link"},"Read more about supported data sources")))},f=d=>({unsupportedDataSourceDescription:(0,t.css)`
    color: ${d.colors.text.secondary};
    margin-bottom: ${d.spacing(1)};
  `})},10872:(Y,I,e)=>{"use strict";e.d(I,{D:()=>m});var t=e(96540),n=e(13544),r=e(42418),s=e(44836);const o=n.Tp.pages.ShareDashboardModal.PublicDashboard,m=()=>t.createElement(r.F,{severity:"warning",title:(0,s.t)("public-dashboard.modal-alerts.unsupported-template-variable-alert-title","Template variables are not supported"),"data-testid":o.TemplateVariablesWarningAlert,bottomSpacing:0},t.createElement(s.x6,{i18nKey:"public-dashboard.modal-alerts.unsupported-template-variable-alert-desc"},"This public dashboard may not work since it uses template variables"))},4785:(Y,I,e)=>{"use strict";e.d(I,{a:()=>d,b:()=>E});var t=e(32196),n=e(96540),r=e(40845),s=e(62930),o=e(72686),m=e(72254),l=e(31678),i=e(42930),c=e(59037),u=e(22234),f=e(71415);const d=()=>{const y=(0,r.of)(h);return n.createElement(i.G,{className:y.loadingContainer},n.createElement(n.Fragment,null,"Loading configuration",n.createElement(s.y,{size:"lg",className:y.spinner})))},E=y=>{const{data:a,isLoading:v,isError:g}=(0,o.Bs)(y.dashboard.uid),P=(0,l.useSelector)(D=>D.dashboard).getModel(),{unsupportedDataSources:C}=(0,f.Z)(P);return n.createElement(n.Fragment,null,v?n.createElement(d,null):(0,m.lI)(a)?n.createElement(c.K,{publicDashboard:a,unsupportedDatasources:C}):n.createElement(u.M,{hasError:g}))},h=y=>({loadingContainer:(0,t.css)({height:"280px",alignItems:"center",justifyContent:"center",gap:y.spacing(1)}),spinner:(0,t.css)({marginBottom:y.spacing(0)})})},72254:(Y,I,e)=>{"use strict";e.d(I,{Xo:()=>l,_A:()=>u,_l:()=>E,gN:()=>d,iR:()=>h,kD:()=>i,lI:()=>c,mL:()=>f});var t=e(26657),n=e(32264),r=e(2913),s=e(31193),o=e(22699),m=e(31204),l=(y=>(y.PUBLIC="public",y.EMAIL="email",y))(l||{});const i=y=>y.length>0,c=y=>y?.uid!==""&&y?.uid!==void 0,u=async y=>{let a=new Set;for(const v of y)for(const g of v.targets){const b=g?.datasource?.type;b&&(m.z.has(b)&&await(0,s.tR)().get(g.datasource)instanceof t.iy||a.add(b))}return Array.from(a).sort()},f=y=>`${(0,r.zj)().appUrl}public-dashboards/${y}`,d=(y,a)=>`/d/${y}/${a}?shareView=${o.wr.publicDashboard}`,E=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i,h=()=>!!n.$.featureToggles.publicDashboards&&n.$.publicDashboardsEnabled},31204:(Y,I,e)=>{"use strict";e.d(I,{z:()=>t});const t=new Set(["__expr__","aggregations-io-datasource","apache-iotdb-datasource","aquaqanalytics-kdbbackend-datasource","axiomhq-axiom-datasource","cloudwatch","cnos-cnosdb-datasource","datasource","dlopes7-appdynamics-datasource","dvelop-odata-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-falconlogscale-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-looker-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-sumologic-datasource","grafana-testdata-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdata-flightsql-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","manassehzhou-maxcompute-datasource","marcusolsson-csv-datasource","mssql","mysql","nagasudhirpulla-api-datasource","needleinajaystack-haystack-datasource","opentsdb","postgres","prometheus","quickwit-quickwit-datasource","redis-datasource","sentinelone-dataset-datasource","sneller-sneller-datasource","spiceai-spicexyz-datasource","stackdriver","tdengine-datasource","trino-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","ydbtech-ydb-datasource","yesoreyeram-infinity-datasource"])},71415:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>r});var t=e(96540),n=e(72254);const r=s=>{const[o,m]=(0,t.useState)([]);return(0,t.useEffect)(()=>{(async()=>await(0,n._A)(s.panels))().then(i=>{m(i)})},[s.panels]),{unsupportedDataSources:o}}},87895:(Y,I,e)=>{"use strict";e.d(I,{w:()=>o});var t=e(96540),n=e(88575),r=e(94354),s=e(44836);const o=({selectedTheme:m="current",onChange:l})=>{const i=[{label:(0,s.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,s.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,s.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(n.D,{label:(0,s.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(r.z,{options:i,value:m,onChange:l}))}},1702:(Y,I,e)=>{"use strict";e.d(I,{ShareModal:()=>t.Zy});var t=e(7686)},22699:(Y,I,e)=>{"use strict";e.d(I,{CF:()=>E,Lb:()=>d,P_:()=>c,XV:()=>i,Xe:()=>u,wr:()=>y});var t=e(65879),n=e(76885),r=e(71733),s=e(47232),o=e(32264),m=e(7030),l=e(74856);function i({useCurrentTimeRange:a,selectedTheme:v,panel:g,search:b=window.location.search,range:P=(0,l.jG)().timeRange(),orgId:C=o.$.bootData.user.orgId}){const D=new URLSearchParams(b),T=g?.timeFrom;if(T){const{from:M,to:O}=t.describeTextRange(T);D.set("from",M),D.set("to",O)}else D.set("from",String(P.from.valueOf())),D.set("to",String(P.to.valueOf()));return D.set("orgId",String(C)),a||(D.delete("from"),D.delete("to")),v!=="current"&&D.set("theme",v),g&&!D.has("editPanel")&&D.set("viewPanel",String(g.id)),D.delete("auth_token"),D.delete("shareView"),D}function c(){let a=window.location.href;const v=a.indexOf("?");return v!==-1&&(a=a.substring(0,v)),a}async function u(a,v,g,b){const P=c(),C=i({useCurrentTimeRange:a,selectedTheme:v,panel:g}),D=n.kM.appendQueryToUrl(P,C.toString());return b?await(0,m.f)(D):D}function f(a,v,g,b,P){const C=c(),D=i({useCurrentTimeRange:a,selectedTheme:g,panel:b,range:P});let T=C.replace(o.$.appSubUrl+"/dashboard/",o.$.appSubUrl+"/dashboard-solo/");T=T.replace(o.$.appSubUrl+"/d/",o.$.appSubUrl+"/d-solo/"),r.I.stripBaseFromUrl(C)==="/"&&(T=`${o.$.appUrl}d-solo/${v}`);const O=D.get("editPanel")??D.get("viewPanel")??"";return D.set("panelId",O),D.delete("editPanel"),D.delete("viewPanel"),n.kM.appendQueryToUrl(T,D.toString())}function d(a,v,g,b){let C=f(a,v,g,b).replace(o.$.appSubUrl+"/dashboard-solo/",o.$.appSubUrl+"/render/dashboard-solo/");return C=C.replace(o.$.appSubUrl+"/d-solo/",o.$.appSubUrl+"/render/d-solo/"),C+=`&width=${o.$.rendererDefaultImageWidth}&height=${o.$.rendererDefaultImageHeight}&scale=${o.$.rendererDefaultImageScale}`+h(),C}function E(a,v,g,b,P){return`<iframe src="${f(a,v,g,b,P)}" width="450" height="200" frameborder="0"></iframe>`}function h(){const a="&tz=UTC"+encodeURIComponent((0,s.KQ)().format("Z"));if(!window.Intl)return a;const v=window.Intl.DateTimeFormat();if(!v.resolvedOptions)return a;const g=v.resolvedOptions();return g.timeZone?"&tz="+encodeURIComponent(g.timeZone):a}const y={link:"link",snapshot:"snapshot",export:"export",embed:"embed",libraryPanel:"library_panel",pdf:"pdf",report:"report",publicDashboard:"public_dashboard"}},52424:(Y,I,e)=>{"use strict";e.d(I,{Zx:()=>P,aK:()=>y});var t=e(32196),n=e(96540),r=e(16817),s=e(80997),o=e(13544),m=e(40845),l=e(38138),i=e(40276),c=e(83122),u=e(14578),f=e(55852),d=e(27677),E=e(6923);function h({dashboardUID:C,link:D}){const T=(0,m.of)(b),M=a({dashboardUID:C,link:D});return!M||g.length===0?null:n.createElement(l.W,null,n.createElement("div",{className:T.dropdown},n.createElement(i.E,null,M.map((O,S)=>n.createElement(l.W.Item,{url:O.url,target:D.targetBlank?"_blank":void 0,key:`dashlinks-dropdown-item-${O.uid}-${S}`,label:O.title,testId:o.Tp.components.DashboardLinks.link,"aria-label":`${O.title} dashboard`})))))}const y=C=>{const{link:D,linkInfo:T,dashboardUID:M}=C,O=a(C),S=(0,m.of)(b);return D.asDropdown?n.createElement(c.m,{overlay:n.createElement(h,{link:D,dashboardUID:M})},n.createElement(P,{"data-placement":"bottom","data-toggle":"dropdown","aria-controls":"dropdown-list","aria-haspopup":"menu",fill:"outline",variant:"secondary","data-testid":o.Tp.components.DashboardLinks.dropDown},n.createElement(u.I,{"aria-hidden":!0,name:"bars",className:S.iconMargin}),n.createElement("span",null,T.title))):n.createElement(n.Fragment,null,O.length>0&&O.map((p,x)=>n.createElement(P,{key:`dashlinks-list-item-${p.uid}-${x}`,icon:"apps",variant:"secondary",fill:"outline",href:p.url,target:D.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":o.Tp.components.DashboardLinks.link},p.title)))},a=({link:C,dashboardUID:D})=>{const{tags:T}=C,M=(0,r.A)(()=>v(T),[T]);return M.value?g(D,C,M.value):[]};async function v(C,D={getBackendSrv:d.AI}){return await D.getBackendSrv().search({tag:C,limit:100})}function g(C,D,T,M={getLinkSrv:E.mQ,sanitize:s.aj,sanitizeUrl:s.Jf}){return T.filter(O=>O.uid!==C).map(O=>{const S=O.uid,p=M.sanitize(O.title),x=M.getLinkSrv().getLinkUrl({...D,url:O.url}),A=M.sanitizeUrl(x);return{uid:S,title:p,url:A}})}function b(C){return{iconMargin:(0,t.css)({marginRight:C.spacing(.5)}),dropdown:(0,t.css)({maxWidth:"max(30vw, 300px)",maxHeight:"70vh",overflowY:"auto"}),button:(0,t.css)({color:C.colors.text.primary}),dashButton:(0,t.css)({fontSize:C.typography.bodySmall.fontSize,paddingLeft:C.spacing(1),paddingRight:C.spacing(1)})}}const P=n.forwardRef(({className:C,...D},T)=>{const M=(0,m.of)(b),O=D.href?f.z9:f.$n;return n.createElement(O,{...D,variant:"secondary",fill:"outline",className:(0,t.cx)(C,M.dashButton),ref:T})});P.displayName="DashboardLinkButton"},57650:(Y,I,e)=>{"use strict";e.d(I,{A:()=>F});var t=e(96540),n=e(97497),r=e(42941),s=e(1173),o=e(52622),m=e(13544),l=e(14110),i=e(96374),c=e(10343),u=e(7788),f=e(2913),d=e(10803),E=e(32196),h=e(69862),y=e(85200),a=e(2514),v=e(72574),g=e(40845),b=e(87978),P=e(24022),C=e(14578);const D=({debugMode:K,index:w,data:L,uiConfig:V,configs:N,onChange:z,toggleShowDebug:J})=>{const G=(0,g.of)(T),[H,q]=(0,t.useState)([]),[le,me]=(0,t.useState)([]),k=(0,t.useMemo)(()=>N[w],[N,w]);(0,t.useEffect)(()=>{const X=N[w].transformation,j=X.filter?.options?(0,y.Dq)(X.filter):void 0,ne=N.slice(0,w).map(be=>be.transformation),te=N.slice(w,w+1).map(be=>be.transformation),oe={interpolate:be=>(0,v.w)().replace(be)},ie=(0,a.m)(ne,L,oe).subscribe(be=>{j&&(be=L.filter(ge=>j(ge))),q(be)}),ue=(0,a.m)(ne,L,oe).pipe((0,h.Z)(be=>(0,a.m)(te,be,oe))).subscribe(me);return function(){ie.unsubscribe(),ue.unsubscribe()}},[w,L,N]);const ee=(0,t.useMemo)(()=>t.createElement(V.editor,{options:{...V.transformation.defaultOptions,...k.transformation.options},input:H,onChange:X=>{z(w,{...k.transformation,options:X})}}),[V.editor,V.transformation.defaultOptions,k.transformation,H,z,w]);return t.createElement("div",{className:G.editor,"data-testid":m.Tp.components.TransformTab.transformationEditor(V.name)},ee,K&&t.createElement(b._,{title:"Debug transformation",subtitle:V.name,onClose:J},t.createElement("div",{className:G.debugWrapper,"data-testid":m.Tp.components.TransformTab.transformationEditorDebugger(V.name)},t.createElement("div",{className:G.debug},t.createElement("div",{className:G.debugTitle},"Input data"),t.createElement("div",{className:G.debugJson},t.createElement(P.B,{json:H}))),t.createElement("div",{className:G.debugSeparator},t.createElement(C.I,{name:"arrow-right"})),t.createElement("div",{className:G.debug},t.createElement("div",{className:G.debugTitle},"Output data"),t.createElement("div",{className:G.debugJson},le&&t.createElement(P.B,{json:le}))))))},T=K=>({title:(0,E.css)`
      display: flex;
      padding: 4px 8px 4px 8px;
      position: relative;
      height: 35px;
      border-radius: 4px 4px 0 0;
      flex-wrap: nowrap;
      justify-content: space-between;
      align-items: center;
    `,name:(0,E.css)`
      font-weight: ${K.typography.fontWeightMedium};
      color: ${K.colors.primary.text};
    `,iconRow:(0,E.css)`
      display: flex;
    `,icon:(0,E.css)`
      background: transparent;
      border: none;
      box-shadow: none;
      cursor: pointer;
      color: ${K.colors.text.secondary};
      margin-left: ${K.spacing(1)};
      &:hover {
        color: ${K.colors.text};
      }
    `,editor:(0,E.css)``,debugWrapper:(0,E.css)`
      display: flex;
      flex-direction: row;
    `,debugSeparator:(0,E.css)`
      width: 48px;
      min-height: 300px;
      display: flex;
      align-items: center;
      align-self: stretch;
      justify-content: center;
      margin: 0 ${K.spacing(.5)};
      color: ${K.colors.primary.text};
    `,debugTitle:(0,E.css)`
      padding: ${K.spacing(1)} ${K.spacing(.25)};
      font-family: ${K.typography.fontFamilyMonospace};
      font-size: ${K.typography.bodySmall.fontSize};
      color: ${K.colors.text};
      border-bottom: 1px solid ${K.colors.border.weak};
      flex-grow: 0;
      flex-shrink: 1;
    `,debug:(0,E.css)`
      margin-top: ${K.spacing(1)};
      padding: 0 ${K.spacing(1,1,1)};
      border: 1px solid ${K.colors.border.weak};
      background: ${K.isLight?K.v1.palette.white:K.v1.palette.gray05};
      border-radius: ${K.shape.radius.default};
      width: 100%;
      min-height: 300px;
      display: flex;
      flex-direction: column;
      align-self: stretch;
    `,debugJson:(0,E.css)`
      flex-grow: 1;
      height: 100%;
      overflow: hidden;
      padding: ${K.spacing(.5)};
    `});var M=e(22214),O=e(91847);const S=({isOpen:K,onCloseClick:w,transformer:L})=>{const{transformation:{name:V},help:N}=L,z=N||(0,O.$n)(),J=t.createElement(b._,{title:V,subtitle:"Transformation help",onClose:()=>w(!1)},t.createElement(M.j,{markdown:z,styleOverrides:{borderTop:"2px solid"}}));return K?J:null};var p=e(88575),x=e(88323),A=e(19743);const R=({index:K,data:w,config:L,onChange:V})=>{const N=(0,g.of)(B),z=(0,t.useMemo)(()=>({context:{data:w.series},showTopic:!0,showFilter:L.topic!==o.QR.Annotations,source:[{value:o.QR.Series,label:"Query results"},{value:o.QR.Annotations,label:"Annotation data"}]}),[w,L.topic]);return t.createElement("div",{className:N.wrapper},t.createElement(p.D,{label:"Apply transformation to"},t.createElement(t.Fragment,null,z.showTopic&&t.createElement(x.l6,{isClearable:!0,options:z.source,value:z.source.find(J=>J.value===L.topic),placeholder:z.source[0].label,className:N.padded,onChange:J=>{V(K,{...L,topic:J?.value})}}),z.showFilter&&t.createElement(A.x,{value:L.filter,context:z.context,item:{},onChange:J=>V(K,{...L,filter:J})}))))},B=K=>{const w=K.shape.radius.default;return{wrapper:(0,E.css)({padding:K.spacing(2),border:`2px solid ${K.colors.background.secondary}`,borderTop:"none",borderRadius:`0 0 ${w} ${w}`,position:"relative",top:"-4px"}),padded:(0,E.css)({marginBottom:K.spacing(1)})}},U=({onRemove:K,index:w,id:L,data:V,configs:N,uiConfig:z,onChange:J})=>{const[G,H]=(0,r.A)(!1),[q,le]=(0,r.A)(!1),[me,k]=(0,r.A)(!1),ee=!!N[w].transformation.disabled,X=N[w].transformation.topic,j=N[w].transformation.filter!=null||X!=null,ne=j||V.series.length>1||(V.annotations?.length??0)>0,te=(0,t.useCallback)(be=>{const ge=N[be].transformation;J(be,{...ge,disabled:ge.disabled?void 0:!0})},[J,N]),oe=(0,t.useCallback)(()=>{let be={...N[w].transformation};be.filter?delete be.filter:be.filter={id:s.jR.byRefId,options:""},J(w,be)},[J,w,N]),ie=(0,t.useCallback)((be,ge,re)=>ye=>{let Be="panel_editor_tabs_transformations_toggle";f.Ay.featureToggles.transformationsRedesign&&(Be="transformations_redesign_"+Be),(0,l.rR)(Be,{action:re?"off":"on",toggleId:ge,transformationId:N[w].transformation.id}),be(ye)},[N,w]),ue=()=>t.createElement(t.Fragment,null,z.state&&t.createElement(d.p,{state:z.state}),t.createElement(c.A,{title:"Show transform help",icon:"info-circle",onClick:ie(k,"help",me),active:me}),ne&&t.createElement(c.A,{title:"Filter",icon:"filter",onClick:ie(oe,"filter",j),active:j}),t.createElement(c.A,{title:"Debug",icon:"bug",onClick:ie(le,"debug",q),active:q}),t.createElement(c.A,{title:"Disable transformation",icon:ee?"eye-slash":"eye",onClick:ie(()=>te(w),"disabled",ee),active:ee,dataTestId:m.Tp.components.Transforms.disableTransformationButton}),t.createElement(c.q,{title:"Remove",icon:"trash-alt",onClick:()=>f.Ay.featureToggles.transformationsRedesign?H(!0):K(w)}),f.Ay.featureToggles.transformationsRedesign&&t.createElement(i.u,{isOpen:G,title:`Delete ${z.name}?`,body:"Note that removing one transformation may break others. If there is only a single transformation, you will go back to the main selection screen.",confirmText:"Delete",onConfirm:()=>{H(!1),K(w)},onDismiss:()=>H(!1)}));return t.createElement(t.Fragment,null,t.createElement(u.u,{id:L,index:w,title:`${w+1} - ${z.name}`,draggable:!0,actions:ue,disabled:ee,expanderMessages:{close:"Collapse transformation row",open:"Expand transformation row"}},j&&t.createElement(R,{index:w,config:N[w].transformation,data:V,onChange:J}),t.createElement(D,{debugMode:q,index:w,data:X===o.QR.Annotations?V.annotations??[]:V.series,configs:N,uiConfig:z,onChange:J,toggleShowDebug:le})),t.createElement(S,{transformer:z,isOpen:me,onCloseClick:k}))},F=({data:K,onChange:w,onRemove:L,configs:V})=>t.createElement(t.Fragment,null,V.map((N,z)=>{const J=n.h.getIfExists(N.transformation.id);return J?t.createElement(U,{index:z,id:`${N.id}`,key:`${N.id}`,data:K,configs:V,uiConfig:J,onRemove:L,onChange:w}):null}))},21427:(Y,I,e)=>{"use strict";e.d(I,{R:()=>P});var t=e(32196),n=e(96540),r=e(81010),s=e(18282),o=e(97497),m=e(13544),l=e(40845),i=e(87978),c=e(10354),u=e(15292),f=e(92174),d=e(10860),E=e(29158),h=e(2913),y=e(10803),a=e(94397);const b=[["viewAll","View all"],...Object.entries(a.eJ)];function P(p){const x=(0,l.of)(C),{suffix:A,xforms:R,search:B,onSearchChange:U,onSearchKeyDown:F,showIllustrations:K,onTransformationAdd:w,selectedFilter:L,data:V,onClose:N,onShowIllustrationsChange:z,onSelectedFilterChange:J}=p,G=(0,n.useCallback)(H=>{H?.click()},[]);return n.createElement(i._,{size:"md",onClose:()=>{N&&N()},title:"Add another transformation"},n.createElement("div",{className:x.searchWrapper},n.createElement(c.p,{"data-testid":m.Tp.components.Transforms.searchInput,className:x.searchInput,value:B??"",placeholder:"Search for transformation",onChange:U,onKeyDown:F,suffix:A,ref:G}),n.createElement("div",{className:x.showImages},n.createElement("span",{className:x.illustationSwitchLabel},"Show images")," ",n.createElement(u.d,{value:K,onChange:()=>z&&z(!K)}))),n.createElement("div",{className:x.filterWrapper},b.map(([H,q])=>n.createElement(f.m,{key:H,onClick:()=>J&&J(H),label:q,selected:L===H}))),n.createElement(D,{showIllustrations:K,transformations:R,data:V,onClick:H=>{w({value:H})}}))}function C(p){return{showImages:(0,t.css)({flexBasis:"0",display:"flex",gap:"8px",alignItems:"center"}),pickerInformationLine:(0,t.css)({fontSize:"16px",marginBottom:`${p.spacing(2)}`}),pickerInformationLineHighlight:(0,t.css)({verticalAlign:"middle"}),searchWrapper:(0,t.css)({display:"flex",flexWrap:"wrap",columnGap:"27px",rowGap:"16px",width:"100%"}),searchInput:(0,t.css)({flexGrow:"1",width:"initial"}),illustationSwitchLabel:(0,t.css)({whiteSpace:"nowrap"}),filterWrapper:(0,t.css)({padding:`${p.spacing(1)} 0`,display:"flex",flexWrap:"wrap",rowGap:`${p.spacing(1)}`,columnGap:`${p.spacing(.5)}`})}}function D({showIllustrations:p,transformations:x,onClick:A,data:R}){const B=(0,l.of)(T);return n.createElement("div",{className:B.grid},x.map(U=>{let F=r.M.Applicable;U.transformation.isApplicable!==void 0&&(F=U.transformation.isApplicable(R));const K=F>0;let w=null;U.transformation.isApplicableDescription!==void 0&&(typeof U.transformation.isApplicableDescription=="function"?w=U.transformation.isApplicableDescription(R):w=U.transformation.isApplicableDescription);let L=B.newCard;return K||(L=(0,t.cx)(B.newCard,B.cardDisabled)),n.createElement(d.Z,{className:L,"data-testid":m.Tp.components.TransformTab.newTransform(U.name),onClick:()=>A(U.id),key:U.id},n.createElement(d.Z.Heading,{className:B.heading},n.createElement("span",null,U.name),n.createElement("span",{className:B.pluginStateInfoWrapper},n.createElement(y.p,{state:U.state}))),n.createElement(d.Z.Description,{className:B.description},n.createElement("span",null,S(U.id)),p&&n.createElement("span",null,n.createElement("img",{className:B.image,src:M(U.id,!K),alt:U.name})),!K&&w!==null&&n.createElement(E.K,{className:B.cardApplicableInfo,name:"info-circle",tooltip:w})))}))}function T(p){return{heading:(0,t.css)`
            font-weight: 400,
            > button: {
                width: '100%',
                display: 'flex',
                justify-content: 'space-between',
                align-items: 'center',
                flex-wrap: 'no-wrap',
        },`,description:(0,t.css)({fontSize:"12px",display:"flex",flexDirection:"column",justifyContent:"space-between"}),image:(0,t.css)({display:"block",maxEidth:"100%`",marginTop:`${p.spacing(2)}`}),grid:(0,t.css)({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gridAutoRows:"1fr",gap:`${p.spacing(2)} ${p.spacing(1)}`,width:"100%"}),cardDisabled:(0,t.css)({backgroundColor:"rgb(204, 204, 220, 0.045)",color:`${p.colors.text.disabled} !important`}),cardApplicableInfo:(0,t.css)({position:"absolute",bottom:`${p.spacing(1)}`,right:`${p.spacing(1)}`}),newCard:(0,t.css)({gridTemplateRows:"min-content 0 1fr 0"}),pluginStateInfoWrapper:(0,t.css)({marginLeft:"5px"})}}const M=(p,x)=>{let A=null;return x?A="disabled":A=h.Ay.theme2.isDark?"dark":"light",`public/img/transformations/${A}/${p}.svg`},O={[s.F.concatenate]:"Combine all fields into a single frame.",[s.F.configFromData]:"Set unit, min, max and more.",[s.F.fieldLookup]:"Use a field value to lookup countries, states, or airports.",[s.F.filterFieldsByName]:"Remove parts of the query results using a regex pattern.",[s.F.filterByRefId]:"Remove rows from the data based on origin query",[s.F.filterByValue]:"Remove rows from the query results using user-defined filters.",[s.F.groupBy]:"Group data by a field value and create aggregate data.",[s.F.groupingToMatrix]:"Summarize and reorganize data based on three fields.",[s.F.joinByField]:"Combine rows from 2+ tables, based on a related field.",[s.F.labelsToFields]:"Group series by time and return labels or tags as fields.",[s.F.merge]:"Merge multiple series. Values will be combined into one row.",[s.F.organize]:"Re-order, hide, or rename fields.",[s.F.partitionByValues]:"Split a one-frame dataset into multiple series.",[s.F.prepareTimeSeries]:"Stretch data frames from the wide format into the long format.",[s.F.reduce]:"Reduce all rows or data points to a single value (ex. max, mean).",[s.F.renameByRegex]:"Rename parts of the query results using a regular expression and replacement pattern.",[s.F.seriesToRows]:"Merge multiple series. Return time, metric and values as a row."},S=p=>O[p]||o.h.getIfExists(p)?.description||""},66879:(Y,I,e)=>{"use strict";e.d(I,{o:()=>w,e:()=>F});var t=e(96540),n=e(55244),r=e(97497),s=e(13544),o=e(14110),m=e(29158),l=e(55852),i=e(96374),c=e(19727),u=e(40276),f=e(66864),d=e(40845),E=e(2913),h=e(79280),y=e(12131),a=e(32696);function v({message:L}){const V=(0,t.useCallback)(()=>{y.Ny.partial({tab:a.M8.Query})},[]);return t.createElement(f.PE,{justify:"center",style:{marginTop:"100px"}},t.createElement(f.gW,{spacing:"md"},t.createElement("h2",null,L),t.createElement("div",null,t.createElement(l.$n,{size:"md",variant:"secondary",icon:"arrow-left",onClick:V},"Go back to Queries"))))}var g=e(57650),b=e(32196),P=e(87885),C=e(42418),D=e(10354),T=e(10860),M=e(61680);const O={[P.f.Transformations]:"https://grafana.com/docs/grafana/latest/panels/transformations",[P.f.FieldConfig]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/",[P.f.FieldConfigOverrides]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/#override-a-field"},S=L=>O[L];var p=e(10803);const x="dashboard.components.TransformationEditor.featureInfoBox.isDismissed";function A(L){const{noTransforms:V,search:N,xforms:z,onSearchChange:J,onSearchKeyDown:G,onTransformationAdd:H,suffix:q}=L;return t.createElement(f.gW,null,V&&t.createElement(f.mc,{grow:1},t.createElement(M.b,{storageKey:x,defaultValue:!1},(le,me)=>le?null:t.createElement(C.F,{title:"Transformations",severity:"info",onRemove:()=>{me(!0)}},t.createElement("p",null,"Transformations allow you to join, calculate, re-order, hide, and rename your query results before they are visualized. ",t.createElement("br",null),"Many transforms are not suitable if you're using the Graph visualization, as it currently only supports time series data. ",t.createElement("br",null),"It can help to switch to the Table visualization to understand what a transformation is doing."," "),t.createElement("a",{href:S(P.f.Transformations),className:"external-link",target:"_blank",rel:"noreferrer"},"Read more")))),t.createElement(D.p,{"data-testid":s.Tp.components.Transforms.searchInput,value:N??"",autoFocus:!V,placeholder:"Search for transformation",onChange:J,onKeyDown:G,suffix:q}),z.map(le=>t.createElement(R,{key:le.name,transform:le,onClick:()=>{H({value:le.id})}})))}function R({transform:L,onClick:V}){const N=(0,d.of)(B);return t.createElement(T.Z,{className:N.card,"data-testid":s.Tp.components.TransformTab.newTransform(L.name),onClick:V},t.createElement(T.Z.Heading,null,L.name),t.createElement(T.Z.Description,null,L.description),L.state&&t.createElement(T.Z.Tags,null,t.createElement(p.p,{state:L.state})))}function B(L){return{card:(0,b.css)({margin:"0",padding:`${L.spacing(1)}`})}}var U=e(21427);const F="viewAll";class K extends t.PureComponent{constructor(V){super(V),this.onSearchChange=J=>{this.setState({search:J.target.value})},this.onSearchKeyDown=J=>{if(J.key==="Enter"){const{search:G}=this.state;if(G){const H=G.toLowerCase(),q=r.h.list().filter(le=>(le.name+le.description).toLowerCase().indexOf(H)>=0);q.length>0&&this.onTransformationAdd({value:q[0].id})}}else J.keyCode===27&&(this.setState({search:"",showPicker:!1}),J.stopPropagation())},this.getTransformationNextId=J=>{const{transformations:G}=this.state;let H=0;const q=G.filter(le=>le.id.startsWith(J)).map(le=>le.id);return q.length!==0&&(H=Math.max(...q.map(le=>parseInt(le.match(/\d+/)[0],10)))+1),`${J}-${H}`},this.onTransformationAdd=J=>{let G="panel_editor_tabs_transformations_management";E.Ay.featureToggles.transformationsRedesign&&(G="transformations_redesign_"+G),(0,o.rR)(G,{action:"add",transformationId:J.value});const{transformations:H}=this.state,q=this.getTransformationNextId(J.value);this.setState({search:"",showPicker:!1}),this.onChange([...H,{id:q,transformation:{id:J.value,options:{}}}])},this.onTransformationChange=(J,G)=>{const{transformations:H}=this.state,q=Array.from(H);let le="panel_editor_tabs_transformations_management";E.Ay.featureToggles.transformationsRedesign&&(le="transformations_redesign_"+le),(0,o.rR)(le,{action:"change",transformationId:q[J].transformation.id}),q[J].transformation=G,this.onChange(q)},this.onTransformationRemove=J=>{const{transformations:G}=this.state,H=Array.from(G);let q="panel_editor_tabs_transformations_management";E.Ay.featureToggles.transformationsRedesign&&(q="transformations_redesign_"+q),(0,o.rR)(q,{action:"remove",transformationId:H[J].transformation.id}),H.splice(J,1),this.onChange(H)},this.onTransformationRemoveAll=()=>{this.onChange([]),this.setState({showRemoveAllModal:!1})},this.onDragEnd=J=>{const{transformations:G}=this.state;if(!J||!J.destination)return;const H=J.source.index,q=J.destination.index;if(H===q)return;const le=Array.from(G),[me]=le.splice(H,1);le.splice(q,0,me),this.onChange(le)},this.renderEmptyMessage=()=>t.createElement(h.p,{onShowPicker:()=>{this.setState({showPicker:!0})}}),this.renderTransformationEditors=()=>{const{data:J,transformations:G}=this.state;return t.createElement(n.JY,{onDragEnd:this.onDragEnd},t.createElement(n.gL,{droppableId:"transformations-list",direction:"vertical"},H=>t.createElement("div",{ref:H.innerRef,...H.droppableProps},t.createElement(g.A,{configs:G,data:J,onRemove:this.onTransformationRemove,onChange:this.onTransformationChange}),H.placeholder)))};const N=V.panel.transformations||[],z=this.buildTransformationIds(N);this.state={transformations:N.map((J,G)=>({transformation:J,id:z[G]})),data:{series:[]},search:"",selectedFilter:F,showIllustrations:!0}}buildTransformationIds(V){const N={},z=[];for(let J=0;J<V.length;J++){const G=V[J];N[G.id]===void 0?N[G.id]=0:N[G.id]+=1,z.push(`${V[J].id}-${N[V[J].id]}`)}return z}componentDidMount(){this.subscription=this.props.panel.getQueryRunner().getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:V=>this.setState({data:V})})}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(V,N){if(E.Ay.featureToggles.transformationsRedesign){const J=!(N.transformations.length>0)||N.showPicker,H=!(this.state.transformations.length>0)||this.state.showPicker;if(J!==H){const q=Math.random()/2;this.setState({scrollTop:H?q:Number.MAX_SAFE_INTEGER})}}}onChange(V){this.setState({transformations:V}),this.props.panel.setTransformations(V.map(N=>N.transformation))}renderTransformsPicker(){let{showPicker:V}=this.state;const{transformations:N,search:z}=this.state,{transformationsRedesign:J}=E.Ay.featureToggles,G=!N?.length,H=N.length>0;let q=null,le=r.h.list().sort((X,j)=>X.name>j.name?1:j.name>X.name?-1:0);if(!J&&G&&(V=!0),this.state.selectedFilter!==F&&(le=le.filter(X=>X.categories&&this.state.selectedFilter&&X.categories.has(this.state.selectedFilter))),z){const X=z.toLowerCase(),j=le.filter(ne=>(ne.name+ne.description).toLowerCase().indexOf(X)>=0);q=t.createElement(t.Fragment,null,j.length," / ",le.length," \xA0\xA0",t.createElement(m.K,{name:"times",onClick:()=>{this.setState({search:""})},tooltip:"Clear search"})),le=j}!q&&V&&!G&&(q=t.createElement(m.K,{name:"times",onClick:()=>{this.setState({showPicker:!1})},tooltip:"Close picker"}));let me=null,k=null;J?(me=t.createElement(U.R,{noTransforms:G,search:z,suffix:q,xforms:le,onClose:()=>this.setState({showPicker:!1}),onSelectedFilterChange:X=>this.setState({selectedFilter:X}),onShowIllustrationsChange:X=>this.setState({showIllustrations:X}),onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd,data:this.state.data.series,selectedFilter:this.state.selectedFilter,showIllustrations:this.state.showIllustrations}),k=t.createElement(t.Fragment,null,t.createElement(l.$n,{icon:"times",variant:"secondary",onClick:()=>this.setState({showRemoveAllModal:!0}),style:{marginLeft:this.props.theme.spacing.md}},"Delete all transformations"),t.createElement(i.u,{isOpen:!!this.state.showRemoveAllModal,title:"Delete all transformations?",body:"By deleting all transformations, you will go back to the main selection screen.",confirmText:"Delete all",onConfirm:()=>this.onTransformationRemoveAll(),onDismiss:()=>this.setState({showRemoveAllModal:!1})}))):me=t.createElement(A,{noTransforms:G,search:z,suffix:q,xforms:le,onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd});const ee=t.createElement(c.e,null,t.createElement(l.$n,{icon:"plus",variant:"secondary",onClick:()=>{this.setState({showPicker:!0})},"data-testid":s.Tp.components.Transforms.addTransformationButton},"Add another transformation"),k);return t.createElement(t.Fragment,null,V&&me,J&&H&&ee||!J&&!V&&H&&ee)}render(){const{panel:{alert:V}}=this.props,{transformations:N}=this.state,z=N.length>0;if(V){const J=z?"Transformations can't be used on a panel with alerts":"Transformations can't be used on a panel with existing alerts";return t.createElement(v,{message:J})}return t.createElement(u.E,{scrollTop:this.state.scrollTop,autoHeightMin:"100%"},t.createElement(f.mc,{padding:"lg"},t.createElement("div",{"data-testid":s.Tp.components.TransformTab.content},!z&&E.Ay.featureToggles.transformationsRedesign&&this.renderEmptyMessage(),z&&this.renderTransformationEditors(),this.renderTransformsPicker())))}}const w=(0,d.SL)(K)},68064:(Y,I,e)=>{"use strict";e.d(I,{A:()=>b});var t=e(32196),n=e(96540),r=e(13544),s=e(12131),o=e(32264),m=e(40845),l=e(67061),i=e(90613),c=e(94753),u=e(55852),f=e(44836),d=e(36974),E=e(19293),h=e(63117),y=e(7758),a=e(31678),v=e(28601);const b=({dashboard:C,canCreate:D})=>{const T=(0,m.of)(P),M=(0,a.useDispatch)(),O=(0,a.useSelector)(x=>x.dashboard.initialDatasource),S=()=>{let x;if(C instanceof h.H$){const A=C.onCreateNewPanel();C.setState({editPanel:(0,E.L)(A,!0)}),s.Ny.partial({firstPanel:!0})}else x=(0,d.OK)(C,O),M((0,v.Ub)(void 0)),s.Ny.partial({editPanel:x,firstPanel:!0});y.c.emptyDashboardButtonClicked({item:"add_visualization"})},p=()=>{y.c.emptyDashboardButtonClicked({item:"import_from_library"}),C instanceof h.H$?C.onShowAddLibraryPanelDrawer():(0,d.s3)(C)};return n.createElement(l.B,{alignItems:"center",justifyContent:"center"},n.createElement("div",{className:T.wrapper},n.createElement(l.B,{alignItems:"stretch",justifyContent:"center",gap:4,direction:"column"},n.createElement(i.a,{borderColor:"strong",borderStyle:"dashed",padding:4},n.createElement(l.B,{direction:"column",alignItems:"center",gap:2},n.createElement(c.E,{element:"h1",textAlignment:"center",weight:"medium"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-visualization-header"},"Start your new dashboard by adding a visualization")),n.createElement(i.a,{marginBottom:2,paddingX:4},n.createElement(c.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-visualization-body"},"Select a data source and then query and visualize your data with charts, stats and tables or create lists, markdowns and other widgets."))),n.createElement(u.$n,{size:"lg",icon:"plus","data-testid":r.Tp.pages.AddDashboard.itemButton("Create new panel button"),onClick:S,disabled:!D},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-visualization-button"},"Add visualization")))),n.createElement(l.B,{direction:{xs:"column",md:"row"},wrap:"wrap",gap:4},o.$.featureToggles.vizAndWidgetSplit&&n.createElement(i.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1},n.createElement(l.B,{direction:"column",alignItems:"center",gap:1},n.createElement(c.E,{element:"h3",textAlignment:"center",weight:"medium"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-widget-header"},"Add a widget")),n.createElement(i.a,{marginBottom:2},n.createElement(c.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-widget-body"},"Create lists, markdowns and other widgets"))),n.createElement(u.$n,{icon:"plus",fill:"outline","data-testid":r.Tp.pages.AddDashboard.itemButton("Create new widget button"),onClick:()=>{y.c.emptyDashboardButtonClicked({item:"add_widget"}),s.Ny.partial({addWidget:!0})},disabled:!D},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-widget-button"},"Add widget")))),n.createElement(i.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1},n.createElement(l.B,{direction:"column",alignItems:"center",gap:1},n.createElement(c.E,{element:"h3",textAlignment:"center",weight:"medium"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-library-panel-header"},"Import panel")),n.createElement(i.a,{marginBottom:2},n.createElement(c.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-library-panel-body"},"Add visualizations that are shared with other dashboards."))),n.createElement(u.$n,{icon:"plus",fill:"outline","data-testid":r.Tp.pages.AddDashboard.itemButton("Add a panel from the panel library button"),onClick:p,disabled:!D},n.createElement(f.x6,{i18nKey:"dashboard.empty.add-library-panel-button"},"Add library panel")))),n.createElement(i.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1},n.createElement(l.B,{direction:"column",alignItems:"center",gap:1},n.createElement(c.E,{element:"h3",textAlignment:"center",weight:"medium"},n.createElement(f.x6,{i18nKey:"dashboard.empty.import-a-dashboard-header"},"Import a dashboard")),n.createElement(i.a,{marginBottom:2},n.createElement(c.E,{element:"p",textAlignment:"center",color:"secondary"},n.createElement(f.x6,{i18nKey:"dashboard.empty.import-a-dashboard-body"},"Import dashboards from files or",n.createElement("a",{href:"https://grafana.com/grafana/dashboards/"},"grafana.com"),"."))),n.createElement(u.$n,{icon:"upload",fill:"outline","data-testid":r.Tp.pages.AddDashboard.itemButton("Import dashboard button"),onClick:()=>{y.c.emptyDashboardButtonClicked({item:"import_dashboard"}),(0,d.VF)()},disabled:!D},n.createElement(f.x6,{i18nKey:"dashboard.empty.import-dashboard-button"},"Import dashboard"))))))))};function P(C){return{wrapper:(0,t.css)({label:"dashboard-empty-wrapper",flexDirection:"column",maxWidth:"890px",gap:C.spacing.gridSize*4,paddingTop:C.spacing(2),[C.breakpoints.up("sm")]:{paddingTop:C.spacing(12)}})}}},2038:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>f});var t=e(96540),n=e(12131),r=e(32196),s=e(40845),o=e(27746),m=e(14578),l=e(56034),i=e(16797);const c=({notice:d,onClick:E})=>{const h=(0,s.of)(u),y=d.severity==="error"||d.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return d.inspect&&E?t.createElement(o.I,{className:h.notice,icon:y,iconSize:"md",key:d.severity,tooltip:d.text,onClick:a=>E(a,d.inspect)}):d.link?t.createElement("a",{className:h.notice,"aria-label":d.text,href:d.link,target:"_blank",rel:"noreferrer"},t.createElement(m.I,{name:y,style:{marginRight:"8px"},size:"md"})):t.createElement(l.m,{key:d.severity,content:d.text},t.createElement("span",{className:h.iconTooltip},t.createElement(m.I,{name:y,size:"md"})))},u=d=>({notice:(0,r.css)({background:"inherit",border:"none",borderRadius:d.shape.radius.default}),iconTooltip:(0,r.css)({color:`${d.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${d.shape.radius.default}`,padding:`${d.spacing(0,1)}`,height:` ${d.spacing(d.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,i.getFocusStyles)(d),zIndex:1},"&: focus:not(:focus-visible)":(0,i.getMouseFocusStyles)(d),"&:hover ":{boxShadow:`${d.shadows.z1}`,color:`${d.colors.text.primary}`,background:`${d.colors.background.secondary}`}})}),f=({frames:d,panelId:E})=>{const h=(0,t.useCallback)((a,v)=>{a.stopPropagation(),n.Ny.partial({inspect:E,inspectTab:v})},[E]),y={};for(const a of d)if(!(!a.meta||!a.meta.notices))for(const v of a.meta.notices)y[v.severity]=v;return t.createElement(t.Fragment,null,Object.values(y).map(a=>t.createElement(c,{notice:a,onClick:h,key:a.severity})))}},91126:(Y,I,e)=>{"use strict";e.d(I,{M:()=>u});var t=e(37055),n=e(58972),r=e(1173),s=e(11261),o=e(28240),m=e(85200),l=e(88895);const i="hideSeriesFrom",c=(0,t.ZW)(i);function u(v,g,b,P){const{overrides:C}=b,D=v,T=C.findIndex(c);if(T<0){if(g===l.B.ToggleSelection){const A=f([D,...a(C,P)]);return{...b,overrides:[...b.overrides,A]}}const p=y(P,D),x=f(p);return{...b,overrides:[...b.overrides,x]}}const M=Array.from(C),[O]=M.splice(T,1);if(g===l.B.ToggleSelection){let p=E(O);const x=a(M,P);if(x.length>0&&(p=p.filter(R=>x.indexOf(R)<0)),p[0]===D&&p.length===1)return{...b,overrides:M};const A=f([D,...x]);return{...b,overrides:[...M,A]}}const S=d(O,D);return h(S,P)?{...b,overrides:M}:{...b,overrides:[...M,S]}}function f(v,g=n.PP.exclude,b){return b=b??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:i,matcher:{id:r.Ct.byNames,options:{mode:g,names:v,prefix:g===n.PP.exclude?"All except:":void 0,readOnly:!0}},properties:[{...b,value:{viz:!0,legend:!1,tooltip:!1}}]}}const d=(v,g,b=n.PP.exclude)=>{const P=v.properties.find(T=>T.id==="custom.hideFrom"),C=E(v),D=C.findIndex(T=>T===g);return D<0?C.push(g):C.splice(D,1),f(C,b,P)},E=v=>{const g=v.matcher.options?.names;return Array.isArray(g)?[...g]:[]},h=(v,g)=>E(v).length===y(g).length,y=(v,g)=>{const b=new Set;for(const P of v)for(const C of P.fields){if(C.type!==s.PU.number)continue;const D=(0,o.Ct)(C,P,v);D!==g&&b.add(D)}return Array.from(b)},a=(v,g)=>{let b=[];for(const P of v){const C=P.properties.find(D=>D.id==="custom.hideFrom");if(C!==void 0&&C.value?.legend===!0){const T=m.sJ.get(P.matcher.id).get(P.matcher.options);for(const M of g)for(const O of M.fields){if(O.type!==s.PU.number)continue;const S=(0,o.Ct)(O,M,g);T(O,M,g)&&b.push(S)}}}return b}},61582:(Y,I,e)=>{"use strict";e.d(I,{a:()=>i});var t=e(49426),n=e(47232),r=e(85858);const s=100;class o{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.t(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const u=Date.now();this.budget=(u-this.lastUpdate)/s;const f=this.ok.getValue(),d=this.budget<=this.threshold;if(f!==d&&this.ok.next(d),this.lastUpdate=u,this.isLive&&this.ok.getValue()&&this.timeRange){let E;for(const h of this.listeners){if(!h.panel.props.isInView)continue;if(u-h.last>=h.intervalMs){if(!E){const{raw:a}=this.timeRange;E={raw:a,from:(0,n.KQ)(u-this.liveTimeOffset),to:(0,n.KQ)(u)}}h.panel.liveTimeChanged(E),h.last=u}}}}}setLiveTimeRange(u){if(this.timeRange=u,this.isLive=u?.raw?.to==="now",this.isLive){const f=r.parse(u.raw.from,!1)?.valueOf(),d=r.parse(u.raw.to,!0)?.valueOf();this.liveTimeOffset=d-f;for(const E of this.listeners)E.intervalMs=l(this.liveTimeOffset,E.panel.props.width)}}listen(u){this.listeners.push({last:this.lastUpdate,panel:u,intervalMs:l(6e4,u.props.width)})}remove(u){this.listeners=this.listeners.filter(f=>f.panel!==u)}updateInterval(u){if(!(!this.timeRange||!this.isLive)){for(const f of this.listeners)if(f.panel===u){f.intervalMs=l(this.liveTimeOffset,f.panel.props.width);return}}}}const m=5*60*1e3;function l(c,u){const f=Math.ceil(c/u/100)*100;return f>m?m:f}const i=new o;setInterval(i.measure,s)},17493:(Y,I,e)=>{"use strict";e.d(I,{Fu:()=>b,np:()=>P});var t=e(34796),n=e.n(t),r=e(2543),s=e.n(r),o=e(95093),m=e.n(o),l=e(26272),i=e(85858),c=e(17172),u=e(12131),f=e(27677),d=e(62301),E=e(68576),h=e(72255),y=e(31193),a=e(10096),v=e(14792),g=e(69064);class b{constructor(){}_dashboardLoadFailed(T,M){return M=M||!1,{meta:{canStar:!1,isSnapshot:M,canDelete:!1,canSave:!1,canEdit:!1,canShare:!1,dashboardNotFound:!0},dashboard:{title:T,uid:T,schemaVersion:0}}}loadDashboard(T,M,O){const S=(0,h.sP)();let p;if(T==="script"&&M)p=this._loadScriptedDashboard(M);else if(T==="snapshot"&&M)p=(0,g.s)().getSnapshot(M).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0));else if(T==="ds"&&M)p=this._loadFromDatasource(M);else if(T==="public"&&O)p=f.IB.getPublicDashboardByUid(O).then(x=>x).catch(x=>{const A=x.data.statusCode===403&&x.data.messageId==="publicdashboards.notEnabled",R=x.data.statusCode===404&&x.data.messageId==="publicdashboards.notFound",B=x.data.statusCode===404&&x.data.messageId==="publicdashboards.dashboardNotFound",U=this._dashboardLoadFailed(A?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...U,meta:{...U.meta,publicDashboardEnabled:R?void 0:!A,dashboardNotFound:R||B}}});else if(O){const x=S.getFromCache(O);if(x)return Promise.resolve(x);p=f.IB.getDashboardByUid(O).then(A=>{if(A.meta.isFolder)throw a.lE.emit(l.r1.alertError,["Dashboard not found"]),new Error("Dashboard not found");return A}).catch(()=>this._dashboardLoadFailed("Not found",!0))}else throw new Error("Dashboard uid or slug required");return p.then(x=>(x.meta.dashboardNotFound!==!0&&d.A.addDashboardImpression(x.dashboard.uid),x)),p}_loadScriptedDashboard(T){const M="public/dashboards/"+T.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,c.AI)().get(M).then(this._executeScript.bind(this)).then(O=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:O.data}),O=>(console.error("Script dashboard error "+O),a.lE.emit(l.r1.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(T){const M=await(0,y.tR)().get(T);if(!M)return Promise.reject("can not find datasource: "+T);const O=new URLSearchParams(window.location.search),S=O.get("path");if(!S)return Promise.reject("expecting path parameter");const p={};return O.forEach((x,A)=>{p[A]=x}),(0,c.AI)().get(`/api/datasources/uid/${M.uid}/resources/${S}`,p).then(x=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:x}))}_executeScript(T){const M={dashboardSrv:(0,v.UA)(),datasourceSrv:(0,y.tR)()},S=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",T)(u.Ny.getSearchObject(),E.A,i,s(),m(),window,document,n(),n(),M);return(0,r.isFunction)(S)?new Promise(p=>{S(x=>{p({data:x})})}):{data:S}}}let P=new b;const C=D=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},14792:(Y,I,e)=>{"use strict";e.d(I,{UA:()=>E});var t=e(75505),n=e(26272),r=e(28138),s=e(44836),o=e(27677),m=e(11230),l=e(28444),i=e(98365),c=e(19752);class u{constructor(){this.onRemovePanel=y=>{const a=this.getCurrent();a&&(0,c.FC)(a,a.getPanelById(y),!0)},r.l.subscribe(l.Vz,y=>this.onRemovePanel(y.payload))}create(y,a){return new i.G(y,a)}setCurrent(y){this.dashboard=y}getCurrent(){return this.dashboard}saveJSONDashboard(y){const a=JSON.parse(y);return(0,m.kV)({dashboard:a,folderUid:this.dashboard?.meta.folderUid||a.folderUid})}saveDashboard(y,a){return(0,t.s)((0,o.AI)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...y,dashboard:y.dashboard.getSaveModelClone()},...a}))}starDashboard(y,a){const v=(0,o.AI)(),g={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+y,method:a?"DELETE":"POST"};return v.request(g).then(()=>{const b=!a;this.dashboard?.uid===y&&(this.dashboard.meta.isStarred=b);const P=b?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return r.l.emit(n.r1.alertSuccess,[P]),b})}}let f;function d(h){f=h}function E(){return f||(f=new u),f}},69064:(Y,I,e)=>{"use strict";e.d(I,{s:()=>i});var t=e(75505),n=e(81160),r=e(17172),s=e(32264),o=e(10096);const m={create:c=>(0,r.AI)().post("/api/snapshots",c),getSnapshots:()=>(0,r.AI)().get("/api/dashboard/snapshots"),getSharingOptions:()=>(0,r.AI)().get("/api/snapshot/shared-options"),deleteSnapshot:c=>(0,r.AI)().delete("/api/snapshots/"+c),getSnapshot:async c=>{const u=await(0,r.AI)().get("/api/snapshots/"+c);return u.meta.canShare=!1,u}};class l{constructor(){this.apiVersion="dashboardsnapshot.grafana.app/v0alpha1",this.url=`/apis/${this.apiVersion}/namespaces/${s.$.namespace}/dashboardsnapshots`}async create(u){return(0,r.AI)().post(this.url+"/create",u)}async getSnapshots(){return(await(0,r.AI)().get(this.url)).items.map(f=>({key:f.metadata.name,name:f.spec.title,external:f.spec.externalUrl!=null,externalUrl:f.spec.externalUrl}))}deleteSnapshot(u){return(0,r.AI)().delete(this.url+"/"+u)}async getSharingOptions(){return(0,r.AI)().get("/api/snapshot/shared-options")}async getSnapshot(u){const f={};if(!o.TP.isSignedIn){alert("TODO... need a barer token for anonymous use case");const d=`??? TODO, get anon token for snapshots (${o.TP.user?.name}) ???`;f.Authorization=`Bearer ${d}`}return(0,t.s)((0,r.AI)().fetch({url:this.url+"/"+u+"/body",method:"GET",headers:f}).pipe((0,n.T)(d=>({dashboard:d.data.dashboard,meta:{isSnapshot:!0,canSave:!1,canEdit:!1,canAdmin:!1,canStar:!1,canShare:!1,canDelete:!1,isFolder:!1,provisioned:!1}}))))}}function i(){return s.$.featureToggles.kubernetesSnapshots?new l:m}},74856:(Y,I,e)=>{"use strict";e.d(I,{jG:()=>C});var t=e(2543),n=e(47232),r=e(43127),s=e(65879),o=e(26272),m=e(85858),l=e(12131),i=e(27857),c=e(76412),u=e(28138),f=e(2913),d=e(16233),E=e(80582),h=e(21380),y=e(28444),a=e(11134);function v({urlRefresh:D,currentRefresh:T,isAllowedIntervalFn:M,minRefreshInterval:O,refreshIntervals:S=a.cb}){if(!D)return T;const p=M(D),x=S.find(A=>A===D);if(!p||!x){const A=O?S.find(B=>B===O):void 0,R=S?.length?S[0]:void 0;return A??R??T}return D||T}class g{constructor(T){this.contextSrv=T,this.timeRangeForUrl=()=>{const M=this.timeRange().raw;return(0,n.Ar)(M.from)&&(M.from=M.from.valueOf().toString()),(0,n.Ar)(M.to)&&(M.to=M.to.valueOf().toString()),M},this.time=(0,r.E2)().raw,this.timeAtLoad=(0,r.E2)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),u.A.subscribe(y.U0,M=>{this.zoomOut(M.payload.scale,M.payload.updateUrl)}),u.A.subscribe(y.Io,M=>{this.shiftTime(M.payload.direction,M.payload.updateUrl)}),u.A.subscribe(y.Rh,M=>{this.makeAbsoluteTime(M.payload.updateUrl)}),u.A.subscribe(y.Bt,()=>{this.copyTimeRangeToClipboard()}),u.A.subscribe(y.VZ,M=>{this.pasteTimeRangeFromClipboard(M.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(T){this.timeModel=T,this.time=T.time,this.refresh=T.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(T){return this.contextSrv.getValidIntervals(T)}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.KQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.KQ)(this.time.to).utc())}parseUrlParam(T){if(T.indexOf("now")!==-1)return T;if(T.length===8){const M=(0,n.yT)(T,"YYYYMMDD");if(M.isValid())return M}else if(T.length===15){const M=(0,n.yT)(T,"YYYYMMDDTHHmmss");if(M.isValid())return M}if(!isNaN(Number(T))){const M=parseInt(T,10);return(0,n.yT)(M)}return null}getTimeWindow(T,M){const O=parseInt(T,10);let S;return M.match(/^\d+$/)&&parseInt(M,10)?S=parseInt(M,10):S=s.intervalToMs(M),{from:(0,n.yT)(O-S/2),to:(0,n.yT)(O+S/2)}}initTimeFromUrl(){if(f.config.publicDashboardAccessToken&&this.timeModel?.timepicker?.hidden)return;const T=l.Ny.getSearch();T.get("time")&&T.get("time.window")&&(this.time=this.getTimeWindow(T.get("time"),T.get("time.window"))),T.get("from")&&(this.time.from=this.parseUrlParam(T.get("from"))||this.time.from),T.get("to")&&(this.time.to=this.parseUrlParam(T.get("to"))||this.time.to),T.get("to")&&T.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=void 0)),this.refresh=v({urlRefresh:T.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:f.config.minRefreshInterval})}updateTimeRangeFromUrl(){const T=l.Ny.getSearch();if(T.get("left"))return;const M=this.timeRangeForUrl(),O=T.get("from"),S=T.get("to");O&&S?(O!==M.from||S!==M.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(T){this.timeModel&&(this.timeModel.refresh=T),this.stopAutoRefresh();const M=l.Ny.getSearchObject();if(!T){M.refresh&&l.Ny.partial({refresh:null},!0);return}let O=T,S=60*1e3;T===d.SM?S=this.getAutoRefreshInteval().intervalMs:(O=this.contextSrv.getValidInterval(T),S=s.intervalToMs(O)),this.refreshMS=S,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(S),this.refreshTimeModel()},S),M.refresh!==O&&l.Ny.partial({refresh:O},!0)}getAutoRefreshInteval(){const T=window?.innerWidth??2e3;return s.calculateInterval(this.timeRange(),T,f.config.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(T){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(T),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},T)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(T,M=!0){if((0,t.extend)(this.time,T),(0,n.Ar)(T.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh("")):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),M===!0){const O=this.timeRangeForUrl(),S=l.Ny.getSearchObject();if(S.from===O.from.toString()&&S.to===O.to.toString())return;S.from=O.from.toString(),S.to=O.to.toString(),l.Ny.partial(S)}this.timeModel?.refresh===d.SM&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(d.SM),this.refreshTimeModel()}timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?i.jh.getTimeRange(window.__grafanaSceneContext).state.value:(0,h.z)(this.time,this.timeModel)}zoomOut(T,M=!0){const O=this.timeRange(),{from:S,to:p}=(0,E.Zk)(O,T);this.setTime({from:(0,n.yT)(S),to:(0,n.yT)(p)},M)}shiftTime(T,M=!0){const O=this.timeRange(),{from:S,to:p}=(0,E.Wb)(T,O);this.setTime({from:(0,n.yT)(S),to:(0,n.yT)(p)},M)}makeAbsoluteTime(T){const{from:M,to:O}=this.timeRange();this.setTime({from:M,to:O},T)}copyTimeRangeToClipboard(){const{raw:T}=this.timeRange();navigator.clipboard.writeText(JSON.stringify({from:T.from,to:T.to})),u.A.emit(o.r1.alertSuccess,[(0,c.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}async pasteTimeRangeFromClipboard(T=!0){const{range:M,isError:O}=await(0,E.zG)();if(O===!0){u.A.emit(o.r1.alertError,[(0,c.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,c.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:M})]);return}const{from:S,to:p}=M;this.setTime({from:S,to:p},T)}isRefreshOutsideThreshold(T,M=.05){const O=this.timeRange();if(m.isMathString(O.raw.from)){const S=O.to.diff(O.from),p=Date.now()-T,x=S*M;return p>=x}return!1}}let b;function P(D){b=D}function C(){return b||(b=new g(d.TP)),b}},79056:(Y,I,e)=>{"use strict";e.d(I,{O2:()=>K,SW:()=>w,og:()=>G});var t=e(2543),n=e(69550),r=e(92041),s=e(22391),o=e(76885),m=e(6709),l=e(25019),i=e(47737),c=e(1173),u=e(11261),f=e(6829),d=e(58140),E=e(19347),h=e(52622),y=e(77659),a=e(33919),v=e(2913),g=e(15054);function b(j){return Array.from(new Array(j+1),(ne,te)=>te).filter(ne=>j%ne===0)}var P=e(68576),C=e(31193),D=e(24240),T=e(86886),M=e(14678),O=e(14738),S=e(36373),p=e(77789),x=e(25640);function A(j,ne){const te=[];if(j?.statistics&&j?.statistics.length){j.statistic=j.statistics[0];for(const oe of j.statistics.splice(1))te.push({...j,statistic:oe})}for(const oe of te)oe.refId=(0,p.M)(ne),delete oe.statistics,ne.push(oe);return delete j.statistics,te}function R(j){const ne=[];if(j&&"statistics"in j&&j?.statistics?.length){for(const te of j.statistics.splice(1)){const{statistics:oe,name:ie,...ue}=j;ne.push({...ue,statistic:te,name:`${ie} - ${te}`})}j.statistic=j.statistics[0],ne.length!==0&&(j.name=`${j.name} - ${j.statistic}`),delete j.statistics}return ne}function B(j){j.hasOwnProperty("metricQueryType")||(j.metricQueryType=x.d$.Search),j.hasOwnProperty("metricEditorMode")||(j.metricQueryType===x.d$.Query?j.metricEditorMode=x.Rx.Code:j.metricEditorMode=j.expression?x.Rx.Code:x.Rx.Builder)}var U=e(80484),F=e(84423);n.D.setInit(a.H),n.G.setInit(a.u);const K=39;class w{constructor(ne){this.dashboard=ne,(0,E.l)()||(0,E.h)(new C.xq)}updateSchema(ne){let te,oe,ie,ue;const be=this.dashboard.schemaVersion,ge=[];if(this.dashboard.schemaVersion=K,be!==this.dashboard.schemaVersion){if(be<2&&(ne.services&&ne.services.filter&&(this.dashboard.time=ne.services.filter.time,this.dashboard.templating.list=ne.services.filter.list||[]),ge.push(re=>(re.type==="graphite"&&(re.type="graph"),re.type!=="graph"||((0,t.isBoolean)(re.legend)&&(re.legend={show:re.legend}),re.grid&&(re.grid.min&&(re.grid.leftMin=re.grid.min,delete re.grid.min),re.grid.max&&(re.grid.leftMax=re.grid.max,delete re.grid.max)),re.y_format&&(re.y_formats||(re.y_formats=[]),re.y_formats[0]=re.y_format,delete re.y_format),re.y2_format&&(re.y_formats||(re.y_formats=[]),re.y_formats[1]=re.y2_format,delete re.y2_format)),re))),be<3){let re=this.dashboard.getNextPanelId();ge.push(ye=>(ye.id||(ye.id=re,re+=1),ye))}if(be<4&&ge.push(re=>(re.type!=="graph"||((0,t.each)(re.aliasYAxis,(ye,Be)=>{re.seriesOverrides=[{alias:Be,yaxis:ye}]}),delete re.aliasYAxis),re)),be<6){const re=(0,t.find)(ne.pulldowns,{type:"annotations"});for(re&&(this.dashboard.annotations={list:re.annotations||[]}),te=0;te<this.dashboard.templating.list.length;te++){const ye=this.dashboard.templating.list[te];ye.datasource===void 0&&(ye.datasource=null),ye.type==="filter"&&(ye.type="query"),ye.type===void 0&&(ye.type="query"),ye.allFormat===void 0&&delete ye.allFormat}}if(be<7&&(ne.nav&&ne.nav.length&&(this.dashboard.timepicker=ne.nav[0]),ge.push(re=>((0,t.each)(re.targets,ye=>{ye.refId||(ye.refId=re.getNextQueryLetter&&re.getNextQueryLetter())}),re))),be<8&&ge.push(re=>((0,t.each)(re.targets,ye=>{ye.fields&&ye.tags&&ye.groupBy&&(ye.rawQuery?(delete ye.fields,delete ye.fill):(ye.select=(0,t.map)(ye.fields,Be=>{const ve=[];return ve.push({type:"field",params:[Be.name]}),ve.push({type:Be.func,params:[]}),Be.mathExpr&&ve.push({type:"math",params:[Be.mathExpr]}),Be.asExpr&&ve.push({type:"alias",params:[Be.asExpr]}),ve}),delete ye.fields,(0,t.each)(ye.groupBy,Be=>{Be.type==="time"&&Be.interval&&(Be.params=[Be.interval],delete Be.interval),Be.type==="tag"&&Be.key&&(Be.params=[Be.key],delete Be.key)}),ye.fill&&(ye.groupBy.push({type:"fill",params:[ye.fill]}),delete ye.fill)))}),re)),be<9&&ge.push(re=>{if(re.type!=="singlestat"&&re.thresholds!=="")return re;if(re.thresholds){const ye=re.thresholds.split(",");ye.length>=3&&(ye.shift(),re.thresholds=ye.join(","))}return re}),be<10&&ge.push(re=>(re.type!=="table"||(0,t.each)(re.styles,ye=>{if(ye.thresholds&&ye.thresholds.length>=3){const Be=ye.thresholds;Be.shift(),ye.thresholds=Be}}),re)),be<12&&(0,t.each)(this.dashboard.getVariables(),re=>{"refresh"in re&&(re.refresh&&(re.refresh=1),re.refresh||(re.refresh=0)),"hideVariable"in re&&re.hideVariable?re.hide=2:"hideLabel"in re&&re.hideLabel&&(re.hide=1)}),be<12&&ge.push(re=>(re.type!=="graph"||!re.grid||re.yaxes||(re.yaxes=[{show:re["y-axis"],min:re.grid.leftMin,max:re.grid.leftMax,logBase:re.grid.leftLogBase,format:re.y_formats[0],label:re.leftYAxisLabel},{show:re["y-axis"],min:re.grid.rightMin,max:re.grid.rightMax,logBase:re.grid.rightLogBase,format:re.y_formats[1],label:re.rightYAxisLabel}],re.xaxis={show:re["x-axis"]},delete re.grid.leftMin,delete re.grid.leftMax,delete re.grid.leftLogBase,delete re.grid.rightMin,delete re.grid.rightMax,delete re.grid.rightLogBase,delete re.y_formats,delete re.leftYAxisLabel,delete re.rightYAxisLabel,delete re["y-axis"],delete re["x-axis"]),re)),be<13&&ge.push(re=>{if(re.type!=="graph"||!re.grid)return re;re.thresholds||(re.thresholds=[]);const ye={},Be={};return re.grid.threshold1!==null&&(ye.value=re.grid.threshold1,re.grid.thresholdLine?(ye.line=!0,ye.lineColor=re.grid.threshold1Color,ye.colorMode="custom"):(ye.fill=!0,ye.fillColor=re.grid.threshold1Color,ye.colorMode="custom")),re.grid.threshold2!==null&&(Be.value=re.grid.threshold2,re.grid.thresholdLine?(Be.line=!0,Be.lineColor=re.grid.threshold2Color,Be.colorMode="custom"):(Be.fill=!0,Be.fillColor=re.grid.threshold2Color,Be.colorMode="custom")),(0,t.isNumber)(ye.value)&&((0,t.isNumber)(Be.value)?ye.value>Be.value?(ye.op=Be.op="lt",re.thresholds.push(ye),re.thresholds.push(Be)):(ye.op=Be.op="gt",re.thresholds.push(ye),re.thresholds.push(Be)):(ye.op="gt",re.thresholds.push(ye))),delete re.grid.threshold1,delete re.grid.threshold1Color,delete re.grid.threshold2,delete re.grid.threshold2Color,delete re.grid.thresholdLine,re}),be<14&&(this.dashboard.graphTooltip=ne.sharedCrosshair?1:0),be<16&&this.upgradeToGridLayout(ne),be<17&&ge.push(re=>{if(re.minSpan){const ye=g.cV/re.minSpan,Be=b(g.cV);re.maxPerRow=Be[(0,t.findIndex)(Be,ve=>ve>ye)-1]}return delete re.minSpan,re}),be<18&&ge.push(re=>(re["options-gauge"]&&(re.options=re["options-gauge"],re.options.valueOptions={unit:re.options.unit,stat:re.options.stat,decimals:re.options.decimals,prefix:re.options.prefix,suffix:re.options.suffix},re.options.thresholds&&re.options.thresholds.reverse(),delete re.options.options,delete re.options.unit,delete re.options.stat,delete re.options.decimals,delete re.options.prefix,delete re.options.suffix,delete re["options-gauge"]),re)),be<19&&ge.push(re=>(re.links&&(0,t.isArray)(re.links)&&(re.links=re.links.map(N)),re)),be<20){const re=ye=>({...ye,url:z(ye.url)});ge.push(ye=>(ye.options&&ye.options.dataLinks&&(0,t.isArray)(ye.options.dataLinks)&&(ye.options.dataLinks=ye.options.dataLinks.map(re)),ye.options&&ye.options.fieldOptions&&ye.options.fieldOptions.defaults&&(ye.options.fieldOptions.defaults.links&&(0,t.isArray)(ye.options.fieldOptions.defaults.links)&&(ye.options.fieldOptions.defaults.links=ye.options.fieldOptions.defaults.links.map(re)),ye.options.fieldOptions.defaults.title&&(ye.options.fieldOptions.defaults.title=z(ye.options.fieldOptions.defaults.title))),ye))}if(be<21){const re=ye=>({...ye,url:ye.url.replace(/__series.labels/g,"__field.labels")});ge.push(ye=>(ye.options&&ye.options.dataLinks&&(0,t.isArray)(ye.options.dataLinks)&&(ye.options.dataLinks=ye.options.dataLinks.map(re)),ye.options&&ye.options.fieldOptions&&ye.options.fieldOptions.defaults&&ye.options.fieldOptions.defaults.links&&(0,t.isArray)(ye.options.fieldOptions.defaults.links)&&(ye.options.fieldOptions.defaults.links=ye.options.fieldOptions.defaults.links.map(re)),ye))}if(be<22&&ge.push(re=>(re.type!=="table"||(0,t.each)(re.styles,ye=>{ye.align="auto"}),re)),be<23)for(const re of this.dashboard.templating.list){if(!(0,D.iv)(re))continue;const{multi:ye,current:Be}=re;(0,r.R)(Be)||(re.current=(0,T.C)(Be,ye))}if(be<24&&ge.push(re=>{const ye=re.type==="table";if(ye&&!re.styles)return re;const Be=re.table==="table2";return!ye||Be||(re.type=ye?"table-old":"table"),re}),be<25,be<26&&ge.push(re=>(re.type==="text2"&&(re.type="text",delete re.options.angular),re)),be<27&&(this.removeRepeatedPanels(),this.dashboard.templating.list=this.dashboard.templating.list.map(re=>{if(!(0,D.VO)(re))return re;const ye={...re};return ye.current={selected:!0,text:ye.query??"",value:ye.query??""},ye.options=[ye.current],ye.hide===U.zL.dontHide||ye.hide===U.zL.hideLabel?{...ye,type:"textbox"}:ye})),be<28){ge.push(re=>re.type==="singlestat"?J(re):re);for(const re of this.dashboard.templating.list)re.tags&&delete re.tags,re.tagsQuery&&delete re.tagsQuery,re.tagValuesQuery&&delete re.tagValuesQuery,re.useTags&&delete re.useTags}if(be<29)for(const re of this.dashboard.templating.list)re.type==="query"&&(re.refresh!==1&&re.refresh!==2&&(re.refresh=1),re.options?.length&&(re.options=[]));if(be<30&&(ge.push(q),ge.push(ee)),be<31&&ge.push(re=>{if(re.transformations){for(const ye of re.transformations)if(ye.id===f.V.id)return H(re,f.V.id,{id:d.o.id,options:{}})}return re}),be<32,be<33&&ge.push(re=>{if(re.datasource=G(re.datasource,{returnDefaultAsNull:!0}),!re.targets)return re;for(const ye of re.targets){const Be=G(ye.datasource,{returnDefaultAsNull:!0});Be!=null&&(ye.datasource=Be)}return re}),be<34&&(ge.push(re=>(this.migrateCloudWatchQueries(re),re)),this.migrateCloudWatchAnnotationQuery()),be<35&&ge.push(X),be<36){for(const ye of this.dashboard.annotations.list)ye.datasource=G(ye.datasource,{returnDefaultAsNull:!1});const re=(0,E.l)().getInstanceSettings(null);if(re){for(const ye of this.dashboard.templating.list)ye.type==="query"&&ye.datasource===null&&(ye.datasource=(0,s.p$)(re));ge.push(ye=>{if(ye.targets){let Be=!1;ye.datasource==null&&ye.targets.length>0&&(ye.datasource=(0,s.p$)(re),Be=!0);for(const ve of ye.targets)(ve.datasource==null||ve.datasource.uid==null)&&(ye.datasource?.uid!==M.uv?ve.datasource={...ye.datasource}:ve.datasource=G(ve.datasource,{returnDefaultAsNull:!1})),Be&&ve.datasource?.uid!=="__expr__"&&(ye.datasource=ve.datasource)}return ye})}}if(be<37&&ge.push(re=>(re.options?.legend&&(re.options.legend.displayMode==="hidden"||re.options.legend.showLegend===!1)?(re.options.legend.displayMode="list",re.options.legend.showLegend=!1):re.options?.legend&&(re.options.legend={...re.options?.legend,showLegend:!0}),re)),be<38&&ge.push(re=>{if(re.type==="table"&&re.fieldConfig!==void 0){const ye=re.fieldConfig.defaults?.custom?.displayMode;if(ye!==void 0&&(re.fieldConfig.defaults.custom.cellOptions=(0,y.o7)(ye),delete re.fieldConfig.defaults.custom.displayMode),re.fieldConfig?.overrides)for(const Be of re.fieldConfig.overrides)for(let ve=0;ve<Be.properties?.length;ve++){let Me=Be.properties[ve].value;Be.properties[ve].id==="custom.displayMode"&&(Be.properties[ve].id="custom.cellOptions",Be.properties[ve].value=(0,y.o7)(Me))}}return re}),be<39&&ge.push(re=>(re.transformations?.forEach(ye=>{if(ye.id==="timeSeriesTable"&&ye.options!==void 0&&ye.options.refIdToStat!==void 0){let Be={};for(const[ve,Me]of Object.entries(ye.options.refIdToStat)){let ke={};ke.stat=Me,Be[ve]=ke}ye.options=Be}}),re)),ge.length!==0)for(oe=0;oe<this.dashboard.panels.length;oe++)for(ie=0;ie<ge.length;ie++){this.dashboard.panels[oe]=ge[ie].call(this,this.dashboard.panels[oe]);const re=this.dashboard.panels[oe].panels;if(re)for(ue=0;ue<re.length;ue++)re[ue]=ge[ie].call(this,re[ue])}}}removeRepeatedPanels(){const ne=[];for(const te of this.dashboard.panels)te.repeatPanelId||te.repeatByRow||(te.type==="row"&&Array.isArray(te.panels)&&(te.panels=te.panels.filter(oe=>!oe.repeatPanelId)),ne.push(te));this.dashboard.panels=ne}migrateCloudWatchQueries(ne){for(const te of ne.targets||[])if(le(te)&&(B(te),te.hasOwnProperty("statistics"))){const oe=A(te,[...ne.targets]);for(const ie of oe)ne.targets.push(ie)}}migrateCloudWatchAnnotationQuery(){for(const ne of this.dashboard.annotations.list)if(me(ne)){const te=R(ne);for(const oe of te)this.dashboard.annotations.list.push(oe)}}upgradeToGridLayout(ne){let te=0;const oe=g.cV/12;let ue=(0,t.max)((0,t.flattenDeep)((0,t.map)(ne.rows,ge=>(0,t.map)(ge.panels,"id"))))+1;if(!ne.rows)return;const be=(0,t.some)(ne.rows,ge=>ge.collapse||ge.showTitle||ge.repeat);for(const ge of ne.rows){if(ge.repeatIteration)continue;const re=ge.height||g.bJ,ye=L(re),Be={};let ve;be&&(Be.id=ue,Be.type="row",Be.title=ge.title,Be.collapsed=ge.collapse,Be.repeat=ge.repeat,Be.panels=[],Be.gridPos={x:0,y:te,w:g.cV,h:ye},ve=new F.a9(Be),ue++,te++);const Me=new V(ye,g.cV,te);for(const ke of ge.panels){ke.span=ke.span||g.o9,ke.minSpan&&(ke.minSpan=Math.min(g.cV,g.cV/12*ke.minSpan));const Se=Math.floor(ke.span)*oe,We=ke.height?L(ke.height):ye,De=Me.getPanelPosition(We,Se);te=Me.yPos,ke.gridPos={x:De.x,y:te+De.y,w:Se,h:We},Me.addPanel(ke.gridPos),delete ke.span,ve&&Be.collapsed?ve.panels?.push(ke):this.dashboard.panels.push(new F.a9(ke))}ve&&this.dashboard.panels.push(ve),ve&&Be.collapsed||(te+=ye)}}}function L(j){return(0,t.isString)(j)&&(j=parseInt(j.replace("px",""),10)),j<g.cx&&(j=g.cx),Math.ceil(j/(g.sD+g.dU))}class V{constructor(ne,te=g.cV,oe=0){this.area=new Array(te).fill(0),this.yPos=oe,this.height=ne}reset(){this.area.fill(0)}addPanel(ne){for(let te=ne.x;te<ne.x+ne.w;te++)(!this.area[te]||ne.y+ne.h-this.yPos>this.area[te])&&(this.area[te]=ne.y+ne.h-this.yPos);return this.area}getPanelPosition(ne,te,oe=!1){let ie,ue,be;for(let ge=this.area.length-1;ge>=0&&this.height-this.area[ge]>0;ge--)if(ue===void 0)ue=ge;else if(ge<this.area.length-1&&this.area[ge]<=this.area[ge+1])ie=ge;else break;if(ie!==void 0&&ue!==void 0&&ue-ie>=te-1){const ge=(0,t.max)(this.area.slice(ie));be={x:ie,y:ge}}else return oe?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(ne,te,!0));return be}}function N(j){let ne=j.url;return!ne&&j.dashboard&&(ne=`dashboard/db/${P.A.slugifyForUrl(j.dashboard)}`),!ne&&j.dashUri&&(ne=`dashboard/${j.dashUri}`),ne||(ne="/"),j.keepTime&&(ne=o.kM.appendQueryToUrl(ne,`$${m.c.keepTime}`)),j.includeVars&&(ne=o.kM.appendQueryToUrl(ne,`$${m.c.includeVars}`)),j.params&&(ne=o.kM.appendQueryToUrl(ne,j.params)),{url:ne,title:j.title,targetBlank:j.targetBlank}}function z(j){const ne=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return j.replace(ne,(te,oe,ie,ue,be,ge)=>oe?"__series.name":ie?"${__series.name}":ue?"__value.time":be?"__field.name":ge?"${__field.name}":te)}function J(j){if(v.config.panels["grafana-singlestat-panel"])return j.type="grafana-singlestat-panel",j;let ne=!1;return j.changePlugin||(ne=!0,j=new F.a9(j)),j.plugin={angularPanelCtrl:{}},j.gauge?.show?(O.plugin.meta=v.config.panels.gauge,j.changePlugin(O.plugin)):(S.plugin.meta=v.config.panels.stat,j.changePlugin(S.plugin)),ne?j.getSaveModel():j}function G(j,ne){if(ne.returnDefaultAsNull&&(j==null||j==="default"))return null;if((0,s.fN)(j))return j;const te=(0,E.l)().getInstanceSettings(j);return te?(0,s.p$)(te):{uid:j||void 0}}function H(j,ne,te){if(j.transformations){const oe=[];for(const ie of j.transformations)oe.push(ie),ie.id===ne&&oe.push({...te});j.transformations=oe}return j}function q(j){const ne=j.fieldConfig;if(!ne)return j;if(ne.defaults&&ne.defaults.mappings&&(ne.defaults.mappings=k(ne.defaults.mappings,ne.defaults.thresholds)),Array.isArray(ne.overrides))for(const te of ne.overrides)for(const oe of te.properties)oe.id==="mappings"&&(oe.value=k(oe.value));return j}function le(j){return j.hasOwnProperty("dimensions")&&j.hasOwnProperty("namespace")&&j.hasOwnProperty("region")&&j.hasOwnProperty("metricName")}function me(j){return j.hasOwnProperty("dimensions")&&j.hasOwnProperty("namespace")&&j.hasOwnProperty("region")&&j.hasOwnProperty("prefixMatching")&&j.hasOwnProperty("statistics")}function k(j,ne){if(!j)return;const te={type:l.d.ValueToText,options:{}},oe=[];for(const ie of j){if(ie.type&&ie.options){ie.type===l.d.ValueToText?te.options={...te.options,...ie.options}:oe.push(ie);continue}let ue;const be=parseFloat(ie.text);if(ne&&!isNaN(be)){const ge=(0,i.yQ)(be,ne.steps);ge&&ge.color&&(ue=ge.color)}switch(ie.type){case 1:ie.value!=null&&(ie.value==="null"?oe.push({type:l.d.SpecialValue,options:{match:l.W.Null,result:{text:ie.text,color:ue}}}):te.options[String(ie.value)]={text:ie.text,color:ue});break;case 2:oe.push({type:l.d.RangeToText,options:{from:+ie.from,to:+ie.to,result:{text:ie.text,color:ue}}});break}}return Object.keys(te.options).length>0&&oe.unshift(te),oe}function ee(j){return(j.type==="timeseries"||j.type==="xychart"||j.type==="xychart2")&&j.options.tooltipOptions&&(j.options={...j.options,tooltip:j.options.tooltipOptions},delete j.options.tooltipOptions),j}function X(j){return j.type==="timeseries"&&j.fieldConfig?.defaults.custom?.axisPlacement===h.vM.Hidden&&(j.fieldConfig={...j.fieldConfig,overrides:[...j.fieldConfig.overrides,{matcher:{id:c.Ct.byType,options:u.PU.time},properties:[{id:"custom.axisPlacement",value:h.vM.Auto}]}]}),j}},98365:(Y,I,e)=>{"use strict";e.d(I,{G:()=>U});var t=e(2543),n=e(64423),r=e(18226),s=e(72724),o=e(47232),m=e(3591),l=e(32264),i=e(24284),c=e(15054),u=e(16233),f=e(28874),d=e(8480),E=e(20601),h=e(72401),y=e(87421),a=e(31678),v=e(28444),g=e(10096),b=e(99140),P=e(80484),C=e(75096),D=e(74856),T=e(34214);const M=new Set(["gridPos","title","description","transparent"]);function O(w,L){const V=[],N={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:V};let z=0;const J=new Map;for(let G of L){let{id:H}=G;H||(z||(z=p([w,L])),H=z++,G={...G,id:H}),J.set(H,G)}for(const G of w){const H=J.get(G.id);if(!H){N.changed=!0,N.actions.remove.push(G.id),G.destroy();continue}if(J.delete(G.id),H===G){V.push(G),N.actions.noop.push(G.id);continue}if(G.type===H.type){const le=G.getSaveModel();let me=!0,k=!1;for(const[ee,X]of Object.entries(H))if(!(0,t.isEqualWith)(X,le[ee],S))if(N.changed=!0,me=!1,M.has(ee))G[ee]=X,k=!0;else{k=!1;break}if(me){V.push(G),N.actions.noop.push(G.id);continue}if(k){V.push(G),N.actions.update.push(G.id);continue}}G.destroy();const q=new T.a(H);q.key=`${q.id}-update-${Date.now()}`,V.push(q),N.changed=!0,N.actions.replace.push(G.id)}for(const G of J.values())V.push(new T.a(G)),N.changed=!0,N.actions.add.push(G.id);return N}function S(w,L){if(w==null&&(L===1/0||L===-1/0||L==null)||L==null&&(w===1/0||w===-1/0||w==null))return!0}function p(w){let L=0;for(const V of w)for(const N of V)N.id>L&&(L=N.id);return L+1}var x=e(79056),A=e(84423);function R(w,L){return w.repeatDirection===c.HG?!1:L.gridPos.x>=w.gridPos.x+w.gridPos.w&&L.gridPos.y===w.gridPos.y}function B(w){for(const L of w)if(delete L.scopedVars,L.panels?.length)for(const V of L.panels)delete V.scopedVars}class U{constructor(L,V,N){this.timeRangeUpdatedDuringEditOrView=!1,this.originalDashboard=null,this.getVariablesFromState=N?.getVariablesFromState??y.SS,this.events=new r.o,this.id=L.id||null,this.uid=L.uid||null,this.revision=L.revision??void 0,this.title=L.title??"No Title",this.description=L.description,this.tags=L.tags??[],this.timezone=L.timezone??"",this.weekStart=L.weekStart??"",this.editable=L.editable!==!1,this.graphTooltip=L.graphTooltip||0,this.time=L.time??{from:"now-6h",to:"now"},this.timepicker=L.timepicker??{},this.liveNow=L.liveNow,this.templating=this.ensureListExist(L.templating),this.annotations=this.ensureListExist(L.annotations),this.refresh=L.refresh,this.snapshot=L.snapshot,this.schemaVersion=L.schemaVersion??0,this.fiscalYearStartMonth=L.fiscalYearStartMonth??0,this.version=L.version??0,this.links=L.links??[],this.gnetId=L.gnetId||null,this.panels=(0,t.map)(L.panels??[],z=>new A.a9(z)),this.originalDashboard=(0,t.cloneDeep)(L),this.originalTemplating=(0,t.cloneDeep)(this.templating),this.originalTime=(0,t.cloneDeep)(this.time),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.initMeta(V),this.updateSchema(L),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.yU,this.lastRefresh=Date.now(),this.appEventsSubscription.add(g.lE.subscribe(P.og,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(g.lE.subscribe(P.BS,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(g.lE.subscribe(P.eF,this.variablesChangedInUrlHandler.bind(this)))}static{this.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0,originalDashboard:!0}}addBuiltInAnnotationQuery(){this.annotations.list.some(V=>V.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:i.Mk,enable:!0,hide:!0,builtIn:1})}initMeta(L){L=L||{},L.canShare=L.canShare!==!1,L.canSave=L.canSave!==!1,L.canStar=L.canStar!==!1,L.canEdit=L.canEdit!==!1,L.canDelete=L.canDelete!==!1,L.showSettings=L.canEdit,L.canMakeEditable=L.canSave&&!this.editable,L.hasUnsavedFolderChange=!1,this.editable||(L.canEdit=!1,L.canDelete=!1,L.canSave=!1),this.meta=L}getSaveModelCloneOld(L){const V=(0,t.defaults)(L||{},{saveVariables:!0,saveTimerange:!0});let N={};for(const z in this)U.nonPersistedProperties[z]||!this.hasOwnProperty(z)||(N[z]=(0,t.cloneDeep)(this[z]));return N.templating=this.getTemplatingSaveModel(V),V.saveTimerange||(N.time=this.originalTime),N.panels=this.getPanelSaveModels(),N=(0,f.v)(N),N.getVariables=()=>N.templating.list,N}getSaveModelClone(L){const V=this.getSaveModelCloneOld(L),N=JSON.stringify(V);return JSON.parse(N)}updatePanels(L){const V=O(this.panels,L??[]);return V.changed&&(this.panels=V.panels??[],this.sortPanelsByGridPos(),this.events.publish(new v.Q$)),V}getPanelSaveModels(){return this.panels.filter(L=>this.isSnapshotTruthy()||!(L.repeatPanelId||L.repeatedByRow)).map(L=>{if(L.libraryPanel){const{id:V,title:N,libraryPanel:z,gridPos:J}=L;return{id:V,title:N,gridPos:J,libraryPanel:{uid:z.uid,name:z.name}}}return this.panelInEdit&&this.panelInEdit.id===L.id?this.panelInEdit.getSaveModel():L.getSaveModel()}).map(L=>(this.isSnapshotTruthy()||(delete L.scopedVars,L.type==="row"&&L.panels&&L.panels.length>0&&(L.panels=L.panels.filter(V=>!V.repeatPanelId).map(V=>(delete V.scopedVars,V)))),L))}getTemplatingSaveModel(L){const V=this.originalTemplating?.list??[],z=this.getVariablesFromState(this.uid).map(G=>{const H=E.B.get(G.type).getSaveModel(G,L.saveVariables);if(!L.saveVariables){const q=V.find(({name:le,type:me})=>le===G.name&&me===G.type);if(!q)return H;G.type==="adhoc"?H.filters=q.filters:(H.current=q.current,H.options=q.options)}return H});return{list:(0,f.v)(z)}}timeRangeUpdated(L){this.events.publish(new m.sR(L)),(0,b.JD)((0,h.RK)(this.uid,L)),(this.panelInEdit||this.panelInView)&&(this.timeRangeUpdatedDuringEditOrView=!0)}startRefresh(L={refreshAll:!0,panelIds:[]}){if(this.events.publish(new m._),this.lastRefresh=Date.now(),this.panelInEdit&&(L.refreshAll||L.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}const V=this.panels.filter(N=>!this.otherPanelInFullscreen(N)&&(L.refreshAll||L.panelIds.includes(N.id)));if(!this.isSnapshot())for(const N of V)N.refreshWhenInView=!0;for(const N of V)N.refresh()}render(){this.events.publish(new v.XM);for(const L of this.panels)L.render()}panelInitialized(L){const V=L.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(L)&&!V&&L.refresh()}otherPanelInFullscreen(L){return(this.panelInEdit||this.panelInView)&&!(L.isViewing||L.isEditing)}initEditPanel(L){return(0,D.jG)().stopAutoRefresh(),this.panelInEdit=L.getEditClone(),this.timeRangeUpdatedDuringEditOrView=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,D.jG)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged()}initViewPanel(L){this.panelInView=L,this.timeRangeUpdatedDuringEditOrView=!1,L.setIsViewing(!0)}exitViewPanel(L){this.panelInView=void 0,L.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged()}refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged(){(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEditOrView)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEditOrView}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEditOrView=!1)}ensurePanelsHaveUniqueIds(){const L=new Set;let V=this.getNextPanelId();for(const N of this.panelIterator())(!N.id||L.has(N.id))&&(N.id=V++),L.add(N.id)}ensureListExist(L={}){return L.list??=[],L}getNextPanelId(){let L=0;for(const V of this.panelIterator())V.id>L&&(L=V.id);return L+1}*panelIterator(){for(const L of this.panels){yield L;const V=L.panels??[];for(const N of V)yield N}}forEachPanel(L){for(let V=0;V<this.panels.length;V++)L(this.panels[V],V)}getPanelById(L,V=!1){if(this.panelInEdit&&this.panelInEdit.id===L)return this.panelInEdit;if(V){for(const N of this.panelIterator())if(N.id===L)return N;return null}else return this.panels.find(N=>N.id===L)??null}canEditPanel(L){return!!(this.meta.canEdit&&L&&!L.repeatPanelId&&L.type!=="row")}canEditPanelById(L){return this.canEditPanel(this.getPanelById(L))}addPanel(L){L.id=this.getNextPanelId(),this.panels.unshift(new A.a9(L)),this.sortPanelsByGridPos(),this.events.publish(new v.Q$)}updateMeta(L){this.meta={...this.meta,...L},this.events.publish(new v.Cf)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((L,V)=>L.gridPos.y===V.gridPos.y?L.gridPos.x-V.gridPos.x:L.gridPos.y-V.gridPos.y)}clearUnsavedChanges(L,V){for(const N of this.panels)N.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0),this.originalDashboard=L,this.originalTemplating=L.templating,V.saveTimerange&&(this.originalTime=L.time)}hasUnsavedChanges(){return!!this.panels.find(V=>V.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;B(this.panels);const L=this.panels.filter(V=>(!V.repeat||V.repeatedByRow)&&V.repeatPanelId);(0,t.pull)(this.panels,...L),L.map(V=>V.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let L=0;L<this.panels.length;L++){const V=this.panels[L];V.repeat&&this.repeatPanel(V,L)}this.sortPanelsByGridPos(),this.events.publish(new v.Q$)}}cleanUpRowRepeats(L){const V=L.map(z=>z.id),N=L.filter(z=>!z.repeat&&z.repeatPanelId&&V.includes(z.repeatPanelId));(0,t.pull)(L,...N),(0,t.pull)(this.panels,...N)}processRowRepeats(L){if(this.isSnapshotTruthy()||!this.hasVariables())return;let V=L.panels??[];if(!L.collapsed){const N=this.panels.findIndex(z=>z.id===L.id);V=this.getRowPanels(N)}this.cleanUpRowRepeats(V);for(const N of V)if(N.repeat){const z=this.panels.findIndex(J=>J.id===N.id);this.repeatPanel(N,z)}}getPanelRepeatClone(L,V,N){if(V===0)return L;const z=L.getSaveModel();z.id=this.getNextPanelId();const J=new A.a9(z);return this.panels.splice(N+V,0,J),J.repeatPanelId=L.id,J.repeat=void 0,this.panelInView?.id===J.id&&(J.setIsViewing(!0),this.panelInView=J),J}getRowRepeatClone(L,V,N){if(V===0){if(!L.collapsed){const H=this.getRowPanels(N);L.panels=H}return L}const z=new A.a9(L.getSaveModel());let J,G;return L.collapsed?(J=(0,t.cloneDeep)(L.panels)??[],z.panels=J,G=N+V):(J=this.getRowPanels(N),z.panels=J.map(H=>H.getSaveModel()),G=N+(J.length+1)*V),this.panels.splice(G,0,z),this.updateRepeatedPanelIds(z),z}repeatPanel(L,V){const N=this.getPanelRepeatVariable(L);if(!N)return;if(L.type==="row"){this.repeatRow(L,V,N);return}const z=this.getSelectedVariableOptions(N),J=L.maxPerRow||4;let G=0,H=L.gridPos.y;for(let le=0;le<z.length;le++){const me=z[le];let k;k=this.getPanelRepeatClone(L,le,V),k.scopedVars??={},k.scopedVars[N.name]=me,L.repeatDirection===c.Pz?(le>0&&(H+=k.gridPos.h),k.gridPos.y=H):(k.gridPos.w=Math.max(c.cV/z.length,c.cV/J),k.gridPos.x=G,k.gridPos.y=H,G+=k.gridPos.w,G+k.gridPos.w>c.cV&&(G=0,H+=k.gridPos.h))}const q=H-L.gridPos.y;if(q>0){const le=V+z.length;for(const me of this.panels.slice(le))R(L,me)||(me.gridPos.y+=q)}}repeatRow(L,V,N){const z=this.getSelectedVariableOptions(N);for(let J=0;J<z.length;J++){const G=z[J],H=this.getRowRepeatClone(L,J,V);K(H,N,G);const q=this.getRowHeight(H),le=H.panels||[];let me;if(L.collapsed){for(const k of le)K(k,N,G),J>0&&this.updateRepeatedPanelIds(k,!0);H.gridPos.y+=J,me=V+J+1}else{const k=V+(le.length+1)*J+1;le.forEach((ee,X)=>{if(K(ee,N,G),J>0){const j=new A.a9(ee);this.updateRepeatedPanelIds(j,!0),j.gridPos.y+=q*J,this.panels.splice(k+X,0,j)}}),H.panels=[],H.gridPos.y+=q*J,me=k+le.length}if(z.length>1)for(const k of this.panels.slice(me))k.gridPos.y+=q}}updateRepeatedPanelIds(L,V){return L.repeatPanelId=L.id,L.id=this.getNextPanelId(),V?L.repeatedByRow=!0:L.repeat=void 0,L}getSelectedVariableOptions(L){let V;return(0,C.ML)(L)?V=L.options.slice(1,L.options.length):V=(0,t.filter)(L.options,{selected:!0}),V}getRowHeight(L){if(!L.panels||L.panels.length===0)return 0;if(L.collapsed)return 1;const V=(0,t.maxBy)(L.panels,({gridPos:N})=>N.y+N.h).gridPos;return V.y+V.h-L.gridPos.y}removePanel(L){this.panels=this.panels.filter(V=>V!==L),L.destroy(),this.events.publish(new v.Q$)}removeRow(L,V){(!V&&L.collapsed||V&&!L.collapsed)&&this.toggleRow(L),this.removePanel(L)}expandRows(){const L=this.panels.filter(V=>V.type==="row"&&V.collapsed);for(const V of L)this.toggleRow(V)}collapseRows(){const L=this.panels.filter(V=>V.type==="row"&&!V.collapsed);for(const V of L)this.toggleRow(V)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(L=>L.hide!==2)||this.annotations.list.some(L=>!L.hide)}getPanelInfoById(L){const V=this.panels.findIndex(N=>N.id===L);return V>=0?{panel:this.panels[V],index:V}:null}duplicatePanel(L){const V=L.getSaveModel();return V.id=this.getNextPanelId(),delete V.repeat,delete V.repeatIteration,delete V.repeatPanelId,delete V.scopedVars,V.alert&&delete V.thresholds,delete V.alert,L.gridPos.x+L.gridPos.w*2<=c.cV?V.gridPos.x+=L.gridPos.w:V.gridPos.y+=L.gridPos.h,this.addPanel(V),V}formatDate(L,V){return(0,s.LE)(L,{format:V,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const L of this.panels)L.destroy()}toggleRow(L){const V=(0,t.indexOf)(this.panels,L);if(!L.collapsed){const G=this.getRowPanels(V);(0,t.pull)(this.panels,...G),L.panels=G.map(H=>H.getSaveModel()),L.collapsed=!0,G.some(H=>H.hasChanged)&&L.configRev++,this.events.publish(new v.Q$);return}L.collapsed=!1;const N=L.panels??[],z=N.some(G=>G.repeat),J=L.repeat;if(N.length>0){const H=(N[0].gridPos.y??L.gridPos.y)-(L.gridPos.y+L.gridPos.h);let q=V+1,le=L.gridPos.y;for(const k of N){if(J){const ee=this.getPanelRepeatVariable(L);if(k.scopedVars??={},ee){const X=this.getSelectedVariableOptions(ee);k.scopedVars={...k.scopedVars,[ee.name]:X[0]}}}k.gridPos.y??(k.gridPos.y=L.gridPos.y),k.gridPos.y-=H,this.panels.splice(q,0,new A.a9(k)),q+=1,le=Math.max(le,k.gridPos.y+k.gridPos.h)}const me=le-L.gridPos.y-1;for(const k of this.panels.slice(q))k.gridPos.y+=me;L.panels=[],z&&this.processRowRepeats(L)}this.sortPanelsByGridPos(),this.events.publish(new v.Q$)}getRowPanels(L){const V=this.panels.slice(L+1),N=V.findIndex(J=>J.type==="row");return V.slice(0,N>=0?N:this.panels.length)}on(L,V){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(L,V)}off(L,V){console.log("DashboardModel.off is deprecated"),this.events.off(L,V)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(L){return(0,s.fq)(L,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:u.TP?.user?.timezone}updateSchema(L){new x.SW(this).updateSchema(L)}hasTimeChanged(){const{time:L,originalTime:V}=this;return!((0,t.isEqual)(L,V)||(0,t.isEqual)((0,o.KQ)(L?.from),(0,o.KQ)(V?.from))&&(0,t.isEqual)((0,o.KQ)(L?.to),(0,o.KQ)(V?.to)))}autoFitPanels(L,V){const N=Math.max(...this.panels.map(le=>le.gridPos.h+le.gridPos.y)),z=55;let G=L-z-20;V&&V!==a.KioskMode.TV&&(G+=z);const H=Math.floor(G/(c.sD+c.dU)),q=N/H;for(const le of this.panels)le.gridPos.y=Math.round(le.gridPos.y/q)||1,le.gridPos.h=Math.round(le.gridPos.h/q)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(a.CoreEvents.bG)}getPanelByUrlId(L){const V=parseInt(L??"0",10),N=this.panels.filter(z=>z.collapsed);for(const z of N)z.panels?.some(G=>G.id===V)&&this.toggleRow(z);return this.getPanelById(V)}toggleLegendsForAll(){const L=this.panels.filter(F),V=L.filter(J=>J.legend.show).length,N=L.length-V,z=V>=N;for(const J of L)J.legend.show=!z,J.render()}toggleExemplarsForAll(){for(const L of this.panels)for(const V of L.targets){if(!(V.datasource&&V.datasource.type==="prometheus"))continue;const N=V;N.exemplar=!N.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(L){let V=!0;return L?V=!!this.meta.annotationsPermissions?.dashboard.canEdit:V=!!this.meta.annotationsPermissions?.organization.canEdit,(l.$.featureToggles.annotationPermissionUpdate||this.canEditDashboard())&&V}canDeleteAnnotations(L){let V=!0;return L?V=!!this.meta.annotationsPermissions?.dashboard.canDelete:V=!!this.meta.annotationsPermissions?.organization.canDelete,l.$.featureToggles.annotationPermissionUpdate?V:V&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(V=>V.builtIn===1)?.enable===!1?!1:l.$.featureToggles.annotationPermissionUpdate?!!this.meta.annotationsPermissions?.dashboard.canAdd:!!this.meta.annotationsPermissions?.dashboard.canAdd&&this.canEditDashboard()}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(L,V){!(0,t.isEqual)(L?.gridPos,V?.gridPos)&&this.events.publish(new v.Q$)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(L){return this.getVariablesFromState(this.uid).find(V=>V.name===L.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(){const L=this.originalTemplating?.list??[],V=this.getTemplatingSaveModel({saveVariables:!0}).list;return L.length!==V.length?!1:!(0,t.isEqual)(V,L)}variablesTimeRangeProcessDoneHandler(L){const V=L.payload.variableIds.length>0;this.variablesChangedHandler(new P.og({panelIds:[],refreshAll:!0}),V)}variablesChangedHandler(L,V=!0){if(V&&this.processRepeats(),L.payload.refreshAll||(0,D.jG)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=L.payload.panelIds.filter(N=>N!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(L.payload)}variablesChangedInUrlHandler(L){this.templateVariableValueUpdated(),this.startRefresh(L.payload)}getOriginalDashboard(){return this.originalDashboard}hasAngularPlugins(){return this.panels.some(L=>{const V=(l.$.panels[L.type]?.angular?.detected||A.vI.includes(L.type))&&!l.$.panels[L.type]?.angular?.hideDeprecation;let N=!1;return L.datasource?.uid&&(N=(0,d.Hv)(L.datasource?.uid)),V||N})}}function F(w){return!!w.legend}function K(w,L,V){w.scopedVars??={},w.scopedVars[L.name]=V}},84423:(Y,I,e)=>{"use strict";e.d(I,{Ar:()=>D,NB:()=>b,a9:()=>C,tD:()=>P,tw:()=>T,vI:()=>g});var t=e(2543),n=e.n(t),r=e(62938),s=e(18226),o=e(41987),m=e(581),l=e(3591),i=e(72574),c=e(2913),u=e(87490),f=e(21969),d=e(28444),E=e(80924),h=e(96382);const y={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0,refreshWhenInView:!0},a={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,isViewing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},v={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},links:[],transformations:[],fieldConfig:{defaults:{},overrides:[]},title:""},g=["graph","table-old","grafana-piechart-panel","grafana-worldmap-panel","singlestat","grafana-singlestat-panel"],b={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},P={"heatmap-new":"heatmap"};class C{constructor(O){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.refreshWhenInView=!0,this.cachedPluginOptions={},this.events=new s.o,this.restoreModel(O),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,r.A)()}restoreModel(O){for(const p in this)y[p]||!this.hasOwnProperty(p)||O[p]||typeof this[p]!="function"&&typeof this[p]!="symbol"&&delete this[p];for(const p in O)this[p]=O[p];const S=(0,h.p)(this);S&&(this.autoMigrateFrom=this.type,this.type=S),(0,t.defaultsDeep)(this,(0,t.cloneDeep)(v)),this.ensureQueryIds()}generateNewKey(){this.key=(0,r.A)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const O of this.targets)O.refId||(O.refId=(0,f.W3)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(O){this.options=O,this.configRev++,this.events.publish(new d.PR),this.render()}updateFieldConfig(O){this.fieldConfig=O,this.configRev++,this.events.publish(new d.PR),this.resendLastResult(),this.render()}getSaveModel(){const O={};for(const S in this)y[S]||!this.hasOwnProperty(S)||(0,t.isEqual)(this[S],v[S])||(O[S]=(0,t.cloneDeep)(this[S]));return this.type==="row"&&this.panels&&this.panels.length>0&&(O.panels=this.panels.map(S=>{if(S.libraryPanel){const{id:p,title:x,libraryPanel:A,gridPos:R}=S;return{id:p,title:x,gridPos:R,libraryPanel:{uid:A.uid,name:A.name}}}return S})),O}setIsViewing(O){this.isViewing=O}updateGridPos(O,S=!0){O.x===this.gridPos.x&&O.y===this.gridPos.y&&O.h===this.gridPos.h&&O.w===this.gridPos.w||(this.gridPos.x=O.x,this.gridPos.y=O.y,this.gridPos.w=O.w,this.gridPos.h=O.h,S&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:O,dashboardTimezone:S,timeData:p,width:x}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,panelPluginId:this.type,dashboardUID:O,timezone:S,timeRange:p.timeRange,timeInfo:p.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(x),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?o.Jk.PanelEditor:this.isViewing?o.Jk.PanelViewer:o.Jk.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new l._)}render(){this.hasRefreshed?this.events.publish(new d.XM):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((O,S)=>y[S]||a[S]?O:{...O,[S]:this[S]},{})}restorePanelOptions(O){const S=this.cachedPluginOptions[O];S&&(Object.keys(S.properties).map(p=>{this[p]=S.properties[p]}),this.fieldConfig=(0,m.H9)(this.fieldConfig,S.fieldConfig))}applyPluginOptionDefaults(O,S){const p=(0,m.F)({plugin:O,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:S});this.fieldConfig=p.fieldConfig,this.options=p.options}async pluginLoaded(O){this.plugin=O;const S=D(O);if(this.autoMigrateFrom){const p=b[this.autoMigrateFrom]!=null,x=this.getOptionsToRemember(),A=this.autoMigrateFrom,R=this.type;this.clearPropertiesBeforePluginChange(),this.type=R,this.plugin=O,this.callPanelTypeChangeHandler(O,A,x,p)}if(O.onPanelMigration&&S!==this.pluginVersion){const p=O.onPanelMigration(this);this.options=await p,this.pluginVersion=S}this.applyPluginOptionDefaults(O,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const O in this)a[O]||delete this[O];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,m.aW)(this.fieldConfig.overrides,m.nx)}}callPanelTypeChangeHandler(O,S,p,x){if(O.onPanelTypeChanged){const A=x?{angular:p}:p.options;Object.assign(this.options,O.onPanelTypeChanged(this,S,A,this.fieldConfig))}}changePlugin(O){const S=O.meta.id,p=this.getOptionsToRemember(),x=this.fieldConfig,A=this.type,R=this.isAngularPlugin()||!!b[A];this.cachedPluginOptions[A]={properties:p,fieldConfig:x},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(S),this.callPanelTypeChangeHandler(O,A,p,R),this.type=S,this.plugin=O,this.configRev++,this.applyPluginOptionDefaults(O,!0),O.onPanelMigration&&(this.pluginVersion=D(O))}updateQueries(O){const{dataSource:S}=O;this.datasource={uid:S.uid,type:S.type},this.cacheTimeout=O.cacheTimeout,this.queryCachingTTL=O.queryCachingTTL,this.timeFrom=O.timeRange?.from,this.timeShift=O.timeRange?.shift,this.hideTimeOverride=O.timeRange?.hide,this.interval=O.minInterval,this.maxDataPoints=O.maxDataPoints,this.targets=O.queries,this.configRev++,this.events.publish(new d.zq)}addQuery(O){O=O||{refId:"A"},O.refId=(0,f.W3)(this.targets),this.targets.push(O),this.configRev++}changeQuery(O,S){O.refId=this.targets[S].refId,this.configRev++,this.targets=this.targets.map((p,x)=>x===S?O:p)}getEditClone(){const O=this.getSaveModel(),S=new C(O);S.isEditing=!0,S.plugin=this.plugin;const p=this.getQueryRunner();return S.getQueryRunner().useLastResultFrom(p),S}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:c.Ay.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new E.Z(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0||(this.plugin?.meta?.angular?.detected??!1)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(O){this.transformations=O,this.resendLastResult(),this.configRev++,this.events.publish(new d.JI)}setProperty(O,S){this[O]=S,this.configRev++,O==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(O,S,p){const x=this.getQueryRunner().getLastRequest(),A=Object.assign({},this.scopedVars,x?.scopedVars,S);return(0,i.w)().replace(O,A,p)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(O){for(const[S,p]of Object.entries(O.model)){switch(S){case"id":case"gridPos":case"libraryPanel":continue}this[S]=p}this.libraryPanel=O}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function D(M){return M&&M.meta.info.version?M.meta.info.version:c.Ay.buildInfo.version}function T(M){const O={};return Object.entries(M).filter(([S,p])=>!y[S]&&M.hasOwnProperty(S)&&!(0,t.isEqual)(p,v[S])).forEach(([S,p])=>{O[S]=p}),(0,u.MA)(O)}},3673:(Y,I,e)=>{"use strict";e.d(I,{Bz:()=>h,Q9:()=>d,Ss:()=>a,TA:()=>E,lC:()=>y});var t=e(17172),n=e(82467),r=e(3169),s=e(6473),o=e(80095),m=e(81862),l=e(20701),i=e(72401),c=e(14792),u=e(74856),f=e(28601);function d(v,g){return async b=>{await(0,t.AI)().post("/api/dashboards/import",v),b((0,n.dx)((0,r.tZ)("Dashboard Imported",g))),b((0,l.h9)())}}function E(v){return async g=>{await(0,t.AI)().delete(`/api/dashboards/uid/${v}`),g((0,l.h9)())}}const h=()=>(v,g)=>{const P=g().dashboard.getModel();P&&(P.destroy(),v((0,i.Y7)(P.uid))),(0,u.jG)().stopAutoRefresh(),v((0,f.p0)()),v((0,o.rG)()),s.t.leave(),(0,c.UA)().setCurrent(void 0)},y=v=>g=>{g((0,m.Cj)(v)),(0,u.jG)().refreshTimeModel()},a=v=>g=>{g((0,m.xu)(v)),(0,u.jG)().refreshTimeModel()}},96382:(Y,I,e)=>{"use strict";e.d(I,{p:()=>r});var t=e(2913),n=e(84423);function r(s,o){if(n.tD[s.type])return n.tD[s.type];const m=i=>{const c="__feature."+i,f=new URLSearchParams(window.location.search).get(c);return f==="true"||f===""},l=o||!t.Ay.angularSupportEnabled||t.Ay.featureToggles.autoMigrateOldPanels||m("autoMigrateOldPanels")||m("disableAngular");if(s.type==="graph"&&(l||t.Ay.featureToggles.autoMigrateGraphPanel||m("autoMigrateGraphPanel")))return s.xaxis?.mode==="series"?"barchart":s.xaxis?.mode==="histogram"?"histogram":"timeseries";if(l)return n.NB[s.type];if(s.type==="table-old"&&(t.Ay.featureToggles.autoMigrateTablePanel||m("autoMigrateTablePanel")))return"table";if(s.type==="grafana-piechart-panel"&&(t.Ay.featureToggles.autoMigratePiechartPanel||m("autoMigratePiechartPanel")))return"piechart";if(s.type==="grafana-worldmap-panel"&&(t.Ay.featureToggles.autoMigrateWorldmapPanel||m("autoMigrateWorldmapPanel")))return"geomap";if((s.type==="singlestat"||s.type==="grafana-singlestat-panel")&&t.Ay.featureToggles.autoMigrateStatPanel||m("autoMigrateStatPanel"))return"stat"}},34214:(Y,I,e)=>{"use strict";e.d(I,{G:()=>t.G,a:()=>n.a9});var t=e(98365),n=e(84423)},79999:(Y,I,e)=>{"use strict";e.d(I,{us:()=>N,vR:()=>V,yZ:()=>J,OI:()=>z});var t=e(71733),n=e(47232),r=e(69129),s=e(12131),o=e(17172),m=e(32264),l=e(82467),i=e(28138),c=e(3169),u=e(27677),f=e(33390),d=e(78160),E=e(17493),h=e(14792),y=e(74856),a=e(72255),v=e(71176),g=e(71101),b=e(54650);function P(G){return async H=>{const q=await u.IB.getFolderByUid(G);return H((0,b.jl)(q)),H((0,l.Vz)((0,g.R4)(q))),q}}var C=e(6473),D=e(2609),T=e(75096),M=e(31678),O=e(42972),S=e(72401),p=e(87421),x=e(16833),A=e(98365),R=e(61298),B=e(14110);function U(G){const H={dashboardId:G.id,dashboardName:G.title,dashboardUid:G.uid,folderName:G.meta.folderTitle,eventName:R.n_.DashboardView};(0,B.G$)(H)}var F=e(28601);const K="initDashboard";async function w(G,H,q){const le=f.A.getObject(N);if(le)return J(),le;try{switch(G.routeName){case M.DashboardRoutes.Home:{const k=(0,a.sP)().getFromCache(a.m6);if(k)return k;const ee=await u.IB.get("/api/dashboards/home");if(ee.redirectUri){const X=t.I.stripBaseFromUrl(ee.redirectUri);return s.Ny.replace(X),null}return ee.meta.canSave=!1,ee.meta.canShare=!1,ee.meta.canStar=!1,ee}case M.DashboardRoutes.Public:return await E.np.loadDashboard("public",G.urlSlug,G.accessToken);case M.DashboardRoutes.Normal:{const me=await E.np.loadDashboard(G.urlType,G.urlSlug,G.urlUid);if(me.meta.folderUid)try{await H(P(me.meta.folderUid))}catch(k){console.warn("Error fetching parent folder",me.meta.folderUid,"for dashboard",k)}if(G.fixUrl&&me.meta.url&&!D._o.state.isPlaying){const k=t.I.stripBaseFromUrl(me.meta.url),ee=s.Ny.getLocation().pathname;k!==ee&&(s.Ny.replace({...s.Ny.getLocation(),pathname:k}),console.log("not correct url correcting",k,ee))}return me}case M.DashboardRoutes.New:return G.urlFolderUid&&await H(P(G.urlFolderUid)),(0,v.X)(G.urlFolderUid);case M.DashboardRoutes.Path:{const me=G.urlSlug??"";return await E.np.loadDashboard(M.DashboardRoutes.Path,me,me)}default:throw{message:"Unknown route "+G.routeName}}}catch(me){return(0,o.NF)(me)&&me.cancelled||(H((0,F.ig)({message:"Failed to fetch dashboard",error:me})),console.error(me)),null}}const L=(G,H={})=>(G.forEach(q=>{q.panels?L(q.panels,H):q.targets&&q.targets.forEach(le=>{le.datasource?.type&&(H[le.datasource.type]?H[le.datasource.type].push(le):H[le.datasource.type]=[le])})}),H);function V(G){return async(H,q)=>{(0,d.j)(K),H((0,F.xS)());const le=await w(G,H,q),me=le?.dashboard?.version;if(!le)return;H((0,F.X1)());let k;try{k=new A.G(le.dashboard,le.meta)}catch(ue){H((0,F.ig)({message:"Failed create dashboard model",error:ue})),console.error(ue);return}const ee=q(),X=s.Ny.getSearchObject();X.orgId||s.Ny.partial({orgId:ee.user.orgId},!0);const j=(0,y.jG)();(0,h.UA)().setCurrent(k),j.init(k);const te=(0,T.q4)(G.urlUid??k.uid);if(await H((0,S._q)(te,k)),(0,O.nm)({dashboard:k,timeSrv:j}).run({dashboard:k,range:j.timeRange()}),(0,p.Tk)(q())!==te||q().dashboard.initPhase!==M.DashboardInitPhase.Services)return;try{k.processRepeats(),X.autofitpanels&&k.autoFitPanels(window.innerHeight,X.kiosk),m.$.publicDashboardAccessToken||G.keybindingSrv.setupDashboardBindings(k)}catch(ue){ue instanceof Error&&H((0,l.dx)((0,c.gi)("Dashboard init failed",ue))),console.error(ue)}G.routeName!==M.DashboardRoutes.New?(U(k),C.t.watch(k.uid)):C.t.leave(),k.weekStart!==""?(0,n.$D)(k.weekStart):(0,n.$D)(m.$.bootData.user.weekStart),i.A.publish(new r.gc({dashboardId:k.uid,orgId:ee.user.orgId,userId:ee.user.user?.id,grafanaVersion:m.$.buildInfo.version,queries:L(k.panels)}));const ie=(0,d.z)(K);(0,x.d)(k,ie?.duration,me),H((0,F.O9)(k))}}const N="DASHBOARD_FROM_LS_KEY";function z(G){f.A.setObject(N,G)}function J(){f.A.delete(N)}},28601:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>y,O9:()=>c,Ub:()=>E,X1:()=>u,ig:()=>i,p0:()=>f,xS:()=>l});var t=e(30038),n=e(79422),r=e(31678),s=e(98365);const o={initPhase:r.DashboardInitPhase.NotStarted,getModel:()=>null,initError:null,initialDatasource:void 0},m=(0,t.Z0)({name:"dashboard",initialState:o,reducers:{dashboardInitFetching:a=>{a.initPhase=r.DashboardInitPhase.Fetching},dashboardInitServices:a=>{a.initPhase=r.DashboardInitPhase.Services},dashboardInitCompleted:(a,v)=>{a.getModel=()=>v.payload,a.initPhase=r.DashboardInitPhase.Completed},dashboardInitFailed:(a,v)=>{a.initPhase=r.DashboardInitPhase.Failed,a.initError=v.payload,a.getModel=()=>new s.G({...n.Ye,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:a=>{a.initPhase=r.DashboardInitPhase.NotStarted,a.initError=null,a.getModel=()=>null},addPanel:(a,v)=>{},setInitialDatasource:(a,v)=>{a.initialDatasource=v.payload}}}),{dashboardInitFetching:l,dashboardInitFailed:i,dashboardInitCompleted:c,dashboardInitServices:u,cleanUpDashboard:f,addPanel:d,setInitialDatasource:E}=m.actions,y={dashboard:m.reducer}},36974:(Y,I,e)=>{"use strict";e.d(I,{B1:()=>g,CW:()=>a,OK:()=>i,SD:()=>u,VF:()=>f,_u:()=>h,dH:()=>b,ko:()=>v,no:()=>E,ob:()=>c,s3:()=>d});var t=e(2543),n=e.n(t),r=e(12131),s=e(2913),o=e(15054),m=e(33390),l=e(19752);function i(C,D){const T={type:"timeseries",title:"Panel Title",gridPos:(0,l.Ft)(C),datasource:D?{uid:D}:null,isNew:!0};return C.addPanel(T),T.id}function c(C,D){const T={type:D,title:"Widget title",gridPos:(0,l.Ft)(C),datasource:null,isNew:!0};return C.addPanel(T),T.id}function u(C){const D={type:"row",title:"Row title",gridPos:{x:0,y:0}};C.addPanel(D)}function f(){r.Ny.push("/dashboard/import")}function d(C){const D={type:"add-library-panel",gridPos:(0,l.Ft)(C)};C.addPanel(D)}function E(C,D){if(!D)return;const T=(0,l.Ft)(C),M={type:D.id,title:"Panel Title",gridPos:{x:T.x,y:T.y,w:D.defaults.gridPos.w,h:D.defaults.gridPos.h}};D.defaults&&((0,t.defaults)(M,D.defaults),M.title=D.defaults.title,m.A.delete(o.tH)),C.addPanel(M)}function h(){const C=(0,t.chain)(s.Ay.panels).filter({hideFromList:!1}).map(T=>T).value(),D=m.A.get(o.tH);if(D){const T=JSON.parse(D),M=(0,t.find)(C,{id:T.type});if(M){const O=(0,t.cloneDeep)(M);return O.name=T.title,O.sort=-1,{...O,defaults:{...T}}}}}const y="grafana.dashboards.panelEdit.lastUsedDatasource";function a(C){if(m.A.exists(y)){const D=m.A.getObject(y);if(D?.dashboardUid===C)return D}}function v(C){if(!m.A.exists(y))return;const T=m.A.getObject(y)?.datasourceUid??"";P(C,T)}function g(C){m.A.setObject(y,{dashboardUid:C,datasourceUid:""})}function b(C,D){const T=a(C);if(!T)P(C,D);else{const M=T?.dashboardUid??"";P(M,D)}}function P(C,D){m.A.setObject(y,{dashboardUid:C,datasourceUid:D})}},19752:(Y,I,e)=>{"use strict";e.d(I,{ET:()=>S,FC:()=>b,Ft:()=>R,KJ:()=>C,Mc:()=>D,ZY:()=>M,d7:()=>T,iU:()=>P,nk:()=>p});var t=e(2543),n=e.n(t),r=e(26272),s=e(65879),o=e(47232),m=e(85858),l=e(72574),i=e(28138),c=e(2913),u=e(15054),f=e(33390),d=e(1702),E=e(84423),h=e(54174),y=e(96227),a=e(79971),v=e(99140),g=e(28444);const b=(B,U,F)=>{if(F!==!1){const K=U.alert?"YES":void 0;i.A.publish(new g.bY({title:"Remove panel",text:"Are you sure you want to remove this panel?",icon:"trash-alt",confirmText:K,yesText:"Remove",onConfirm:()=>b(B,U,!1)}));return}B.removePanel(U),(0,v.JD)((0,a.O6)(U.key))},P=(B,U)=>{B.duplicatePanel(U)},C=B=>{let U=B;B instanceof E.a9&&(U=B.getSaveModel()),f.A.set(u.tH,JSON.stringify(U)),i.A.emit(r.r1.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},D=(B,U)=>{i.A.publish(new g.S8({component:d.ShareModal,props:{dashboard:B,panel:U}}))},T=(B,U)=>{i.A.publish(new g.S8({component:y.o,props:{panel:U,initialFolderUid:B.meta.folderUid,isOpen:!0}}))},M=B=>{i.A.publish(new g.S8({component:h.l,props:{onConfirm:()=>B.unlinkLibraryPanel(),isOpen:!0}}))},O=B=>{B.refresh()},S=B=>{const U={...B.options};U.legend.showLegend===!0?U.legend.showLegend=!1:U.legend.showLegend=!0,B.updateOptions(U)};function p(B,U){const F={timeInfo:"",timeRange:U};if(B.timeFrom){const K=(0,l.w)().replace(B.timeFrom,B.scopedVars),w=s.describeTextRange(K);if(w.invalid)return F.timeInfo="invalid time override",F;if((0,t.isString)(U.raw.from)){const L=(0,o.AN)(U.from).tz(),V=(0,o.AN)(U.to).tz(),N=m.parse(w.from,void 0,L);F.timeInfo=w.display,F.timeRange={from:N,to:m.parse(w.to,void 0,V),raw:{from:w.from,to:w.to}}}}if(B.timeShift){const K=(0,l.w)().replace(B.timeShift,B.scopedVars);if(s.describeTextRange(K).invalid)return F.timeInfo="invalid timeshift",F;const L="-"+K;F.timeInfo+=" timeshift "+L;const V=m.parseDateMath(L,F.timeRange.from,!1),N=m.parseDateMath(L,F.timeRange.to,!0);F.timeRange={from:V,to:N,raw:{from:V,to:N}}}return B.hideTimeOverride&&(F.timeInfo=""),F}function x(B){const F=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return B.maxDataPoints?B.maxDataPoints:Math.ceil(F*(B.gridPos.w/24))}function A(B,U){const F=B.plugin&&B.plugin.noPadding?0:config.theme.panelPadding*2,K=B.hasTitle()?config.theme.panelHeaderHeight:0;return U-K-F-PANEL_BORDER}function R(B){for(const F of B.panelIterator())F.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},21380:(Y,I,e)=>{"use strict";e.d(I,{z:()=>r});var t=e(47232),n=e(85858);const r=(s,o)=>{const m={from:(0,t.Ar)(s.from)?(0,t.KQ)(s.from):s.from,to:(0,t.Ar)(s.to)?(0,t.KQ)(s.to):s.to},l=o?o.getTimezone():void 0;return{from:n.parse(m.from,!1,l,o?.fiscalYearStartMonth),to:n.parse(m.to,!0,l,o?.fiscalYearStartMonth),raw:m}}},16833:(Y,I,e)=>{"use strict";e.d(I,{D:()=>r,d:()=>n});var t=e(7758);function n(i,c,u){const f=o(i.templating.list),d=s(i.panels);t.c.dashboardInitialized({uid:i.uid,title:i.title,theme:i.style,schemaVersion:i.schemaVersion,version_before_migration:u,panels_count:i.panels.length,...d,...f,settings_nowdelay:i.timepicker.nowDelay,settings_livenow:!!i.liveNow,duration:c,isScene:!1})}function r(i,c){const u=i.getInitialSaveModel();if(u){const f=s(u.panels||[]),d=o(u.templating?.list||[]);t.c.dashboardInitialized({uid:u.uid,title:u.title,theme:void 0,schemaVersion:u.schemaVersion,version_before_migration:u.version,panels_count:u.panels?.length||0,...f,...d,settings_nowdelay:void 0,settings_livenow:!!u.liveNow,duration:c,isScene:!0})}}function s(i){return i.map(c=>c.type).reduce((c,u)=>(c[l(u)]=1+c[l(u)]||1,c),{})}function o(i){return i.map(c=>c.type).reduce((c,u)=>(c[m(u)]=1+c[m(u)]||1,c),{})}const m=i=>`variable_type_${i}_count`,l=i=>`panel_type_${i}_count`},40489:(Y,I,e)=>{"use strict";e.d(I,{ZF:()=>m,vI:()=>o,o2:()=>l});var t=e(88483),n=e(14236);function r(i){const c=new Set;return Object.keys(i).forEach(u=>{i[u].forEach(f=>{c.add(f)})}),c}function s(i){const c=Array.from(r(i));return c.length===1?c[0]:`${c.slice(0,-1).join(", ")} or ${c.slice(-1)}`}function o(i){return new t.c(c=>{let u=0;Promise.all([e.e(2136),e.e(3686)]).then(e.bind(e,22136)).then(f=>{i.forEach(d=>{const E=new FileReader;E.readAsArrayBuffer(d),E.onload=()=>{const h=E.result;if(h&&h instanceof ArrayBuffer){if(d.type==="application/json"){const y=new TextDecoder("utf-8"),a=JSON.parse(y.decode(h));c.next({dataFrames:[(0,n.Vc)(a)],file:d})}else c.next({dataFrames:f.readSpreadsheet(h),file:d});++u>=i.length&&c.complete()}}})}).catch(()=>{throw"Failed to load sheets module"})})}const m={"text/plain":[".csv",".txt"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"application/vnd.apple.numbers":[".numbers"],"application/vnd.oasis.opendocument.spreadsheet":[".ods"],"application/json":[".json"]},l=5e5},32738:(Y,I,e)=>{"use strict";e.d(I,{r:()=>l});var t=e(96540),n=e(55852),r=e(10096),s=e(44836),o=e(6320),m=e(31678);function l({variant:i,onClick:c}){const u=r.TP.hasPermission(m.AccessControlAction.DataSourcesCreate),f=o.b.DataSourcesNew;return t.createElement(n.z9,{variant:i||"primary",href:f,disabled:!u,tooltip:u?void 0:"You do not have permission to configure new data sources",onClick:c,target:"_blank"},t.createElement(s.x6,{i18nKey:"data-source-picker.add-new-data-source"},"Configure a new data source"))}},2221:(Y,I,e)=>{"use strict";e.d(I,{A:()=>m});var t=e(32196),n=e(96540),r=e(40845),s=e(10860),o=e(64149);function m({ds:i,onClick:c,selected:u,description:f,...d}){const E=(0,r.$j)(),h=l(E,i.meta.builtIn);return n.createElement(s.Z,{key:i.uid,onClick:c,className:(0,t.cx)(h.card,u?h.selected:void 0),...d},n.createElement(s.Z.Heading,{className:h.heading},n.createElement("div",{className:h.headingContent},n.createElement("span",{className:h.name},i.name," ",i.isDefault?n.createElement(o.L,{tags:["default"]}):null),n.createElement("small",{className:h.type},f||i.meta.name))),n.createElement(s.Z.Figure,{className:h.logo},n.createElement("img",{src:i.meta.info.logos.small,alt:`${i.meta.name} Logo`})))}function l(i,c=!1){return{card:(0,t.css)`
      cursor: pointer;
      background-color: ${i.colors.background.primary};
      border-bottom: 1px solid ${i.colors.border.weak};
      // Move to list component
      margin-bottom: 0;
      border-radius: 0;
      padding: ${i.spacing(1)};
    `,heading:(0,t.css)`
      width: 100%;
      overflow: hidden;
      // This is needed to enable ellipsis when text overlfows
      > button {
        width: 100%;
      }
    `,headingContent:(0,t.css)`
      color: ${i.colors.text.secondary};
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      justify-content: space-between;
    `,logo:(0,t.css)`
      width: 32px;
      height: 32px;
      padding: ${i.spacing(0,1)};
      display: flex;
      align-items: center;

      > img {
        max-height: 100%;
        min-width: 24px;
        filter: invert(${c&&i.isLight?1:0});
      }
    `,name:(0,t.css)`
      color: ${i.colors.text.primary};
      display: flex;
      gap: ${i.spacing(2)};
    `,type:(0,t.css)`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
    `,separator:(0,t.css)`
      margin: 0 ${i.spacing(1)};
      color: ${i.colors.border.weak};
    `,selected:(0,t.css)`
      background-color: ${i.colors.background.secondary};
    `,meta:(0,t.css)`
      display: block;
      overflow-wrap: unset;
      white-space: nowrap;
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    `}}},11219:(Y,I,e)=>{"use strict";e.d(I,{S:()=>f});var t=e(32196),n=e(96540),r=e(13544),s=e(72574),o=e(40845),m=e(44836),l=e(87282),i=e(32738),c=e(2221),u=e(47311);function f(a){const v=(0,n.useRef)(null),[g,b]=(0,l.dR)({keyboardEvents:a.keyboardEvents,containerRef:v}),P=(0,o.$j)(),C=y(P,b),{className:D,current:T,onChange:M,enableKeyboardNavigation:O,onClickEmptyStateCTA:S}=a,p=(0,l.Kr)({alerting:a.alerting,annotations:a.annotations,dashboard:a.dashboard,logs:a.logs,metrics:a.metrics,mixed:a.mixed,pluginId:a.pluginId,tracing:a.tracing,type:a.type,variables:a.variables}),[x,A]=(0,l.TX)(),R=a.filter?p.filter(a.filter):p;return n.createElement("div",{ref:v,className:(0,t.cx)(D,C.container),"data-testid":r.Tp.components.DataSourcePicker.dataSourceList},R.length===0&&n.createElement(d,{className:C.emptyState,onClickCTA:S}),R.sort((0,u.Tj)(T,x,h())).map(B=>n.createElement(c.A,{"data-testid":"data-source-card",key:B.uid,ds:B,onClick:()=>{A(B),M(B)},selected:(0,u.Df)(B,T),...O?g:{}})))}function d({className:a,onClickCTA:v}){const g=(0,o.of)(E);return n.createElement("div",{className:(0,t.cx)(a,g.container)},n.createElement("p",{className:g.message},n.createElement(m.x6,{i18nKey:"data-source-picker.list.no-data-source-message"},"No data sources found")),n.createElement(i.r,{onClick:v}))}function E(a){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    `,message:(0,t.css)`
      margin-bottom: ${a.spacing(3)};
    `}}function h(){return(0,s.w)().getVariables().filter(v=>v.type==="datasource").map(v=>`\${${v.id}}`)}function y(a,v){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      ${v} {
        background-color: ${a.colors.background.secondary};
      }
    `,emptyState:(0,t.css)`
      height: 100%;
      flex: 1;
    `}}},50481:(Y,I,e)=>{"use strict";e.d(I,{p:()=>O});var t=e(32196),n=e(2543),r=e(96540),s=e(14110),o=e(32264),m=e(40845),l=e(37390),i=e(10354),c=e(14578),u=e(40276),f=e(37270),d=e(44836),E=e(40489),h=e(90478),y=e(87282),a=e(32738),v=e(13544),g=e(2221),b=e(47311);const P={grafana:(0,d.t)("data-source-picker.built-in-list.description-grafana","Discover visualizations using mock data"),"-- Mixed --":(0,d.t)("data-source-picker.built-in-list.description-mixed","Use multiple data sources"),"-- Dashboard --":(0,d.t)("data-source-picker.built-in-list.description-dashboard","Reuse query results from other visualizations")};function C({className:p,current:x,onChange:A,tracing:R,dashboard:B,mixed:U,metrics:F,type:K,annotations:w,variables:L,alerting:V,pluginId:N,logs:z,filter:J}){const H=(0,y.Kr)({tracing:R,dashboard:B,mixed:U,metrics:F,type:K,annotations:w,variables:L,alerting:V,pluginId:N,logs:z}).filter(q=>(J?J?.(q):!0)&&!!q.meta.builtIn);return r.createElement("div",{className:p,"data-testid":v.Tp.components.DataSourcePicker.advancedModal.builtInDataSourceList},H.map(q=>r.createElement(g.A,{key:q.uid,ds:q,description:P[q.uid],selected:(0,b.Df)(q,x),onClick:()=>A(q)})))}var D=e(11219);const T="dashboards_dspickermodal_clicked",M={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss"};function O({tracing:p,dashboard:x,mixed:A,metrics:R,type:B,annotations:U,variables:F,alerting:K,pluginId:w,logs:L,uploadFile:V,filter:N,onChange:z,current:J,onDismiss:G,reportedInteractionFrom:H}){const q=(0,m.of)(S),[le,me]=(0,r.useState)(""),k=H||"modal",ee=()=>{G(),(0,s.rR)(T,{item:M.DISMISS,src:k})},X=ie=>{z(ie),(0,s.rR)(T,{item:M.SELECT_DS,ds_type:ie.type,src:k})},j=r.useMemo(()=>(0,n.once)(()=>{(0,s.rR)(T,{item:"search",src:k})}),[k]),ne=(0,y.ps)("-- Grafana --"),te=(0,h.j)((ie,ue)=>{ne&&(z(ne,[ie]),(0,s.rR)(T,{item:M.UPLOAD_FILE,src:k}),ue.length<1&&G())}),oe=({className:ie})=>r.createElement(C,{className:ie,onChange:X,current:J,filter:N,variables:F,tracing:p,metrics:R,type:B,annotations:U,alerting:K,pluginId:w,logs:L,dashboard:x,mixed:A});return r.createElement(l.a,{title:(0,d.t)("data-source-picker.modal.title","Select data source"),closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:q.modal,contentClassName:q.modalContent,onClickBackdrop:ee,onDismiss:ee},r.createElement("div",{className:q.leftColumn},r.createElement(i.p,{type:"search",autoFocus:!0,className:q.searchInput,value:le,prefix:r.createElement(c.I,{name:"search"}),placeholder:(0,d.t)("data-source-picker.modal.input-placeholder","Select data source"),onChange:ie=>{me(ie.currentTarget.value),j()}}),r.createElement(u.E,null,r.createElement(D.S,{onChange:X,current:J,onClickEmptyStateCTA:()=>(0,s.rR)(T,{item:M.CONFIG_NEW_DS_EMPTY_STATE,src:k}),filter:ie=>(N?N?.(ie):!0)&&(0,b.Zn)(ie,le)&&!ie.meta.builtIn,variables:F,tracing:p,metrics:R,type:B,annotations:U,alerting:K,pluginId:w,logs:L,dashboard:x,mixed:A}),r.createElement(oe,{className:q.appendBuiltInDataSourcesList}))),r.createElement("div",{className:q.rightColumn},r.createElement("div",{className:q.builtInDataSources},r.createElement(u.E,{className:q.builtInDataSourcesList},r.createElement(oe,null)),V&&o.$.featureToggles.editPanelCSVDragAndDrop&&r.createElement(f.gH,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:E.o2,multiple:!1,accept:E.ZF,onDrop:te}},r.createElement(f.wI,null))),r.createElement("div",{className:q.newDSSection},r.createElement("span",{className:q.newDSDescription},r.createElement(d.x6,{i18nKey:"data-source-picker.modal.configure-new-data-source"},"Open a new tab and configure a data source")),r.createElement(a.r,{variant:"secondary",onClick:()=>{(0,s.rR)(T,{item:M.CONFIG_NEW_DS,src:k}),G()}}))))}function S(p){return{modal:(0,t.css)`
      width: 80%;
      height: 80%;
      max-width: 1200px;
      max-height: 900px;

      ${p.breakpoints.down("md")} {
        width: 100%;
      }
    `,modalContent:(0,t.css)`
      display: flex;
      flex-direction: row;
      height: 100%;

      ${p.breakpoints.down("md")} {
        flex-direction: column;
      }
    `,leftColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      padding-right: ${p.spacing(4)};
      border-right: 1px solid ${p.colors.border.weak};

      ${p.breakpoints.down("md")} {
        width: 100%;
        border-right: 0;
        padding-right: 0;
        flex: 1;
        overflow-y: auto;
      }
    `,rightColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      justify-items: space-evenly;
      align-items: stretch;
      padding-left: ${p.spacing(4)};

      ${p.breakpoints.down("md")} {
        width: 100%;
        padding-left: 0;
        flex: 0;
      }
    `,builtInDataSources:(0,t.css)`
      flex: 1 1;
      margin-bottom: ${p.spacing(4)};

      ${p.breakpoints.down("md")} {
        flex: 0;
      }
    `,builtInDataSourcesList:(0,t.css)`
      ${p.breakpoints.down("md")} {
        display: none;
        margin-bottom: 0;
      }

      margin-bottom: ${p.spacing(4)};
    `,appendBuiltInDataSourcesList:(0,t.css)`
      ${p.breakpoints.up("md")} {
        display: none;
      }
    `,newDSSection:(0,t.css)`
      display: flex;
      flex-direction: row;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    `,newDSDescription:(0,t.css)`
      flex: 1 0;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      color: ${p.colors.text.secondary};
    `,searchInput:(0,t.css)`
      width: 100%;
      min-height: 32px;
      margin-bottom: ${p.spacing(1)};
    `}}},51612:(Y,I,e)=>{"use strict";e.d(I,{s:()=>B});var t=e(32196),n=e(95361),r=e(18491),s=e(36376),o=e(80279),m=e(7887),l=e(87073),i=e(96540),c=e(13544),u=e(14110),f=e(40845),d=e(10354),E=e(14578),h=e(17464),y=e(40276),a=e(71678),v=e(55852),g=e(2913),b=e(44836),P=e(97427),C=e(68706),D=e(87282),T=e(11219);function M(V){const{dataSource:N}=V,z=(0,f.$j)(),J=S(z,N?.meta.builtIn);return N?i.createElement("img",{className:J.pickerDSLogo,alt:`${N.meta.name} logo`,src:N.meta.info.logos.small}):O()}function O(){const V=(0,f.of)(S);return i.createElement("div",{className:V.pickerDSLogo})}function S(V,N=!1){return{pickerDSLogo:(0,t.css)`
      height: 20px;
      width: 20px;
      filter: invert(${N&&V.isLight?1:0});
    `}}var p=e(50481),x=e(47311);const A="dashboards_dspicker_clicked",R={OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state"};function B(V){const{current:N,onChange:z,hideTextValue:J=!1,width:G,inputId:H,noDefault:q=!1,disabled:le=!1,placeholder:me="Select data source",...k}=V,ee=(0,f.of)(U,V),[X,j]=(0,i.useState)(!1),[ne,te]=(0,i.useState)(!1),[oe,ie]=(0,i.useState)(""),{onKeyDown:ue,keyboardEvents:be}=(0,P.d)(),ge=(0,i.useRef)(null),[re,ye]=(0,i.useState)(),[Be,ve]=(0,i.useState)(),Me=(0,D.ps)(N),ke=(0,D.ps)("-- Grafana --"),Se=!N&&q?void 0:Me,We=oe&&X?i.createElement(O,null):i.createElement(M,{dataSource:Se}),De=[(0,n.cY)(4),(0,r.Ej)({apply({availableHeight:se,elements:ae}){ae.floating.style.maxHeight=`${Math.max(200,se-20)}px`,ae.floating.style.minHeight="200px"}}),(0,r.UU)({fallbackStrategy:"initialPlacement",crossAxis:!1,boundary:document.body}),(0,r.BN)()],{refs:pe,floatingStyles:Ne}=(0,s.we)({open:X,placement:"bottom-start",onOpenChange:j,middleware:De,whileElementsMounted:r.ll,strategy:"fixed"}),Le=(0,i.useCallback)(se=>{pe.setReference(se),ye(se)},[pe]),He=(0,i.useCallback)(()=>{ie(""),j(!1),re?.focus()},[j,re]),{overlayProps:je,underlayProps:at}=(0,l.e)({onClose:He,isDismissable:!0,isOpen:X,shouldCloseOnInteractOutside:se=>re?!re.isSameNode(se):!1},ge),{dialogProps:Ye}=(0,o.s)({"aria-label":"Opened data source picker list"},ge);function $e(){(0,u.rR)(A,{item:R.OPEN_DROPDOWN}),j(!0),re?.focus()}function xe(){ke&&z(ke,[C.dx])}function Fe(se){se.key==="Tab"&&!se.shiftKey&&X&&(se.preventDefault(),Be?.focus()),se.key==="Tab"&&se.shiftKey&&X&&He(),ue(se)}function Ee(se){se.shiftKey?(se.preventDefault(),re?.focus()):He()}return(0,i.useEffect)(()=>{const se=be.subscribe({next:ae=>{switch(ae?.code){case"ArrowDown":$e(),ae.preventDefault();break;case"ArrowUp":$e(),ae.preventDefault();break;case"Escape":He(),ae.preventDefault();break}}});return()=>se.unsubscribe()}),i.createElement("div",{className:ee.container,"data-testid":c.Tp.components.DataSourcePicker.container},i.createElement("div",{className:ee.trigger,onClick:$e},i.createElement(d.p,{id:H||"data-source-picker",className:ne?void 0:ee.input,"data-testid":c.Tp.components.DataSourcePicker.inputV2,"aria-label":"Select a data source",autoComplete:"off",prefix:Se?We:void 0,suffix:i.createElement(E.I,{name:X?"search":"angle-down"}),placeholder:J?"":(0,x.q7)(Se)||me,onFocus:()=>{te(!0)},onBlur:()=>{te(!1)},onKeyDown:Fe,value:oe,onChange:se=>{$e(),ie(se.currentTarget.value)},ref:Le,disabled:le})),X?i.createElement(h.ZL,null,i.createElement("div",{...at}),i.createElement("div",{ref:ge,...je,...Ye},i.createElement(F,{...k,style:Ne,ref:pe.setFloating,footerRef:ve,current:Se,filterTerm:oe,keyboardEvents:be,onChange:(se,ae)=>{He(),se.uid!==Se?.uid&&(z(se,ae),(0,u.rR)(A,{item:R.SELECT_DS,ds_type:se.type}))},onClose:He,onClickAddCSV:xe,onDismiss:He,onNavigateOutsiteFooter:Ee}))):null)}function U(V,N){return{container:(0,t.css)({position:"relative",cursor:N.disabled?"not-allowed":"pointer",width:V.spacing(N.width||"auto")}),trigger:(0,t.css)({cursor:"pointer",pointerEvents:N.disabled?"none":"auto"}),input:(0,t.css)({"input::placeholder":{color:N.disabled?V.colors.action.disabledText:V.colors.text.primary}})}}const F=i.forwardRef((V,N)=>{const{filterTerm:z,onChange:J,onClose:G,onClickAddCSV:H,current:q,filter:le}=V,me=(0,i.useCallback)(X=>{J(X)},[J]),k=(0,i.useCallback)(()=>{H?.(),G(),(0,u.rR)(A,{item:R.ADD_FILE})},[H,G]),ee=(0,f.of)(K);return i.createElement("div",{style:V.style,ref:N,className:ee.container},i.createElement(y.E,null,i.createElement(T.S,{...V,enableKeyboardNavigation:!0,className:ee.dataSourceList,current:q,onChange:me,filter:X=>(le?le?.(X):!0)&&(0,x.Zn)(X,z),onClickEmptyStateCTA:()=>(0,u.rR)(A,{item:R.CONFIG_NEW_DS_EMPTY_STATE})})),i.createElement(m.n1,null,i.createElement(w,{...V,onClickAddCSV:k,onChange:me,onNavigateOutsiteFooter:V.onNavigateOutsiteFooter})))});F.displayName="PickerContent";function K(V){return{container:(0,t.css)({display:"flex",flexDirection:"column",background:V.colors.background.primary,boxShadow:V.shadows.z3}),picker:(0,t.css)({background:V.colors.background.secondary}),dataSourceList:(0,t.css)({flex:1}),footer:(0,t.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:V.spacing(1.5),borderTop:`1px solid ${V.colors.border.weak}`,backgroundColor:V.colors.background.secondary})}}function w({onClose:V,onChange:N,onClickAddCSV:z,...J}){const G=(0,f.of)(L),H=J.uploadFile&&g.Ay.featureToggles.editPanelCSVDragAndDrop,q=me=>{me.key==="Tab"&&J.onNavigateOutsiteFooter(me)},le=me=>{me.key==="Tab"&&me.shiftKey&&J.onNavigateOutsiteFooter(me)};return i.createElement("div",{className:G.footer},i.createElement(a.$s,null,({showModal:me,hideModal:k})=>i.createElement(v.$n,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{V(),me(p.p,{reportedInteractionFrom:"ds_picker",tracing:J.tracing,dashboard:J.dashboard,mixed:J.mixed,metrics:J.metrics,type:J.type,annotations:J.annotations,variables:J.variables,alerting:J.alerting,pluginId:J.pluginId,logs:J.logs,filter:J.filter,uploadFile:J.uploadFile,current:J.current,onDismiss:k,onChange:(ee,X)=>{N(ee,X),k()}}),(0,u.rR)(A,{item:R.OPEN_ADVANCED_DS_PICKER})},ref:J.footerRef,onKeyDown:H?le:q},i.createElement(b.x6,{i18nKey:"data-source-picker.open-advanced-button"},"Open advanced data source picker"),i.createElement(E.I,{name:"arrow-right"}))),H&&i.createElement(v.$n,{variant:"secondary",size:"sm",onClick:z,onKeyDown:q},"Add csv or spreadsheet"))}function L(V){return{footer:(0,t.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:V.spacing(1.5),borderTop:`1px solid ${V.colors.border.weak}`,backgroundColor:V.colors.background.secondary})}}},47311:(Y,I,e)=>{"use strict";e.d(I,{Df:()=>s,Tj:()=>m,Zn:()=>l,q7:()=>o,tw:()=>i});var t=e(14792),n=e(36974),r=e(14678);function s(c,u){return!c||!u?!1:typeof u=="string"?c.uid===u:c.uid===u.uid}function o(c){if(c){if(typeof c=="string")return`${c} - not found`;if("name"in c)return c.name;if(c.uid)return`${c.uid} - not found`}}function m(c,u,f){return(E,h)=>{const y=E.name.toUpperCase(),a=h.name.toUpperCase();if(c&&s(E,c))return-1;if(c&&s(h,c))return 1;const v=u.indexOf(E.uid),g=u.indexOf(h.uid);if(v>-1&&v>g)return-1;if(g>-1&&g>v)return 1;const b=f.includes(E.uid),P=f.includes(h.uid);return b&&!P?-1:P&&!b||E.meta.builtIn&&!h.meta.builtIn?1:h.meta.builtIn&&!E.meta.builtIn||y<a?-1:1}}function l(c,u=""){return c.name.toLowerCase().includes(u.toLowerCase())}function i(c){if(!c.uid)return;const u=(0,t.UA)().getCurrent()?.uid??"";if(c.uid===r.uv)return(0,n.B1)(u);(0,n.dH)(u,c.uid)}},83883:(Y,I,e)=>{"use strict";e.d(I,{I:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},87282:(Y,I,e)=>{"use strict";e.d(I,{Kr:()=>m,TX:()=>o,dR:()=>i,ps:()=>l});var t=e(96540),n=e(78685),r=e(19347);const s="grafana.features.datasources.components.picker.DataSourceDropDown.history";function o(){const[c=[],u]=(0,n.A)(s,[]),f=(0,t.useCallback)(d=>{d.meta.builtIn||(c.includes(d.uid)?(c.splice(c.findIndex(E=>d.uid===E),1),u([...c,d.uid])):u([...c,d.uid].slice(1,6)))},[c,u]);return[c,f]}function m(c){return(0,r.l)().getList(c)}function l(c){const u=(0,r.l)();return u.getInstanceSettings(c)}function i(c){const{keyboardEvents:u,containerRef:f}=c,d=(0,t.useRef)(0),E="data-role",h="keyboardSelectableItem",y={[E]:h},a=`[${E}="${h}"`,v="data-selectedItem",g=`[${v}="true"]`,b=(0,t.useCallback)(C=>{const D=f?.current?.querySelectorAll(a),T=D?.item(C%D?.length);D?.forEach(M=>M.setAttribute(v,"false")),T&&(T.scrollIntoView({block:"center"}),T.setAttribute(v,"true"))},[f,a]),P=(0,t.useCallback)(()=>{f?.current?.querySelector(g)?.querySelector("button")?.click()},[f,g]);return(0,t.useEffect)(()=>{if(!u)return;const C=u.subscribe({next:D=>{switch(D?.code){case"ArrowDown":{b(++d.current),D.preventDefault();break}case"ArrowUp":d.current=d.current>0?d.current-1:d.current,b(d.current),D.preventDefault();break;case"Enter":P();break}}});return()=>C.unsubscribe()},[u,b,P]),(0,t.useEffect)(()=>{const C=new MutationObserver(D=>{D.some(M=>M.addedNodes&&M.addedNodes.length>0||M.removedNodes&&M.removedNodes.length>0)&&b(0)});return f.current&&C.observe(f.current,{childList:!0}),()=>{C.disconnect()}},[f,a,b]),[y,g]}},34258:(Y,I,e)=>{"use strict";e.d(I,{du:()=>le,Qq:()=>ee,PK:()=>z,G2:()=>me,bn:()=>G,Ge:()=>J,jB:()=>k});var t=e(69129),n=e(71733),r=e(26657),s=e(17172),o=e(32264),m=e(12131),l=e(82467),i=e(10096),c=e(27677),u=e(6320),f=e(31193),d=e(27716),E=e(22854),h=e(31678),y=e(75505),a=e(80714);const v=async()=>await(0,c.AI)().get("/api/datasources"),g=async X=>{const j=await(0,y.s)((0,c.AI)().fetch({method:"GET",url:`/api/datasources/${X}`,params:(0,a.F)(),showErrorAlert:!1}));if(j.ok)return j.data;throw Error(`Could not find data source by ID: "${X}"`)},b=async X=>{const j=await(0,y.s)((0,c.AI)().fetch({method:"GET",url:`/api/datasources/uid/${X}`,params:(0,a.F)(),showErrorAlert:!1}));if(j.ok)return j.data;throw Error(`Could not find data source by UID: "${X}"`)},P=async X=>{try{return await b(X)}catch{console.log(`Failed to lookup data source using UID "${X}"`)}try{return await g(X)}catch{console.log(`Failed to lookup data source using ID "${X}"`)}throw Error("Could not find data source")},C=X=>(0,c.AI)().post("/api/datasources",X),D=()=>(0,c.AI)().get("/api/plugins",{enabled:1,type:"datasource"}),T=X=>(0,c.AI)().put(`/api/datasources/uid/${X.uid}`,X,{showErrorAlert:!1,showSuccessAlert:!1}),M=X=>(0,c.AI)().delete(`/api/datasources/uid/${X}`);var O=e(83883),S=e(4589),p=e(43429),x=e(33378);function A(X){const j=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(ie=>ie),ne={},te={},oe=B();for(const ie of j)ne[ie.id]=ie;for(const ie of X){const ue=oe.find(ge=>ge.id===ie.id);if((ie.enterprise||ue)&&(ie.category="enterprise",ie.unlicensed=!(0,x.a)("enterprise.plugins"),ie.info.links=ue?.info?.links||ie.info.links),ie.info.links)for(const ge of ie.info.links)ge.name="Learn more";(j.find(ge=>ge.id===ie.category)||ne.other).plugins.push(ie),te[ie.id]=ie}for(const ie of j){if(ie.id==="cloud"&&ie.plugins.push(U()),ie.id==="enterprise")for(const ue of oe)te[ue.id]||ie.plugins.push(ue);R(ie.plugins)}return j.filter(ie=>ie.plugins.length>0)}function R(X){const j={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};X.sort((ne,te)=>{const oe=j[ne.id]||0,ie=j[te.id]||0;return oe>ie?-1:oe<ie||ne.name>te.name?1:-1})}function B(){return[F({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),F({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),F({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),F({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),F({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),F({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),F({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),F({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),F({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),F({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),F({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),F({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),F({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),F({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),F({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),F({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),F({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"}),F({id:"grafana-sumologic-datasource",description:"SumoLogic integration and datasource",name:"SumoLogic",imgUrl:"public/img/plugins/sumo.svg"}),F({id:"grafana-pagerduty-datasource",description:"PagerDuty datasource",name:"PagerDuty",imgUrl:"public/img/plugins/pagerduty.svg"})]}function U(){return{id:"gcloud",name:"Grafana Cloud",type:p.QE.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function F(X){return{id:X.id,name:X.name,type:p.QE.datasource,module:"phantom",baseUrl:"",info:{description:X.description,logos:{small:X.imgUrl,large:X.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+X.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var K=e(74984),w=e(36227),L=e(54226);const V=X=>{let j,ne;return X.error&&X.error instanceof r.b1?(j=X.error.message,ne=X.error.details):(0,s.NF)(X)?j=X.data.message??`HTTP error ${X.statusText}`:X instanceof Error&&(j=X.message),{message:j,details:ne}},N=X=>{const{details:j,message:ne,status:te}=X;return{status:te,message:ne,details:j}},z=(X,j={loadDataSource:H,loadDataSourceMeta:q,getDataSource:L.U4,getDataSourceMeta:L.Fj,importDataSourcePlugin:E.cS})=>async(ne,te)=>{if(!X){ne((0,w.qR)(new Error("Invalid UID")));return}try{const oe=await ne(j.loadDataSource(X));await ne(j.loadDataSourceMeta(oe));const ie=j.getDataSource(te().dataSources,X),ue=j.getDataSourceMeta(te().dataSources,ie.type),be=await j.importDataSourcePlugin(ue);ne((0,w.Ks)(be))}catch(oe){oe instanceof Error&&ne((0,w.qR)(oe))}},J=(X,j=O.I.Edit,ne={getDatasourceSrv:f.tR,getBackendSrv:c.AI})=>async(te,oe)=>{const ie=await ne.getDatasourceSrv().get(X),ue=j.replace(/:uid/gi,X);ie.testDatasource&&(te((0,w.QZ)()),ne.getBackendSrv().withNoBackendCache(async()=>{try{const be=await ie.testDatasource(),ge=N({...be,details:{...be.details}});te((0,w.lg)(ge)),(0,S.Mh)({grafana_version:o.$.buildInfo.version,plugin_id:ie.type,datasource_uid:ie.uid,success:!0,path:ue}),i.lE.publish(new t.NI)}catch(be){const ge=V(be);te((0,w.UP)({...ge})),(0,S.Mh)({grafana_version:o.$.buildInfo.version,plugin_id:ie.type,datasource_uid:ie.uid,success:!1,path:ue}),i.lE.publish(new t.LL)}}))};function G(){return async X=>{if(!i.TP.hasPermission(h.AccessControlAction.DataSourcesRead))return;X((0,w.TN)());const j=await v();X((0,w.E1)(j))}}function H(X){return async j=>{let ne=await P(X);return X!==ne.uid&&(window.location.href=n.I.assureBaseUrl(`/datasources/edit/${ne.uid}`),ne={}),j((0,w.jz)(ne)),ne}}function q(X){return async j=>{const ne=await(0,d.x)(X.type),te=await(0,E.cS)(ne),oe=te.DataSourceClass.prototype instanceof r.iy,ie={...ne,isBackend:ne.backend||oe};j((0,w.gZ)(ie)),te.meta=ie,j((0,l.Vz)((0,K.R4)(X,te)))}}function le(X,j=O.I.Edit){return async()=>{const ne={type:X.id,access:"proxy"},te=await C(ne),oe=j.replace(/:uid/gi,te.datasource.uid);await(0,f.tR)().reload(),await i.TP.fetchUserPermissions(),(0,S.V9)({grafana_version:o.$.buildInfo.version,plugin_id:X.id,datasource_uid:te.datasource.uid,plugin_version:te.meta?.info?.version,path:oe}),m.Ny.push(oe)}}function me(){return async X=>{X((0,w.Gc)());const j=await D(),ne=A(j);X((0,w.f$)({plugins:j,categories:ne}))}}function k(X){return async j=>{try{await T(X)}catch(ne){const te=V(ne);return j((0,w.UP)(te)),Promise.reject(X)}return await(0,f.tR)().reload(),j(H(X.uid))}}function ee(){return async(X,j)=>{const{uid:ne}=j().dataSources.dataSource;try{await M(ne),await(0,f.tR)().reload();const te=u.b.DataSources;m.Ny.push(te)}catch(te){const oe=V(te);X((0,w.UP)(oe))}}}},458:(Y,I,e)=>{"use strict";e.d(I,{C:()=>r});var t=e(96540),n=e(83883);const r=(0,t.createContext)(n.I)},11084:(Y,I,e)=>{"use strict";e.d(I,{$k:()=>b,BY:()=>E,S4:()=>D,Tn:()=>C,US:()=>h,Um:()=>v,_e:()=>T,aM:()=>O,hx:()=>a,k9:()=>g,oU:()=>d,u1:()=>M,xw:()=>P});var t=e(96540),n=e(97007),r=e(28138),s=e(10096),o=e(31678),m=e(28444),l=e(11959),i=e(34258),c=e(458),u=e(36227),f=e(54226);const d=S=>{const p=(0,o.useDispatch)();(0,t.useEffect)(()=>(p((0,i.PK)(S)),function(){p((0,n.N)({cleanupAction:A=>A.dataSourceSettings=u.IJ}))}),[S,p])},E=S=>{const p=(0,o.useDispatch)(),x=O();return()=>p((0,i.Ge)(S,x.Edit))},h=()=>{const S=(0,o.useDispatch)(),p=(0,o.useSelector)(A=>A.dataSources.isLoadingDataSources),x=(0,o.useSelector)(A=>A.dataSources.dataSources);return(0,t.useEffect)(()=>{S((0,i.bn)())},[S]),{isLoading:p,dataSources:x}},y=S=>{const p=useDispatch();useEffect(()=>{p(loadDataSource(S))},[p,S])},a=()=>{const S=(0,o.useDispatch)();(0,t.useEffect)(()=>{S((0,i.G2)())},[S])},v=()=>{const S=(0,o.useDispatch)(),p=O();return x=>{S((0,i.du)(x,p.Edit))}},g=()=>{const S=(0,o.useDispatch)();return async p=>S((0,i.jB)(p))},b=()=>{const S=(0,o.useDispatch)(),{name:p}=(0,o.useSelector)(x=>x.dataSources.dataSource);return()=>{r.A.publish(new m.bY({title:"Delete",text:`Are you sure you want to delete the "${p}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>S((0,i.Qq)())}))}},P=S=>(0,o.useSelector)(p=>(0,f.U4)(p.dataSources,S)),C=S=>{const p=P(S);return(0,l.h)(p)},D=S=>(0,o.useSelector)(p=>(0,f.Fj)(p.dataSources,S)),T=()=>(0,o.useSelector)(S=>S.dataSourceSettings),M=S=>{const p=P(S),x=p.readOnly===!0,A=s.TP.hasPermissionInMetadata(o.AccessControlAction.DataSourcesWrite,p),R=s.TP.hasPermissionInMetadata(o.AccessControlAction.DataSourcesDelete,p);return{readOnly:x,hasWriteRights:A,hasDeleteRights:R}},O=()=>(0,t.useContext)(c.C)},85464:(Y,I,e)=>{"use strict";e.d(I,{$k:()=>r.$k,BY:()=>r.BY,Bs:()=>o.Bs,CR:()=>n.C,C_:()=>o.C_,S4:()=>r.S4,Tk:()=>o.Tk,Tn:()=>r.Tn,US:()=>r.US,Um:()=>r.Um,_e:()=>r._e,aM:()=>r.aM,du:()=>t.du,eB:()=>o.eB,hp:()=>m.hp,hx:()=>r.hx,jz:()=>o.jz,k9:()=>r.k9,lv:()=>m.lv,oU:()=>r.oU,rb:()=>o.rb,u1:()=>r.u1,wC:()=>m.wC,xs:()=>m.xs,xw:()=>r.xw,zC:()=>m.zC});var t=e(34258),n=e(458),r=e(11084),s=e(74984),o=e(36227),m=e(54226)},74984:(Y,I,e)=>{"use strict";e.d(I,{$m:()=>f,R4:()=>c,Vh:()=>u});var t=e(43429),n=e(33378),r=e(76323),s=e(2913),o=e(10096),m=e(35538),l=e(31678);const i="Loading";function c(E,h){const y=h.meta,a=s.Ay.featureToggles.featureHighlights,v={img:y.info.logos.large,id:"datasource-"+E.uid,url:"",text:E.name,children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${E.uid}`,text:"Settings",url:`datasources/edit/${E.uid}/`}]};if(h.configPages)for(const T of h.configPages)v.children.push({active:!1,text:T.title,icon:T.icon,url:`datasources/edit/${E.uid}/?page=${T.id}`,id:`datasource-page-${T.id}`});y.includes&&d(y.includes)&&o.TP.hasRole("Admin")&&v.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${E.uid}`,text:"Dashboards",url:`datasources/edit/${E.uid}/dashboards`});const g=E.type===i,b="feature-highlights-data-source-permissions-badge",P={active:!1,icon:"lock",id:`datasource-permissions-${E.uid}`,text:"Permissions",url:`datasources/edit/${E.uid}/permissions`};if((0,m.z5)()&&!g&&(P.tabSuffix=()=>(0,r.J)({experimentId:b,eventVariant:"trial"})),(0,n.a)("dspermissions.enforcement")?o.TP.hasPermissionInMetadata(l.AccessControlAction.DataSourcesPermissionsRead,E)&&v.children.push(P):a&&!g&&v.children.push({...P,url:P.url+"/upgrade",tabSuffix:()=>(0,r.J)({experimentId:b})}),s.Ay.analytics?.enabled){const T="feature-highlights-data-source-insights-badge",M={active:!1,icon:"info-circle",id:`datasource-insights-${E.uid}`,text:"Insights",url:`datasources/edit/${E.uid}/insights`};(0,m.z5)()&&!g&&(M.tabSuffix=()=>(0,r.J)({experimentId:T,eventVariant:"trial"})),(0,n.a)("analytics")?o.TP.hasPermission(l.AccessControlAction.DataSourcesInsightsRead)&&v.children.push(M):a&&!g&&v.children.push({...M,url:M.url+"/upgrade",tabSuffix:()=>(0,r.J)({experimentId:T})})}const C="feature-highlights-query-caching-badge",D={active:!1,icon:"database",id:`datasource-cache-${E.uid}`,text:"Cache",url:`datasources/edit/${E.uid}/cache`,hideFromTabs:!y.isBackend||!s.Ay.caching.enabled};return(0,m.z5)()&&!g&&(D.tabSuffix=()=>(0,r.J)({experimentId:C,eventVariant:"trial"})),(0,n.a)("caching")?o.TP.hasPermissionInMetadata(l.AccessControlAction.DataSourcesCachingRead,E)&&v.children.push(D):a&&!g&&v.children.push({...D,url:D.url+"/upgrade",tabSuffix:()=>(0,r.J)({experimentId:C})}),v}function u(E,h){let y={text:""};for(const a of E.children)if(a.id.indexOf(h)>0){a.active=!0,y=a;break}return{main:E,node:y}}function f(E){const h=c({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:i,typeName:i,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:t.QE.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return u(h,E)}function d(E){return E.find(h=>h.type==="dashboard")!==void 0}},36227:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>M,Bs:()=>u,C_:()=>h,E1:()=>m,Gc:()=>i,IJ:()=>v,Ks:()=>g,QZ:()=>P,TN:()=>o,Tk:()=>y,UP:()=>D,eB:()=>d,f$:()=>c,gZ:()=>l,jz:()=>s,lg:()=>C,qR:()=>b,rb:()=>E});var t=e(30038),n=e(19484);const r={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.R.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.VP)("dataSources/dataSourceLoaded"),o=(0,t.VP)("dataSources/dataSourcesLoad"),m=(0,t.VP)("dataSources/dataSourcesLoaded"),l=(0,t.VP)("dataSources/dataSourceMetaLoaded"),i=(0,t.VP)("dataSources/dataSourcePluginsLoad"),c=(0,t.VP)("dataSources/dataSourcePluginsLoaded"),u=(0,t.VP)("dataSources/setDataSourcesSearchQuery"),f=(0,t.VP)("dataSources/setDataSourcesLayoutMode"),d=(0,t.VP)("dataSources/setDataSourceTypeSearchQuery"),E=(0,t.VP)("dataSources/setDataSourceName"),h=(0,t.VP)("dataSources/setIsDefault"),y=(0,t.VP)("dataSources/setIsSortAscending"),a=(O=r,S)=>o.match(S)?{...O,isLoadingDataSources:!0}:m.match(S)?{...O,isLoadingDataSources:!1,dataSources:S.payload,dataSourcesCount:S.payload.length}:s.match(S)?{...O,dataSource:S.payload}:u.match(S)?{...O,searchQuery:S.payload}:f.match(S)?{...O,layoutMode:S.payload}:i.match(S)?{...O,plugins:[],isLoadingDataSourcePlugins:!0}:c.match(S)?{...O,plugins:S.payload.plugins,categories:S.payload.categories,isLoadingDataSourcePlugins:!1}:d.match(S)?{...O,dataSourceTypeSearchQuery:S.payload}:l.match(S)?{...O,dataSourceMeta:S.payload}:E.match(S)?{...O,dataSource:{...O.dataSource,name:S.payload}}:h.match(S)?{...O,dataSource:{...O.dataSource,isDefault:S.payload}}:y.match(S)?{...O,isSortAscending:S.payload}:O,v={testingStatus:{},loadError:null,loading:!0,plugin:null},g=(0,t.VP)("dataSourceSettings/initDataSourceSettingsSucceeded"),b=(0,t.VP)("dataSourceSettings/initDataSourceSettingsFailed"),P=(0,t.VP)("dataSourceSettings/testDataSourceStarting"),C=(0,t.VP)("dataSourceSettings/testDataSourceSucceeded"),D=(0,t.VP)("dataSourceSettings/testDataSourceFailed"),M={dataSources:a,dataSourceSettings:(O=v,S)=>g.match(S)?{...O,plugin:S.payload,loadError:null,loading:!1}:b.match(S)?{...O,plugin:null,loadError:S.payload.message,loading:!1}:P.match(S)?{...O,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:C.match(S)?{...O,testingStatus:{status:S.payload?.status,message:S.payload?.message,details:S.payload?.details}}:D.match(S)?{...O,testingStatus:{status:"error",message:S.payload?.message,details:S.payload?.details}}:O}},54226:(Y,I,e)=>{"use strict";e.d(I,{Fj:()=>o,U4:()=>s,hp:()=>r,lv:()=>c,wC:()=>i,xs:()=>m,zC:()=>n});var t=e(41811);const n=(0,t.A)(u=>{const f=new RegExp(u.searchQuery,"i");return u.dataSources.filter(E=>f.test(E.name)||f.test(E.database)||f.test(E.type)).sort((E,h)=>u.isSortAscending?E.name.localeCompare(h.name):h.name.localeCompare(E.name))}),r=(0,t.A)(u=>{const f=new RegExp(u.dataSourceTypeSearchQuery,"i");return u.plugins.filter(d=>f.test(d.name))}),s=(u,f)=>u.dataSource.uid===f?u.dataSource:{},o=(u,f)=>u.dataSourceMeta.id===f?u.dataSourceMeta:{},m=u=>u.searchQuery,l=u=>u.layoutMode,i=u=>u.dataSourcesCount,c=u=>u.isSortAscending},4589:(Y,I,e)=>{"use strict";e.d(I,{M1:()=>s,Mh:()=>r,TR:()=>o,V9:()=>n,_i:()=>l,kg:()=>m,m3:()=>i});var t=e(14110);const n=c=>{(0,t.rR)("grafana_ds_add_datasource_clicked",c)},r=c=>{(0,t.rR)("grafana_ds_test_datasource_clicked",c)},s=c=>{(0,t.rR)("grafana_ds_explore_datasource_clicked",c)},o=c=>{(0,t.rR)("grafana_ds_create_dashboard_clicked",c)},m=c=>{(0,t.rR)("grafana_ds_datasources_list_viewed",c)},l=c=>{(0,t.rR)("connections_datasources_settings_clicked",{item:c})},i=c=>{(0,t.rR)("connections_datasources_ds_configured",c)}},11959:(Y,I,e)=>{"use strict";e.d(I,{h:()=>r});var t=e(76885),n=e(71733);const r=s=>{const o=JSON.stringify({datasource:s.name,context:"explore"});return t.kM.renderUrl(n.I.assureBaseUrl("/explore"),{left:o})}},38074:()=>{"use strict"},25148:(Y,I,e)=>{"use strict";e.d(I,{n:()=>y});var t=e(32196),n=e(96540),r=e(40845),s=e(55852),o=e(39268),m=e(14186),l=e(10354),i=e(95868),c=e(13840),u=e(40321),f=e(47694),d=e(21813),E=e(80744),h=e(19448);const y=g=>{const{value:b,src:P,name:C,placeholder:D,onChange:T,onClear:M,mediaType:O,folderName:S,size:p,color:x,maxFiles:A}=g,R=(0,r.of)(v),B=(0,r.$j)(),U=(0,n.createRef)(),F=n.createElement(h.i,{onChange:T,value:b,mediaType:O,folderName:S,maxFiles:A});let K=P;!K&&b&&(K=(0,d.D)(b));const w=x&&{fill:B.visualization.getColorByName(x)},L=()=>b&&K?n.createElement(f.y,{src:K,className:R.icon,style:{...w}}):n.createElement(s.z9,{variant:"primary",fill:"text",size:"sm"},"Set icon"),V=()=>n.createElement(o.C,null,n.createElement(m.I,{label:null,grow:!0},n.createElement(l.p,{value:a(P,C),placeholder:D,readOnly:!0,prefix:K&&n.createElement(f.y,{src:K,className:R.icon,style:{...w}}),suffix:n.createElement(s.$n,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:M})})));return n.createElement(i.I,{content:F},(N,z,J)=>n.createElement(n.Fragment,null,U.current&&n.createElement(c.A,{...J,referenceElement:U.current,onMouseEnter:N,onKeyDown:G=>{(0,u.Q)(G,z)}}),n.createElement("div",{ref:U,className:R.pointer,onClick:N,onKeyDown:G=>{G.key==="Enter"&&N()},role:"button",tabIndex:0},p===E.Iy.SMALL&&L(),p===E.Iy.NORMAL&&V())))};function a(g,b){if(g?.startsWith("public/img/icons")){const P=b?.lastIndexOf(".svg")??0;if(P>0)return b.substring(0,P)}return b}const v=g=>({pointer:(0,t.css)`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:(0,t.css)`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},19448:(Y,I,e)=>{"use strict";e.d(I,{i:()=>K});var t=e(32196),n=e(80279),r=e(7887),s=e(87073),o=e(96540),m=e(17172),l=e(40845),i=e(55852),c=e(2913),u=e(80744),f=e(88575),d=e(37270),E=e(47694);function h({secondaryText:L="Drag and drop here or browse"}){const V=(0,l.of)(a);return o.createElement("div",{className:V.iconWrapper},o.createElement("small",{className:V.small},L),o.createElement(i.$n,{type:"button",icon:"upload"},"Upload"))}const y=({mediaType:L,setFormData:V,setUpload:N,error:z})=>{const J=(0,l.of)(a),[G,H]=(0,o.useState)(!1),[q,le]=(0,o.useState)(""),me=()=>o.createElement(f.D,{label:"Preview"},o.createElement("div",{className:J.iconPreview},L===u.zu.Icon&&o.createElement(E.y,{src:q,className:J.img}),L===u.zu.Image&&o.createElement("img",{src:q,alt:"Preview of the uploaded file",className:J.img}))),k=X=>{fetch(`/api/storage/delete/upload/${X.file.name}`,{method:"DELETE"}).catch(j=>console.error("cannot delete file",j))},ee=L==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return o.createElement(d.gH,{readAs:"readAsBinaryString",onFileRemove:k,options:{accept:ee,multiple:!1,onDrop:X=>{let j=new FormData;j.append("file",X[0]),le(URL.createObjectURL(X[0])),H(!0),V(j),N(!0)}}},z.message!==""&&G?o.createElement("p",null,z.message):G?o.createElement(me,null):o.createElement(h,null))};function a(L,V){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:(0,t.css)`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${L.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${L.colors.border.medium};
      background-color: ${V?L.colors.background.secondary:L.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:(0,t.css)`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:(0,t.css)`
      margin: ${L.spacing(2,0,1)};
    `,small:(0,t.css)`
      color: ${L.colors.text.secondary};
      margin-bottom: ${L.spacing(2)};
    `,iconContainer:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:(0,t.css)`
      width: 238px;
      height: 198px;
      border: 1px solid ${L.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:(0,t.css)`
      width: 147px;
      height: 147px;
      fill: ${L.colors.text.primary};
    `}}var v=e(88323),g=e(67647),b=e(31193),P=e(70713),C=e(97222);const D=(0,o.memo)(function(V){const{columnIndex:N,rowIndex:z,style:J,data:G}=V,{cards:H,columnCount:q,onChange:le,selected:me}=G,k=N+z*q,ee=H[k],X=(0,l.of)(M);return o.createElement("div",{style:J},ee&&o.createElement("div",{key:ee.value,className:me===ee.value?(0,t.cx)(X.card,X.selected):X.card,onClick:()=>le(ee.value),onKeyDown:j=>{j.key==="Enter"&&le(ee.value)},role:"button",tabIndex:0},ee.imgUrl.endsWith(".svg")?o.createElement(E.y,{src:ee.imgUrl,className:X.img}):o.createElement("img",{src:ee.imgUrl,alt:"",className:X.img}),o.createElement("h6",{className:X.text},ee.label.slice(0,-4))))},C.t7),T=L=>{const{onChange:V,cards:N,value:z}=L,J=(0,l.of)(M);return o.createElement(P.Ay,{defaultWidth:680},({width:G,height:H})=>{const me=Math.floor(G/90),k=Math.ceil(N.length/me);return o.createElement(C.yi,{width:G,height:H,columnCount:me,columnWidth:90,rowCount:k,rowHeight:90,itemData:{cards:N,columnCount:me,onChange:V,selected:z},className:J.grid},D)})},M=L=>({card:(0,t.css)`
    display: inline-block;
    width: 90px;
    height: 90px;
    margin: 0.75rem;
    margin-left: 15px;
    text-align: center;
    cursor: pointer;
    position: relative;
    background-color: transparent;
    border: 1px solid transparent;
    border-radius: 8px;
    padding-top: 6px;
    :hover {
      border-color: ${L.colors.action.hover};
      box-shadow: ${L.shadows.z2};
    }
  `,selected:(0,t.css)`
    border: 2px solid ${L.colors.primary.main};
    :hover {
      border-color: ${L.colors.primary.main};
    }
  `,img:(0,t.css)`
    width: 40px;
    height: 40px;
    object-fit: cover;
    vertical-align: middle;
    fill: ${L.colors.text.primary};
  `,text:(0,t.css)`
    color: ${L.colors.text.primary};
    white-space: nowrap;
    font-size: 12px;
    text-overflow: ellipsis;
    display: block;
    overflow: hidden;
  `,grid:(0,t.css)`
    border: 1px solid ${L.colors.border.medium};
  `}),O=L=>L===u.zu.Icon?[u.Iu.Icon,u.Iu.IOT,u.Iu.Marker]:[u.Iu.BG],S=(L,V)=>L.find(N=>V.startsWith(N.value))??L[0],p=L=>{const{value:V,mediaType:N,folderName:z,newValue:J,setNewValue:G,maxFiles:H}=L,q=(0,l.of)(x),le=O(N).map(ue=>({label:ue,value:ue})),[me,k]=(0,o.useState)(),[ee,X]=(0,o.useState)(S(le,V?.length?V:z)),[j,ne]=(0,o.useState)([]),[te,oe]=(0,o.useState)([]),ie=ue=>{ue?(ue=ue.toLowerCase(),oe(j.filter(be=>be.search.includes(ue)))):oe(j)};return(0,o.useEffect)(()=>{const ue=ee?.value;if(ue){const be=N===u.zu.Icon?ge=>ge.name.endsWith(".svg"):ge=>ge.name.endsWith(".png")||ge.name.endsWith(".gif");(0,b.tR)().get("-- Grafana --").then(ge=>{ge.listFiles(ue,H).subscribe({next:re=>{const ye=[];re.forEach(Be=>{if(be(Be)){const ve=Be.name.lastIndexOf(".");ye.push({value:`${ue}/${Be.name}`,label:Be.name,search:(ve?Be.name.substring(0,ve):Be.name).toLowerCase(),imgUrl:`public/${ue}/${Be.name}`})}}),ne(ye),oe(ye)}})})}},[N,ee,H]),o.createElement(o.Fragment,null,o.createElement(f.D,null,o.createElement(v.l6,{options:le,onChange:X,value:ee,menuShouldPortal:!1})),o.createElement(f.D,null,o.createElement(g.Z,{value:me??"",placeholder:"Search",onChange:ue=>{ie(ue),k(ue)}})),te&&o.createElement("div",{className:q.cardsWrapper},o.createElement(T,{cards:te,onChange:ue=>G(ue),value:J})))},x=L=>({cardsWrapper:(0,t.css)`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var A=e(10354),R=e(60029),B=e(21813);const U=L=>{const{newValue:V,setNewValue:N,mediaType:z}=L,J=(0,l.of)(F),G=(0,B.D)(V);let H=V?.substring(V.lastIndexOf("/")+1,V.lastIndexOf("."));return H.length>20&&(H=H.substring(0,20)+"..."),o.createElement(o.Fragment,null,o.createElement(f.D,null,o.createElement(A.p,{onChange:q=>N(q.currentTarget.value),value:V})),o.createElement("div",{className:J.iconContainer},o.createElement(f.D,{label:"Preview"},o.createElement("div",{className:J.iconPreview},z===u.zu.Icon&&o.createElement(E.y,{src:G,className:J.img}),z===u.zu.Image&&V&&o.createElement("img",{src:G,alt:"Preview of the selected URL",className:J.img}))),o.createElement(R.J,null,H)))},F=L=>({iconContainer:(0,t.css)`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:(0,t.css)`
    width: 238px;
    height: 198px;
    border: 1px solid ${L.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:(0,t.css)`
    width: 147px;
    height: 147px;
    fill: ${L.colors.text.primary};
  `}),K=L=>{const{value:V,onChange:N,mediaType:z,folderName:J,maxFiles:G}=L,H=(0,l.of)(w),q=()=>{N(V)},le=(0,o.createRef)(),{dialogProps:me}=(0,n.s)({},le),{overlayProps:k}=(0,s.e)({onClose:q,isDismissable:!0,isOpen:!0},le),ee=V&&V.includes("://"),[X,j]=(0,o.useState)(V??""),[ne,te]=(0,o.useState)(ee?u.QC.URL:u.QC.Folder),[oe,ie]=(0,o.useState)(new FormData),[ue,be]=(0,o.useState)(!1),[ge,re]=(0,o.useState)({message:""}),ye=Se=>`${H.resourcePickerPopoverTab} ${ne===Se&&H.resourcePickerPopoverActiveTab}`,Be=()=>o.createElement(p,{value:V,mediaType:z,folderName:J,newValue:X,setNewValue:j,maxFiles:G}),ve=()=>o.createElement(U,{newValue:X,setNewValue:j,mediaType:z}),Me=()=>o.createElement(y,{mediaType:z,setFormData:ie,setUpload:be,newValue:X,error:ge}),ke=()=>{switch(ne){case u.QC.Folder:return Be();case u.QC.URL:return ve();case u.QC.Upload:return Me();default:return Be()}};return o.createElement(r.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},o.createElement("section",{ref:le,...k,...me},o.createElement("div",{className:H.resourcePickerPopover},o.createElement("div",{className:H.resourcePickerPopoverTabs},o.createElement("button",{className:ye(u.QC.Folder),onClick:()=>te(u.QC.Folder)},"Folder"),o.createElement("button",{className:ye(u.QC.URL),onClick:()=>te(u.QC.URL)},"URL")),o.createElement("div",{className:H.resourcePickerPopoverContent},ke(),o.createElement("div",{className:H.buttonRow},o.createElement(i.$n,{variant:"secondary",onClick:()=>q(),fill:"outline"},"Cancel"),o.createElement(i.$n,{variant:X&&X!==V?"primary":"secondary",onClick:()=>{ue?fetch("/api/storage/upload",{method:"POST",body:oe}).then(Se=>{if(Se.status>=400){Se.json().then(We=>re(We));return}else return Se.json()}).then(Se=>{(0,m.AI)().get(`api/storage/read/${Se.path}`).then(()=>j(`${c.config.appUrl}api/storage/read/${Se.path}`)).then(()=>N(`${c.config.appUrl}api/storage/read/${Se.path}`))}).catch(Se=>console.error(Se)):N(X)}},"Select"))))))},w=L=>({resourcePickerPopover:(0,t.css)`
    border-radius: ${L.shape.radius.default};
    box-shadow: ${L.shadows.z3};
    background: ${L.colors.background.primary};
    border: 1px solid ${L.colors.border.weak};
  `,resourcePickerPopoverTab:(0,t.css)`
    width: 50%;
    text-align: center;
    padding: ${L.spacing(1,0)};
    background: ${L.colors.background.secondary};
    color: ${L.colors.text.secondary};
    font-size: ${L.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:(0,t.css)`
    color: ${L.colors.text.primary};
    font-weight: ${L.typography.fontWeightMedium};
    background: ${L.colors.background.primary};
  `,resourcePickerPopoverContent:(0,t.css)`
    width: 315px;
    font-size: ${L.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${L.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:(0,t.css)`
    display: flex;
    width: 100%;
    border-radius: ${L.shape.radius.default} ${L.shape.radius.default} 0 0;
  `,buttonRow:(0,t.css)({display:"flex",justifyContent:"center",gap:L.spacing(2),padding:L.spacing(1)})})},63577:(Y,I,e)=>{"use strict";e.d(I,{MediaType:()=>t.zu,ResourceFolderName:()=>t.Iu,findField:()=>o.UI,findFieldIndex:()=>o.gG,getColorDimension:()=>m,getPublicOrAbsoluteUrl:()=>h.D,getResourceDimension:()=>h.$,getScalarDimension:()=>a.H,getScaledDimension:()=>i.hX,getScaledDimensionForField:()=>i.qx,getTextDimension:()=>d});var t=e(80744),n=e(8066),r=e(58563),s=e(57875),o=e(33924);function m(v,g,b){return l((0,o.UI)(v,g.field),g,b)}function l(v,g,b){if(!v){const D=b.visualization.getColorByName(g.fixed??"grey");return{isAssumed:!!g.field?.length||!g.fixed,fixed:D,value:()=>D,get:T=>D}}const P=(0,n.Qi)(v);if(P.isByValue||v.config.mappings?.length){const D=(0,r.xg)(v,!0);D!==v.config&&(v={...v,config:D},v.state=void 0);const T=(0,s.J)({field:v,theme:b}),M=O=>T(O).color??"#ccc";return{field:v,get:O=>M(v.values[O]),value:()=>M((0,o.sB)(v))}}const C=P.getCalculator(v,b)(0,0);return{fixed:C,value:()=>C,get:D=>C,field:v}}var i=e(18379),c=e(11261),u=e(83195),f=e(52622);function d(v,g){const b=g.field?(0,o.UI)(v,g.field):v?.fields.find(P=>P.type===c.PU.string);return E(b,g)}function E(v,g){let b=g.fixed;const P=g.mode??f.RU.Fixed;if(P===f.RU.Fixed)return{isAssumed:!b,fixed:b,value:()=>b,get:D=>b};if(P===f.RU.Template){const D=T=>`TEMPLATE[${g.fixed} // ${T}]`;return v?{field:v,get:T=>D(v.values[T]),value:()=>D((0,o.sB)(v))}:(b=D(""),{isAssumed:!0,fixed:b,value:()=>b,get:T=>b})}if(!v)return{isAssumed:!0,fixed:b,value:()=>b,get:D=>b};let C=D=>(0,u.cN)(v.display(D));return{field:v,get:D=>C(v.values[D]),value:()=>C((0,o.sB)(v))}}var h=e(21813),y=e(38074),a=e(26781)},21813:(Y,I,e)=>{"use strict";e.d(I,{$:()=>s,D:()=>r});var t=e(52622),n=e(33924);function r(o){return o?o.indexOf(":/")>0?o:window.__grafana_public_path__+o:""}function s(o,m){const l=m.mode??t.q_.Fixed;if(l===t.q_.Fixed){const u=r(m.fixed);return{isAssumed:!u,fixed:u,value:()=>u,get:f=>u}}const i=(0,n.UI)(o,m.field);if(!i){const u="";return{isAssumed:!0,fixed:u,value:()=>u,get:f=>u}}if(l===t.q_.Mapping){const u=f=>r(`${f}`);return{field:i,get:f=>u(i.values[f]),value:()=>u((0,n.sB)(i))}}const c=u=>{if(i&&i.display){const f=i.display(u).icon;return r(f??"")}return""};return{field:i,get:u=>c(i.values[u]),value:()=>c((0,n.sB)(i))}}},26781:(Y,I,e)=>{"use strict";e.d(I,{H:()=>r});var t=e(52622),n=e(33924);function r(o,m){return s((0,n.UI)(o,m?.field),m)}function s(o,m){if(!o){const c=m.fixed??0;return{isAssumed:!!m.field?.length||!m.fixed,fixed:c,value:()=>c,get:()=>c}}let l=c=>c%m.max;return m.mode===t.WQ.Clamped&&(l=c=>c<m.min?m.min:c>m.max?m.max:c),{field:o,get:c=>{const u=o.values[c];return u===null||typeof u!="number"?0:l(u)},value:()=>(0,n.sB)(o)}}},18379:(Y,I,e)=>{"use strict";e.d(I,{Nn:()=>m,Ru:()=>l,hX:()=>s,qx:()=>o});var t=e(58563),n=e(52622),r=e(33924);function s(i,c){return o((0,r.UI)(i,c?.field),c)}function o(i,c,u){if(!i){const a=c.fixed??0;return{isAssumed:!!c.field?.length||!c.fixed,fixed:a,value:()=>a,get:()=>a}}const f=(0,t.AP)(i),d=c.max-c.min;if(i.values.length<1||d<=0||f.delta<=0)return{fixed:c.min,value:()=>c.min,get:()=>c.min};let h=a=>c.min+a*d;if(u===n.QH.Quad){const a=Math.PI*(c.max/2)**2,v=Math.PI*(c.min/2)**2,g=a-v;h=b=>{let P=v+g*b;return Math.sqrt(P/Math.PI)*2}}const y=a=>{const v=i.values[a];let g=0;return v!==-1/0&&(g=(v-f.min)/f.delta),g>1?g=1:g<0&&(g=0),h(g)};return{get:y,value:()=>y((0,r.sB)(i)),field:i}}function m(i){return i||(i={min:0,max:1}),i.min==null&&(i.min=0),i.max==null&&(i.max=1),i}function l(i,c){let{min:u,max:f}=m(c);if(i||(i={}),i.max==null&&(i.max=f),i.min==null&&(i.min=u),i.min>i.max){const d=i.max;i.max=i.min,i.min=d}return i.min<u&&(i.min=u),i.max>f&&(i.max=f),i.fixed==null&&(i.fixed=i.min+(i.max-i.min)/2),i.field||(i.fixed>f?i.fixed=f:i.fixed<u&&(i.fixed=u)),i}},80744:(Y,I,e)=>{"use strict";e.d(I,{Iu:()=>r,Iy:()=>m,QC:()=>o,nG:()=>n,zu:()=>s});var t=e(52622);const n=Object.freeze({fixed:"",mode:t.RU.Field,field:""});var r=(l=>(l.Icon="img/icons/unicons",l.IOT="img/icons/iot",l.Marker="img/icons/marker",l.BG="img/bg",l))(r||{}),s=(l=>(l.Icon="icon",l.Image="image",l))(s||{}),o=(l=>(l.Folder="folder",l.URL="url",l.Upload="upload",l))(o||{}),m=(l=>(l.SMALL="small",l.NORMAL="normal",l))(m||{})},33924:(Y,I,e)=>{"use strict";e.d(I,{B_:()=>c,UI:()=>f,Wb:()=>m,XV:()=>l,b5:()=>i,gG:()=>d,sB:()=>E,wv:()=>u});var t=e(28240),n=e(75059),r=e(32264),s=e(63577),o=e(26781);function m(h,y){if(h?.series&&y.field)for(const a of h.series){const v=(0,s.getColorDimension)(a,y,r.$.theme2);if(!v.isAssumed||h.series.length===1)return v}return(0,s.getColorDimension)(void 0,y,r.$.theme2)}function l(h,y){if(h?.series&&y.field)for(const a of h.series){const v=(0,s.getScaledDimension)(a,y);if(!v.isAssumed||h.series.length===1)return v}return(0,s.getScaledDimension)(void 0,y)}function i(h,y){if(h?.series&&y.field)for(const a of h.series){const v=(0,o.H)(a,y);if(!v.isAssumed||h.series.length===1)return v}return(0,o.H)(void 0,y)}function c(h,y){if(h?.series&&y.field)for(const a of h.series){const v=(0,s.getResourceDimension)(a,y);if(!v.isAssumed||h.series.length===1)return v}return(0,s.getResourceDimension)(void 0,y)}function u(h,y){if(h?.series&&y.field)for(const a of h.series){const v=(0,s.getTextDimension)(a,y);if(!v.isAssumed||h.series.length===1)return v}return(0,s.getTextDimension)(void 0,y)}function f(h,y){const a=d(y,h);return a==null?void 0:h.fields[a]}function d(h,y,a){if(!(!y||!h?.length))for(let v=0;v<y.fields.length;v++){const g=y.fields[v];if(h===g.name)return v;const b=(0,t.Ct)(g,y,a);if(h===b)return v}}function E(h){const y=h.state?.calcs;if(y){const g=y[n.gy.lastNotNull];if(g!=null)return g}const a=h.values;let v=a.length-1;for(;v>=0;){const g=a[v--];if(g!=null)return g}}},9791:(Y,I,e)=>{"use strict";e.d(I,{k:()=>M});var t=e(2543),n=e(96540),r=e(84596),s=e(39070),o=e(47232),m=e(28528),l=e(24293),i=e(90708),c=e(28240),u=e(94624),f=e(24308),d=e(52622),E=e(40845),h=e(79041),y=e(41706),a=e(91126),v=e(33368),g=e(1932);function b(O,S,p){return(0,g.jM)(O,x=>{x.defaults.custom===void 0&&(x.defaults.custom={}),x.defaults.max=p;const{custom:A}=x.defaults;switch(A.stacking===void 0&&(A.stacking={group:"A"}),S){case"lines":A.drawStyle=d.GR.Line,A.stacking.mode=d.gs.None,A.fillOpacity=0;break;case"bars":A.drawStyle=d.GR.Bars,A.stacking.mode=d.gs.None,A.fillOpacity=100;break;case"points":A.drawStyle=d.GR.Points,A.stacking.mode=d.gs.None,A.fillOpacity=0;break;case"stacked_lines":A.drawStyle=d.GR.Line,A.stacking.mode=d.gs.Normal,A.fillOpacity=100,A.axisSoftMin=0;break;case"stacked_bars":A.drawStyle=d.GR.Bars,A.stacking.mode=d.gs.Normal,A.fillOpacity=100,A.axisSoftMin=0;break;default:{const R=S;throw new Error(`Invalid graph-style: ${R}`)}}})}function P(O,S,p){return(0,g.jM)(O,x=>{x.defaults.thresholds=p,x.defaults.custom=x.defaults.custom??{},x.defaults.custom.thresholdsStyle=S})}var C=e(56737),D=e(21423);function T(O){const[S,{inc:p}]=(0,C.A)(1),x=(0,r.A)(O);return(0,n.useMemo)(()=>{x&&!(0,D.J3)(O,x,D.bW)&&p()},[O,x,p]),S}function M({data:O,height:S,width:p,timeZone:x,absoluteRange:A,onChangeTime:R,loadingState:B,annotations:U,onHiddenSeriesChanged:F,splitOpenFn:K,graphStyle:w,tooltipDisplayMode:L=d.$N.Single,anchorToZero:V=!1,yAxisMaximum:N,thresholdsConfig:z,thresholdsStyle:J,eventBus:G,vizLegendOverrides:H}){const q=(0,E.$j)(),le=(0,r.A)(A),me=B===s.Gu.Loading&&le?le:A,k=(0,n.useMemo)(()=>({from:(0,o.KQ)(me.from),to:(0,o.KQ)(me.to),raw:{from:(0,o.KQ)(me.from),to:(0,o.KQ)(me.to)}}),[me.from,me.to]),ee=(0,n.useMemo)(()=>(0,m.O)((0,y.V)(y.S),"Explore"),[]),[X,j]=(0,n.useState)({defaults:{min:V?0:void 0,max:N||void 0,unit:"short",color:{mode:l.Y.PaletteClassic},custom:{drawStyle:d.GR.Line,fillOpacity:0,pointSize:5}},overrides:[]}),ne=(0,n.useMemo)(()=>{const re=b(X,w,N);return P(re,J,z)},[X,w,N,z,J]),te=(0,v.h)(K,k),oe=(0,n.useMemo)(()=>(0,i.we)({fieldConfig:ne,data:O,timeZone:x,replaceVariables:re=>re,theme:q,fieldConfigRegistry:ee,dataLinkPostProcessor:te}),[ee,O,x,q,ne,te]),ie=(0,n.useMemo)(()=>(0,i.we)({fieldConfig:{defaults:{},overrides:[]},data:U,timeZone:x,replaceVariables:re=>re,theme:q,dataLinkPostProcessor:te}),[U,x,q,te]),ue=T(oe);(0,n.useEffect)(()=>{if(F){const re=[];oe.forEach(ye=>{ye.fields.map(ve=>ve.config?.custom?.hideFrom?.viz).every(t.identity)&&re.push((0,c.Ri)(ye))}),F(re)}},[oe,F]);const be={eventsScope:"explore",eventBus:G,sync:()=>u.y.Off,onToggleSeriesVisibility(re,ye){j((0,a.M)(re,ye,X,O))},dataLinkPostProcessor:te},ge=(0,n.useMemo)(()=>({tooltip:{mode:L,sort:d.xB.None},legend:{displayMode:d.lm.List,showLegend:!0,placement:"bottom",calcs:[],...H}}),[L,H]);return n.createElement(h.XF,{value:be},n.createElement(f.m,{data:{series:oe,timeRange:k,state:B,annotations:ie,structureRev:ue},pluginId:"timeseries",title:"",width:p,height:S,onChangeTimeRange:R,timeZone:x,options:ge}))}},72519:(Y,I,e)=>{"use strict";e.d(I,{y:()=>T});var t=e(32196),n=e(96540),r=e(42941),s=e(40845),o=e(91052),m=e(14578),l=e(56034),i=e(55852),c=e(44836),u=e(34028),f=e(9791),d=e(94354),E=e(31678);const h=E.EXPLORE_GRAPH_STYLES.map(O=>({value:O,label:O[0].toUpperCase()+O.slice(1).replace(/_/," ")}));function y(O){const{graphStyle:S,onChangeGraphStyle:p}=O;return n.createElement(d.z,{size:"sm",options:h,value:S,onChange:p})}var a=e(33390);const v="grafana.explore.style.graph",g=O=>{store.set(v,O)},b=()=>C(a.A.get(v)),P="lines",C=O=>E.EXPLORE_GRAPH_STYLES.find(p=>p===O)??P,D=20,T=({data:O,eventBus:S,height:p,width:x,absoluteRange:A,timeZone:R,annotations:B,onChangeTime:U,splitOpenFn:F,thresholdsConfig:K,thresholdsStyle:w,loadingState:L,statusMessage:V})=>{const[N,z]=(0,r.A)(!1),[J,G]=(0,n.useState)(b),H=(0,s.of)(M),q=(0,n.useCallback)(me=>{(0,u.ng)(me),G(me)},[]),le=(0,n.useMemo)(()=>N?O:O.slice(0,D),[O,N]);return n.createElement(o.NR,{title:(0,c.t)("graph.container.title","Graph"),titleItems:[!N&&D<O.length&&n.createElement("div",{key:"disclaimer",className:H.timeSeriesDisclaimer},n.createElement("span",{className:H.warningMessage},n.createElement(m.I,{name:"exclamation-triangle","aria-hidden":"true"}),n.createElement(c.x6,{i18nKey:"graph.container.show-only-series"},"Showing only ",{MAX_NUMBER_OF_TIME_SERIES:D}," series")),n.createElement(l.m,{content:(0,c.t)("graph.container.content","Rendering too many series in a single panel may impact performance and make data harder to read. Consider refining your queries.")},n.createElement(i.$n,{variant:"secondary",size:"sm",onClick:z},n.createElement(c.x6,{i18nKey:"graph.container.show-all-series"},"Show all ",{length:O.length}))))].filter(Boolean),width:x,height:p,loadingState:L,statusMessage:V,actions:n.createElement(y,{graphStyle:J,onChangeGraphStyle:q})},(me,k)=>n.createElement(f.k,{graphStyle:J,data:le,height:k,width:me,absoluteRange:A,onChangeTime:U,timeZone:R,annotations:B,splitOpenFn:F,loadingState:L,thresholdsConfig:K,thresholdsStyle:w,eventBus:S}))},M=O=>({timeSeriesDisclaimer:(0,t.css)({label:"time-series-disclaimer",display:"flex",alignItems:"center",gap:O.spacing(1)}),warningMessage:(0,t.css)({display:"flex",alignItems:"center",gap:O.spacing(.5),color:O.colors.warning.main,fontSize:O.typography.bodySmall.fontSize})})},97186:(Y,I,e)=>{"use strict";e.d(I,{$:()=>t,r:()=>n});const t={showLabels:"grafana.explore.logs.showLabels",showTime:"grafana.explore.logs.showTime",wrapLogMessage:"grafana.explore.logs.wrapLogMessage",prettifyLogMessage:"grafana.explore.logs.prettifyLogMessage",logsSortOrder:"grafana.explore.logs.sortOrder",logContextWrapLogMessage:"grafana.explore.logs.logContext.wrapLogMessage"},n="grafana.explore.logs.visualisationType"},9651:(Y,I,e)=>{"use strict";e.d(I,{a:()=>l,d:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(87066),o=e(9663);const m=(c,u)=>({valueNavigation:(0,t.css)`
      width: ${o.QH};
      font-weight: bold;
    `,valueNavigationWrapper:(0,t.css)`
      display: flex;
      justify-content: flex-end;
    `,itemLabelsWrap:(0,t.css)`
      ${u?"":`border-bottom: 1px solid ${c.colors.border.medium}`};
    `}),l=c=>c.includes(s.gs)?c.replace(s.gs,""):c,i=({valueLabels:c,expanded:u})=>{const f=(0,r.of)(m,u);return n.createElement("div",{className:f.itemLabelsWrap},n.createElement("div",{className:f.valueNavigationWrapper},c.map((d,E)=>n.createElement("span",{className:f.valueNavigation,key:d.name},l(d.name)))))}},9663:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>P,QH:()=>y,Jd:()=>a});var t=e(32196),n=e(96540),r=e(73287),s=e(14110),o=e(40845),m=e(29158),l=e(9651),i=e(57408);const c=(C,D)=>({rowWrapper:(0,t.css)`
    position: relative;
    min-width: ${y};
    padding-right: 5px;
  `,rowValue:(0,t.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    display: block;
    padding-right: 10px;

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:before {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(to right, transparent calc(100% - 25px), ${C.colors.background.primary});
    }
  `,rowValuesWrap:(0,t.css)`
    padding-left: ${a};
    width: calc(${D} * ${y});
    display: flex;
  `}),u=({totalNumberOfValues:C,values:D,hideFieldsWithoutValues:T})=>{const M=(0,o.of)(c,C);return n.createElement("div",{role:"cell",className:M.rowValuesWrap},D?.map(O=>T&&(O.value===void 0||O.value===i.M)?null:n.createElement("span",{key:O.key,className:M.rowWrapper},n.createElement("span",{className:M.rowValue},O.value))))},f=C=>{const D=C.isDark?"#ce9178":"#a31515",T=C.isDark?"#73bf69":"#56a64b";return{metricName:(0,t.css)`
      color: ${T};
    `,metricValue:(0,t.css)`
      color: ${D};
    `,expanded:(0,t.css)`
      display: block;
      text-indent: 1em;
    `}},E=({value:C,index:D,length:T,isExpandedView:M})=>{const O=(0,o.of)(f),S=C.key,p=C.value;return n.createElement("span",{className:M?O.expanded:"",key:D},n.createElement("span",{className:O.metricName},S),n.createElement("span",null,"="),n.createElement("span",null,'"'),n.createElement("span",{className:O.metricValue},p),n.createElement("span",null,'"'),D<T-1&&n.createElement("span",null,", "))},h="20px",y="80px",a="25px",v=(C,D,T)=>({rowWrapper:(0,t.css)`
    border-bottom: 1px solid ${C.colors.border.medium};
    display: flex;
    position: relative;
    padding-left: 22px;
    ${T?"":"align-items: center;"}
    ${T?"":"height: 100%;"}
  `,copyToClipboardWrapper:(0,t.css)`
    position: absolute;
    left: 0;
    ${T?"":"bottom: 0;"}
    ${T?"top: 4px;":"top: 0;"}
    margin: auto;
    z-index: 1;
    height: 16px;
    width: 16px;
  `,rowLabelWrapWrap:(0,t.css)`
    position: relative;
    width: calc(100% - (${D} * ${y}) - ${a});
  `,rowLabelWrap:(0,t.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    padding-right: ${h};

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:after {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(
        to right,
        transparent calc(100% - ${h}),
        ${C.colors.background.primary}
      );
    }
  `});function g(C){let D=[],T=[];for(const M in C)M in C&&C[M]&&!M.includes("Value")?D.push({key:M,value:C[M]}):M in C&&C[M]&&M.includes("Value")&&T.push({key:M,value:C[M]});return{values:T,attributeValues:D}}const P=({listItemData:C,listKey:D,totalNumberOfValues:T,valueLabels:M,isExpandedView:O})=>{const{__name__:S,...p}=C,[x,A]=(0,r.A)(),R=M?.length??T,B=(0,o.of)(v,R,O),{values:U,attributeValues:F}=g(p),K=V=>V==="\u221E"||V==="Infinity"?"+Inf":V,w=`${S}{${F.map(V=>`${V.key}="${K(V.value)}"`)}}`,L=!!(M&&M?.length);return n.createElement(n.Fragment,null,M!==void 0&&O&&n.createElement(l.d,{valueLabels:M,expanded:O}),n.createElement("div",{key:D,className:B.rowWrapper},n.createElement("span",{className:B.copyToClipboardWrapper},n.createElement(m.K,{tooltip:"Copy to clipboard",onClick:()=>{(0,s.rR)("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),A(w)},name:"copy"})),n.createElement("span",{role:"cell",className:B.rowLabelWrapWrap},n.createElement("div",{className:B.rowLabelWrap},n.createElement("span",null,S),n.createElement("span",null,"{"),n.createElement("span",null,F.map((V,N)=>n.createElement(E,{isExpandedView:O,value:V,key:N,index:N,length:F.length}))),n.createElement("span",null,"}"))),n.createElement(u,{hideFieldsWithoutValues:L,totalNumberOfValues:R,values:U})))}},57408:(Y,I,e)=>{"use strict";e.d(I,{E:()=>r,M:()=>n});var t=e(83195);const n=" ",r=s=>{const o={},m=[],l=s.fields.filter(u=>!["Time"].includes(u.name));let i=l.find(u=>u.name==="__name__")?.values??[];!i.length&&l.length&&l[0].values.length&&(i=Array(l[0].values.length).fill(""));const c=s.fields.filter(u=>!["__name__"].includes(u.name));return i.forEach(function(u,f){o[u]={};const d=o[u][f]??{};for(const E of c){const h=E.name;if(h!=="Time")if(typeof E?.display=="function"){const y=E?.display(E.values[f]);if(!isNaN(y.numeric))d[h]=y.numeric.toString(10);else{const a=(0,t.cN)(y);a?d[h]=a:h.includes("Value #")&&(d[h]=n)}}else console.warn("Field display method is missing!")}m.push({...d,__name__:u})}),m}},97814:(Y,I,e)=>{"use strict";e.d(I,{g:()=>r});var t=e(96540),n=e(47232);const r=({timeInMs:o,className:m,humanize:l})=>t.createElement("span",{className:m},s(o,l)),s=(o,m=!1)=>{const l=o/1e3;if(!m)return`${l.toFixed(1)}s`;const i=(0,n.Ah)(l,"seconds"),c=i.hours(),u=i.minutes(),f=i.seconds();return c?`${c}h ${u}m ${f}s`:u?`${u}m ${f}s`:`${f}s`}},92599:(Y,I,e)=>{"use strict";e.d(I,{V:()=>Ee});var t=e(32196),n=e(96540),r=e(42941),s=e(41987),o=e(6709);function m(ae){if(ae?.tracesToLogsV2)return ae.tracesToLogsV2;if(!ae?.tracesToLogs)return;const fe={customQuery:!1};return fe.datasourceUid=ae.tracesToLogs.datasourceUid,fe.tags=ae.tracesToLogs.mapTagNamesEnabled?ae.tracesToLogs.mappedTags:ae.tracesToLogs.tags?.map(Ce=>({key:Ce})),fe.filterByTraceID=ae.tracesToLogs.filterByTraceID,fe.filterBySpanID=ae.tracesToLogs.filterBySpanID,fe.spanStartTimeShift=ae.tracesToLogs.spanStartTimeShift,fe.spanEndTimeShift=ae.tracesToLogs.spanEndTimeShift,fe}function l({options:ae,onOptionsChange:fe}){const Ce=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource","googlecloud-logging-datasource"],Re=useMemo(()=>m(ae.jsonData)||{customQuery:!1},[ae.jsonData]),{query:Oe="",tags:ze,customQuery:Xe}=Re,Ze=useCallback(et=>{fe({...ae,jsonData:{...ae.jsonData,tracesToLogsV2:{...Re,...et},tracesToLogs:void 0}})},[fe,ae,Re]);return React.createElement("div",{className:css({width:"100%"})},React.createElement(InlineFieldRow,null,React.createElement(InlineField,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},React.createElement(DataSourcePicker,{inputId:"trace-to-logs-data-source-picker",filter:et=>Ce.includes(et.type),current:Re.datasourceUid,noDefault:!0,width:40,onChange:et=>Ze({datasourceUid:et.uid})}))),React.createElement(InlineFieldRow,null,React.createElement(IntervalInput,{label:c("start"),tooltip:u("start","0"),value:Re.spanStartTimeShift||"",onChange:et=>{Ze({spanStartTimeShift:et})},isInvalidError:f})),React.createElement(InlineFieldRow,null,React.createElement(IntervalInput,{label:c("end"),tooltip:u("end","0"),value:Re.spanEndTimeShift||"",onChange:et=>{Ze({spanEndTimeShift:et})},isInvalidError:f})),React.createElement(InlineFieldRow,null,React.createElement(InlineField,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod', 'service.name', 'service.namespace'",label:"Tags",labelWidth:26},React.createElement(TagMappingInput,{values:ze??[],onChange:et=>Ze({tags:et})}))),React.createElement(i,{disabled:Xe,type:"trace",id:"filterByTraceID",value:!!Re.filterByTraceID,onChange:et=>Ze({filterByTraceID:et})}),React.createElement(i,{disabled:Xe,type:"span",id:"filterBySpanID",value:!!Re.filterBySpanID,onChange:et=>Ze({filterBySpanID:et})}),React.createElement(InlineFieldRow,null,React.createElement(InlineField,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},React.createElement(InlineSwitch,{id:"customQuerySwitch",value:Xe,onChange:et=>Ze({customQuery:et.currentTarget.checked})}))),Xe&&React.createElement(InlineField,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},React.createElement(Input,{label:"Query",type:"text",allowFullScreen:!0,value:Oe,onChange:et=>Ze({query:et.currentTarget.value})})))}function i(ae){return React.createElement(InlineFieldRow,null,React.createElement(InlineField,{disabled:ae.disabled,label:`Filter by ${ae.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${ae.type} ID, where the ${ae.type} ID should be part of the log line`},React.createElement(InlineSwitch,{id:ae.id,value:ae.value,onChange:fe=>ae.onChange(fe.currentTarget.checked)})))}const c=ae=>`Span ${ae} time shift`,u=(ae,fe)=>`Shifts the ${ae} time of the span. Default: ${fe} (Time units can be used here, for example: 5s, -1m, 3h)`,f="Invalid time shift. See tooltip for examples.",d=({options:ae,onOptionsChange:fe})=>{let Ce=ae.type;return Ce+=ae.type==="tempo"?"/configure-tempo-data-source/#trace-to-logs":"/#trace-to-logs",React.createElement(ConfigSection,{title:"Trace to logs",description:React.createElement(ConfigDescriptionLink,{description:"Navigate from a trace span to the selected data source's logs.",suffix:Ce,feature:"trace to logs"}),isCollapsible:!0,isInitiallyOpen:!0},React.createElement(l,{options:ae,onOptionsChange:fe}))};var E=e(72574),h=e(40845),y=e(31193),a=e(32901),v=e(31678),g=e(62256),b=e(56271),P=e(41811);const D=(ae,fe,Ce)=>{let Re;return Ce?Re=fe?.childSpanIds.find(Oe=>ae.has(Oe)&&ae.get(Oe).startTime+ae.get(Oe).duration<Ce):Re=fe.childSpanIds[0],Re?ae.get(Re):void 0},M=ae=>{const fe=[],Ce=[];ae.forEach(ze=>{if(ze.references[0]?.refType==="FOLLOWS_FROM"){fe.push(ze.spanID);const Xe=ae.get(ze.references[0].spanID);Xe.childSpanIds=Xe.childSpanIds.filter(Ze=>Ze!==ze.spanID),ae.set(Xe.spanID,{...Xe})}});const Re=ze=>{ze.forEach(Xe=>{const Ze=ae.get(Xe);Ze.hasChildren&&(Ce.push(...Ze.childSpanIds),Re(Ze.childSpanIds))})};return Re(fe),[...fe,...Ce].forEach(ze=>ae.delete(ze)),ae},S=ae=>{let fe=[...ae.keys()];return fe.forEach(Ce=>{const Re=ae.get(Ce);if(!(Re&&Re.references.length&&Re.depth))return;const Oe=ae.get(Re.references[0].spanID);if(!Oe){ae.delete(Re.spanID);return}const ze=Re.startTime+Re.duration,Xe=Oe.startTime+Oe.duration;if(Re.startTime>=Oe.startTime){if(Re.startTime>=Xe){ae.delete(Re.spanID),Oe.childSpanIds=Oe.childSpanIds.filter(Ze=>Ze!==Re.spanID);return}if(ze>Xe){ae.set(Re.spanID,{...Re,duration:Xe-Re.startTime});return}return}ze<=Oe.startTime?(ae.delete(Re.spanID),Oe.childSpanIds=Oe.childSpanIds.filter(Ze=>Ze!==Re.spanID)):ze<=Xe?ae.set(Re.spanID,{...Re,startTime:Oe.startTime,duration:ze-Oe.startTime}):ae.set(Re.spanID,{...Re,startTime:Oe.startTime,duration:Xe-Oe.startTime})}),fe=[...ae.keys()],fe.forEach(Ce=>{const Re=ae.get(Ce);if(Re.references.length){const Oe=ae.get(Re.references[0].spanID);Re.references[0].span=Oe,ae.set(Ce,{...Re})}}),ae},p=(ae,fe,Ce,Re)=>{const Oe=ae.get(fe);if(!Oe)return Ce;const ze=D(ae,Oe,Re);let Xe;if(ze)Xe={spanId:Oe.spanID,section_start:ze.startTime+ze.duration,section_end:Re||Oe.startTime+Oe.duration},Xe.section_start!==Xe.section_end&&Ce.push(Xe),p(ae,ze.spanID,Ce);else if(Xe={spanId:Oe.spanID,section_start:Oe.startTime,section_end:Re||Oe.startTime+Oe.duration},Xe.section_start!==Xe.section_end&&Ce.push(Xe),Oe.references.length){const Ze=Oe.references.filter(et=>et.refType==="CHILD_OF")[0].spanID;p(ae,Ze,Ce,Oe.startTime)}return Ce};function x(ae){let fe=[];const Ce=ae?.spans[0].spanID;if(Ce){const Re=ae.spans.reduce((Oe,ze)=>(Oe.set(ze.spanID,ze),Oe),new Map);try{const Oe=M(Re),ze=S(Oe);fe=p(ze,Ce,fe)}catch(Oe){console.log("error while computing critical path for a trace",Oe)}}return fe}const R=(0,P.A)(x);var B=e(3911),U=e(71656),F=e(30700);const K=.8,w=2,L=200,V=10,N=60,z=6;function J(ae,fe,Ce,Re,Oe){const ze=new Map,Xe=fe.length<N?N:Math.min(fe.length,L),Ze=window.innerWidth*2;ae.width=Ze,ae.height=Xe;const et=Math.min(z,Math.max(w,Xe/fe.length)),nt=Xe/fe.length,lt=ae.getContext("2d",{alpha:!1});if(lt){lt.fillStyle=Oe,lt.fillRect(0,0,Ze,Xe);for(let rt=0;rt<fe.length;rt++){const{valueWidth:ut,valueOffset:Et,serviceName:Ct}=fe[rt],Ut=Et/Ce*Ze;let Gt=ut/Ce*Ze;Gt<V&&(Gt=V);let Wt=ze.get(Ct);Wt||(Wt=`rgba(${Re(Ct).concat(K).join()})`,ze.set(Ct,Wt)),lt.fillStyle=Wt,lt.fillRect(Ut,rt*nt,Gt,et)}}}const G=(0,B.N)(ae=>({CanvasSpanGraph:(0,t.css)`
      label: CanvasSpanGraph;
      background: ${(0,U.R)(ae,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class H extends n.PureComponent{constructor(fe){super(fe),this.getColor=Ce=>(0,F.rY)(Ce,this.props.theme),this._setCanvasRef=Ce=>{this._canvasElm=Ce},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:fe,items:Ce}=this.props;J(this._canvasElm,Ce,fe,this.getColor,(0,U.R)(this.props.theme,"#fff"))}}render(){return n.createElement("canvas",{className:G(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const q=(0,h.cV)(H);var le=e(6389);const me=()=>({TickLabels:(0,t.css)`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:(0,t.css)`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function k(ae){const{numTicks:fe,duration:Ce}=ae,Re=(0,h.of)(me),Oe=[];for(let ze=0;ze<fe+1;ze++){const Xe=ze/fe,Ze=Xe===1?{right:"0%"}:{left:`${Xe*100}%`};Oe.push(n.createElement("div",{key:Xe,className:Re.TickLabelsLabel,style:Ze,"data-testid":"tick"},(0,le.a3)(Ce*Xe)))}return n.createElement("div",{className:Re.TickLabels,"data-testid":"TickLabels"},Oe)}var ee=e(46942),X=e.n(ee),j=e(55852),ne=e(92151);const te=()=>({GraphTick:(0,t.css)`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function oe(ae){const{numTicks:fe}=ae,Ce=(0,h.of)(te),Re=[];for(let Oe=1;Oe<fe;Oe++){const ze=`${Oe/fe*100}%`;Re.push(n.createElement("line",{className:Ce.GraphTick,x1:ze,y1:"0%",x2:ze,y2:"100%",key:Oe/fe}))}return n.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Re)}const ie=()=>({ScrubberHandleExpansion:X()((0,t.css)`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:X()((0,t.css)`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:X()((0,t.css)`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:(0,t.css)`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:(0,t.css)`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function ue({isDragging:ae,onMouseDown:fe,onMouseEnter:Ce,onMouseLeave:Re,position:Oe}){const ze=`${Oe*100}%`,Xe=(0,h.of)(ie),Ze=X()({[Xe.ScrubberDragging]:ae});return n.createElement("g",{className:Ze,"data-testid":"scrubber-component"},n.createElement("g",{"data-testid":"scrubber-component-g",className:Xe.ScrubberHandles,onMouseDown:fe,onMouseEnter:Ce,onMouseLeave:Re},n.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:ze,className:Xe.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),n.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:ze,className:Xe.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),n.createElement("line",{className:Xe.ScrubberLine,y2:"100%",x1:ze,x2:ze,"data-testid":"scrubber-component-line"}))}const be=(0,B.N)(ae=>{const fe="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Ce=(0,t.css)`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:(0,t.css)`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${fe} {
        display: unset;
      }
    `,ViewingLayerGraph:(0,t.css)`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,U.R)(ae,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:(0,t.css)`
      label: ViewingLayerInactive;
      fill: ${(0,U.R)(ae,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:(0,t.css)`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,U.R)(ae,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:(0,t.css)`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:(0,t.css)`
      label: ViewingLayerDrag;
      fill: ${(0,U.R)(ae,"#44f")};
    `,ViewingLayerFullOverlay:(0,t.css)`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Ce,ViewingLayerResetZoomHoverClassName:fe}}),ge={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function re(ae,fe){const[Ce,Re]=ae<fe?[ae,fe]:[fe,ae];return{x:`${Ce*100}%`,width:`${(Re-Ce)*100}%`,leadingX:`${fe*100}%`}}class ye extends n.PureComponent{constructor(fe){super(fe),this._setRoot=Ce=>{this._root=Ce},this._getDraggingBounds=Ce=>{if(!this._root)throw new Error("invalid state");const{left:Re,width:Oe}=this._root.getBoundingClientRect(),[ze,Xe]=this.props.viewRange.time.current;let Ze=1,et=0;return Ce===ge.SHIFT_START?Ze=Xe:Ce===ge.SHIFT_END&&(et=ze),{clientXLeft:Re,maxValue:Ze,minValue:et,width:Oe}},this._handleReframeMouseMove=({value:Ce})=>{this.props.updateNextViewRangeTime({cursor:Ce})},this._handleReframeMouseLeave=()=>{this._draggerReframe.resetBounds(),this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Ce})=>{const Re=Ce,{time:Oe}=this.props.viewRange,Xe={reframe:{anchor:Oe.reframe?Oe.reframe.anchor:Re,shift:Re}};this.props.updateNextViewRangeTime(Xe)},this._handleReframeDragEnd=({manager:Ce,value:Re})=>{const{time:Oe}=this.props.viewRange,ze=Oe.reframe?Oe.reframe.anchor:Re,[Xe,Ze]=Re<ze?[Re,ze]:[ze,Re];Ce.resetBounds(),this.props.updateViewRangeTime(Xe,Ze,"minimap")},this._handleScrubberEnterLeave=({type:Ce})=>{const Re=Ce===ne.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:Re})},this._handleScrubberDragUpdate=({event:Ce,tag:Re,type:Oe,value:ze})=>{Oe===ne.EUpdateTypes.DragStart&&Ce.stopPropagation(),Re===ge.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:ze}):Re===ge.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:ze})},this._handleScrubberDragEnd=({manager:Ce,tag:Re,value:Oe})=>{const[ze,Xe]=this.props.viewRange.time.current;let Ze;if(Re===ge.SHIFT_START)Ze=[Oe,Xe];else if(Re===ge.SHIFT_END)Ze=[ze,Oe];else throw new Error("bad state");Ce.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(Ze[0],Ze[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new ne.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:ge.REFRAME}),this._draggerStart=new ne.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:ge.SHIFT_START}),this._draggerEnd=new ne.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:ge.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(fe,Ce){const Re=be(this.props.theme),Oe=re(fe,Ce);return[n.createElement("rect",{key:"fill",className:X()(Re.ViewingLayerDraggedShift,Re.ViewingLayerDrag),x:Oe.x,y:"0",width:Oe.width,height:this.props.height-2}),n.createElement("rect",{key:"edge",className:X()(Re.ViewingLayerDrag),x:Oe.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:fe,viewRange:Ce,numTicks:Re,theme:Oe}=this.props,{preventCursorLine:ze}=this.state,{current:Xe,cursor:Ze,shiftStart:et,shiftEnd:nt,reframe:lt}=Ce.time,rt=et!=null||nt!=null||lt!=null,[ut,Et]=Xe;let Ct=0;ut&&(Ct=ut*100);let Ut=100;Et&&(Ut=100-Et*100);let Gt;!rt&&Ze!=null&&!ze&&(Gt=`${Ze*100}%`);const Wt=be(Oe);return n.createElement("div",{"aria-hidden":!0,className:Wt.ViewingLayer,style:{height:fe}},(ut!==0||Et!==1)&&n.createElement(j.$n,{onClick:this._resetTimeZoomClickHandler,className:X()(Wt.ViewingLayerResetZoom,Wt.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),n.createElement("svg",{height:fe,className:Wt.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},Ct>0&&n.createElement("rect",{x:0,y:0,height:"100%",width:`${Ct}%`,className:Wt.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),Ut>0&&n.createElement("rect",{x:`${100-Ut}%`,y:0,height:"100%",width:`${Ut}%`,className:Wt.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),n.createElement(oe,{numTicks:Re}),Gt&&n.createElement("line",{className:Wt.ViewingLayerCursorGuide,x1:Gt,y1:"0",x2:Gt,y2:fe-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),et!=null&&this._getMarkers(ut,et),nt!=null&&this._getMarkers(Et,nt),n.createElement(ue,{isDragging:et!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:ut||0}),n.createElement(ue,{isDragging:nt!=null,position:Et||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),lt!=null&&this._getMarkers(lt.anchor,lt.shift)),rt&&n.createElement("div",{className:Wt.ViewingLayerFullOverlay}))}}const Be=(0,h.cV)(ye),ve=()=>({container:(0,t.css)({padding:"0 0.5rem 0.5rem 0.5rem"}),canvasContainer:(0,t.css)({position:"relative"})}),Me=60,ke=4;function Se(ae){return{valueOffset:ae.relativeStartTime,valueWidth:ae.duration,serviceName:ae.process.serviceName}}function We(ae){return ae.spans.map(Se)}const De=(0,P.A)(We);class pe extends n.PureComponent{static{this.defaultProps={height:Me}}render(){const{height:fe,trace:Ce,viewRange:Re,updateNextViewRangeTime:Oe,updateViewRangeTime:ze}=this.props,Xe=ve();if(!Ce)return n.createElement("div",null);const Ze=De(Ce);return n.createElement("div",{className:Xe.container},n.createElement(k,{numTicks:ke,duration:Ce.duration}),n.createElement("div",{className:Xe.canvasContainer},n.createElement(q,{valueWidth:Ce.duration,items:Ze}),n.createElement(Be,{viewRange:Re,numTicks:ke,height:fe||Me,updateViewRangeTime:ze,updateNextViewRangeTime:Oe})))}}var Ne=e(28114);function Le(){const[ae,fe]=(0,n.useState)(new Set),Ce=(0,n.useCallback)(function(et){if(ae.size===0)return;let nt=-1,lt=!0;const rt=et.reduce((ut,Et)=>(Et.depth<=nt&&(lt=!0),lt&&ut.has(Et.spanID)&&(ut.delete(Et.spanID),lt=!1,nt=Et.depth),ut),new Set(ae));fe(rt)},[ae]),Re=(0,n.useCallback)(function(et){if(He(et,ae))return;let nt;const lt=et.reduce((rt,ut)=>(nt&&ut.depth<=nt.depth?(rt.add(nt.spanID),ut.hasChildren&&(nt=ut)):ut.hasChildren&&!rt.has(ut.spanID)&&(nt=ut),rt),new Set(ae));nt&&lt.add(nt.spanID),fe(lt)},[ae]),Oe=(0,n.useCallback)(function(){fe(new Set)},[]),ze=(0,n.useCallback)(function(et){if(He(et,ae))return;const nt=et.reduce((lt,rt)=>(rt.hasChildren&&lt.add(rt.spanID),lt),new Set);fe(nt)},[ae]),Xe=(0,n.useCallback)(function(et){const nt=new Set(ae);ae.has(et)?nt.delete(et):nt.add(et),fe(nt)},[ae]);return{childrenHiddenIDs:ae,expandOne:Ce,collapseOne:Re,expandAll:Oe,collapseAll:ze,childrenToggle:Xe}}function He(ae,fe){return ae.filter(Re=>Re.hasChildren).length===fe.size}function je(ae){const[fe,Ce]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{Ce(new Map)},[ae,Ce]);const Re=(0,n.useCallback)(function(Ze){const et=new Map(fe);et.has(Ze)?et.delete(Ze):et.set(Ze,new b.DetailState),Ce(et)},[fe]),Oe=(0,n.useCallback)(function(Ze,et){const nt=fe.get(Ze);if(!nt)return;const lt=nt.toggleLogItem(et),rt=new Map(fe);return rt.set(Ze,lt),Ce(rt)},[fe]),ze=(0,n.useCallback)(function(Ze,et){const nt=fe.get(Ze);if(!nt)return;const lt=nt.toggleReferenceItem(et),rt=new Map(fe);return rt.set(Ze,lt),Ce(rt)},[fe]);return{detailStates:fe,toggleDetail:Re,detailLogItemToggle:Oe,detailLogsToggle:(0,n.useCallback)(Xe=>at("logs",fe,Ce)(Xe),[fe]),detailWarningsToggle:(0,n.useCallback)(Xe=>at("warnings",fe,Ce)(Xe),[fe]),detailStackTracesToggle:(0,n.useCallback)(Xe=>at("stackTraces",fe,Ce)(Xe),[fe]),detailReferenceItemToggle:ze,detailReferencesToggle:(0,n.useCallback)(Xe=>at("references",fe,Ce)(Xe),[fe]),detailProcessToggle:(0,n.useCallback)(Xe=>at("process",fe,Ce)(Xe),[fe]),detailTagsToggle:(0,n.useCallback)(Xe=>at("tags",fe,Ce)(Xe),[fe])}}function at(ae,fe,Ce){return Re=>{const Oe=fe.get(Re);if(!Oe)return;let ze;ae==="tags"?ze=Oe.toggleTags():ae==="process"?ze=Oe.toggleProcess():ae==="warnings"?ze=Oe.toggleWarnings():ae==="references"?ze=Oe.toggleReferences():ae==="stackTraces"?ze=Oe.toggleStackTraces():ze=Oe.toggleLogs();const Xe=new Map(fe);Xe.set(Re,ze),Ce(Xe)}}function Ye(){const[ae,fe]=(0,n.useState)(new Set),Ce=(0,n.useCallback)(function(ze){fe(Xe=>{const Ze=new Set(Xe);return Ze.add(ze),Ze})},[]),Re=(0,n.useCallback)(function(ze){fe(Xe=>{const Ze=new Set(Xe);return Ze.delete(ze),Ze})},[]);return{hoverIndentGuideIds:ae,addHoverIndentGuideId:Ce,removeHoverIndentGuideId:Re}}var $e=e(15583);function xe(){const[ae,fe]=(0,n.useState)({time:{current:[0,1]}}),Ce=(0,n.useCallback)(function(ze){fe(Xe=>{const Ze={...Xe.time,...ze};return{...Xe,time:Ze}})},[]),Re=(0,n.useCallback)(function(ze,Xe){const et={current:[ze,Xe]};fe(nt=>({...nt,time:et}))},[]);return{viewRange:ae,updateViewRangeTime:Re,updateNextViewRangeTime:Ce}}const Fe=ae=>({noDataMsg:(0,t.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${ae.typography.h4.fontSize};
    color: ${ae.colors.text.secondary};
  `});function Ee(ae){const{traceProp:fe,datasource:Ce,topOfViewRef:Re,exploreId:Oe,createSpanLink:ze,focusedSpanId:Xe,createFocusSpanLink:Ze}=ae,{detailStates:et,toggleDetail:nt,detailLogItemToggle:lt,detailLogsToggle:rt,detailProcessToggle:ut,detailReferencesToggle:Et,detailReferenceItemToggle:Ct,detailTagsToggle:Ut,detailWarningsToggle:Gt,detailStackTracesToggle:Wt}=je(ae.dataFrames[0]),{removeHoverIndentGuideId:ot,addHoverIndentGuideId:Tt,hoverIndentGuideIds:Pn}=Ye(),{viewRange:ft,updateViewRangeTime:Mt,updateNextViewRangeTime:_t}=xe(),{expandOne:nn,collapseOne:dn,childrenToggle:en,collapseAll:Xt,childrenHiddenIDs:En,expandAll:Vn}=Le(),{search:Wn,setSearch:na,spanFilterMatches:Bt}=(0,$e.SQ)(fe?.spans),[ln,mn]=(0,n.useState)(""),[Dn,hn]=(0,r.A)(!1),[Fn,wn]=(0,n.useState)(!1),[Hn,An]=(0,n.useState)(!1),[In,kn]=(0,n.useState)(100),[Vt,zt]=(0,n.useState)({}),[kt,rn]=(0,n.useState)({}),yn=(0,h.of)(Fe),[gn,Rn]=(0,n.useState)(.4),[Kt,mt]=se({refId:ae.dataFrames[0]?.refId,exploreId:ae.exploreId,datasource:Ce,splitOpenFn:ae.splitOpenFn}),pt=Xe??Kt,Qt=Ze??mt,on=(0,n.useMemo)(()=>({childrenHiddenIDs:En,detailStates:et,hoverIndentGuideIds:Pn,spanNameColumnWidth:gn,traceID:ae.traceProp?.traceID}),[En,et,Pn,gn,ae.traceProp?.traceID]),pn=(0,y.tR)().getInstanceSettings(Ce?.name),fn=m(pn?.jsonData),aa=pn?.jsonData?.tracesToMetrics,jn=pn?.jsonData?.tracesToProfiles,ga=pn?.jsonData,Ra=(0,n.useMemo)(()=>ze??(0,Ne.lU)({splitOpenFn:ae.splitOpenFn,traceToLogsOptions:fn,traceToMetricsOptions:aa,traceToProfilesOptions:jn,dataFrame:ae.dataFrames[0],createFocusSpanLink:Qt,trace:fe}),[ae.splitOpenFn,fn,aa,jn,ae.dataFrames,Qt,fe,ze]),_a=(0,v.useSelector)(Ja=>(0,a.O)(Ja.user)),Za=Ce?Ce?.type:"unknown",ms=ae.scrollElement?ae.scrollElement:document.getElementsByClassName(ae.scrollElementClass??"")[0],rs=R(fe);return n.createElement(n.Fragment,null,ae.dataFrames?.length&&fe?n.createElement(n.Fragment,null,n.createElement(b.TracePageHeader,{trace:fe,data:ae.dataFrames[0],timeZone:_a,search:Wn,setSearch:na,showSpanFilters:Dn,setShowSpanFilters:hn,showSpanFilterMatchesOnly:Fn,setShowSpanFilterMatchesOnly:wn,showCriticalPathSpansOnly:Hn,setShowCriticalPathSpansOnly:An,setFocusedSpanIdForSearch:mn,spanFilterMatches:Bt,datasourceType:Za,setHeaderHeight:kn,app:Oe?s.Jk.Explore:s.Jk.Unknown}),n.createElement(pe,{trace:fe,viewRange:ft,updateNextViewRangeTime:_t,updateViewRangeTime:Mt}),n.createElement(b.TraceTimelineViewer,{findMatchesIDs:Bt,trace:fe,traceToProfilesOptions:jn,datasourceType:Za,spanBarOptions:ga?.spanBar,traceTimeline:on,updateNextViewRangeTime:_t,updateViewRangeTime:Mt,viewRange:ft,timeZone:_a,setSpanNameColumnWidth:Rn,collapseAll:Xt,collapseOne:dn,expandAll:Vn,expandOne:nn,childrenToggle:en,detailLogItemToggle:lt,detailLogsToggle:rt,detailWarningsToggle:Gt,detailStackTracesToggle:Wt,detailReferencesToggle:Et,detailReferenceItemToggle:Ct,detailProcessToggle:ut,detailTagsToggle:Ut,detailToggle:nt,addHoverIndentGuideId:Tt,removeHoverIndentGuideId:ot,linksGetter:()=>[],createSpanLink:Ra,scrollElement:ms,focusedSpanId:pt,focusedSpanIdForSearch:ln,showSpanFilterMatchesOnly:Fn,showCriticalPathSpansOnly:Hn,createFocusSpanLink:Qt,topOfViewRef:Re,headerHeight:In,criticalPath:rs,traceFlameGraphs:Vt,setTraceFlameGraphs:zt,redrawListView:kt,setRedrawListView:rn})):n.createElement("div",{className:yn.noDataMsg},"No data"))}function se(ae){const fe=(0,v.useSelector)(Ze=>Ze.explore.panes[ae.exploreId]?.panelsState.trace),Ce=fe?.spanId,Re=(0,v.useDispatch)(),Oe=Ze=>Re((0,g.EA)(ae.exploreId,"trace",{...fe,spanId:Ze})),ze=(0,v.useSelector)(Ze=>Ze.explore.panes[ae.exploreId]?.queries.find(et=>et.refId===ae.refId));return[Ce,(Ze,et)=>{const nt={title:"Deep link to this span",url:"",internal:{datasourceUid:ae.datasource?.uid,datasourceName:ae.datasource?.name,query:{...ze,query:Ze},panelsState:{trace:{spanId:et}}}},lt=ze?.queryType==="traceql"&&ze.query===Ze;return(0,o.u)({link:nt,internalLink:nt.internal,scopedVars:{},field:{},onClickFn:lt?()=>Oe(Ce===et?void 0:et):ae.splitOpenFn?()=>ae.splitOpenFn({datasourceUid:ae.datasource?.uid,queries:[{...ze,query:Ze}],panelsState:{trace:{spanId:et}}}):void 0,replaceVariables:(0,E.w)().replace.bind((0,E.w)())})}]}},71656:(Y,I,e)=>{"use strict";e.d(I,{R:()=>n});var t=e(84140);function n(r,s,o){if(r.isLight)return s;{if(o){const i=(0,t.A)(s);return t.A.mostReadable(o,[i.clone().lighten(25),i.clone().lighten(10),i,i.clone().darken(10),i.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const m=(0,t.A)(s).toHsl();m.l=1-m.l;const l=(0,t.A)(m);return l.isLight()?l.darken(5).toHex8String():l.lighten(5).toHex8String()}}},56271:(Y,I,e)=>{"use strict";e.d(I,{DetailState:()=>Cr,TracePageHeader:()=>Ri,TraceTimelineViewer:()=>qr,filterSpans:()=>Ai,transformTraceData:()=>ht});var t=e(32196),n=e(96540),r=e(14110),s=e(32264),o=e(3911),m=e(40845),l=e(71656),i=e(75888),c=e.n(i);const f={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let d;function E(){if(d)return d;const Te=new(c())(document.body);return d=Te,Te}function h(Te){const we=E();Object.keys(Te).forEach(Ue=>{const Ge=Te[Ue];Ge&&we.bind(f[Ue].binding,Ge)})}function y(){E().reset()}var a=e(46942),v=e.n(a),g=e(6389);function b(Te){const{min:we,max:Ue,viewStart:Ge,viewEnd:ct}=Te,vt=Ue-we,At=we+Ge*vt,qt=Ue-(1-ct)*vt-At;return(an,xn)=>({start:(an-At)/qt,end:(xn-At)/qt})}function P(Te,we,Ue){return!Array.isArray(Ue.tags)||!Ue.tags.length?!1:Ue.tags.some(Ge=>Ge.key===Te&&Ge.value===we)}const C=Te=>Te.kind==="client",D=P.bind(null,"span.kind","client"),T=Te=>C(Te)||D(Te),M=Te=>Te.kind==="server",O=P.bind(null,"span.kind","server"),S=Te=>M(Te)||O(Te),p=Te=>Te.statusCode===2,x=P.bind(null,"error",!0),A=P.bind(null,"error","true"),R=Te=>p(Te)||x(Te)||A(Te);function B(Te,we){const{depth:Ue}=Te[we];let Ge=we+1;for(;Ge<Te.length&&Te[Ge].depth>Ue;Ge++)if(R(Te[Ge]))return!0;return!1}function U(Te){if(Te.length<=1||!T(Te[0]))return!1;const Ue=Te[0].depth+1;let Ge=1;for(;Ge<Te.length&&Te[Ge].depth===Ue;){if(S(Te[Ge]))return Te[Ge];Ge++}return null}const F=Te=>Te.kind?Te.kind==="client":Te.tags.some(({key:we,value:Ue})=>we==="span.kind"&&Ue==="client"),K=Te=>({Ticks:(0,t.css)`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:(0,t.css)`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,l.R)(Te,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:(0,t.css)`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:(0,t.css)`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function w(Te){const{endTime:we,numTicks:Ue,showLabels:Ge,startTime:ct}=Te;let vt;if(Ge){vt=[];const qt=(we||0)-(ct||0);for(let an=0;an<Ue;an++){const xn=(ct||0)+an/(Ue-1)*qt;vt.push((0,g.a3)(xn))}}const At=(0,m.of)(K),jt=[];for(let qt=0;qt<Ue;qt++){const an=qt/(Ue-1);jt.push(n.createElement("div",{"data-testid":"TicksID",key:an,className:At.TicksTick,style:{left:`${an*100}%`}},vt&&n.createElement("span",{className:v()(At.TicksTickLabel,{[At.TicksTickLabelEndAnchor]:an>=1})},vt[qt])))}return n.createElement("div",{className:At.Ticks},jt)}w.defaultProps={endTime:null,showLabels:null,startTime:null};const L=()=>({row:(0,t.css)({display:"flex",flex:"0 1 auto",flexDirection:"row"}),rowCell:(0,t.css)({position:"relative"})});function V(Te){const{children:we,className:Ue="",...Ge}=Te,ct=(0,m.of)(L);return n.createElement("div",{className:v()(ct.row,Ue),...Ge},we)}V.defaultProps={className:""};function N(Te){const{children:we,className:Ue="",width:Ge,style:ct,...vt}=Te,At=`${Ge*100}%`,jt={...ct,flexBasis:At,maxWidth:At},qt=(0,m.of)(L);return n.createElement("div",{className:v()(qt.rowCell,Ue),style:jt,"data-testid":"TimelineRowCell",...vt},we)}N.defaultProps={className:"",style:{}},V.Cell=N;var z=e(29158);const J=()=>({TimelineCollapser:(0,t.css)`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function G(Te){const{onExpandAll:we,onExpandOne:Ue,onCollapseAll:Ge,onCollapseOne:ct}=Te,vt=(0,m.of)(J);return n.createElement("div",{className:vt.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(z.K,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Ue}),n.createElement(z.K,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:ct}),n.createElement(z.K,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:we}),n.createElement(z.K,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:Ge}))}var H=e(92151);const q=()=>({TimelineColumnResizer:(0,t.css)`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:(0,t.css)`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:(0,t.css)`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:(0,t.css)`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:(0,t.css)`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:(0,t.css)`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:(0,t.css)`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:(0,t.css)`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `});class le extends n.PureComponent{constructor(we){super(we),this._setRootElm=Ue=>{this._rootElm=Ue},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Ue,width:Ge}=this._rootElm.getBoundingClientRect(),{min:ct,max:vt}=this.props;return{clientXLeft:Ue,width:Ge,maxValue:vt,minValue:ct}},this._handleDragUpdate=({value:Ue})=>{this.setState({dragPosition:Ue})},this._handleDragEnd=({manager:Ue,value:Ge})=>{Ue.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(Ge)},this._dragManager=new H.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let we,Ue;const{position:Ge,columnResizeHandleHeight:ct}=this.props,{dragPosition:vt}=this.state;we=`${Ge*100}%`;const At={left:we};let jt=!1,qt=!1;const an=q();if(this._dragManager.isDragging()&&this._rootElm&&vt!=null){jt=vt<Ge,qt=vt>Ge;const Un=`${Math.min(Ge,vt)*100}%`,Cn=`calc(${(1-Math.max(Ge,vt))*100}% - 1px)`;Ue={left:Un,right:Cn}}else Ue=At;Ue.height=ct;const xn=jt||qt;return n.createElement("div",{className:an.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:v()(an.gripIcon,xn&&an.gripIconDragging),style:At,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:v()(an.dragger,xn&&an.draggerDragging,qt&&an.draggerDraggingRight,jt&&an.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Ue,"data-testid":"TimelineColumnResizer--dragger"}))}}const me=(0,o.N)(()=>({TimelineViewingLayer:(0,t.css)`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:(0,t.css)`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:(0,t.css)`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:(0,t.css)`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function k(Te){return Reflect.has(Te,"isOutOfView")}function ee(Te,we,Ue){return Te+Ue*(we-Te)}function X(Te,we,Ue){return(Ue-Te)/(we-Te)}function j(Te,we){let[Ue,Ge]=Te<we?[Te,we]:[we,Te];return Ue>=1||Ge<=0?{isOutOfView:!0}:(Ue<0&&(Ue=0),Ge>1&&(Ge=1),{isDraggingLeft:Te>we,left:`${Ue*100}%`,width:`${(Ge-Ue)*100}%`})}function ne(Te,we,Ue,Ge,ct){const vt=X(Te,we,Ue),At=X(Te,we,Ge),jt=j(vt,At);if(k(jt))return null;const{isDraggingLeft:qt,left:an,width:xn}=jt,Un=me(),Cn=(0,t.cx)({[Un.TimelineViewingLayerDraggedDraggingRight]:!qt,[Un.TimelineViewingLayerDraggedReframeDrag]:!ct,[Un.TimelineViewingLayerDraggedShiftDrag]:ct});return n.createElement("div",{className:(0,t.cx)(Un.TimelineViewingLayerDragged,Un.TimelineViewingLayerDraggedDraggingLeft,Cn),style:{left:an,width:xn},"data-testid":"Dragged"})}class te extends n.PureComponent{constructor(we){super(we),this._setRoot=Ue=>{this._root=Ue},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Ue,width:Ge}=this._root.getBoundingClientRect();return{clientXLeft:Ue,width:Ge}},this._handleReframeMouseMove=({value:Ue})=>{const[Ge,ct]=this.props.viewRangeTime.current,vt=ee(Ge,ct,Ue);this.props.updateNextViewRangeTime({cursor:vt})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Ue})=>{const{current:Ge,reframe:ct}=this.props.viewRangeTime,[vt,At]=Ge,jt=ee(vt,At,Ue),an={reframe:{anchor:ct?ct.anchor:jt,shift:jt}};this.props.updateNextViewRangeTime(an)},this._handleReframeDragEnd=({manager:Ue,value:Ge})=>{const{current:ct,reframe:vt}=this.props.viewRangeTime,[At,jt]=ct,qt=ee(At,jt,Ge),an=vt?vt.anchor:qt,[xn,Un]=qt<an?[qt,an]:[an,qt];Ue.resetBounds(),this.props.updateViewRangeTime(xn,Un,"timeline-header")},this._draggerReframe=new H.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(we){const{boundsInvalidator:Ue}=this.props;Ue!==we.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:we}=this.props,{current:Ue,cursor:Ge,reframe:ct,shiftEnd:vt,shiftStart:At}=we,[jt,qt]=Ue,an=ct!=null||vt!=null||At!=null;let xn;!an&&Ge!=null&&Ge>=jt&&Ge<=qt&&(xn=`${X(jt,qt,Ge)*100}%`);const Un=me();return n.createElement("div",{"aria-hidden":!0,className:Un.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},xn!=null&&n.createElement("div",{className:Un.TimelineViewingLayerCursorGuide,style:{left:xn},"data-testid":"TimelineViewingLayer--cursorGuide"}),ct!=null&&ne(jt,qt,ct.anchor,ct.shift,!1),vt!=null&&ne(jt,qt,qt,vt,!0),At!=null&&ne(jt,qt,jt,At,!0))}}const oe=Te=>({TimelineHeaderRow:(0,t.css)`
      label: TimelineHeaderRow;
      background: ${(0,l.R)(Te,"#ececec")};
      border-bottom: 1px solid ${(0,l.R)(Te,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:(0,t.css)`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:(0,t.css)`
      label: TimelineHeaderWrapper;
      align-items: center;
      display: flex;
      padding-left: ${Te.spacing(1)};
      padding-right: ${Te.spacing(1)};
    `});function ie(Te){const{duration:we,nameColumnWidth:Ue,numTicks:Ge,onCollapseAll:ct,onCollapseOne:vt,onColummWidthChange:At,onExpandAll:jt,onExpandOne:qt,updateViewRangeTime:an,updateNextViewRangeTime:xn,viewRangeTime:Un,columnResizeHandleHeight:Cn}=Te,[Ln,la]=Un.current,Xn=(0,m.of)(oe);return n.createElement(V,{className:Xn.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(V.Cell,{className:Xn.TimelineHeaderWrapper,width:Ue},n.createElement("h4",{className:Xn.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(G,{onCollapseAll:ct,onExpandAll:jt,onCollapseOne:vt,onExpandOne:qt})),n.createElement(V.Cell,{width:1-Ue},n.createElement(te,{boundsInvalidator:Ue,updateNextViewRangeTime:xn,updateViewRangeTime:an,viewRangeTime:Un}),n.createElement(w,{numTicks:Ge,startTime:Ln*we,endTime:la*we,showLabels:!0})),n.createElement(le,{columnResizeHandleHeight:Cn,position:Ue,onChange:At,min:.2,max:.85}))}var ue=e(2543),be=e(41811),ge=e(27746);const re="peer.service";var ye=e(30700);class Be{constructor(we){this.ys=[],this.heights=[],this.bufferLen=we,this.dataLen=-1,this.lastI=-1}profileData(we){we!==this.dataLen&&(this.dataLen=we,this.ys.length=we,this.heights.length=we,this.lastI>=we&&(this.lastI=we-1))}calcHeights(we,Ue,Ge){Ge!=null&&(this.lastI=Ge);let ct=we+this.bufferLen;if(ct<=this.lastI)return;ct>=this.heights.length&&(ct=this.heights.length-1);let vt=this.lastI;for(this.lastI===-1&&(vt=0,this.ys[0]=0);vt<=ct;){const At=this.heights[vt]=Ue(vt);this.ys[vt+1]=this.ys[vt]+At,vt++}this.lastI=ct}calcYs(we,Ue){for(;(this.ys[this.lastI]==null||we>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,Ue)}confirmHeight(we,Ue){let Ge=we;if(Ge>this.lastI){this.calcHeights(Ge,Ue);return}const ct=Ue(Ge);if(ct===this.heights[Ge])return;const vt=ct-this.heights[Ge];for(this.heights[Ge]=ct;++Ge<=this.lastI;)this.ys[Ge]+=vt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=vt)}findFloorIndex(we,Ue){this.calcYs(we,Ue);let Ge=0,ct=this.lastI;if(this.ys.length<2||we<this.ys[1])return 0;if(we>this.ys[ct])return ct;let vt;for(;Ge<ct;)if(vt=Ge+.5*(ct-Ge)|0,we>this.ys[vt]){if(we<=this.ys[vt+1])return vt;Ge=vt}else if(we<this.ys[vt]){if(we>=this.ys[vt-1])return vt-1;ct=vt}else return vt;throw new Error(`unable to find floor index for y=${we}`)}getRowPosition(we,Ue){return this.confirmHeight(we,Ue),{height:this.heights[we],y:this.ys[we]}}getEstimatedHeight(){const we=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?we|0:we/(this.lastI+1)*this.heights.length|0}}const ve=100;class Me extends n.Component{constructor(we){super(we),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const Ue=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(Ue,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=Ue=>this._yPositions.getRowPosition(Ue,this._getHeight),this.scrollToIndex=(Ue,Ge)=>{const{scrollElement:ct}=this.props,vt=ct?.getBoundingClientRect().top||0,jt=(ct?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-vt,qt=this.getRowPosition(Ue).y;this.props.scrollElement?.scrollTo({top:qt+jt-Ge-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const Ue=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,Ge=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(Ue<this._startIndexDrawn||Ge>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=Ue=>{this.props.windowScroller&&(this._wrapperElm=Ue,Ue&&(this._viewHeight=Ue.clientHeight))},this._initItemHolder=Ue=>{this._itemHolderElm=Ue,this._scanItemHeights()},this._scanItemHeights=()=>{const Ue=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let Ge=null,ct=null,vt=!1;const At=this._itemHolderElm.childNodes,jt=At.length;for(let qt=0;qt<jt;qt++){const an=At[qt];if(an instanceof HTMLElement){const xn=an.getAttribute("data-item-key");if(!xn){console.warn("itemKey not found");continue}const Cn=(an.firstElementChild||an).clientHeight,Ln=this._knownHeights.get(xn);Cn!==Ln&&(this._knownHeights.set(xn,Cn),vt?ct=xn:(vt=!0,Ge=ct=xn))}}if(Ge!=null&&ct!=null){const qt=Ue(Ge),an=ct===Ge?qt:Ue(ct);this._yPositions.calcHeights(an,this._getHeight,qt),this.forceUpdate()}},this._getHeight=Ue=>{const Ge=this.props.getKeyFromIndex(Ue),ct=this._knownHeights.get(Ge);return ct!=null&&ct===ct?ct:this.props.itemHeightGetter(Ue,Ge)},this._yPositions=new Be(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}static{this.defaultProps={initialDraw:ve,itemsWrapperClassName:"",windowScroller:!1}}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:we}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=we+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(we){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&we.scrollElement!==this.props.scrollElement&&(we.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const we=this.props.windowScroller,Ue=we?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,Ge=we?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return Ue!==this._viewHeight||Ge!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const Ue=this._scrollTop,Ge=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(Ue,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(Ge,this._getHeight)}render(){const{dataLength:we,getKeyFromIndex:Ue,initialDraw:Ge=ve,itemRenderer:ct,viewBuffer:vt,viewBufferMin:At}=this.props,jt=this._getHeight,qt=[];let an,xn;if(this._yPositions.profileData(we),!this._wrapperElm)an=0,xn=(Ge<we?Ge:we)-1;else{this._isViewChanged()&&this._calcViewIndexes();const Ln=At>this._startIndex?0:this._startIndex-At,la=At<we-this._endIndex?this._endIndex+At:we-1;Ln<this._startIndexDrawn||la>this._endIndexDrawn?(an=vt>this._startIndex?0:this._startIndex-vt,xn=this._endIndex+vt,xn>=we&&(xn=we-1)):(an=this._startIndexDrawn>we-1?0:this._startIndexDrawn,xn=this._endIndexDrawn>we-1?we-1:this._endIndexDrawn)}this._yPositions.calcHeights(xn,jt,an||-1),this._startIndexDrawn=an,this._endIndexDrawn=xn,qt.length=xn-an+1;for(let Ln=an;Ln<=xn;Ln++){const{y:la,height:Xn}=this._yPositions.getRowPosition(Ln,jt),Gn={height:Xn,top:la,position:"absolute"},Yn=Ue(Ln),Ma={"data-item-key":Yn};qt.push(ct(Yn,Gn,Ln,Ma))}const Un={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(Un.onScroll=this._onScroll,Un.style.height="100%",Un.style.overflowY="auto");const Cn={position:"relative",height:this._yPositions.getEstimatedHeight()};return n.createElement("div",{...Un,"data-testid":"ListView"},n.createElement("div",{style:Cn},n.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},qt)))}}const ke="None",Se="Duration",We="Tag";function De({options:Te,onOptionsChange:we}){const Ue=useStyles2(Ne),Ge=[ke,Se,We].map(toOption);return React.createElement("div",{className:css({width:"100%"})},React.createElement(InlineFieldRow,{className:Ue.row},React.createElement(InlineField,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},React.createElement(Select,{inputId:"label",options:Ge,value:Te.jsonData.spanBar?.type||"",onChange:ct=>{updateDatasourcePluginJsonDataOption({onOptionsChange:we,options:Te},"spanBar",{...Te.jsonData.spanBar,type:ct?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),Te.jsonData.spanBar?.type===We&&React.createElement(InlineFieldRow,{className:Ue.row},React.createElement(InlineField,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},React.createElement(Input,{type:"text",placeholder:"Enter tag key",onChange:ct=>updateDatasourcePluginJsonDataOption({onOptionsChange:we,options:Te},"spanBar",{...Te.jsonData.spanBar,tag:ct.currentTarget.value}),value:Te.jsonData.spanBar?.tag||"",width:40}))))}const pe=({options:Te,onOptionsChange:we})=>{let Ue=Te.type;return Ue+=Te.type==="tempo"?"/configure-tempo-data-source/#span-bar":"/#span-bar",React.createElement(ConfigSubSection,{title:"Span bar",description:React.createElement(ConfigDescriptionLink,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:Ue,feature:"the span bar"})},React.createElement(De,{options:Te,onOptionsChange:we}))},Ne=Te=>({infoText:css({label:"infoText",paddingBottom:Te.spacing(2),color:Te.colors.text.secondary}),row:css({label:"row",alignItems:"baseline"})});var Le=e(14578),He=e(13544),je=e(56034),at=e(95868),Ye=e(13840);function $e({children:Te,content:we,overlayClassName:Ue}){const Ge=(0,n.useRef)(null);return n.createElement(at.I,{content:we,hideAfter:300},(ct,vt,At)=>n.createElement(n.Fragment,null,Ge.current&&n.createElement(Ye.A,{...At,referenceElement:Ge.current,wrapperClassName:Ue,onMouseLeave:vt,onMouseEnter:ct}),n.cloneElement(Te,{ref:Ge,onMouseEnter:ct,onMouseLeave:vt})))}const xe="label";var Fe=e(55852);const Ee=()=>({CopyIcon:(0,t.css)`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function se(Te){const we=(0,m.of)(Ee),[Ue,Ge]=(0,n.useState)(!1),ct=()=>{navigator.clipboard.writeText(Te.copyText),Ge(!0)};return n.createElement(je.m,{content:Ue?"Copied":Te.tooltipTitle},n.createElement(Fe.$n,{className:v()(we.CopyIcon),type:"button",icon:Te.icon,onClick:ct}))}se.defaultProps={icon:"copy",className:void 0};var ae=e(72834),fe=e.n(ae);const Ce="copyIcon",Re=Te=>({KeyValueTable:(0,t.css)`
      label: KeyValueTable;
      background: ${(0,l.R)(Te,"#fff")};
      border: 1px solid ${(0,l.R)(Te,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,table:(0,t.css)({width:"100%"}),body:(0,t.css)`
      label: body;
      vertical-align: baseline;
    `,row:(0,t.css)`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,l.R)(Te,"#f5f5f5")};
      }
      &:not(:hover) .${Ce} {
        visibility: hidden;
      }
    `,keyColumn:(0,t.css)`
      label: keyColumn;
      color: ${(0,l.R)(Te,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:(0,t.css)`
      label: copyColumn;
      text-align: right;
    `,linkIcon:(0,t.css)`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `,jsonTable:(0,t.css)({display:"inline-block"})}),Oe=/^(\[|\{)/;function ze(Te){if(typeof Te=="string"&&Oe.test(Te))try{return JSON.parse(Te)}catch{}return Te}const Xe=Te=>n.createElement("a",{href:Te.href,title:Te.title,target:"_blank",rel:"noopener noreferrer"},Te.children," ",n.createElement(Le.I,{name:"external-link-alt"}));Xe.defaultProps={title:""};function Ze(Te){const{data:we,linksGetter:Ue}=Te,Ge=(0,m.of)(Re);return n.createElement("div",{className:v()(Ge.KeyValueTable),"data-testid":"KeyValueTable"},n.createElement("table",{className:Ge.table},n.createElement("tbody",{className:Ge.body},we.map((ct,vt)=>{const At={__html:fe()(ze(ct.value))},jt=n.createElement("div",{className:Ge.jsonTable,dangerouslySetInnerHTML:At}),qt=Ue?Ue(we,vt):null;let an;return qt&&qt.length?an=n.createElement("div",null,n.createElement(Xe,{href:qt[0].url,title:qt[0].text},jt)):an=jt,n.createElement("tr",{className:Ge.row,key:`${ct.key}-${vt}`},n.createElement("td",{className:Ge.keyColumn,"data-testid":"KeyValueTable--keyColumn"},ct.key),n.createElement("td",null,an),n.createElement("td",{className:Ge.copyColumn},n.createElement(se,{className:Ce,copyText:JSON.stringify(ct,null,2),tooltipTitle:"Copy JSON"})))}))))}var et=e(11908),nt=e(72724),lt=e(12131),rt=e(14689),ut=e(25994),Et=e(21744),Ct=e(19071),Ut=e(28114);const Gt=Te=>we=>({LabeledList:(0,t.css)`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${Te&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:(0,t.css)`
      label: LabeledListItem;
      display: inline-block;
      ${Te&&`
        border-right: 1px solid ${(0,l.R)(we,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:(0,t.css)`
      label: LabeledListLabel;
      color: ${we.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:(0,t.css)`
      label: LabeledListValue;
      ${!Te&&"margin-right: 0.55rem;"}
    `});function Wt(Te){const{className:we,divider:Ue=!1,items:Ge}=Te,ct=(0,m.of)(Gt(Ue));return n.createElement("ul",{className:v()(ct.LabeledList,we)},Ge.map(({key:vt,label:At,value:jt})=>n.createElement("li",{className:ct.LabeledListItem,key:`${vt}`},n.createElement("span",{className:ct.LabeledListLabel},At),n.createElement("strong",{className:ct.LabeledListValue},jt))))}const ot="kind",Tt="status",Pn="status.message",ft="library.name",Mt="library.version",_t="trace.state",nn="id";var dn=e(92102);function en(Te){const{reference:we,children:Ue,createFocusSpanLink:Ge}=Te,ct=Ge(we.traceID,we.spanID);return n.createElement("a",{href:ct.href,target:ct.target,rel:"noopener noreferrer",onClick:ct.onClick?vt=>{vt.preventDefault(),ct.onClick(vt)}:void 0},Ue)}const Xt=Te=>({AccordianReferenceItem:(0,t.css)`
      border-bottom: 1px solid ${(0,l.R)(Te,"#d8d8d8")};
    `,AccordianKeyValues:(0,t.css)`
      margin-left: 10px;
    `,AccordianReferences:(0,t.css)`
      label: AccordianReferences;
      border: 1px solid ${(0,l.R)(Te,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:(0,t.css)`
      label: AccordianReferencesHeader;
      background: ${(0,l.R)(Te,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,l.R)(Te,"#dadada")};
      }
    `,AccordianReferencesContent:(0,t.css)`
      label: AccordianReferencesContent;
      background: ${(0,l.R)(Te,"#f0f0f0")};
      border-top: 1px solid ${(0,l.R)(Te,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:(0,t.css)`
      label: AccordianReferencesFooter;
      color: ${(0,l.R)(Te,"#999")};
    `,AccordianKeyValuesItem:(0,t.css)({marginBottom:Te.spacing(.5)}),ReferencesList:(0,t.css)`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:(0,t.css)`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:(0,t.css)`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:(0,t.css)`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:(0,t.css)`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:(0,t.css)`
      margin-right: 8px;
    `,title:(0,t.css)`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function En(Te){const{data:we,createFocusSpanLink:Ue,openedItems:Ge,onItemToggle:ct,interactive:vt}=Te,At=(0,m.of)(Xt);return n.createElement("div",{className:At.AccordianReferencesContent},we.map((jt,qt)=>n.createElement("div",{className:qt<we.length-1?At.AccordianReferenceItem:void 0,key:qt},n.createElement("div",{className:At.item,key:`${jt.spanID}`},n.createElement(en,{reference:jt,createFocusSpanLink:Ue},n.createElement("span",{className:At.itemContent},jt.span?n.createElement("span",null,n.createElement("span",{className:(0,t.cx)("span-svc-name",At.serviceName)},jt.span.process.serviceName),n.createElement("small",{className:"endpoint-name"},jt.span.operationName)):n.createElement("span",{className:(0,t.cx)("span-svc-name",At.title)},"View Linked Span ",n.createElement(Le.I,{name:"external-link-alt"})),n.createElement("small",{className:At.debugInfo},n.createElement("span",{className:At.debugLabel,"data-label":"TraceID:"},jt.traceID),n.createElement("span",{className:At.debugLabel,"data-label":"SpanID:"},jt.spanID))))),!!jt.tags?.length&&n.createElement("div",{className:At.AccordianKeyValues},n.createElement(pt,{className:qt<we.length-1?At.AccordianKeyValuesItem:null,data:jt.tags||[],highContrast:!0,interactive:vt,isOpen:Ge?Ge.has(jt):!1,label:"attributes",linksGetter:null,onToggle:vt&&ct?()=>ct(jt):null})))))}const Vn=({data:Te,interactive:we=!0,isOpen:Ue,onToggle:Ge,onItemToggle:ct,openedItems:vt,createFocusSpanLink:At})=>{const jt=!Array.isArray(Te)||!Te.length;let qt=null,an="span",xn=null;we&&(qt=Ue?n.createElement(Le.I,{name:"angle-down",className:yn}):n.createElement(Le.I,{name:"angle-right",className:yn}),an="a",xn={"aria-checked":Ue,onClick:jt?null:Ge,role:"switch"});const Un=(0,m.of)(Xt);return n.createElement("div",{className:Un.AccordianReferences},n.createElement(an,{className:Un.AccordianReferencesHeader,...xn},qt,n.createElement("strong",null,n.createElement("span",null,"References"))," ","(",Te.length,")"),Ue&&n.createElement(En,{data:Te,openedItems:vt,createFocusSpanLink:At,onItemToggle:ct,interactive:we}))},Wn=n.memo(Vn),na=()=>({TextList:(0,t.css)`
      max-height: 450px;
      overflow: auto;
    `,List:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:(0,t.css)`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Bt(Te){const{data:we}=Te,Ue=(0,m.of)(na);return n.createElement("div",{className:v()(Ue.TextList),"data-testid":"TextList"},n.createElement("ul",{className:Ue.List},we.map((Ge,ct)=>n.createElement("li",{className:Ue.item,key:`${ct}`},Ge))))}const ln=Te=>({header:(0,t.css)`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,l.R)(Te,"#e8e8e8")};
      }
    `});function mn({data:Te}){return n.createElement(Bt,{data:Te})}function Dn(Te){const{className:we,data:Ue,headerClassName:Ge,interactive:ct,isOpen:vt,label:At,onToggle:jt,TextComponent:qt=mn}=Te,an=!Array.isArray(Ue)||!Ue.length,xn=(0,m.of)(Kt),Un=v()(yn,{[xn.emptyIcon]:an});let Cn=null,Ln=null;ct&&(Cn=vt?n.createElement(Le.I,{name:"angle-down",className:Un}):n.createElement(Le.I,{name:"angle-right",className:Un}),Ln={"aria-checked":vt,onClick:an?null:jt,role:"switch"});const la=(0,m.of)(ln);return n.createElement("div",{className:we||""},n.createElement("div",{className:v()(la.header,Ge),...Ln,"data-testid":"AccordianText--header"},Cn,n.createElement("strong",null,At)," (",Ue.length,")"),vt&&n.createElement(qt,{data:Ue}))}Dn.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};var hn=e(49185),Fn=e(75505),wn=e(47232),Hn=e(41987),An=e(85194),In=e(26657),kn=e(72574),Vt=e(31193);function zt(Te){const{span:we,traceToProfilesOptions:Ue,timeZone:Ge,traceFlameGraphs:ct,setTraceFlameGraphs:vt,setRedrawListView:At,traceDuration:jt,traceName:qt}=Te,[an,{height:xn}]=(0,hn.A)(),Un=(0,m.of)(kt),Cn=we.tags.filter(Yn=>Yn.key===Ut.QW),Ln=Cn.length>0?Cn[0].value:void 0,la=(0,n.useCallback)(()=>{const Yn=Math.floor(we.startTime/1e3)-3e4,Ma=(we.startTime+we.duration)/1e3+3e4,Ua=(0,wn.KQ)(Ma),ha=(0,wn.KQ)(Yn);return{from:ha,to:Ua,raw:{from:ha,to:Ua}}},[we.duration,we.startTime]),Xn=async(Yn,Ma)=>{const Ua=await(0,Vt.tR)().get(Ma);if(Ua instanceof In.iy){const Ia=(await(0,Fn.s)(Ua.query(Yn))).data.find(Xa=>Xa.name==="response");if(Ia&&Ia.length>1)return Ia}},Gn=(0,n.useCallback)(async(Yn,Ma,Ua)=>{let ha="{}";if(Ma.customQuery&&Ma.query){const Cs={...(0,Ut.gt)(jt,qt,Ua.traceID),...(0,Ut.hv)(Ua),...(0,Ut.Cr)(Ua,Ma)};ha=(0,kn.w)().replace(Ma.query,Cs)}else{const Cs=Ma.tags&&Ma.tags.length>0?Ma.tags:Ut.i0;ha=`{${(0,Ut._o)(Ua,Cs)}}`}const Ia={requestId:"span-flamegraph-requestId",interval:"2s",intervalMs:2e3,range:la(),scopedVars:{},app:Hn.Jk.Unknown,timezone:Ge,startTime:Ua.startTime,targets:[{labelSelector:ha,groupBy:[],profileTypeId:Ma.profileTypeId??"",queryType:"profile",spanSelector:[Ln],refId:"span-flamegraph-refId",datasource:{type:Yn.type,uid:Yn.uid}}]},Xa=await Xn(Ia,Yn.uid);Xa&&Xa.length>0&&vt({...ct,[Ln]:Xa})},[la,Ln,vt,Ge,jt,ct,qt]);return(0,n.useEffect)(()=>{if(!Object.keys(ct).includes(Ln)){let Yn;Ue&&Ue?.datasourceUid&&(Yn=(0,Vt.tR)().getInstanceSettings(Ue.datasourceUid)),Ue&&Yn&&Gn(Yn,Ue,we)}},[vt,we,ct,Ue,la,Ge,Gn,Ln]),(0,n.useEffect)(()=>{At({})},[xn,At]),ct[Ln]?n.createElement("div",{className:Un.flameGraph,ref:an},n.createElement("div",{className:Un.flameGraphTitle},"Flame graph"),n.createElement(An.A,{data:ct[Ln],getTheme:()=>s.$.theme2,showFlameGraphOnly:!0,disableCollapsing:!0})):n.createElement(n.Fragment,null)}const kt=()=>({flameGraph:(0,t.css)({label:"flameGraphInSpan",margin:"5px"}),flameGraphTitle:(0,t.css)({label:"flameGraphTitleInSpan",marginBottom:"5px",fontWeight:"bold"})}),rn=Te=>({header:(0,t.css)`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:(0,t.css)`
      overflow: hidden;
    `,list:(0,t.css)({textAlign:"right"}),operationName:(0,t.css)({margin:0}),debugInfo:(0,t.css)`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:(0,t.css)`
      label: debugLabel;
      &::before {
        color: ${(0,l.R)(Te,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:(0,t.css)`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,l.R)(Te,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,l.R)(Te,"#333")};
      }
    `,AccordianWarnings:(0,t.css)`
      label: AccordianWarnings;
      background: ${(0,l.R)(Te,"#fafafa")};
      border: 1px solid ${(0,l.R)(Te,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:(0,t.css)`
      label: AccordianWarningsHeader;
      background: ${(0,l.R)(Te,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,l.R)(Te,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:(0,t.css)`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,l.R)(Te,"#e8e8e8")};
    `,AccordianWarningsLabel:(0,t.css)`
      label: AccordianWarningsLabel;
      color: ${(0,l.R)(Te,"#d36c08")};
    `,AccordianKeyValuesItem:(0,t.css)({marginBottom:Te.spacing(.5)}),Textarea:(0,t.css)`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:(0,t.css)`
      font-size: 1.5em;
    `}),yn=(0,t.css)({margin:"-0.2rem 0.25rem 0 0"});function gn(Te){const{detailState:we,linksGetter:Ue,logItemToggle:Ge,logsToggle:ct,processToggle:vt,span:At,tagsToggle:jt,traceStartTime:qt,traceDuration:an,traceName:xn,warningsToggle:Un,stackTracesToggle:Cn,referencesToggle:Ln,referenceItemToggle:la,createSpanLink:Xn,createFocusSpanLink:Gn,datasourceType:Yn,traceFlameGraphs:Ma,setTraceFlameGraphs:Ua,traceToProfilesOptions:ha,setRedrawListView:Ia}=Te,{isTagsOpen:Xa,isProcessOpen:Cs,logs:hs,isWarningsOpen:As,references:is,isStackTracesOpen:Qs}=we,{operationName:pr,process:Ss,duration:Ys,relativeStartTime:po,startTime:qs,traceID:jr,spanID:zs,logs:ia,tags:ba,warnings:Va,references:os,stackTraces:ys}=At,{timeZone:$s}=Te;let Fs=[{key:"svc",label:"Service:",value:Ss.serviceName},{key:"duration",label:"Duration:",value:(0,g.a3)(Ys)},{key:"start",label:"Start Time:",value:(0,g.a3)(po)+Rn(qs,$s)},...At.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:At.childSpanCount}]:[]];const fs=(0,m.of)(rn);At.kind&&Fs.push({key:ot,label:"Kind:",value:At.kind}),At.statusCode!==void 0&&Fs.push({key:Tt,label:"Status:",value:et.s[At.statusCode].toLowerCase()}),At.statusMessage&&Fs.push({key:Pn,label:"Status Message:",value:At.statusMessage}),At.instrumentationLibraryName&&Fs.push({key:ft,label:"Library Name:",value:At.instrumentationLibraryName}),At.instrumentationLibraryVersion&&Fs.push({key:Mt,label:"Library Version:",value:At.instrumentationLibraryVersion}),At.traceState&&Fs.push({key:_t,label:"Trace State:",value:At.traceState});const To=(Ps,Mo,Tr,Gr)=>n.createElement(rt.R,{link:{...Ps,title:Tr,target:"_blank",origin:Ps.field,onClick:yi=>{(0,r.rR)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Yn,grafana_version:s.$.buildInfo.version,type:Mo,location:"spanDetails"}),Ps.onClick?Ps.onClick?.(yi):lt.Ny.push(Ps.href)}},buttonProps:{icon:Gr}});let So=null,nl=null;if(Xn){const Ps=Xn(At),Mo=Ps?.filter(Gr=>Gr.type===dn.N.Logs);Ps&&Mo&&Mo.length>0&&(So=To(Mo[0],dn.N.Logs,"Logs for this span","gf-logs"));const Tr=Ps?.filter(Gr=>Gr.type===dn.N.Profiles&&Gr.title===Ct.cd);Ps&&Tr&&Tr.length>0&&(nl=To(Tr[0],dn.N.Profiles,"Profiles for this span","link"))}const Uo=Gn(jr,zs);return n.createElement("div",{"data-testid":"span-detail-component"},n.createElement("div",{className:fs.header},n.createElement("h2",{className:fs.operationName},pr),n.createElement("div",{className:fs.listWrapper},n.createElement(Wt,{className:fs.list,divider:!0,items:Fs}))),n.createElement("span",{style:{marginRight:"10px"}},So),nl,n.createElement(ut.c,{spacing:1}),n.createElement("div",null,n.createElement("div",null,n.createElement(pt,{data:ba,label:"Span Attributes",linksGetter:Ue,isOpen:Xa,onToggle:()=>jt(zs)}),Ss.tags&&n.createElement(pt,{className:fs.AccordianKeyValuesItem,data:Ss.tags,label:"Resource Attributes",linksGetter:Ue,isOpen:Cs,onToggle:()=>vt(zs)})),ia&&ia.length>0&&n.createElement(on,{linksGetter:Ue,logs:ia,isOpen:hs.isOpen,openedItems:hs.openedItems,onToggle:()=>ct(zs),onItemToggle:Ps=>Ge(zs,Ps),timestamp:qt}),Va&&Va.length>0&&n.createElement(Dn,{className:fs.AccordianWarnings,headerClassName:fs.AccordianWarningsHeader,label:n.createElement("span",{className:fs.AccordianWarningsLabel},"Warnings"),data:Va,isOpen:As,onToggle:()=>Un(zs)}),ys?.length?n.createElement(Dn,{label:"Stack trace",data:ys,isOpen:Qs,TextComponent:Ps=>{let Mo;return Ps.data?.length>1?Mo=Ps.data.map((Tr,Gr)=>`StackTrace ${Gr+1}:
${Tr}`).join(`
`):Mo=Ps.data?.[0],n.createElement(Et.f,{className:fs.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:Mo})},onToggle:()=>Cn(zs)}):null,os&&os.length>0&&(os.length>1||os[0].refType!=="CHILD_OF")&&n.createElement(Wn,{data:os,isOpen:is.isOpen,openedItems:is.openedItems,onToggle:()=>Ln(zs),onItemToggle:Ps=>la(zs,Ps),createFocusSpanLink:Gn}),At.tags.some(Ps=>Ps.key===Ut.QW)&&n.createElement(zt,{span:At,timeZone:$s,traceFlameGraphs:Ma,setTraceFlameGraphs:Ua,traceToProfilesOptions:ha,setRedrawListView:Ia,traceDuration:an,traceName:xn}),n.createElement("small",{className:fs.debugInfo},n.createElement("a",{...Uo,onClick:Ps=>{Uo.onClick&&Ps.button===0&&(!Ps.currentTarget.target||Ps.currentTarget.target==="_self")&&!(Ps.metaKey||Ps.altKey||Ps.ctrlKey||Ps.shiftKey)&&(Ps.preventDefault(),Uo.onClick(Ps))}},n.createElement(Le.I,{name:"link",className:v()(yn,fs.LinkIcon)})),n.createElement("span",{className:fs.debugLabel,"data-label":"SpanID:"})," ",zs)))}const Rn=(Te,we)=>{const Ue=(0,nt.LE)(Te/1e3,{timeZone:we,defaultWithMS:!0}),Ge=Ue.split(" ");return` (${Ge[1]?Ge[1]:Ue})`},Kt=Te=>({container:(0,t.css)({textOverflow:"ellipsis"}),header:(0,t.css)`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,l.R)(Te,"#e8e8e8")};
      }
    `,headerEmpty:(0,t.css)`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:(0,t.css)`
      label: headerHighContrast;
      &:hover {
        background: ${(0,l.R)(Te,"#ddd")};
      }
    `,emptyIcon:(0,t.css)`
      label: emptyIcon;
      color: ${(0,l.R)(Te,"#aaa")};
    `,summary:(0,t.css)`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:(0,t.css)`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,l.R)(Te,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:(0,t.css)`
      label: summaryLabel;
      color: ${(0,l.R)(Te,"#777")};
    `,summaryDelim:(0,t.css)`
      label: summaryDelim;
      color: ${(0,l.R)(Te,"#bbb")};
      padding: 0 0.2em;
    `});function mt(Te){const{data:we}=Te,Ue=(0,m.of)(Kt);return!Array.isArray(we)||!we.length?null:n.createElement("ul",{className:Ue.summary},we.map((Ge,ct)=>n.createElement("li",{className:Ue.summaryItem,key:`${Ge.key}-${ct}`},n.createElement("span",{className:Ue.summaryLabel},Ge.key),n.createElement("span",{className:Ue.summaryDelim},"="),String(Ge.value))))}mt.defaultProps={data:null};function pt(Te){const{className:we,data:Ue,highContrast:Ge,interactive:ct,isOpen:vt,label:At,linksGetter:jt,onToggle:qt}=Te,an=!Array.isArray(Ue)||!Ue.length,xn=(0,m.of)(Kt),Un=v()(yn,{[xn.emptyIcon]:an});let Cn=null,Ln=null;return ct&&(Cn=vt?n.createElement(Le.I,{name:"angle-down",className:Un}):n.createElement(Le.I,{name:"angle-right",className:Un}),Ln={"aria-checked":vt,onClick:an?null:qt,role:"switch"}),n.createElement("div",{className:v()(we,xn.container)},n.createElement("div",{className:v()(xn.header,{[xn.headerEmpty]:an,[xn.headerHighContrast]:Ge&&!an}),...Ln,"data-testid":"AccordianKeyValues--header"},Cn,n.createElement("strong",{"data-test":xe},At,vt||":"),!vt&&n.createElement(mt,{data:Ue})),vt&&n.createElement(Ze,{data:Ue,linksGetter:jt}))}pt.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const Qt=Te=>({AccordianLogs:(0,t.css)`
      label: AccordianLogs;
      border: 1px solid ${(0,l.R)(Te,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:(0,t.css)`
      label: AccordianLogsHeader;
      background: ${(0,l.R)(Te,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,l.R)(Te,"#dadada")};
      }
    `,AccordianLogsContent:(0,t.css)`
      label: AccordianLogsContent;
      background: ${(0,l.R)(Te,"#f0f0f0")};
      border-top: 1px solid ${(0,l.R)(Te,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:(0,t.css)`
      label: AccordianLogsFooter;
      color: ${(0,l.R)(Te,"#999")};
    `,AccordianKeyValuesItem:(0,t.css)({marginBottom:Te.spacing(.5)})});function on(Te){const{interactive:we,isOpen:Ue,linksGetter:Ge,logs:ct,openedItems:vt,onItemToggle:At,onToggle:jt,timestamp:qt}=Te;let an=null,xn="span",Un=null;we&&(an=Ue?n.createElement(Le.I,{name:"angle-down",className:yn}):n.createElement(Le.I,{name:"angle-right",className:"u-align-icon"}),xn="a",Un={"aria-checked":Ue,onClick:jt,role:"switch"});const Cn=(0,m.of)(Qt);return n.createElement("div",{className:Cn.AccordianLogs},n.createElement(xn,{className:Cn.AccordianLogsHeader,...Un},an," ",n.createElement("strong",null,"Events")," (",ct.length,")"),Ue&&n.createElement("div",{className:Cn.AccordianLogsContent},(0,ue.sortBy)(ct,"timestamp").map((Ln,la)=>n.createElement(pt,{key:`${Ln.timestamp}-${la}`,className:la<ct.length-1?Cn.AccordianKeyValuesItem:null,data:Ln.fields||[],highContrast:!0,interactive:we,isOpen:vt?vt.has(Ln):!1,label:`${(0,g.a3)(Ln.timestamp-qt)}`,linksGetter:Ge,onToggle:we&&At?()=>At(Ln):null})),n.createElement("small",{className:Cn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}on.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const pn=Te=>({wrapper:(0,t.css)({label:"wrapper",bottom:0,left:0,position:"absolute",right:0,top:0,overflow:"hidden",zIndex:0}),bar:(0,t.css)({label:"bar",borderRadius:Te.shape.radius.default,minWidth:"2px",position:"absolute",height:"36%",top:"32%"}),rpc:(0,t.css)({label:"rpc",position:"absolute",top:"35%",bottom:"35%",zIndex:1}),label:(0,t.css)({label:"label",color:"#aaa",fontSize:"12px",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans - serif",lineHeight:"1em",whiteSpace:"nowrap",padding:"0 0.5em",position:"absolute"}),logMarker:(0,t.css)({label:"logMarker",backgroundColor:(0,l.R)(Te,"#2c3235"),cursor:"pointer",height:"60%",minWidth:"1px",position:"absolute",top:"20%","&:hover":{backgroundColor:(0,l.R)(Te,"#464c54")},"&::before, &::after":{content:"''",position:"absolute",top:0,bottom:0,right:0,border:"1px solid transparent"},"&::after":{left:0}}),criticalPath:(0,t.css)({position:"absolute",top:"45%",height:"11%",zIndex:2,overflow:"hidden",background:(0,l.R)(Te,"#f1f1f1"),borderLeft:`1px solid ${(0,l.R)(Te,"#2c3235")}`,borderRight:`1px solid ${(0,l.R)(Te,"#2c3235")}`})});function fn(Te){return`${(Te*100).toFixed(1)}%`}function zn(Te){return`${Te*100}%`}function aa({criticalPath:Te,viewEnd:we,viewStart:Ue,getViewedBounds:Ge,color:ct,shortLabel:vt,longLabel:At,onClick:jt,rpc:qt,traceStartTime:an,span:xn,className:Un,labelClassName:Cn}){const[Ln,la]=(0,n.useState)(vt),Xn=()=>la(vt),Gn=()=>la(At),Yn=(0,ue.groupBy)(xn.logs,Ua=>{const ha=Ge(Ua.timestamp,Ua.timestamp).start;return fn(Math.round(ha*500)/500)}),Ma=(0,m.of)(pn);return n.createElement("div",{className:v()(Ma.wrapper,Un),onBlur:Xn,onClick:jt,onFocus:Gn,onMouseOut:Xn,onMouseOver:Gn,"aria-hidden":!0,"data-testid":He.Tp.components.TraceViewer.spanBar},n.createElement("div",{"aria-label":Ln,className:v()(Ma.bar),style:{background:ct,left:fn(Ue),width:fn(we-Ue)}},n.createElement("div",{className:v()(Ma.label,Cn),"data-testid":"SpanBar--label"},Ln)),n.createElement("div",null,Object.keys(Yn).map(Ua=>n.createElement($e,{key:Ua,content:n.createElement(on,{interactive:!1,isOpen:!0,logs:Yn[Ua],timestamp:an})},n.createElement("div",{"data-testid":"SpanBar--logMarker",className:v()(Ma.logMarker),style:{left:Ua}})))),qt&&n.createElement("div",{className:v()(Ma.rpc),style:{background:qt.color,left:fn(qt.viewStart),width:fn(qt.viewEnd-qt.viewStart)}}),Te?.map((Ua,ha)=>{const Ia=Ge(Ua.section_start,Ua.section_end),Xa=Ia.start,Cs=Ia.end,hs=`${Ua.spanId}-${ha}`;return n.createElement(je.m,{key:hs,placement:"top",content:n.createElement("div",null,"A segment on the ",n.createElement("em",null,"critical path")," of the overall trace / request / workflow.")},n.createElement("div",{"data-testid":"SpanBar--criticalPath",className:Ma.criticalPath,style:{left:zn(Xa),width:zn(Cs-Xa)}}))}))}const Zn=n.memo(aa);var jn=e(64539),ga=e(28122);const Ra=(Te,we,Ue,Ge)=>(Te.sort(function(ct,vt){return(ct.title||"link").toLowerCase().localeCompare((vt.title||"link").toLowerCase())}),Te.map((ct,vt)=>n.createElement(jn.D,{key:vt,label:ct.title||"Link",onClick:ct.onClick?At=>{(0,r.rR)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Ge,grafana_version:s.$.buildInfo.version,type:ct.type,location:"menu"}),At?.preventDefault(),ct.onClick(At),Ue()}:void 0,url:ct.href,className:we.menuItem}))),_a=({links:Te,datasourceType:we,color:Ue})=>{const Ge=(0,m.of)(()=>Za(Ue)),[ct,vt]=(0,n.useState)(!1),[At,jt]=(0,n.useState)({x:0,y:0}),qt=()=>vt(!1);return n.createElement("div",{"data-testid":"SpanLinksMenu",className:Ge.wrapper},n.createElement("button",{onClick:an=>{vt(!0),jt({x:an.pageX,y:an.pageY})},className:Ge.button},n.createElement(Le.I,{name:"link",className:Ge.icon})),ct?n.createElement(ga.t,{onClose:()=>vt(!1),renderMenuItems:()=>Ra(Te,Ge,qt,we),focusOnOpen:!1,x:At.x,y:At.y}):null)},Za=Te=>({wrapper:(0,t.css)`
      border: none;
      background: ${Te}10;
      border-bottom: 1px solid ${Te}CF;
      padding-right: 4px;
    `,button:(0,t.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,icon:(0,t.css)`
      background: transparent;
      border: none;
      padding: 0;
    `,menuItem:(0,t.css)`
      max-width: 60ch;
      overflow: hidden;
    `});function ms(Te){return(0,ue.get)((0,ue.find)(Te.references,({span:we,refType:Ue})=>we&&we.spanID&&(Ue==="CHILD_OF"||Ue==="FOLLOWS_FROM")),"span")}function rs(Te){const we=[];if(!Te)return we;let Ue=ms(Te);for(;Ue;)we.push(Ue.spanID),Ue=ms(Ue);return we}const Ja=(0,o.N)(Te=>({SpanTreeOffset:(0,t.css)`
      label: SpanTreeOffset;
      color: ${(0,l.R)(Te,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:(0,t.css)`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:(0,t.css)`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: 1rem;
      height: 100%;
      display: inline-flex;
      transition: padding 300ms ease-out;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,l.R)(Te,"lightgrey")};
      }
    `,indentGuideActive:(0,t.css)`
      label: indentGuideActive;
      &::before {
        background-color: ${(0,l.R)(Te,"#777")};
      }
    `,indentGuideThin:(0,t.css)`
      padding-right: 0.3rem;
    `,iconWrapper:(0,t.css)`
      label: iconWrapper;
      position: absolute;
      right: 0;
    `}));class Ns extends n.PureComponent{constructor(we){super(we),this.handleMouseLeave=(Ue,Ge)=>{(!(Ue.relatedTarget instanceof HTMLSpanElement)||(0,ue.get)(Ue,"relatedTarget.dataset.ancestorId")!==Ge)&&this.props.removeHoverIndentGuideId(Ge)},this.handleMouseEnter=(Ue,Ge)=>{(!(Ue.relatedTarget instanceof HTMLSpanElement)||(0,ue.get)(Ue,"relatedTarget.dataset.ancestorId")!==Ge)&&this.props.addHoverIndentGuideId(Ge)},this.ancestorIds=rs(we.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}static{this.displayName="UnthemedSpanTreeOffset"}static{this.defaultProps={childrenVisible:!1,showChildrenIcon:!0}}render(){const{childrenVisible:we,onClick:Ue,showChildrenIcon:Ge,span:ct,theme:vt,visibleSpanIds:At}=this.props,{hasChildren:jt,spanID:qt}=ct,an=jt?{onClick:Ue,role:"switch","aria-checked":we}:null,xn=Ge&&jt&&(we?n.createElement(Le.I,{name:"angle-down","data-testid":"icon-arrow-down",size:"sm"}):n.createElement(Le.I,{name:"angle-right","data-testid":"icon-arrow-right",size:"sm"})),Un=Ja(vt);return n.createElement("span",{className:v()(Un.SpanTreeOffset,{[Un.SpanTreeOffsetParent]:jt}),...an},this.ancestorIds.map((Cn,Ln)=>n.createElement("span",{key:Cn,className:v()(Un.indentGuide,{[Un.indentGuideActive]:this.props.hoverIndentGuideIds.has(Cn),[Un.indentGuideThin]:Ln!==this.ancestorIds.length-1&&Cn!=="root"&&!At.includes(Cn)}),"data-ancestor-id":Cn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:la=>this.handleMouseEnter(la,Cn),onMouseLeave:la=>this.handleMouseLeave(la,Cn)})),xn&&n.createElement("span",{className:Un.iconWrapper,onMouseEnter:Cn=>this.handleMouseEnter(Cn,qt),onMouseLeave:Cn=>this.handleMouseLeave(Cn,qt),"data-testid":"icon-wrapper"},xn))}}const ls=(0,m.cV)(Ns),cs="spanBar",ds="spanBarLabel",ps="nameWrapper",Vr="nameWrapperMatchingFilter",ur="jaegerView",ks="nameColumn",ws=(0,o.N)((Te,we)=>{const Ue={label:"flash",flash:(0,t.keyframes)`
    from {
      background-color: ${(0,l.R)(Te,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},Ge=we?"":(0,l.R)(Te,"#fffce4");return{nameWrapper:(0,t.css)`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:(0,t.css)`
      label: nameWrapperMatchingFilter;
      background-color: ${Ge};
    `,nameColumn:(0,t.css)`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:(0,t.css)`
      label: endpointName;
      color: ${(0,l.R)(Te,"#484848")};
      font-size: 0.9em;
    `,view:(0,t.css)`
      label: view;
      position: relative;
    `,viewExpanded:(0,t.css)`
      label: viewExpanded;
      background: ${(0,l.R)(Te,"#f8f8f8")};
      outline: 1px solid ${(0,l.R)(Te,"#ddd")};
    `,viewExpandedAndMatchingFilter:(0,t.css)`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,l.R)(Te,"#fff3d7")};
      outline: 1px solid ${(0,l.R)(Te,"#ddd")};
    `,row:(0,t.css)`
      label: row;
      font-size: 0.9em;
      &:hover .${cs} {
        opacity: 1;
      }
      &:hover .${ds} {
        color: ${(0,l.R)(Te,"#000")};
      }
      &:hover .${ps} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,l.R)(Te,"#fafafa")},
          ${(0,l.R)(Te,"#f8f8f8")} 75%,
          ${(0,l.R)(Te,"#eee")}
        );
      }
      &:hover .${ur} {
        background-color: ${(0,l.R)(Te,"#f5f5f5")};
        outline: 1px solid ${(0,l.R)(Te,"#ddd")};
      }
    `,rowClippingLeft:(0,t.css)`
      label: rowClippingLeft;
      & .${ks}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,l.R)(Te,"rgba(25, 25, 25, 0.25)")},
          ${(0,l.R)(Te,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:(0,t.css)`
      label: rowClippingRight;
      & .${ur}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,l.R)(Te,"rgba(25, 25, 25, 0.25)")},
          ${(0,l.R)(Te,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:(0,t.css)`
      label: rowExpanded;
      & .${cs} {
        opacity: 1;
      }
      & .${ds} {
        color: ${(0,l.R)(Te,"#000")};
      }
      & .${ps}, &:hover .${ps} {
        background: ${(0,l.R)(Te,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,l.R)(Te,"#ddd")};
      }
      & .${Vr} {
        background: ${(0,l.R)(Te,"#fff3d7")};
      }
      &:hover .${ur} {
        background: ${(0,l.R)(Te,"#eee")};
      }
    `,rowMatchingFilter:(0,t.css)`
      label: rowMatchingFilter;
      // background-color: ${(0,l.R)(Te,"#fffbde")};
      &:hover .${ps} {
        background: linear-gradient(
          90deg,
          ${(0,l.R)(Te,"#fffbde")},
          ${(0,l.R)(Te,"#fffbde")} 75%,
          ${(0,l.R)(Te,"#f7f1c6")}
        );
      }
      &:hover .${ur} {
        background-color: ${(0,l.R)(Te,"#f7f1c6")};
        outline: 1px solid ${(0,l.R)(Te,"#ddd")};
      }
    `,rowFocused:(0,t.css)`
      label: rowFocused;
      background-color: ${(0,l.R)(Te,"#cbe7ff")};
      animation: ${Ue.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${ps}, .${ur}, .${Vr} {
        background-color: ${(0,l.R)(Te,"#cbe7ff")};
        animation: ${Ue.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${cs} {
        opacity: 1;
      }
      & .${ds} {
        color: ${(0,l.R)(Te,"#000")};
      }
      &:hover .${ps}, :hover .${ur} {
        background: ${(0,l.R)(Te,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,l.R)(Te,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:(0,t.css)`
      label: rowExpandedAndMatchingFilter;
      &:hover .${ur} {
        background: ${(0,l.R)(Te,"#ffeccf")};
      }
    `,name:(0,t.css)`
      label: name;
      color: ${(0,l.R)(Te,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > span {
        color: ${(0,l.R)(Te,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
      border-bottom-width: 1px;
      border-bottom-style: solid;
    `,nameDetailExpanded:(0,t.css)`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:(0,t.css)`
      label: svcName;
      font-size: 0.9em;
      font-weight: bold;
      margin-right: 0.25rem;
    `,svcNameChildrenCollapsed:(0,t.css)`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:(0,t.css)`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,l.R)(Te,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:(0,t.css)`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:(0,t.css)`
      label: labelRight;
      left: 100%;
    `,labelLeft:(0,t.css)`
      label: labelLeft;
      right: 100%;
    `}});class Yr extends n.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(we,Ue,Ge)=>{const ct=Ue?.type??"";if(ct===ke)return"";if(ct===""||ct===Se)return`(${Ge})`;if(ct===We){const vt=Ue?.tag?.trim()??"";if(vt!==""&&we.tags){const At=we.tags?.find(qt=>qt.key===vt);if(At)return`(${At.value})`;const jt=we.process?.tags?.find(qt=>qt.key===vt);if(jt)return`(${jt.value})`}}return""}}static{this.displayName="UnthemedSpanBarRow"}static{this.defaultProps={className:"",rpc:null}}render(){const{className:we,color:Ue,spanBarOptions:Ge,columnDivision:ct,isChildrenExpanded:vt,isDetailExpanded:At,isMatchingFilter:jt,showSpanFilterMatchesOnly:qt,isFocused:an,numTicks:xn,rpc:Un,noInstrumentedServer:Cn,showErrorIcon:Ln,getViewedBounds:la,traceStartTime:Xn,span:Gn,hoverIndentGuideIds:Yn,addHoverIndentGuideId:Ma,removeHoverIndentGuideId:Ua,clippingLeft:ha,clippingRight:Ia,theme:Xa,createSpanLink:Cs,datasourceType:hs,showServiceName:As,visibleSpanIds:is,criticalPath:Qs}=this.props,{duration:pr,hasChildren:Ss,operationName:Ys,process:{serviceName:po}}=Gn,qs=(0,g.a3)(pr),jr=la(Gn.startTime,Gn.startTime+Gn.duration),zs=jr.start,ia=jr.end,ba=ws(Xa,qt),Va=`${po}::${Ys}`;let os,ys;return zs>1-ia?(os=`${Va} | ${qs}`,ys=ba.labelLeft):(os=`${qs} | ${Va}`,ys=ba.labelRight),n.createElement(V,{className:v()(ba.row,{[ba.rowExpanded]:At,[ba.rowMatchingFilter]:jt,[ba.rowExpandedAndMatchingFilter]:jt&&At,[ba.rowFocused]:an,[ba.rowClippingLeft]:ha,[ba.rowClippingRight]:Ia},we)},n.createElement(V.Cell,{className:v()(ba.nameColumn,ks),width:ct},n.createElement("div",{className:v()(ba.nameWrapper,ps,{[ba.nameWrapperMatchingFilter]:jt,nameWrapperMatchingFilter:jt})},n.createElement(ls,{onClick:Ss?this._childrenToggle:void 0,childrenVisible:vt,span:Gn,hoverIndentGuideIds:Yn,addHoverIndentGuideId:Ma,removeHoverIndentGuideId:Ua,visibleSpanIds:is}),n.createElement("button",{type:"button",className:v()(ba.name,{[ba.nameDetailExpanded]:At}),"aria-checked":At,title:Va,onClick:this._detailToggle,role:"switch",style:{background:`${Ue}10`,borderBottomColor:`${Ue}CF`},tabIndex:0},Ln&&n.createElement(Le.I,{name:"exclamation-circle",style:{backgroundColor:Gn.errorIconColor?(0,l.R)(Xa,Gn.errorIconColor):(0,l.R)(Xa,"#db2828")},className:ba.errorIcon}),As&&n.createElement("span",{className:v()(ba.svcName,{[ba.svcNameChildrenCollapsed]:Ss&&!vt})},`${po} `),Un&&n.createElement("span",null,n.createElement(Le.I,{name:"arrow-right"})," ",n.createElement("i",{className:ba.rpcColorMarker,style:{background:Un.color}}),Un.serviceName),Cn&&n.createElement("span",null,n.createElement(Le.I,{name:"arrow-right"})," ",n.createElement("i",{className:ba.rpcColorMarker,style:{background:Cn.color}}),Cn.serviceName),n.createElement("span",{className:ba.endpointName},Un?Un.operationName:Ys),n.createElement("span",{className:ba.endpointName}," ",this.getSpanBarLabel(Gn,Ge,qs))),Cs&&(()=>{const $s=Cs(Gn),Fs=$s?.length||0;return $s&&Fs===1?$s[0]?n.createElement("a",{href:$s[0].href,target:"_blank",style:{background:`${Ue}10`,borderBottom:`1px solid ${Ue}CF`,paddingRight:"4px"},rel:"noopener noreferrer",onClick:$s[0].onClick?fs=>{!(fs.ctrlKey||fs.metaKey||fs.shiftKey)&&$s[0].onClick&&(fs.preventDefault(),$s[0].onClick(fs))}:void 0},$s[0].content):null:$s&&Fs>1?n.createElement(_a,{links:$s,datasourceType:hs,color:Ue}):null})())),n.createElement(V.Cell,{className:v()(ba.view,ur,{[ba.viewExpanded]:At,[ba.viewExpandedAndMatchingFilter]:jt&&At}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-ct,onClick:this._detailToggle},n.createElement(w,{numTicks:xn}),n.createElement(Zn,{criticalPath:Qs,rpc:Un,viewStart:zs,viewEnd:ia,getViewedBounds:la,color:Ue,shortLabel:qs,longLabel:os,traceStartTime:Xn,span:Gn,labelClassName:`${ds} ${ys}`,className:cs})))}}const Os=(0,m.cV)(Yr),Es=(0,o.N)(Te=>({expandedAccent:(0,t.css)`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 1px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:(0,t.css)`
      label: infoWrapper;
      border: 1px solid ${(0,l.R)(Te,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class us extends n.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(we,Ue)=>{const{linksGetter:Ge,span:ct}=this.props;return Ge(ct,we,Ue)}}render(){const{color:we,columnDivision:Ue,detailState:Ge,logItemToggle:ct,logsToggle:vt,processToggle:At,referenceItemToggle:jt,referencesToggle:qt,warningsToggle:an,stackTracesToggle:xn,span:Un,traceToProfilesOptions:Cn,timeZone:Ln,tagsToggle:la,traceStartTime:Xn,traceDuration:Gn,traceName:Yn,hoverIndentGuideIds:Ma,addHoverIndentGuideId:Ua,removeHoverIndentGuideId:ha,theme:Ia,createSpanLink:Xa,focusedSpanId:Cs,createFocusSpanLink:hs,datasourceType:As,visibleSpanIds:is,traceFlameGraphs:Qs,setTraceFlameGraphs:pr,setRedrawListView:Ss}=this.props,Ys=Es(Ia);return n.createElement(V,null,n.createElement(V.Cell,{width:Ue,style:{overflow:"hidden"}},n.createElement(ls,{span:Un,showChildrenIcon:!1,hoverIndentGuideIds:Ma,addHoverIndentGuideId:Ua,removeHoverIndentGuideId:ha,visibleSpanIds:is}),n.createElement(Fe.$n,{fill:"text",onClick:this._detailToggle,className:v()(Ys.expandedAccent,(0,Fe.my)(Ia)),style:{borderColor:we},"data-testid":"detail-row-expanded-accent"})),n.createElement(V.Cell,{width:1-Ue},n.createElement("div",{className:Ys.infoWrapper,style:{borderTopColor:we}},n.createElement(gn,{detailState:Ge,linksGetter:this._linksGetter,logItemToggle:ct,logsToggle:vt,processToggle:At,referenceItemToggle:jt,referencesToggle:qt,warningsToggle:an,stackTracesToggle:xn,span:Un,traceToProfilesOptions:Cn,timeZone:Ln,tagsToggle:la,traceStartTime:Xn,traceDuration:Gn,traceName:Yn,createSpanLink:Xa,focusedSpanId:Cs,createFocusSpanLink:hs,datasourceType:As,traceFlameGraphs:Qs,setTraceFlameGraphs:pr,setRedrawListView:Ss}))))}}const tr=(0,m.cV)(us),Ts=(0,o.N)(()=>({rowsWrapper:(0,t.css)`
      width: 100%;
    `,row:(0,t.css)`
      width: 100%;
    `,scrollToTopButton:(0,t.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: absolute;
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `})),Jr={bar:28,detail:161,detailWithLogs:197},Bo=5,nr=33;function io(Te,we,Ue,Ge,ct,vt,At){if(!Te)return[];ct&&Ge&&(Te=Te.filter(an=>Ge.has(an.spanID))),vt&&At&&(Te=Te.filter(an=>At.find(xn=>xn.spanId===an.spanID)));let jt=null;const qt=[];for(let an=0;an<Te.length;an++){const xn=Te[an],{spanID:Un,depth:Cn}=xn;let Ln=!1;jt!=null&&(Cn>=jt?Ln=!0:jt=null),!Ln&&(we.has(Un)&&(jt=Cn+1),qt.push({span:xn,isDetail:!1,spanIndex:an}),Ue.has(Un)&&qt.push({span:xn,isDetail:!0,spanIndex:an}))}return qt}function Eo(Te){const[we,Ue]=Te;return{left:we>0,right:Ue<1}}function Ko(Te,we,Ue,Ge,ct,vt,At){return Te?io(Te.spans,we,Ue,Ge,ct,vt,At):[]}function $o(Te){const we=new Map;return Te&&Te.spans.forEach(Ue=>{Ue.childSpanIds.length&&we.set(Ue.spanID,Ue.childSpanIds)}),we}const br=(0,be.A)(Ko),_r=(0,be.A)(b,ue.isEqual),lo=(0,be.A)(Eo,ue.isEqual),Vo=(0,be.A)($o);class co extends n.Component{constructor(){super(...arguments),this.hasScrolledToSpan=!1,this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=we=>this.getRowStates()[we].spanIndex,this.mapSpanIndexToRowIndex=we=>{const Ue=this.getRowStates().length;for(let Ge=0;Ge<Ue;Ge++){const{spanIndex:ct}=this.getRowStates()[Ge];if(ct===we)return Ge}throw new Error(`unable to find row for span index: ${we}`)},this.setListView=we=>{this.listView=we},this.getKeyFromIndex=we=>{const{isDetail:Ue,span:Ge}=this.getRowStates()[we];return`${Ge.traceID}--${Ge.spanID}--${Ue?"detail":"bar"}`},this.getIndexFromKey=we=>{const Ue=we.split("--"),Ge=Ue[0],ct=Ue[1],vt=Ue[2]==="detail",At=this.getRowStates().length;for(let jt=0;jt<At;jt++){const{span:qt,isDetail:an}=this.getRowStates()[jt];if(qt.spanID===ct&&qt.traceID===Ge&&an===vt)return jt}return-1},this.getRowHeight=we=>{const{span:Ue,isDetail:Ge}=this.getRowStates()[we];return Ge?Array.isArray(Ue.logs)&&Ue.logs.length?Jr.detailWithLogs:Jr.detail:Jr.bar},this.renderRow=(we,Ue,Ge,ct)=>{const{isDetail:vt,span:At,spanIndex:jt}=this.getRowStates()[Ge],qt=Math.max((this.listView?.getTopVisibleIndex()||0)-nr,0),an=(this.listView?.getBottomVisibleIndex()||0)+nr,xn=this.getVisibleSpanIds(qt,an);return vt?this.renderSpanDetailRow(At,we,Ue,ct,xn):this.renderSpanBarRow(At,jt,we,Ue,ct,xn)},this.scrollToSpan=(we,Ue)=>{if(Ue==null)return;const Ge=this.getRowStates().findIndex(ct=>ct.span.spanID===Ue);Ge>=0&&this.listView?.scrollToIndex(Ge,we)},this.scrollToTop=()=>{const{topOfViewRef:we,datasourceType:Ue,trace:Ge}=this.props;we?.current?.scrollIntoView({behavior:"smooth"}),(0,r.rR)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:Ue,grafana_version:s.$.buildInfo.version,numServices:Ge.services.length,numSpans:Ge.spans.length})},this.getVisibleSpanIds=(0,be.A)((we,Ue)=>{const Ge=[];for(let ct=we;ct<Ue;ct++){const vt=this.getRowStates()[ct];vt?.span&&Ge.push(vt.span.spanID)}return Ge})}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(we){let Ue;for(Ue in we)if(we[Ue]!==this.props[Ue])return!0;return!1}componentDidUpdate(we){const{headerHeight:Ue,focusedSpanId:Ge,focusedSpanIdForSearch:ct}=this.props;this.hasScrolledToSpan||(this.scrollToSpan(Ue,Ge),this.hasScrolledToSpan=!0),Ge!==we.focusedSpanId&&this.scrollToSpan(Ue,Ge),ct!==we.focusedSpanIdForSearch&&this.scrollToSpan(Ue,ct)}getRowStates(){const{childrenHiddenIDs:we,detailStates:Ue,trace:Ge,findMatchesIDs:ct,showSpanFilterMatchesOnly:vt,showCriticalPathSpansOnly:At,criticalPath:jt}=this.props;return br(Ge,we,Ue,ct,vt,At,jt)}getClipping(){const{currentViewRangeTime:we}=this.props;return lo(we)}getViewedBounds(){const{currentViewRangeTime:we,trace:Ue}=this.props,[Ge,ct]=we;return _r({min:Ue.startTime,max:Ue.endTime,viewStart:Ge,viewEnd:ct})}getChildSpansMap(){return Vo(this.props.trace)}getAccessors(){const we=this.listView;if(!we)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:we.getViewHeight,getBottomRowIndexVisible:we.getBottomVisibleIndex,getTopRowIndexVisible:we.getTopVisibleIndex,getRowPosition:we.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(we,Ue,Ge,ct,vt,At){const{spanID:jt,childSpanIds:qt}=we,{serviceName:an}=we.process,{childrenHiddenIDs:xn,childrenToggle:Un,detailStates:Cn,detailToggle:Ln,findMatchesIDs:la,spanNameColumnWidth:Xn,trace:Gn,spanBarOptions:Yn,hoverIndentGuideIds:Ma,addHoverIndentGuideId:Ua,removeHoverIndentGuideId:ha,createSpanLink:Ia,focusedSpanId:Xa,focusedSpanIdForSearch:Cs,showSpanFilterMatchesOnly:hs,theme:As,datasourceType:is,criticalPath:Qs}=this.props;if(!Gn)return null;const pr=(0,ye.Kv)(an,As),Ss=xn.has(jt),Ys=Cn.has(jt),po=la?la.has(jt):!1,qs=jt===Xa||jt===Cs,jr=R(we)||Ss&&B(Gn.spans,Ue);let zs=null;if(Ss){const fs=U(Gn.spans.slice(Ue));if(fs){const To=this.getViewedBounds()(fs.startTime,fs.startTime+fs.duration);zs={color:(0,ye.Kv)(fs.process.serviceName,As),operationName:fs.operationName,serviceName:fs.process.serviceName,viewEnd:To.end,viewStart:To.start}}}const ia=we.tags.find(fs=>fs.key===re);let ba=null;!we.hasChildren&&ia&&F(we)&&(ba={serviceName:ia.value,color:(0,ye.Kv)(ia.value,As)});const Va=Ue>0?Gn.spans[Ue-1]:null,os=[jt,...qt],ys=fs=>{fs.forEach(To=>{const So=this.getChildSpansMap().get(To);So?.length&&(os.push(...So),ys(So))})};ys(qt);const $s=Qs?.filter(fs=>Ss?os.includes(fs.spanId):fs.spanId===jt),Fs=Ts();return n.createElement("div",{className:Fs.row,key:Ge,style:ct,...vt},n.createElement(Os,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:pr,spanBarOptions:Yn,columnDivision:Xn,isChildrenExpanded:!Ss,isDetailExpanded:Ys,isMatchingFilter:po,isFocused:qs,showSpanFilterMatchesOnly:hs,numTicks:Bo,onDetailToggled:Ln,onChildrenToggled:Un,rpc:zs,noInstrumentedServer:ba,showErrorIcon:jr,getViewedBounds:this.getViewedBounds(),traceStartTime:Gn.startTime,span:we,hoverIndentGuideIds:Ma,addHoverIndentGuideId:Ua,removeHoverIndentGuideId:ha,createSpanLink:Ia,datasourceType:is,showServiceName:Va===null||Va.process.serviceName!==we.process.serviceName,visibleSpanIds:At,criticalPath:$s}))}renderSpanDetailRow(we,Ue,Ge,ct,vt){const{spanID:At}=we,{serviceName:jt}=we.process,{detailLogItemToggle:qt,detailLogsToggle:an,detailProcessToggle:xn,detailReferencesToggle:Un,detailReferenceItemToggle:Cn,detailWarningsToggle:Ln,detailStackTracesToggle:la,detailStates:Xn,detailTagsToggle:Gn,detailToggle:Yn,spanNameColumnWidth:Ma,trace:Ua,traceToProfilesOptions:ha,timeZone:Ia,hoverIndentGuideIds:Xa,addHoverIndentGuideId:Cs,removeHoverIndentGuideId:hs,linksGetter:As,createSpanLink:is,focusedSpanId:Qs,createFocusSpanLink:pr,theme:Ss,datasourceType:Ys,traceFlameGraphs:po,setTraceFlameGraphs:qs,setRedrawListView:jr}=this.props,zs=Xn.get(At);if(!Ua||!zs)return null;const ia=(0,ye.Kv)(jt,Ss),ba=Ts();return n.createElement("div",{className:ba.row,key:Ue,style:{...Ge,zIndex:1},...ct},n.createElement(tr,{color:ia,columnDivision:Ma,onDetailToggled:Yn,detailState:zs,linksGetter:As,logItemToggle:qt,logsToggle:an,processToggle:xn,referenceItemToggle:Cn,referencesToggle:Un,warningsToggle:Ln,stackTracesToggle:la,span:we,traceToProfilesOptions:ha,timeZone:Ia,tagsToggle:Gn,traceStartTime:Ua.startTime,traceDuration:Ua.duration,traceName:Ua.traceName,hoverIndentGuideIds:Xa,addHoverIndentGuideId:Cs,removeHoverIndentGuideId:hs,createSpanLink:is,focusedSpanId:Qs,createFocusSpanLink:pr,datasourceType:Ys,visibleSpanIds:vt,traceFlameGraphs:po,setTraceFlameGraphs:qs,setRedrawListView:jr}))}render(){const we=Ts(),{scrollElement:Ue,redrawListView:Ge}=this.props;return n.createElement(n.Fragment,null,n.createElement(Me,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:nr,viewBufferMin:nr,itemsWrapperClassName:we.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:Ue,redraw:Ge}),this.props.topOfViewRef&&n.createElement(ge.I,{className:we.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const Xr=(0,m.cV)(co),Zr=(0,o.N)(Te=>({TraceTimelineViewer:(0,t.css)`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,l.R)(Te,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,l.R)(Te,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,l.R)(Te,"teal")};
      }

      & .json-markup-null {
        color: ${(0,l.R)(Te,"teal")};
      }

      & .json-markup-number {
        color: ${(0,l.R)(Te,"blue","black")};
      }
    `})),zr=5;class yo extends n.PureComponent{constructor(we){super(we),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,r.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,r.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,r.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,r.rR)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.$.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){h({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:we,updateNextViewRangeTime:Ue,updateViewRangeTime:Ge,viewRange:ct,traceTimeline:vt,theme:At,topOfViewRef:jt,focusedSpanIdForSearch:qt,...an}=this.props,{trace:xn}=an,Un=Zr(At);return n.createElement("div",{className:Un.TraceTimelineViewer,ref:Cn=>Cn&&this.setState({height:Cn.getBoundingClientRect().height})},n.createElement(ie,{duration:xn.duration,nameColumnWidth:vt.spanNameColumnWidth,numTicks:zr,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:we,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:ct.time,updateNextViewRangeTime:Ue,updateViewRangeTime:Ge,columnResizeHandleHeight:this.state.height}),n.createElement(Xr,{...an,...vt,setSpanNameColumnWidth:we,currentViewRangeTime:ct.time.current,topOfViewRef:jt,focusedSpanIdForSearch:qt,datasourceType:this.props.datasourceType}))}}const qr=(0,m.cV)(yo);var Pr=e(39938);const uo=()=>({NewWindowIconLarge:(0,t.css)`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function Ws(Te){const{isLarge:we,className:Ue,...Ge}=Te,ct=(0,m.of)(uo),vt=v()({[ct.NewWindowIconLarge]:we},Ue);return n.createElement(Le.I,{className:vt,name:"anchor",...Ge})}Ws.defaultProps={isLarge:!1};const xt=Te=>n.createElement("a",{href:Te.href,title:Te.title,target:"_blank",rel:"noopener noreferrer",className:Te.className},Te.children," ",n.createElement(Ws,null));function wt(Te){const{links:we}=Te;return n.createElement(xt,{href:we[0].url,title:we[0].text,className:Te.className})}const vn=100,un="<trace-without-root-span>",Mn=()=>({BreakableText:(0,t.css)`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),_n=/\W*\w+\W*/g;function Jn(Te){const{className:we,text:Ue,wordRegexp:Ge=_n}=Te,ct=(0,m.of)(Mn);if(!Ue)return null;const vt=[];Ge.exec("");let At=Ge.exec(Ue)||[Ue];for(;At;)vt.push(n.createElement("span",{key:`${Ue}-${vt.length}`,className:we||ct.BreakableText},At[0])),At=Ge.exec(Ue);return n.createElement(n.Fragment,null,vt)}Jn.defaultProps={wordRegexp:_n};const pa=Te=>({TraceName:(0,t.css)`
      label: TraceName;
      font-size: ${Te.typography.size.lg};
    `});function Da(Te){const{className:we,traceName:Ue}=Te,Ge=(0,m.of)(pa),ct=String(Ue||un),vt=n.createElement(Jn,{text:ct});return n.createElement("span",{className:v()(Ge.TraceName,we)},vt)}var Ha=e(40784);const es=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:vn,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Ba(){return es}function Fa(Te){return(0,ue.get)(Ba(),Te)}const Is=/#\{([^{}]*)\}/g;function Hs(Te){const we=new Set;return Te.replace(Is,(Ue,Ge)=>(we.add(Ge),Ue)),Array.from(we)}function Bs(Te,we,Ue){return Te.replace(Is,(Ge,ct)=>{const vt=Ue[ct];return vt==null?"":we(vt)})}function ar(Te,we){if(typeof Te!="string")throw new Error("Invalid template");return{parameters:Hs(Te),template:Bs.bind(null,Te,we)}}function eo(Te){if(typeof Te=="string")return we=>we===Te;if(Array.isArray(Te))return we=>Te.indexOf(we)>-1;if(Te==null)return()=>!0;throw new Error(`Invalid value: ${Te}`)}const Rs=Te=>Te;function Do(Te){try{const we=ar(Te.url,encodeURIComponent),Ue=ar(Te.text,Rs);return{object:Te,type:eo(Te.type),key:eo(Te.key),value:eo(Te.value),url:we,text:Ue,parameters:(0,ue.uniq)(we.parameters.concat(Ue.parameters))}}catch(we){return console.error(`Ignoring invalid link pattern: ${we}`,Te),null}}function Nr(Te,we){return Te.template(we)}function ja(Te,we){const Ue=[],Ge=Object.keys(we).filter(ct=>typeof we[ct]=="string"||we[ct]==="number");return Te?.filter(ct=>ct?.type("traces")).forEach(ct=>{const vt={};ct?.parameters.every(jt=>{const qt=jt;return Ge.includes(qt)?(vt[jt]=we[qt],!0):!1})&&Ue.push({url:Nr(ct.url,vt),text:Nr(ct.text,vt)})}),Ue}const bs=(Fa("linkPatterns")||[]).map(Do).filter(Te=>!!Te),wr=(0,Ha.A)(10)(Te=>{const we=[];return Te?ja(bs,Te):we});function ts(Te){let we;const Ue=new Set(Te.map(({spanID:Ge})=>Ge));for(let Ge=0;Ge<Te.length;Ge++){if(Te[Ge].references&&Te[Ge].references.some(({traceID:jt,spanID:qt})=>jt===Te[Ge].traceID&&Ue.has(qt)))continue;if(!we){we=Te[Ge];continue}const vt=Te[Ge].references&&Te[Ge].references.length||0,At=we.references&&we.references.length||0;(vt<At||vt===At&&Te[Ge].startTime<we.startTime)&&(we=Te[Ge])}return we?`${we.process.serviceName}: ${we.operationName}`:""}const to=(0,ue.memoize)(ts,Te=>Te.length?Te[0].traceID:0);function mo(Te){for(let we=0;we<Te.length;we++){const Ue=Te[we].tags.filter(vt=>vt.key==="http.method"),Ge=Te[we].tags.filter(vt=>vt.key==="http.status_code"),ct=Te[we].tags.filter(vt=>vt.key==="http.url"||vt.key==="http.target"||vt.key==="http.path");if(Ue.length>0||Ge.length>0||ct.length>0)return{method:Ue,status:Ge,url:ct}}return{}}const _o=(0,ue.memoize)(mo,Te=>Te.length?Te[0].traceID:0);var Hi=e(2913),ns=e(18358);const ji=Te=>({ActionButton:(0,t.css)`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      &:after {
        content: '';
        background: ${Te.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function Si(Te){const{onClick:we,ariaLabel:Ue,label:Ge,icon:ct}=Te,vt=(0,m.of)(ji);return n.createElement(Fe.$n,{className:vt.ActionButton,size:"sm",variant:"secondary",fill:"outline",type:"button",icon:ct,"aria-label":Ue,onClick:we},Ge)}const Gi=Te=>({TracePageActions:(0,t.css)({label:"TracePageActions",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",marginBottom:"10px"}),feedback:(0,t.css)({margin:"6px 6px 6px 0",color:Te.colors.text.secondary,fontSize:Te.typography.bodySmall.fontSize,"&:hover":{color:Te.colors.text.link}})});function ii(Te){const{traceId:we,data:Ue,app:Ge}=Te,ct=(0,m.$j)(),vt=Gi(ct),[At,jt]=(0,n.useState)(!1),qt=()=>{navigator.clipboard.writeText(we),jt(!0),setTimeout(()=>{jt(!1)},5e3)},an=()=>{const xn=(0,ns.ek)(Ue,"Trace-"+we.substring(we.length-6));(0,r.rR)("grafana_traces_download_traces_clicked",{app:Ge,grafana_version:Hi.config.buildInfo.version,trace_format:xn,location:"trace-view"})};return n.createElement("div",{className:vt.TracePageActions},n.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:vt.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},n.createElement(Le.I,{name:"comment-alt-message"})," Give feedback"),n.createElement(Si,{onClick:qt,ariaLabel:"Copy Trace ID",label:At?"Copied!":"Trace ID",icon:"copy"}),n.createElement(Si,{onClick:an,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var Xs=e(50877),li=e(3721),Mi=e(40996),Ks=e(14186),xi=e(10354);const Qi=/^(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])$/,kr=(Te,we)=>!(Te.match(we)||!Te),no=Te=>{const we=Te.validationRegex||Qi,[Ue,Ge]=(0,n.useState)(()=>Te.value?kr(Te.value,we):!1);(0,Mi.A)(()=>{Ge(kr(Te.value,we))},500,[Te.value]);const ct={labelWidth:26,disabled:Te.disabled??!1,invalid:Ue,error:Te.isInvalidError};return Te.label&&(ct.label=Te.label,ct.tooltip=Te.tooltip||""),n.createElement(Ks.I,{...ct},n.createElement(xi.p,{type:"text",placeholder:Te.placeholder||"0",width:Te.width||40,onChange:vt=>{Te.onChange(vt.currentTarget.value)},value:Te.value,"aria-label":Te.ariaLabel||"interval input"}))};var Zs=e(82762),bo=e(39268),Po=e(66864),ao=e(88323),ci=e(15583);class di extends n.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}static{this.defaultProps={value:void 0}}render(){const{value:we}=this.props,Ue=n.createElement(n.Fragment,null,we&&we.length&&n.createElement(z.K,{name:"times",onClick:this.clearUiFind,tooltip:"Clear input"}));return n.createElement("div",{style:{width:"200px"}},n.createElement(xi.p,{placeholder:"Find...",onChange:Ge=>this.props.onChange(Ge.currentTarget.value),suffix:Ue,value:we}))}}const Oi=(0,n.memo)(function(we){const{trace:Ue,spanFilterMatches:Ge,setFocusedSpanIdForSearch:ct,focusedSpanIndexForSearch:vt,setFocusedSpanIndexForSearch:At,datasourceType:jt,showSpanFilters:qt}=we,an=Yi((0,m.$j)(),qt);(0,n.useEffect)(()=>{if(Ge&&vt!==-1){const ha=Array.from(Ge);ct(ha[vt])}},[vt,ct,Ge]);const xn=(ha,Ia)=>{if(ha.preventDefault(),ha.stopPropagation(),Ia){if((0,r.rR)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:jt,grafana_version:s.$.buildInfo.version,direction:"next"}),vt===-1||Ge&&vt===Ge.size-1){At(0);return}At(vt+1)}},Un=(ha,Ia)=>{if(ha.preventDefault(),ha.stopPropagation(),Ia){if((0,r.rR)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:jt,grafana_version:s.$.buildInfo.version,direction:"prev"}),Ge&&(vt===-1||vt===0)){At(Ge.size-1);return}At(vt-1)}},Cn=(ha,Ia)=>{ha.key==="Enter"&&xn(ha,Ia)},Ln=(ha,Ia)=>{ha.key==="Enter"&&Un(ha,Ia)},la=(Ge&&Ge?.size>0)??!1,Xn=la?an.button:(0,t.cx)(an.button,an.buttonDisabled),Gn=(0,n.useCallback)(ha=>n.createElement(je.m,{content:ha,placement:"top"},n.createElement("span",{className:an.tooltip},n.createElement(Le.I,{name:"info-circle",size:"md"}))),[an.tooltip]),Yn=(0,n.useCallback)((ha,Ia)=>{let Xa=n.createElement(n.Fragment,null,n.createElement("span",null,`${Ue.spans.length} spans`),Gn(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",Ia),n.createElement("div",null,"Depth: ",ha))));if(Ge)if(Ge.size===0)Xa=n.createElement(n.Fragment,null,n.createElement("span",null,"0 matches"),Gn("There are 0 span matches for the filters selected. Please try removing some of the selected filters."));else{const Cs=Ge.size===1?"match":"matches",hs=vt!==-1?`${vt+1}/${Ge.size} ${Cs}`:`${Ge.size} ${Cs}`,As=[];Ge.forEach(is=>{Ue.processes[is]&&As.push(Ue.processes[is].serviceName)}),Xa=n.createElement(n.Fragment,null,n.createElement("span",null,hs),Gn(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",new Set(As).size,"/",Ia),n.createElement("div",null,"Depth: ",ha))))}return Xa},[vt,Gn,Ge,Ue.processes,Ue.spans]),Ma=new Set((0,ue.values)(Ue.processes).map(ha=>ha.serviceName)).size,Ua=(0,ue.get)((0,ue.maxBy)(Ue.spans,"depth"),"depth",0)+1;return n.createElement(n.Fragment,null,n.createElement("span",{className:an.matches},Yn(Ua,Ma)),n.createElement("div",{className:la?an.buttons:(0,t.cx)(an.buttons,an.buttonsDisabled)},n.createElement("div",{"aria-label":"Prev result button",className:Xn,onClick:ha=>Un(ha,la),onKeyDown:ha=>Ln(ha,la),role:"button",tabIndex:la?0:-1},"Prev"),n.createElement("div",{"aria-label":"Next result button",className:Xn,onClick:ha=>xn(ha,la),onKeyDown:ha=>Cn(ha,la),role:"button",tabIndex:la?0:-1},"Next")))}),Yi=(Te,we)=>{const Ue=(0,Fe.hs)({theme:Te,variant:"secondary",size:we?"md":"sm",iconOnly:!1,fill:"outline"});return{buttons:(0,t.css)`
      display: inline-flex;
      gap: 4px;
    `,buttonsDisabled:(0,t.css)`
      cursor: not-allowed;
    `,button:(0,t.css)`
      ${Ue.button};
    `,buttonDisabled:(0,t.css)`
      ${Ue.disabled};
      pointer-events: none;
    `,matches:(0,t.css)`
      margin-right: ${Te.spacing(2)};
      text-wrap: nowrap;
    `,tooltip:(0,t.css)`
      color: #aaa;
      margin: 0 0 0 5px;
    `}};var Ii=e(15292);function Ai(Te,we){if(!we)return;let Ue=!1;Te.serviceName&&(we=gr(we,Te),Ue=!0),Te.spanName&&(we=mi(we,Te),Ue=!0),(Te.from||Te.to)&&(we=fi(we,Te),Ue=!0);const Ge=ui(we,Te.tags);if(Ge&&(we=Ge,Ue=!0),Te.query){const ct=Ji(Te.query,we);ct&&(we=ct,Ue=!0)}return Ue?new Set(we.map(ct=>ct.spanID)):void 0}function Ji(Te,we){if(!we)return;const Ue=[];Te.split(/\s+/).filter(Boolean).forEach(At=>{Ue.push(At.toLowerCase())});const Ge=(At,jt)=>At.some(qt=>jt.toLowerCase().includes(qt)),ct=At=>At?At.some(jt=>Ge(Ue,jt.key)||Ge(Ue,jt.value.toString())):!1,vt=At=>Ge(Ue,At.operationName)||Ge(Ue,At.process.serviceName)||ct(At.tags)||At.kind&&Ge(Ue,At.kind)||At.statusCode!==void 0&&Ge(Ue,et.s[At.statusCode])||At.statusMessage&&Ge(Ue,At.statusMessage)||At.instrumentationLibraryName&&Ge(Ue,At.instrumentationLibraryName)||At.instrumentationLibraryVersion&&Ge(Ue,At.instrumentationLibraryVersion)||At.traceState&&Ge(Ue,At.traceState)||At.logs!==null&&At.logs.some(jt=>ct(jt.fields))||ct(At.process.tags)||Ue.some(jt=>jt===At.spanID);return we.filter(vt)}const ui=(Te,we)=>{if(we=we.filter(Ue=>Ue.key&&Ue.key!==""||Ue.value),we.length>0)return Te.filter(Ue=>we.every(Ge=>{if(Ge.key&&Ge.value){if(Ue.tags.some(ct=>fo(Ge,ct))||Ue.process.tags.some(ct=>fo(Ge,ct))||Ue.logs&&Ue.logs.some(ct=>ct.fields.some(vt=>fo(Ge,vt)))||Ue.kind&&Ge.key===ot&&Ge.value===Ue.kind||Ue.statusCode!==void 0&&Ge.key===Tt&&Ge.value===et.s[Ue.statusCode].toLowerCase()||Ue.statusMessage&&Ge.key===Pn&&Ge.value===Ue.statusMessage||Ue.instrumentationLibraryName&&Ge.key===ft&&Ge.value===Ue.instrumentationLibraryName||Ue.instrumentationLibraryVersion&&Ge.key===Mt&&Ge.value===Ue.instrumentationLibraryVersion||Ue.traceState&&Ge.key===_t&&Ge.value===Ue.traceState||Ge.key===nn&&Ge.value===Ue.spanID)return fr(Ge.operator,!0)}else if(Ge.key&&(Ue.tags.some(ct=>sr(Ge.key,ct.key))||Ue.process.tags.some(ct=>sr(Ge.key,ct.key))||Ue.logs&&Ue.logs.some(ct=>ct.fields.some(vt=>sr(Ge.key,vt.key)))||Ue.kind&&Ge.key===ot||Ue.statusCode!==void 0&&Ge.key===Tt||Ue.statusMessage&&Ge.key===Pn||Ue.instrumentationLibraryName&&Ge.key===ft||Ue.instrumentationLibraryVersion&&Ge.key===Mt||Ue.traceState&&Ge.key===_t||Ge.key===nn))return fr(Ge.operator,!0);return fr(Ge.operator,!1)}))},sr=(Te,we)=>Te===we.toString(),fo=(Te,we)=>Te.key===we.key.toString()&&Te.value===we.value.toString(),fr=(Te,we)=>Te==="="?we:!we,gr=(Te,we)=>Te.filter(Ue=>we.serviceNameOperator==="="?Ue.process.serviceName===we.serviceName:Ue.process.serviceName!==we.serviceName),mi=(Te,we)=>Te.filter(Ue=>we.spanNameOperator==="="?Ue.operationName===we.spanName:Ue.operationName!==we.spanName),fi=(Te,we)=>{const Ue=zo(we?.from||""),Ge=zo(we?.to||"");let ct=[];if(Ue&&(ct=Te.filter(vt=>we.fromOperator===">"?vt.duration>Ue:vt.duration>=Ue)),Ge){const vt=At=>we.toOperator==="<"?At.duration<Ge:At.duration<=Ge;ct=ct.length>0?ct.filter(At=>vt(At)):Te.filter(At=>vt(At))}return ct},zo=Te=>{if(Te.includes("ns"))return parseFloat(Te.split("ns")[0])/1e3;if(Te.includes("us"))return parseFloat(Te.split("us")[0]);if(Te.includes("\xB5s"))return parseFloat(Te.split("\xB5s")[0]);if(Te.includes("ms"))return parseFloat(Te.split("ms")[0])*1e3;if(Te.includes("s"))return parseFloat(Te.split("s")[0])*1e3*1e3;if(Te.includes("m"))return parseFloat(Te.split("m")[0])*1e3*1e3*60;if(Te.includes("h"))return parseFloat(Te.split("h")[0])*1e3*1e3*60*60},gi=(0,n.memo)(function(we){const{trace:Ue,search:Ge,spanFilterMatches:ct,showSpanFilterMatchesOnly:vt,setShowSpanFilterMatchesOnly:At,showCriticalPathSpansOnly:jt,setShowCriticalPathSpansOnly:qt,focusedSpanIndexForSearch:an,setFocusedSpanIndexForSearch:xn,setFocusedSpanIdForSearch:Un,datasourceType:Cn,clear:Ln,showSpanFilters:la}=we,Xn=(0,m.of)(pi),Gn=(0,n.useMemo)(()=>Ge.serviceName&&Ge.serviceName!==""||Ge.spanName&&Ge.spanName!==""||zo(Ge.from||"")||zo(Ge.to||"")||Ge.tags.length>1||Ge.tags.some(Yn=>Yn.key)||Ge.query&&Ge.query!==""||vt,[Ge.serviceName,Ge.spanName,Ge.from,Ge.to,Ge.tags,Ge.query,vt]);return n.createElement("div",{className:Xn.container},n.createElement("div",{className:Xn.controls},n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(Fe.$n,{variant:"destructive",disabled:!Gn,type:"button",fill:"outline","aria-label":"Clear filters button",onClick:Ln},"Clear"),n.createElement("div",{className:Xn.matchesOnly},n.createElement(Ii.d,{value:vt,onChange:Yn=>At(Yn.currentTarget.checked??!1),label:"Show matches only switch",disabled:!ct?.size}),n.createElement(Fe.$n,{onClick:()=>At(!vt),className:Xn.clearMatchesButton,variant:"secondary",fill:"text",disabled:!ct?.size},"Show matches only")),n.createElement("div",{className:Xn.matchesOnly},n.createElement(Ii.d,{value:jt,onChange:Yn=>qt(Yn.currentTarget.checked??!1),label:"Show critical path only switch"}),n.createElement(Fe.$n,{onClick:()=>qt(!jt),className:Xn.clearMatchesButton,variant:"secondary",fill:"text"},"Show critical path only"))),n.createElement("div",{className:Xn.nextPrevResult},n.createElement(Oi,{trace:Ue,spanFilterMatches:ct,setFocusedSpanIdForSearch:Un,focusedSpanIndexForSearch:an,setFocusedSpanIndexForSearch:xn,datasourceType:Cn,showSpanFilters:la})))))}),pi=Te=>{const we=(0,Fe.hs)({theme:Te,variant:"secondary",size:"md",iconOnly:!1,fill:"outline"});return{button:(0,t.css)(we.button),buttonDisabled:(0,t.css)(we.disabled,{pointerEvents:"none",cursor:"not-allowed"}),container:(0,t.css)`
      display: inline;
    `,controls:(0,t.css)`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,matchesOnly:(0,t.css)`
      display: inline-flex;
      margin: 0 0 0 25px;
      vertical-align: middle;
      align-items: center;
    `,clearMatchesButton:(0,t.css)`
      color: ${Te.colors.text.primary};

      &:hover {
        background: inherit;
      }
    `,nextPrevResult:(0,t.css)`
      margin-left: auto;
      display: flex;
      align-items: center;
    `}},Hr=(0,n.memo)(Te=>{const{trace:we,search:Ue,setSearch:Ge,showSpanFilters:ct,setShowSpanFilters:vt,showSpanFilterMatchesOnly:At,setShowSpanFilterMatchesOnly:jt,showCriticalPathSpansOnly:qt,setShowCriticalPathSpansOnly:an,setFocusedSpanIdForSearch:xn,spanFilterMatches:Un,datasourceType:Cn}=Te,Ln={...(0,m.of)(Xi)},[la,Xn]=(0,n.useState)(),[Gn,Yn]=(0,n.useState)(),[Ma,Ua]=(0,n.useState)(),[ha,Ia]=(0,n.useState)({}),[Xa,Cs]=(0,n.useState)(-1),hs=/^\d+(?:\.\d)?\d*(?:ns|us|s|ms|s|m|h)$/,As=(0,n.useCallback)(()=>{Xn(void 0),Yn(void 0),Ua(void 0),Ia({}),Ge(ci.Ji),jt(!1)},[Ge,jt]);if((0,n.useEffect)(()=>{As()},[As,we]),!we)return null;const is=ia=>{Cs(-1),xn(""),Ge(ia)},Qs=()=>{if(!la){const ia=we.spans.map(ba=>ba.process.serviceName);Xn((0,ue.uniq)(ia).sort().map(Xs.z))}},pr=()=>{if(!Gn){const ia=we.spans.map(ba=>ba.operationName);Yn((0,ue.uniq)(ia).sort().map(Xs.z))}},Ss=()=>{if(!Ma){let ia=[],ba=[];we.spans.forEach(Va=>{Va.tags.forEach(os=>{ia.push(os.key)}),Va.process.tags.forEach(os=>{ia.push(os.key)}),Va.logs!==null&&Va.logs.forEach(os=>{os.fields.forEach(ys=>{ba.push(ys.key)})}),Va.kind&&ia.push(ot),Va.statusCode!==void 0&&ia.push(Tt),Va.statusMessage&&ia.push(Pn),Va.instrumentationLibraryName&&ia.push(ft),Va.instrumentationLibraryVersion&&ia.push(Mt),Va.traceState&&ia.push(_t),ia.push(nn)}),ia=(0,ue.uniq)(ia).sort(),ba=(0,ue.uniq)(ba).sort(),Ua([...ia,...ba].map(Xs.z))}},Ys=async ia=>{const ba=[];return we.spans.forEach(Va=>{const os=Va.tags.find($s=>$s.key===ia)?.value;os&&ba.push(os.toString());const ys=Va.process.tags.find($s=>$s.key===ia)?.value;switch(ys&&ba.push(ys.toString()),Va.logs!==null&&Va.logs.forEach($s=>{const Fs=$s.fields.find(fs=>fs.key===ia)?.value;Fs&&ba.push(Fs.toString())}),ia){case ot:Va.kind&&ba.push(Va.kind);break;case Tt:Va.statusCode!==void 0&&ba.push(et.s[Va.statusCode].toLowerCase());break;case Pn:Va.statusMessage&&ba.push(Va.statusMessage);break;case ft:Va.instrumentationLibraryName&&ba.push(Va.instrumentationLibraryName);break;case Mt:Va.instrumentationLibraryVersion&&ba.push(Va.instrumentationLibraryVersion);break;case _t:Va.traceState&&ba.push(Va.traceState);break;case nn:ba.push(Va.spanID);break;default:break}}),(0,ue.uniq)(ba).sort().map(Xs.z)},po=(ia,ba)=>{Ge({...Ue,tags:Ue.tags?.map(os=>os.id===ia.id?{...os,key:ba?.value||"",value:void 0}:os)}),(async()=>{if(ba?.value)Ia({...ha,[ia.id]:await Ys(ba.value)});else{const os={...ha};os[ia.id]&&delete os[ia.id],Ia(os)}})()},qs=()=>{const ia={id:(0,ci.zE)(),operator:"="};Ge({...Ue,tags:[...Ue.tags,ia]})},jr=ia=>{let ba=Ue.tags.filter(Va=>Va.id!==ia);ba.length===0&&(ba=[{id:(0,ci.zE)(),operator:"="}]),Ge({...Ue,tags:ba})},zs=n.createElement(n.Fragment,null,n.createElement(je.m,{content:"Filter your spans below. You can continue to apply filters until you have narrowed down your resulting spans to the select few you are most interested in.",placement:"right"},n.createElement("span",{className:Ln.collapseLabel},"Span Filters",n.createElement(Le.I,{size:"md",name:"info-circle"}))),!ct&&n.createElement("div",{className:Ln.nextPrevResult},n.createElement(Oi,{trace:we,spanFilterMatches:Un,setFocusedSpanIdForSearch:xn,focusedSpanIndexForSearch:Xa,setFocusedSpanIndexForSearch:Cs,datasourceType:Cn,showSpanFilters:ct})));return n.createElement("div",{className:Ln.container},n.createElement(Zs.S,{label:zs,collapsible:!0,isOpen:ct,onToggle:vt},n.createElement(bo.C,{className:Ln.flexContainer},n.createElement(Ks.I,{label:"Service Name",labelWidth:16},n.createElement(Po.Gy,{spacing:"xs"},n.createElement(ao.l6,{"aria-label":"Select service name operator",onChange:ia=>is({...Ue,serviceNameOperator:ia.value}),options:[(0,Xs.z)("="),(0,Xs.z)("!=")],value:Ue.serviceNameOperator}),n.createElement(ao.l6,{"aria-label":"Select service name",isClearable:!0,onChange:ia=>is({...Ue,serviceName:ia?.value||""}),onOpenMenu:Qs,options:la,placeholder:"All service names",value:Ue.serviceName||null}))),n.createElement(di,{onChange:ia=>{is({...Ue,query:ia}),ia===""&&jt(!1)},value:Ue.query||""})),n.createElement(bo.C,null,n.createElement(Ks.I,{label:"Span Name",labelWidth:16},n.createElement(Po.Gy,{spacing:"xs"},n.createElement(ao.l6,{"aria-label":"Select span name operator",onChange:ia=>is({...Ue,spanNameOperator:ia.value}),options:[(0,Xs.z)("="),(0,Xs.z)("!=")],value:Ue.spanNameOperator}),n.createElement(ao.l6,{"aria-label":"Select span name",isClearable:!0,onChange:ia=>is({...Ue,spanName:ia?.value||""}),onOpenMenu:pr,options:Gn,placeholder:"All span names",value:Ue.spanName||null})))),n.createElement(bo.C,null,n.createElement(Ks.I,{label:"Duration",labelWidth:16,tooltip:"Filter by duration. Accepted units are ns, us, ms, s, m, h"},n.createElement(Po.Gy,{spacing:"xs",align:"flex-start"},n.createElement(ao.l6,{"aria-label":"Select min span operator",onChange:ia=>is({...Ue,fromOperator:ia.value}),options:[(0,Xs.z)(">"),(0,Xs.z)(">=")],value:Ue.fromOperator}),n.createElement("div",{className:Ln.intervalInput},n.createElement(no,{ariaLabel:"Select min span duration",onChange:ia=>is({...Ue,from:ia}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Ue.from||"",validationRegex:hs})),n.createElement(ao.l6,{"aria-label":"Select max span operator",onChange:ia=>is({...Ue,toOperator:ia.value}),options:[(0,Xs.z)("<"),(0,Xs.z)("<=")],value:Ue.toOperator}),n.createElement(no,{ariaLabel:"Select max span duration",onChange:ia=>is({...Ue,to:ia}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Ue.to||"",validationRegex:hs})))),n.createElement(bo.C,{className:Ln.tagsRow},n.createElement(Ks.I,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},n.createElement("div",null,Ue.tags.map((ia,ba)=>n.createElement("div",{key:ba},n.createElement(Po.Gy,{spacing:"xs",width:"auto"},n.createElement(ao.l6,{"aria-label":"Select tag key",isClearable:!0,key:ia.key,onChange:Va=>po(ia,Va),onOpenMenu:Ss,options:Ma,placeholder:"Select tag",value:ia.key||null}),n.createElement(ao.l6,{"aria-label":"Select tag operator",onChange:Va=>{is({...Ue,tags:Ue.tags?.map(os=>os.id===ia.id?{...os,operator:Va.value}:os)})},options:[(0,Xs.z)("="),(0,Xs.z)("!=")],value:ia.operator}),n.createElement("span",{className:Ln.tagValues},n.createElement(ao.l6,{"aria-label":"Select tag value",isClearable:!0,key:ia.value,onChange:Va=>{is({...Ue,tags:Ue.tags?.map(os=>os.id===ia.id?{...os,value:Va?.value||""}:os)})},options:ha[ia.id]?ha[ia.id]:[],placeholder:"Select value",value:ia.value})),(ia.key||ia.value||Ue.tags.length>1)&&n.createElement(li.Z,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>jr(ia.id),tooltip:"Remove tag"}),(ia.key||ia.value)&&ba===Ue.tags.length-1&&n.createElement("span",{className:Ln.addTag},n.createElement(li.Z,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:qs,tooltip:"Add tag"})))))))),n.createElement(gi,{trace:we,search:Ue,spanFilterMatches:Un,showSpanFilterMatchesOnly:At,setShowSpanFilterMatchesOnly:jt,showCriticalPathSpansOnly:qt,setShowCriticalPathSpansOnly:an,setFocusedSpanIdForSearch:xn,focusedSpanIndexForSearch:Xa,setFocusedSpanIndexForSearch:Cs,datasourceType:Cn,clear:As,showSpanFilters:ct})))});Hr.displayName="SpanFilters";const Xi=Te=>({container:(0,t.css)`
      label: SpanFilters;
      margin: 0.5em 0 -${Te.spacing(1)} 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:(0,t.css)`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,flexContainer:(0,t.css)({display:"flex",justifyContent:"space-between"}),addTag:(0,t.css)({marginLeft:Te.spacing(1)}),intervalInput:(0,t.css)`
      margin: 0 -4px 0 0;
    `,tagsRow:(0,t.css)`
      margin: -4px 0 0 0;
    `,tagValues:(0,t.css)`
      max-width: 200px;
    `,nextPrevResult:(0,t.css)`
      flex: 1;
      align-items: center;
      display: flex;
      justify-content: flex-end;
      margin-right: ${Te.spacing(1)};
    `}),Ri=(0,n.memo)(Te=>{const{trace:we,data:Ue,app:Ge,timeZone:ct,search:vt,setSearch:At,showSpanFilters:jt,setShowSpanFilters:qt,showSpanFilterMatchesOnly:an,setShowSpanFilterMatchesOnly:xn,showCriticalPathSpansOnly:Un,setShowCriticalPathSpansOnly:Cn,setFocusedSpanIdForSearch:Ln,spanFilterMatches:la,datasourceType:Xn,setHeaderHeight:Gn}=Te,Yn=(0,m.of)(Zi);(0,n.useEffect)(()=>{Gn(document.querySelector("."+Yn.header)?.scrollHeight??0)},[Gn,jt,Yn.header]);const Ma=(0,n.useMemo)(()=>we?wr(we):[],[we]);if(!we)return null;const Ua=(As,is)=>{const Qs=(0,nt.LE)(As.startTime/1e3,{timeZone:is,defaultWithMS:!0}),pr=Qs.match(/^(.+)(:\d\d\.\d+)$/);return pr?n.createElement("span",{className:Yn.TracePageHeaderOverviewItemValue},pr[1],n.createElement("span",{className:Yn.TracePageHeaderOverviewItemValueDetail},pr[2])):Qs},ha=n.createElement("h1",{className:v()(Yn.title)},n.createElement(Da,{traceName:to(we.spans)}),n.createElement("small",{className:Yn.duration},(0,g.a3)(we.duration))),{method:Ia,status:Xa,url:Cs}=_o(we.spans);let hs="green";return Xa&&Xa.length>0&&(Xa[0].value.toString().charAt(0)==="4"?hs="orange":Xa[0].value.toString().charAt(0)==="5"&&(hs="red")),n.createElement("header",{className:Yn.header},n.createElement("div",{className:Yn.titleRow},Ma&&Ma.length>0&&n.createElement(wt,{links:Ma,className:Yn.TracePageHeaderBack}),ha,n.createElement(ii,{traceId:we.traceID,data:Ue,app:Ge})),n.createElement("div",{className:Yn.subtitle},n.createElement("span",{className:Yn.timestamp},Ua(we,ct)),n.createElement("span",{className:Yn.tagMeta},Ia&&Ia.length>0&&n.createElement(je.m,{content:"http.method",interactive:!0},n.createElement("span",{className:Yn.tag},n.createElement(Pr.E,{text:Ia[0].value,color:"blue"}))),Xa&&Xa.length>0&&n.createElement(je.m,{content:"http.status_code",interactive:!0},n.createElement("span",{className:Yn.tag},n.createElement(Pr.E,{text:Xa[0].value,color:hs}))),Cs&&Cs.length>0&&n.createElement(je.m,{content:"http.url or http.target or http.path",interactive:!0},n.createElement("span",{className:Yn.url},Cs[0].value)))),n.createElement(Hr,{trace:we,showSpanFilters:jt,setShowSpanFilters:qt,showSpanFilterMatchesOnly:an,setShowSpanFilterMatchesOnly:xn,showCriticalPathSpansOnly:Un,setShowCriticalPathSpansOnly:Cn,search:vt,setSearch:At,spanFilterMatches:la,setFocusedSpanIdForSearch:Ln,datasourceType:Xn}))});Ri.displayName="TracePageHeader";const Zi=Te=>({TracePageHeaderBack:(0,t.css)`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderOverviewItemValueDetail:v()((0,t.css)`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:(0,t.css)`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,header:(0,t.css)({label:"TracePageHeader",backgroundColor:Te.colors.background.primary,padding:"0.5em 0 0 0",position:"sticky",top:0,zIndex:5,textAlign:"left"}),titleRow:(0,t.css)({alignItems:"flex-start",display:"flex",padding:"0 8px",flexWrap:"wrap"}),title:(0,t.css)({color:"inherit",flex:1,fontSize:"1.7em",lineHeight:"1em",marginBottom:0,minWidth:"200px"}),subtitle:(0,t.css)({flex:1,lineHeight:"1em",margin:"-0.5em 0.5em 0.75em 0.5em"}),tag:(0,t.css)`
      margin: 0 0.5em 0 0;
    `,duration:(0,t.css)`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:(0,t.css)`
      vertical-align: middle;
    `,tagMeta:(0,t.css)`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:(0,t.css)`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      word-break: break-all;
      line-height: 20px;
    `,TracePageHeaderTraceId:(0,t.css)`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `}),hi="None",go="Duration",Li="Tag";function vi({options:Te,onOptionsChange:we}){const Ue=useStyles2(Xo),Ge=[hi,go,Li].map(toOption);return React.createElement("div",{className:css({width:"100%"})},React.createElement(InlineFieldRow,{className:Ue.row},React.createElement(InlineField,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},React.createElement(Select,{inputId:"label",options:Ge,value:Te.jsonData.spanBar?.type||"",onChange:ct=>{updateDatasourcePluginJsonDataOption({onOptionsChange:we,options:Te},"spanBar",{...Te.jsonData.spanBar,type:ct?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),Te.jsonData.spanBar?.type===Li&&React.createElement(InlineFieldRow,{className:Ue.row},React.createElement(InlineField,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},React.createElement(Input,{type:"text",placeholder:"Enter tag key",onChange:ct=>updateDatasourcePluginJsonDataOption({onOptionsChange:we,options:Te},"spanBar",{...Te.jsonData.spanBar,tag:ct.currentTarget.value}),value:Te.jsonData.spanBar?.tag||"",width:40}))))}const hl=({options:Te,onOptionsChange:we})=>{let Ue=Te.type;return Ue+=Te.type==="tempo"?"/configure-tempo-data-source/#span-bar":"/#span-bar",React.createElement(ConfigSubSection,{title:"Span bar",description:React.createElement(ConfigDescriptionLink,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:Ue,feature:"the span bar"})},React.createElement(vi,{options:Te,onOptionsChange:we}))},Xo=Te=>({infoText:css`
    label: infoText;
    padding-bottom: ${Te.spacing(2)};
    color: ${Te.colors.text.secondary};
  `,row:css`
    label: row;
    align-items: baseline;
  `});class Cr{constructor(we){const{isTagsOpen:Ue,isProcessOpen:Ge,isReferencesOpen:ct,isWarningsOpen:vt,isStackTracesOpen:At,logs:jt,references:qt}=we||{};this.isTagsOpen=!!Ue,this.isProcessOpen=!!Ge,this.isReferencesOpen=!!ct,this.isWarningsOpen=!!vt,this.isStackTracesOpen=!!At,this.logs={isOpen:!!(jt&&jt.isOpen),openedItems:jt&&jt.openedItems?new Set(jt.openedItems):new Set},this.references={isOpen:!!(qt&&qt.isOpen),openedItems:qt&&qt.openedItems?new Set(qt.openedItems):new Set}}toggleTags(){const we=new Cr(this);return we.isTagsOpen=!this.isTagsOpen,we}toggleProcess(){const we=new Cr(this);return we.isProcessOpen=!this.isProcessOpen,we}toggleReferences(){const we=new Cr(this);return we.references.isOpen=!this.references.isOpen,we}toggleReferenceItem(we){const Ue=new Cr(this);return Ue.references.openedItems.has(we)?Ue.references.openedItems.delete(we):Ue.references.openedItems.add(we),Ue}toggleWarnings(){const we=new Cr(this);return we.isWarningsOpen=!this.isWarningsOpen,we}toggleStackTraces(){const we=new Cr(this);return we.isStackTracesOpen=!this.isStackTracesOpen,we}toggleLogs(){const we=new Cr(this);return we.logs.isOpen=!this.logs.isOpen,we}toggleLogItem(we){const Ue=new Cr(this);return Ue.logs.openedItems.has(we)?Ue.logs.openedItems.delete(we):Ue.logs.openedItems.add(we),Ue}}var so=e(1081);class _s{static iterFunction(we,Ue=0){return Ge=>we(Ge.value,Ge,Ue)}static searchFunction(we){return typeof we=="function"?we:(Ue,Ge)=>we instanceof _s?Ge===we:Ue===we}constructor(we,Ue=[]){this.value=we,this.children=Ue}get depth(){return this.children.reduce((we,Ue)=>Math.max(Ue.depth+1,we),1)}get size(){let we=0;return this.walk(()=>we++),we}addChild(we){return this.children.push(we instanceof _s?we:new _s(we)),this}find(we){if(_s.iterFunction(_s.searchFunction(we))(this))return this;for(let Ge=0;Ge<this.children.length;Ge++){const ct=this.children[Ge].find(we);if(ct)return ct}return null}getPath(we){const Ue=_s.iterFunction(_s.searchFunction(we)),Ge=(ct,vt)=>{const At=vt.concat([ct]);if(Ue(ct))return At;for(let jt=0;jt<ct.children.length;jt++){const qt=ct.children[jt],an=Ge(qt,At);if(an)return an}return null};return Ge(this,[])}walk(we,Ue=0){const Ge=[];let ct=Ue;for(Ge.push({node:this,depth:ct});Ge.length;){const vt=Ge[Ge.length-1];Ge.pop();const{node:At,depth:jt}=vt;we(At.value,At,jt),ct=jt+1;let qt=At.children.length-1;for(;qt>=0;)Ge.push({node:At.children[qt],depth:ct}),qt--}}paths(we){const Ue=[];Ue.push({node:this,childIndex:0});const Ge=[];for(;Ue.length;){const{node:ct,childIndex:vt}=Ue[Ue.length-1];if(ct.children.length>=vt+1)Ue[Ue.length-1].childIndex++,Ue.push({node:ct.children[vt],childIndex:0});else{if(ct.children.length===0){const At=Ue.map(jt=>jt.node.value);we(At)}Ue.pop()}}return Ge}}const Ei=Te=>Te.spanID,Fr=Te=>Te.references||[],Co=(0,so.Mz)((0,so.Mz)(({span:Te})=>Te,Fr),({type:Te})=>Te,(Te,we)=>Te.find(Ue=>Ue.refType===we)),qi=(0,so.Mz)(Te=>Co({span:Te,type:"CHILD_OF"}),Te=>Te?Te.spanID:null),Bi=Te=>Te.spans,el=(0,so.Mz)(Bi,Te=>Te.reduce((we,Ue)=>we.set(Ei(Ue),Ue),new Map)),tl="__root__";function it(Te,we=null){const Ue=new Map(Te.spans.map(At=>[At.spanID,new _s(At.spanID)])),Ge=we??new Map(Te.spans.map(At=>[At.spanID,At])),ct=new _s(tl);Te.spans.forEach(At=>{const jt=Ue.get(At.spanID);if(Array.isArray(At.references)&&At.references.length){const{refType:qt,spanID:an}=At.references[0];if(qt==="CHILD_OF"||qt==="FOLLOWS_FROM")(Ue.get(an)||ct).children?.push(jt);else throw new Error(`Unrecognized ref type: ${qt}`)}else ct.children.push(jt)});const vt=(At,jt)=>{const qt=At?.value?Ge.get(At.value.toString()):void 0,an=jt?.value?Ge.get(jt.value.toString()):void 0;return+(qt?.startTime>an?.startTime)||+(qt?.startTime===an?.startTime)-1};return Te.spans.forEach(At=>{const jt=Ue.get(At.spanID);jt.children.length>1&&jt?.children.sort(vt)}),ct.children.sort(vt),ct}function _e(Te){const we=new Map,Ue=Te.reduce((ct,vt)=>(ct.some(At=>At.key===vt.key&&At.value===vt.value)?we.set(`${vt.key}:${vt.value}`,`Duplicate tag "${vt.key}:${vt.value}"`):ct.push(vt),ct),[]),Ge=Array.from(we.values());return{dedupedTags:Ue,warnings:Ge}}function st(Te,we){const Ue=Te?.slice()??[],Ge=(we||[]).map(ct=>ct.toLowerCase());return Ue.sort((ct,vt)=>{const At=ct.key.toLowerCase(),jt=vt.key.toLowerCase();for(let qt=0;qt<Ge.length;qt++){const an=Ge[qt];if(At.startsWith(an)&&!jt.startsWith(an))return-1;if(!At.startsWith(an)&&jt.startsWith(an))return 1}return At>jt?1:At<jt?-1:0}),Ue}function ht(Te){if(!Te?.traceID)return null;const we=Te.traceID.toLowerCase();let Ue=0,Ge=Number.MAX_SAFE_INTEGER;const ct=new Map,vt=new Map;Te.spans=Te.spans.filter(Cn=>!!Cn.startTime),Te.processes=Object.entries(Te.processes).reduce((Cn,[Ln,la])=>(Cn[Ln]={...la,tags:st(la.tags)},Cn),{});const At=Te.spans.length;for(let Cn=0;Cn<At;Cn++){const Ln=Te.spans[Cn],{startTime:la,duration:Xn,processID:Gn}=Ln;let Yn=Ln.spanID;la<Ge&&(Ge=la),la+Xn>Ue&&(Ue=la+Xn);const Ma=ct.get(Yn);Ma!=null?(console.warn(`Dupe spanID, ${Ma+1} x ${Yn}`,Ln,vt.get(Yn)),(0,ue.isEqual)(Ln,vt.get(Yn))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),ct.set(Yn,Ma+1),Yn=`${Yn}_${Ma}`,Ln.spanID=Yn):ct.set(Yn,1),Ln.process=Te.processes[Gn],vt.set(Yn,Ln)}const jt=it(Te,vt),qt=[],an={};jt.walk((Cn,Ln,la=0)=>{if(Cn==="__root__"||typeof Cn!="string")return;const Xn=vt.get(Cn);if(!Xn)return;const{serviceName:Gn}=Xn.process;an[Gn]=(an[Gn]||0)+1,Xn.relativeStartTime=Xn.startTime-Ge,Xn.depth=la-1,Xn.hasChildren=Ln.children.length>0,Xn.childSpanCount=Ln.children.length,Xn.warnings=Xn.warnings||[],Xn.tags=Xn.tags||[],Xn.references=Xn.references||[],Xn.childSpanIds=Ln.children.slice().sort((Ma,Ua)=>{const ha=vt.get(Ma.value),Ia=vt.get(Ua.value);return Ia.startTime+Ia.duration-(ha.startTime+ha.duration)}).map(Ma=>Ma.value);const Yn=_e(Xn.tags);Xn.tags=st(Yn.dedupedTags,Fa("topTagPrefixes")),Xn.warnings=Xn.warnings.concat(Yn.warnings),Xn.references.forEach((Ma,Ua)=>{const ha=vt.get(Ma.spanID);ha&&(Ma.span=ha,Ua>0&&(ha.subsidiarilyReferencedBy=ha.subsidiarilyReferencedBy||[],ha.subsidiarilyReferencedBy.push({spanID:Cn,traceID:we,span:Xn,refType:Ma.refType})))}),qt.push(Xn)});const xn=to(qt);return{services:Object.keys(an).map(Cn=>({name:Cn,numberOfSpans:an[Cn]})),spans:qt,traceID:we,traceName:xn,processes:Te.processes,duration:Ue-Ge,startTime:Ge,endTime:Ue}}},92102:(Y,I,e)=>{"use strict";e.d(I,{N:()=>t});var t=(n=>(n.Logs="log",n.Traces="trace",n.Metrics="metric",n.Profiles="profile",n.Unknown="unknown",n))(t||{})},92151:(Y,I,e)=>{"use strict";e.d(I,{EUpdateTypes:()=>n,default:()=>o});var t=(m=>(m.DragEnd="DragEnd",m.DragMove="DragMove",m.DragStart="DragStart",m.MouseEnter="MouseEnter",m.MouseLeave="MouseLeave",m.MouseMove="MouseMove",m))(t||{});const n=t;var r=e(2543);const s=0;class o{constructor({getBounds:l,tag:i,resetBoundsOnResize:c=!0,...u}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=f=>{const{button:d,clientX:E,type:h}=f;if(this._isDragging||d!==s)return;let y=null,a;if(h==="mouseenter")y=n.MouseEnter,a=this._onMouseEnter;else if(h==="mouseleave")y=n.MouseLeave,a=this._onMouseLeave;else if(h==="mousemove")y=n.MouseMove,a=this._onMouseMove;else throw new Error(`invalid event type: ${h}`);if(!a)return;const{value:v,x:g}=this._getPosition(E);a({event:f,type:y,value:v,x:g,manager:this,tag:this.tag})},this._handleDragEvent=f=>{const{button:d,clientX:E,type:h}=f;let y=null,a;if(h==="mousedown"){if(this._isDragging||d!==s)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const b=(0,r.get)(document,"body.style");b&&(b.userSelect="none"),this._isDragging=!0,y=n.DragStart,a=this._onDragStart}else if(h==="mousemove"){if(!this._isDragging)return;y=n.DragMove,a=this._onDragMove}else if(h==="mouseup"){if(!this._isDragging)return;this._stopDragging(),y=n.DragEnd,a=this._onDragEnd}else throw new Error(`invalid event type: ${h}`);if(!a)return;const{value:v,x:g}=this._getPosition(E);a({event:f,type:y,value:v,x:g,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=l,this.tag=i,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=!!c,this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=u.onMouseEnter,this._onMouseLeave=u.onMouseLeave,this._onMouseMove=u.onMouseMove,this._onDragStart=u.onDragStart,this._onDragMove=u.onDragMove,this._onDragEnd=u.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(l){const{clientXLeft:i,maxValue:c,minValue:u,width:f}=this._getBounds();let d=l-i,E=d/f;return u!=null&&E<u?(E=u,d=u*f):c!=null&&E>c&&(E=c,d=c*f),{value:E,x:d}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const l=(0,r.get)(document,"body.style");l&&(l.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},30700:(Y,I,e)=>{"use strict";e.d(I,{Kv:()=>i,rY:()=>c});var t=e(41811),n=e(84140),r=e(24284);function s(f){if(f.length!==7)return[0,0,0];const d=f.slice(1,3),E=f.slice(3,5),h=f.slice(5);return[parseInt(d,16),parseInt(E,16),parseInt(h,16)]}class o{constructor(d,E){const h=u(d,E);this.colorsHex=h,this.colorsRgb=h.map(s),this.cache=new Map,this.prevColorIndex=void 0}_getColorIndex(d){let E=this.cache.get(d);if(E==null){const h=this.hashCode(d?d.toLowerCase():"");if(E=Math.abs(h%this.colorsHex.length),this.prevColorIndex!==void 0){this.prevColorIndex===E&&(E=this.getNextIndex(E));const y=this.colorsHex[this.prevColorIndex];if(n.A.readability(y,this.colorsHex[E])<1.5){let a=E;for(let v=0;v<this.colorsHex.length;v++)if(a=this.getNextIndex(a),n.A.readability(y,this.colorsHex[a])>1.5){E=a;break}}}this.cache.set(d,E),this.prevColorIndex=E}return E}getNextIndex(d){return d+1<this.colorsHex.length?d+1:0}hashCode(d){let E=0,h,y;for(h=0;h<d.length;h++)y=d.charCodeAt(h),E=(E<<5)-E+y;return E}getColorByKey(d){const E=this._getColorIndex(d);return this.colorsHex[E]}getRgbColorByKey(d){const E=this._getColorIndex(d);return this.colorsRgb[E]}clear(){this.cache.clear()}}const m=(0,t.A)((f,d)=>new o(f,d));function l(f){m([],f)}function i(f,d){return m(r.Tj,d).getColorByKey(f)}function c(f,d){return m(r.Tj,d).getRgbColorByKey(f)}function u(f,d){const E=[...f],h=E.indexOf("#E24D42");h>-1&&E.splice(h,1);const y=f.indexOf("#BF1B00");y>-1&&E.splice(y,1);let a=[];for(const v of E)n.A.readability(d.colors.background.primary,v)>=3&&a.push(v);return a}},6389:(Y,I,e)=>{"use strict";e.d(I,{a3:()=>b});var t=e(2543),n=e.n(t),r=e(84743),s=e.n(r);const o="YYYY-MM-DD",m="HH:mm",l=1e3,i=1e3*l,c=60*i,u=60*c,f=24*u,d=Math.log10(l),E=[{unit:"d",microseconds:f,ofPrevious:24},{unit:"h",microseconds:u,ofPrevious:60},{unit:"m",microseconds:c,ofPrevious:60},{unit:"s",microseconds:i,ofPrevious:1e3},{unit:"ms",microseconds:l,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],h=(P,C,D)=>toFloatPrecision(P/D,C)*D;function y(P){return moment(P/l).format(o)}function a(P){return moment(P/l).format(m)}function v(P){const C=h(P,d,l);return`${moment.duration(C/l).asMilliseconds()}ms`}function g(P){const C=h(P,d,i);return`${moment.duration(C/l).asSeconds()}s`}function b(P){const[C,D]=(0,t.dropWhile)(E,({microseconds:p},x)=>x<E.length-1&&p>P);if(C.ofPrevious===1e3)return`${(0,t.round)(P/C.microseconds,2)}${C.unit}`;const M=`${Math.floor(P/C.microseconds)}${C.unit}`,O=Math.round(P/D.microseconds%C.ofPrevious),S=`${O}${D.unit}`;return O===0?M:`${M} ${S}`}},28114:(Y,I,e)=>{"use strict";e.d(I,{Cr:()=>O,QW:()=>h,_o:()=>C,gt:()=>T,hv:()=>M,i0:()=>E,lU:()=>u});var t=e(96540),n=e(6709),r=e(65879),s=e(47232),o=e(72574),m=e(14578),l=e(31193),i=e(96192),c=e(92102);function u({splitOpenFn:S,traceToLogsOptions:p,traceToMetricsOptions:x,traceToProfilesOptions:A,dataFrame:R,createFocusSpanLink:B,trace:U}){if(!R)return;let F=T(U.duration,U.traceName,U.traceID);const K=R.fields.some(L=>!!L.config.links?.length),w=y(S,R.fields[0],p,x,B,F);return function(V){let N=w(V);if(K){F={...F,...M(V),...O(V,A)};const z=R.fields.filter(J=>!!J.config.links?.length);try{let J;A?.datasourceUid&&(J=(0,l.tR)().getInstanceSettings(A.datasourceUid));const G=J?.type==="grafana-pyroscope-datasource",H=V.tags.some(k=>k.key===h),q=G&&H;let le=[];z.forEach(k=>{const ee=(0,i.QL)({field:k,rowIndex:V.dataFrameRowIndex,splitOpenFn:S,range:D(V,void 0,void 0,q),dataFrame:R,vars:F});le=le.concat(ee)});const me=le.map(k=>({title:k.title,href:k.href,onClick:k.onClick,content:t.createElement(m.I,{name:"link",title:k.title||"Link"}),field:k.origin,type:q?c.N.Profiles:c.N.Unknown}));N.push.apply(N,me)}catch(J){return console.error(J),N}}return N}}const f=S=>S.map(p=>({key:p,value:p.includes(".")?p.replace(".","_"):void 0})),d=f(["cluster","hostname","namespace","pod","service.name","service.namespace"]),E=f(["service.name","service.namespace"]),h="pyroscope.profile.id";function y(S,p,x,A,R,B){let U;x?.datasourceUid&&(U=(0,l.tR)().getInstanceSettings(x.datasourceUid));const F=U?.type==="grafana-splunk-datasource";let K;return A?.datasourceUid&&(K=(0,l.tR)().getInstanceSettings(A.datasourceUid)),function(L){B={...B,...M(L)};const V=[];let N,z="";if(U&&x){const J=x.customQuery?x.query:void 0,G=x.tags&&x.tags.length>0?x.tags:d;switch(U?.type){case"loki":z=C(L,G),N=a(L,x,z,J);break;case"grafana-splunk-datasource":z=C(L,G,{joinBy:" "}),N=g(L,x,z,J);break;case"elasticsearch":case"grafana-opensearch-datasource":z=C(L,G,{labelValueSign:":",joinBy:" AND "}),N=v(L,x,z,J);break;case"grafana-falconlogscale-datasource":z=C(L,G,{joinBy:" OR "}),N=P(L,x,z,J);break;case"googlecloud-logging-datasource":z=C(L,G,{joinBy:" AND "}),N=b(L,x,z,J)}if(N){const H={title:U.name,url:"",internal:{datasourceUid:U.uid,datasourceName:U.name,query:N}};if(B={...B,__tags:{text:"Tags",value:z}},(0,i.O1)(H.internal.query,B).allVariablesDefined){const q=(0,n.u)({link:H,internalLink:H.internal,scopedVars:B,range:D(L,{startMs:x.spanStartTimeShift?r.intervalToMs(x.spanStartTimeShift):0,endMs:x.spanEndTimeShift?r.intervalToMs(x.spanEndTimeShift):0},F),field:{},onClickFn:S,replaceVariables:(0,o.w)().replace.bind((0,o.w)())});V.push({href:q.href,title:"Related logs",onClick:q.onClick,content:t.createElement(m.I,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:p,type:c.N.Logs})}}}if(K&&A?.queries)for(const J of A.queries){const G=J.query||`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${L.process.serviceName}"}[5m])) by (le))`,H={title:K.name,url:"",internal:{datasourceUid:K.uid,datasourceName:K.name,query:{expr:G,refId:"A"}}},q=A.tags&&A.tags.length>0?A.tags:d;B={...B,__tags:{text:"Tags",value:C(L,q)}};const le=(0,n.u)({link:H,internalLink:H.internal,scopedVars:B,range:D(L,{startMs:A.spanStartTimeShift?r.intervalToMs(A.spanStartTimeShift):-12e4,endMs:A.spanEndTimeShift?r.intervalToMs(A.spanEndTimeShift):12e4}),field:{},onClickFn:S,replaceVariables:(0,o.w)().replace.bind((0,o.w)())});V.push({title:J?.name,href:le.href,onClick:le.onClick,content:t.createElement(m.I,{name:"chart-line",title:"Explore metrics for this span"}),field:p,type:c.N.Metrics})}if(L.references&&R)for(const J of L.references){if(J.refType==="CHILD_OF")continue;const G=R(J.traceID,J.spanID);V.push({href:G.href,title:J.span?J.span.operationName:"View linked span",content:t.createElement(m.I,{name:"link",title:"View linked span"}),onClick:G.onClick,field:G.origin,type:c.N.Traces})}if(L.subsidiarilyReferencedBy&&R)for(const J of L.subsidiarilyReferencedBy){const G=R(J.traceID,J.spanID);V.push({href:G.href,title:J.span?J.span.operationName:"View linked span",content:t.createElement(m.I,{name:"link",title:"View linked span"}),onClick:G.onClick,field:G.origin,type:c.N.Traces})}return V}}function a(S,p,x,A){const{filterByTraceID:R,filterBySpanID:B}=p;if(A)return{expr:A,refId:""};if(!x)return;let U="{${__tags}}";return R&&S.traceID&&(U+=' |="${__span.traceId}"'),B&&S.spanID&&(U+=' |="${__span.spanId}"'),{expr:U,refId:""}}function v(S,p,x,A){const{filterByTraceID:R,filterBySpanID:B}=p;if(A)return{query:A,refId:"",metrics:[{id:"1",type:"logs"}]};let U=[];return B&&S.spanID&&U.push('"${__span.spanId}"'),R&&S.traceID&&U.push('"${__span.traceId}"'),x&&U.push("${__tags}"),{query:U.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function g(S,p,x,A){const{filterByTraceID:R,filterBySpanID:B}=p;if(A)return{query:A,refId:""};let U="";return x&&(U+="${__tags}"),R&&S.traceID&&(U+=' "${__span.traceId}"'),B&&S.spanID&&(U+=' "${__span.spanId}"'),{query:U,refId:""}}function b(S,p,x,A){const{filterByTraceID:R,filterBySpanID:B}=p;if(A)return{query:A,refId:""};let U=[];return B&&S.spanID&&U.push('"${__span.spanId}"'),R&&S.traceID&&U.push('"${__span.traceId}"'),x&&U.push("${__tags}"),{query:U.join(" AND "),refId:""}}function P(S,p,x,A){const{filterByTraceID:R,filterBySpanID:B}=p;if(A)return{lsql:A,refId:""};if(!x)return;let U="${__tags}";return R&&S.traceID&&(U+=' or "${__span.traceId}"'),B&&S.spanID&&(U+=' or "${__span.spanId}"'),{lsql:U,refId:""}}function C(S,p,{labelValueSign:x="=",joinBy:A=", "}={}){return[...S.process.tags,...S.tags,{key:"spanId",value:S.spanID},{key:"traceId",value:S.traceID},{key:"name",value:S.operationName},{key:"duration",value:S.duration}].map(R=>{const B=p.find(U=>U.key===R.key);if(B)return`${B.value?B.value:B.key}${x}"${R.value}"`}).filter(R=>!!R).join(A)}function D(S,p={startMs:0,endMs:0},x=!1,A=!1){let R=Math.floor(S.startTime/1e3+p.startMs);const B=(S.startTime+S.duration)/1e3;let U=Math.floor(B+p.endMs);x&&U-R<1e3?U=R+1e3:A?(R=R-6e4,U=U+6e4):R===U&&U++;const F=(0,s.KQ)(U),K=(0,s.KQ)(R);return{from:K,to:F,raw:{from:K,to:F}}}function T(S,p,x){return{__trace:{text:"Trace",value:{duration:S,name:p,traceId:x}}}}function M(S){const p={};for(const x of S.process.tags)p[x.key]=x.value;for(const x of S.tags)p[x.key]=x.value;return{__span:{text:"Span",value:{spanId:S.spanID,traceId:S.traceID,duration:S.duration,name:S.operationName,tags:p}}}}function O(S,p){let x={};if(p){const A=p.tags&&p.tags.length>0?p.tags:E;x={__tags:{text:"Tags",value:C(S,A)}}}return x}},15583:(Y,I,e)=>{"use strict";e.d(I,{Ji:()=>m,SQ:()=>l,zE:()=>s});var t=e(96540),n=e(62938),r=e(56271);const s=()=>(0,n.A)().slice(0,12),m={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:s(),operator:"="}]};function l(i){const[c,u]=(0,t.useState)(m),f=(0,t.useMemo)(()=>i&&(0,r.filterSpans)(c,i),[c,i]);return{search:c,setSearch:u,spanFilterMatches:f}}},35090:(Y,I,e)=>{"use strict";e.d(I,{L:()=>r});var t=e(78368),n=e(56271);function r(o){if(!o)return null;let m=o.fields.length===1?o.fields[0].values[0]:s(o);return m?(0,n.transformTraceData)(m):null}function s(o){const m=new t.R(o),l={};for(let i=0;i<m.length;i++){const c=m.get(i);if(!c.spanID)return null;l[c.spanID]||(l[c.spanID]={serviceName:c.serviceName,tags:c.serviceTags})}return{traceID:m.get(0).traceID,processes:l,spans:m.toArray().map((i,c)=>{const u=[];return i.parentSpanID&&u.push({refType:"CHILD_OF",spanID:i.parentSpanID,traceID:i.traceID}),i.references&&u.push(...i.references.map(f=>({refType:"FOLLOWS_FROM",...f}))),{...i,duration:i.duration*1e3,startTime:i.startTime*1e3,processID:i.spanID,flags:0,references:u,logs:i.logs?.map(f=>({...f,timestamp:f.timestamp*1e3}))||[],dataFrameRowIndex:c}})}}},11140:(Y,I,e)=>{"use strict";e.d(I,{v:()=>R});var t=e(2543),n=e(96540),r=e(49785),s=e(71733),o=e(14110),m=e(12131),l=e(32264),i=e(88575),c=e(94354),u=e(42418),f=e(37390),d=e(55852),E=e(59429),h=e(16233),y=e(79999),a=e(31678),v=e(9955),g=e(27677),b=e(71176),P=(B=>(B.FETCH_DASHBOARD="fetch-dashboard",B.SET_DASHBOARD_LS="set-dashboard-ls-error",B))(P||{});function C(B,U){let F=[];return B==="table"&&U.panelState?.logs?.columns&&(U.panelState.logs?.labelFieldName&&F.push({id:"extractFields",options:{source:U.panelState.logs.labelFieldName}}),F.push({id:"organize",options:{indexByName:Object.values(U.panelState.logs.columns).reduce((K,w,L)=>({...K,[w]:L}),{}),includeByName:Object.values(U.panelState.logs.columns).reduce((K,w)=>({...K,[w]:!0}),{})}})),F}async function D(B){const U=O(B.queries,B.queryResponse,B?.panelState),F={targets:B.queries,type:U,title:"New Panel",gridPos:{x:0,y:0,w:12,h:8},datasource:B.datasource,transformations:C(U,B)};let K;if(B.dashboardUid)try{K=await g.IB.getDashboardByUid(B.dashboardUid)}catch{throw"fetch-dashboard"}else K=(0,b.X)();K.dashboard.panels=[F,...K.dashboard.panels??[]],K.dashboard.time=B.time;try{(0,y.OI)(K)}catch{throw"set-dashboard-ls-error"}}const T=B=>!B.hide,M=B=>U=>U.refId===B;function O(B,U,F){for(const{refId:K}of B.filter(T)){const w=M(K);if(U.flameGraphFrames.some(w))return"flamegraph";if(U.graphFrames.some(w))return"timeseries";if(U.logsFrames.some(w))return F?.logs?.visualisationType?F.logs.visualisationType:"logs";if(U.nodeGraphFrames.some(w))return"nodeGraph";if(U.traceFrames.some(w))return"traces";if(U.customFrames.some(w))return U.customFrames.find(w)?.meta?.preferredVisualisationPluginId??"table"}return"table"}var S=(B=>(B.NewDashboard="new-dashboard",B.ExistingDashboard="existing-dashboard",B))(S||{});function p(B){}function x(B){return B?`d/${B}`:"dashboard/new"}var A=(B=>(B.UNKNOWN="unknown-error",B.NAVIGATION="navigation-error",B))(A||{});function R(B){const{exploreId:U,onClose:F}=B,K=(0,a.useSelector)((0,v.qq)(U)),[w,L]=(0,n.useState)(),{handleSubmit:V,control:N,formState:{errors:z},watch:J}=(0,r.mN)({defaultValues:{saveTarget:"new-dashboard"}}),G=h.TP.hasPermission(a.AccessControlAction.DashboardsCreate),H=h.TP.hasPermission(a.AccessControlAction.DashboardsWrite),q=[];G&&q.push({label:"New dashboard",value:"new-dashboard"}),H&&q.push({label:"Existing dashboard",value:"existing-dashboard"});const le=q.length>1?J("saveTarget"):q[0].value,me=async(k,ee)=>{L(void 0);const X=ee.saveTarget==="existing-dashboard"?ee.dashboardUid:void 0;(0,o.rR)("e_2_d_submit",{newTab:k,saveTarget:ee.saveTarget,queries:K.queries.length});const{from:j,to:ne}=K.range.raw;try{await D({dashboardUid:X,datasource:K.datasourceInstance?.getRef(),queries:K.queries,queryResponse:K.queryResponse,panelState:K?.panelsState,time:{from:typeof j=="string"?j:j.toISOString(),to:typeof ne=="string"?ne:ne.toISOString()}})}catch(ie){switch(ie){case P.FETCH_DASHBOARD:L({error:ie,message:"Could not fetch dashboard information. Please try again."});break;case P.SET_DASHBOARD_LS:L({error:ie,message:"Could not add panel to dashboard. Please try again."});break;default:L({error:"unknown-error",message:"Something went wrong. Please try again."})}return}const te=x(X);if(!k){F(),m.Ny.push(s.I.stripBaseFromUrl(te));return}if(!!!e.g.open(l.$.appUrl+te,"_blank")){L({error:"navigation-error",message:"Could not navigate to the selected dashboard. Please try again."}),(0,y.yZ)();return}F()};return(0,n.useEffect)(()=>{(0,o.rR)("e_2_d_open")},[]),n.createElement("form",null,q.length>1&&n.createElement(r.xI,{control:N,render:({field:{ref:k,...ee}})=>n.createElement(i.D,{label:"Target dashboard",description:"Choose where to add the panel."},n.createElement(c.z,{options:q,...ee,id:"e2d-save-target"})),name:"saveTarget"}),le==="existing-dashboard"&&n.createElement(r.xI,{render:({field:{ref:k,value:ee,onChange:X,...j}})=>n.createElement(i.D,{label:"Dashboard",description:"Select in which dashboard the panel will be created.",error:z.dashboardUid?.message,invalid:!!z.dashboardUid},n.createElement(E.b,{...j,inputId:"e2d-dashboard-picker",defaultOptions:!0,onChange:ne=>X(ne?.uid)})),control:N,name:"dashboardUid",shouldUnregister:!0,rules:{required:{value:!0,message:"This field is required."}}}),w&&n.createElement(u.F,{severity:"error",title:"Error adding the panel"},w.message),n.createElement(f.a.ButtonRow,null,n.createElement(d.$n,{type:"reset",onClick:F,fill:"outline",variant:"secondary"},"Cancel"),n.createElement(d.$n,{type:"submit",variant:"secondary",onClick:V((0,t.partial)(me,!0)),icon:"external-link-alt"},"Open in new tab"),n.createElement(d.$n,{type:"submit",variant:"primary",onClick:V((0,t.partial)(me,!1)),icon:"apps"},"Open dashboard")))}},12881:(Y,I,e)=>{"use strict";e.d(I,{t:()=>r});var t=e(16233),n=e(31678);function r(){const s=t.TP.hasPermission(n.AccessControlAction.DashboardsCreate),o=t.TP.hasPermission(n.AccessControlAction.DashboardsWrite);return s&&!o?"Add panel to new dashboard":o&&!s?"Add panel to existing dashboard":"Add panel to dashboard"}},24401:(Y,I,e)=>{"use strict";e.d(I,{s:()=>l});var t=e(96540),n=e(71733),r=e(12131),s=e(37390),o=e(66864),m=e(55852);function l(i){const{onDismiss:c,path:u,title:f}=i,d=()=>{e.g.open(n.I.assureBaseUrl(u),"_blank"),c()},E=()=>r.Ny.push(u);return t.createElement(s.a,{title:f,isOpen:!0,onDismiss:c},t.createElement(o.gW,{spacing:"sm"},t.createElement("p",null,"Do you want to proceed in the current tab or open a new tab?")),t.createElement(s.a.ButtonRow,null,t.createElement(m.$n,{onClick:c,fill:"outline",variant:"secondary"},"Cancel"),t.createElement(m.$n,{type:"submit",variant:"secondary",onClick:d,icon:"external-link-alt"},"Open in new tab"),t.createElement(m.$n,{type:"submit",variant:"primary",onClick:E,icon:"apps"},"Open")))}},30973:(Y,I,e)=>{"use strict";e.d(I,{w:()=>s});var t=e(96540),n=e(38138),r=e(75462);function s({extensions:l,onSelect:i}){const{categorised:c,uncategorised:u}=m(l),f=u.length>0&&Object.keys(c).length>0;return t.createElement(n.W,null,t.createElement(t.Fragment,null,Object.keys(c).map(d=>t.createElement(n.W.Group,{key:d,label:(0,r.pL)(d,25)},o(c[d],i))),f&&t.createElement(n.W.Divider,{key:"divider"}),o(u,i)))}function o(l,i){return l.map(c=>t.createElement(n.W.Item,{ariaLabel:c.title,icon:c?.icon||"plug",key:c.id,label:(0,r.pL)(c.title,25),onClick:u=>{if(c.path)return i(c);c.onClick?.(u)}}))}function m(l){return(0,t.useMemo)(()=>{const i=[],c={};for(const u of l){if(!u.category){i.push(u);continue}Array.isArray(c[u.category])||(c[u.category]=[]),c[u.category].push(u)}return{uncategorised:i,categorised:c}},[l])}},33368:(Y,I,e)=>{"use strict";e.d(I,{h:()=>r});var t=e(96540),n=e(96192);const r=(s,o)=>(0,t.useMemo)(()=>(0,n.YV)(s,o),[s,o])},39590:(Y,I,e)=>{"use strict";e.d(I,{m:()=>le,s:()=>k});var t=e(96540),n=e(76888),r=e(3169),s=e(31678),o=e(9955),m=e(34028);const l={parse:ee=>{if(!ee.left&&!ee.right)return{to:{left:{datasource:null,queries:[],range:{from:m.kn.from,to:m.kn.to}},schemaVersion:0},error:!1};let X,j,ne,te;return typeof ee.left=="string"&&([X,ne]=f(ee.left)),typeof ee.right=="string"?[j,te]=f(ee.right):ee.right&&(j=u,te=!0),X||(X=u),{to:{schemaVersion:0,left:X,...j&&{right:j}},error:!!ne||!!te}}},i=(ee,...X)=>X.some(j=>ee.hasOwnProperty(j));var c=(ee=>(ee[ee.RangeFrom=0]="RangeFrom",ee[ee.RangeTo=1]="RangeTo",ee[ee.Datasource=2]="Datasource",ee[ee.SegmentsStart=3]="SegmentsStart",ee))(c||{});const u={datasource:null,queries:[],range:m.kn};function f(ee){let X;try{X=JSON.parse(ee)}catch{return[u,!0]}if(!Array.isArray(X))return[{queries:[],range:m.kn,...X},!1];if(X.length<=3)return[u,!0];const j={from:X[0],to:X[1]},ne=X[2],te=X.slice(3),oe=te.filter(ue=>!i(ue,"ui","mode","__panelsState")),ie=te.find(ue=>i(ue,"__panelsState"))?.__panelsState;return[{datasource:ne,queries:oe,range:j,panelsState:ie},!1]}var d=e(87490),E=e(15961);const h={parse:ee=>{if(!ee||!ee.panes||typeof ee.panes!="string")return{to:{schemaVersion:1,panes:{[(0,d.o$)()]:y}},error:!1};let X;try{X=JSON.parse(ee.panes)}catch{}if(X==null||typeof X!="object")return{to:{schemaVersion:1,panes:{[(0,d.o$)()]:y}},error:!0};const j=Object.entries(X).map(([ne,te])=>[ne,a(te)]).reduce((ne,[te,oe])=>{let ie=te;return(ie.length!==3||/^\d+$/.test(ie)||ie.split("").some(ue=>d.WP.indexOf(ue)===-1))&&(ie=(0,d.o$)()),{...ne,[ie]:oe}},{});return Object.keys(j).length||(j[(0,d.o$)()]=y),{to:{schemaVersion:1,panes:j},error:!1}},migrate:ee=>({schemaVersion:1,panes:{[(0,d.o$)()]:ee.left,...ee.right&&{[(0,d.o$)()]:ee.right}}})},y={datasource:null,queries:[],range:m.kn};function a(ee){return!ee||typeof ee!="object"?y:{...y,...(0,E.C)("queries",ee)&&Array.isArray(ee.queries)&&{queries:ee.queries},...(0,E.C)("datasource",ee)&&typeof ee.datasource=="string"&&{datasource:ee.datasource},...(0,E.C)("panelsState",ee)&&!!ee.panelsState&&typeof ee.panelsState=="object"&&{panelsState:ee.panelsState},...(0,E.C)("range",ee)&&!!ee.range&&typeof ee.range=="object"&&(0,E.C)("from",ee.range)&&(0,E.C)("to",ee.range)&&typeof ee.range.from=="string"&&typeof ee.range.to=="string"&&{range:{from:ee.range.from,to:ee.range.to}}}}const v=ee=>b(ee),g=[l,h],b=ee=>{const X=P(ee),[j,...ne]=g.slice(X),{error:te,to:oe}=j.parse(ee);return[ne.reduce((ue,be)=>be.migrate?be.migrate(ue):ue,oe),te]};function P(ee){return!ee||!("schemaVersion"in ee)||!ee.schemaVersion?0:typeof ee.schemaVersion=="number"?ee.schemaVersion:typeof ee.schemaVersion=="string"?Number.parseInt(ee.schemaVersion,10):0}var C=e(2543),D=e(18226),T=e(62860),M=e(62256),O=e(29436),S=e(23994),p=e(89224),x=e(27649),A=e(39070),R=e(41987),B=e(31193),U=e(14678);const F=(ee,X)=>{const j=!(0,C.isEqual)(X?.datasource,ee?.datasource),ne=!(0,C.isEqual)(X?.queries,ee?.queries),te=!(0,C.isEqual)(X?.range||m.kn,ee?.range||m.kn),oe=!(0,C.isEqual)(X?.panelsState,ee?.panelsState);return{datasource:j,queries:ne,range:te,panelsState:oe}};async function K(ee,X,j){if(ee)try{return await(0,B.tR)().get(ee)}catch{}const ne=[...new Set(X.map(te=>te.datasource).filter(A.zz).map(te=>typeof te=="string"?te:te.uid))];try{if(ne.length>=1){const te=(await Promise.allSettled(ne.map(oe=>(0,B.tR)().get(oe)))).filter(E.s);if(te.length>1)return await(0,B.tR)().get(U.uv);if(te.length===1)return await(0,B.tR)().get(ne[0])}}catch{}return(0,B.tR)().get((0,d.HQ)(j)).catch(()=>(0,B.tR)().get()).catch(()=>{})}function w(ee){return{...ee.getDefaultQuery?.(R.Jk.Explore),refId:"A",datasource:ee.getRef()}}function L(ee){return ee.name===U.uv}function V(ee){return ee&&L(ee)?X=>!!X.datasource:X=>X.datasource?typeof X.datasource=="string"?X.datasource===ee?.uid||X.datasource===ee?.name:X.datasource.uid===ee?.uid:!0}async function N(ee){return(await Promise.allSettled(ee.map(j=>(0,B.tR)().get(j.datasource).then(ne=>({query:j,ds:ne}))))).filter(E.s).map(({value:j})=>j.query)}function z(ee,X,j){const ne=Object.values(ee.panes);if(ne.length>1){const te=ne.some(({range:oe},ie,[{range:ue}])=>!(0,C.isEqual)(oe,ue));j((0,O.qz)({syncedTimes:!te}))}Object.entries(ee.panes).forEach(async([te,oe],ie)=>{const{datasource:ue,queries:be,range:ge,panelsState:re}=oe,ye=X[te];if(ye!==void 0){const Be=F(oe,le(ye));Promise.resolve().then(async()=>{Be.datasource&&ue&&await j((0,T.wh)({exploreId:te,datasource:ue}))}).then(async()=>{Be.range&&j((0,p.JA)({exploreId:te,rawRange:(0,m.Z9)(ge)})),Be.queries&&j((0,S.h9)({exploreId:te,queries:(0,x.v)(be)})),(Be.queries||Be.range)&&(await j((0,S.hS)(te)),j((0,S.Od)({exploreId:te}))),Be.panelsState&&re&&j((0,M.fx)({exploreId:te,panelsState:re}))})}else j((0,M.Gd)({exploreId:te,datasource:ue||"",queries:(0,x.v)(be),range:(0,m.Z9)(ge),panelsState:re,position:ie,eventBridge:new D.o}))}),Object.keys(X).filter(te=>!Object.keys(ee.panes).includes(te)).forEach(te=>j((0,O.J8)(te)))}function J(ee,X,j,ne,te){ne((0,O.Ve)()),Promise.all(Object.entries(ee.panes).map(([oe,{datasource:ie,queries:ue,range:be,panelsState:ge}])=>K(ie,ue,j).then(re=>Promise.resolve(re?ue.length?(0,x.v)(ue).filter(V(re)).map(L(re)?C.identity:ye=>({...ye,datasource:re.getRef()})):(0,B.tR)().get(L(re)?void 0:re.getRef()).then(ye=>[w(ye)]):[]).then(async ye=>{let Be=await N(ye);return!Be.length&&re&&(Be=[w(L(re)?await(0,B.tR)().get():re)]),{exploreId:oe,range:be,panelsState:ge,queries:Be,datasource:re}})))).then(async oe=>{const ie=await Promise.all(oe.map(({exploreId:ye,range:Be,panelsState:ve,queries:Me,datasource:ke})=>ne((0,M.Gd)({exploreId:ye,datasource:ke,queries:Me,range:(0,m.Z9)(Be),panelsState:ve,eventBridge:new D.o})).unwrap()));if(ie.length>1){const ye=ie.some(({state:Be},ve,[{state:Me}])=>!(0,C.isEqual)(Be.range.raw,Me.range.raw));ne((0,O.qz)({syncedTimes:!ye}))}const ue=ie.reduce((ye,{exploreId:Be,state:ve})=>({...ye,[Be]:le(ve)}),{}),be=te.getSearchObject();let ge={};for(const[ye,Be]of Object.entries(be).filter(([ve])=>!["schemaVersion","panes","orgId","left","right"].includes(ve)))ge[ye]=Be;const re=new URLSearchParams({schemaVersion:`${ee.schemaVersion}`,panes:JSON.stringify(ue),orgId:`${j}`,...ge});te.replace({pathname:te.getLocation().pathname,search:re.toString()}),X.current="done"})}function G(ee,X){return ee.current=T.wh.pending.type===X.type,[O.J8.type,O.ve.fulfilled.type,S.Od.pending.type,p.eM.type,M.fx.type,T.wh.fulfilled.type].includes(X.type)&&!ee.current}function H(ee,X,j,ne){const te=Object.entries(ee.panes).reduce((oe,[ie,ue])=>ue?{...oe,[ie]:le(ue)}:oe,{});if(!(0,C.isEqual)(X.current.panes,JSON.stringify(te))){const oe=!!X.current.panes&&Object.values(X.current.panes).filter(Boolean).length===0||j.current==="pending";X.current={panes:JSON.stringify(te)},ne.partial({panes:X.current.panes},oe)}}var q=e(76885);function le(ee){return{datasource:ee.datasourceInstance?.uid||"",queries:ee.queries.map(d.w4),range:(0,q.sQ)(ee.range.raw),panelsState:me(ee.panelsState)}}function me(ee){let X=(0,C.mapValues)(ee,j=>(0,C.isObject)(j)?me(j):j);if(X=(0,C.omitBy)(X,C.isEmpty),!(0,C.isEmpty)(X))return X}function k(ee){const{location:X}=(0,n.Il)(),j=(0,s.useDispatch)(),ne=(0,s.useSelector)(o.Qb),te=(0,s.useSelector)(ge=>ge.user.orgId),oe=(0,t.useRef)(ee),ie=(0,t.useRef)("notstarted"),ue=(0,t.useRef)(!1),{warning:be}=(0,r._2)();(0,t.useEffect)(()=>{ee.panes||(ie.current="notstarted",oe.current=ee)},[ee]),(0,t.useEffect)(()=>{const ge=j((0,s.addListener)({predicate:re=>G(ue,re),effect:async(re,{cancelActiveListeners:ye,delay:Be,getState:ve})=>{ye(),await Be(200),H(ve().explore,oe,ie,X)}}));return()=>ge()},[j,X]),(0,t.useEffect)(()=>{const ge=oe.current?.panes!==ee.panes,[re,ye]=v(ee);ye&&be("Could not parse Explore URL","The requested URL contains invalid parameters, a default Explore state has been loaded."),!ge&&ie.current==="notstarted"&&(ie.current="pending",J(re,ie,te,j,X)),oe.current=ee,ge&&ie.current==="done"&&z(re,ne,j)},[j,ne,te,X,ee,be])}},15961:(Y,I,e)=>{"use strict";e.d(I,{C:()=>n,s:()=>t});const t=r=>r.status==="fulfilled";function n(r,s){return r in s}},324:(Y,I,e)=>{"use strict";e.d(I,{M:()=>f,v:()=>E});var t=e(88483),n=e(19347),r=e(14110),s=e(82467),o=e(3169),m=e(18380),l=e(99140),i=e(62256),c=e(29436),u=e(23994);const f=h=>new t.c(y=>{const a=l.M_.getState().explore.panes[h]?.correlations;if(a)y.next(a),y.complete();else{const v=l.M_.subscribe(()=>{const g=l.M_.getState().explore.panes[h]?.correlations;g&&(v(),y.next(g),y.complete())})}});function d(h){return async(y,a)=>{const v=a().explore.panes[h];if(v.datasourceInstance?.uid!==void 0){let g=v.datasourceInstance.meta.mixed?v.queries.map(P=>P.datasource?.uid).filter(P=>P!==null):[v.datasourceInstance.uid];const b=await(0,m.J6)(g);y((0,i.Fb)({exploreId:h,correlations:b.correlations||[]}))}}}function E(h,y,a){return async(v,g)=>{const b=Object.keys(g().explore?.panes),P=g().explore?.panes[b[0]],C=g().explore?.panes[b[1]];if(!P||!C)return;const D=P.datasourceInstance?.meta.mixed?P.queries[0].datasource:P.datasourceInstance?.getRef(),T=C.datasourceInstance?.meta.mixed?C.queries[0].datasource:C.datasourceInstance?.getRef(),[M,O]=await Promise.all([(0,n.l)().get(D),(0,n.l)().get(T)]);if(M?.uid&&O?.uid&&C.correlationEditorHelperData?.resultField){const S={sourceUID:M.uid,targetUID:O.uid,label:h||await(0,m.tZ)(P,C),description:y,config:{field:C.correlationEditorHelperData.resultField,target:C.queries[0],type:"query",transformations:a}};await(0,m.$q)(M.uid,S).then(async()=>{v((0,c.J8)(b[1])),await v(d(b[0])),await v((0,u.Od)({exploreId:b[0]})),(0,r.rR)("grafana_explore_correlation_editor_saved",{sourceDatasourceType:M.type,targetDataSourceType:O.type})}).catch(p=>{v((0,s.dx)((0,o.gi)("Error creating correlation",p))),console.error(p)})}}}},62860:(Y,I,e)=>{"use strict";e.d(I,{YR:()=>h,wh:()=>E});var t=e(30038),n=e(14110),r=e(11134),s=e(87490),o=e(18380),m=e(31678),l=e(57288),i=e(62256),c=e(23994),u=e(89224),f=e(34028);const d=(0,t.VP)("explore/updateDatasourceInstance"),E=(0,m.createAsyncThunk)("explore/changeDatasource",async({datasource:y,exploreId:a,options:v},{getState:g,dispatch:b})=>{const P=g().user.orgId,{history:C,instance:D}=await(0,f.BE)(P,y),T=g().explore.panes[a].datasourceInstance;(0,n.rR)("explore_change_ds",{from:(T?.meta?.mixed?"mixed":T?.type)||"unknown",to:D.meta.mixed?"mixed":D.type,exploreId:a}),b(d({exploreId:a,datasourceInstance:D,history:C}));const M=g().explore.panes[a].queries,O=(0,f.dq)(D.uid,M),S=await(0,o.J6)(O);b((0,i.Fb)({exploreId:a,correlations:S.correlations||[]})),v?.importQueries&&await b((0,c.y2)(a,M,T,D)),g().explore.panes[a].isLive&&b((0,u.hO)({exploreId:a,refreshInterval:r.cC.offOption.value})),v?.importQueries&&b((0,c.Od)({exploreId:a}))}),h=(y,a)=>{if(d.match(a)){const{datasourceInstance:v,history:g}=a.payload;return(0,s._u)(y.querySubscription),{...y,datasourceInstance:v,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,l.Ez)(),queryResponse:(0,f.RA)(),queryKeys:[],history:g}}return y}},62256:(Y,I,e)=>{"use strict";e.d(I,{EA:()=>E,Fb:()=>v,Gd:()=>b,LJ:()=>P,QZ:()=>g,fx:()=>d,nE:()=>h});var t=e(30038),n=e(87490),r=e(18380),s=e(32901),o=e(31678),m=e(62860),l=e(29436),i=e(23994),c=e(89224),u=e(34028);const f=(0,t.VP)("explore/changeSize"),d=(0,t.VP)("explore/changePanels");function E(C,D,T){return async(M,O)=>{const S=O().explore.panes[C];if(S===void 0)return;const{panelsState:p}=S;M(d({exploreId:C,panelsState:{...p,[D]:T}}))}}const h=(0,t.VP)("explore/changeCorrelationHelperData"),y=(0,t.VP)("explore/initializeExploreAction"),a=(0,t.VP)("explore/setUrlReplaced"),v=(0,t.VP)("explore/saveCorrelationsAction");function g(C,{width:D}){return f({exploreId:C,width:D})}const b=(0,o.createAsyncThunk)("explore/initializeExplore",async({exploreId:C,datasource:D,queries:T,range:M,panelsState:O,correlationHelperData:S,eventBridge:p},{dispatch:x,getState:A,fulfillWithValue:R})=>{let B,U=[];if(D){const F=A().user.orgId,K=await(0,u.BE)(F,D);B=K.instance,U=K.history}if(x(y({exploreId:C,queries:T,range:(0,u.eO)(M,(0,s.O)(A().user)),datasourceInstance:B,history:U,eventBridge:p})),O!==void 0&&x(d({exploreId:C,panelsState:O})),x((0,c.JA)({exploreId:C})),B){const F=(0,u.dq)(B.uid,T),K=await(0,r.J6)(F);x(v({exploreId:C,correlations:K.correlations||[]})),x((0,i.Od)({exploreId:C}))}return S!==void 0&&A().explore.correlationEditorDetails?.editorMode&&x(h({exploreId:C,correlationEditorHelperData:S})),R({exploreId:C,state:A().explore.panes[C]})}),P=(C=(0,u.HZ)(),D)=>{if(C=(0,i.JQ)(C,D),C=(0,m.YR)(C,D),C=(0,c.QP)(C,D),l.U2.match(D)){const{richHistory:T,total:M}=D.payload.richHistoryResults;return{...C,richHistory:T,richHistoryTotal:M}}if(l.Ju.match(D)){const T=D.payload.filters;return{...C,richHistorySearchFilters:T}}if(f.match(D)){const T=D.payload.width;return{...C,containerWidth:T}}if(d.match(D)){const{panelsState:T}=D.payload;return{...C,panelsState:T}}if(h.match(D)){const{correlationEditorHelperData:T}=D.payload;return{...C,correlationEditorHelperData:T}}if(v.match(D))return{...C,correlations:D.payload.correlations};if(y.match(D)){const{queries:T,range:M,datasourceInstance:O,history:S,eventBridge:p}=D.payload;return{...C,range:M,queries:T,initialized:!0,eventBridge:p,queryKeys:(0,n.dY)(T),datasourceInstance:O,history:S,queryResponse:(0,u.RA)(),cache:[],correlations:[]}}return C}},72433:(Y,I,e)=>{"use strict";e.d(I,{Bj:()=>v,H9:()=>c,PA:()=>y,Uu:()=>E,VM:()=>u,fP:()=>a,jX:()=>d,ri:()=>l,s1:()=>f,sh:()=>i,wk:()=>h});var t=e(81523),n=e(11401),r=e(29436),s=e(9955);const o=({updatedQuery:g,deletedId:b})=>async(P,C)=>{m(C().explore,(D,T)=>{const M=D.richHistory.map(S=>S.id===g?.id?g:S).filter(S=>S.id!==b),O=D.richHistory.length-M.length;P((0,r.U2)({richHistoryResults:{richHistory:M,total:D.richHistoryTotal-O},exploreId:T}))})},m=(g,b)=>{Object.entries(g.panes).forEach(([P,C])=>{C&&b(C,P)})},l=(g,b,P,C,D)=>async(T,M)=>{const O=D?{quotaExceededError:!1,limitExceededWarning:!1,otherErrors:!1}:{quotaExceededError:!M().explore.richHistoryStorageFull,limitExceededWarning:!M().explore.richHistoryLimitExceededWarningShown},{richHistoryStorageFull:S,limitExceeded:p}=await(0,t.l0)({localOverride:g,datasource:{uid:b,name:P},queries:C,starred:!1,showNotif:O});D||(S&&T((0,r.fj)()),p&&T((0,r.D)()))},i=(g,b)=>async(P,C)=>{const D=await(0,t.oU)(g,b);P(o({updatedQuery:D}))},c=(g,b)=>async P=>{const C=await(0,t.cX)(g,b);P(o({updatedQuery:C}))},u=g=>async b=>{const P=await(0,t.NC)(g);b(o({deletedId:P}))},f=()=>async(g,b)=>{await(0,t.X1)(),(0,s.K6)(b()).forEach(([P])=>{g((0,r.U2)({richHistoryResults:{richHistory:[],total:0},exploreId:P})),g((0,r.U2)({richHistoryResults:{richHistory:[],total:0},exploreId:P}))})},d=g=>async(b,P)=>{const C=P().explore.panes[g].richHistorySearchFilters;if(C){const D=await(0,t.DI)(C);b((0,r.U2)({richHistoryResults:D,exploreId:g}))}},E=g=>async(b,P)=>{const C=P().explore.panes[g]?.richHistorySearchFilters,D=P().explore.panes[g]?.richHistory;if(C&&D){const T={...C,page:(C?.page||1)+1},M=await(0,t.DI)(T),O=[...D,...M.richHistory];b((0,r.Ju)({filters:T,exploreId:g})),b((0,r.U2)({richHistoryResults:{richHistory:O,total:M.total},exploreId:g}))}},h=g=>async b=>{b((0,r.Ju)({filters:void 0,exploreId:g})),b((0,r.U2)({richHistoryResults:{richHistory:[],total:0},exploreId:g}))},y=()=>async(g,b)=>{let P=b().explore.richHistorySettings;P||(P=await(0,t.Gx)(),g((0,r.bZ)(P)))},a=g=>async b=>{b((0,r.bZ)(g)),await(0,t.rs)(g)},v=(g,b)=>async(P,C)=>{await P((0,r.Ju)({exploreId:g,filters:{...b}}));const D=C().explore.richHistorySettings;(0,n.gQ)().lastUsedDataSourcesAvailable&&await P(a({...D,lastUsedDatasourceFilters:b.datasourceFilters}))}},29436:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>B,D:()=>y,J8:()=>C,JA:()=>P,Ju:()=>v,U2:()=>E,Ve:()=>T,am:()=>S,bZ:()=>a,fj:()=>h,nD:()=>g,ow:()=>p,qz:()=>d,tP:()=>b,ve:()=>M});var t=e(30038),n=e(2543),r=e.n(n),s=e(18226),o=e(12131),m=e(87490),l=e(23989),i=e(31678),c=e(27649),u=e(62256),f=e(34028);const d=(0,t.VP)("explore/syncTimes"),E=(0,t.VP)("explore/richHistoryUpdated"),h=(0,t.VP)("explore/richHistoryStorageFullAction"),y=(0,t.VP)("explore/richHistoryLimitExceededAction"),a=(0,t.VP)("explore/richHistorySettingsUpdated"),v=(0,t.VP)("explore/richHistorySearchFiltersUpdatedAction"),g=(0,t.VP)("explore/splitSizeUpdateAction"),b=(0,t.VP)("explore/maximizePaneAction"),P=(0,t.VP)("explore/evenPaneResizeAction"),C=(0,t.VP)("explore/splitClose"),D=(0,t.VP)("explore/setPaneState"),T=(0,t.VP)("explore/clearPanes"),M=(0,i.createAsyncThunk)("explore/splitOpen",async(U,{getState:F,dispatch:K})=>{const w=Object.values(F().explore.panes)[0],L=U?.queries??w?.queries??[];Object.keys(F().explore.panes).forEach((z,J)=>{J>=1&&K(C(z))});const V=U?.range||w?.range.raw||f.kn;let N=(0,m.o$)();for(;F().explore.panes[N];)N=(0,m.o$)();await K(O({exploreId:N,datasource:U?.datasourceUid||w?.datasourceInstance?.getRef(),queries:(0,c.v)(L),range:V,panelsState:U?.panelsState||w?.panelsState,correlationHelperData:U?.correlationHelperData,eventBridge:new s.o})),w?.range&&await K(d({syncedTimes:(0,n.isEqual)(w.range.raw,V)}))}),O=(0,i.createAsyncThunk)("explore/createNewSplitOpen",async(U,{dispatch:F})=>{await F((0,u.Gd)(U))}),S=(0,t.VP)("explore/changeCorrelationEditorDetails"),p=(U,F)=>async K=>{const{timeRange:w,getExploreUrl:L,openInNewWindow:V}=F,N=await L({queries:U.targets,dsRef:U.datasource,scopedVars:U.scopedVars,timeRange:w,adhocFilters:(0,l.w)().getAdhocFilters(U.datasource?.uid??"",!0)});if(V&&N){V(N);return}o.Ny.push(N)},x=(0,f.HZ)(),A={syncedTimes:!1,panes:{},correlationEditorDetails:{editorMode:!1,correlationDirty:!1,queryEditorDirty:!1,isExiting:!1},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},B={explore:(U=A,F)=>{if(C.match(F)){const{[F.payload]:w,...L}={...U.panes};return{...U,panes:L,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(g.match(F)){const{largerExploreId:w}=F.payload;return{...U,largerExploreId:w,maxedExploreId:void 0,evenSplitPanes:w===void 0}}if(b.match(F)){const{exploreId:w}=F.payload;return{...U,largerExploreId:w,maxedExploreId:w,evenSplitPanes:!1}}if(P.match(F))return{...U,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(d.match(F))return{...U,syncedTimes:F.payload.syncedTimes};if(h.match(F))return{...U,richHistoryStorageFull:!0};if(y.match(F))return{...U,richHistoryLimitExceededWarningShown:!0};if(a.match(F)){const w=F.payload;return{...U,richHistorySettings:w}}if(O.pending.match(F))return{...U,panes:{...U.panes,[F.meta.arg.exploreId]:x}};if(u.Gd.pending.match(F)){const w=Object.entries(U.panes),L=w.slice(0,F.meta.arg.position),V=w.slice(L.length),N=[...L,[F.meta.arg.exploreId,x],...V].reduce((z,[J,G])=>({...z,[J]:G}),{});return{...U,panes:N}}if(T.match(F))return{...U,panes:{}};if(S.match(F)){const{editorMode:w,label:L,description:V,canSave:N,correlationDirty:z,queryEditorDirty:J,isExiting:G,postConfirmAction:H,transformations:q}=F.payload;return{...U,correlationEditorDetails:{editorMode:!!(w??U.correlationEditorDetails?.editorMode),canSave:!!(N??U.correlationEditorDetails?.canSave),label:L??U.correlationEditorDetails?.label,description:V??U.correlationEditorDetails?.description,transformations:q??U.correlationEditorDetails?.transformations,correlationDirty:!!(z??U.correlationEditorDetails?.correlationDirty),queryEditorDirty:!!(J??U.correlationEditorDetails?.queryEditorDirty),isExiting:!!(G??U.correlationEditorDetails?.isExiting),postConfirmAction:H}}}const K=F.payload?.exploreId;return typeof K=="string"?{...U,panes:Object.entries(U.panes).reduce((w,[L,V])=>({...w,[L]:L===K?(0,u.LJ)(V,F):V}),{})}:U}}},23994:(Y,I,e)=>{"use strict";e.d(I,{_0:()=>ae,He:()=>Ut,hS:()=>fe,bO:()=>Oe,IL:()=>Gt,rR:()=>$e,y2:()=>ze,Az:()=>Wt,PD:()=>Xe,JQ:()=>Tt,S6:()=>nt,Od:()=>et,GI:()=>Ct,q9:()=>Fe,h1:()=>re,qk:()=>Ye,Rk:()=>Et,h9:()=>je,TO:()=>ot});var t=e(30038),n=e(32017),r=e.n(n),s=e(2543),o=e(49510),m=e(62467),l=e(58307),i=e(69862),c=e(99165),u=e(39070),f=e(73372),d=e(47232),E=e(9557),h=e(40187),y=e(26272),a=e(14236),v=e(80822),g=e(19347),b=e(32264),P=e(14110),C=e(33390),D=e(87490),T=e(80582),M=e(18380),O=e(69147),S=e(32901),p=e(43269),x=e(14678),A=e(31678),R=e(82467),B=e(3169),U=e(39374),F=e(97186),K=e(81160),w=e(57875),L=e(91890),V=e(57934),N=e(11261),z=e(91002),J=e(15162);const G=ft=>{const Mt=[],_t=[],nn=[],dn=[],en=[],Xt=[],En=[],Vn=[];for(const Wn of ft.series){if(j(Wn)){Vn.push(Wn);continue}switch(Wn.meta?.preferredVisualisationType){case"logs":dn.push(Wn);break;case"graph":Mt.push(Wn);break;case"trace":en.push(Wn);break;case"table":_t.push(Wn);break;case"rawPrometheus":nn.push(Wn);break;case"nodeGraph":Xt.push(Wn);break;case"flamegraph":En.push(Wn);break;default:X(Wn)&&Mt.push(Wn),_t.push(Wn)}}return{...ft,graphFrames:Mt,tableFrames:_t,logsFrames:dn,traceFrames:en,nodeGraphFrames:Xt,customFrames:Vn,flameGraphFrames:En,rawPrometheusFrames:nn,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},H=({showCorrelationEditorLinks:ft,queries:Mt,correlations:_t,defaultTargetDatasource:nn})=>dn=>{if(ft&&nn)for(const en of dn.series)for(const Xt of en.fields){Xt.config.links=[],Xt.display=Xt.display||(0,w.H)();const En={};en.fields.map(Vn=>{En[`${Vn.name}`]=`\${__data.fields.['${Vn.name}']}`}),Xt.config.links.push({url:"",origin:L.x0.ExploreCorrelationsEditor,title:`Correlate with ${Xt.name}`,internal:{datasourceUid:nn.uid,datasourceName:nn.name,query:{datasource:{uid:nn.uid}},meta:{correlationData:{resultField:Xt.name,vars:En,origVars:En}}}})}else if(Mt?.length&&_t?.length){const en=(0,s.mapValues)((0,s.groupBy)(Mt,"refId"),"0.datasource.uid");(0,M.cA)(dn.series,_t,en)}return dn},q=ft=>ft.graphFrames.length?{...ft,graphResult:ft.graphFrames}:{...ft,graphResult:null},le=ft=>{if(ft.tableFrames.length===0)return(0,m.of)({...ft,tableResult:null});ft.tableFrames.sort((dn,en)=>{const Xt=dn.refId,En=en.refId;return Xt>En?1:Xt<En?-1:0});const Mt=ft.tableFrames.every(dn=>X(dn)),_t={interpolate:dn=>dn};return(Mt?(0,m.of)(ft.tableFrames).pipe(V.c.joinByFieldTransformer.operator({},_t)):(0,m.of)(ft.tableFrames).pipe(V.c.mergeTransformer.operator({},_t))).pipe((0,K.T)(dn=>{for(const en of dn)for(const Xt of en.fields)Xt.display=Xt.display??(0,w.J)({field:Xt,theme:b.$.theme2,timeZone:ft.request?.timezone??"browser"});return{...ft,tableResult:dn}}))},me=ft=>{const Mt=ft.rawPrometheusFrames;if(!Mt||Mt.length===0)return(0,m.of)({...ft,tableResult:null});Mt.sort((en,Xt)=>{const En=en.refId,Vn=Xt.refId;return En>Vn?1:En<Vn?-1:0});const _t=Mt.every(en=>X(en)),nn={interpolate:en=>en};return(_t?(0,m.of)(Mt).pipe(V.c.joinByFieldTransformer.operator({},nn)):(0,m.of)(Mt).pipe(V.c.mergeTransformer.operator({},nn))).pipe((0,K.T)(en=>{const Xt=en[0];for(const En of Xt.fields)En.display=En.display??(0,w.J)({field:En,theme:b.$.theme2,timeZone:ft.request?.timezone??"browser"});return{...ft,rawPrometheusResult:Xt}}))},k=(ft={})=>Mt=>{if(Mt.logsFrames.length===0)return{...Mt,logsResult:null};const _t=Mt.request?.intervalMs,nn=(0,O.HT)(Mt.logsFrames,_t,ft.absoluteRange,ft.queries),dn=(0,D.uE)(ft.refreshInterval),en=(0,z.zy)(nn,dn),Xt=en.rows,En=en.series,Vn={...en,rows:Xt,series:En};return{...Mt,logsResult:Vn}};function ee(ft,Mt,_t,nn,dn,en,Xt,En){return(0,m.of)(ft).pipe((0,K.T)(Vn=>(0,a.N$)(Vn,Mt)),(0,K.T)(H({defaultTargetDatasource:En,showCorrelationEditorLinks:Xt,queries:dn,correlations:en})),(0,K.T)(G),(0,K.T)(q),(0,K.T)(k({absoluteRange:_t,refreshInterval:nn,queries:dn})),(0,i.Z)(me),(0,i.Z)(le))}function X(ft){const Mt=(0,s.groupBy)(ft.fields,_t=>_t.type);return!!(Object.keys(Mt).length===2&&Mt[N.PU.time]?.length===1&&Mt[N.PU.number])}function j(ft){return ft.meta?.preferredVisualisationPluginId?(0,J.oZ)(ft.meta?.preferredVisualisationPluginId):!1}var ne=e(57288),te=e(324),oe=e(62256),ie=e(72433),ue=e(29436),be=e(89224),ge=e(34028);const re=ft=>Mt=>{const _t=Mt.explore.panes[ft];return _t&&_t.queryResponse?_t.queryResponse.state===u.Gu.Loading||_t.queryResponse.state===u.Gu.Streaming:!1},ye=(0,t.VP)("explore/addQueryRow"),Be=(0,t.VP)("explore/changeQueries"),ve=(0,t.VP)("explore/cancelQueries"),Me=(0,t.VP)("explore/queriesImported"),ke=(0,t.VP)("explore/queryStoreSubscription"),Se=(0,t.VP)("explore/setSupplementaryQueryEnabledAction"),We=(0,t.VP)("explore/storeSupplementaryQueryDataProviderAction"),De=(0,t.VP)("explore/cleanSupplementaryQueryDataProviderAction"),pe=(0,t.VP)("explore/cleanSupplementaryQueryAction"),Ne=(0,t.VP)("explore/storeSupplementaryQueryDataSubscriptionAction"),Le=(0,t.VP)("explore/updateSupplementaryQueryDataAction"),He=(0,t.VP)("explore/queryStreamUpdated"),je=(0,t.VP)("explore/setQueries"),at=(0,t.VP)("changeLoadingState"),Ye=(0,t.VP)("explore/setPausedState"),$e=(0,t.VP)("explore/clearLogs"),xe=(0,t.VP)("explore/scanStart"),Fe=(0,t.VP)("explore/scanStop"),Ee=(0,t.VP)("explore/addResultsToCache"),se=(0,t.VP)("explore/clearCache");function ae(ft,Mt){return async(_t,nn)=>{const dn=nn().explore.panes[ft];let en;dn.datasourceInstance?.meta.mixed?en=(0,s.findLast)(dn.queries,En=>!!En.datasource)?.datasource||void 0:en=dn.datasourceInstance?.getRef();const Xt=await(0,D.Ll)(dn.queries,Mt,en);_t(ye({exploreId:ft,index:Mt,query:Xt}))}}function fe(ft){return(Mt,_t)=>{Mt(Fe({exploreId:ft})),Mt(ve({exploreId:ft}));const nn=_t().explore.panes[ft].supplementaryQueries;for(const dn of ne.VW)Mt(De({exploreId:ft,type:dn})),nn[dn]?.data?.state!==u.Gu.Done&&Mt(pe({exploreId:ft,type:dn}))}}const Ce=(ft,Mt)=>{const _t=ft.getRef();return Mt.map(nn=>({...nn,datasource:_t}))},Re=async(ft,Mt,_t)=>{let nn=[];if(Mt.meta?.id===ft.meta?.id)nn=_t;else if((0,f.Ee)(Mt)&&(0,f.FL)(ft)){const dn=await Mt.exportToAbstractQueries(_t);nn=await ft.importFromAbstractQueries(dn)}else ft.importQueries&&(nn=await ft.importQueries(_t,Mt));return Ce(ft,nn)},Oe=(0,A.createAsyncThunk)("explore/changeQueries",async({queries:ft,exploreId:Mt},{getState:_t,dispatch:nn})=>{let dn=!1;const en=_t().explore.panes[Mt].queries,Xt=_t().explore.panes[Mt].datasourceInstance?.uid,En=_t().explore.correlationEditorDetails,Vn=En?.editorMode||!1;!(Object.keys(_t().explore.panes)[0]===Mt)&&Vn&&!En?.queryEditorDirty&&nn((0,ue.am)({queryEditorDirty:!0}));for(const na of ft)for(const Bt of en){if(na.refId===Bt.refId&&na.datasource?.type!==Bt.datasource?.type){const ln=await(0,g.l)().get(Bt.datasource),mn=await(0,g.l)().get({uid:na.datasource?.uid});await nn(ze(Mt,en,ln,mn,na.refId)),dn=!0}if(Xt===x.uv&&na.refId===Bt.refId&&na.datasource?.uid!==Bt.datasource?.uid){const ln=(0,ge.dq)(x.uv,ft),mn=await(0,M.J6)(ln);nn((0,oe.Fb)({exploreId:Mt,correlations:mn.correlations||[]}))}}dn||nn(Be({queries:ft,exploreId:Mt})),ft.length<en.length&&nn(et({exploreId:Mt}))}),ze=(ft,Mt,_t,nn,dn)=>async en=>{if(!_t){en(Me({exploreId:ft,queries:Mt}));return}let Xt=Mt;if(nn.uid===x.uv)Xt=Mt.map(Vn=>({...Vn,datasource:_t.getRef()}));else if(_t.uid===x.uv){const Vn=(0,s.groupBy)(Mt,na=>na.datasource?.uid),Wn=await Promise.all(Object.keys(Vn).map(async na=>{const Bt=await(0,g.l)().get({uid:na});return await Re(nn,Bt,Vn[na])}));Xt=(0,s.flatten)(Wn.filter(na=>na.length>0))}else{let Vn=Mt;if(dn!==void 0){const Wn=Mt.find(na=>na.refId===dn);Wn&&(Vn=[Wn])}Xt=await Re(nn,_t,Vn)}let En=await(0,D.di)(Xt,nn.getRef());if(dn!==void 0){Xt.length===0&&(Xt=[await(0,D.Ll)([],void 0,nn.getRef())]);const Vn=Mt.findIndex(na=>na.refId===dn),Wn={...En[0],refId:Mt[Vn].refId};En=[...Mt],En[Vn]=Wn}return en(Me({exploreId:ft,queries:En})),En};function Xe(ft,Mt,_t){return async(nn,dn)=>{const en=dn().explore.panes[ft],{queries:Xt}=en,Vn=(await Promise.all(Xt.map(Wn=>_t({...Wn},Mt)))).map((Wn,na)=>(0,D.eF)(Wn,Xt,na));nn(je({exploreId:ft,queries:Vn})),Mt.preventSubmit||nn(et({exploreId:ft}))}}async function Ze(ft,Mt,_t,nn){ft((0,ie.ri)(!0,_t.uid,_t.name,nn,b.$.queryHistoryEnabled)),b.$.queryHistoryEnabled&&ft((0,ie.ri)(!1,_t.uid,_t.name,nn,!1));for(const dn in Mt.panes)await ft((0,ie.jX)(dn))}const et=(0,A.createAsyncThunk)("explore/runQueries",async({exploreId:ft,preserveCache:Mt},{dispatch:_t,getState:nn})=>{_t(fe(ft));const{defaultCorrelationEditorDatasource:dn,scopedVars:en,showCorrelationEditorLinks:Xt}=await(0,ge.aj)(nn(),ft),En=(0,te.M)(ft);_t((0,be.JA)({exploreId:ft})),Mt!==!0&&_t(Gt(ft));const Wn=nn().explore.panes[ft],{datasourceInstance:na,containerWidth:Bt,isLive:ln,range:mn,scanning:Dn,queryResponse:hn,querySubscription:Fn,refreshInterval:wn,absoluteRange:Hn,cache:An,supplementaryQueries:In}=Wn;let kn,Vt;const zt=Wn.queries.map(rn=>({...rn,datasource:rn.datasource||na?.getRef()}));na!=null&&Ze(_t,nn().explore,na,zt);const kt=(0,ge.rk)(An,Hn);if(kt)kn=(0,o.z)([(0,m.of)(kt),En]).pipe((0,i.Z)(([rn,yn])=>ee(rn,hn,Hn,wn,zt,yn,Xt,dn))),Vt=kn.subscribe(rn=>{_t(He({exploreId:ft,response:rn}))});else{if(!(0,D.zT)(zt)||!na)return;const rn=na?.interval;(0,D._u)(Fn);const yn={minInterval:rn,maxDataPoints:Bt,liveStreaming:ln},gn=(0,S.O)(nn().user),Rn=(0,D.bI)(ft,zt,yn,mn,Dn,gn,en);if(_t(at({exploreId:ft,loadingState:u.Gu.Loading})),kn=(0,o.z)([(0,U.BN)(na,Rn.request).pipe(ln?(0,c.c)(500):l.D),En]).pipe((0,i.Z)(([Kt,mt])=>ee(Kt,hn,Hn,wn,zt,mt,Xt,dn))),Vt=kn.subscribe({next(Kt){const mt=nn().explore.panes[ft];if(Kt.logsResult!==null&&Kt.state===u.Gu.Done&&(0,P.rR)("grafana_explore_logs_result_displayed",{datasourceType:na.type,visualisationType:mt?.panelsState?.logs?.visualisationType??C.A.get(F.r)??"N/A",length:Kt.logsResult.rows.length}),_t(He({exploreId:ft,response:Kt})),mt.scanning)if(Kt.state===u.Gu.Done&&Kt.series.length===0){const pt=(0,T.Wb)(-1,mt.range);_t((0,be.JA)({exploreId:ft,absoluteRange:pt})),_t(et({exploreId:ft}))}else _t(Fe({exploreId:ft}))},error(Kt){_t((0,R.dx)((0,B.gi)("Query processing error",Kt))),_t(at({exploreId:ft,loadingState:u.Gu.Error})),console.error(Kt)},complete(){nn().explore.panes[ft].queryResponse.state===u.Gu.Loading&&_t(at({exploreId:ft,loadingState:u.Gu.Done}))}}),ln)for(const Kt of ne.VW)_t(De({exploreId:ft,type:Kt})),_t(pe({exploreId:ft,type:Kt}));else _t(rt({exploreId:ft,datasourceInstance:na,transaction:Rn,newQuerySource:kn,supplementaryQueries:In,queries:zt,absoluteRange:Hn}))}_t(ke({exploreId:ft,querySubscription:Vt}))}),nt=(0,A.createAsyncThunk)("explore/runLoadMoreQueries",async({exploreId:ft,absoluteRange:Mt},{dispatch:_t,getState:nn})=>{_t(fe(ft));const{datasourceInstance:dn,containerWidth:en,queryResponse:Xt}=nn().explore.panes[ft],{defaultCorrelationEditorDatasource:En,scopedVars:Vn,showCorrelationEditorLinks:Wn}=await(0,ge.aj)(nn(),ft),na=(0,te.M)(ft);let Bt;const ln=Xt.logsResult?.queries||[],mn=Xt.logsFrames.map(An=>An.refId),Dn=ln.filter(An=>mn.includes(An.refId)).map(An=>({...An,datasource:An.datasource||dn?.getRef(),refId:`${O.O6}${An.refId}`,supportingQueryType:p.Q$.InfiniteScroll}));if(!(0,D.zT)(Dn)||!dn)return;const hn={minInterval:dn?.interval,maxDataPoints:en},Fn=(0,S.O)(nn().user),wn=(0,D.zq)(Fn,{from:(0,d.oZ)(Fn,Mt.from),to:(0,d.oZ)(Fn,Mt.to)},(0,S.q)(nn().user)),Hn=(0,D.bI)(ft,Dn,hn,wn,!1,Fn,Vn);_t(at({exploreId:ft,loadingState:u.Gu.Loading})),Bt=(0,o.z)([(0,U.BN)(dn,Hn.request),na]).pipe((0,i.Z)(([An,In])=>An.state!==u.Gu.Done?(0,m.of)({...Xt,state:u.Gu.Loading}):ee((0,v._k)(Xt,An),Xt,Mt,void 0,Dn,In,Wn,En))),Bt.subscribe({next(An){_t(He({exploreId:ft,response:An}))},error(An){_t((0,R.dx)((0,B.gi)("Query processing error",An))),_t(at({exploreId:ft,loadingState:u.Gu.Error})),console.error(An)},complete(){_t(at({exploreId:ft,loadingState:u.Gu.Done}))}})}),lt=async(ft,Mt)=>{const _t=ft.filter(dn=>dn.datasource?.uid!==x.uv),nn=(0,s.groupBy)(_t,"datasource.uid");return await Promise.all(Object.values(nn).map(async dn=>({datasource:await(0,g.l)().get(dn[0].datasource,Mt),targets:dn})))},rt=(0,A.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:ft,exploreId:Mt,transaction:_t,newQuerySource:nn,supplementaryQueries:dn,queries:en,absoluteRange:Xt},{dispatch:En})=>{let Vn;ft.meta.mixed?Vn=await lt(_t.request.targets,_t.request.scopedVars):Vn=[{datasource:ft,targets:_t.request.targets}];for(const Wn of ne.VW){const na=(0,ne.Pm)(Vn,Wn,{..._t.request,requestId:`${_t.request.requestId}_${(0,s.snakeCase)(Wn)}`},nn);na?(En(We({exploreId:Mt,type:Wn,dataProvider:na})),ut(dn[Wn].data,en,Xt)||(En(pe({exploreId:Mt,type:Wn})),dn[Wn].enabled&&En(Wt(Mt,Wn)))):En(De({exploreId:Mt,type:Wn}))}});function ut(ft,Mt,_t){if(!ft)return!1;const nn=(0,s.zipObject)((0,s.map)(Mt,"refId"),Mt),dn=(0,s.mapValues)((0,s.groupBy)(ft.data.map(Vn=>Vn.meta?.custom?.sourceQuery),"refId"),s.head),en=ft.data.every(Vn=>Vn.meta?.custom?.logsVolumeType===E.Aj.FullRange),Xt=r()(nn,dn),En=ft.data.every(Vn=>{const Wn=Vn.meta?.custom?.absoluteRange;return Wn?Wn&&Wn.from<=_t.from&&_t.to<=Wn.to:!0});return en&&Xt&&En}function Et(ft,Mt){return(_t,nn)=>{const dn=nn().explore.panes[ft].queries,en=Mt.map((Xt,En)=>(0,D.eF)(Xt,dn,En));_t(je({exploreId:ft,queries:en})),_t(et({exploreId:ft}))}}function Ct(ft){return(Mt,_t)=>{Mt(xe({exploreId:ft}));const nn=(0,T.Wb)(-1,_t().explore.panes[ft].range);Mt((0,be.JA)({exploreId:ft,absoluteRange:nn})),Mt(et({exploreId:ft}))}}function Ut(ft){return(Mt,_t)=>{const nn=_t().explore.panes[ft].queryResponse,dn=_t().explore.panes[ft].absoluteRange,en=(0,ge.O2)(dn);nn.state===u.Gu.Done&&Mt(Ee({exploreId:ft,cacheKey:en,queryResponse:nn}))}}function Gt(ft){return(Mt,_t)=>{Mt(se({exploreId:ft}))}}function Wt(ft,Mt){return(_t,nn)=>{const{supplementaryQueries:dn}=nn().explore.panes[ft],en=dn[Mt].dataProvider;if(en){const Xt=en.subscribe({next:En=>{_t(Le({exploreId:ft,type:Mt,data:En}))}});_t(Ne({exploreId:ft,type:Mt,dataSubscription:Xt}))}}}function ot(ft,Mt,_t){return(nn,dn)=>{nn(Se({exploreId:ft,enabled:Mt,type:_t})),(0,ne.Oi)(Mt,_t),Mt&&nn(Wt(ft,_t))}}const Tt=(ft,Mt)=>{if(ye.match(Mt)){const{queries:_t}=ft,{index:nn,query:dn}=Mt.payload,en=[..._t.slice(0,nn+1),{...dn},..._t.slice(nn+1)];return{...ft,queries:en,queryKeys:(0,D.dY)(en)}}if(Be.match(Mt)){const{queries:_t}=Mt.payload;return{...ft,queries:_t}}if(ve.match(Mt))return(0,D._u)(ft.querySubscription),{...ft,...ft.queryResponse?{queryResponse:{...ft.queryResponse,state:u.Gu.Done}}:{}};if(je.match(Mt)){const{queries:_t}=Mt.payload;return{...ft,queries:_t.slice(),queryKeys:(0,D.dY)(_t)}}if(ke.match(Mt)){const{querySubscription:_t}=Mt.payload;return{...ft,querySubscription:_t}}if(Se.match(Mt)){const{enabled:_t,type:nn}=Mt.payload,{supplementaryQueries:dn}=ft,en=dn[nn].dataSubscription;!_t&&en&&en.unsubscribe();const Xt={...dn,[nn]:{...dn[nn],enabled:_t,data:void 0}};return{...ft,supplementaryQueries:Xt}}if(We.match(Mt)){const{dataProvider:_t,type:nn}=Mt.payload,{supplementaryQueries:dn}=ft,en=dn[nn];en?.dataSubscription&&en.dataSubscription.unsubscribe();const Xt={...dn,[nn]:{...en,dataProvider:_t,dataSubscription:void 0}};return{...ft,supplementaryQueries:Xt}}if(De.match(Mt)){const{type:_t}=Mt.payload,{supplementaryQueries:nn}=ft,dn=nn[_t];dn?.dataSubscription&&dn.dataSubscription.unsubscribe();const en={...nn,[_t]:{...dn,dataProvider:void 0,dataSubscription:void 0}};return{...ft,supplementaryQueries:en}}if(pe.match(Mt)){const{type:_t}=Mt.payload,{supplementaryQueries:nn}=ft,dn={...nn,[_t]:{...nn[_t],data:void 0}};return{...ft,supplementaryQueries:dn}}if(Ne.match(Mt)){const{dataSubscription:_t,type:nn}=Mt.payload,{supplementaryQueries:dn}=ft,en={...dn,[nn]:{...dn[nn],dataSubscription:_t}};return{...ft,supplementaryQueries:en}}if(Le.match(Mt)){let{data:_t,type:nn}=Mt.payload;const{supplementaryQueries:dn}=ft,en={...dn,[nn]:{...dn[nn],data:_t}};return{...ft,supplementaryQueries:en}}if(He.match(Mt))return Pn(ft,Mt);if(Me.match(Mt)){const{queries:_t}=Mt.payload;return{...ft,queries:_t,queryKeys:(0,D.dY)(_t)}}if(at.match(Mt)){const{loadingState:_t}=Mt.payload;return{...ft,queryResponse:{...ft.queryResponse,state:_t}}}if(Ye.match(Mt)){const{isPaused:_t}=Mt.payload;return{...ft,isPaused:_t}}if(xe.match(Mt))return{...ft,scanning:!0};if(Fe.match(Mt))return{...ft,scanning:!1,scanRange:void 0};if(Ee.match(Mt)){const{cache:nn}=ft,{queryResponse:dn,cacheKey:en}=Mt.payload;let Xt=[...nn];return Xt.some(Vn=>Vn.key===en)||(Xt=[{key:en,value:dn},...Xt].slice(0,5)),{...ft,cache:Xt}}if(se.match(Mt))return{...ft,cache:[]};if($e.match(Mt)){if(!ft.logsResult)return{...ft,clearedAtIndex:null};if(ft.queryResponse.state===u.Gu.Loading)return{...ft,clearedAtIndex:null,logsResult:{...ft.logsResult,rows:[]}};const _t=ft.clearedAtIndex?ft.clearedAtIndex+ft.logsResult.rows.length:ft.logsResult.rows.length-1;return{...ft,clearedAtIndex:_t,logsResult:{...ft.logsResult,rows:[]}}}return ft},Pn=(ft,Mt)=>{const{response:_t}=Mt.payload,{request:nn,series:dn,error:en,graphResult:Xt,logsResult:En,tableResult:Vn,rawPrometheusResult:Wn,traceFrames:na,nodeGraphFrames:Bt,flameGraphFrames:ln,rawPrometheusFrames:mn,customFrames:Dn}=_t;if(en){if(en.type===h.v2.Timeout||en.type===h.v2.Cancelled)return{...ft};b.$.angularSupportEnabled&&ft.datasourceInstance?.components?.QueryCtrl&&ft.eventBridge.emit(y.ee.dataError,en)}if(!nn)return{...ft};if(b.$.angularSupportEnabled&&ft.datasourceInstance?.components?.QueryCtrl){const hn=dn.map(Fn=>(0,a.w3)(Fn));ft.eventBridge.emit(y.ee.dataReceived,hn)}return{...ft,queryResponse:_t,graphResult:Xt,tableResult:Vn,rawPrometheusResult:Wn,logsResult:ft.isLive&&En?{...En,rows:(0,ge.pg)(ft.clearedAtIndex,En.rows)}:En,showLogs:!!En,showMetrics:!!Xt,showTable:!!Vn?.length,showTrace:!!na.length,showNodeGraph:!!Bt.length,showRawPrometheus:!!mn.length,showFlameGraph:!!ln.length,showCustom:!!Dn?.length,clearedAtIndex:ft.isLive?ft.clearedAtIndex:null}}},9955:(Y,I,e)=>{"use strict";e.d(I,{Jr:()=>l,K6:()=>s,Qb:()=>n,pF:()=>o,qq:()=>i,st:()=>m,vC:()=>c});var t=e(1081);const n=u=>u.explore.panes,r=u=>u.explore,s=(0,t.Mz)(n,Object.entries),o=(0,t.Mz)(s,u=>u.length>1),m=(0,t.Mz)(s,u=>u.some(f=>f[1].correlationEditorHelperData!==void 0)),l=u=>(0,t.Mz)(n,f=>Object.keys(f)[0]===u),i=u=>(0,t.Mz)(n,f=>f[u]),c=(0,t.Mz)(r,u=>u.correlationEditorDetails)},89224:(Y,I,e)=>{"use strict";e.d(I,{$_:()=>T,GA:()=>p,GH:()=>g,Iy:()=>M,JA:()=>P,QP:()=>x,Xk:()=>S,eM:()=>a,hO:()=>v,iO:()=>C,ke:()=>O,zY:()=>b});var t=e(30038),n=e(47232),r=e(26272),s=e(39070),o=e(72574),m=e(11134),l=e(76412),i=e(28138),c=e(87490),u=e(80582),f=e(74856),d=e(91002),E=e(32901),h=e(29436),y=e(23994);const a=(0,t.VP)("explore/changeRange"),v=(0,t.VP)("explore/changeRefreshInterval"),g=A=>(R,B)=>{const{syncedTimes:U}=B().explore;U?Object.keys(B().explore.panes).forEach(F=>{R(P({...A,exploreId:F})),R((0,y.Od)({exploreId:F,preserveCache:!0}))}):(R(P({...A})),R((0,y.Od)({exploreId:A.exploreId,preserveCache:!0})))},b=A=>R=>{R((0,y.S6)({...A}))},P=A=>(R,B)=>{const{exploreId:U,absoluteRange:F,rawRange:K}=A,w=B().explore.panes[U],L=(0,E.O)(B().user),V=(0,E.q)(B().user),{range:N}=w;let z=N.raw;F&&(z={from:(0,n.oZ)(L,F.from),to:(0,n.oZ)(L,F.to)}),K&&(z=K);const J=(0,c.zq)(L,z,V),G={from:J.from.valueOf(),to:J.to.valueOf()};(0,f.jG)().init({timepicker:{},getTimezone:()=>L,timeRangeUpdated(H){},time:J.raw}),(0,o.w)().updateTimeRange(J),R(a({exploreId:U,range:J,absoluteRange:G}))};function C(A){return(R,B)=>{const U=B().explore.panes[A].range.raw;Object.keys(B().explore.panes).filter(K=>K!==A).forEach(K=>{R(g({exploreId:K,rawRange:U}))});const F=B().explore.syncedTimes;R((0,h.qz)({syncedTimes:!F}))}}function D(A){return(R,B)=>{const U=(0,E.O)(B().user),F=(0,E.q)(B().user);Object.entries(B().explore.panes).forEach(([K,w])=>{const L=(0,c.zq)(U,w.range.raw,F);A(K,w,L,R)})}}function T(){return D((A,R,B,U)=>{const F={from:B.from.valueOf(),to:B.to.valueOf()};U(g({exploreId:A,absoluteRange:F}))})}function M(A){return D((R,B,U,F)=>{const K=(0,u.Wb)(A,U);F(g({exploreId:R,absoluteRange:K}))})}function O(A){return D((R,B,U,F)=>{const K=(0,u.Zk)(U,A);F(g({exploreId:R,absoluteRange:K}))})}function S(){return(A,R)=>{const B=R().explore.panes[Object.keys(R().explore.panes)[0]].range.raw;navigator.clipboard.writeText(JSON.stringify(B)),i.A.emit(r.r1.alertSuccess,[(0,l.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}}function p(){return async(A,R)=>{const{range:B,isError:U}=await(0,u.zG)();if(U===!0){i.A.emit(r.r1.alertError,[(0,l.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,l.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:B})]);return}if(R().explore.syncedTimes){A(g({exploreId:Object.keys(R().explore.panes)[0],rawRange:B})),A(g({exploreId:Object.keys(R().explore.panes)[1],rawRange:B}));return}A(g({exploreId:Object.keys(R().explore.panes)[0],rawRange:B}))}}const x=(A,R)=>{if(v.match(R)){const{refreshInterval:B}=R.payload,U=m.cC.isLive(B),F=(0,c.uE)(B),K=(0,d.zy)(A.logsResult,F);return m.cC.isLive(A.refreshInterval)&&!U&&(0,c._u)(A.querySubscription),{...A,refreshInterval:B,queryResponse:{...A.queryResponse,state:U?s.Gu.Streaming:s.Gu.Done},isLive:U,isPaused:U?!1:A.isPaused,logsResult:K}}if(a.match(R)){const{range:B,absoluteRange:U}=R.payload;return{...A,range:B,absoluteRange:U}}return A}},34028:(Y,I,e)=>{"use strict";e.d(I,{BE:()=>C,HZ:()=>b,O2:()=>D,RA:()=>P,Z9:()=>O,aj:()=>A,dq:()=>x,eO:()=>M,kn:()=>a,ng:()=>g,pg:()=>p,rk:()=>T});var t=e(2543),n=e.n(t),r=e(39070),s=e(43127),o=e(85858),m=e(47232),l=e(19347),i=e(11401),c=e(81523),u=e(14678),f=e(33390),d=e(87490),E=e(31193),h=e(57288);const y=100,a={from:"now-1h",to:"now"},v="grafana.explore.style.graph",g=R=>{f.A.set(v,R)},b=R=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:a},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:P(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,h.Ez)(),panelsState:{},correlations:void 0,...R}),P=()=>({state:r.Gu.NotStarted,series:[],timeRange:(0,s.E2)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function C(R,B){let U;try{U=await(0,E.tR)().get(B)}catch{U=await(0,E.tR)().get()}if(U.init)try{U.init()}catch(L){console.error(L)}let F=[];const K=(0,i.tU)(),w=await K.getRichHistory({search:"",sortOrder:c.xB.Ascending,datasourceFilters:[U.name],starred:!1});if((w.total||0)>0&&w.richHistory.forEach(L=>{L.queries.forEach(V=>{F.push({ts:parseInt(L.id,10),query:V})})}),F.length<y){const L=await K.getRichHistory({search:"",sortOrder:c.xB.Ascending,datasourceFilters:[u.uv],starred:!1});(L.total||0)>0&&L.richHistory.forEach(V=>{V.queries.forEach(N=>{N?.datasource?.uid===U.uid&&F.push({ts:parseInt(V.id,10),query:N})})})}if(F.length<y){const L=`grafana.explore.history.${U.meta?.id}`;F=[...F,...f.A.getObject(L,[])]}return F.length>y&&(F.length=y),(0,d.dr)(R,U.uid),{history:F,instance:U}}function D(R){const B={from:R.from,to:R.to};return Object.entries(B).map(([F,K])=>`${encodeURIComponent(F)}=${encodeURIComponent(K.toString())}`).join("&")}function T(R,B){const U=D(B),F=R.findIndex(w=>w.key===U);return F>=0?R[F].value:void 0}function M(R,B){return{from:o.parse(R.from,!1,B),to:o.parse(R.to,!0,B),raw:R}}function O(R){let B=a,U={from:S(R.from),to:S(R.to)};return U.from!==null&&U.to!==null&&(B={from:U.from,to:U.to}),B}function S(R){if(R===null)return null;if((0,m.Ar)(R))return R;if(typeof R!="string")return null;const B=R;if(B.indexOf("now")!==-1)return B;if(B.length===8)return(0,m.yT)(B,"YYYYMMDD");if(B.length===15)return(0,m.yT)(B,"YYYYMMDDTHHmmss");if(B.length===19)return(0,m.yT)(B,"YYYY-MM-DD HH:mm:ss");if(B.match(/^\d+$/)){const F=parseInt(B,10);return(0,m.yT)(F)}const U=(0,m.yT)(B);return U.isValid()?U:null}const p=(R,B)=>B?R?B.slice(R+1):B:[],x=(R,B)=>R===u.uv?(0,t.uniq)(B.map(U=>U.datasource?.uid).filter(U=>!!U)):[R];async function A(R,B){const U=R.explore.panes[B].correlationEditorHelperData,F=R.explore.correlationEditorDetails?.editorMode||!1,K=Object.keys(R.explore.panes)[0]===B,w=F&&K,L=w?await(0,l.l)().get():void 0,V=F&&!K&&U!==void 0;let N={};return V&&U!==void 0&&Object.entries(U?.vars).forEach(z=>{N[z[0]]={value:z[1]}}),{defaultCorrelationEditorDatasource:L,scopedVars:N,showCorrelationEditorLinks:w}}},96192:(Y,I,e)=>{"use strict";e.d(I,{JQ:()=>C,O1:()=>T,QL:()=>b,YV:()=>g,_O:()=>S,eT:()=>P});var t=e(2543),n=e.n(t),r=e(96540),s=e(92461),o=e(91890),m=e(41987),l=e(6709),i=e(76885),c=e(72574),u=e(14110),f=e(16233),d=e(67023),E=e(6923),h=e(39590);const a=[p=>!p.internal||f.TP.hasAccessToExplore()],v="grafana_data_link_clicked",g=(p,x)=>R=>{const{field:B,dataLinkScopedVars:U,frame:F,link:K,linkModel:w}=R,{valueRowIndex:L}=R.config;if(!K.internal||L===void 0)return w;const V=b({field:B,rowIndex:L,splitOpenFn:p,range:x,vars:U,dataFrame:F,linksToProcess:[K]});return V.length?(0,t.first)(V):void 0},b=p=>{const{field:x,vars:A,splitOpenFn:R,range:B,rowIndex:U,dataFrame:F}=p,K={...A||{}};K.__value={value:{raw:x.values[U]},text:"Raw value"};let w;F&&(w=(0,s.F)({frame:F,rowIndex:U}),K.__data={value:{name:F.name,refId:F.refId,fields:w},text:"Data"},F.fields.forEach(V=>{w&&w[V.name]&&(K[V.name]={value:w[V.name]})}),K.__targetField={value:w[x.name]});const L=p.linksToProcess||x.config.links;return L?L.filter(z=>a.every(J=>J(z,K))).map(z=>{if(z.internal){let J={};z.internal?.transformations&&z.internal?.transformations.forEach(me=>{let k;me.field?k=F?.fields.find(X=>X.name===me.field)?.values[U]:k=x.values[U],J={...J,...(0,d.k)(me,k,x.name)}});const G={...K,...J},H=T(z,G);let q=[];if(H.variables.length===0){const me=x.name.toString();q.push({variableName:me,value:"",match:""})}else q=H.variables;const le=me=>{(0,u.rR)(v,{origin:z.origin||o.x0.Datasource,app:m.Jk.Explore,internal:!0}),R?.(me)};return H.allVariablesDefined?{...(0,l.u)({link:z,internalLink:z.internal,scopedVars:G,range:B,field:x,onClickFn:p.splitOpenFn?k=>le(k):void 0,replaceVariables:(0,c.w)().replace.bind((0,c.w)())}),variables:q}:void 0}else{const J=(H,q)=>(0,c.w)().replace(H,{...q,...K}),G=(0,E.mQ)().getDataLinkUIModel(z,J,x);return G.title||(G.title=P(G.href)),G}}).filter(z=>!!z):[]};function P(p){p.indexOf("://")<0&&(p=`http://${p}`);let x;try{x=new URL(p).hostname}catch{x=p}return x}function C(p,x){return(0,r.useCallback)((A,R)=>A.fields.flatMap(B=>B.config?.links&&B.config?.links.length?b({field:B,rowIndex:R,range:p,dataFrame:A,splitOpenFn:x}):[]),[p,x])}const D=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function T(p,x){let A=[];return(0,c.w)().replace.bind((0,c.w)())(M(p),x,void 0,A),A=(0,t.uniqBy)(A,"variableName"),{variables:A,allVariablesDefined:A.filter(B=>!D.includes(B.variableName)).every(B=>B.found)}}function M(p){let x="",A;for(A in p)typeof p[A]=="string"?x+=" "+p[A]:typeof p[A]=="object"&&(x+=" "+M(p[A]));return x}const O=p=>p[1]!==void 0,S=p=>{const x=Object.entries(p).filter(O).map(([A,R])=>{const B=(0,h.m)(R);return B.range={to:R.range.to.valueOf().toString(),from:R.range.from.valueOf().toString()},[A,B]}).reduce((A,[R,B])=>({...A,[R]:B}),{});return i.kM.renderUrl("/explore",{schemaVersion:1,panes:JSON.stringify(x)})}},27649:(Y,I,e)=>{"use strict";e.d(I,{v:()=>n});var t=e(21969);function n(r){const s=new Set(r.map(o=>o.refId).filter(Boolean));return s.size===r.length?r:(s.clear(),r.map(o=>{if(o.refId&&!s.has(o.refId))return s.add(o.refId),o;const m=(0,t.W3)(r);return s.add(m),{...o,refId:m}}))}},57288:(Y,I,e)=>{"use strict";e.d(I,{Ez:()=>h,Oi:()=>E,Pm:()=>v,VW:()=>f});var t=e(2543),n=e.n(t),r=e(88483),s=e(44240),o=e(6276),m=e(29405),l=e(9557),i=e(39070),c=e(33390),u=e(69147);const f=[l.cF.LogsVolume,l.cF.LogsSample],d=g=>`grafana.explore.logs.enable${g}`,E=(g,b)=>{c.A.set(d(b),g?"true":"false")},h=()=>{let g={[l.cF.LogsVolume]:{enabled:!0},[l.cF.LogsSample]:{enabled:!1}};for(const b of f){if(b===l.cF.LogsSample)continue;c.A.get(d(b))==="false"&&(g[b]={enabled:!1})}return g},y=(g,b,P)=>new r.c(C=>g.subscribe(D=>{if(D.logsResult&&D.logsResult.rows&&D.logsResult.visibleRange&&D.logsResult.bucketSize!==void 0&&D.state===i.Gu.Done){const T=D.logsResult.bucketSize,M=b.map(p=>p.refId),O=(0,t.groupBy)(D.logsResult.rows,"dataFrame.refId");let S=[];M.forEach(p=>{if(O[p]?.length){const x=(0,u.J9)(O[p],T);S=[...S,...x];const A={logsVolumeType:l.Aj.Limited,absoluteRange:D.logsResult?.visibleRange,datasourceName:P,sourceQuery:b.find(R=>R.refId===p)};C.next({data:S.map(R=>{const B=R.meta?.custom||{};return{...R,meta:{custom:{...B,...A}}}}),state:D.state})}}),C.complete()}})),a=(g,b,P,C)=>{if(g===l.cF.LogsVolume)return y(b,P,C)},v=(g,b,P,C)=>{const T=g.map(({datasource:M,targets:O},S)=>{const p=(0,t.cloneDeep)(P);if(p.requestId=`${p.requestId||""}_${S}`,p.targets=O,(0,l.Nc)(M,b)){if(M.getDataProvider)return M.getDataProvider(b,p);if(M.getSupplementaryRequest){const x=M.getSupplementaryRequest(b,p);return x?b===l.cF.LogsVolume?(0,u.sg)(M,x,{targets:p.targets}):(0,u.Wr)(M,x):void 0}else return}else return a(b,C,O,M.name)}).filter(i.zz);if(T.length!==0)return T.length===1?T[0]:(0,s.h)(...T).pipe((0,m.S)((M,O)=>M.errors&&M.errors.length||O.state===i.Gu.NotStarted?M:O.state===i.Gu.Loading&&M.state===i.Gu.NotStarted?{...M,state:i.Gu.Loading}:O.state&&O.state!==i.Gu.Done?M:{...M,data:[...M.data,...O.data],state:i.Gu.Done},{data:[],state:i.Gu.NotStarted}),(0,o.d)())}},53478:(Y,I,e)=>{"use strict";e.d(I,{Ex:()=>T,$i:()=>D});var t=e(65474),n=e(69862),r=e(43429),s=e(26657),o=e(72574),m=e(19347),l=e(96540),i=e(14186),c=e(88323),u=e(98808),f=e(71680),d=e(1712),E=e(34263),h=e(18225),y=e(76658),a=e(66718),v=e(76942);const g=15;function b(){const M=(0,l.useRef)({}),O=(0,l.useCallback)(p=>{switch(p){case a.Tz.math:case a.Tz.reduce:case a.Tz.resample:case a.Tz.threshold:case a.Tz.sql:return M.current[p];case a.Tz.classic:return}},[]),S=(0,l.useCallback)((p,x)=>{switch(p){case a.Tz.math:M.current.math=x;break;case a.Tz.reduce:case a.Tz.resample:case a.Tz.resample:M.current.reduce=x,M.current.resample=x,M.current.threshold=x;break;case a.Tz.sql:M.current.sql=x}},[]);return{getCachedExpression:O,setCachedExpression:S}}function P(M){const{query:O,queries:S,onRunQuery:p,onChange:x}=M,{getCachedExpression:A,setCachedExpression:R}=b();(0,l.useEffect)(()=>{R(O.type,O.expression)},[O.expression,O.type,R]);const B=(0,l.useCallback)(K=>{const w=A(K.value),L=(0,v.r)({...O,type:K.value});x({...L,expression:w??L.expression})},[O,x,A]),U=()=>{const K=S.filter(w=>O.refId!==w.refId).map(w=>({value:w.refId,label:w.refId}));switch(O.type){case a.Tz.math:return l.createElement(f.z,{onChange:x,query:O,labelWidth:g,onRunQuery:p});case a.Tz.reduce:return l.createElement(d.Z,{refIds:K,onChange:x,labelWidth:g,query:O});case a.Tz.resample:return l.createElement(E.C,{query:O,labelWidth:g,onChange:x,refIds:K});case a.Tz.classic:return l.createElement(u.z,{onChange:x,query:O,refIds:K});case a.Tz.threshold:return l.createElement(y.O,{onChange:x,query:O,labelWidth:g,refIds:K});case a.Tz.sql:return l.createElement(h.k,{onChange:x,query:O,refIds:K})}},F=a.uQ.find(K=>K.value===O.type);return l.createElement("div",null,l.createElement(i.I,{label:"Operation",labelWidth:g},l.createElement(c.l6,{options:a.uQ,value:F,onChange:B,width:25})),U())}class C extends s.iy{constructor(O){super(O),this.instanceSettings=O}applyTemplateVariables(O,S){const p=(0,o.w)();return{...O,expression:p.replace(O.expression,S),window:p.replace(O.window,S)}}getCollapsedText(O){return`Expression: ${O.type}`}query(O){let S=O.targets.map(async x=>{const A=await(0,m.l)().get(x.datasource);return A.interpolateVariablesInQueries?A?.interpolateVariablesInQueries([x],O.scopedVars,O.filters)[0]:x});return(0,t.H)(Promise.all(S)).pipe((0,n.Z)(x=>super.query({...O,targets:x})))}newQuery(O){return{refId:"--",datasource:s.dR,type:O?.type??a.Tz.math,...O}}}const D={id:-100,uid:a.Uj,name:s.dR.name,type:s.dR.type,access:"proxy",meta:{baseUrl:"",module:"",type:r.QE.datasource,name:s.dR.type,id:s.dR.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},T=new C(D);T.meta={id:s.dR.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},T.components={QueryEditor:P}},98808:(Y,I,e)=>{"use strict";e.d(I,{z:()=>b});var t=e(96540),n=e(39268),r=e(14186),s=e(55852),o=e(14578),m=e(76942),l=e(32196),i=e(40845),c=e(67061),u=e(9261),f=e(88323),d=e(10354),E=e(55907);const h=E.A.reducerTypes.map(P=>({label:P.text,value:P.value})),y=E.A.evalOperators.map(P=>({label:P.text,value:P.value})),a=E.A.evalFunctions.map(P=>({label:P.text,value:P.value})),v=({condition:P,index:C,onChange:D,onRemoveCondition:T,refIds:M})=>{const O=(0,i.of)(g),S=F=>{D({...P,operator:{type:F.value}})},p=F=>{D({...P,reducer:{type:F.value,params:[]}})},x=F=>{D({...P,query:{params:[F.value]}})},A=F=>{D({...P,evaluator:{params:P.evaluator.params,type:F.value}})},R=(F,K)=>{const w=parseFloat(F.currentTarget.value),L=[...P.evaluator.params];L[K]=w,D({...P,evaluator:{...P.evaluator,params:L}})},B=(0,l.css)`
    width: 60px;
  `,U=P.evaluator.type===E.p.IsWithinRange||P.evaluator.type===E.p.IsOutsideRange;return t.createElement(c.B,null,t.createElement("div",{style:{flex:1}},t.createElement(n.C,null,C===0?t.createElement("div",{className:(0,l.cx)(O.button,B)},"WHEN"):t.createElement(u.f,{className:(0,l.cx)(O.buttonSelectText,B),options:y,onChange:S,value:y.find(F=>F.value===P.operator.type)}),t.createElement(f.l6,{options:h,onChange:p,width:20,value:h.find(F=>F.value===P.reducer.type)}),t.createElement("div",{className:O.button},"OF"),t.createElement(f.l6,{onChange:x,options:M,width:"auto",value:M.find(F=>F.value===P.query.params[0])})),t.createElement(n.C,null,t.createElement(u.f,{className:O.buttonSelectText,options:a,onChange:A,value:a.find(F=>F.value===P.evaluator.type)}),U?t.createElement(t.Fragment,null,t.createElement(d.p,{type:"number",width:10,onChange:F=>R(F,0),value:P.evaluator.params[0]}),t.createElement("div",{className:O.button},"TO"),t.createElement(d.p,{type:"number",width:10,onChange:F=>R(F,1),value:P.evaluator.params[1]})):P.evaluator.type!==E.p.HasNoValue?t.createElement(d.p,{type:"number",width:10,onChange:F=>R(F,0),value:P.evaluator.params[0]}):null)),t.createElement(s.$n,{variant:"secondary",type:"button",onClick:()=>T(C)},t.createElement(o.I,{name:"trash-alt"})))},g=P=>{const C=(0,l.css)`
    color: ${P.colors.primary.text};
    font-size: ${P.typography.bodySmall.fontSize};
  `;return{buttonSelectText:C,button:(0,l.cx)((0,l.css)`
        display: flex;
        align-items: center;
        border-radius: ${P.shape.radius.default};
        font-weight: ${P.typography.fontWeightMedium};
        border: 1px solid ${P.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${P.spacing(1)};
        background-color: ${P.colors.background.canvas};
      `,C)}},b=({onChange:P,query:C,refIds:D})=>{const T=(S,p)=>{C.conditions&&P({...C,conditions:[...C.conditions.slice(0,p),S,...C.conditions.slice(p+1)]})},M=()=>{if(C.conditions){const S=C.conditions.at(-1)?.query?.params??[],p={...m.P,query:{params:S}};P({...C,conditions:C.conditions.length>0?[...C.conditions,p]:[p]})}},O=S=>{if(C.conditions){const p=C.conditions[S],x=C.conditions.filter(A=>A!==p).map((A,R)=>R===0?{...A,operator:{type:"when"}}:A);P({...C,conditions:x})}};return t.createElement("div",null,t.createElement(n.C,null,t.createElement(r.I,{label:"Conditions",labelWidth:14},t.createElement("div",null,C.conditions?.map((S,p)=>{if(S)return t.createElement(v,{key:p,index:p,condition:S,onChange:x=>T(x,p),onRemoveCondition:O,refIds:D})})))),t.createElement(s.$n,{variant:"secondary",type:"button",onClick:M},t.createElement(o.I,{name:"plus-circle"})))}},71680:(Y,I,e)=>{"use strict";e.d(I,{z:()=>f});var t=e(32196),n=e(96540),r=e(40845),s=e(67061),o=e(14186),m=e(76892),l=e(60782),i=e(14578),c=e(21744);const u="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",f=({labelWidth:y,onChange:a,query:v,onRunQuery:g})=>{const b=D=>{a({...v,expression:D.target.value})},P=(0,r.of)(E),C=()=>{v.expression&&g()};return n.createElement(s.B,null,n.createElement(o.I,{label:n.createElement(m.c,{width:"auto"},n.createElement(l.G,{fitContent:!0,content:n.createElement("div",{className:P.documentationContainer},n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:P.documentationHeader},"Available Math functions"),n.createElement("div",{className:P.documentationFunctions},n.createElement(d,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(d,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(d,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(d,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(d,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(d,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(d,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))),title:n.createElement(s.B,{gap:1,direction:"row"},n.createElement(i.I,{name:"book-open"})," Math operator"),footer:n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:P.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(i.I,{size:"xs",name:"external-link-alt"})," Math expressions"),"."),closeButton:!0,placement:"bottom-start"},n.createElement("div",{className:P.info},"Expression ",n.createElement(i.I,{name:"info-circle"})))),labelWidth:y,grow:!0,shrink:!0},n.createElement(c.f,{value:v.expression,onChange:b,rows:1,placeholder:u,onBlur:C,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},d=({name:y,description:a})=>{const v=(0,r.of)(h);return n.createElement(n.Fragment,null,n.createElement("span",{className:v.name},y),n.createElement("span",{className:v.description},a))},E=y=>({documentationHeader:(0,t.css)`
    font-size: ${y.typography.h5.fontSize};
    font-weight: ${y.typography.h5.fontWeight};
  `,documentationLink:(0,t.css)`
    color: ${y.colors.text.link};
  `,documentationContainer:(0,t.css)`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${y.spacing(2)};

    padding: ${y.spacing(1)} ${y.spacing(2)};
  `,documentationFunctions:(0,t.css)`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${y.spacing(2)};
  `,info:(0,t.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: pointer;
    gap: ${y.spacing(1)};
  `}),h=y=>({name:(0,t.css)`
    font-weight: ${y.typography.fontWeightBold};
  `,description:(0,t.css)`
    font-size: ${y.typography.bodySmall.fontSize};
    color: ${y.colors.text.disabled};
  `})},1712:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>l});var t=e(96540),n=e(14186),r=e(10354),s=e(39268),o=e(88323),m=e(66718);const l=({labelWidth:i="auto",onChange:c,refIds:u,query:f})=>{const d=m.Cu.find(P=>P.value===f.reducer),E=P=>{c({...f,expression:P.value})},h=P=>{c({...f,reducer:P.value})},y=P=>{c({...f,settings:P})},a=P=>{let C;switch(P.value){case m.Mt.ReplaceNonNumbers:let D=0;f.settings?.mode===m.Mt.ReplaceNonNumbers&&(D=f.settings?.replaceWithValue??0),C={mode:m.Mt.ReplaceNonNumbers,replaceWithValue:D};break;default:C={mode:P.value}}y(C)},v=P=>{const C=P.currentTarget.valueAsNumber;y({mode:m.Mt.ReplaceNonNumbers,replaceWithValue:C??0})},g=f.settings?.mode??m.Mt.Strict,b=()=>{if(g===m.Mt.ReplaceNonNumbers)return t.createElement(n.I,{label:"Replace With",labelWidth:i},t.createElement(r.p,{type:"number",width:10,onChange:v,value:f.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.C,null,t.createElement(n.I,{label:"Input",labelWidth:i},t.createElement(o.l6,{onChange:E,options:u,value:f.expression,width:"auto"}))),t.createElement(s.C,null,t.createElement(n.I,{label:"Function",labelWidth:i},t.createElement(o.l6,{options:m.Cu,value:d,onChange:h,width:20})),t.createElement(n.I,{label:"Mode",labelWidth:i},t.createElement(o.l6,{onChange:a,options:m.HZ,value:g,width:25})),b()))}},34263:(Y,I,e)=>{"use strict";e.d(I,{C:()=>l});var t=e(96540),n=e(39268),r=e(14186),s=e(88323),o=e(10354),m=e(66718);const l=({labelWidth:i="auto",onChange:c,refIds:u,query:f})=>{const d=m.PN.find(g=>g.value===f.downsampler),E=m.iX.find(g=>g.value===f.upsampler),h=g=>{c({...f,window:g.target.value})},y=g=>{c({...f,expression:g.value})},a=g=>{c({...f,downsampler:g.value})},v=g=>{c({...f,upsampler:g.value})};return t.createElement(t.Fragment,null,t.createElement(n.C,null,t.createElement(r.I,{label:"Input",labelWidth:i},t.createElement(s.l6,{onChange:y,options:u,value:f.expression,width:20}))),t.createElement(n.C,null,t.createElement(r.I,{label:"Resample to",labelWidth:i,tooltip:"10s, 1m, 30m, 1h"},t.createElement(o.p,{onChange:h,value:f.window,width:15})),t.createElement(r.I,{label:"Downsample"},t.createElement(s.l6,{options:m.PN,value:d,onChange:a,width:25})),t.createElement(r.I,{label:"Upsample"},t.createElement(s.l6,{options:m.iX,value:E,onChange:v,width:25}))))}},18225:(Y,I,e)=>{"use strict";e.d(I,{k:()=>r});var t=e(96540),n=e(6867);const r=({onChange:s,refIds:o,query:m})=>{const i=`select * from ${(0,t.useMemo)(()=>o.map(u=>u.value),[o])[0]} limit 1`,c=u=>{s({...m,expression:u})};return t.createElement(n.Y,{query:m.expression||i,onChange:c})}},76658:(Y,I,e)=>{"use strict";e.d(I,{O:()=>O});var t=e(32196),n=e(96540),r=e(46819),s=e(40845),o=e(39268),m=e(14186),l=e(88323),i=e(9261),c=e(10354),u=e(15292),f=e(2913),d=e(55907),E=e(66718),h=e(30038);const y=(0,h.VP)("thresold/updateRefId"),a=(0,h.VP)("thresold/updateThresholdType"),v=(0,h.VP)("thresold/updateThresholdParams"),g=(0,h.VP)("thresold/updateHysteresis"),b=(0,h.VP)("thresold/updateUnloadParams"),P=(0,h.vy)({type:E.Tz.threshold,refId:"",conditions:[]},x=>{x.addCase(y,(A,R)=>{A.expression=R.payload}),x.addCase(a,(A,R)=>{const B=R.payload.evalFunction,U=R.payload.onError;if(A.conditions[0].evaluator.type=B,!!A.conditions[0].unloadEvaluator){const K=C(A.conditions[0].evaluator.type);U&&U(void 0),A.conditions[0].evaluator.type=B;const w={type:K,params:A.conditions[0].evaluator?.params??[0,0]};A.conditions[0].unloadEvaluator=w}}),x.addCase(v,(A,R)=>{const{param:B,index:U}=R.payload;A.conditions[0].evaluator.params[U]=B}),x.addCase(g,(A,R)=>{const{hysteresisChecked:B,onError:U}=R.payload;B?A.conditions[0].unloadEvaluator={type:C(A.conditions[0].evaluator.type),params:A.conditions[0].evaluator?.params??[0,0]}:(A.conditions[0].unloadEvaluator=void 0,U&&U(void 0))}),x.addCase(b,(A,R)=>{const{param:B,index:U,onError:F}=R.payload;A.conditions[0].unloadEvaluator?A.conditions[0].unloadEvaluator.params[U]=B:A.conditions[0].unloadEvaluator={type:C(A.conditions[0].evaluator.type),params:A.conditions[0].evaluator?.params??[0,0]};const K=D(A.conditions[0]),{errorMsg:w,errorMsgFrom:L,errorMsgTo:V}=K??{};F&&F(w||L||V)})});function C(x){return x===d.p.IsAbove?d.p.IsBelow:x===d.p.IsBelow?d.p.IsAbove:x===d.p.IsWithinRange?d.p.IsOutsideRange:x===d.p.IsOutsideRange?d.p.IsWithinRange:d.p.IsBelow}function D(x){const{unloadEvaluator:A,evaluator:R}=x;if(!R)return;if(A?.params[0]===void 0||Number.isNaN(A?.params[0]))return{errorMsg:"This value cannot be empty"};const{type:B,params:U}=R,{params:F}=A;if(B===d.p.IsWithinRange||B===d.p.IsOutsideRange){if(F[0]===void 0||Number.isNaN(F[0]))return{errorMsgFrom:"This value cannot be empty"};if(F[1]===void 0||Number.isNaN(F[1]))return{errorMsgTo:"This value cannot be empty"}}const[K,w]=A.params,[L,V]=U;switch(B){case d.p.IsAbove:if(K>L)return{errorMsg:`Enter a number less than or equal to ${L}`};break;case d.p.IsBelow:if(K<L)return{errorMsg:`Enter a number more than or equal to ${L}`};break;case d.p.IsOutsideRange:if(K<L)return{errorMsgFrom:`Enter a number more than or equal to ${L}`};if(w>V)return{errorMsgTo:`Enter a number less than or equal to ${V}`};break;case d.p.IsWithinRange:if(K>L)return{errorMsgFrom:`Enter a number less than or equal to ${L}`};if(w<V)return{errorMsgTo:`Enter a number be more than or equal to ${V}`};break;default:throw new Error(`evaluator function type ${B} not supported.`)}}const T=d.p.IsAbove,M={type:"query",evaluator:{type:T,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},O=({labelWidth:x,onChange:A,refIds:R,query:B,onError:U,useHysteresis:F=!1})=>{const K=(0,s.of)(p),w={...B,conditions:B.conditions?.length?B.conditions:[M]},[L,V]=(0,n.useReducer)(P,w),N=L.conditions[0],z=E.zd.find(k=>k.value===L.conditions[0].evaluator?.type),J=k=>{V(y(k.value))};(0,n.useEffect)(()=>{L&&A(L)},[L]);const G=k=>{V(a({evalFunction:k.value??T,onError:U}))},H=(k,ee)=>{V(v({param:parseFloat(k.currentTarget.value),index:ee}))},q=N.evaluator.type===d.p.IsWithinRange||N.evaluator.type===d.p.IsOutsideRange,le=!!f.config.featureToggles?.recoveryThreshold&&F;return n.createElement(n.Fragment,null,n.createElement(o.C,null,n.createElement(m.I,{label:"Input",labelWidth:x},n.createElement(l.l6,{onChange:J,options:R,value:B.expression,width:20}))),n.createElement(o.C,null,n.createElement(i.f,{className:K.buttonSelectText,options:E.zd,onChange:G,value:z}),q?n.createElement(n.Fragment,null,n.createElement(c.p,{type:"number",width:10,onChange:k=>H(k,0),defaultValue:N.evaluator.params[0]}),n.createElement("div",{className:K.button},"TO"),n.createElement(c.p,{type:"number",width:10,onChange:k=>H(k,1),defaultValue:N.evaluator.params[1]})):n.createElement(c.p,{type:"number",width:10,onChange:k=>H(k,0),defaultValue:N.evaluator.params[0]||0})),le&&n.createElement(me,{isRange:q,onError:U}));function me({isRange:k,onError:ee}){const X=!!N.unloadEvaluator,j=oe=>{V(g({hysteresisChecked:oe.currentTarget.checked,onError:ee})),ne.current=!0},ne=n.useRef(!0),te=()=>{ne.current=!1};return n.createElement("div",{className:K.hysteresis},n.createElement("div",{onMouseDown:te},n.createElement(u.K,{showLabel:!0,label:"Custom recovery threshold",value:X,onChange:j,className:K.switch})),X&&n.createElement(S,{isRange:k,condition:N,onError:ee,dispatch:V,allowOnblur:ne}))}};function S({isRange:x,condition:A,onError:R,dispatch:B,allowOnblur:U}){const F=(0,s.of)(p),K=(G,H)=>{const q=parseFloat(G.currentTarget.value);B(b({param:q,index:H,onError:R}))},w=D(A),{errorMsg:L,errorMsgFrom:V,errorMsgTo:N}=w??{};if(x)return n.createElement(z,{allowOnblur:U});return n.createElement(J,{allowOnblur:U});function z({allowOnblur:G}){return A.evaluator.type===d.p.IsWithinRange?n.createElement(o.C,{className:F.hysteresis},n.createElement(m.I,{label:"Stop alerting when outside range",labelWidth:"auto"},n.createElement(r.B,{direction:"row",gap:0},n.createElement("div",{className:F.range},n.createElement(m.I,{invalid:!!V,error:V,className:F.noMargin},n.createElement(c.p,{type:"number",width:10,onBlur:H=>G.current&&K(H,0),defaultValue:A.unloadEvaluator?.params[0]}))),n.createElement("div",{className:F.button},"TO"),n.createElement("div",{className:F.range},n.createElement(m.I,{invalid:!!N,error:N},n.createElement(c.p,{type:"number",width:10,onBlur:H=>G.current&&K(H,1),defaultValue:A.unloadEvaluator?.params[1]})))))):n.createElement(o.C,{className:F.hysteresis},n.createElement(m.I,{label:"Stop alerting when inside range",labelWidth:"auto"},n.createElement(r.B,{direction:"row",gap:0},n.createElement("div",{className:F.range},n.createElement(m.I,{invalid:!!V,error:V},n.createElement(c.p,{type:"number",width:10,onBlur:H=>G.current&&K(H,0),defaultValue:A.unloadEvaluator?.params[0]}))),n.createElement("div",{className:F.button},"TO"),n.createElement("div",{className:F.range},n.createElement(m.I,{invalid:!!N,error:N},n.createElement(c.p,{type:"number",width:10,onBlur:H=>G.current&&K(H,1),defaultValue:A.unloadEvaluator?.params[1]}))))))}function J({allowOnblur:G}){return A.evaluator.type===d.p.IsAbove?n.createElement(o.C,{className:F.hysteresis},n.createElement(m.I,{label:"Stop alerting when below",labelWidth:"auto",invalid:!!L,error:L},n.createElement(c.p,{type:"number",width:10,onBlur:H=>{G.current&&K(H,0)},defaultValue:A.unloadEvaluator?.params[0]}))):n.createElement(o.C,{className:F.hysteresis},n.createElement(m.I,{label:"Stop alerting when above",labelWidth:"auto",invalid:!!L,error:L},n.createElement(c.p,{type:"number",width:10,onBlur:H=>{G.current&&K(H,0)},defaultValue:A.unloadEvaluator?.params[0]})))}}const p=x=>({buttonSelectText:(0,t.css)({color:x.colors.primary.text,fontSize:x.typography.bodySmall.fontSize,textTransform:"uppercase",padding:`0 ${x.spacing(1)}`}),button:(0,t.css)({height:"32px",color:x.colors.primary.text,fontSize:x.typography.bodySmall.fontSize,textTransform:"uppercase",display:"flex",alignItems:"center",borderRadius:x.shape.radius.default,fontWeight:x.typography.fontWeightBold,border:`1px solid ${x.colors.border.medium}`,whiteSpace:"nowrap",padding:`0 ${x.spacing(1)}`,backgroundColor:x.colors.background.primary}),range:(0,t.css)({width:"min-content"}),hysteresis:(0,t.css)({marginTop:x.spacing(2)}),switch:(0,t.css)({paddingLeft:x.spacing(1)}),noMargin:(0,t.css)({margin:0})})},69437:(Y,I,e)=>{"use strict";e.d(I,{f:()=>r});var t=e(26657),n=e(66718);const r=s=>{if(!s)return!1;if((0,t.s9)(s.datasource))return!0;const o=s;return typeof o.type!="string"?!1:Object.values(n.Tz).includes(o.type)}},66718:(Y,I,e)=>{"use strict";e.d(I,{Cu:()=>i,HZ:()=>u,Mt:()=>c,NI:()=>m,PN:()=>f,Tz:()=>o,Uj:()=>s,iX:()=>d,uQ:()=>l,zd:()=>E});var t=e(75059),n=e(2913),r=e(55907);const s="__expr__";var o=(h=>(h.math="math",h.reduce="reduce",h.resample="resample",h.classic="classic_conditions",h.threshold="threshold",h.sql="sql",h))(o||{});const m=h=>{switch(h){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition (legacy)";case"threshold":return"Threshold";case"sql":return"SQL"}},l=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition (legacy)",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."},{value:"sql",label:"SQL",description:"Transform data using SQL. Supports Aggregate/Analytics functions from DuckDB"}].filter(h=>h.value==="sql"?n.config.featureToggles?.sqlExpressions:!0),i=[{value:t.gy.min,label:"Min",description:"Get the minimum value"},{value:t.gy.max,label:"Max",description:"Get the maximum value"},{value:t.gy.mean,label:"Mean",description:"Get the average value"},{value:t.gy.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gy.count,label:"Count",description:"Get the number of values"},{value:t.gy.last,label:"Last",description:"Get the last value"}];var c=(h=>(h.Strict="",h.ReplaceNonNumbers="replaceNN",h.DropNonNumbers="dropNN",h))(c||{});const u=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],f=[{value:t.gy.last,label:"Last",description:"Fill with the last value"},{value:t.gy.min,label:"Min",description:"Fill with the minimum value"},{value:t.gy.max,label:"Max",description:"Fill with the maximum value"},{value:t.gy.mean,label:"Mean",description:"Fill with the average value"},{value:t.gy.sum,label:"Sum",description:"Fill with the sum of all values"}],d=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],E=[{value:r.p.IsAbove,label:"Is above"},{value:r.p.IsBelow,label:"Is below"},{value:r.p.IsWithinRange,label:"Is within range"},{value:r.p.IsOutsideRange,label:"Is outside range"}]},76942:(Y,I,e)=>{"use strict";e.d(I,{P:()=>o,r:()=>s});var t=e(75059),n=e(55907),r=e(66718);const s=m=>{switch(m.type){case r.Tz.reduce:m.reducer||(m.reducer=t.gy.mean);break;case r.Tz.resample:m.downsampler||(m.downsampler=t.gy.mean),m.upsampler||(m.upsampler="fillna"),m.reducer=void 0;break;case r.Tz.math:m.expression=void 0;break;case r.Tz.classic:m.conditions||(m.conditions=[o]);break;default:m.reducer=void 0}return m},o={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.p.IsAbove}}},71101:(Y,I,e)=>{"use strict";e.d(I,{Cg:()=>l,Fk:()=>c,R4:()=>d,Rj:()=>m,pq:()=>i});var t=e(32264),n=e(44836),r=e(16233),s=e(36689),o=e(31678);const m="manage-folder",l=h=>`folder-dashboards-${h}`,i=h=>`folder-library-panels-${h}`,c=h=>`folder-alerting-${h}`,u=h=>`folder-permissions-${h}`,f=h=>`folder-settings-${h}`;function d(h,y=h.parents){const a={icon:"folder",id:m,subTitle:(0,s.o)("manage-folder"),url:h.url,text:h.title,children:[{active:!1,icon:"apps",id:l(h.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.dashboards","Dashboards"),url:h.url}]};if(y&&y.length>0){const v=y[y.length-1],g=y.slice(0,y.length-1);a.parentItem=d(v,g)}return a.children.push({active:!1,icon:"library-panel",id:i(h.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.panels","Panels"),url:`${h.url}/library-panels`}),r.TP.hasPermission(o.AccessControlAction.AlertingRuleRead)&&t.$.unifiedAlertingEnabled&&a.children.push({active:!1,icon:"bell",id:c(h.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.alert-rules","Alert rules"),url:`${h.url}/alerting`}),a}function E(h){const y=d({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return y.children[h].active=!0,{main:y,node:y.children[h]}}},54650:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>c,jl:()=>m});var t=e(30038),n=e(55314);const r={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1},s=(u,f)=>({...u,...f.payload,hasChanged:!1}),o=(0,t.Z0)({name:"folder",initialState:r,reducers:{loadFolder:s,setFolderTitle:(u,f)=>({...u,title:f.payload,hasChanged:f.payload.trim().length>0})},extraReducers:u=>{u.addMatcher(n.vZ.getFolder.matchFulfilled,s)}}),{loadFolder:m,setFolderTitle:l}=o.actions,c={folder:o.reducer}},84350:(Y,I,e)=>{"use strict";e.d(I,{G:()=>i});var t=e(32196),n=e(96540),r=e(40845),s=e(88323),o=e(42418),m=e(67140);const l=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:m.fx},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],i=({value:u,onChange:f,context:d,item:E})=>{const h=(0,r.of)(c),[y,a]=(0,n.useState)(),v=E.settings;(0,n.useEffect)(()=>{async function P(){const C=await(0,m.q3)(u);a(C)}P()},[u,a]);const{current:g,options:b}=(0,n.useMemo)(()=>{let P=v?.options?[...v.options]:[...l],C=P?.find(D=>D.value===y?.path);return!C&&y&&(C={label:y.path,value:y.path},P.push(C)),{options:P,current:C}},[y,v?.options]);return n.createElement(n.Fragment,null,n.createElement(s.l6,{value:g,options:b,onChange:P=>f(P.value),allowCustomValue:!0,formatCreateLabel:P=>`Load from URL: ${P}`}),y&&n.createElement(n.Fragment,null,y.error&&n.createElement(o.F,{title:y.error,severity:"warning"}),y.count&&n.createElement("div",{className:h.keys},n.createElement("b",null,"(",y.count,")"),y.examples(10).map(P=>n.createElement("span",{key:P},P,",")),y.count>10&&" ...")))},c=()=>({keys:(0,t.css)`
    margin-top: 4px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;

    > span {
      margin-left: 4px;
    }
  `})},61983:(Y,I,e)=>{"use strict";e.d(I,{G:()=>v});var t=e(11261),n=e(52622),r=e(84350),s=e(32196),o=e(96540),m=e(13544),l=e(40845),i=e(42418),c=e(14578),u=e(88323),f=e(66864),d=e(31484);const E=[{value:n.aG.Auto,label:"Auto",ariaLabel:m.Tp.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.aG.Coords,label:"Coords",ariaLabel:m.Tp.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.aG.Geohash,label:"Geohash",ariaLabel:m.Tp.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.aG.Lookup,label:"Lookup",ariaLabel:m.Tp.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],h="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",y=({value:g,onChange:b,context:P,item:C})=>{const[D,T]=(0,o.useState)();(0,o.useEffect)(()=>{C.settings?.source&&C.settings?.data?.length&&C.settings.data[0]&&(0,d.nE)(C.settings.source).then(S=>{C.settings&&C.settings.data&&T((0,d.FM)(C.settings.data[0],S))})},[C.settings]);const M=(0,l.of)(a),O=()=>{if(D){if(D.warning)return o.createElement(i.F,{title:D.warning,severity:"warning",buttonContent:o.createElement(c.I,{name:"question-circle",size:"xl"}),className:M.alert,onRemove:()=>{const S=window.open(h,"_blank","noopener,noreferrer");S&&(S.opener=null)}});if(g===n.aG.Auto&&D.description)return o.createElement("span",null,D.description)}return null};return o.createElement(o.Fragment,null,o.createElement(u.l6,{options:E,value:g,onChange:S=>{b(S.value)}}),o.createElement(f.Gy,{className:M.hGroup},O()))},a=g=>({alert:(0,s.css)`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:(0,s.css)`
      & div {
        width: 100%;
      }
    `});function v(g,b,P,C,D){switch(P.addCustomEditor({id:"modeEditor",path:`${b}mode`,name:"Location Mode",editor:y,settings:{data:D,source:C}}),C?.mode){case n.aG.Coords:P.addFieldNamePicker({path:`${b}latitude`,name:"Latitude field",settings:{filter:T=>T.type===t.PU.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${b}longitude`,name:"Longitude field",settings:{filter:T=>T.type===t.PU.number,noFieldsMessage:"No numeric fields found"}});break;case n.aG.Geohash:P.addFieldNamePicker({path:`${b}geohash`,name:"Geohash field",settings:{filter:T=>T.type===t.PU.string,noFieldsMessage:"No strings fields found"}});break;case n.aG.Lookup:P.addFieldNamePicker({path:`${b}lookup`,name:"Lookup field",settings:{filter:T=>T.type===t.PU.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${b}gazetteer`,name:"Gazetteer",editor:r.G})}}},96606:(Y,I,e)=>{"use strict";e.d(I,{RA:()=>d,XR:()=>E,Dc:()=>f,qy:()=>c,Pz:()=>u});var t=e(44294),n=e(34338),r=e(11217),s=e(22796),o=e(11261),m=e(78134);function l(y){if(!y?.length)return;const a=[16,8,4,2,1],v="0123456789bcdefghjkmnpqrstuvwxyz";let g=!0;const b=[],P=[];b[0]=-90,b[1]=90,P[0]=-180,P[1]=180;let C;y.split("").forEach(M=>{C=v.indexOf(M),a.forEach(O=>{i(g?P:b,C,O),g=!g})});const D=(b[0]+b[1])/2;return[(P[0]+P[1])/2,D]}function i(y,a,v){a&v?y[0]=(y[0]+y[1])/2:y[1]=(y[0]+y[1])/2}function c(y){return{name:y.name??"Point",type:o.PU.geo,values:y.values.map(a=>{const v=l(a);if(v)return new t.A((0,s.Rb)(v))}),config:h}}function u(y,a){const v=new Array(y.values.length);for(let g=0;g<y.values.length;g++){const b=y.values[g],P=a.values[g];b===null||P===null||(v[g]=new t.A((0,s.Rb)([b,P])))}return{name:"Point",type:o.PU.geo,values:v,config:h}}function f(y,a){const v=a.values.length,g=new Array(v);for(let b=0;b<v;b++)g[b]=y.find(a.values[b])?.geometry();return{name:"Geometry",type:o.PU.geo,values:g,config:h}}function d(y,a){const v=y.values,g=a.values;if(!v||!g)throw"missing src/dest";if(v.length!==g.length)throw"Source and destination field lengths do not match";const b=y.values.length,P=new Array(b);for(let C=0;C<b;C++){const D=v[C],T=g[C];D&&T?P[C]=new n.A([D,T]):D?P[C]=D:T&&(P[C]=T)}return{name:"Geometry",type:o.PU.geo,values:P,config:h}}function E(y,a){const v=y.values,g=a.values;if(!v||!g)throw"missing src/dest";if(v.length!==g.length)throw"Source and destination field lengths do not match";const b=y.values.length,P=new Array(b);for(let C=0;C<b;C++){const D=v[C],T=g[C];D&&T&&(P[C]=new r.A([(0,m.EX)(D),(0,m.EX)(T)]))}return{name:"Geometry",type:o.PU.geo,values:P,config:h}}const h=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},67140:(Y,I,e)=>{"use strict";e.d(I,{fx:()=>y,q3:()=>a});var t=e(70915),n=e(44294),r=e(14236),s=e(11261),o=e(17172),m=e(11365);function l(v){const g=new m.A().readFeatures(v,{featureProjection:"EPSG:3857"}),b=g.length,P=new Array(b).fill(null),C=[],D=new Map,T=p=>{let x=D.get(p);return x||(x={types:new Set,values:new Array(b).fill(null),count:0},C.push(p),D.set(p,x)),x},M=(...p)=>{for(const x of p)if(!D.has(x))return x;return"___"+p[0]},O={types:new Set,values:new Array(b).fill(null),count:0};for(let p=0;p<b;p++){const x=g[p];P[p]=x.getGeometry();const A=x.getId();A!=null&&(O.values[p]=A,O.types.add((0,r.oE)(A)),O.count++);for(const R of x.getKeys()){const B=x.get(R);if(B===P[p]||B==null)continue;const U=T(R);U.values[p]=B,U.types.add((0,r.oE)(B)),U.count++}}const S=[];if(O.count>0){const p=i(O);S.push({name:M("id","_id","__id"),type:p,values:O.values,config:{}})}S.push({name:M("geo","geometry"),type:s.PU.geo,values:P,config:{}});for(const p of C){const x=D.get(p);if(!x)continue;const A=i(x);S.push({name:p,type:A,values:x.values,config:{}})}return{fields:S,length:b}}function i(v){return v.count<1?s.PU.other:v.types.size>1?(v.values=v.values.map(g=>g!=null?`${g}`:g),s.PU.string):v.types.values().next().value}var c=e(96606),u=e(22796);function f(v,g){let b=0;const P=new Map;for(const C of g){const D=new n.A((0,u.Rb)([C.longitude,C.latitude])),T={point:()=>D,geometry:()=>D};if(C.name&&(P.set(C.name,T),P.set(C.name.toUpperCase(),T)),C.key&&(P.set(C.key,T),P.set(C.key.toUpperCase(),T)),C.keys)for(const M of C.keys)P.set(M,T),P.set(M.toUpperCase(),T);b++}return{path:v,find:C=>{let D=P.get(C);return!D&&typeof C=="string"&&(D=P.get(C.toUpperCase())),D},count:b,examples:C=>{const D=[];if(P.size<1)D.push("no values found");else for(const T of P.keys())if(D.push(T),D.length>=C)break;return D}}}function d(v,g){let b;if(Array.isArray(g)){const P=g[0];if(P.latitude&&P.longitude&&(P.key||P.keys))return f(v,g)}else Array.isArray(g?.features)&&g?.type==="FeatureCollection"&&(b=l(g));if(!b)try{b=(0,r.Vc)(g)}catch(P){return{path:v,error:`${P}`,find:C=>{},examples:C=>[]}}return E(b,{path:v})}function E(v,g){const b=[];let P,C,D,T,M;for(const p of v.fields)if(p.type===s.PU.geo&&(P=p),!M&&p.type===s.PU.string&&(M=p),p.name){g.keys&&g.keys.includes(p.name)&&b.push(p);const x=p.name.toUpperCase();switch(x){case"LAT":case"LATITUTE":C=p;break;case"LON":case"LNG":case"LONG":case"LONGITUE":D=p;break;case"GEOHASH":T=p;break;case"ID":case"UID":case"KEY":case"CODE":g.keys||b.push(p);break;default:g.keys||(x.endsWith("_ID")||x.endsWith("_CODE"))&&b.push(p)}}!b.length&&M&&b.push(M);let O=!1;P?O=P.values[0]?.getType()==="Point":T?(P=(0,c.qy)(T),O=!0):C&&D&&(P=(0,c.Pz)(D,C),O=!0);const S=new Map;return b.forEach(p=>{p.values.forEach((x,A)=>{const R=`${x}`;S.set(R.toUpperCase(),A),S.set(R,A)})}),{path:g.path,find:p=>{const x=S.get(p);if(x!=null){const A=P?.values[x];return{frame:v,index:x,point:()=>!A||O?A:new n.A((0,t.q1)(A.getExtent())),geometry:()=>A}}},examples:p=>{const x=[];for(let A of S.keys())if(x.push(A),x.length>p)break;return x},frame:()=>v,count:v.length}}const h={},y="public/gazetteer/countries.json";async function a(v){v||(v=y);let g=h[v];if(!g){try{const b=await(0,o.AI)().get(v);g=d(v,b)}catch(b){console.warn("Error loading placename lookup",v,b),g={path:v,error:"Error loading URL",find:P=>{},examples:P=>[]}}h[v]=g}return g}},31484:(Y,I,e)=>{"use strict";e.d(I,{FM:()=>E,nE:()=>f});var t=e(28240),n=e(11261),r=e(85200),s=e(1173),o=e(52622),m=e(96606),l=e(67140);function i(h){return y=>{for(const a of y.fields)if(h(a,y,[]))return a}}function c(h){return y=>{for(const a of y.fields){if(h.has(a.name.toLowerCase()))return a;const v=(0,t.Ct)(a,y);if(h.has(v))return a}}}const u={mode:o.aG.Auto,geohash:c(new Set(["geohash"])),latitude:c(new Set(["latitude","lat"])),longitude:c(new Set(["longitude","lon","lng"])),h3:c(new Set(["h3"])),wkt:c(new Set(["wkt"])),lookup:c(new Set(["lookup"])),geo:h=>h.fields.find(y=>y.type===n.PU.geo)};async function f(h){const y={...u,mode:h?.mode??o.aG.Auto};switch(y.gazetteer=await(0,l.q3)(h?.gazetteer),y.mode){case o.aG.Geohash:h?.geohash?y.geohash=i((0,r.NS)({id:s.Ct.byName,options:h.geohash})):y.geohash=()=>{};break;case o.aG.Lookup:const a=h?.lookup?.length?(0,r.NS)({id:s.Ct.byName,options:h.lookup}):(0,r.NS)({id:s.Ct.byType,options:n.PU.string});y.lookup=i(a);break;case o.aG.Coords:h?.latitude?y.latitude=i((0,r.NS)({id:s.Ct.byName,options:h.latitude})):y.latitude=()=>{},h?.longitude?y.longitude=i((0,r.NS)({id:s.Ct.byName,options:h.longitude})):y.longitude=()=>{};break}return y}function d(h,y){const a={mode:y.mode??o.aG.Auto};if(a.mode===o.aG.Auto){if(a.geo=y.geo(h),a.geo)return a;if(a.latitude=y.latitude(h),a.longitude=y.longitude(h),a.latitude&&a.longitude)return a.mode=o.aG.Coords,a;if(a.geohash=y.geohash(h),a.geohash)return a.mode=o.aG.Geohash,a;if(a.lookup=y.lookup(h),a.lookup)return a.mode=o.aG.Lookup,a}switch(a.mode){case o.aG.Coords:a.latitude=y.latitude(h),a.longitude=y.longitude(h);break;case o.aG.Geohash:a.geohash=y.geohash(h);break;case o.aG.Lookup:a.lookup=y.lookup(h);break}return a}function E(h,y){const a=d(h,y);switch(a.mode){case o.aG.Auto:return a.geo?{field:a.geo}:{warning:"Unable to find location fields"};case o.aG.Coords:return a.latitude&&a.longitude?{field:(0,m.Pz)(a.longitude,a.latitude),derived:!0,description:`${a.mode}: ${a.latitude.name}, ${a.longitude.name}`}:{warning:"Select latitude/longitude fields"};case o.aG.Geohash:return a.geohash?{field:(0,m.qy)(a.geohash),derived:!0,description:`${a.mode}`}:{warning:"Select geohash field"};case o.aG.Lookup:return a.lookup?y.gazetteer?{field:(0,m.Dc)(y.gazetteer,a.lookup),derived:!0,description:`${a.mode}: ${y.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},61453:(Y,I,e)=>{"use strict";e.d(I,{q:()=>A});var t=e(2543),n=e(96540),r=e(70713),s=e(18282),o=e(2514),m=e(90708),l=e(13544),i=e(14110),c=e(72574),u=e(55852),f=e(62930),d=e(77093),E=e(2913),h=e(44836),y=e(69147),a=e(28240),v=e(40845),g=e(66864),b=e(88575),P=e(88323),C=e(15292),D=e(7788),T=e(32196);const M=B=>(0,T.css)`
  padding: ${B.spacing(0,2)};
  font-size: ${B.typography.bodySmall.fontSize};
  color: ${B.colors.text.secondary};
  overflow: hidden;
  text-overflow: ellipsis;
`,O=({children:B})=>{const U=(0,v.of)(M);return n.createElement("div",{className:U},B)};var S=e(26323);const p=({options:B,actions:U,formattedDataDescription:F,onOptionsChange:K,hasTransformations:w,data:L,dataFrames:V,transformationOptions:N,selectedDataFrame:z,onDataFrameChange:J,downloadForExcel:G,toggleDownloadForExcel:H})=>{const q=(0,v.of)(S.A);let le=V;z===s.F.joinByField&&(le=L);const me=le.map((X,j)=>({value:j,label:`${(0,a.Ri)(X)} (${j})`})),k=[...N,...me];function ee(){let X="";if(!L)return X;const j=[];return z===s.F.joinByField?j.push((0,h.t)("dashboard.inspect-data.series-to-columns","Series joined by time")):L.length>1&&j.push((0,a.Ri)(L[z])),(B.withTransforms||B.withFieldConfig)&&(B.withTransforms&&j.push((0,h.t)("dashboard.inspect-data.panel-transforms","Panel transforms")),B.withTransforms&&B.withFieldConfig,B.withFieldConfig&&j.push((0,h.t)("dashboard.inspect-data.formatted","Formatted data"))),G&&j.push((0,h.t)("dashboard.inspect-data.excel-header","Excel header")),j.join(", ")}return n.createElement("div",{className:q.dataDisplayOptions},n.createElement(D.u,{id:"Data options",index:0,title:(0,h.t)("dashboard.inspect-data.data-options","Data options"),headerElement:n.createElement(O,null,ee()),isOpen:!1,actions:U},n.createElement("div",{className:q.options,"data-testid":"dataOptions"},n.createElement(g.gW,{spacing:"none"},L.length>1&&n.createElement(b.D,{label:(0,h.t)("dashboard.inspect-data.dataframe-label","Show data frame")},n.createElement(P.l6,{options:k,value:z,onChange:J,width:30,"aria-label":(0,h.t)("dashboard.inspect-data.dataframe-aria-label","Select dataframe")})),n.createElement(g.Gy,null,w&&K&&n.createElement(b.D,{label:(0,h.t)("dashboard.inspect-data.transformations-label","Apply panel transformations"),description:(0,h.t)("dashboard.inspect-data.transformations-description","Table data is displayed with transformations defined in the panel Transform tab.")},n.createElement(C.d,{value:!!B.withTransforms,onChange:()=>K({...B,withTransforms:!B.withTransforms})})),K&&n.createElement(b.D,{label:(0,h.t)("dashboard.inspect-data.formatted-data-label","Formatted data"),description:F||(0,h.t)("dashboard.inspect-data.formatted-data-description","Table data is formatted with options defined in the Field and Override tabs.")},n.createElement(C.d,{id:"formatted-data-toggle",value:!!B.withFieldConfig,onChange:()=>K({...B,withFieldConfig:!B.withFieldConfig})})),n.createElement(b.D,{label:(0,h.t)("dashboard.inspect-data.download-excel-label","Download for Excel"),description:(0,h.t)("dashboard.inspect-data.download-excel-description","Adds header to CSV for use with Excel")},n.createElement(C.d,{id:"excel-toggle",value:G,onChange:H})))))))};var x=e(18358);class A extends n.PureComponent{constructor(U){super(U),this.onExportLogsAsTxt=()=>{const{data:F,dataName:K,app:w}=this.props;(0,i.rR)("grafana_logs_download_logs_clicked",{app:w,format:"logs",area:"inspector"});const L=(0,y.HT)(F||[]);(0,x.Zy)(L,K)},this.onExportTracesAsJson=()=>{const{data:F,dataName:K,app:w}=this.props;if(F)for(const L of F){if(L.meta?.preferredVisualisationType!=="trace")continue;const V=(0,x.ek)(L,K+"-traces");(0,i.rR)("grafana_traces_download_traces_clicked",{app:w,grafana_version:E.config.buildInfo.version,trace_format:V,location:"inspector"})}},this.onExportServiceGraph=()=>{const{data:F,dataName:K,app:w}=this.props;(0,i.rR)("grafana_traces_download_service_graph_clicked",{app:w,grafana_version:E.config.buildInfo.version,location:"inspector"}),F&&(0,x.ny)(F,K)},this.onDataFrameChange=F=>{this.setState({transformId:F.value===s.F.joinByField?s.F.joinByField:s.F.noop,dataFrameIndex:typeof F.value=="number"?F.value:0,selectedDataFrame:F.value})},this.onToggleDownloadForExcel=()=>{this.setState(F=>({downloadForExcel:!F.downloadForExcel}))},this.state={selectedDataFrame:0,dataFrameIndex:0,transformId:s.F.noop,transformationOptions:R(),transformedData:U.data??[],downloadForExcel:!1}}componentDidUpdate(U,F){if(!this.props.data){this.setState({transformedData:[]});return}if(this.props.options.withTransforms){this.setState({transformedData:this.props.data});return}if(U.data!==this.props.data||F.transformId!==this.state.transformId){const K=this.state.transformationOptions.find(w=>w.value===this.state.transformId);if(K&&K.transformer.id!==s.F.noop){const w=this.state.selectedDataFrame,L=this.state.dataFrameIndex,V=(0,o.m)([K.transformer],this.props.data).subscribe(N=>{this.setState({transformedData:N,selectedDataFrame:w,dataFrameIndex:L},()=>V.unsubscribe())});return}this.setState({transformedData:this.props.data});return}}exportCsv(U,F){const{dataName:K}=this.props,{transformId:w}=this.state,L=U[this.state.dataFrameIndex];F&&(0,i.rR)("grafana_logs_download_clicked",{app:this.props.app,format:"csv"}),(0,x.EM)(L,K,{useExcelHeader:this.state.downloadForExcel},w)}getProcessedData(){const{options:U,panelPluginId:F,fieldConfig:K,timeZone:w}=this.props,L=this.state.transformedData;if(!U.withFieldConfig)return(0,m.K3)(L);let V=K??{defaults:{},overrides:[]};return F==="table"&&K&&(V=this.cleanTableConfigFromFieldConfig(K)),(0,m.we)({data:L,theme:E.config.theme2,fieldConfig:V,timeZone:w,replaceVariables:(N,z,J)=>(0,c.w)().replace(N,z,J)})}cleanTableConfigFromFieldConfig(U){U=(0,t.cloneDeep)(U),U.defaults.custom={};for(const F of U.overrides)for(const K of F.properties)if(K.id.startsWith("custom.")){const w=F.properties.indexOf(K);F.properties.slice(w,1)}return U}renderActions(U,F,K,w){return n.createElement(n.Fragment,null,n.createElement(u.$n,{variant:"primary",onClick:()=>this.exportCsv(U,F),size:"sm"},n.createElement(h.x6,{i18nKey:"dashboard.inspect-data.download-csv"},"Download CSV")),F&&n.createElement(u.$n,{variant:"primary",onClick:this.onExportLogsAsTxt,size:"sm"},n.createElement(h.x6,{i18nKey:"dashboard.inspect-data.download-logs"},"Download logs")),K&&n.createElement(u.$n,{variant:"primary",onClick:this.onExportTracesAsJson,size:"sm"},n.createElement(h.x6,{i18nKey:"dashboard.inspect-data.download-traces"},"Download traces")),w&&n.createElement(u.$n,{variant:"primary",onClick:this.onExportServiceGraph,size:"sm"},n.createElement(h.x6,{i18nKey:"dashboard.inspect-data.download-service"},"Download service graph")))}render(){const{isLoading:U,options:F,data:K,formattedDataDescription:w,onOptionsChange:L,hasTransformations:V}=this.props,{dataFrameIndex:N,transformationOptions:z,selectedDataFrame:J,downloadForExcel:G}=this.state,H=(0,S.c)();if(U)return n.createElement("div",null,n.createElement(f.y,{inline:!0})," Loading");const q=this.getProcessedData();if(!q||!q.length)return n.createElement("div",null,"No Data");const le=q[N]?N:0,me=q[le],k=q.some(j=>j?.meta?.preferredVisualisationType==="logs"),ee=q.some(j=>j?.meta?.preferredVisualisationType==="trace"),X=q.some(j=>j?.meta?.preferredVisualisationType==="nodeGraph");return n.createElement("div",{className:H.wrap,"aria-label":l.Tp.components.PanelInspector.Data.content},n.createElement("div",{className:H.toolbar},n.createElement(p,{data:K,hasTransformations:V,options:F,dataFrames:q,transformationOptions:z,selectedDataFrame:J,downloadForExcel:G,formattedDataDescription:w,onOptionsChange:L,onDataFrameChange:this.onDataFrameChange,toggleDownloadForExcel:this.onToggleDownloadForExcel,actions:this.renderActions(q,k,ee,X)})),n.createElement("div",{className:H.content},n.createElement(r.Ay,null,({width:j,height:ne})=>j===0?null:n.createElement(d.X,{width:j,height:ne,data:me,showTypeIcons:!0}))))}}function R(){return[{value:s.F.joinByField,label:(0,h.t)("dashboard.inspect-data.transformation","Series joined by time"),transformer:{id:s.F.joinByField,options:{byField:void 0}}}]}},32067:(Y,I,e)=>{"use strict";e.d(I,{N:()=>h});var t=e(32196),n=e(96540),r=e(13544),s=e(44836),o=e(57875),m=e(11261),l=e(83195),i=e(40845);const c=({timeZone:a,name:v,stats:g})=>{const b=(0,i.$j)(),P=(0,i.of)(f);return!g||!g.length?null:n.createElement("div",{className:P.wrapper},n.createElement("div",{className:"section-heading"},v),n.createElement("table",{className:"filter-table width-30"},n.createElement("tbody",null,g.map((C,D)=>n.createElement("tr",{key:`${C.displayName}-${D}`},n.createElement("td",null,C.displayName),n.createElement("td",{className:P.cell},u(C,a,b)))))))};function u(a,v,g){const b=(0,o.J)({field:{type:m.PU.number,config:a},theme:g,timeZone:v});return(0,l.cN)(b(a.value))}const f=a=>({wrapper:(0,t.css)`
    padding-bottom: ${a.spacing(2)};
  `,cell:(0,t.css)`
    text-align: right;
  `}),d=({name:a,traceIds:v})=>{const g=(0,i.of)(E);return v.length===0?null:n.createElement("div",{className:g.wrapper},n.createElement("div",{className:"section-heading"},a),n.createElement("table",{className:"filter-table width-30"},n.createElement("tbody",null,v.map((b,P)=>n.createElement("tr",{key:`${b}-${P}`},n.createElement("td",null,b))))))},E=a=>({wrapper:(0,t.css)`
    padding-bottom: ${a.spacing(2)};
  `,cell:(0,t.css)`
    text-align: right;
  `}),h=({data:a,timeZone:v})=>{if(!a.request)return null;let g=[];const b=a.request.endTime?a.request.endTime-a.request.startTime:-1,P=a.timings?.dataProcessingTime||-1;let C=0;for(const S of a.series)C+=S.length;b>0&&g.push({displayName:(0,s.t)("dashboard.inspect-stats.request-time","Total request time"),value:b,unit:"ms"}),P>0&&g.push({displayName:(0,s.t)("dashboard.inspect-stats.processing-time","Data processing time"),value:P,unit:"ms"}),g.push({displayName:(0,s.t)("dashboard.inspect-stats.queries","Number of queries"),value:a.request.targets?.length??0}),g.push({displayName:(0,s.t)("dashboard.inspect-stats.rows","Total number rows"),value:C});let D=[];for(const S of a.series)S.meta&&S.meta.stats&&(D=D.concat(S.meta.stats));const T=(0,s.t)("dashboard.inspect-stats.table-title","Stats"),M=(0,s.t)("dashboard.inspect-stats.data-title","Data source stats"),O=(0,s.t)("dashboard.inspect-stats.data-traceids","Trace IDs");return n.createElement("div",{"aria-label":r.Tp.components.PanelInspector.Stats.content,className:y},n.createElement(c,{timeZone:v,name:T,stats:g}),n.createElement(c,{timeZone:v,name:M,stats:D}),n.createElement(d,{name:O,traceIds:a.traceIds??[]}))},y=(0,t.css)`
  height: 100%;
  overflow-y: scroll;
`},90820:(Y,I,e)=>{"use strict";e.d(I,{e:()=>y});var t=e(32196),n=e(96540),r=e(64423),s=e(39070),o=e(13544),m=e(32264),l=e(67061),i=e(55852),c=e(10534),u=e(39558),f=e(24022),d=e(44836),E=e(27677),h=e(26323);class y extends n.PureComponent{constructor(v){super(v),this.subs=new r.yU,this.setFormattedJson=g=>{this.formattedJson=g},this.getTextForClipboard=()=>JSON.stringify(this.formattedJson,null,2),this.onToggleExpand=()=>{this.setState(g=>({...g,allNodesExpanded:!this.state.allNodesExpanded}))},this.onToggleMocking=()=>{this.setState(g=>({...g,isMocking:!this.state.isMocking}))},this.getNrOfOpenNodes=()=>this.state.allNodesExpanded===null?3:this.state.allNodesExpanded?20:1,this.state={executedQueries:[],allNodesExpanded:null,isMocking:!1,mockedResponse:"",response:{}}}componentDidMount(){this.subs.add(E.IB.getInspectorStream().subscribe({next:v=>{let g=!0;if(this.props.instanceId&&v?.requestId&&(g=v.requestId.startsWith(this.props.instanceId)),g)return this.onDataSourceResponse(v.response)}}))}componentDidUpdate(v){this.props.data!==v.data&&this.updateQueryList()}updateQueryList(){const{data:v}=this.props,g=v.series,b=[];if(g?.length){let P;g.forEach((C,D)=>{const T=C.meta?.executedQueryString;if(T){const M=C.refId||"?";P?.refId===M?(P.frames++,P.rows+=C.length):(P={refId:M,frames:0,rows:C.length,query:T},b.push(P))}})}this.setState({executedQueries:b})}componentWillUnmount(){this.subs.unsubscribe()}onDataSourceResponse(v){v.config?.hideFromInspector||(v={...v},v.headers&&delete v.headers,v.config&&(v.request=v.config,delete v.config,delete v.request.transformRequest,delete v.request.transformResponse,delete v.request.paramSerializer,delete v.request.jsonpCallbackParam,delete v.request.headers,delete v.request.requestId,delete v.request.inspect,delete v.request.retry,delete v.request.timeout),v.data&&(v.response=v.data,delete v.config,delete v.data,delete v.status,delete v.statusText,delete v.ok,delete v.url,delete v.redirected,delete v.type,delete v.$$config),this.setState({response:v}))}renderExecutedQueries(v){if(!v.length)return null;const g={refId:(0,t.css)`
        font-weight: ${m.$.theme.typography.weight.semibold};
        color: ${m.$.theme.colors.textBlue};
        margin-right: 8px;
      `};return n.createElement("div",null,v.map(b=>n.createElement(l.B,{key:b.refId,gap:1,direction:"column"},n.createElement("div",null,n.createElement("span",{className:g.refId},b.refId,":"),b.frames>1&&n.createElement("span",null,b.frames," frames, "),n.createElement("span",null,b.rows," rows")),n.createElement("pre",null,b.query))))}render(){const{allNodesExpanded:v,executedQueries:g,response:b}=this.state,{onRefreshQuery:P,data:C}=this.props,D=this.getNrOfOpenNodes(),T=(0,h.A)(m.$.theme2),M=Object.keys(b).length>0,O=C.state===s.Gu.Loading;return n.createElement("div",{className:T.wrap},n.createElement("div",{"aria-label":o.Tp.components.PanelInspector.Query.content},n.createElement("h3",{className:"section-heading"},"Query inspector"),n.createElement("p",{className:"small muted"},n.createElement(d.x6,{i18nKey:"inspector.query.description"},"Query inspector allows you to view raw request and response. To collect this data Grafana needs to issue a new query. Click refresh button below to trigger a new query."))),this.renderExecutedQueries(g),n.createElement("div",{className:T.toolbar},n.createElement(i.$n,{icon:"sync",onClick:P,"aria-label":o.Tp.components.PanelInspector.Query.refreshButton},n.createElement(d.x6,{i18nKey:"inspector.query.refresh"},"Refresh")),M&&v&&n.createElement(i.$n,{icon:"minus",variant:"secondary",className:T.toolbarItem,onClick:this.onToggleExpand},n.createElement(d.x6,{i18nKey:"inspector.query.collapse-all"},"Collapse all")),M&&!v&&n.createElement(i.$n,{icon:"plus",variant:"secondary",className:T.toolbarItem,onClick:this.onToggleExpand},n.createElement(d.x6,{i18nKey:"inspector.query.expand-all"},"Expand all")),M&&n.createElement(c.b,{getText:this.getTextForClipboard,className:T.toolbarItem,icon:"copy",variant:"secondary"},n.createElement(d.x6,{i18nKey:"inspector.query.copy-to-clipboard"},"Copy to clipboard")),n.createElement("div",{className:"flex-grow-1"})),n.createElement("div",{className:T.content},O&&n.createElement(u._,{text:"Loading query inspector..."}),!O&&M&&n.createElement(f.B,{json:b,open:D,onDidRender:this.setFormattedJson}),!O&&!M&&n.createElement("p",{className:"muted"},n.createElement(d.x6,{i18nKey:"inspector.query.no-data"},"No request and response collected yet. Hit refresh button"))))}}},26323:(Y,I,e)=>{"use strict";e.d(I,{A:()=>o,c:()=>s});var t=e(32196),n=e(3911),r=e(2913);const s=(0,n.N)(()=>o(r.config.theme2)),o=m=>({wrap:(0,t.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      width: 100%;
      flex: 1 1 0;
      min-height: 0;
    `,toolbar:(0,t.css)`
      display: flex;
      width: 100%;
      flex-grow: 0;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: ${m.v1.spacing.sm};
    `,toolbarItem:(0,t.css)`
      margin-left: ${m.v1.spacing.md};
    `,content:(0,t.css)`
      flex-grow: 1;
      height: 100%;
    `,editor:(0,t.css)`
      font-family: monospace;
      height: 100%;
      flex-grow: 1;
    `,viewer:(0,t.css)`
      overflow: scroll;
    `,dataFrameSelect:(0,t.css)`
      flex-grow: 2;
    `,leftActions:(0,t.css)`
      display: flex;
      flex-grow: 1;

      max-width: 85%;
      @media (max-width: 1345px) {
        max-width: 75%;
      }
    `,options:(0,t.css)`
      padding-top: ${m.v1.spacing.sm};
    `,dataDisplayOptions:(0,t.css)`
      flex-grow: 1;
      min-width: 300px;
      margin-right: ${m.v1.spacing.sm};
    `,selects:(0,t.css)`
      display: flex;
      > * {
        margin-right: ${m.v1.spacing.sm};
      }
    `})},16560:(Y,I,e)=>{"use strict";e.d(I,{q:()=>t});var t=(n=>(n.Data="data",n.Meta="meta",n.Error="error",n.Stats="stats",n.JSON="json",n.Query="query",n.Help="help",n))(t||{})},18358:(Y,I,e)=>{"use strict";e.d(I,{ny:()=>U,EM:()=>B,Zy:()=>R,ek:()=>F});var t=e(4213),n=e.n(t),r=e(72724),s=e(18282),o=e(72436),m=e(37471),l=e(19071),i=e(2543);const u=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:100,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function f(){return defaultConfig}function d(K){return _get(f(),K)}function E(K){let w;const L=new Set(K.map(({spanID:V})=>V));for(let V=0;V<K.length;V++){if(K[V].references&&K[V].references.some(({traceID:G,spanID:H})=>G===K[V].traceID&&L.has(H)))continue;if(!w){w=K[V];continue}const z=K[V].references&&K[V].references.length||0,J=w.references&&w.references.length||0;(z<J||z===J&&K[V].startTime<w.startTime)&&(w=K[V])}return w?`${w.process.serviceName}: ${w.operationName}`:""}const h=(0,i.memoize)(E,K=>K.length?K[0].traceID:0);function y(K){const w=new Map,L=K.reduce((N,z)=>(N.some(J=>J.key===z.key&&J.value===z.value)?w.set(`${z.key}:${z.value}`,`Duplicate tag "${z.key}:${z.value}"`):N.push(z),N),[]),V=Array.from(w.values());return{dedupedTags:L,warnings:V}}function a(K,w){const L=K?.slice()??[],V=(w||[]).map(N=>N.toLowerCase());return L.sort((N,z)=>{const J=N.key.toLowerCase(),G=z.key.toLowerCase();for(let H=0;H<V.length;H++){const q=V[H];if(J.startsWith(q)&&!G.startsWith(q))return-1;if(!J.startsWith(q)&&G.startsWith(q))return 1}return J>G?1:J<G?-1:0}),L}function v(K){if(!K?.traceID)return null;const w=K.traceID.toLowerCase();let L=0,V=Number.MAX_SAFE_INTEGER;const N=new Map,z=new Map;K.spans=K.spans.filter(k=>!!k.startTime),K.processes=Object.entries(K.processes).reduce((k,[ee,X])=>(k[ee]={...X,tags:a(X.tags)},k),{});const J=K.spans.length;for(let k=0;k<J;k++){const ee=K.spans[k],{startTime:X,duration:j,processID:ne}=ee;let te=ee.spanID;X<V&&(V=X),X+j>L&&(L=X+j);const oe=N.get(te);oe!=null?(console.warn(`Dupe spanID, ${oe+1} x ${te}`,ee,z.get(te)),_isEqual(ee,z.get(te))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),N.set(te,oe+1),te=`${te}_${oe}`,ee.spanID=te):N.set(te,1),ee.process=K.processes[ne],z.set(te,ee)}const G=getTraceSpanIdsAsTree(K,z),H=[],q={};G.walk((k,ee,X=0)=>{if(k==="__root__"||typeof k!="string")return;const j=z.get(k);if(!j)return;const{serviceName:ne}=j.process;q[ne]=(q[ne]||0)+1,j.relativeStartTime=j.startTime-V,j.depth=X-1,j.hasChildren=ee.children.length>0,j.childSpanCount=ee.children.length,j.warnings=j.warnings||[],j.tags=j.tags||[],j.references=j.references||[],j.childSpanIds=ee.children.slice().sort((oe,ie)=>{const ue=z.get(oe.value),be=z.get(ie.value);return be.startTime+be.duration-(ue.startTime+ue.duration)}).map(oe=>oe.value);const te=y(j.tags);j.tags=a(te.dedupedTags,getConfigValue("topTagPrefixes")),j.warnings=j.warnings.concat(te.warnings),j.references.forEach((oe,ie)=>{const ue=z.get(oe.spanID);ue&&(oe.span=ue,ie>0&&(ue.subsidiarilyReferencedBy=ue.subsidiarilyReferencedBy||[],ue.subsidiarilyReferencedBy.push({spanID:k,traceID:w,span:j,refType:oe.refType})))}),H.push(j)});const le=getTraceName(H);return{services:Object.keys(q).map(k=>({name:k,numberOfSpans:q[k]})),spans:H,traceID:w,traceName:le,processes:K.processes,duration:L-V,startTime:V,endTime:L}}function g(K){const w=K.spans.map(V=>b(V,K.processes)),L=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string},{name:"spanID",type:FieldType.string},{name:"parentSpanID",type:FieldType.string},{name:"operationName",type:FieldType.string},{name:"serviceName",type:FieldType.string},{name:"serviceTags",type:FieldType.other},{name:"startTime",type:FieldType.number},{name:"duration",type:FieldType.number},{name:"logs",type:FieldType.other},{name:"tags",type:FieldType.other},{name:"warnings",type:FieldType.other},{name:"stackTraces",type:FieldType.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const V of w)L.add(V);return L}function b(K,w){return{spanID:K.spanID,traceID:K.traceID,parentSpanID:K.references?.find(L=>L.refType==="CHILD_OF")?.spanID,operationName:K.operationName,startTime:K.startTime/1e3,duration:K.duration/1e3,logs:K.logs.map(L=>({...L,timestamp:L.timestamp/1e3})),tags:K.tags,warnings:K.warnings??void 0,stackTraces:K.stackTraces,serviceName:w[K.processID].serviceName,serviceTags:w[K.processID].tags}}function P(K,w){const L=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:w.uid,datasourceName:w.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:FieldType.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),V=K.map(C).sort((N,z)=>z?.startTime-N?.startTime);for(const N of V)L.add(N);return L}function C(K){const w=transformTraceData(K);if(w)return{traceID:w.traceID,startTime:w.startTime/1e3,duration:w.duration,traceName:w.traceName}}function D(K){let w={traceID:"",spans:[],processes:{},warnings:null},L=[];for(let V=0;V<K.length;V++){const N=K.get(V);w.traceID||(w.traceID=N.traceID),L.find(z=>z===N.serviceName)||(L.push(N.serviceName),w.processes[`p${L.length}`]={serviceName:N.serviceName,tags:N.serviceTags}),w.spans.push({traceID:N.traceID,spanID:N.spanID,duration:N.duration*1e3,references:N.parentSpanID?[{refType:"CHILD_OF",spanID:N.parentSpanID,traceID:N.traceID}]:[],flags:0,logs:N.logs.map(z=>({...z,timestamp:z.timestamp*1e3})),operationName:N.operationName,processID:Object.keys(w.processes).find(z=>w.processes[z].serviceName===N.serviceName)||"",startTime:N.startTime*1e3,tags:N.tags,warnings:N.warnings?N.warnings:null})}return{data:[w],total:0,limit:0,offset:0,errors:null}}function T(K){const w=K.map(M),L=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,values:[]},{name:"spanID",type:FieldType.string,values:[]},{name:"parentSpanID",type:FieldType.string,values:[]},{name:"operationName",type:FieldType.string,values:[]},{name:"serviceName",type:FieldType.string,values:[]},{name:"serviceTags",type:FieldType.other,values:[]},{name:"startTime",type:FieldType.number,values:[]},{name:"duration",type:FieldType.number,values:[]},{name:"logs",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const V of w)L.add(V);return L}function M(K){const w={traceID:K.traceId,spanID:K.id,parentSpanID:K.parentId,operationName:K.name,serviceName:K.localEndpoint?.serviceName||K.remoteEndpoint?.serviceName||"unknown",serviceTags:S(K),startTime:K.timestamp/1e3,duration:K.duration/1e3,logs:K.annotations?.map(O)??[],tags:Object.keys(K.tags||{}).reduce((L,V)=>V==="error"?(L.push({key:"error",value:!0}),L.push({key:"errorValue",value:K.tags.error}),L):(L.push({key:V,value:K.tags[V]}),L),[])};return K.kind&&(w.tags=[{key:"kind",value:K.kind},...w.tags??[]]),K.shared&&(w.tags=[{key:"shared",value:K.shared},...w.tags??[]]),w}function O(K){return{timestamp:K.timestamp,fields:[{key:"annotation",value:K.value}]}}function S(K){const w=K.localEndpoint||K.remoteEndpoint;return w?[p("ipv4",w.ipv4),p("ipv6",w.ipv6),p("port",w.port),p("endpointType",K.localEndpoint?"local":"remote")].filter(L=>!!L):[]}function p(K,w){if(w)return{key:K,value:w}}const x=K=>{let w=[];for(let L=0;L<K.length;L++){const V=K.get(L);w.push({traceId:V.traceID,parentId:V.parentSpanID,name:V.operationName,id:V.spanID,timestamp:V.startTime*1e3,duration:V.duration*1e3,...A(V),annotations:V.logs.length?V.logs.map(N=>({timestamp:N.timestamp,value:N.fields[0].value})):void 0,tags:V.tags.length?V.tags.filter(N=>N.key!=="kind"&&N.key!=="endpointType"&&N.key!=="shared").reduce((N,z)=>z.key==="error"?{...N,[z.key]:V.tags.find(J=>J.key==="errorValue").value||""}:{...N,[z.key]:z.value},{}):void 0,kind:V.tags.find(N=>N.key==="kind")?.value,shared:V.tags.find(N=>N.key==="shared")?.value})}return w},A=K=>{const w=K.serviceTags.find(L=>L.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return K.serviceName!=="unknown"?{[w]:{serviceName:K.serviceName,ipv4:K.serviceTags.find(L=>L.key==="ipv4")?.value,ipv6:K.serviceTags.find(L=>L.key==="ipv6")?.value,port:K.serviceTags.find(L=>L.key==="port")?.value}}:void 0};function R(K,w){let L="";K.meta?.forEach(z=>{const J=`${z.label}: ${JSON.stringify(z.value)}
`;L=L+J}),L=L+`

`,K.rows.forEach(z=>{const J=(0,r.LE)(z.timeEpochMs,{defaultWithMS:!0})+"	"+z.entry+`
`;L=L+J});const V=new Blob([L],{type:"text/plain;charset=utf-8"}),N=`${w}-logs-${(0,r.LE)(new Date)}.txt`;n()(V,N)}function B(K,w,L,V=s.F.noop){const N=(0,o._O)([K],L),z=new Blob(["\uFEFF",N],{type:"text/csv;charset=utf-8"}),J=V!==s.F.noop?"-as-"+V.toLocaleLowerCase():"",G=`${w}-data${J}-${(0,r.LE)(new Date)}.csv`;n()(z,G)}function U(K,w){const L=new Blob([JSON.stringify(K)],{type:"application/json"}),V=`${w}-${(0,r.LE)(new Date)}.json`;n()(L,V)}function F(K,w){let L="otlp";switch(K.meta?.custom?.traceFormat){case"jaeger":{let V=D(new m.k(K));U(V,w),L="jaeger";break}case"zipkin":{let V=x(new m.k(K));U(V,w),L="zipkin";break}case"otlp":default:{let V=(0,l.xw)(new m.k(K));U(V,w);break}}return L}},77938:(Y,I,e)=>{"use strict";e.d(I,{p:()=>r});var t=e(26272),n=e(28138);function r(o){let m="";try{m=JSON.stringify(o,s(),2)}catch(l){l instanceof Error&&(l.toString().includes("RangeError")||l.toString().includes("allocation size overflow"))?n.A.emit(t.r1.alertError,[l.toString(),"Cannot display JSON, the object is too big."]):n.A.emit(t.r1.alertError,[l instanceof Error?l.toString():l])}return m}function s(){const o=new WeakSet;return(m,l)=>{if(m==="__dataContext"||m==="__sceneObject")return"Filtered out in JSON serialization";if(typeof l=="object"&&l!==null){if(o.has(l))return;o.add(l)}return l}}},47259:(Y,I,e)=>{"use strict";e.d(I,{G7:()=>s,KU:()=>o,eb:()=>m});var t=e(17172),n=e(10096),r=e(31678);const s=(0,r.createAsyncThunk)("users/fetchInvitees",async()=>n.TP.hasPermission(r.AccessControlAction.OrgUsersAdd)?await(0,t.AI)().get("/api/org/invites"):[]),o=(0,r.createAsyncThunk)("users/addInvitee",async(l,{dispatch:i})=>{await(0,t.AI)().post("/api/org/invites",l),await i(s())}),m=(0,r.createAsyncThunk)("users/revokeInvite",async l=>(await(0,t.AI)().patch(`/api/org/invites/${l}/revoke`,{}),l))},40823:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>i,Tp:()=>s});var t=e(30038),n=e(47259);const r=(0,t.pU)({selectId:c=>c.code}),s=r.getSelectors(),o=r.getInitialState({status:"idle"}),i={invites:(0,t.Z0)({name:"invites",initialState:o,reducers:{},extraReducers:c=>{c.addCase(n.G7.pending,u=>{u.status="loading"}).addCase(n.G7.fulfilled,(u,{payload:f})=>{r.setAll(u,f),u.status="succeeded"}).addCase(n.G7.rejected,u=>{u.status="failed"}).addCase(n.eb.fulfilled,(u,{payload:f})=>{r.removeOne(u,f),u.status="succeeded"})}}).reducer}},96227:(Y,I,e)=>{"use strict";e.d(I,{b:()=>E,o:()=>h});var t=e(96540),n=e(40996),r=e(16817),s=e(17172),o=e(88575),m=e(10354),l=e(37390),i=e(55852),c=e(85242),u=e(44836),f=e(57767),d=e(88861);const E=({panel:y,initialFolderUid:a,onDismiss:v})=>{const[g,b]=(0,t.useState)(a),[P,C]=(0,t.useState)(y.title),[D,T]=(0,t.useState)(y.title),[M,O]=(0,t.useState)(!1);console.log("folderUid",g),(0,t.useEffect)(()=>O(!0),[P]),(0,n.A)(()=>T(P),350,[P]);const{saveLibraryPanel:S}=(0,d.b)(),p=(0,t.useCallback)(()=>{y.libraryPanel={uid:"",name:P},S(y,g).then(R=>{(0,s.NF)(R)?y.libraryPanel=void 0:v?.()})},[y,P,g,v,S]),x=(0,r.A)(async()=>{try{return!(await(0,f.e9)(P)).some(R=>R.folderUid===g)}catch(R){return(0,s.NF)(R)&&(R.isHandled=!0),!0}finally{O(!1)}},[D,g]);console.log("isValidName:",x);const A=!x?.value&&x.value!==void 0&&P===D&&!M;return t.createElement(t.Fragment,null,t.createElement(o.D,{label:(0,u.t)("library-panel.add-modal.name","Library panel name"),invalid:A,error:A?(0,u.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(m.p,{id:"share-panel-library-panel-name-input",name:"name",value:P,onChange:R=>C(R.currentTarget.value)})),t.createElement(o.D,{label:(0,u.t)("library-panel.add-modal.folder","Save in folder"),description:(0,u.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(c.sR,{onChange:({uid:R})=>b(R),initialFolderUid:a,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(l.a.ButtonRow,null,t.createElement(i.$n,{variant:"secondary",onClick:v,fill:"outline"},t.createElement(u.x6,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(i.$n,{onClick:p,disabled:A},t.createElement(u.x6,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},h=({isOpen:y=!1,panel:a,initialFolderUid:v,...g})=>t.createElement(l.a,{title:"Create library panel",isOpen:y,onDismiss:g.onDismiss},t.createElement(E,{panel:a,initialFolderUid:v,onDismiss:g.onDismiss}))},86474:(Y,I,e)=>{"use strict";e.d(I,{E:()=>x});var t=e(32196),n=e(96540),r=e(70255),s=e(32264),o=e(40845),m=e(14578),l=e(50720),i=e(72129),c=e(41394),u=e(25701),f=e(39070),d=e(37390),E=e(55852),h=e(43535),y=e(16547),a=e(57767),v=e(30038);const g={loadingState:f.Gu.Loading,dashboardTitles:[]},b=(0,v.VP)("libraryPanels/delete/searchCompleted"),P=(B=g,U)=>b.match(U)?{...B,dashboardTitles:U.payload.dashboards.map(F=>F.title),loadingState:f.Gu.Done}:B;function C(B){return async function(U){const F=await(0,a.xV)(B.uid);U(b({dashboards:F}))}}const D=({libraryPanel:B,onDismiss:U,onConfirm:F})=>{const K=(0,o.of)(h.o),[{dashboardTitles:w,loadingState:L},V]=(0,n.useReducer)(P,g),N=(0,n.useMemo)(()=>(0,y.QC)(V),[V]);(0,n.useEffect)(()=>{N(C(B))},[N,B]);const z=!!w.length,J=L===f.Gu.Done;return n.createElement(d.a,{className:K.modal,title:"Delete library panel",icon:"trash-alt",onDismiss:U,isOpen:!0},J?null:n.createElement(T,null),J?n.createElement("div",null,z?n.createElement(O,{dashboardTitles:w}):null,z?null:n.createElement(M,null),n.createElement(d.a.ButtonRow,null,n.createElement(E.$n,{variant:"secondary",onClick:U,fill:"outline"},"Cancel"),n.createElement(E.$n,{variant:"destructive",onClick:F,disabled:z},"Delete"))):null)},T=()=>n.createElement("span",null,"Loading library panel..."),M=()=>{const B=(0,o.of)(h.o);return n.createElement("div",{className:B.modalText},"Do you want to delete this panel?")},O=({dashboardTitles:B})=>{const U=(0,o.of)(h.o),F=B.length===1?"dashboard.":"dashboards.",K=`${B.length} ${F}`;return B.length===0?null:n.createElement("div",null,n.createElement("p",{className:U.textInfo},"This library panel can not be deleted because it is connected to ",n.createElement("strong",null,K)," Remove the library panel from the dashboards listed below and retry."),n.createElement("table",{className:U.myTable},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Dashboard name"))),n.createElement("tbody",null,B.map((w,L)=>n.createElement("tr",{key:`dash-title-${L}`},n.createElement("td",null,w))))))},S=({libraryPanel:B,onClick:U,onDelete:F,showSecondaryActions:K})=>{const[w,L]=(0,n.useState)(!1),V=()=>{F?.(B),L(!1)},N=s.$.panels[B.model.type]??(0,c.$)(B.model.type).meta;return n.createElement(n.Fragment,null,n.createElement(u.b,{isCurrent:!1,title:B.name,description:B.description,plugin:N,onClick:()=>U?.(B),onDelete:K?()=>L(!0):void 0},n.createElement(A,{libraryPanel:B})),w&&n.createElement(D,{libraryPanel:B,onConfirm:V,onDismiss:()=>L(!1)}))},p=({showSecondaryActions:B,rootProps:U})=>{const F=(0,o.of)(R);return n.createElement(u.b.Skeleton,{hasDelete:B,...U},n.createElement(r.A,{containerClassName:F.metaContainer,width:80}))},x=(0,i.j)(S,p);function A({libraryPanel:B}){const U=(0,o.of)(R);return!B.meta?.folderUid&&!B.meta?.folderName?null:B.meta.folderUid?n.createElement("span",{className:U.metaContainer},n.createElement(l.N,{href:`/dashboards/f/${B.meta.folderUid}`},n.createElement(m.I,{name:"folder-upload",size:"sm"}),n.createElement("span",null,B.meta.folderName))):n.createElement("span",{className:U.metaContainer},n.createElement(m.I,{name:"folder",size:"sm"}),n.createElement("span",null,B.meta.folderName))}function R(B){return{metaContainer:(0,t.css)({display:"flex",alignItems:"center",color:B.colors.text.secondary,fontSize:B.typography.bodySmall.fontSize,paddingTop:B.spacing(.5),svg:{marginRight:B.spacing(.5),marginBottom:3}})}}},16678:(Y,I,e)=>{"use strict";e.d(I,{j:()=>T,s:()=>D});var t=e(32196),n=e(96540),r=e(40996),s=e(40845),o=e(66864),m=e(67647),l=e(76459),i=e.n(l),c=e(55852),u=e(88323),f=e(14578),d=e(27677),E=e(64161),h=e(31678);function y({onChange:p,maxMenuHeight:x}){const A=(0,s.of)(v),[R,B]=(0,n.useState)(!1),U=(0,n.useCallback)(V=>a(V,B),[]),F=(0,n.useMemo)(()=>i()(U,300),[U]),[K,w]=(0,n.useState)([]),L=(0,n.useCallback)(V=>{const N=V.filter(z=>!!z.value).map(z=>z.value);p(N),w(V)},[p]);return n.createElement("div",{className:A.container},K.length>0&&n.createElement(c.$n,{size:"xs",icon:"trash-alt",fill:"text",className:A.clear,onClick:()=>p([]),"aria-label":"Clear folders"},"Clear folders"),n.createElement(u.Iv,{value:K,onChange:L,isLoading:R,loadOptions:F,maxMenuHeight:x,placeholder:"Filter by folder",noOptionsMessage:"No folders found",prefix:n.createElement(f.I,{name:"filter"}),"aria-label":"Folder filter",defaultOptions:!0}))}async function a(p,x){x(!0);const A={query:p,type:E.G.DashFolder,permission:h.PermissionLevelString.View},B=(await(0,d.AI)().search(A)).map(U=>({label:U.title,value:{uid:U.uid,title:U.title}}));return(!p||"general".includes(p.toLowerCase()))&&B.unshift({label:"General",value:{uid:"general",title:"General"}}),x(!1),B}function v(p){return{container:(0,t.css)({label:"container",position:"relative",minWidth:"180px",flexGrow:1}),clear:(0,t.css)({label:"clear",fontSize:p.spacing(1.5),position:"absolute",top:-p.spacing(4.5),right:0})}}var g=e(68313),b=e(73725),P=e(15054),C=e(83791),D=(p=>(p.Tight="tight",p.Spacious="spacious",p))(D||{});const T=({onClick:p,variant:x="spacious",currentPanelId:A,currentFolderUID:R,perPage:B=P.FG,showPanelFilter:U=!1,showFolderFilter:F=!1,showSort:K=!1,showSecondaryActions:w=!1})=>{const L=(0,s.of)(M,x),[V,N]=(0,n.useState)(""),[z,J]=(0,n.useState)("");(0,r.A)(()=>J(V),200,[V]);const[G,H]=(0,n.useState)({}),[q,le]=(0,n.useState)(R?[R]:[]),[me,k]=(0,n.useState)([]),ee=K||U||F,X=x==="tight"?"lg":"xs";return n.createElement("div",{className:L.container},n.createElement(o.gW,{spacing:X},n.createElement("div",{className:(0,t.cx)(L.gridContainer,{[L.tightLayout]:x==="tight"})},n.createElement("div",{className:L.filterInputWrapper},n.createElement(m.Z,{value:V,onChange:N,placeholder:"Search by name or description",width:0,escapeRegex:!1})),ee&&n.createElement(O,{showSort:K,showPanelFilter:U,showFolderFilter:F,onSortChange:H,onFolderFilterChange:le,onPanelFilterChange:k,sortDirection:G.value,variant:x})),n.createElement("div",{className:L.libraryPanelsView},n.createElement(C.y,{onClickCard:p,searchString:z,sortDirection:G.value,panelFilter:me,folderFilter:q,currentPanelId:A,showSecondaryActions:w,perPage:B}))))};function M(p,x){return{filterInputWrapper:(0,t.css)({flexGrow:x==="tight"?1:"initial"}),container:(0,t.css)({width:"100%",overflowY:"auto",padding:p.spacing(1)}),libraryPanelsView:(0,t.css)({width:"100%"}),gridContainer:(0,t.css)({display:"flex",flexDirection:"column",width:"100%",columnGap:p.spacing(1),rowGap:p.spacing(1),paddingBottom:p.spacing(2)}),tightLayout:(0,t.css)({flexDirection:"row",rowGap:p.spacing(1)})}}const O=n.memo(({variant:p="spacious",showSort:x,showPanelFilter:A,showFolderFilter:R,sortDirection:B,onSortChange:U,onFolderFilterChange:F,onPanelFilterChange:K})=>{const w=(0,s.of)(S),L=(0,n.useCallback)(N=>K(N.map(z=>z.id)),[K]),V=(0,n.useCallback)(N=>F(N.map(z=>z.uid??"")),[F]);return n.createElement("div",{className:(0,t.cx)(w.container,{[w.containerTight]:p==="tight"})},x&&n.createElement(b.r,{value:B,onChange:U,filter:["alpha-asc","alpha-desc"]}),(R||A)&&n.createElement("div",{className:(0,t.cx)(w.filterContainer,{[w.filterContainerTight]:p==="tight"})},R&&n.createElement(y,{onChange:V}),A&&n.createElement(g.$,{onChange:L})))});O.displayName="SearchControls";function S(p){return{container:(0,t.css)({display:"flex",gap:p.spacing(1),flexGrow:1,flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),containerTight:(0,t.css)({flexGrow:"initial",flexDirection:"column",justifyContent:"normal"}),filterContainer:(0,t.css)({display:"flex",flexDirection:"row",gap:p.spacing(1)}),filterContainerTight:(0,t.css)({flexDirection:"column",marginLeft:"initial"})}}},83791:(Y,I,e)=>{"use strict";e.d(I,{y:()=>E});var t=e(32196),n=e(96540),r=e(40996),s=e(39070),o=e(40845),m=e(67061),l=e(69529),i=e(19384),c=e(44836),u=e(86474),f=e(16547),d=e(8184);const E=({onClickCard:y,searchString:a,sortDirection:v,panelFilter:g,folderFilter:b,showSecondaryActions:P,currentPanelId:C,perPage:D=40,isWidget:T})=>{const M=(0,o.of)(h),[{libraryPanels:O,page:S,perPage:p,numberOfPages:x,loadingState:A,currentPanelId:R},B]=(0,n.useReducer)(d.w_,{...d.Xb,currentPanelId:C,perPage:D}),U=(0,n.useMemo)(()=>(0,f.QC)(B),[B]);(0,r.A)(()=>U((0,f.IF)({searchString:a,sortDirection:v,panelFilter:g,folderFilterUIDs:b,page:S,perPage:p,currentPanelId:R,isWidget:T})),300,[a,v,g,b,S,U]);const F=({uid:w})=>U((0,f.h4)(w,{searchString:a,sortDirection:v,panelFilter:g,folderFilterUIDs:b,page:S,perPage:p})),K=w=>U((0,d.yd)({page:w}));return n.createElement(m.B,{direction:"column",wrap:"nowrap"},A===s.Gu.Loading?n.createElement(n.Fragment,null,n.createElement(u.E.Skeleton,{showSecondaryActions:P}),n.createElement(u.E.Skeleton,{showSecondaryActions:P}),n.createElement(u.E.Skeleton,{showSecondaryActions:P})):O.length<1?n.createElement(l.p,{variant:"not-found",message:(0,c.t)("library-panels.empty-state.message","No library panels found")}):O?.map((w,L)=>n.createElement(u.E,{key:`library-panel=${L}`,libraryPanel:w,onDelete:F,onClick:y,showSecondaryActions:P})),O.length?n.createElement("div",{className:M.pagination},n.createElement(i.d,{currentPage:S,numberOfPages:x,onNavigate:K,hideWhenSinglePage:!0})):null)},h=y=>({pagination:(0,t.css)({alignSelf:"center",marginTop:y.spacing(1)})})},16547:(Y,I,e)=>{"use strict";e.d(I,{IF:()=>a,QC:()=>g,h4:()=>v});var t=e(64423),n=e(65474),r=e(62467),s=e(44240),o=e(39697),m=e(69862),l=e(66847),i=e(69850),c=e(1005),u=e(65961),f=e(67791),d=e(32264),E=e(17706),h=e(57767),y=e(8184);function a(b){const P=(D,T)=>D.id===T.type,C=(D,T)=>{const M=(0,E.A4)();return D.filter(O=>{const S=M.find(p=>P(p,O));return T?!!S?.skipDataQuery:!S?.skipDataQuery})};return function(D){const T=new t.yU,M=(0,n.H)((0,h.dq)({searchString:b.searchString,perPage:b.perPage,page:b.page,excludeUid:b.currentPanelId,sortDirection:b.sortDirection,typeFilter:b.panelFilter,folderFilterUIDs:b.folderFilterUIDs})).pipe((0,m.Z)(O=>{const{elements:S}=O;if(d.$.featureToggles.vizAndWidgetSplit&&b.isWidget!==void 0){const p=C(S,b.isWidget);return(0,r.of)({...O,elements:p})}return(0,r.of)({...O,elements:S})}),(0,m.Z)(({perPage:O,elements:S,page:p,totalCount:x})=>(0,r.of)((0,y.c4)({libraryPanels:S,page:p,perPage:O,totalCount:x}))),(0,l.W)(O=>(console.error(O),(0,r.of)((0,y.c4)({...y.Xb,page:b.page,perPage:b.perPage})))),(0,i.j)(()=>T.unsubscribe()),(0,c.u)());T.add((0,s.h)((0,o.O)(50).pipe((0,u.u)((0,y.d9)()),(0,f.Q)(M)),M).subscribe(D))}}function v(b,P){return async function(C){try{await(0,h.h4)(b),a(P)(C)}catch(D){console.error(D)}}}function g(b){return function(P){return P instanceof Function?P(b):b(P)}}},8184:(Y,I,e)=>{"use strict";e.d(I,{Xb:()=>r,c4:()=>o,d9:()=>s,w_:()=>l,yd:()=>m});var t=e(30038),n=e(39070);const r={loadingState:n.Gu.Loading,libraryPanels:[],totalCount:0,perPage:40,page:1,numberOfPages:0,currentPanelId:void 0},s=(0,t.VP)("libraryPanels/view/initSearch"),o=(0,t.VP)("libraryPanels/view/searchCompleted"),m=(0,t.VP)("libraryPanels/view/changePage"),l=(i,c)=>{if(s.match(c))return{...i,loadingState:n.Gu.Loading};if(o.match(c)){const{libraryPanels:u,page:f,perPage:d,totalCount:E}=c.payload,h=Math.ceil(E/d);return{...i,libraryPanels:u,perPage:d,totalCount:E,loadingState:n.Gu.Done,numberOfPages:h,page:f>h?f-1:f}}return m.match(c)?{...i,page:c.payload.page}:i}},82792:(Y,I,e)=>{"use strict";e.d(I,{X:()=>t});function t(n){return!!n.libraryPanel?.uid}},57767:(Y,I,e)=>{"use strict";e.d(I,{GN:()=>h,GX:()=>v,Yr:()=>c,d7:()=>f,dq:()=>i,e9:()=>u,h4:()=>E,jc:()=>d,xV:()=>y});var t=e(75505),n=e(79422),r=e(34214),s=e(41507),o=e(20455),m=e(27677),l=e(98796);async function i({searchString:g="",perPage:b=100,page:P=1,excludeUid:C="",sortDirection:D="",typeFilter:T=[],folderFilterUIDs:M=[]}={}){const O=new URLSearchParams;O.append("searchString",g),O.append("sortDirection",D),O.append("typeFilter",T.join(",")),O.append("folderFilterUIDs",M.join(",")),O.append("excludeUid",C),O.append("perPage",b.toString(10)),O.append("page",P.toString(10)),O.append("kind",l.i.Panel.toString(10));const{result:S}=await(0,m.AI)().get(`/api/library-elements?${O.toString()}`);return S}async function c(g,b=!1){const P=await(0,t.s)((0,m.AI)().fetch({method:"GET",url:`/api/library-elements/${g}`,showSuccessAlert:!b,showErrorAlert:!b})),{result:C}=P.data,D=new r.G({...n.Ye,schemaVersion:35,panels:[C.model]}),{scopedVars:T,...M}=D.panels[0].getSaveModel();return delete M.gridPos,delete M.id,delete M.libraryPanel,D.destroy(),{...C,model:M}}async function u(g){const{result:b}=await(0,m.AI)().get(`/api/library-elements/name/${g}`);return b}async function f(g,b){const{result:P}=await(0,m.AI)().post("/api/library-elements",{folderUid:b,name:g.libraryPanel.name,model:g,kind:l.i.Panel});return P}async function d(g){const{libraryPanel:b,...P}=g,{uid:C,name:D,version:T,folderUid:M}=b,O=l.i.Panel,{result:S}=await(0,m.AI)().patch(`/api/library-elements/${C}`,{folderUid:M,name:D,model:P,version:T,kind:O});return S}function E(g){return(0,m.AI)().delete(`/api/library-elements/${g}`)}async function h(g){const{result:b}=await(0,m.AI)().get(`/api/library-elements/${g}/connections`);return b}async function y(g){const b=await h(g);return b.length===0?[]:await(0,m.AI)().search({dashboardUIDs:b.map(C=>C.connectionUid)})}function a(g){const{panel:b,uid:P,name:C,_loadedPanel:D}=g.state,T=g.parent;if(!T||!(T instanceof s.U))throw new Error("LibraryVizPanel must be a child of DashboardGridItem");return{uid:P,folderUID:D?.folderUid,name:C,version:D?.version||0,model:(0,o.Z6)(b,{x:T.state.x??0,y:T.state.y??0,w:T.state.width??0,h:T.state.height??0},!1,T),kind:l.i.Panel}}async function v(g){const{uid:b,folderUID:P,name:C,model:D,version:T,kind:M}=a(g);console.log("updateLibraryVizPanel",D);const{result:O}=await(0,m.AI)().patch(`/api/library-elements/${b}`,{folderUID:P,name:C,model:D,version:T,kind:M});return O}},43535:(Y,I,e)=>{"use strict";e.d(I,{o:()=>n});var t=e(32196);function n(r){return{myTable:(0,t.css)`
      max-height: 204px;
      overflow-y: auto;
      margin-top: 11px;
      margin-bottom: 28px;
      border-radius: ${r.shape.radius.default};
      border: 1px solid ${r.colors.action.hover};
      background: ${r.colors.background.primary};
      color: ${r.colors.text.secondary};
      font-size: ${r.typography.h6.fontSize};
      width: 100%;

      thead {
        color: #538ade;
        font-size: ${r.typography.bodySmall.fontSize};
      }

      th,
      td {
        padding: 6px 13px;
        height: ${r.spacing(4)};
      }

      tbody > tr:nth-child(odd) {
        background: ${r.colors.background.secondary};
      }
    `,noteTextbox:(0,t.css)`
      margin-bottom: ${r.spacing(4)};
    `,textInfo:(0,t.css)`
      color: ${r.colors.text.secondary};
      font-size: ${r.typography.size.sm};
    `,dashboardSearch:(0,t.css)`
      margin-top: ${r.spacing(2)};
    `,modal:(0,t.css)`
      width: 500px;
    `,modalText:(0,t.css)`
      font-size: ${r.typography.h4.fontSize};
      color: ${r.colors.text.primary};
      margin-bottom: ${r.spacing(4)};
      padding-top: ${r.spacing(2)};
    `}}},98796:(Y,I,e)=>{"use strict";e.d(I,{i:()=>t});var t=(r=>(r[r.Panel=1]="Panel",r))(t||{}),n=(r=>(r[r.Dashboard=1]="Dashboard",r))(n||{})},88861:(Y,I,e)=>{"use strict";e.d(I,{b:()=>u});var t=e(5805),n=e(17172),r=e(3169),s=e(44836),o=e(57767);async function m(f,d){const E=l(f),h=await c(E,d);return i(f,h),h}function l(f){let{scopedVars:d,...E}=f.getSaveModel();return E={libraryPanel:{name:f.title,uid:void 0},...E},E}function i(f,d){f.restoreModel({...d.model,configRev:0,libraryPanel:d,title:f.title}),f.hasSavedPanelEditChange=!0,f.refresh()}function c(f,d){return f.libraryPanel?f.libraryPanel&&f.libraryPanel.uid===""?(0,o.d7)(f,d):(0,o.jc)(f):Promise.reject()}const u=()=>{const f=(0,r._2)(),[d,E]=(0,t.default)(async(h,y)=>{try{const a=await m(h,y);return f.success((0,s.t)("library-panels.save.success","Library panel saved")),a}catch(a){throw(0,n.NF)(a)&&(a.isHandled=!0,f.error((0,s.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:a.message??a.data.message}))),a}},[]);return{state:d,saveLibraryPanel:E}}},6473:(Y,I,e)=>{"use strict";e.d(I,{t:()=>b});var t=e(62938),n=e(55004),r=e(26272),s=e(78731),o=e(12131),m=e(10096),l=e(28444),i=e(14792),c=e(32196),u=e(96540),f=e(40845),d=e(37390),E=e(55852),h=(P=>(P.Saved="saved",P.EditingStarted="editing-started",P.EditingCanceled="editing-cancelled",P.Deleted="deleted",P))(h||{});function y({onDismiss:P,event:C}){const D=(0,f.of)(a),T=()=>{if(C?.action===h.Deleted){o.Ny.push("/");return}b.reloadPage(),P()};return u.createElement(d.a,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:P,onClickBackdrop:()=>{},className:D.modal},u.createElement("div",{className:D.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),u.createElement(d.a.ButtonRow,null,u.createElement(E.$n,{onClick:P,variant:"secondary",fill:"outline"},"Continue editing"),u.createElement(E.$n,{onClick:T,variant:"destructive"},"Discard local changes")))}const a=P=>({modal:(0,c.css)({width:"600px"}),description:(0,c.css)({color:P.colors.text.secondary,paddingBottom:P.spacing(1)})}),v=(0,t.A)();class g{constructor(){this.editing=!1,this.observer={next:C=>{if((0,n.ew)(C)&&this.editing&&C.state===n.ZF.Connected&&this.sendEditingState(),(0,n.Z7)(C)){if(C.message.sessionId===v)return;const{action:D}=C.message;switch(D){case h.EditingStarted:case h.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const T=(0,i.UA)().getCurrent();if(T?.uid!==C.message.uid){console.log("dashboard event for different dashboard?",C,T);return}const M=this.editing||T.hasUnsavedChanges();if(D===h.Saved)M?m.lE.publish(new l.S8({component:y,props:{event:C}})):(m.lE.emit(r.r1.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(M&&D===h.EditingStarted&&!this.hasSeenNotice){const O=C.message,S=this.getRecentEditingEvent();(!S||S.message!==O.message)&&(this.hasSeenNotice=!0,m.lE.emit(r.r1.alertWarning,["Another session is editing this dashboard",O.message])),this.lastEditing=O}return}}}}}}setEditingState(C){const D=this.editing=C;this.editing=C,this.hasSeenNotice=!1,D&&m.TP.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:C,uid:D}=this;C&&D&&(0,s.oF)().publish(C,{sessionId:v,uid:D,action:this.editing?h.EditingStarted:h.EditingCanceled,timestamp:Date.now()})}watch(C){const D=(0,s.oF)();D&&C!==this.uid&&(this.channel={scope:n.qD.Grafana,namespace:"dashboard",path:`uid/${C}`},this.leave(),C&&(this.subscription=D.getStream(this.channel).subscribe(this.observer)),this.uid=C)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){o.Ny.reload()}}const b=new g},47118:(Y,I,e)=>{"use strict";e.d(I,{_w:()=>n,o$:()=>m,ot:()=>r});var t=e(14236),n=(l=>(l.NewValuesSameSchema="NewValuesSameSchema",l.FullFrame="FullFrame",l))(n||{});const r=(l,i)=>"type"in l&&l.type===i,s=Object.values(n),o=l=>"type"in l&&s.includes(l.type),m=l=>(0,t.ci)(l)&&"packetInfo"in l},39408:(Y,I,e)=>{"use strict";e.d(I,{l:()=>r});var t=e(89667),n=e(17172);async function r(){return(0,n.AI)().get("api/live/list").then(s=>{const o=s.channels??[],m={},l=o.map(i=>{if(i.data){const c=new Set,u=(0,t.or)(i.data);for(const f of u.fields)c.add(f.name);m[i.channel]=Array.from(c).map(f=>({value:f,label:f}))}return{value:i.channel,label:i.channel+" ["+i.minute_rate+" msg/min]"}});return{channelFields:m,channels:l}})}},81073:(Y,I,e)=>{"use strict";e.d(I,{I:()=>s});var t=e(32196),n=e(96540),r=e(62930);const s=({adjective:m="newer"})=>{const l=`Loading ${m} logs...`;return n.createElement("div",{className:o},n.createElement("div",null,l," ",n.createElement(r.y,{inline:!0})))},o=(0,t.css)`
  display: flex;
  justify-content: center;
`},93463:(Y,I,e)=>{"use strict";e.d(I,{A:()=>o});var t=e(32196),n=e(96540),r=e(40845);const s=["level","lvl","filename"],o=({labels:l})=>{const i=(0,r.of)(m),c=Object.keys(l).filter(u=>!u.startsWith("_")&&!s.includes(u));return c.length===0?n.createElement("span",{className:(0,t.cx)([i.logsLabels])},n.createElement("span",{className:(0,t.cx)([i.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([i.logsLabels])},c.sort().map(u=>{const f=l[u];if(!f)return;const d=`${u}: ${f}`;return n.createElement("span",{key:u,className:(0,t.cx)([i.logsLabel])},n.createElement("span",{className:(0,t.cx)([i.logsLabelValue]),title:d},f))}))},m=l=>({logsLabels:(0,t.css)`
      display: flex;
      flex-wrap: wrap;
      font-size: ${l.typography.size.xs};
    `,logsLabel:(0,t.css)`
      label: logs-label;
      display: flex;
      padding: ${l.spacing(0,.25)};
      background-color: ${l.colors.background.secondary};
      border-radius: ${l.shape.radius.default};
      margin: ${l.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:(0,t.css)`
      label: logs-label__value;
      display: inline-block;
      max-width: ${l.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},85492:(Y,I,e)=>{"use strict";e.d(I,{$:()=>c});var t=e(88838),n=e(96540),r=e(23257),s=e.n(r),o=e(21),m=e(40845);function l(u,f){return f.split(/;\s*/).reduce((d,E)=>{if(E==="color:rgba(0,0,0,0.5)")return{color:u.colors.text.secondary};const h=E.match(/([^:\s]+)\s*:\s*(.+)/);if(h&&h[1]&&h[2]){const y=h[1].replace(/-([a-z])/g,(a,v)=>v.toUpperCase());d[y]=h[2]}return d},{})}class i extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(f,d){return f.value===d.prevValue?null:{chunks:t.Ay.parse(f.value).spans.map(h=>h.css?{style:l(f.theme,h.css),text:h.text}:{text:h.text}),prevValue:f.value}}render(){const{chunks:f}=this.state;return f.map((d,E)=>{const h=this.props.highlight?.searchWords?n.createElement(s(),{key:E,textToHighlight:d.text,searchWords:this.props.highlight.searchWords,findChunks:o.Oq,highlightClassName:this.props.highlight.highlightClassName}):d.text;return d.style?n.createElement("span",{key:E,style:d.style,"data-testid":"ansiLogLine"},h):h})}}const c=(0,m.cV)(i);c.displayName="LogMessageAnsi"},42785:(Y,I,e)=>{"use strict";e.d(I,{Q:()=>i});var t=e(96540),n=e(76885),r=e(71733),s=e(43127),o=e(29158),m=e(10534),l=e(2913);const i=t.memo(({logText:c,onOpenContext:u,onPermalinkClick:f,onPinLine:d,onUnpinLine:E,pinned:h,row:y,showContextToggle:a,styles:v,mouseIsOver:g,onBlur:b,getRowContextQuery:P})=>{const C=a?a(y):!1,D=(0,t.useCallback)(S=>{S.stopPropagation()},[]),T=(0,t.useCallback)(async S=>{if(S.stopPropagation(),P&&(S.nativeEvent.ctrlKey||S.nativeEvent.metaKey||S.nativeEvent.shiftKey)){const p=window.open("about:blank"),x=await P(y,void 0,!1);if(x&&p){const A=n.kM.renderUrl(r.I.assureBaseUrl(`${(0,l.zj)().appSubUrl}explore`),{left:JSON.stringify({datasource:x.datasource,queries:[x],range:(0,s.E2)()})});p.location=A;return}p?.close()}u(y)},[u,P,y]),M=(0,t.useCallback)(S=>{!S.currentTarget.contains(S.relatedTarget)&&b&&b()},[b]),O=(0,t.useCallback)(()=>c,[c]);return t.createElement("span",{className:`log-row-menu ${v.rowMenu}`,onClick:D,onBlur:M},h&&!g&&t.createElement(o.K,{className:v.unPinButton,size:"md",name:"gf-pin",onClick:()=>E&&E(y),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),g&&t.createElement(t.Fragment,null,C&&t.createElement(o.K,{size:"md",name:"gf-show-context",onClick:T,tooltip:"Show context",tooltipPlacement:"top","aria-label":"Show context",tabIndex:0}),t.createElement(m.b,{className:v.copyLogButton,icon:"copy",variant:"secondary",fill:"text",size:"md",getText:O,tooltip:"Copy to clipboard",tooltipPlacement:"top",tabIndex:0}),h&&E&&t.createElement(o.K,{className:v.unPinButton,size:"md",name:"gf-pin",onClick:()=>E&&E(y),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line",tabIndex:0}),!h&&d&&t.createElement(o.K,{className:v.unPinButton,size:"md",name:"gf-pin",onClick:()=>d&&d(y),tooltip:"Pin line",tooltipPlacement:"top","aria-label":"Pin line",tabIndex:0}),f&&y.rowId!==void 0&&y.uid&&t.createElement(o.K,{tooltip:"Copy shortlink","aria-label":"Copy shortlink",tooltipPlacement:"top",size:"md",name:"share-alt",onClick:()=>f(y),tabIndex:0})))});i.displayName="LogRowMenuCell"},40455:(Y,I,e)=>{"use strict";e.d(I,{S:()=>l,a:()=>u});var t=e(96540),n=e(23257),r=e.n(n),s=e(21),o=e(85492),m=e(42785);const l=1e5,i=({hasAnsi:f,entry:d,highlights:E,styles:h})=>{const y=E&&E.length>0&&E[0]&&E[0].length>0&&d.length<l,a=E??[];if(f){const v=y?{searchWords:a,highlightClassName:h.logsRowMatchHighLight}:void 0;return t.createElement(o.$,{value:d,highlight:v})}else if(y)return t.createElement(r(),{textToHighlight:d,searchWords:a,findChunks:s.Oq,highlightClassName:h.logsRowMatchHighLight});return t.createElement(t.Fragment,null,d)},c=(f,d)=>{if(d)try{return JSON.stringify(JSON.parse(f),void 0,2)}catch{return f}return f},u=t.memo(f=>{const{row:d,wrapLogMessage:E,prettifyLogMessage:h,showContextToggle:y,styles:a,onOpenContext:v,onPermalinkClick:g,onUnpinLine:b,onPinLine:P,pinned:C,mouseIsOver:D,onBlur:T,getRowContextQuery:M}=f,{hasAnsi:O,raw:S}=d,p=(0,t.useMemo)(()=>c(S,h),[S,h]),x=(0,t.useMemo)(()=>D||C,[D,C]);return t.createElement(t.Fragment,null,t.createElement("td",{className:a.logsRowMessage},t.createElement("div",{className:E?a.positionRelative:a.horizontalScroll},t.createElement("button",{className:`${a.logLine} ${a.positionRelative}`},t.createElement(i,{hasAnsi:O,entry:p,highlights:d.searchWords,styles:a})))),t.createElement("td",{className:`log-row-menu-cell ${a.logRowMenuCell}`},x&&t.createElement(m.Q,{logText:p,row:d,showContextToggle:y,getRowContextQuery:M,onOpenContext:v,onPermalinkClick:g,onPinLine:P,onUnpinLine:b,pinned:C,styles:a,mouseIsOver:D,onBlur:T})))});u.displayName="LogRowMessage"},14647:(Y,I,e)=>{"use strict";e.d(I,{k:()=>X});var t=e(32196),n=e(41811),r=e(96540),s=e(41987),o=e(52622),m=e(32264),l=e(40845),i=e(14110),c=e(38138),u=e(91002);const f=({x:j,y:ne,onClickFilterValue:te,onClickFilterOutValue:oe,selection:ie,row:ue,close:be})=>{const ge=(0,r.useRef)(null),re=(0,l.of)(E);return(0,r.useEffect)(()=>{function Be(ve){ve.key==="Escape"&&be()}return document.addEventListener("keyup",Be),()=>{document.removeEventListener("keyup",Be)}},[be]),te||oe?r.createElement("div",{className:re.menu,style:{top:ne,left:j}},r.createElement(c.W,{ref:ge},r.createElement(c.W.Item,{label:"Copy selection",onClick:()=>{(0,u.Dk)(ie,ge),be(),d("copy",ie.length,ue.datasourceType)}}),te&&r.createElement(c.W.Item,{label:"Add as line contains filter",onClick:()=>{te(ie,ue.dataFrame.refId),be(),d("line_contains",ie.length,ue.datasourceType)}}),oe&&r.createElement(c.W.Item,{label:"Add as line does not contain filter",onClick:()=>{oe(ie,ue.dataFrame.refId),be(),d("line_does_not_contain",ie.length,ue.datasourceType)}}))):null};function d(j,ne,te){(0,i.rR)("grafana_explore_logs_popover_menu",{action:j,selectionLength:ne,datasourceType:te||"unknown"})}const E=j=>({menu:(0,t.css)({position:"fixed",zIndex:j.zIndex.modal})});class h{constructor(){this.seen=new Set,this.count=0}getKey(ne){this.count+=1;const te=`k_${ne}`;return this.seen.has(te)?`i_${this.count}`:(this.seen.add(te),te)}}var y=e(2543),a=e(72724),v=e(56034),g=e(14578),b=e(41260),P=e(10534),C=e(29158),D=e(14689),T=e(69147),M=e(3911);const O=j=>({logsStatsRow:(0,t.css)`
    label: logs-stats-row;
    margin: ${parseInt(j.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:(0,t.css)`
    label: logs-stats-row--active;
    color: ${j.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:(0,t.css)`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:(0,t.css)`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:(0,t.css)`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${j.spacing(.75)};
  `,logsStatsRowPercent:(0,t.css)`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${j.spacing(.75)};
    width: ${j.spacing(4.5)};
  `,logsStatsRowBar:(0,t.css)`
    label: logs-stats-row__bar;
    height: ${j.spacing(.5)};
    overflow: hidden;
    background: ${j.colors.text.disabled};
  `,logsStatsRowInnerBar:(0,t.css)`
    label: logs-stats-row__innerbar;
    height: ${j.spacing(.5)};
    overflow: hidden;
    background: ${j.colors.primary.main};
  `}),S=({active:j,count:ne,proportion:te,value:oe})=>{const ie=(0,l.of)(O),ue=`${Math.round(te*100)}%`,be={width:ue},ge=j?(0,t.cx)([ie.logsStatsRow,ie.logsStatsRowActive]):(0,t.cx)([ie.logsStatsRow]);return r.createElement("div",{className:ge},r.createElement("div",{className:(0,t.cx)([ie.logsStatsRowLabel])},r.createElement("div",{className:(0,t.cx)([ie.logsStatsRowValue]),title:oe},oe),r.createElement("div",{className:(0,t.cx)([ie.logsStatsRowCount])},ne),r.createElement("div",{className:(0,t.cx)([ie.logsStatsRowPercent])},ue)),r.createElement("div",{className:(0,t.cx)([ie.logsStatsRowBar])},r.createElement("div",{className:(0,t.cx)([ie.logsStatsRowInnerBar]),style:be})))};S.displayName="LogLabelStatsRow";const p=5,x=(0,M.N)(j=>({logsStats:(0,t.css)`
      label: logs-stats;
      background: inherit;
      color: ${j.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:(0,t.css)`
      label: logs-stats__header;
      border-bottom: 1px solid ${j.colors.border.medium};
      display: flex;
    `,logsStatsTitle:(0,t.css)`
      label: logs-stats__title;
      font-weight: ${j.typography.fontWeightMedium};
      padding-right: ${j.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:(0,t.css)`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:(0,t.css)`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class A extends r.PureComponent{render(){const{label:ne,rowCount:te,stats:oe,value:ie,theme:ue,isLabel:be}=this.props,ge=x(ue),re=oe.slice(0,p);let ye=re.find(De=>De.value===ie),Be=oe.slice(p);const ve=!ye;ve&&(ye=Be.find(De=>De.value===ie),Be=Be.filter(De=>De.value!==ie));const Me=Be.reduce((De,pe)=>De+pe.count,0),Se=re.reduce((De,pe)=>De+pe.count,0)+Me,We=Me/Se;return r.createElement("div",{className:ge.logsStats,"data-testid":"logLabelStats"},r.createElement("div",{className:ge.logsStatsHeader},r.createElement("div",{className:ge.logsStatsTitle},ne,": ",Se," of ",te," rows have that ",be?"label":"field")),r.createElement("div",{className:ge.logsStatsBody},re.map(De=>r.createElement(S,{key:De.value,...De,active:De.value===ie})),ve&&ye&&r.createElement(S,{key:ye.value,...ye,active:!0}),Me>0&&r.createElement(S,{key:"__OTHERS__",count:Me,value:"Other",proportion:We})))}}const R=(0,l.cV)(A);R.displayName="LogLabelStats";var B=e(77020);const U=(0,n.A)(j=>({wordBreakAll:(0,t.css)`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:(0,t.css)`
      & > button {
        color: ${j.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: ${j.shape.radius.circle};
        height: ${j.spacing(j.components.height.sm)};
        width: ${j.spacing(j.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${j.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:(0,t.css)`
      margin-left: ${j.spacing(1)};
    `,wrapLine:(0,t.css)`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:(0,t.css)`
      padding: 0 ${j.spacing(1)};
    `,logDetailsValue:(0,t.css)`
      display: flex;
      align-items: center;
      line-height: 22px;

      .log-details-value-copy {
        visibility: hidden;
      }
      &:hover {
        .log-details-value-copy {
          visibility: visible;
        }
      }
    `,buttonRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      gap: ${j.spacing(.5)};
      margin-left: ${j.spacing(.5)};
    `}));class F extends r.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:ne,parsedKeys:te,row:oe}=this.props;ne&&ne(te[0]),(0,i.rR)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:oe.datasourceType,logRowUid:oe.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:ne,parsedKeys:te,row:oe}=this.props;ne&&ne(te[0]),(0,i.rR)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:oe.datasourceType,logRowUid:oe.uid,type:"disable"})},this.isFilterLabelActive=async()=>{const{isFilterLabelActive:ne,parsedKeys:te,parsedValues:oe,row:ie}=this.props;return ne?await ne(te[0],oe[0],ie.dataFrame?.refId):!1},this.filterLabel=()=>{const{onClickFilterLabel:ne,parsedKeys:te,parsedValues:oe,row:ie}=this.props;ne&&ne(te[0],oe[0],(0,T.f8)(ie)||void 0),(0,i.rR)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ie.datasourceType,filterType:"include",logRowUid:ie.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:ne,parsedKeys:te,parsedValues:oe,row:ie}=this.props;ne&&ne(te[0],oe[0],(0,T.f8)(ie)||void 0),(0,i.rR)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ie.datasourceType,filterType:"exclude",logRowUid:ie.uid})},this.updateStats=()=>{const{getStats:ne}=this.props,te=ne(),oe=te?te.reduce((ie,ue)=>ie+ue.count,0):0;(!(0,y.isEqual)(this.state.fieldStats,te)||oe!==this.state.fieldCount)&&this.setState({fieldStats:te,fieldCount:oe})},this.showStats=()=>{const{isLabel:ne,row:te,app:oe}=this.props,{showFieldsStats:ie}=this.state;ie||this.updateStats(),this.toggleFieldsStats(),(0,i.rR)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:te.datasourceType,fieldType:ne?"label":"detectedField",type:ie?"close":"open",logRowUid:te.uid,app:oe})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(ne=>({showFieldsStats:!ne.showFieldsStats}))}generateClipboardButton(ne){const{theme:te}=this.props,oe=U(te);return r.createElement("div",{className:`log-details-value-copy ${oe.copyButton}`},r.createElement(P.b,{getText:()=>ne,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(ne,te){return r.createElement("table",null,r.createElement("tbody",null,ne?.map((oe,ie)=>r.createElement("tr",{key:`${oe}-${ie}`},r.createElement("td",null,oe,te&&oe!==""&&this.generateClipboardButton(oe))))))}render(){const{theme:ne,parsedKeys:te,parsedValues:oe,isLabel:ie,links:ue,displayedFields:be,wrapLogMessage:ge,onClickFilterLabel:re,onClickFilterOutLabel:ye,disableActions:Be,row:ve}=this.props,{showFieldsStats:Me,fieldStats:ke,fieldCount:Se}=this.state,We=U(ne),De=(0,B.D)(ne),pe=te==null?!1:te.length===1,Ne=oe==null?!1:oe.length===1,Le=!Be&&re&&ye,He=ve.dataFrame?.refId?` in query ${ve.dataFrame?.refId}`:"",je=!Ne&&oe!=null&&!oe.every(Ye=>Ye===""),at=be&&te!=null&&be.includes(te[0])?r.createElement(C.K,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):r.createElement(C.K,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return r.createElement(r.Fragment,null,r.createElement("tr",{className:De.logDetailsValue},r.createElement("td",{className:De.logsDetailsIcon},r.createElement("div",{className:We.buttonRow},Le&&r.createElement(r.Fragment,null,r.createElement(K,{name:"search-plus",onClick:this.filterLabel,isActive:()=>this.isFilterLabelActive(),tooltipSuffix:He}),r.createElement(C.K,{name:"search-minus",tooltip:`Filter out value${He}`,onClick:this.filterOutLabel})),!Be&&be&&at,!Be&&r.createElement(C.K,{variant:Me?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!pe,onClick:this.showStats}))),r.createElement("td",{className:De.logDetailsLabel},pe?te[0]:this.generateMultiVal(te)),r.createElement("td",{className:(0,t.cx)(We.wordBreakAll,ge&&We.wrapLine)},r.createElement("div",{className:We.logDetailsValue},Ne?oe[0]:this.generateMultiVal(oe,!0),Ne&&this.generateClipboardButton(oe[0]),r.createElement("div",{className:(0,t.cx)((Ne||je)&&We.adjoiningLinkButton)},ue?.map((Ye,$e)=>r.createElement("span",{key:`${Ye.title}-${$e}`},r.createElement(D.R,{link:Ye}))))))),Me&&pe&&Ne&&r.createElement("tr",null,r.createElement("td",null,r.createElement(C.K,{variant:Me?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),r.createElement("td",{colSpan:2},r.createElement("div",{className:We.logDetailsStats},r.createElement(R,{stats:ke,label:te[0],value:oe[0],rowCount:Se,isLabel:ie})))))}}const K=({isActive:j,tooltipSuffix:ne,...te})=>{const[oe,ie]=(0,r.useState)(!1),ue=oe?"Remove filter":"Filter for value";return(0,r.useEffect)(()=>{j().then(ie)},[j]),r.createElement(C.K,{...te,variant:oe?"primary":void 0,tooltip:ue+ne})},w=(0,l.cV)(F);w.displayName="LogDetailsRow";var L=e(70377);class V extends r.PureComponent{render(){const{app:ne,row:te,theme:oe,hasError:ie,onClickFilterOutLabel:ue,onClickFilterLabel:be,getRows:ge,showDuplicates:re,className:ye,onClickShowField:Be,onClickHideField:ve,displayedFields:Me,getFieldLinks:ke,wrapLogMessage:Se,styles:We}=this.props,De=(0,B.L)(oe,te.logLevel),pe=te.labels?te.labels:{},Ne=Object.keys(pe).length>0,Le=(0,L.jE)(te,ke);let He=Le.filter(se=>se.links?.length);const je=He.filter(se=>se.fieldIndex!==te.entryFieldIndex).sort(),at=He.filter(se=>se.fieldIndex===te.entryFieldIndex).sort(),Ye=(0,L.qE)(at),$e=je&&je.length>0||Ye&&Ye.length>0,xe=te.dataFrame.meta?.type===b.m.LogLines?[]:Le.filter(se=>se.links?.length===0&&se.fieldIndex!==te.entryFieldIndex).sort(),Fe=xe&&xe.length>0,Ee=ie?"":`${De.logsRowLevelColor} ${We.logsRowLevel} ${We.logsRowLevelDetails}`;return r.createElement("tr",{className:(0,t.cx)(ye,We.logDetails)},re&&r.createElement("td",null),r.createElement("td",{className:Ee,"aria-label":"Log level"}),r.createElement("td",{colSpan:4},r.createElement("div",{className:We.logDetailsContainer},r.createElement("table",{className:We.logDetailsTable},r.createElement("tbody",null,(Ne||Fe)&&r.createElement("tr",null,r.createElement("td",{colSpan:100,className:We.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(pe).sort().map((se,ae)=>{const fe=pe[se];return r.createElement(w,{key:`${se}=${fe}-${ae}`,parsedKeys:[se],parsedValues:[fe],isLabel:!0,getStats:()=>(0,u.Tj)(ge(),se),onClickFilterOutLabel:ue,onClickFilterLabel:be,onClickShowField:Be,onClickHideField:ve,row:te,app:ne,wrapLogMessage:Se,displayedFields:Me,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),xe.map((se,ae)=>{const{keys:fe,values:Ce,fieldIndex:Re}=se;return r.createElement(w,{key:`${fe[0]}=${Ce[0]}-${ae}`,parsedKeys:fe,parsedValues:Ce,onClickShowField:Be,onClickHideField:ve,onClickFilterOutLabel:ue,onClickFilterLabel:be,getStats:()=>(0,u.s2)(te.dataFrame.fields[Re].values),displayedFields:Me,wrapLogMessage:Se,row:te,app:ne,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),$e&&r.createElement("tr",null,r.createElement("td",{colSpan:100,className:We.logDetailsHeading,"aria-label":"Data Links"},"Links")),je.map((se,ae)=>{const{keys:fe,values:Ce,links:Re,fieldIndex:Oe}=se;return r.createElement(w,{key:`${fe[0]}=${Ce[0]}-${ae}`,parsedKeys:fe,parsedValues:Ce,links:Re,onClickShowField:Be,onClickHideField:ve,getStats:()=>(0,u.s2)(te.dataFrame.fields[Oe].values),displayedFields:Me,wrapLogMessage:Se,row:te,app:ne,disableActions:!1})}),Ye?.map((se,ae)=>{const{keys:fe,values:Ce,links:Re,fieldIndex:Oe}=se;return r.createElement(w,{key:`${fe[0]}=${Ce[0]}-${ae}`,parsedKeys:fe,parsedValues:Ce,links:Re,onClickShowField:Be,onClickHideField:ve,getStats:()=>(0,u.s2)(te.dataFrame.fields[Oe].values),displayedFields:Me,wrapLogMessage:Se,row:te,app:ne,disableActions:!0})}),!Fe&&!Ne&&!$e&&r.createElement("tr",null,r.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const N=(0,l.cV)(V);N.displayName="LogDetails";var z=e(93463),J=e(40455),G=e(42785);const H=r.memo(j=>{const{row:ne,detectedFields:te,getFieldLinks:oe,wrapLogMessage:ie,styles:ue,mouseIsOver:be,pinned:ge,...re}=j,ye=ie?"":q.noWrap,Be=(0,r.useMemo)(()=>(0,L.jE)(ne,oe),[oe,ne]),ve=(0,r.useMemo)(()=>{let ke="";for(let Se=0;Se<te.length;Se++){const We=te[Se],De=Be.find(pe=>{const{keys:Ne}=pe;return Ne[0]===We});De&&(ke+=` ${We}=${De.values}`),ne.labels[We]!==void 0&&ne.labels[We]!==null&&(ke+=` ${We}=${ne.labels[We]}`)}return ke.trimStart()},[te,Be,ne.labels]),Me=(0,r.useMemo)(()=>be||ge,[be,ge]);return r.createElement(r.Fragment,null,r.createElement("td",{className:ue.logsRowMessage},r.createElement("div",{className:ye},ve)),r.createElement("td",{className:`log-row-menu-cell ${ue.logRowMenuCell}`},Me&&r.createElement(G.Q,{logText:ve,row:ne,styles:ue,pinned:ge,mouseIsOver:be,...re})))}),q={noWrap:(0,t.css)`
    white-space: nowrap;
  `};H.displayName="LogRowMessageDisplayedFields";class le extends r.PureComponent{constructor(ne){super(ne),this.state={permalinked:!1,showingContext:!1,showDetails:!1,mouseIsOver:!1},this.debouncedContextClose=(0,y.debounce)(()=>{this.setState({showingContext:!1})},3e3),this.onOpenContext=te=>{this.setState({showingContext:!0}),this.props.onOpenContext(te,this.debouncedContextClose)},this.onRowClick=te=>{this.props.handleTextSelection?.(te,this.props.row)||this.props.enableLogDetails&&((0,i.rR)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(oe=>({showDetails:!oe.showDetails})))},this.onMouseEnter=()=>{this.setState({mouseIsOver:!0}),this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseMove=te=>{this.props.handleTextSelection&&document.getSelection()?.toString()&&te.buttons>0&&this.setState({mouseIsOver:!1})},this.onMouseLeave=()=>{this.setState({mouseIsOver:!1}),this.props.onLogRowHover&&this.props.onLogRowHover(void 0)},this.scrollToLogRow=(te,oe=!1)=>{const{row:ie,permalinkedRowId:ue,scrollIntoView:be,containerRendered:ge}=this.props;if(ue!==ie.uid){(te.permalinked||oe)&&this.setState({permalinked:!1});return}!this.state.permalinked&&ge&&this.logLineRef.current&&be&&(be(this.logLineRef.current),(0,i.rR)("grafana_explore_logs_permalink_opened",{datasourceType:ie.datasourceType??"unknown",logRowUid:ie.uid}),this.setState({permalinked:!0}))},this.escapeRow=(0,n.A)((te,oe)=>te.hasUnescapedContent&&oe?{...te,entry:(0,u.Hw)(te.entry),raw:(0,u.Hw)(te.raw)}:te),this.logLineRef=r.createRef()}renderTimeStamp(ne){return(0,a.LE)(ne,{timeZone:this.props.timeZone,defaultWithMS:!0})}componentDidMount(){this.scrollToLogRow(this.state,!0)}componentDidUpdate(ne,te){this.scrollToLogRow(te)}render(){const{getRows:ne,onClickFilterLabel:te,onClickFilterOutLabel:oe,onClickShowField:ie,onClickHideField:ue,enableLogDetails:be,row:ge,showDuplicates:re,showContextToggle:ye,showLabels:Be,showTime:ve,displayedFields:Me,wrapLogMessage:ke,prettifyLogMessage:Se,theme:We,getFieldLinks:De,forceEscape:pe,app:Ne,styles:Le,getRowContextQuery:He}=this.props,{showDetails:je,showingContext:at,permalinked:Ye}=this.state,$e=(0,B.L)(We,ge.logLevel),{errorMessage:xe,hasError:Fe}=(0,u.Ei)(ge),Ee=(0,t.cx)(Le.logsRow,{[Le.errorLogRow]:Fe,[Le.highlightBackground]:at||Ye}),se=(0,t.cx)(Le.logsRow,{[Le.errorLogRow]:Fe,[Le.highlightBackground]:Ye&&!this.state.showDetails}),ae=this.escapeRow(ge,pe);return r.createElement(r.Fragment,null,r.createElement("tr",{ref:this.logLineRef,className:Ee,onClick:this.onRowClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,onFocus:this.onMouseEnter},re&&r.createElement("td",{className:Le.logsRowDuplicates},ae.duplicates&&ae.duplicates>0?`${ae.duplicates+1}x`:null),r.createElement("td",{className:Fe?"":`${$e.logsRowLevelColor} ${Le.logsRowLevel}`},Fe&&r.createElement(v.m,{content:`Error: ${xe}`,placement:"right",theme:"error"},r.createElement(g.I,{className:Le.logIconError,name:"exclamation-triangle",size:"xs"}))),be&&r.createElement("td",{title:je?"Hide log details":"See log details",className:Le.logsRowToggleDetails},r.createElement(g.I,{className:Le.topVerticalAlign,name:je?"angle-down":"angle-right"})),ve&&r.createElement("td",{className:Le.logsRowLocalTime},this.renderTimeStamp(ge.timeEpochMs)),Be&&ae.uniqueLabels&&r.createElement("td",{className:Le.logsRowLabels},r.createElement(z.A,{labels:ae.uniqueLabels})),Me&&Me.length>0?r.createElement(H,{row:ae,showContextToggle:ye,detectedFields:Me,getFieldLinks:De,wrapLogMessage:ke,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,styles:Le,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave}):r.createElement(J.a,{row:ae,showContextToggle:ye,getRowContextQuery:He,wrapLogMessage:ke,prettifyLogMessage:Se,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,app:Ne,styles:Le,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver,onBlur:this.onMouseLeave})),this.state.showDetails&&r.createElement(N,{className:se,showDuplicates:re,getFieldLinks:De,onClickFilterLabel:te,onClickFilterOutLabel:oe,onClickShowField:ie,onClickHideField:ue,getRows:ne,row:ae,wrapLogMessage:ke,hasError:Fe,displayedFields:Me,app:Ne,styles:Le,isFilterLabelActive:this.props.isFilterLabelActive}))}}const me=(0,l.cV)(le);me.displayName="LogRow";const k=100;class ee extends r.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.logRowsRef=(0,r.createRef)(),this.state={renderAll:!1,selection:"",selectedRow:null,popoverMenuCoordinates:{x:0,y:0}},this.openContext=(ne,te)=>{this.props.onOpenContext&&this.props.onOpenContext(ne,te)},this.handleSelection=(ne,te)=>{if(this.popoverMenuSupported()===!1)return!1;const oe=document.getSelection()?.toString();if(!oe||!this.logRowsRef.current)return!1;const ie=270,ue=105,be=ne.clientX+ie>window.innerWidth?window.innerWidth-ie:ne.clientX,ge=ne.clientY+ue>window.innerHeight?window.innerHeight-ue:ne.clientY;return this.setState({selection:oe,popoverMenuCoordinates:{x:be,y:ge},selectedRow:te}),document.addEventListener("click",this.handleDeselection),document.addEventListener("contextmenu",this.handleDeselection),!0},this.handleDeselection=ne=>{if((0,u.a8)(ne.target)&&!this.logRowsRef.current?.contains(ne.target)){this.closePopoverMenu();return}document.getSelection()?.toString()},this.closePopoverMenu=()=>{document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),this.setState({selection:"",popoverMenuCoordinates:{x:0,y:0},selectedRow:null})},this.makeGetRows=(0,n.A)(ne=>()=>ne),this.sortLogs=(0,n.A)((ne,te)=>(0,u.oR)(ne,te))}static{this.defaultProps={previewLimit:k}}popoverMenuSupported(){return!m.$.featureToggles.logRowsPopoverMenu||this.props.app!==s.Jk.Explore?!1:!!(this.props.onClickFilterOutValue||this.props.onClickFilterValue)}componentDidMount(){const{logRows:ne,previewLimit:te}=this.props,ie=(ne?ne.length:0)<=te*2;ie?this.setState({renderAll:ie}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){document.removeEventListener("click",this.handleDeselection),document.removeEventListener("contextmenu",this.handleDeselection),document.removeEventListener("selectionchange",this.handleDeselection),this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{deduplicatedRows:ne,logRows:te,dedupStrategy:oe,theme:ie,logsSortOrder:ue,previewLimit:be,...ge}=this.props,{renderAll:re}=this.state,ye=(0,B.D)(ie),Be=ne||te,ve=te&&te.length>0,Me=Be?Be.reduce((He,je)=>je.duplicates?He+je.duplicates:He,0):0,ke=oe!==o.fY.none&&Me>0,Se=Be||[],We=ue?this.sortLogs(Se,ue):Se,De=We.slice(0,be),pe=We.slice(be,We.length),Ne=this.makeGetRows(We),Le=new h;return r.createElement("div",{className:ye.logRows,ref:this.logRowsRef},this.state.selection&&this.state.selectedRow&&r.createElement(f,{close:this.closePopoverMenu,row:this.state.selectedRow,selection:this.state.selection,...this.state.popoverMenuCoordinates,onClickFilterValue:ge.onClickFilterValue,onClickFilterOutValue:ge.onClickFilterOutValue}),r.createElement("table",{className:(0,t.cx)(ye.logsRowsTable,this.props.overflowingContent?"":ye.logsRowsTableContain)},r.createElement("tbody",null,ve&&De.map(He=>r.createElement(me,{key:Le.getKey(He.uid),getRows:Ne,row:He,showDuplicates:ke,logsSortOrder:ue,onOpenContext:this.openContext,styles:ye,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===He.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...ge})),ve&&re&&pe.map(He=>r.createElement(me,{key:Le.getKey(He.uid),getRows:Ne,row:He,showDuplicates:ke,logsSortOrder:ue,onOpenContext:this.openContext,styles:ye,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===He.uid,isFilterLabelActive:this.props.isFilterLabelActive,handleTextSelection:this.popoverMenuSupported()?this.handleSelection:void 0,...ge})),ve&&!re&&r.createElement("tr",null,r.createElement("td",{colSpan:5},"Rendering ",We.length-be," rows...")))))}}const X=(0,l.cV)(ee);X.displayName="LogsRows"},77020:(Y,I,e)=>{"use strict";e.d(I,{D:()=>i,L:()=>l});var t=e(32196),n=e(41811),r=e(84140),s=e(9557),o=e(23596),m=e(16797);const l=(c,u)=>{let f=c.isLight?c.v1.palette.gray5:c.v1.palette.gray2;switch(u){case s.$b.crit:case s.$b.critical:f="#705da0";break;case s.$b.error:case s.$b.err:f="#e24d42";break;case s.$b.warning:case s.$b.warn:f=c.colors.warning.main;break;case s.$b.info:f="#7eb26d";break;case s.$b.debug:f="#1f78c1";break;case s.$b.trace:f="#6ed0e0";break}return{logsRowLevelColor:(0,t.css)`
      &::after {
        background-color: ${f};
      }
    `}},i=(0,n.A)(c=>{const u=m.hoverColor(c.colors.background.secondary,c),f=(0,r.A)(c.components.dashboard.background).setAlpha(.7).toRgbString();return{logsRowLevel:(0,t.css)`
      label: logs-row__level;
      max-width: ${c.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${c.spacing(.5)};
      }
    `,logsRowMatchHighLight:(0,t.css)`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${c.components.textHighlight.text}
      background-color: ${c.components.textHighlight};
    `,logRows:(0,t.css)({position:"relative"}),logsRowsTable:(0,t.css)`
      label: logs-rows;
      font-family: ${c.typography.fontFamilyMonospace};
      font-size: ${c.typography.bodySmall.fontSize};
      width: 100%;
      position: relative;
    `,logsRowsTableContain:(0,t.css)`
      contain: strict;
    `,highlightBackground:(0,t.css)`
      background-color: ${(0,r.A)(c.colors.info.transparent).setAlpha(.25).toString()};
    `,logsRow:(0,t.css)`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          z-index: 1;
        }

        background: ${u};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${c.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:(0,t.css)`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:(0,t.css)`
      color: ${c.colors.warning.main};
    `,logsRowToggleDetails:(0,t.css)`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:(0,t.css)`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:(0,t.css)`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:(0,t.css)`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,copyLogButton:(0,t.css)`
      padding: 0 0 0 ${c.spacing(.5)};
      height: ${c.spacing(3)};
      width: ${c.spacing(3.25)};
      line-height: ${c.spacing(2.5)};
      overflow: hidden;
      &:hover {
          background-color: ${o.alpha(c.colors.text.primary,.12)};
        }
      }
    `,logDetailsContainer:(0,t.css)`
      label: logs-row-details-table;
      border: 1px solid ${c.colors.border.medium};
      padding: 0 ${c.spacing(1)} ${c.spacing(1)};
      border-radius: ${c.shape.radius.default};
      margin: ${c.spacing(2.5)} ${c.spacing(1)} ${c.spacing(2.5)} ${c.spacing(2)};
      cursor: default;
    `,logDetailsTable:(0,t.css)`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:(0,t.css)`
      label: logs-row-details__icon;
      position: relative;
      color: ${c.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${c.spacing(.75)};
    `,logDetailsLabel:(0,t.css)`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${c.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:(0,t.css)`
      label: logs-row-details__heading;
      font-weight: ${c.typography.fontWeightBold};
      padding: ${c.spacing(1)} 0 ${c.spacing(.5)};
    `,logDetailsValue:(0,t.css)`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${u};
      }
    `,topVerticalAlign:(0,t.css)`
      label: topVerticalAlign;
      margin-top: -${c.spacing(.9)};
      margin-left: -${c.spacing(.25)};
    `,detailsOpen:(0,t.css)`
      &:hover {
        background-color: ${m.hoverColor(c.colors.background.primary,c)};
      }
    `,errorLogRow:(0,t.css)`
      label: erroredLogRow;
      color: ${c.colors.text.secondary};
    `,positionRelative:(0,t.css)`
      label: positionRelative;
      position: relative;
    `,rowWithContext:(0,t.css)`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${f};
      display: inherit;
    `,horizontalScroll:(0,t.css)`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:(0,t.css)`
      display: block;
      margin-left: 0px;
    `,rowMenu:(0,t.css)`
      label: rowMenu;
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${c.colors.background.primary};
      box-shadow: ${c.shadows.z3};
      padding: ${c.spacing(.5,1,.5,1)};
      z-index: 100;
      gap: ${c.spacing(.5)};

      & > button {
        margin: 0;
      }
    `,logRowMenuCell:(0,t.css)`
      position: sticky;
      z-index: ${c.zIndex.dropdown};
      margin-top: -${c.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:(0,t.css)`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${c.typography.fontFamilyMonospace};
      font-size: ${c.typography.bodySmall.fontSize};
      letter-spacing: ${c.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:(0,t.css)`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:(0,t.css)`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${c.colors.background.primary};
      }
    `,visibleRowMenu:(0,t.css)`
      label: visibleRowMenu;
      aspect-ratio: 1/1;
      z-index: 90;
    `,linkButton:(0,t.css)`
      label: linkButton;
      > button {
        padding-top: ${c.spacing(.5)};
      }
    `,hidden:(0,t.css)`
      label: hidden;
      visibility: hidden;
    `,unPinButton:(0,t.css)`
      height: ${c.spacing(3)};
      line-height: ${c.spacing(2.5)};
    `}})},81166:(Y,I,e)=>{"use strict";e.d(I,{V:()=>B});var t=e(32196),n=e(2543),r=e(96540),s=e(16817),o=e(39070),m=e(52622),l=e(9557),i=e(47232),c=e(14110),u=e(32264),f=e(40845),d=e(37390),E=e(55852),h=e(33390),y=e(97186),a=e(29436),v=e(31678),g=e(69147),b=e(91002),P=e(81073),C=e(14647),D=e(15292);function T(U){return{buttons:(0,t.css)({display:"flex",gap:U.spacing(1)})}}const M=U=>{const F=(0,f.of)(T),{wrapLines:K,onChangeWrapLines:w,onScrollCenterClick:L}=U,V=(0,r.useCallback)(N=>{const z=N.currentTarget.checked;(0,c.rR)("grafana_explore_logs_log_context_toggle_lines_clicked",{state:z}),w(z)},[w]);return r.createElement("div",{className:F.buttons},r.createElement(D.K,{showLabel:!0,value:K,onChange:V,label:"Wrap lines"}),r.createElement(E.$n,{variant:"secondary",onClick:L},"Center matched line"))},O=U=>({modal:(0,t.css)`
      width: 85vw;
      ${U.breakpoints.down("md")} {
        width: 100%;
      }
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    `,sticky:(0,t.css)`
      position: sticky;
      z-index: 1;
      top: -1px;
      bottom: -1px;
    `,entry:(0,t.css)`
      & > td {
        padding: ${U.spacing(1)} 0 ${U.spacing(1)} 0;
      }
      background: ${U.colors.emphasize(U.colors.background.secondary)};

      & > table {
        margin-bottom: 0;
      }

      & .log-row-menu {
        margin-top: -6px;
      }
    `,datasourceUi:(0,t.css)`
      padding-bottom: ${U.spacing(1.25)};
      display: flex;
      align-items: center;
    `,logRowGroups:(0,t.css)`
      overflow: auto;
      max-height: 75%;
      align-self: stretch;
      display: inline-block;
      border: 1px solid ${U.colors.border.weak};
      border-radius: ${U.shape.radius.default};
      & > table {
        min-width: 100%;
      }
    `,flexColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      padding: 0 ${U.spacing(3)} ${U.spacing(3)} ${U.spacing(3)};
    `,flexRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      & > div:last-child {
        margin-left: auto;
      }
    `,noMarginBottom:(0,t.css)`
      & > table {
        margin-bottom: 0;
      }
    `,hidden:(0,t.css)`
      display: none;
    `,paddingTop:(0,t.css)`
      padding-top: ${U.spacing(1)};
    `,paddingBottom:(0,t.css)`
      padding-bottom: ${U.spacing(1)};
    `,link:(0,t.css)`
      color: ${U.colors.text.secondary};
      font-size: ${U.typography.bodySmall.fontSize};
      :hover {
        color: ${U.colors.text.link};
      }
    `,loadingCell:(0,t.css)`
      position: sticky;
      left: 50%;
      display: inline-block;
      transform: translateX(-50%);
    `}),S=()=>({above:{loadingState:o.Gu.NotStarted,rows:[]},below:{loadingState:o.Gu.NotStarted,rows:[]}}),p=(U,F)=>U==="above"&&F===m.uH.Descending||U==="below"&&F===m.uH.Ascending?l.ZF.Forward:l.ZF.Backward,x=(U,F)=>({...U,dataFrame:{...U.dataFrame,refId:`context_${F.above}_${F.below}`}}),A=(U,F)=>U.some(K=>K.entry===F.entry&&K.timeEpochNs===F.timeEpochNs),R=100,B=({row:U,open:F,logsSortOrder:K,timeZone:w,getLogRowContextUi:L,getRowContextQuery:V,onClose:N,getRowContext:z})=>{const J=(0,r.useRef)(null),G=(0,r.useRef)(null),H=(0,r.useRef)(null),q=(0,r.useRef)(null),le=(0,r.useRef)(null),me=(0,r.useRef)(null),k=(0,r.useRef)(null),ee=(0,r.useRef)({above:0,below:0}),X=(0,v.useDispatch)(),j=(0,f.$j)(),ne=O(j),[te,oe]=(0,r.useState)(!0),[ie,ue]=(0,r.useState)(S()),be=(xe,Fe)=>{ue(Ee=>{const se={...Ee};return se[xe]=Fe(Ee[xe]),se})},ge=(0,r.useRef)(1),[re,ye]=(0,r.useState)(null),[Be,ve]=(0,r.useState)(h.A.getBool(y.$.logContextWrapLogMessage,h.A.getBool(y.$.wrapLogMessage,!0))),Me=(0,r.useCallback)(()=>{const{below:xe,above:Fe}=ie,Ee=(0,b.oR)([...xe.rows,U,...Fe.rows],m.uH.Ascending),se=Ee[0].timeEpochMs;let ae=Ee[Ee.length-1].timeEpochMs;se===ae&&(ae+=1);const fe=(0,i.KQ)(se),Ce=(0,i.KQ)(ae);return{from:fe,to:Ce,raw:{from:fe,to:Ce}}},[ie,U]),ke=(0,r.useCallback)(async()=>{const xe=V?await V(U):null;ye(xe)},[U,V]),Se=async()=>{await ke(),ue(S()),ee.current={above:0,below:0},ge.current+=1},We=async(xe,Fe)=>{ee.current[xe]+=1;const Ee=Fe.at(xe==="above"?0:-1);if(Ee==null)throw new Error("should never happen. the array always contains at least 1 item (the middle row)");(0,c.rR)("grafana_explore_logs_log_context_load_more_called",{datasourceType:Ee.datasourceType,above:ee.current.above,below:ee.current.below});const se=p(xe,K),ae=await z(x(Ee,ee.current),{limit:R,direction:se}),fe=(0,g.HT)(ae.data).rows;return K===m.uH.Ascending&&fe.reverse(),fe.filter(Re=>!A(Fe,Re))};(0,r.useEffect)(()=>{F&&ke()},[ke,F]);const[De,pe]=(0,r.useState)([]),Ne=xe=>{De.indexOf(xe)===-1&&pe([...De,xe])},Le=xe=>{const Fe=De.indexOf(xe);Fe>-1&&(De.splice(Fe,1),pe([...De]))},He=async xe=>{const{below:Fe,above:Ee}=ie;if(ie[xe].loadingState===o.Gu.Loading)return;be(xe,fe=>({...fe,loadingState:o.Gu.Loading}));const ae=ge.current;try{const fe=[...Ee.rows,U,...Fe.rows],Ce=(await We(xe,fe)).map(Ze=>!Ze.searchWords||!Ze.searchWords?.length?{...Ze,searchWords:U.searchWords}:Ze),[Re,Oe]=(0,n.partition)(Ce,Ze=>Ze.timeEpochNs>U.timeEpochNs),ze=K===m.uH.Ascending?Oe:Re,Xe=K===m.uH.Ascending?Re:Oe;ae===ge.current&&ue(Ze=>{const et=ze.length>0?(0,b.oR)([...ze,...Ze.above.rows],K):Ze.above.rows,nt=Xe.length>0?(0,b.oR)([...Ze.below.rows,...Xe],K):Ze.below.rows;return{above:{rows:et,loadingState:xe==="above"?Ce.length===0?o.Gu.Done:o.Gu.NotStarted:Ze.above.loadingState},below:{rows:nt,loadingState:xe==="below"?Ce.length===0?o.Gu.Done:o.Gu.NotStarted:Ze.below.loadingState}}})}catch{be(xe,fe=>({rows:fe.rows,loadingState:o.Gu.Error}))}},je=async(xe,Fe)=>{for(const Ee of xe){if(!Ee.isIntersecting)continue;const se=Ee.target;se===me.current?He("above"):se===k.current&&He("below")}};(0,r.useEffect)(()=>{const xe=J.current,Fe=me.current,Ee=k.current;if(xe==null)return;const se=new IntersectionObserver(je,{root:xe});return Fe!=null&&se.observe(Fe),Ee!=null&&se.observe(Ee),()=>{se.disconnect()}});const at=(0,r.useCallback)(()=>{H.current?.scrollIntoView({block:"center"}),G.current?.scrollIntoView({block:"center"})},[H,G]);(0,r.useLayoutEffect)(()=>{const xe=J.current;if(xe==null)return;const Fe=le.current,Ee=xe.clientHeight;if(le.current=Ee,Fe!==Ee){at();return}if(ee.current.above<=1&&ee.current.below<=1){at();return}const se=q.current,ae=xe.scrollHeight;if(q.current=ae,se!=null){const fe=xe.scrollTop+(ae-se);xe.scrollTop=fe}},[ie.above.rows,at]),(0,s.A)(ke,[V,U]);const Ye=ie.above.loadingState,$e=ie.below.loadingState;return r.createElement(d.a,{isOpen:F,title:"Log context",contentClassName:ne.flexColumn,className:ne.modal,onDismiss:N},u.$.featureToggles.logsContextDatasourceUi&&L&&r.createElement("div",{className:ne.datasourceUi},L(U,Se)),r.createElement("div",{className:(0,t.cx)(ne.flexRow,ne.paddingBottom)},r.createElement("div",null,r.createElement(M,{wrapLines:Be,onChangeWrapLines:ve,onScrollCenterClick:at}))),r.createElement("div",{ref:J,className:ne.logRowGroups},r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:ne.loadingCell},Ye!==o.Gu.Done&&Ye!==o.Gu.Error&&r.createElement("div",{ref:me},r.createElement(P.I,{adjective:"newer"})),Ye===o.Gu.Error&&r.createElement("div",null,"Error loading log more logs."),Ye===o.Gu.Done&&r.createElement("div",null,"No more logs available."))),r.createElement("tr",null,r.createElement("td",{className:ne.noMarginBottom},r.createElement(C.k,{logRows:ie.above.rows,dedupStrategy:m.fY.none,showLabels:h.A.getBool(y.$.showLabels,!1),showTime:h.A.getBool(y.$.showTime,!0),wrapLogMessage:Be,prettifyLogMessage:h.A.getBool(y.$.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:w,displayedFields:De,onClickShowField:Ne,onClickHideField:Le}))),r.createElement("tr",{ref:H}),r.createElement("tr",{ref:G,className:(0,t.cx)(ne.entry,te?ne.sticky:null),"data-testid":"entry-row"},r.createElement("td",{className:ne.noMarginBottom},r.createElement(C.k,{logRows:[U],dedupStrategy:m.fY.none,showLabels:h.A.getBool(y.$.showLabels,!1),showTime:h.A.getBool(y.$.showTime,!0),wrapLogMessage:Be,prettifyLogMessage:h.A.getBool(y.$.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:w,displayedFields:De,onClickShowField:Ne,onClickHideField:Le,onUnpinLine:()=>oe(!1),onPinLine:()=>oe(!0),pinnedRowId:te?U.uid:void 0,overflowingContent:!0}))),r.createElement("tr",null,r.createElement("td",null,r.createElement(r.Fragment,null,r.createElement(C.k,{logRows:ie.below.rows,dedupStrategy:m.fY.none,showLabels:h.A.getBool(y.$.showLabels,!1),showTime:h.A.getBool(y.$.showTime,!0),wrapLogMessage:Be,prettifyLogMessage:h.A.getBool(y.$.prettifyLogMessage,!1),enableLogDetails:!0,timeZone:w,displayedFields:De,onClickShowField:Ne,onClickHideField:Le})))),r.createElement("tr",null,r.createElement("td",{className:ne.loadingCell},$e!==o.Gu.Done&&$e!==o.Gu.Error&&r.createElement("div",{ref:k},r.createElement(P.I,{adjective:"older"})),$e===o.Gu.Error&&r.createElement("div",null,"Error loading log more logs."),$e===o.Gu.Done&&r.createElement("div",null,"No more logs available.")))))),r.createElement(d.a.ButtonRow,null,re?.datasource?.uid&&r.createElement(E.$n,{variant:"secondary",onClick:async()=>{let xe=U.uid;U.dataFrame.refId&&(xe=U.uid.replace(U.dataFrame.refId,re.refId)),X((0,a.ve)({queries:[re],range:Me(),datasourceUid:re.datasource.uid,panelsState:{logs:{id:xe}}})),N(),(0,c.rR)("grafana_explore_logs_log_context_open_split_view_clicked",{datasourceType:U.datasourceType,logRowUid:U.uid})}},"Open in split view")))}},70377:(Y,I,e)=>{"use strict";e.d(I,{FE:()=>l,jE:()=>o,qE:()=>m});var t=e(2543),n=e.n(t),r=e(87490),s=e(98101);const o=(f,d)=>l(f,d),m=f=>{let d=[];return f.forEach(E=>{E.links?.forEach(h=>{if(h.variables){const y=h.variables.map(v=>{const g=v.variableName,b=v.fieldPath?`.${v.fieldPath}`:"";return`${g}${b}`}),a=h.variables.map(v=>v.found?v.value:"");d.push({keys:y,values:a,links:[h],fieldIndex:E.fieldIndex})}})}),d},l=(f,d)=>u(f).map(h=>{const y=d?d(h,f.rowIndex,f.dataFrame):[],a=h.values[f.rowIndex],v=typeof a=="string"||typeof a=="number"?a.toString():(0,r.MA)(a);return{keys:[h.name],values:[v],links:y,fieldIndex:h.index}});function i(f,d){const E=(0,s.O)(f);if(E===null)return new Set;const h=new Set(E.extraFields.map(y=>y.index));return E.severityField!==null&&h.add(E.severityField.index),d.keepBody&&h.add(E.bodyField.index),d.keepTimestamp&&h.add(E.timeField.index),h}function c(f,d){const E=f.fields.map((v,g)=>({...v,index:g})),h=i(f,d??{}),[y,a]=partition(E,v=>v.config.custom?.hidden?!1:(v.config.links??[]).length>0?!0:h.has(v.index));return{visible:y,hidden:a}}function u(f,d){const E=f.dataFrame,h=i(E,d??{}),y=[];for(let a=0;a<E.fields.length;a++){const v=E.fields[a];v.values[f.rowIndex]!=null&&(v.config.custom?.hidden||(v.config.links&&v.config.links.length>0||h.has(a))&&y.push({...v,index:a}))}return y}},98101:(Y,I,e)=>{"use strict";e.d(I,{n:()=>E,O:()=>y});var t=e(85404),n=e(11261),r=e(41260);function s(a,v){const g=a.labels;if(g!==void 0){const b=new Array(v);return b.fill(g),b}else return null}function o(a,v,g){const b=a.getFieldByName("labels");if(b!==void 0&&b.type===n.PU.other){const P=b.values.map(E);return[b,()=>P]}else return[null,()=>s(v,g.length)]}function m(a){const v=new t.L(a),g=v.getFirstFieldOfType(n.PU.time),b=v.getFirstFieldOfType(n.PU.string);if(g===void 0||b===void 0)return null;const P=v.getFieldByName("tsNs")??null,C=v.getFieldByName("level")??null,D=v.getFieldByName("id")??null,[T,M]=o(v,b,a),O=v.fields.filter((S,p)=>p!==g.index&&p!==b.index&&p!==P?.index&&p!==C?.index&&p!==D?.index&&p!==T?.index);return{timeField:g,bodyField:b,timeNanosecondField:P,severityField:C,idField:D,getLogFrameLabels:M,getLogFrameLabelsAsLabels:M,getLabelFieldName:()=>T?.name??null,extraFields:O}}function l(a,v,g){const b=a.getFieldByName(v);if(b!==void 0)return b.type===g?b:void 0}const i="timestamp",c="body",u="severity",f="id",d="labels";function E(a){const v={};return Object.entries(a).forEach(([g,b])=>{v[g]=typeof b=="string"?b:JSON.stringify(b)}),v}function h(a){const v=new t.L(a),g=l(v,i,n.PU.time),b=l(v,c,n.PU.string);if(g===void 0||b===void 0)return null;const P=l(v,u,n.PU.string)??null,C=l(v,f,n.PU.string)??null,D=l(v,d,n.PU.other)??null,T=D===null?null:D.values,M=v.fields.filter((O,S)=>S!==g.index&&S!==b.index&&S!==P?.index&&S!==C?.index&&S!==D?.index);return{timeField:g,bodyField:b,severityField:P,idField:C,getLogFrameLabels:()=>T,timeNanosecondField:null,getLogFrameLabelsAsLabels:()=>T!==null?T.map(E):null,getLabelFieldName:()=>D!==null?D.name:null,extraFields:M}}function y(a){return a.meta?.type===r.m.LogLines?h(a):m(a)}},69147:(Y,I,e)=>{"use strict";e.d(I,{yR:()=>S,HT:()=>J,M0:()=>w,ct:()=>L,O6:()=>z,f8:()=>ie,J9:()=>V,Wr:()=>te,sg:()=>ne});var t=e(2543),n=e(88483),r=e(50832),s=e(65474),o=e(9557),m=e(52622),l=e(14236),i=e(85404),c=e(11261),u=e(24293),f=e(47232),d=e(8249),E=e(40672),h=e(72724),y=e(65879),a=e(39070),v=e(26517),g=e(32264),b=e(24284),P=e(88838),C=e(2913);function D(ue,be){return C.Ay.bootData?.user?.lightTheme?be:ue}var T=e(98101),M=e(91002);const O="Line limit",S="Common labels",p={[o.$b.critical]:b.Tj[7],[o.$b.warning]:b.Tj[1],[o.$b.error]:b.Tj[4],[o.$b.info]:b.Tj[0],[o.$b.debug]:b.Tj[5],[o.$b.trace]:b.Tj[2],[o.$b.unknown]:D("#8e8e8e","#bdc4cd")},x=1,A=1e3*x,R=60*A,B=60*R,U=24*B,F=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function K(ue,be,ge){switch(ge){case m.fY.exact:return ue.entry.replace(F,"")===be.entry.replace(F,"");case m.fY.numbers:return ue.entry.replace(/\d/g,"")===be.entry.replace(/\d/g,"");case m.fY.signature:return ue.entry.replace(/\w/g,"")===be.entry.replace(/\w/g,"");default:return!1}}function w(ue,be){return be===m.fY.none?ue:ue.reduce((ge,re,ye)=>{const Be={...re},ve=ge[ge.length-1];return ye>0&&K(re,ve,be)?ve.duplicates++:(Be.duplicates=0,ge.push(Be)),ge},[])}function L(ue,be){return be.size===0?ue:ue.filter(ge=>!be.has(ge.logLevel))}function V(ue,be){const ge={},re=[];for(const ye of ue){let Be=ge[ye.logLevel];Be||(ge[ye.logLevel]=Be={lastTs:null,datapoints:[],target:ye.logLevel,color:p[ye.logLevel]},re.push(Be));const ve=Math.floor(ye.timeEpochMs/be)*be;ve===Be.lastTs?Be.datapoints[Be.datapoints.length-1][0]++:(Be.datapoints.push([1,ve]),Be.lastTs=ve);for(const Me of re)Me!==Be&&Me.lastTs!==ve&&(Me.datapoints.push([0,ve]),Me.lastTs=ve)}return re.map((ye,Be)=>{ye.datapoints.sort((Se,We)=>Se[1]-We[1]);const ve=(0,l.Vc)(ye),ke=new i.L(ve).getFirstFieldOfType(c.PU.number);return ve.fields[ke.index].config.min=0,ve.fields[ke.index].config.decimals=0,ve.fields[ke.index].config.color={mode:u.Y.Fixed,fixedColor:ye.color},ve.fields[ke.index].config.custom={drawStyle:m.GR.Bars,barAlignment:m.Nj.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:ye.color,pointColor:ye.color,fillColor:ye.color,lineWidth:0,fillOpacity:100,stacking:{mode:m.gs.Normal,group:"A"}},ve})}function N(ue){return ue.fields.some(be=>be.type===c.PU.time)&&ue.fields.some(be=>be.type===c.PU.string)}const z="infinite-scroll-";function J(ue,be,ge,re){let ye=!1;re=re?.map(Me=>Me.refId.includes(z)?(ye=!0,{...Me,refId:Me.refId.replace(z,"")}):Me),ye&&(ue=ue.map(Me=>({...Me,refId:Me.refId?.replace(z,"")})));const{logSeries:Be}=H(ue),ve=le(Be,re,ye);if(ve){if(be&&ve.rows.length>0){const Me=ve.rows.sort(M.M1),{visibleRange:ke,bucketSize:Se,visibleRangeMs:We,requestedRangeMs:De}=G(Me,be,ge);ve.visibleRange=ke,ve.bucketSize=Se,ve.series=V(Me,Se),ve.meta&&(ve.meta=me(ve,We,De))}else ve.series=[];return ve.queries=re,ve}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:re}}function G(ue,be,ge,re=20,ye=1e3){let Be=ge,ve=be,Me=Math.max(ve*re,ye),ke,Se;if(ge){const We=ue[0].timeEpochMs;if(Se=ge.to-ge.from,ke=ge.to-We,ke>0){const De=ke/Se;ve*=De,Me=Math.max(Math.ceil(ve*re),ye),Be={from:Math.floor(We/Me)*Me,to:ge.to}}else ke=1}return{bucketSize:Me,visibleRange:Be,visibleRangeMs:ke,requestedRangeMs:Se}}function H(ue){const be=[],ge=[];for(const re of ue){if(N(re)||!re.fields.length){ge.push(re);continue}re.length>0&&be.push(re)}return{logSeries:ge,metricSeries:be}}function q(ue,be,ge){const re=ue.values[ge],Be=(0,f.yT)(re).valueOf();if(be)return{ts:re,timeEpochMs:Be,timeEpochNs:be.values[ge]};if(ue.nanos!==void 0){const ve=ue.nanos[ge].toString().padStart(6,"0"),Me=`${Be}${ve}`;return{ts:re,timeEpochMs:Be,timeEpochNs:Me}}return{ts:re,timeEpochMs:Be,timeEpochNs:Be+"000000"}}function le(ue,be=[],ge=!1){if(ue.length===0)return;const re=[];let ye=[];const Be=ue.filter(Ye=>Ye.fields.length);Be.length&&Be.forEach(Ye=>{const $e=(0,T.O)(Ye);if($e!=null){const xe=$e.getLogFrameLabelsAsLabels()??void 0,Fe={rawFrame:Ye,logsFrame:$e,frameLabels:xe};ye.push(Fe),xe&&xe.length>0&&re.push(xe)}});const ve=re.flat(),Me=ve.length>0?(0,d.yO)(ve):{};let ke=[],Se=!1;const We=(0,M.kA)();for(const Ye of ye){const{logsFrame:$e,rawFrame:xe,frameLabels:Fe}=Ye,{timeField:Ee,timeNanosecondField:se,bodyField:ae,severityField:fe,idField:Ce}=$e;for(let Re=0;Re<xe.length;Re++){const{ts:Oe,timeEpochMs:ze,timeEpochNs:Xe}=q(Ee,se??void 0,Re),Ze=ae.values[Re]??"",et=typeof Ze=="string"?Ze:JSON.stringify(Ze),nt=E.sQ.hasAnsiCodes(et),lt=!!et.match(/\\n|\\t|\\r/),rt=xe.meta?.custom?.searchWords??xe.meta?.searchWords??[],ut=nt?P.DB.strip(et):et,Et=Fe?.[Re],Ct=(0,d.s6)(Et,Me);Object.keys(Ct).length>0&&(Se=!0);let Ut=o.$b.unknown;const Gt=fe&&fe.values[Re]||Et&&Et.level;Gt?Ut=(0,M.EK)(Gt):Ut=(0,M.XM)(ut);const Wt=be.find(Tt=>Tt.refId===xe.refId)?.datasource?.type,ot={entryFieldIndex:ae.index,rowIndex:Re,dataFrame:xe,logLevel:Ut,timeFromNow:(0,h.fq)(Oe),timeEpochMs:ze,timeEpochNs:Xe,timeLocal:(0,h.LE)(Oe,{timeZone:"browser"}),timeUtc:(0,h.LE)(Oe,{timeZone:"utc"}),uniqueLabels:Ct,hasAnsi:nt,hasUnescapedContent:lt,searchWords:rt,entry:ut,raw:et,labels:Et||{},uid:`${xe.refId}_${Ce?Ce.values[Re]:Re.toString()}`,datasourceType:Wt};Ce!==null&&(ot.rowId=Ce.values[Re]),!(ge&&We(ot))&&ke.push(ot)}}const De=[];(0,t.size)(Me)>0&&De.push({label:S,value:Me,kind:o.tG.LabelsMap});const Ne=ue.filter(Ye=>Ye?.meta?.custom?.limit??Ye?.meta?.limit).reduce((Ye,$e)=>(Ye[$e.refId??""]=$e.meta?.custom?.limit??$e.meta?.limit??0,Ye),{}),Le=Object.values(Ne).reduce((Ye,$e)=>Ye+=$e,0);Le>0&&De.push({label:O,value:Le,kind:o.tG.Number});let He=0;const je={};let at=!1;for(const Ye of ue){const $e=Ye.meta?.custom?.lokiQueryStatKey,{refId:xe}=Ye;if(!at&&Ye.meta?.custom?.error&&(De.push({label:"",value:Ye.meta?.custom.error,kind:o.tG.Error}),at=!0),xe&&!je[xe]){if($e&&Ye.meta?.stats){const Fe=Ye.meta.stats.find(Ee=>Ee.displayName===$e);Fe&&(He+=Fe.value)}je[xe]=!0}}if(He>0){const{text:Ye,suffix:$e}=(0,v.rT)("B")(He);De.push({label:"Total bytes processed",value:`${Ye} ${$e}`,kind:o.tG.String})}return{hasUniqueLabels:Se,meta:De,rows:ke}}function me(ue,be,ge){if(!ue.meta)return[];let re=[...ue.meta];const ye=re.findIndex(ve=>ve.label===O),Be=ye>=0&&re[ye]?.value;if(Be&&typeof Be=="number"&&Be>0){let ve;if(Be===ue.rows.length&&be&&ge){const Me=(be/ge*100).toFixed(2);ve=`${Be} reached, received logs cover ${Me}% (${y.msRangeToTimeString(be)}) of your selected time range (${y.msRangeToTimeString(ge)})`}else{const Me=g.$.featureToggles.logsInfiniteScrolling?"displayed":"returned";ve=`${Be} (${ue.rows.length} ${Me})`}re[ye]={label:O,value:ve,kind:o.tG.String}}return re}function k(ue,be){const ge=be&&ue===o.$b.unknown?"logs":ue,re=p[ue];return{displayNameFromDS:ge,color:{mode:u.Y.Fixed,fixedColor:re},custom:{drawStyle:m.GR.Bars,barAlignment:m.Nj.Center,lineColor:re,pointColor:re,fillColor:re,lineWidth:1,fillOpacity:100,stacking:{mode:m.gs.Normal,group:"A"}}}}const ee=(ue,be,ge)=>(ue.fields=ue.fields.map(re=>(re.type===c.PU.number&&(re.config={...re.config,...k(be(ue),ge)}),re)),ue);function X(ue){let be;try{be=new i.L(ue).getFirstFieldOfType(c.PU.number)}catch{}return be?.labels?j(be.labels):o.$b.unknown}function j(ue){const be=ue.level??ue.lvl??ue.loglevel??"";return be?(0,M.EK)(be):o.$b.unknown}function ne(ue,be,ge){const re=be.range,ye=ge.targets,Be=X,ve=re.to.valueOf()-re.from.valueOf(),Me=oe(be.scopedVars,ve);return be.interval=Me.interval,be.scopedVars.__interval={value:Me.interval,text:Me.interval},Me.intervalMs!==void 0&&(be.intervalMs=Me.intervalMs,be.scopedVars.__interval_ms={value:Me.intervalMs,text:Me.intervalMs}),be.hideFromInspector=!0,new n.c(ke=>{let Se=[];ke.next({state:a.Gu.Loading,error:void 0,data:[]});const We=ue.query(be),pe=((0,r.A)(We)?We:(0,s.H)(We)).subscribe({complete:()=>{ke.complete()},next:Ne=>{const{error:Le}=Ne;if(Le!==void 0)ke.next({state:a.Gu.Error,error:Le,data:[]}),ke.error(Le);else{const He=(0,t.groupBy)(Ne.data,"refId");Se=Ne.data.map(je=>{if(je.meta?.dataTopic===m.QR.Annotations)return je;let at=je.refId||"";at.startsWith("log-volume-")&&(at=at.substr(11));const Ye={logsVolumeType:o.Aj.FullRange,absoluteRange:{from:re.from.valueOf(),to:re.to.valueOf()},datasourceName:ue.name,sourceQuery:ye.find($e=>$e.refId===at)};return je.meta={...je.meta,custom:{...je.meta?.custom,...Ye}},ee(je,Be,He[je.refId].length===1)}),ke.next({state:Ne.state,error:void 0,data:Se})}},error:Ne=>{ke.next({state:a.Gu.Error,error:Ne,data:[]}),ke.error(Ne)}});return()=>{pe?.unsubscribe()}})}function te(ue,be){return be.hideFromInspector=!0,new n.c(ge=>{let re=[];ge.next({state:a.Gu.Loading,error:void 0,data:[]});const ye=ue.query(be),ve=((0,r.A)(ye)?ye:(0,s.H)(ye)).subscribe({complete:()=>{ge.next({state:a.Gu.Done,error:void 0,data:re}),ge.complete()},next:Me=>{const{error:ke}=Me;ke!==void 0?(ge.next({state:a.Gu.Error,error:ke,data:[]}),ge.error(ke)):re=Me.data.map(Se=>{const We=(0,l.Vc)(Se),{timeIndex:De}=(0,l.KR)(We);return(0,l.ES)(We,De)})},error:Me=>{ge.next({state:a.Gu.Error,error:Me,data:[]}),ge.error(Me)}});return()=>{ve?.unsubscribe()}})}function oe(ue,be){if(ue.__interval_ms){let ge=ue.__interval_ms.value,re="";return be<A*5?(ge=x,re="1ms"):ge>B?(ge=U,re="1d"):ge>R?(ge=B,re="1h"):ge>A?(ge=R,re="1m"):(ge=A,re="1s"),{interval:re,intervalMs:ge}}else return{interval:"$__interval"}}function ie(ue){const be=ue.dataFrame;return be.length===0||be.length<=ue.rowIndex?null:(0,l.EI)({fields:be.fields.map(re=>({...re,values:[re.values[ue.rowIndex]]})),refId:be.refId})}},91002:(Y,I,e)=>{"use strict";e.d(I,{Dg:()=>P,Dk:()=>O,Dm:()=>T,Dx:()=>C,EK:()=>u,Ei:()=>g,Hw:()=>b,M1:()=>h,Tj:()=>f,XM:()=>c,a8:()=>S,e3:()=>M,kA:()=>p,oR:()=>v,oT:()=>D,s2:()=>d,zy:()=>a});var t=e(2543),n=e.n(t),r=e(9557),s=e(52622),o=e(85404),m=e(11261),l=e(37471),i=e(70377);function c(x){if(!x)return r.$b.unknown;let A=r.$b.unknown,R;for(const[B,U]of Object.entries(r.$b)){const K=new RegExp(`\\b${B}\\b`,"i").exec(x);K&&(R===void 0||K.index<R)&&(A=U,R=K.index)}return A}function u(x){const A=r.$b[x.toString().toLowerCase()];return A||r.$b.unknown}function f(x,A){const R=x.filter(F=>F.labels[A]!==void 0),B=R.length,U=(0,t.countBy)(R,F=>F.labels[A]);return E(U,B)}function d(x){const A=x.filter(B=>B!=null),R=(0,t.countBy)(A);return E(R,A.length)}const E=(x,A)=>(0,t.chain)(x).map((R,B)=>({count:R,value:B,proportion:R/A})).sortBy("count").reverse().value(),h=(x,A)=>x.timeEpochMs<A.timeEpochMs?-1:x.timeEpochMs>A.timeEpochMs?1:x.timeEpochNs<A.timeEpochNs?-1:x.timeEpochNs>A.timeEpochNs?1:0,y=(x,A)=>x.timeEpochMs>A.timeEpochMs?-1:x.timeEpochMs<A.timeEpochMs?1:x.timeEpochNs>A.timeEpochNs?-1:x.timeEpochNs<A.timeEpochNs?1:0,a=(x,A)=>{const R=x?v(x.rows,A):[];return x?{...x,rows:R}:{hasUniqueLabels:!1,rows:R}},v=(x,A)=>A===s.uH.Ascending?x.sort(h):x.sort(y),g=x=>x.labels.__error__?{hasError:!0,errorMessage:x.labels.__error__}:{hasError:!1},b=x=>x.replace(/\\r\\n|\\n|\\t|\\r/g,A=>A.slice(1)==="t"?"	":`
`);function P(x){return x.map(A=>{const R=(0,i.FE)(A).reduce((B,U)=>{const F=U.keys[0];return B[F]=U.values[0],B},{});return{line:A.entry,timestamp:A.timeEpochNs,fields:{...R,...A.labels}}})}const C=x=>{let A={from:1/0,to:-1/0};return x.forEach(R=>{const B=R.meta?.custom||{};B.absoluteRange?.from&&B.absoluteRange?.to&&(A={from:Math.min(A.from,B.absoluteRange.from),to:Math.max(A.to,B.absoluteRange.to)})}),A},D=x=>{if(x.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const A={},R={};let B=-1/0;const U={};let F=[];return x.forEach(K=>{const w=new o.L(K),L=w.getFirstFieldOfType(m.PU.time),V=w.getFirstFieldOfType(m.PU.number);if(!L)throw new Error("Missing time field");if(!V)throw new Error("Missing value field");const N=V.config.displayNameFromDS||K.name||"logs",z=V.values.length;U[N]={meta:K.meta,valueFieldConfig:V.config,timeFieldConfig:L.config};for(let J=0;J<z;J++){const G=L.values[J],H=V.values[J];A[N]??={},A[N][G]=(A[N][G]||0)+H,R[G]=(R[G]||0)+H,B=Math.max(R[G],B)}}),Object.keys(A).forEach(K=>{const w=new l.k,{meta:L,timeFieldConfig:V,valueFieldConfig:N}=U[K];w.name=K,w.meta=L,w.addField({name:"Time",type:m.PU.time,config:V}),w.addField({name:"Value",type:m.PU.number,config:N}),Object.entries(A[K]).sort((z,J)=>Number(z[0])-Number(J[0])).forEach(([z,J])=>{w.add({Time:Number(z),Value:J})}),F.push(w)}),{dataFrames:F,maximum:B}},T=x=>{const A=x[0]?.meta?.custom;return A&&A.datasourceName?{name:A.datasourceName}:null},M=x=>x[0]?.meta?.custom?.logsVolumeType===r.Aj.Limited,O=async(x,A)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(x);{const R=document.createElement("textarea");A.current?.appendChild(R),R.value=x,R.focus(),R.select(),document.execCommand("copy"),R.remove()}};function S(x){return x instanceof Element}function p(){const x=new Set;return function(A){let R=`${A.dataFrame.refId}_${A.rowId?A.rowId:`${A.timeEpochNs}_${A.entry}`}`;return x.has(R)?!0:(x.add(R),!1)}}},90591:(Y,I,e)=>{"use strict";e.d(I,{m:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(96374),o=e(44836);const m=({title:c})=>{const u=(0,r.of)(i);return n.createElement("p",{className:u.description},c?(0,o.t)("public-dashboard.delete-modal.revoke-nonorphaned-body-text","Are you sure you want to revoke this URL? The dashboard will no longer be public."):(0,o.t)("public-dashboard.delete-modal.revoke-orphaned-body-text","Orphaned public dashboard will no longer be public."))},l=({dashboardTitle:c,onConfirm:u,onDismiss:f})=>{const d=(0,o.t)("public-dashboard.delete-modal.revoke-title","Revoke public URL");return n.createElement(s.u,{isOpen:!0,body:n.createElement(m,{title:c}),onConfirm:u,onDismiss:f,title:d,icon:"trash-alt",confirmText:d})},i=c=>({title:(0,t.css)`
    margin-bottom: ${c.spacing(1)};
  `,description:(0,t.css)`
    font-size: ${c.typography.body.fontSize};
  `})},71500:(Y,I,e)=>{"use strict";e.d(I,{P:()=>s});var t=e(24439);class n extends Error{constructor(m,l){super(l),this.type=m}}class r{constructor(){this.rootName="general"}validateNewDashboardName(m,l){return this.validate(m,l,"A dashboard or a folder with the same name already exists")}validateNewFolderName(m){return this.validate(this.rootName,m,"A folder or dashboard in the general folder with the same name already exists")}async validate(m,l,i){l=(l||"").trim();const c=l.toLowerCase();if(l.length===0)throw new n("REQUIRED","Name is required");if(c===this.rootName)throw new n("EXISTING","This is a reserved name and cannot be used for a folder.");const f=await(0,t.getGrafanaSearcher)().search({kind:["dashboard"],query:l,location:m||"general"});for(const d of f.view)if(c===d.name.toLowerCase())throw new n("EXISTING",i)}}const s=new r},11230:(Y,I,e)=>{"use strict";e.d(I,{A_:()=>w,FG:()=>P,Q9:()=>C,Ql:()=>F,c0:()=>U,iP:()=>d,kV:()=>p,rw:()=>f,vV:()=>A});var t=e(17172),n=e(19347),r=e(82467),s=e(3169),o=e(55314),m=e(6473),l=e(31678),i=e(57767),c=e(98796),u=e(88264);function f(V){return async N=>{try{N((0,u.f7)());const z=await(0,t.AI)().get(`/api/gnet/dashboards/${V}`);await N(g(z.json)),await N(y(z)),N(v())}catch(z){N((0,u.oQ)()),(0,t.NF)(z)&&N((0,r.dx)((0,s.gi)(z.data.message||z)))}}}function d(V){return async N=>{await N(g(V)),await N(a(V)),N(v())}}const E=(V,N)=>V?.usage?.libraryPanels?.filter(z=>N.inputs.libraryPanels.some(J=>J.state!==u.J7.Exists&&J.model.uid===z.uid));function h(V,N){let z=V.__inputs;if(N.inputs.libraryPanels?.length){const J=[];V.__inputs?.forEach(G=>{if(!G?.usage?.libraryPanels){J.push(G);return}const H=E(G,N);G.usage={libraryPanels:H},!!H?.length&&J.push(G)}),z=J}return{...V,__inputs:z}}function y(V){return(N,z)=>{const J=z().importDashboard,G=h(V.json,J);N((0,u.Rp)({...V,json:G}))}}function a(V){return(N,z)=>{const J=z().importDashboard,G=h(V,J);N((0,u.dd)(G))}}function v(){return(V,N)=>{const z=N().importDashboard.dashboard;if(z&&z.__inputs){const J=[];z.__inputs.forEach(G=>{const H={name:G.name,label:G.label,info:G.description,value:G.value,type:G.type,pluginId:G.pluginId,options:[]};H.description=T(G),G.type===u.NZ.DataSource?D(G,H):H.info||(H.info="Specify a string constant"),J.push(H)}),V((0,u.y3)(J))}}}function g(V){return async function(N){const z=await b(V);N((0,u.dW)(z))}}async function b(V){if(!V||!V.__elements)return[];const N=[];for(const z of Object.values(V.__elements)){if(z.kind!==c.i.Panel)continue;const J=z.model,{type:G,description:H}=J,{uid:q,name:le}=z,me={model:{model:J,uid:q,name:le,version:0,type:G,kind:c.i.Panel,description:H},state:u.J7.New};try{const k=await(0,i.Yr)(q,!0);me.state=u.J7.Exists,me.model=k}catch(k){if(k.status!==404)throw k}N.push(me)}return N}function P(){return V=>{V((0,u.SN)())}}function C(V){return async(N,z)=>{const J=z().importDashboard.dashboard,G=z().importDashboard.inputs,H=[];V.dataSources?.forEach((q,le)=>{const me=G.dataSources[le];H.push({name:me.name,type:me.type,pluginId:me.pluginId,value:q.uid})}),V.constants?.forEach((q,le)=>{const me=G.constants[le];H.push({value:q,name:me.name,type:me.type})}),N(o.cU.endpoints.importDashboard.initiate({dashboard:{...J,title:V.title,uid:V.uid||J.uid},overwrite:!0,inputs:H,folderUid:V.folder.uid}))}}const D=(V,N)=>{(0,n.l)().getList({pluginId:V.pluginId}).length===0?N.info="No data sources of type "+V.pluginName+" found":N.info||(N.info="Select a "+V.pluginName+" data source")},T=V=>{if(V.usage&&V.usage.libraryPanels)return`List of affected library panels: ${V.usage.libraryPanels.reduce((z,J,G)=>G===0?J.name:`${z}, ${J.name}`,"")}`};async function M(V,N){const z={totalCount:V.length,successCount:0};for(const J of V)try{await R(J,N)!==null&&(z.successCount+=1)}catch(G){console.error("Failed to move a folder",G)}return z}function O(V,N,...z){return async J=>{try{const G=await V(...z);return Array.prototype.concat(J,[G])}catch(G){if(N)return J;throw G}}}function S(V,N){const z=[];for(const J of V)z.push(O(x,!0,J,!0));for(const J of N)z.push(O(w,!0,J,!0));return L(z)}function p(V){return m.t.ignoreNextSave(),(0,t.AI)().post("/api/dashboards/db/",{dashboard:V.dashboard,message:V.message??"",overwrite:V.overwrite??!1,folderUid:V.folderUid})}function x(V,N){return getBackendSrv().delete(`/api/folders/${V}?forceDeleteRules=false`,void 0,{showSuccessAlert:N})}function A(V){return(0,t.AI)().post("/api/folders",V)}function R(V,N){const z={parentUid:N.uid};return getBackendSrv().post(`/api/folders/${V}/move`,z,{showErrorAlert:!1})}const B=1e3;function U(V,N,z=l.SearchQueryType.Folder){return(0,t.AI)().get("/api/search",{query:V,type:z,permission:N,limit:B})}function F(V){return(0,t.AI)().get(`/api/folders/${V}`)}function K(V){return getBackendSrv().get(`/api/folders/id/${V}`)}function w(V,N){return(0,t.AI)().delete(`/api/dashboards/uid/${V}`,{showSuccessAlert:N})}function L(V){return V.reduce((N,z)=>Promise.resolve(N).then(z),[])}},88264:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>a,J7:()=>o,NZ:()=>s,Rp:()=>u,SN:()=>i,V9:()=>m,dW:()=>d,dd:()=>f,f7:()=>h,oQ:()=>E,qx:()=>r,y3:()=>c});var t=e(30038),n=e(39070),r=(v=>(v[v.Gcom=0]="Gcom",v[v.Json=1]="Json",v))(r||{}),s=(v=>(v.DataSource="datasource",v.Constant="constant",v.LibraryPanel="libraryPanel",v))(s||{}),o=(v=>(v.New="new",v.Exists="exists",v.Different="different",v))(o||{});const m={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},l=(0,t.Z0)({name:"manageDashboards",initialState:m,reducers:{setGcomDashboard:(v,g)=>{v.dashboard={...g.payload.json,id:null},v.meta={updatedAt:g.payload.updatedAt,orgName:g.payload.orgName},v.source=0,v.state=n.Gu.Done},setJsonDashboard:(v,g)=>{v.dashboard={...g.payload,id:null},v.meta=m.meta,v.source=1,v.state=n.Gu.Done},clearDashboard:v=>{v.dashboard={},v.state=n.Gu.NotStarted},setInputs:(v,g)=>{v.inputs={dataSources:g.payload.filter(b=>b.type==="datasource"),constants:g.payload.filter(b=>b.type==="constant"),libraryPanels:v.inputs.libraryPanels||[]}},setLibraryPanelInputs:(v,g)=>{v.inputs.libraryPanels=g.payload},fetchFailed:v=>{v.dashboard={},v.state=n.Gu.Error},fetchDashboard:v=>{v.state=n.Gu.Loading}}}),{clearDashboard:i,setInputs:c,setGcomDashboard:u,setJsonDashboard:f,setLibraryPanelInputs:d,fetchFailed:E,fetchDashboard:h}=l.actions,a={importDashboard:l.reducer}},249:(Y,I,e)=>{"use strict";e.d(I,{$5:()=>P,A:()=>D,AL:()=>g,Lu:()=>O,PT:()=>C,Pr:()=>T,pR:()=>M,sK:()=>b,tH:()=>S});var t=e(93020),n=e(75505),r=e(17172);function s({baseURL:p}){async function x(A){try{const{data:R,...B}=await(0,n.s)((0,r.AI)().fetch({...A,url:p+A.url,showErrorAlert:A.showErrorAlert}));return{data:R,meta:B}}catch(R){return A.manageError?A.manageError(R):{error:R}}}return x}const o=["auth-service","web server","backend"],m=["DEV","PROD"],l=["db","load-balancer","server","logs"],i=["Prometheus","Loki","AWS Athena","AWS Cloudwatch","InfluxDB","Elasticsearch"],c={Prometheus:{image:"https://grafana.com/api/plugins/prometheus/versions/5.0.0/logos/small"},Loki:{image:"https://grafana.com/api/plugins/loki/versions/5.0.0/logos/small"},"AWS Athena":{image:"https://grafana.com/api/plugins/grafana-athena-datasource/versions/2.13.5/logos/small"},"AWS Cloudwatch":{image:"https://grafana.com/api/plugins/computest-cloudwatchalarm-datasource/versions/2.0.0/logos/small"},InfluxDB:{image:"https://grafana.com/api/plugins/influxdb/versions/5.0.0/logos/small"},Elasticsearch:{image:"https://grafana.com/api/plugins/elasticsearch/versions/5.0.0/logos/small"}},u=Array.from({length:500}).map((p,x)=>{const A=i[x%i.length],R=m[x%m.length],B=o[x%o.length],U=l[x%l.length];return{status:"not-migrated",type:"datasource",uid:x.toString(16),resource:{uid:`${B}-${R}-${U}-${x}`,name:`${B} ${R} ${U}`,icon:c[A]?.image,type:A}}});u[0].status="migrated",u[1].status="failed",u[1].statusMessage=`Source map error: Error: request failed with status 404
Resource URL: http://localhost:3000/public/build/app.f4d0c6a0daa6a5b14892.js
Source Map URL: app.f4d0c6a0daa6a5b14892.js.map`,u[2].status="migrated",u[3].status="migrated",u[4].status="migrating",u[5].status="migrating";const f=new URLSearchParams(window.location.search),d=1e3,E="TODO_thisWillBeABigLongToken";let h=!1,y=!!f.get("mockStackURL"),a=f.get("mockStackURL")||void 0;function v(p){return new Promise(x=>{setTimeout(()=>{x({data:p})},d)})}const g=(0,t.xP)({tagTypes:["migrationToken","stackDetails","resource"],reducerPath:"migrateToCloudAPI",baseQuery:s({baseURL:"/api"}),endpoints:p=>({getStatus:p.query({providesTags:["stackDetails"],queryFn:()=>{const x={enabled:y};return a&&(x.stackURL=a),v(x)}}),connectStack:p.mutation({invalidatesTags:["stackDetails"],queryFn:async({stackURL:x})=>(y=!0,a=x,v(void 0))}),disconnectStack:p.mutation({invalidatesTags:["stackDetails"],queryFn:async()=>(y=!1,v(void 0))}),createMigrationToken:p.mutation({invalidatesTags:["migrationToken"],queryFn:async()=>(h=!0,v({token:E}))}),deleteMigrationToken:p.mutation({invalidatesTags:["migrationToken"],queryFn:async()=>(h=!1,v(void 0))}),hasMigrationToken:p.query({providesTags:["migrationToken"],queryFn:async()=>v(h)}),startMigration:p.mutation({queryFn:async()=>v(void 0)}),listResources:p.query({providesTags:["resource"],queryFn:async()=>v(u)})})}),{useGetStatusQuery:b,useConnectStackMutation:P,useDisconnectStackMutation:C,useCreateMigrationTokenMutation:D,useDeleteMigrationTokenMutation:T,useHasMigrationTokenQuery:M,useListResourcesQuery:O,useStartMigrationMutation:S}=g},32931:(Y,I,e)=>{"use strict";e.d(I,{EC:()=>l,L_:()=>o,YS:()=>s,bA:()=>m,wV:()=>i});var t=e(17172),n=e(82467),r=e(10943);function s(c={getBackendSrv:t.AI}){return async u=>{const f=await c.getBackendSrv().get("/api/org");return u((0,r.bK)(f)),f}}function o(c={getBackendSrv:t.AI}){return async(u,f)=>{const d=f().organization.organization;await c.getBackendSrv().put("/api/org",{name:d.name}),u((0,n.YA)(d.name)),u(s(c))}}function m(c,u={getBackendSrv:t.AI}){return async f=>{const d=await u.getBackendSrv().post("/api/user/using/"+c);f((0,n.YA)(d.name))}}function l(c,u={getBackendSrv:t.AI}){return async f=>{const d=await u.getBackendSrv().post("/api/orgs/",c);f(m(d.orgId))}}function i(c={getBackendSrv:t.AI}){return async u=>{const f=await c.getBackendSrv().get("/api/user/orgs");return u((0,r.Bz)(f)),f}}},10943:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>i,Bz:()=>m,bK:()=>o,n:()=>s});var t=e(30038);const n={organization:{},userOrgs:[]},r=(0,t.Z0)({name:"organization",initialState:n,reducers:{organizationLoaded:(c,u)=>({...c,organization:u.payload}),setOrganizationName:(c,u)=>({...c,organization:{...c.organization,name:u.payload}}),userOrganizationsLoaded:(c,u)=>({...c,userOrgs:u.payload})}}),{setOrganizationName:s,organizationLoaded:o,userOrganizationsLoaded:m}=r.actions,i={organization:r.reducer}},17888:(Y,I,e)=>{"use strict";e.d(I,{a:()=>b});var t=e(32196),n=e(96540),r=e(47070),s=e(41987),o=e(13544),m=e(12131),l=e(40845),i=e(79041),c=e(14578);const u=n.forwardRef(({icon:D,children:T,onClick:M,...O},S)=>{const p=(0,l.of)(f);return n.createElement("button",{...O,className:p.action,onClick:M},n.createElement(c.I,{name:D,size:"xl"}),T)});u.displayName="CardButton";const f=D=>({action:(0,t.css)({display:"flex",flexDirection:"column",height:"100%",justifySelf:"center",cursor:"pointer",background:D.colors.background.secondary,borderRadius:D.shape.radius.default,color:D.colors.text.primary,border:"unset",width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center","&:hover":{background:D.colors.emphasize(D.colors.background.secondary)}})});var d=e(15054),E=e(33390),h=e(53466),y=e(32696),a=e(14792),v=e(31678),g=e(79971);function b(D){const T=(0,l.of)(C),M=(0,i.d2)(),O=new r.v2(D.data),{dataSummary:S}=O,p=P(D,S),x=(0,v.useDispatch)(),A=(0,a.UA)().getCurrent()?.getPanelById(D.panelId),R=()=>{E.A.setObject(d.wV,y.__.Suggestions),x((0,h.eK)(!0))},B=()=>{A&&x((0,g.gW)({panel:A,pluginId:"table"}))},U=F=>{A&&(x((0,g.gW)({...F,panel:A})),F.transformations&&setTimeout(()=>{m.Ny.partial({tab:"transform"})},100))};return n.createElement("div",{className:T.wrapper},n.createElement("div",{className:T.message,"data-testid":o.Tp.components.Panels.Panel.PanelDataErrorMessage},p),M.app===s.Jk.PanelEditor&&S.hasData&&A&&n.createElement("div",{className:T.actions},D.suggestions&&n.createElement(n.Fragment,null,D.suggestions.map(F=>n.createElement(u,{key:F.name,icon:"process",onClick:()=>U(F)},F.name))),n.createElement(u,{icon:"table",onClick:B},"Switch to table"),n.createElement(u,{icon:"chart-line",onClick:R},"Open visualization suggestions")))}function P({data:D,fieldConfig:T,message:M,needsNumberField:O,needsTimeField:S,needsStringField:p},x){return M||(!D.series||D.series.length===0||D.series.every(A=>A.length===0)?T?.defaults.noValue??"No data":p&&!x.hasStringField?"Data is missing a string field":O&&!x.hasNumberField?"Data is missing a number field":S&&!x.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const C=D=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:D.colors.text.secondary,fontSize:D.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:D.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:D.spacing(1),rowGap:D.spacing(1),width:"100%",maxWidth:"600px"})})},41394:(Y,I,e)=>{"use strict";e.d(I,{$:()=>i,W:()=>l});var t=e(96540),n=e(65158),r=e(43429),s=e(42418),o=e(31678);class m extends t.PureComponent{constructor(u){super(u)}render(){const u={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:u},t.createElement(s.F,{severity:o.AppNotificationSeverity.Error,...this.props}))}}function l(c,u){const f=class extends t.PureComponent{render(){const h=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(m,{title:`Error loading: ${c.id}`,text:h})}},d=new n.m(f);return d.meta=c,d.loadError=!0,d}function i(c,u){const f=class extends t.PureComponent{render(){return t.createElement(m,{title:`Panel plugin not found: ${c}`})}},d=new n.m(u?()=>null:f);return d.meta={id:c,name:c,sort:100,type:r.QE.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},d}},20726:(Y,I,e)=>{"use strict";e.d(I,{m:()=>E});var t=e(96540),n=e(1933),r=e(90708),s=e(13834),o=e(581),m=e(72574),l=e(40845),i=e(79041),c=e(66602),u=e(10096),f=e(15162);const d={defaults:{},overrides:[]};function E(y){const{pluginId:a,data:v,timeZone:g=(0,n.O)(),options:b={},width:P,height:C,title:D,onOptionsChange:T=()=>{},onChangeTimeRange:M=()=>{},onFieldConfigChange:O=()=>{},fieldConfig:S=d}=y,p=(0,l.$j)(),x=(0,m.w)(),A=(0,t.useMemo)(()=>x.replace.bind(x),[x]),[R,B]=(0,t.useState)((0,f.PY)(a)),[U,F]=(0,t.useState)(),K=h(R,b,S),{dataLinkPostProcessor:w}=(0,i.d2)(),L=(0,r.rJ)(R,K?.fieldConfig,v,g,p,A,w);if((0,t.useEffect)(()=>{R&&R.hasPluginId(a)||(0,f.TV)(a).then(N=>B(N)).catch(N=>{F(N.message)})},[a,R]),U)return t.createElement("div",null,"Failed to load plugin: ",U);if(!R||!R.hasPluginId(a))return t.createElement("div",null,"Loading plugin panel...");if(!R.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!L)return t.createElement("div",null,"No panel data");const V=R.panel;return t.createElement(c.Xw,{dependencies:[R,v]},t.createElement(s.a,{meta:R.meta},t.createElement(V,{id:1,data:L,title:D,timeRange:L.timeRange,timeZone:g,options:K.options,fieldConfig:S,transparent:!1,width:P,height:C,renderCounter:0,replaceVariables:N=>N,onOptionsChange:T,onFieldConfigChange:O,onChangeTimeRange:M,eventBus:u.lE})))}function h(y,a,v){return(0,t.useMemo)(()=>{if(y)return(0,o.F)({plugin:y,currentOptions:a,currentFieldConfig:v,isAfterPluginChange:!1})},[y,v,a])}},25701:(Y,I,e)=>{"use strict";e.d(I,{b:()=>y});var t=e(32196),n=e(96540),r=e(70255),s=e(43429),o=e(51527),m=e(13544),l=e(40845),i=e(29158),c=e(98624),u=e(72129),f=e(10803);const d=38,E=({isCurrent:b,title:P,plugin:C,onClick:D,onDelete:T,disabled:M,showBadge:O,description:S,children:p})=>{const x=(0,l.of)(v),A=M||C.state===s.pn.deprecated,R=(0,t.cx)({[x.item]:!0,[x.itemDisabled]:A,[x.current]:b});return n.createElement("div",{className:R,"aria-label":m.Tp.components.PluginVisualization.item(C.name),"data-testid":m.Tp.components.PluginVisualization.item(C.name),onClick:A?void 0:D,title:b?"Click again to close this section":C.name},n.createElement("img",{className:(0,t.cx)(x.img,{[x.disabled]:A}),src:C.info.logos.small,alt:""}),n.createElement("div",{className:(0,t.cx)(x.itemContent,{[x.disabled]:A})},n.createElement("div",{className:x.name},P),S?n.createElement("span",{className:x.description},S):null,p),O&&n.createElement("div",{className:(0,t.cx)(x.badge,{[x.disabled]:A})},n.createElement(g,{plugin:C})),T&&n.createElement(i.K,{name:"trash-alt",onClick:B=>{B.stopPropagation(),T()},className:x.deleteButton,"aria-label":"Delete button on panel type card",tooltip:"Delete"}))};E.displayName="PanelTypeCard";const h=({children:b,hasDescription:P,hasDelete:C,rootProps:D})=>{const T=(0,l.of)(v),M=(0,l.of)(a);return n.createElement("div",{className:T.item,...D},n.createElement(r.A,{className:(0,t.cx)(T.img,M.image),width:d,height:d}),n.createElement("div",{className:T.itemContent},n.createElement("div",{className:T.name},n.createElement(r.A,{width:160})),P?n.createElement(r.A,{containerClassName:T.description,width:80}):null,b),C&&n.createElement(r.A,{containerClassName:(0,t.cx)(T.deleteButton,M.deleteButton),width:16,height:16}))},y=(0,u.j)(E,h),a=()=>({deleteButton:(0,t.css)({lineHeight:1}),image:(0,t.css)({lineHeight:1})}),v=b=>({item:(0,t.css)({position:"relative",display:"flex",flexShrink:0,cursor:"pointer",background:b.colors.background.secondary,borderRadius:b.shape.radius.default,boxShadow:b.shadows.z1,border:`1px solid ${b.colors.background.secondary}`,alignItems:"center",padding:b.spacing(1),width:"100%",overflow:"hidden",transition:b.transitions.create(["background"],{duration:b.transitions.duration.short}),"&:hover":{background:b.colors.emphasize(b.colors.background.secondary,.03)}}),itemContent:(0,t.css)({overflow:"hidden",position:"relative",padding:b.spacing(0,1)}),itemDisabled:(0,t.css)({cursor:"default","&, &:hover":{background:b.colors.action.disabledBackground}}),current:(0,t.css)({label:"currentVisualizationItem",border:`1px solid ${b.colors.primary.border}`,background:b.colors.action.selected}),disabled:(0,t.css)({opacity:.6,filter:"grayscale(1)",cursor:"default",pointerEvents:"none"}),name:(0,t.css)({textOverflow:"ellipsis",overflow:"hidden",fontSize:b.typography.size.sm,fontWeight:b.typography.fontWeightMedium,width:"100%"}),description:(0,t.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",color:b.colors.text.secondary,fontSize:b.typography.bodySmall.fontSize,fontWeight:b.typography.fontWeightLight,width:"100%",maxHeight:"4.5em"}),img:(0,t.css)({maxHeight:d,width:d,display:"flex",alignItems:"center"}),badge:(0,t.css)({background:b.colors.background.primary}),deleteButton:(0,t.css)({cursor:"pointer",marginLeft:"auto"})}),g=({plugin:b})=>(0,o.x)(b.signature)?n.createElement(c.B,{status:b.signature}):n.createElement(f.p,{state:b.state});g.displayName="PanelPluginBadge"},56707:(Y,I,e)=>{"use strict";e.d(I,{a:()=>g});var t=e(32196),n=e(96540),r=e(16817),s=e(70713),o=e(40845),m=e(47070),l=e(32264),i=e(15162);const c=["timeseries","barchart","gauge","stat","piechart","bargauge","table","state-timeline","status-history","logs","candlestick","flamegraph","traces","nodeGraph"];async function u(C,D){const T=new m.v2(C,D);for(const O of c){const p=(await(0,i.TV)(O)).getSuggestionsSupplier();p&&p.getSuggestionsForData(T)}const M=T.getList();if(!l.$.featureToggles.vizAndWidgetSplit&&T.dataSummary.fieldCount===0)for(const O of Object.values(l.$.panels))!O.skipDataQuery||O.hideFromList||M.push({name:O.name,pluginId:O.id,description:O.info.description,cardOptions:{imgSrc:O.info.logos.small}});return M.sort((O,S)=>{if(T.dataSummary.preferredVisualisationType){if(O.pluginId===T.dataSummary.preferredVisualisationType)return-1;if(S.pluginId===T.dataSummary.preferredVisualisationType)return 1}return(S.score??m.nQ.OK)-(O.score??m.nQ.OK)})}var f=e(2543),d=e(13544),E=e(56034),h=e(20726);function y({data:C,suggestion:D,onChange:T,width:M}){const O=(0,o.of)(a),{innerStyles:S,outerStyles:p,renderWidth:x,renderHeight:A}=v(M),R=D.cardOptions??{},B={"aria-label":D.name,className:O.vizBox,"data-testid":d.Tp.components.VisualizationPreview.card(D.name),style:p,onClick:()=>{T({pluginId:D.pluginId,options:D.options,fieldConfig:D.fieldConfig})}};if(R.imgSrc)return n.createElement(E.m,{content:D.description??D.name},n.createElement("button",{...B,className:(0,t.cx)(O.vizBox,O.imgBox)},n.createElement("div",{className:O.name},D.name),n.createElement("img",{className:O.img,src:R.imgSrc,alt:D.name})));let U=D;return D.cardOptions?.previewModifier&&(U=(0,f.cloneDeep)(D),D.cardOptions.previewModifier(U)),n.createElement("button",{...B},n.createElement(E.m,{content:D.name},n.createElement("div",{style:S,className:O.renderContainer},n.createElement(h.m,{title:"",data:C,pluginId:D.pluginId,width:x,height:A,options:U.options,fieldConfig:U.fieldConfig}),n.createElement("div",{className:O.hoverPane}))))}const a=C=>({hoverPane:(0,t.css)({position:"absolute",top:0,right:0,left:0,borderRadius:C.spacing(2),bottom:0}),vizBox:(0,t.css)`
      position: relative;
      background: none;
      border-radius: ${C.shape.radius.default};
      cursor: pointer;
      border: 1px solid ${C.colors.border.medium};

      transition: ${C.transitions.create(["background"],{duration:C.transitions.duration.short})};

      &:hover {
        background: ${C.colors.background.secondary};
      }
    `,imgBox:(0,t.css)`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      color: ${C.colors.text.primary};
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;
    `,name:(0,t.css)`
      padding-bottom: ${C.spacing(.5)};
      margin-top: ${C.spacing(-1)};
      font-size: ${C.typography.bodySmall.fontSize};
      white-space: nowrap;
      overflow: hidden;
      color: ${C.colors.text.secondary};
      font-weight: ${C.typography.fontWeightMedium};
      text-overflow: ellipsis;
    `,img:(0,t.css)`
      max-width: ${C.spacing(8)};
      max-height: ${C.spacing(8)};
    `,renderContainer:(0,t.css)`
      position: absolute;
      transform-origin: left top;
      top: 6px;
      left: 6px;
    `});function v(C){const T=C,M=C*(1/1.6),O=350,S=O*(1/1.6),p=6,x=(T-p*2)/O,A=(M-p*2)/S;return{renderHeight:S,renderWidth:O,outerStyles:{width:T,height:M},innerStyles:{width:O,height:S,transform:`scale(${x}, ${A})`}}}function g({searchQuery:C,onChange:D,data:T,panel:M}){const O=(0,o.of)(P),{value:S}=(0,r.A)(()=>u(T,M),[T,M]),p=b(C,S);return n.createElement("div",null,n.createElement(s.Ay,{disableHeight:!0,style:{width:"100%",height:"100%"}},({width:x})=>{if(!x)return null;x=x-1;const A=Math.floor(x/200),R=8*(A-1),B=Math.floor((x-R)/A);return n.createElement("div",null,n.createElement("div",{className:O.filterRow},n.createElement("div",{className:O.infoText},"Based on current data")),n.createElement("div",{className:O.grid,style:{gridTemplateColumns:`repeat(auto-fill, ${B}px)`}},p.map((U,F)=>n.createElement(y,{key:F,data:T,suggestion:U,onChange:D,width:B-1})),C&&p.length===0&&n.createElement("div",{className:O.infoText},"No results matched your query")))}))}function b(C,D){if(!C||!D)return D||[];const T=new RegExp(C,"i");return D.filter(M=>T.test(M.name)||T.test(M.pluginId))}const P=C=>({heading:(0,t.css)({...C.typography.h5,margin:C.spacing(0,.5,1)}),filterRow:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",paddingBottom:"8px"}),infoText:(0,t.css)({fontSize:C.typography.bodySmall.fontSize,color:C.colors.text.secondary,fontStyle:"italic"}),grid:(0,t.css)({display:"grid",gridGap:C.spacing(1),gridTemplateColumns:"repeat(auto-fill, 144px)",marginBottom:C.spacing(1),justifyContent:"space-evenly"})})},86292:(Y,I,e)=>{"use strict";e.d(I,{G:()=>i});var t=e(32196),n=e(96540),r=e(32264),s=e(40845),o=e(41670),m=e(17706),l=e(48889);function i({pluginId:u,searchQuery:f,onChange:d,isWidget:E=!1}){const h=(0,s.of)(c),y=(0,n.useMemo)(()=>r.$.featureToggles.vizAndWidgetSplit?E?(0,m.nr)():(0,m.if)():(0,m.A4)(),[E]),a=(0,n.useMemo)(()=>(0,m.CO)(y,f,u),[y,f,u]);return a.length===0?n.createElement(o.Z,null,"Could not find anything matching your query"):n.createElement("div",{className:h.grid},a.map(v=>n.createElement(l.f,{disabled:!1,key:v.id,isCurrent:v.id===u,plugin:v,onClick:g=>d({pluginId:v.id,withModKey:g.metaKey||g.ctrlKey||g.altKey})})))}const c=u=>({grid:(0,t.css)({maxWidth:"100%",display:"grid",gridGap:u.spacing(.5)}),heading:(0,t.css)({...u.typography.h5,margin:u.spacing(0,.5,1)})})},48889:(Y,I,e)=>{"use strict";e.d(I,{f:()=>r});var t=e(96540),n=e(25701);const r=({isCurrent:s,plugin:o,onClick:m,disabled:l})=>t.createElement(n.b,{title:o.name,plugin:o,description:o.info.description,onClick:m,isCurrent:s,disabled:l,showBadge:!0});r.displayName="VizTypePickerPlugin"},32349:(Y,I,e)=>{"use strict";e.d(I,{CH:()=>i,E7:()=>l,EO:()=>m});var t=e(14236),n=e(83195),r=e(92461),s=e(32023),o=e(6923);const m=c=>{const u=c.field.links;if(!(!u||u.length===0))return{getLinks:f=>{const d={};if(c.view){const{dataFrame:h}=c.view;d.__series={value:{name:h.name,refId:h.refId},text:"Series"};const y=c.colIndex!==void 0?h.fields[c.colIndex]:void 0;if(y){if(d.__field={value:{name:y.name,labels:y.labels},text:"Field"},c.rowIndex!==void 0&&c.rowIndex>=0){const{timeField:a}=(0,t.KR)(h);d.__value={value:{raw:y.values[c.rowIndex],numeric:c.display.numeric,text:(0,n.cN)(c.display),time:a?a.values[c.rowIndex]:void 0},text:"Value"}}c.view&&(d.__data={value:{name:h.name,refId:h.refId,fields:(0,r.F)({frame:h,rowIndex:c.rowIndex})},text:"Data"})}else d.__value={value:{raw:c.display.numeric,numeric:c.display.numeric,text:(0,n.cN)(c.display),calc:c.name},text:"Value"}}else console.log("VALUE",c);const E=(h,y,a)=>{const v={...d,...y};return f(h,v,a)};return u.map(h=>(0,o.mQ)().getDataLinkUIModel(h,E,c))}}},l=(c,u)=>{const f=c.links;if(!(!f||f.length===0))return{getLinks:()=>f.map(d=>(0,o.mQ)().getDataLinkUIModel(d,u||c.replaceVariables,c))}},i=(c,u)=>{const f=s.b4.getPanelLinks(c)?.state.rawLinks;if(!(!f||f.length===0))return{getLinks:()=>f.map(d=>(0,o.mQ)().getDataLinkUIModel(d,u,c))}}},6923:(Y,I,e)=>{"use strict";e.d(I,{Fq:()=>g,Hf:()=>C,mQ:()=>S});var t=e(2543),n=e.n(t),r=e(6709),s=e(91890),o=e(28240),m=e(11261),l=e(71733),i=e(40672),c=e(76885),u=e(95344),f=e(72574),d=e(52622),E=e(2913);const h=[{value:`${r.c.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.$0.BuiltIn},{value:`${r.c.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.$0.BuiltIn},{value:`${r.c.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.$0.BuiltIn}],y=[{value:`${r.c.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.$0.Series}],a=[{value:`${r.c.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.$0.Value},{value:`${r.c.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.$0.Value},{value:`${r.c.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.$0.Value}],v=p=>p.includes(".")||p.trim().includes(" ")?`["${p}"]`:`.${p}`,g=()=>[...(0,f.w)().getVariables().map(p=>({value:p.name,label:p.name,origin:s.$0.Template})),{value:`${r.c.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.$0.Template},...h],b=p=>{const x=[];for(const R of p)for(const B of R.fields)if(B.labels)for(const U of Object.keys(B.labels))x.push(U);const A=(0,t.chain)(x).flatten().uniq().value();return[{value:`${r.c.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.$0.Field},...A.map(R=>({value:`__field.labels${v(R)}`,label:`labels.${R}`,documentation:`${R} label value`,origin:s.$0.Field}))]},P=p=>{let x,A;const R=[],B={};if(p.length!==1)return[];const U=p[0];for(const F of U.fields){const K=(0,o.Ct)(F,U,p);B[K]||(R.push({value:`__data.fields${v(K)}`,label:`${K}`,documentation:`Formatted value for ${K} on the same row`,origin:s.$0.Fields}),B[K]=!0,!x&&F.type===m.PU.number&&(x={...F,name:K}),!A&&F.config.displayName&&F.config.displayName!==F.name&&(A={...F,name:K}))}return R.length&&R.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.$0.Fields}),x&&(R.push({value:`__data.fields${v(x.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.$0.Fields}),R.push({value:`__data.fields${v(x.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.$0.Fields})),A&&R.push({value:`__data.fields${v(A.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.$0.Fields}),R},C=(p,x)=>{const A={value:`${r.c.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.$0.Value};return x===s.uP.Values?[...y,...b(p),...a,A,...P(p),...g()]:[...y,...b(p),...P(p),...g()]},D=p=>{const x=b(p),A={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...y,...x,...a,A,...g()]};class T{constructor(){this.getDataLinkUIModel=(x,A,R)=>{let B=x.url;x.onBuildUrl&&(B=x.onBuildUrl({origin:R,replaceVariables:A}));const U={href:l.I.assureBaseUrl(B.replace(/\n/g,"")),title:x.title??"",target:x.targetBlank?"_blank":void 0,origin:R};return A&&(U.href=A(U.href,void 0,d.$m.UriEncode),U.title=A(x.title)),x.onClick&&(U.onClick=F=>{x.onClick({origin:R,replaceVariables:A,e:F})}),U.href=(0,E.zj)().disableSanitizeHtml?U.href:i.sQ.sanitizeUrl(U.href),U}}getLinkUrl(x){let A={};x.keepTime&&(A[`$${r.c.keepTime}`]=!0),x.includeVars&&(A[`$${r.c.includeVars}`]=!0);let R=l.I.assureBaseUrl(c.kM.appendQueryToUrl(x.url||"",c.kM.toUrlParams(A)));return R=(0,f.w)().replace(R),(0,E.zj)().disableSanitizeHtml?R:i.sQ.sanitizeUrl(R)}getAnchorInfo(x){const A=(0,f.w)();return{href:this.getLinkUrl(x),title:A.replace(x.title||""),tooltip:A.replace(x.tooltip||"")}}getPanelLinkAnchorInfo(x,A){(0,u.l)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const R=(B,U,F)=>(0,f.w)().replace(B,{...A,...U},F);return this.getDataLinkUIModel(x,R,{})}}let M;function O(p){M=p}function S(){return M||(M=new T),M}},79971:(Y,I,e)=>{"use strict";e.d(I,{Ap:()=>l,O6:()=>i,Xk:()=>u,gW:()=>c});var t=e(581),n=e(57767),r=e(41394),s=e(20701),o=e(28444),m=e(80095);function l(d){return async(E,h)=>{if(d.libraryPanel?.uid&&!("model"in d.libraryPanel)){E(f(d));return}d.maxDataPoints&&(d.maxDataPoints=Number(d.maxDataPoints));let y=d.type,a=h().plugins.panels[y];if(!a)try{a=await E((0,s.y7)(y))}catch{a=(0,r.$)(y,y==="row")}d.plugin||await d.pluginLoaded(a),E((0,m.XM)({key:d.key,plugin:a}))}}function i(d){return E=>{E((0,m.FC)({key:d}))}}function c({panel:d,pluginId:E,options:h,fieldConfig:y,transformations:a}){return async(v,g)=>{if(d.type===E&&!h&&!y&&!a)return;let P=g().plugins.panels[E];if(P||(P=await v((0,s.y7)(E))),d.type!==E&&d.changePlugin(P),h||y||a){const C=(0,t.F)({plugin:P,currentOptions:h||d.options,currentFieldConfig:y||d.fieldConfig,isAfterPluginChange:!1});d.options=C.options,d.fieldConfig=C.fieldConfig,d.transformations=a||d.transformations,d.configRev++}d.generateNewKey(),v((0,m.XM)({key:d.key,plugin:P}))}}function u(d,E){return async(h,y)=>{const a=E.model.type,v=d.type;if(d.restoreModel({...E.model,gridPos:d.gridPos,id:d.id,libraryPanel:E}),d.getQueryRunner().clearLastResult(),v!==a){let b=y().plugins.panels[a];b||(b=await h((0,s.y7)(a))),await d.pluginLoaded(b),d.generateNewKey(),await h((0,m.XM)({key:d.key,plugin:b}))}else{const g=d.key;d.generateNewKey(),h((0,m.io)({oldKey:g,newKey:d.key}))}d.configRev=0,d.hasSavedPanelEditChange=!0,d.refresh(),d.events.publish(o.zq),d.events.publish(o.PR)}}function f(d){return async(E,h)=>{const y=d.libraryPanel.uid;try{const a=await(0,n.Yr)(y,!0);d.initLibraryPanel(a);const v=h().dashboard.getModel();if(d.repeat&&v){const g=v.panels.findIndex(b=>b.id===d.id);v.repeatPanel(d,g),v.sortPanelsByGridPos(),v.events.publish(new o.Q$)}await E(l(d))}catch(a){console.log("ERROR: ",a),E((0,m.XM)({key:d.key,plugin:(0,r.$)("Unable to load library panel: "+y,!1)}))}}}},80095:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>f,FC:()=>i,S3:()=>o,XM:()=>s,io:()=>l,nF:()=>m,rG:()=>c});var t=e(30038);const n={},r=(0,t.Z0)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(d,E)=>{d[E.payload.key]={plugin:E.payload.plugin}},changePanelKey:(d,E)=>{d[E.payload.newKey]=d[E.payload.oldKey],delete d[E.payload.oldKey]},removePanel:(d,E)=>{delete d[E.payload.key]},removeAllPanels:d=>{Object.keys(d).forEach(E=>delete d[E])},setPanelInstanceState:(d,E)=>{d[E.payload.key].instanceState=E.payload.value},setPanelAngularComponent:(d,E)=>{const h=d[E.payload.key];h.angularComponent=E.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:o,setPanelInstanceState:m,changePanelKey:l,removePanel:i,removeAllPanels:c}=r.actions,f={panels:r.reducer}},40334:(Y,I,e)=>{"use strict";e.d(I,{U:()=>t});function t(n,r){return n.panels[r.key]}},17706:(Y,I,e)=>{"use strict";e.d(I,{A4:()=>s,CO:()=>l,if:()=>m,nr:()=>o});var t=e(43429),n=e(54479),r=e(2913);function s(){const i=r.config.panels;return Object.keys(i).filter(c=>i[c].hideFromList===!1).map(c=>i[c]).sort((c,u)=>c.sort-u.sort)}function o(){return s().filter(i=>!!i.skipDataQuery)}function m(){return s().filter(i=>!i.skipDataQuery)}function l(i,c,u){if(!c.length)return i.filter(y=>y.state===t.pn.deprecated?u===y.id:!0);const f=(0,n.xb)(c).toLowerCase(),d=[],E=[],h="graph".startsWith(f);for(const y of i){if(y.state===t.pn.deprecated&&u!==y.id)continue;const v=y.name.toLowerCase().indexOf(f);v===0?d.push(y):v>0?E.push(y):h&&y.id==="timeseries"&&d.push(y)}return d.concat(E)}},2609:(Y,I,e)=>{"use strict";e.d(I,{_o:()=>f});var t=e(2543),n=e.n(t),r=e(71733),s=e(76885),o=e(65879),m=e(12131),l=e(2619),i=e(12604);const c={kiosk:!0,autofitpanels:!0,orgId:!0};class u extends l.Q{constructor(){super({isPlaying:!1}),this.urls=[],this.index=0,this.numberOfLoops=0,this.locationUpdated=this.locationUpdated.bind(this),this.api=(0,i.NF)()}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const h=this.urls[this.index],y=m.Ny.getSearchObject(),a=(0,t.pickBy)(y,(g,b)=>c[b]),v=r.I.stripBaseFromUrl(h);this.index++,this.validPlaylistUrl=v,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),m.Ny.push(v+"?"+s.kM.toUrlParams(a))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(E){E.pathname!==this.validPlaylistUrl&&this.stop()}async start(E){this.stop(),this.startUrl=window.location.href,this.index=0,this.setState({isPlaying:!0}),this.locationListenerUnsub=m.Ny.getHistory().listen(this.locationUpdated);const h=[];let y=await this.api.getPlaylist(E);if(!y.items?.length)return;this.interval=o.intervalToMs(y.interval);const a=await(0,i.qY)(y.items);for(const v of a)if(v.dashboards)for(const g of v.dashboards)h.push(g.url);h.length&&(this.urls=h,this.setState({isPlaying:!0}),this.next())}stop(){this.state.isPlaying&&(this.index=0,this.setState({isPlaying:!1}),this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),m.Ny.getSearchObject().kiosk&&m.Ny.partial({kiosk:null}))}}const f=new u},12604:(Y,I,e)=>{"use strict";e.d(I,{aV:()=>g,NF:()=>P,qY:()=>v,GM:()=>b});var t=e(75505),n=e(78368),r=e(17172),s=e(32264),o=e(82467),m=e(3169),l=e(90183),i=e(68706),c=e(99140);class u{constructor(D,T=!0){const M=T?`namespaces/${s.$.namespace}/`:"";this.url=`/apis/${D.group}/${D.version}/${M}${D.resource}`}async create(D){return(0,r.AI)().post(this.url,D)}async get(D){return(0,r.AI)().get(`${this.url}/${D}`)}async list(D){const T=D||{};return T.labelSelector=this.parseLabelSelector(T?.labelSelector),(0,r.AI)().get(this.url,D)}async update(D){return(0,r.AI)().put(`${this.url}/${D.metadata.name}`,D)}async delete(D){return(0,r.AI)().delete(`${this.url}/${D}`)}parseLabelSelector(D){return Array.isArray(D)?D.map(T=>{const M=String(T.key),O=T.operator;switch(O){case"=":case"!=":return`${M}${O}${T.value}`;case"in":case"notin":return`${M}${O}(${T.value.join(",")})`;case"":case"!":return`${O}${M}`;default:return null}}).filter(Boolean).join(","):D}}var f=e(24439);class d{async getAllPlaylist(){return(0,r.AI)().get("/api/playlists/")}async getPlaylist(D){const T=await(0,r.AI)().get(`/api/playlists/${D}`);return await y(T),T}async createPlaylist(D){await a(()=>(0,r.AI)().post("/api/playlists",D))}async updatePlaylist(D){await a(()=>(0,r.AI)().put(`/api/playlists/${D.uid}`,D))}async deletePlaylist(D){await a(()=>(0,r.AI)().delete(`/api/playlists/${D}`),"Playlist deleted")}}class E{constructor(){this.playlistAsK8sResource=D=>({metadata:{name:D.uid},spec:{title:D.name,interval:D.interval,items:D.items??[]}}),this.server=new u({group:"playlist.grafana.app",version:"v0alpha1",resource:"playlists"})}async getAllPlaylist(){return(await this.server.list()).items.map(h)}async getPlaylist(D){const T=await this.server.get(D),M=h(T);return await y(M),M}async createPlaylist(D){const T=this.playlistAsK8sResource(D);await a(()=>this.server.create(T))}async updatePlaylist(D){const T=this.playlistAsK8sResource(D);await a(()=>this.server.update(T).then(()=>{}))}async deletePlaylist(D){await a(()=>this.server.delete(D).then(()=>{}),"Playlist deleted")}}function h(C){const{spec:D,metadata:T}=C;return{uid:T.name,name:D.title,interval:D.interval,items:D.items}}async function y(C){if(C?.items){for(const D of C.items)if(D.type==="dashboard_by_id"){D.type="dashboard_by_uid";const T=await(0,r.AI)().get(`/api/dashboards/ids/${D.value}`);T?.length&&(D.value=T[0])}}}async function a(C,D="Playlist saved"){try{await C(),(0,c.JD)((0,o.dx)((0,m.tZ)(D)))}catch(T){T instanceof Error&&(0,c.JD)((0,o.dx)((0,m.gi)("Unable to save playlist",T)))}}async function v(C){let D=0;if(!C?.length)return[];const T=[];for(const S of C){const p={query:"*",kind:["dashboard"],limit:1e3};switch(S.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":p.uid=[S.value];break;case"dashboard_by_tag":p.tags=[S.value];break}T.push({refId:`${D++}`,queryType:i.nj.Search,search:p})}if(!s.$.featureToggles.panelTitleSearch){const S=(0,f.getGrafanaSearcher)(),p=[];for(let x=0;x<T.length;x++){const A=(await S.search(T[x].search)).view;p.push({...C[x],dashboards:A.map(R=>({...R}))})}return p}const M=await(0,l.o)(),O=await(0,t.s)(M.query({targets:T}));if(O.data.length!==C.length)throw new Error("unexpected result size");return C.map((S,p)=>{const x=new n.R(O.data[p]);return{...S,dashboards:x.map(A=>({...A}))}})}function g(){return{items:[],interval:"5m",name:"",uid:""}}function b(C,D){return D?.length?(D=D.toLowerCase(),C.filter(T=>T.name.toLowerCase().includes(D))):C}function P(){return s.$.featureToggles.kubernetesPlaylists?new E:new d}},84684:(Y,I,e)=>{"use strict";e.d(I,{Ap:()=>E,Bj:()=>i,CB:()=>m,Gd:()=>d,T_:()=>l,XP:()=>h,cu:()=>a,ij:()=>v,xZ:()=>y});var t=e(36663),n=e(17172),r=e(80714),s=e(6745),o=e(5129);async function m(b){const P=await c(b),C=!!P,[D,T,M]=await Promise.all([d(),u(b,C),f(b)]),O=D.find(p=>p.id===b),S=O?.dependencies||P?.json?.dependencies;return{grafanaDependency:S?.grafanaDependency??S?.grafanaVersion??"",pluginDependencies:S?.plugins||[],links:O?.info.links||P?.json?.info.links||[],readme:M||P?.readme,versions:T,statusContext:P?.statusContext??"",iam:P?.json?.iam}}async function l(){try{const{items:b}=await(0,n.AI)().get(`${s.P5}/plugins`,{includeDeprecated:!0});return b.filter(o.hY)}catch(b){if((0,n.NF)(b))return b.isHandled=!0,console.error("Failed to fetch plugins from catalog (default https://grafana.com/api/plugins)"),[];throw b}}async function i(){try{return await(0,n.AI)().get(`${s.Sw}/errors`)}catch{return[]}}async function c(b){try{return await(0,n.AI)().get(`${s.P5}/plugins/${b}`,{})}catch(P){(0,n.NF)(P)&&(P.isHandled=!0);return}}async function u(b,P){try{return P?((await(0,n.AI)().get(`${s.P5}/plugins/${b}/versions`)).items||[]).map(D=>({version:D.version,createdAt:D.createdAt,isCompatible:D.isCompatible,grafanaDependency:D.grafanaDependency})):[]}catch(C){return(0,n.NF)(C)&&(C.isHandled=!0),[]}}async function f(b){try{const P=await(0,n.AI)().get(`${s.Sw}/${b}/markdown/README`);return P?(0,t.G)(P):""}catch(P){return(0,n.NF)(P)&&(P.isHandled=!0),""}}async function d(){return(await(0,n.AI)().get(`${s.Sw}`,(0,r.F)({embedded:0}))).filter(o.Sq)}async function E(){const{items:b}=await(0,n.AI)().get(`${s.Mi}/plugins`);return b}async function h(){const{items:b}=await(0,n.AI)().get(`${s.Mi}/provisioned-plugins`);return b.map(P=>({slug:P.type}))}async function y(b){return await(0,n.AI)().post(`${s.Sw}/${b}/install`,void 0,{showErrorAlert:!1})}async function a(b){return await(0,n.AI)().post(`${s.Sw}/${b}/uninstall`)}async function v(b,P){return(await(0,n.AI)().datasourceRequest({url:`/api/plugins/${b}/settings`,method:"POST",data:P}))?.data}const g={getRemotePlugins:l,getInstalledPlugins:d,installPlugin:y,uninstallPlugin:a}},42930:(Y,I,e)=>{"use strict";e.d(I,{G:()=>s});var t=e(32196),n=e(96540),r=e(40845);const s=({children:m,wrap:l,className:i})=>{const c=(0,r.$j)(),u=o(c,l);return n.createElement("div",{className:(0,t.cx)(u.container,i)},m)},o=(m,l)=>({container:(0,t.css)`
    display: flex;
    flex-direction: row;
    flex-wrap: ${l?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${m.spacing()};
      margin-right: ${m.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},6745:(Y,I,e)=>{"use strict";e.d(I,{Mi:()=>n,P5:()=>r,Sw:()=>t,fu:()=>s});const t="/api/plugins",n="/api/instance",r="/api/gnet",s="plugins"},5129:(Y,I,e)=>{"use strict";e.d(I,{Gl:()=>D,H2:()=>a,N6:()=>M,Sq:()=>O,TD:()=>U,Xc:()=>g,by:()=>v,hY:()=>S,j_:()=>T,kH:()=>h,td:()=>f,tr:()=>C});var t=e(53076),n=e(43429),r=e(53531),s=e(32264),o=e(33378),m=e(2913),l=e(10096),i=e(27677),c=e(31678),u=e(66253);function f({local:F=[],remote:K=[],instance:w=[],provisioned:L=[],pluginErrors:V}){const N=[],z=b(V),J=w.reduce((H,q)=>(H.set(q.pluginSlug,q),H),new Map),G=L.reduce((H,q)=>(H.add(q.slug),H),new Set);return F.forEach(H=>{const q=K.find(me=>me.slug===H.id),le=z[H.id];q||N.push(d(H,void 0,le))}),K.forEach(H=>{const q=F.find(k=>k.id===H.slug),le=z[H.slug];if(!(H.status===u.Uy.Deprecated&&!q)){const k=d(q,H,le);if(m.Ay.featureToggles.managedPluginsInstall&&s.$.pluginAdminExternalManageEnabled){k.isFullyInstalled=k.isCore?!0:(J.has(H.slug)||G.has(H.slug))&&k.isInstalled,k.isInstalled=J.has(H.slug)||k.isInstalled;const ee=J.get(H.slug);k.isUpdatingFromInstance=J.has(H.slug)&&k.hasUpdate&&k.installedVersion!==ee?.version,k.isUninstallingFromInstance=!!q&&!J.has(H.slug)}N.push(k)}}),N}function d(F,K,w){return!F&&K?E(K,w):F&&!K?h(F,w):y(F,K,w)}function E(F,K){const{name:w,slug:L,description:V,version:N,orgName:z,popularity:J,downloads:G,typeCode:H,updatedAt:q,createdAt:le,status:me,angularDetected:k,keywords:ee}=F,X=!!K||x(H);return{description:V,downloads:G,id:L,info:{logos:{small:`https://grafana.com/api/plugins/${L}/versions/${N}/logos/small`,large:`https://grafana.com/api/plugins/${L}/versions/${N}/logos/large`},keywords:ee},name:w,orgName:z,popularity:J,publishedAt:le,signature:P({remote:F,error:K}),updatedAt:q,hasUpdate:!1,isPublished:!0,isInstalled:X,isDisabled:X,isDeprecated:me===u.Uy.Deprecated,isCore:F.internal,isDev:!1,isEnterprise:me===u.Uy.Enterprise,type:H,error:K?.errorCode,angularDetected:k,isFullyInstalled:X}}function h(F,K){const{name:w,info:{description:L,version:V,logos:N,updated:z,author:J,keywords:G},id:H,dev:q,type:le,signature:me,signatureOrg:k,signatureType:ee,hasUpdate:X,accessControl:j,angularDetected:ne}=F,te=!!K||x(le);return{description:L,downloads:0,id:H,info:{logos:N,keywords:G},name:w,orgName:J.name,popularity:0,publishedAt:"",signature:P({local:F,error:K}),signatureOrg:k,signatureType:ee,updatedAt:z,installedVersion:V,hasUpdate:X,isInstalled:!0,isDisabled:te,isCore:me==="internal",isPublished:!1,isDeprecated:!1,isDev:!!q,isEnterprise:!1,type:le,error:K?.errorCode,accessControl:j,angularDetected:ne,isFullyInstalled:!0,iam:F.iam}}function y(F,K,w){const L=F?.info.version,V=K?.slug||F?.id||"",N=F?.type||K?.typeCode,z=!!w||x(N),J=K?.keywords||F?.info.keywords||[];let G={small:`/public/img/icn-${N}.svg`,large:`/public/img/icn-${N}.svg`};return K?G={small:`https://grafana.com/api/plugins/${V}/versions/${K.version}/logos/small`,large:`https://grafana.com/api/plugins/${V}/versions/${K.version}/logos/large`}:F&&F.info.logos&&(G=F.info.logos),{description:F?.info.description||K?.description||"",downloads:K?.downloads||0,hasUpdate:F?.hasUpdate||!1,id:V,info:{logos:G,keywords:J},isCore:!!(K?.internal||F?.signature===n.Ac.internal),isDev:!!F?.dev,isEnterprise:K?.status===u.Uy.Enterprise,isInstalled:!!F||z,isDisabled:z,isDeprecated:K?.status===u.Uy.Deprecated,isPublished:!0,name:K?.name||F?.name||"",orgName:K?.orgName||F?.info.author.name||"",popularity:K?.popularity||0,publishedAt:K?.createdAt||"",type:N,signature:P({local:F,remote:K,error:w}),signatureOrg:F?.signatureOrg||K?.versionSignedByOrgName,signatureType:F?.signatureType||K?.versionSignatureType||K?.signatureType||void 0,updatedAt:K?.updatedAt||F?.info.updated||"",installedVersion:L,error:w?.errorCode,accessControl:F?.accessControl,angularDetected:F?.angularDetected??K?.angularDetected,isFullyInstalled:!!F||z,iam:F?.iam}}const a=F=>`${s.$.pluginCatalogURL}${F}`;var v=(F=>(F.nameAsc="nameAsc",F.nameDesc="nameDesc",F.updated="updated",F.published="published",F.downloads="downloads",F))(v||{});const g=(F,K)=>{const w={nameAsc:(L,V)=>L.name.localeCompare(V.name),nameDesc:(L,V)=>V.name.localeCompare(L.name),updated:(L,V)=>(0,r.b)(V.updatedAt).valueOf()-(0,r.b)(L.updatedAt).valueOf(),published:(L,V)=>(0,r.b)(V.publishedAt).valueOf()-(0,r.b)(L.publishedAt).valueOf(),downloads:(L,V)=>V.downloads-L.downloads};return w[K]?F.sort(w[K]):F};function b(F=[]){return F.reduce((K,w)=>(K[w.pluginId]=w,K),{})}function P(F){const{error:K,local:w,remote:L}=F;if(K)switch(K.errorCode){case n.ZK.invalidSignature:return n.Ac.invalid;case n.ZK.missingSignature:return n.Ac.missing;case n.ZK.modifiedSignature:return n.Ac.modified}return w?.signature?w.signature:L?.signatureType&&L?.versionSignatureType?n.Ac.valid:n.Ac.missing}const C=()=>(0,i.AI)().get("/api/frontend/settings").then(F=>{s.$.panels=F.panels});function D(F){if(!F)return;const[K]=F.filter(w=>!!w.isCompatible);return K}const T=()=>s.$.pluginAdminEnabled,M=(F,K,w)=>{const L=s.$.pluginAdminExternalManageEnabled,V=l.TP.hasPermission(c.AccessControlAction.PluginsInstall),N=!!w;return F.type===n.QE.renderer||F.type===n.QE.secretsmanager||F.isEnterprise&&!(0,o.a)("enterprise.plugins")||F.isDev||!V&&!L||!F.isPublished||!N||!K},O=F=>p(F.id),S=F=>p(F.slug);function p(F){const{pluginCatalogHiddenPlugins:K}=s.$;return!K.includes(F)}function x(F){return F===n.QE.secretsmanager&&!s.$.secretsManagerPluginEnabled}function A(F){return F?.signature==="internal"}function R(F){return F.split(" - ")[0]}function B(F){return F.reduce((K,{id:w,name:L,type:V,orgName:N,info:z})=>{const J=z.keywords?.join(" ").toLowerCase(),G=`${w} - ${L} - ${V} - ${N} - ${J}`;return K.push(G),K},[])}function U(F,K){const w=B(F);let V=new t.A({intraMode:1,intraSub:0}).filter(w,K);return V===null?null:V.map(N=>R(w[N]))}},20701:(Y,I,e)=>{"use strict";e.d(I,{JC:()=>S,JJ:()=>g,LR:()=>v,NJ:()=>x,aU:()=>P,ai:()=>M,h9:()=>p,mj:()=>a,nT:()=>O,t5:()=>b,y7:()=>A});var t=e(30038),n=e(65474),r=e(62467),s=e(66847),o=e(45650),m=e(90593),l=e(75505),i=e(32264),c=e(17172),u=e(2913),f=e(15162),d=e(81900),E=e(84684),h=e(6745),y=e(5129);const a=(0,t.zD)(`${h.fu}/fetchAll`,async(R,B)=>{try{B.dispatch({type:`${h.fu}/fetchLocal/pending`}),B.dispatch({type:`${h.fu}/fetchRemote/pending`});const U=i.$.pluginAdminExternalManageEnabled&&u.Ay.featureToggles.managedPluginsInstall?(0,n.H)((0,E.Ap)()):(0,r.of)(void 0),F=i.$.pluginAdminExternalManageEnabled&&u.Ay.featureToggles.managedPluginsInstall?(0,n.H)((0,E.XP)()):(0,r.of)(void 0),K=500,w=(0,n.H)((0,E.Bj)()),L=(0,n.H)((0,E.Gd)()),V=(0,n.H)((0,E.T_)()).pipe((0,s.W)(N=>(B.dispatch({type:`${h.fu}/fetchRemote/rejected`}),console.error(N),(0,r.of)([]))));return(0,o.p)({local:L,remote:V,instance:U,provisioned:F,pluginErrors:w}).pipe((0,m.w)({each:K,with:()=>(V.subscribe(async N=>{if(B.dispatch({type:`${h.fu}/fetchRemote/fulfilled`}),N.length>0){const z=await(0,l.s)(L),J=await(0,l.s)(U),G=await(0,l.s)(F),H=await(0,l.s)(w);B.dispatch(P((0,y.td)({local:z,remote:N,instance:J,provisioned:G,pluginErrors:H})))}}),(0,o.p)({local:L,instance:U,provisioned:F,pluginErrors:w}))})).subscribe(({local:N,remote:z,instance:J,provisioned:G,pluginErrors:H})=>{N&&z?(B.dispatch({type:`${h.fu}/fetchLocal/fulfilled`}),B.dispatch({type:`${h.fu}/fetchRemote/fulfilled`}),B.dispatch(P((0,y.td)({local:N,remote:z,instance:J,provisioned:G,pluginErrors:H})))):N&&(B.dispatch({type:`${h.fu}/fetchLocal/fulfilled`}),B.dispatch(P((0,y.td)({local:N,pluginErrors:H}))))},N=>(console.log(N),B.dispatch({type:`${h.fu}/fetchLocal/rejected`}),B.dispatch({type:`${h.fu}/fetchRemote/rejected`}),B.rejectWithValue("Unknown error."))),null}catch{return B.rejectWithValue("Unknown error.")}}),v=(0,t.zD)(`${h.fu}/fetchAllLocal`,async(R,B)=>{try{return(await(0,E.Gd)()).map(F=>(0,y.kH)(F))}catch{return B.rejectWithValue("Unknown error.")}}),g=(0,t.zD)(`${h.fu}/fetchRemotePlugins`,async(R,B)=>{try{return await(0,E.T_)()}catch(U){return(0,c.NF)(U)&&(U.isHandled=!0),B.rejectWithValue([])}}),b=(0,t.zD)(`${h.fu}/fetchDetails`,async(R,B)=>{try{const U=await(0,E.CB)(R);return{id:R,changes:{details:U}}}catch{return B.rejectWithValue("Unknown error.")}}),P=(0,t.VP)(`${h.fu}/addPlugins`),C=(0,t.VP)(`${h.fu}/addLocalPlugins`),D=(0,t.VP)(`${h.fu}/addLocalPlugins`),T=(0,t.VP)(`${h.fu}/addLocalPlugins`),M=(0,t.zD)(`${h.fu}/install`,async({id:R,version:B,isUpdating:U=!1},F)=>{const K=U?{isInstalled:!0,installedVersion:B,hasUpdate:!1}:{isInstalled:!0,installedVersion:B};try{return await(0,E.xZ)(R),await(0,y.tr)(),U&&(0,d.sk)(R),{id:R,changes:K}}catch(w){return console.error(w),(0,c.NF)(w)?F.rejectWithValue(w.data):F.rejectWithValue("Unknown error.")}}),O=(0,t.zD)(`${h.fu}/install`,async()=>({})),S=(0,t.zD)(`${h.fu}/uninstall`,async(R,B)=>{try{return await(0,E.cu)(R),await(0,y.tr)(),(0,d.sk)(R),{id:R,changes:{isInstalled:!1,installedVersion:void 0}}}catch(U){return console.error(U),B.rejectWithValue("Unknown error.")}}),p=(0,t.zD)(`${h.fu}/loadPluginDashboards`,async(R,B)=>{const K=`api/plugins/${B.getState().dataSources.dataSource.type}/dashboards`;return(0,c.AI)().get(K)}),x=(0,t.VP)(`${h.fu}/panelPluginLoaded`),A=R=>async(B,U)=>{let F=U().plugins.panels[R];return F||(F=await(0,f.TV)(R),U().plugins.panels[R]||B(x(F))),F}},31326:(Y,I,e)=>{"use strict";e.d(I,{AI:()=>o,Ff:()=>E,qo:()=>d});var t=e(30038),n=e(6745),r=e(66253),s=e(20701);const o=(0,t.pU)(),m=h=>new RegExp(`${n.fu}/(.*)/pending`).test(h.type),l=h=>new RegExp(`${n.fu}/(.*)/fulfilled`).test(h.type),i=h=>new RegExp(`${n.fu}/(.*)/rejected`).test(h.type),c=h=>{const y=h.lastIndexOf("/");return h.substring(0,y)},u={items:o.getInitialState(),requests:{},settings:{displayMode:r.fy.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},f=(0,t.Z0)({name:"plugins",initialState:u,reducers:{setDisplayMode(h,y){h.settings.displayMode=y.payload}},extraReducers:h=>h.addCase(s.aU,(y,a)=>{o.upsertMany(y.items,a.payload)}).addCase(s.LR.fulfilled,(y,a)=>{o.upsertMany(y.items,a.payload)}).addCase(s.t5.fulfilled,(y,a)=>{o.updateOne(y.items,a.payload)}).addCase(s.ai.fulfilled,(y,a)=>{o.updateOne(y.items,a.payload)}).addCase(s.JC.fulfilled,(y,a)=>{o.updateOne(y.items,a.payload)}).addCase(s.NJ,(y,a)=>{y.panels[a.payload.meta.id]=a.payload}).addCase(s.h9.pending,(y,a)=>{y.isLoadingPluginDashboards=!0,y.dashboards=[]}).addCase(s.h9.fulfilled,(y,a)=>{y.isLoadingPluginDashboards=!1,y.dashboards=a.payload}).addMatcher(m,(y,a)=>{y.requests[c(a.type)]={status:r.IZ.Pending}}).addMatcher(l,(y,a)=>{y.requests[c(a.type)]={status:r.IZ.Fulfilled}}).addMatcher(i,(y,a)=>{y.requests[c(a.type)]={status:r.IZ.Rejected,error:a.payload}})}),{setDisplayMode:d}=f.actions,E=f.reducer},66253:(Y,I,e)=>{"use strict";e.d(I,{IZ:()=>i,Ip:()=>r,LZ:()=>l,Uy:()=>s,fy:()=>t,og:()=>m,u8:()=>o,vk:()=>n});var t=(c=>(c.Grid="grid",c.List="list",c))(t||{}),n=(c=>(c.Home="plugins-home",c.Browse="plugins-browse",c.Details="plugins-details",c))(n||{}),r=(c=>(c.app="apps",c.datasource="database",c.panel="credit-card",c.renderer="capture",c.secretsmanager="key-skeleton-alt",c))(r||{}),s=(c=>(c.Deleted="deleted",c.Active="active",c.Pending="pending",c.Deprecated="deprecated",c.Enterprise="enterprise",c))(s||{}),o=(c=>(c.INSTALL="INSTALL",c.UNINSTALL="UNINSTALL",c.UPDATE="UPDATE",c.REINSTALL="REINSTALL",c))(o||{}),m=(c=>(c.OVERVIEW="Overview",c.VERSIONS="Version history",c.CONFIG="Config",c.DASHBOARDS="Dashboards",c.USAGE="Usage",c.IAM="IAM",c))(m||{}),l=(c=>(c.OVERVIEW="overview",c.VERSIONS="version-history",c.CONFIG="config",c.DASHBOARDS="dashboards",c.USAGE="usage",c.IAM="iam",c))(l||{}),i=(c=>(c.Pending="Pending",c.Fulfilled="Fulfilled",c.Rejected="Rejected",c))(i||{})},74106:(Y,I,e)=>{"use strict";e.d(I,{c:()=>m});var t=e(96540),n=e(43429),r=e(14110),s=e(42418);function o(l,i){let c;switch(l){case n.QE.app:c="app plugin";break;case n.QE.panel:c="panel plugin";break;case n.QE.datasource:c="data source plugin";break;default:c="plugin"}let u=`This ${c} uses a deprecated, legacy platform based on AngularJS and `;return i===void 0?u+" may be incompatible depending on your Grafana configuration.":i?u+" will stop working in future releases of Grafana.":u+" is incompatible with your current Grafana configuration."}function m(l){const{className:i,angularSupportEnabled:c,pluginId:u,pluginType:f,showPluginDetailsLink:d,interactionElementId:E}=l,[h,y]=(0,t.useState)(!1),a={};return u&&(a.pluginId=u),E&&(a.elementId=E),h?null:t.createElement(s.F,{severity:"warning",title:"Angular plugin",className:i,onRemove:()=>y(!0)},t.createElement("p",null,o(f,c)),t.createElement("div",{className:"markdown-html"},t.createElement("ul",null,t.createElement("li",null,t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/developers/angular_deprecation/",className:"external-link",target:"_blank",rel:"noreferrer",onClick:()=>{(0,r.rR)("angular_deprecation_docs_clicked",a)}},"Read our deprecation notice and migration advice.")),d&&u?t.createElement("li",null,t.createElement("a",{href:`plugins/${encodeURIComponent(u)}`,className:"external-link",target:"_blank",rel:"noreferrer"},"View plugin details")):null)))}},8480:(Y,I,e)=>{"use strict";e.d(I,{Hv:()=>s,mz:()=>o});var t=e(32264);function n(m){return Object.values(t.$.datasources).find(l=>l.uid===m)??null}function r(m){return n(m)?.meta.angular?.detected??!1}function s(m){const l=n(m);return(l?.meta.angular?.detected&&!l?.meta.angular.hideDeprecation)??!1}const o=new Set(["autoMigrateOldPanels","autoMigrateGraphPanel","autoMigrateTablePanel","autoMigratePiechartPanel","autoMigrateWorldmapPanel","autoMigrateStatPanel","disableAngular"])},72798:(Y,I,e)=>{"use strict";e.d(I,{A:()=>n,S:()=>s});var t=e(96540);const n=t.createContext(r());n.displayName="PluginPageContext";function r(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(o){return{sectionNav:o??r().sectionNav}}},10803:(Y,I,e)=>{"use strict";e.d(I,{p:()=>s});var t=e(96540),n=e(43429),r=e(39938);const s=m=>{const l=o(m.state);return l?t.createElement(r.E,{className:m.className,color:l.color,title:l.tooltip,text:l.text,icon:l.icon}):null};function o(m){switch(m){case n.pn.deprecated:return{text:"Deprecated",color:"red",tooltip:"This feature is deprecated and will be removed in a future release"};case n.pn.alpha:return{text:"Alpha",color:"blue",tooltip:"This feature is experimental and future updates might not be backward compatible"};case n.pn.beta:return{text:"Beta",color:"blue",tooltip:"This feature is close to complete but not fully tested"};default:return null}}},31193:(Y,I,e)=>{"use strict";e.d(I,{tR:()=>v,xq:()=>h});var t=e(40187),n=e(26272),r=e(80147),s=e(72574),o=e(81634),m=e(17172),l=e(19347),i=e(26657),c=e(28138),u=e(2913),f=e(53478),d=e(66718),E=e(22854);class h{constructor(b=(0,s.w)()){this.templateSrv=b,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(b,P){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=b,this.defaultName=P;for(const C of Object.values(b))C.uid||(C.uid=C.name),this.settingsMapByUid[C.uid]=C,this.settingsMapById[C.id]=C;this.datasources[i.dR.type]=f.Ex,this.datasources[d.Uj]=f.Ex,this.settingsMapByUid[i.dR.uid]=f.$i,this.settingsMapByUid[d.Uj]=f.$i}getDataSourceSettingsByUid(b){return this.settingsMapByUid[b]}getInstanceSettings(b,P){let C=y(b);if((0,i.s9)(C))return f.$i;if(C==="default"||C==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(C[0]==="$"){const D=this.templateSrv.replace(C,P,a);let T;return D==="default"?T=this.settingsMapByName[this.defaultName]:T=this.settingsMapByUid[D]??this.settingsMapByName[D],T?{...T,isDefault:!1,name:C,uid:C,rawRef:{type:T.type,uid:T.uid}}:void 0}return this.settingsMapByUid[C]??this.settingsMapByName[C]??this.settingsMapById[C]}get(b,P){let C=y(b);if(!C)return this.get(this.defaultName);if((0,i.s9)(b))return Promise.resolve(this.datasources[d.Uj]);const D=this.settingsMapByName[C];return D&&(C=D.uid),this.datasources[C]?Promise.resolve(this.datasources[C]):(C=this.templateSrv.replace(C,P,a),C==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[C]?Promise.resolve(this.datasources[C]):this.loadDatasource(C))}async loadDatasource(b){if(this.datasources[b])return Promise.resolve(this.datasources[b]);const P=this.getInstanceSettings(b);if(!P)return Promise.reject({message:`Datasource ${b} was not found`});try{const C=await(0,E.cS)(P.meta);if(this.datasources[b])return this.datasources[b];const D=C.DataSourceClass.length!==1;let T;if(D?T=(0,o.C)().instantiate(C.DataSourceClass,{instanceSettings:P}):T=new C.DataSourceClass(P),T.components=C.components,!(T instanceof t.mA)){const M=T;M.name=P.name,M.id=P.id,M.type=P.type,M.meta=P.meta,M.uid=P.uid,T.getRef=t.mA.prototype.getRef}return this.datasources[b]=T,this.datasources[T.uid]=T,T}catch(C){return C instanceof Error&&c.A.emit(n.r1.alertError,[P.name+" plugin failed",C.toString()]),Promise.reject({message:`Datasource: ${b} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(b={}){const P=Object.values(this.settingsMapByName).filter(D=>!(D.meta.id==="grafana"||D.meta.id==="mixed"||D.meta.id==="dashboard"||b.metrics&&!D.meta.metrics||b.tracing&&!D.meta.tracing||b.logs&&D.meta.category!=="logging"&&!D.meta.logs||b.annotations&&!D.meta.annotations||b.alerting&&!D.meta.alerting||b.pluginId&&!(0,r._)(b.pluginId,D.meta)||b.filter&&!b.filter(D)||b.type&&(Array.isArray(b.type)?!b.type.includes(D.type):b.type!==D.type)||!b.all&&D.meta.metrics!==!0&&D.meta.annotations!==!0&&D.meta.tracing!==!0&&D.meta.logs!==!0&&D.meta.alerting!==!0));if(b.variables)for(const D of this.templateSrv.getVariables()){if(D.type!=="datasource")continue;let T=D.current.value==="default"?this.defaultName:D.current.value;Array.isArray(T)&&(T=T[0]);const M=!Array.isArray(T)&&(this.settingsMapByName[T]||this.settingsMapByUid[T]);if(M){const O=`\${${D.name}}`;P.push({...M,isDefault:!1,name:O,uid:O})}}const C=P.sort((D,T)=>D.name.toLowerCase()>T.name.toLowerCase()?1:D.name.toLowerCase()<T.name.toLowerCase()?-1:0);if(!b.pluginId&&!b.alerting){if(b.mixed){const D=this.getInstanceSettings("-- Mixed --");D&&P.push(D)}if(b.dashboard){const D=this.getInstanceSettings("-- Dashboard --");D&&P.push(D)}if(!b.tracing){const D=this.getInstanceSettings("-- Grafana --");D&&P.push(D)}}return C}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(b=>({name:b.name,value:b.name,meta:b.meta}))}getMetricSources(b){return this.getList({metrics:!0,variables:!b?.skipVariables}).map(P=>({name:P.name,value:P.name,meta:P.meta}))}async reload(){const b=await(0,m.AI)().get("/api/frontend/settings");u.Ay.datasources=b.datasources,u.Ay.defaultDatasource=b.defaultDatasource,this.init(b.datasources,b.defaultDatasource)}}function y(g){return(0,i.s9)(g)?i.dR.uid:typeof g=="string"?g:g?.uid}function a(g){return Array.isArray(g)?g[0]:g}const v=()=>(0,l.l)()},75462:(Y,I,e)=>{"use strict";e.d(I,{$Y:()=>T,FF:()=>E,N9:()=>A,io:()=>S,nv:()=>g,ol:()=>P,pL:()=>x,yS:()=>y,yb:()=>v,yt:()=>C,z1:()=>h});var t=e(32196),n=e(2543),r=e.n(n),s=e(96540),o=e(16817),m=e(74135),l=e(13834),i=e(47232),c=e(37390),u=e(28138),f=e(27716),d=e(28444);function E(R){console.warn(`[Plugin Extensions] ${R}`)}function h(R){return typeof R=="object"&&"type"in R&&R.type===m.u.link}function y(R){return typeof R=="object"&&"type"in R&&R.type===m.u.component}function a(R,B=""){return(...U)=>{try{return R(...U)}catch(F){F instanceof Error&&console.warn(`${B}${F.message}`)}}}function v(R,B){return{openModal:async F=>{const{title:K,body:w,width:L,height:V}=F;u.A.publish(new d.S8({component:g(R,b({title:K,body:w,width:L,height:V}))}))},context:B}}const g=(R,B)=>F=>{const{error:K,loading:w,value:L}=(0,o.A)(()=>(0,f.x)(R,{showErrorAlert:!1}));return w?null:K?(E(`Could not fetch plugin meta information for "${R}", aborting. (${K.message})`),null):L?s.createElement(l.a,{meta:L},s.createElement(B,{...F})):(E(`Fetched plugin meta information is empty for "${R}", aborting.`),null)},b=({title:R,body:B,width:U,height:F})=>{const K=(0,t.css)({width:U,height:F});return({onDismiss:L})=>s.createElement(c.a,{title:R,className:K,isOpen:!0,onDismiss:L,onClickBackdrop:L},s.createElement(B,{onDismiss:L}))};function P(R,B=new Map){if(!R||typeof R!="object"||Object.isFrozen(R))return R;const U=Array.isArray(R)?[...R]:{...R};if(B.has(R))return B.get(R);B.set(R,U);const F=Reflect.ownKeys(U);for(const K of F){const w=Array.isArray(U)?U[Number(K)]:U[K];w&&(typeof w=="object"||typeof w=="function")&&(Array.isArray(U)?U[Number(K)]=P(w,B):U[K]=P(w,B))}return Object.freeze(U)}function C(R,B){const U=`${R}${B.extensionPointId}${B.title}`;return Array.from(U).reduce((F,K)=>Math.imul(31,F)+K.charCodeAt(0)|0,0).toString()}const D=Symbol("isReadOnlyProxy");function T(R){if(!R||typeof R!="object"||O(R))return R;const B=new WeakMap;return new Proxy(R,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(U,F,K){if(F===D)return!0;const w=Reflect.get(U,F,K);return(0,i.Ar)(w)?(0,i.KQ)(w):(0,n.isObject)(w)||(0,n.isArray)(w)?(B.has(w)||B.set(w,T(w)),B.get(w)):w}})}function M(R){return typeof R=="object"&&R!==null}function O(R){return M(R)&&R[D]===!0}function S(R){const B={type:m.u.link,...R};return p(B),B}function p(R){if(R.type!==m.u.link)throw Error("config is not a extension link")}function x(R,B){return R.length<B?R:`${R.slice(0,B-3).trimEnd()}...`}function A(R){const B={},U=[];for(const K of R){const w=K.category;if(!w){U.push({text:x(K.title,25),href:K.path,onClick:K.onClick});continue}Array.isArray(B[w])||(B[w]=[]),B[w].push({text:x(K.title,25),href:K.path,onClick:K.onClick})}const F=Object.keys(B).reduce((K,w)=>(K.push({text:x(w,25),type:"group",subMenu:B[w]}),K),[]);return U.length>0&&(F.length>0&&F.push({text:"divider",type:"divider"}),Array.prototype.push.apply(F,U)),F}},15162:(Y,I,e)=>{"use strict";e.d(I,{Kk:()=>u,PY:()=>f,TV:()=>l,d4:()=>c,f7:()=>h,oZ:()=>i});var t=e(65158),n=e(2913),r=e(41394),s=e(22854);const o={},m={};function l(y){const a=o[y];if(a)return a;const v=c(y);if(!v)throw new Error(`Plugin ${y} not found`);return o[y]=d(v),y!==v.type&&(o[v.type]=o[y]),o[y]}function i(y){return!!c(y)}function c(y){const a=n.Ay.panels[y];if(!a){for(const v of Object.values(n.Ay.panels))if(v.aliasIDs?.includes(y))return v}return a}function u(y){return d(y)}function f(y){return m[y]}function d(y){return(0,s.j4)({path:y.module,version:y.info?.version,isAngular:y.angular?.detected,pluginId:y.id}).then(a=>{if(a.plugin)return a.plugin;if(a.PanelCtrl){const v=new t.m(null);return v.angularPanelCtrl=a.PanelCtrl,v}throw new Error("missing export: plugin or PanelCtrl")}).then(a=>(a.meta=y,m[y.id]=a,!a.panel&&a.angularPanelCtrl&&(a.panel=E(a)),a)).catch(a=>(console.warn("Error loading panel plugin: "+y.id,a),(0,r.W)(y,a)))}let E=y=>null;function h(y){E=y}},81900:(Y,I,e)=>{"use strict";e.d(I,{GD:()=>s,ni:()=>m,sk:()=>o});var t=e(27716);const n={},r=Date.now();function s({path:i,version:c}){const u=l(i);u&&!n[u]&&(n[u]=encodeURI(c))}function o(i){const c=`plugins/${i}/module`;n[c]&&delete n[c],(0,t.o)(i)}function m(i,c=r){const u=l(i);if(!u)return`${i}?_cache=${c}`;const d=n[u]||c;return`${i}?_cache=${d}`}function l(i){const c=/\/?.+\/(plugins\/.+\/module)\.js/i.exec(i);if(!c)return;const[u,f]=c;if(f)return f}},45179:(Y,I,e)=>{"use strict";e.d(I,{$b:()=>n,Bu:()=>r,XV:()=>t});const t="package",n=/^plugins.+\.css$/i,r=/^(text|application)\/(x-)?javascript(;|$)/},63770:(Y,I,e)=>{"use strict";e.d(I,{z:()=>l});var t=e(59511),n=e.n(t),r=e(65024),s=e.n(r),o=e(35135),m=e.n(o);const l=window.System},94429:(Y,I,e)=>{"use strict";e.d(I,{kB:()=>f,OD:()=>d,Av:()=>E});var t=e(32264),n=e(66161),r=e(45179),s=e(34867);const o=new WeakMap,m={};function l(h,y,a){const v={get(g,b){if(document.currentScript===null&&typeof b!="symbol"&&b.toString()!=="__useDefault"){const C=`${y}.${String(b)}`,D=`${C}`;m[D]||(m[D]=!0,(0,s.fH)(`Plugin using ${C}`,{key:String(b),parent:y,packageName:a}))}let P=Reflect.get(g,b);return P!==null&&typeof P=="object"&&!(P instanceof RegExp)?(o.has(P)||o.set(P,l(P,`${y}.${String(b)}`,a)),o.get(P)):(typeof P=="function"&&(P=P.bind(g)),P)}};return typeof h=="object"&&h!==null?new Proxy(h,v):h}const i=/^(@grafana|app\/)/;function c(h,y){return i.test(y)?l(h,y,y):h}var u=e(63770);function f(h){return Object.keys(h).reduce((y,a)=>{const v=`${r.XV}:${a}`,g=t.$.featureToggles.pluginsAPIMetrics?c(h[a],a):h[a];return u.z.set(v,g),n.s.set(a,h[a]),y[a]=v,y},{})}function d(h){return!!t.$.pluginsCDNBaseURL&&h.startsWith(t.$.pluginsCDNBaseURL)}function E(h){return h.startsWith("http")||h.startsWith("/")?h:`${t.$.appSubUrl??""}/${h}`}},27716:(Y,I,e)=>{"use strict";e.d(I,{o:()=>s,x:()=>r});var t=e(17172);const n={};function r(o,m){const l=n[o];return l?Promise.resolve(l):(0,t.AI)().get(`/api/plugins/${o}/settings`,void 0,void 0,m).then(i=>(n[o]=i,i)).catch(i=>typeof i=="object"&&i!==null&&"status"in i&&i.status===403?(i.isHandled=!0,Promise.reject(i)):Promise.reject(new Error("Unknown Plugin")))}const s=o=>o?delete n[o]:Object.keys(n).forEach(m=>delete n[m])},22854:(Y,I,e)=>{"use strict";e.d(I,{ui:()=>Ep,cS:()=>vp,j4:()=>Tc});var t={};e.r(t),e.d(t,{plugin:()=>ft});var n={};e.r(n),e.d(n,{plugin:()=>zt});var r={};e.r(r),e.d(r,{plugin:()=>Si});var s={};e.r(s),e.d(s,{plugin:()=>Qi});var o={};e.r(o),e.d(o,{plugin:()=>fs});var m={};e.r(m),e.d(m,{plugin:()=>Eu});var l={};e.r(l),e.d(l,{plugin:()=>Uu});var i={};e.r(i),e.d(i,{plugin:()=>Ku});var c={};e.r(c),e.d(c,{plugin:()=>zc});var u={};e.r(u),e.d(u,{plugin:()=>Zu});var f={};e.r(f),e.d(f,{plugin:()=>sm});var d={};e.r(d),e.d(d,{plugin:()=>Ms});var E={};e.r(E),e.d(E,{plugin:()=>Pm});var h={};e.r(h),e.d(h,{plugin:()=>Cm});var y={};e.r(y),e.d(y,{plugin:()=>Wm});var a={};e.r(a),e.d(a,{plugin:()=>Qm});var v={};e.r(v),e.d(v,{plugin:()=>Jm});var g={};e.r(g),e.d(g,{plugin:()=>cc});var b={};e.r(b),e.d(b,{plugin:()=>gf});var P={};e.r(P),e.d(P,{plugin:()=>Rf});var C={};e.r(C),e.d(C,{plugin:()=>Uf});var D={};e.r(D),e.d(D,{plugin:()=>Kf});var T={};e.r(T),e.d(T,{plugin:()=>_f});var M=e(40187),O=e(41987),S=e(32264),p=e(96540),x=e(65158),A=e(67061),R=e(55852),B=e(85242),U=e(51612),F=e(31678),K=e(57220),w=e(2543),L=e.n(w),V=e(88323),N=e(14578),z=e(61410),J=e(23770),G=e(88467),H=e(94822),q=e(98164),le=e(54317);function me(Q,ce){const he=(0,q.J$)(Q);return(0,q.Av)(ce,he)}function k(Q,ce){const{stateFilter:he,alertInstanceLabelFilter:Ae}=Q;return(0,w.isEmpty)(he)?ce:ce.filter(Ke=>(he.firing&&((0,le.S)(Ke,H.Gi.Alerting)||(0,le.S)(Ke,H.cF.Firing))||he.pending&&((0,le.S)(Ke,H.Gi.Pending)||(0,le.S)(Ke,H.cF.Pending))||he.noData&&(0,le.S)(Ke,H.Gi.NoData)||he.normal&&(0,le.S)(Ke,H.Gi.Normal)||he.error&&(0,le.S)(Ke,H.Gi.Error)||he.inactive&&(0,le.S)(Ke,H.cF.Inactive))&&(Ae?me(Q.alertInstanceLabelFilter,Ke.labels):!0))}function ee(Q){return!(Q.startsWith("__")&&Q.endsWith("__"))}const X=Q=>{const{onChange:ce,id:he,defaultValue:Ae,dataSource:Ke}=Q,Qe=(0,F.useDispatch)();(0,p.useEffect)(()=>{Ke?Ke&&Qe((0,J.mB)({rulesSourceName:Ke})):Qe((0,J.nV)())},[Qe,Ke]);const tt=(0,z.$)(It=>It.promRules),gt=(0,G.p0)(tt),yt=(0,G.Vf)(tt),bt=(0,p.useMemo)(()=>{if((0,w.isEmpty)(tt))return[];if(!gt)return[];const It=Object.keys(tt).flatMap(Rt=>tt[Rt].result??[]).flatMap(Rt=>Rt.groups).flatMap(Rt=>Rt.rules.filter(Nt=>Nt.type===H.JS.Alerting)).flatMap(Rt=>Rt.alerts??[]).map(Rt=>Object.keys(Rt.labels??{})).flatMap(Rt=>Rt.filter(ee));return(0,w.uniq)(It)},[gt,tt]);return p.createElement(V.KF,{id:he,isLoading:yt,defaultValue:Ae,"aria-label":"group by label keys",placeholder:"Group by",prefix:p.createElement(N.I,{name:"tag-alt"}),onChange:It=>{ce(It.map(Rt=>Rt.value??""))},options:bt.map(It=>({label:It,value:It}))})};var j=e(32196),ne=e(42941),te=e(94701),oe=e(3591),ie=e(40845),ue=e(40276),be=e(37494),ge=e(39558),re=e(42418),ye=e(2913),Be=e(55907),ve=e(79938),Me=e(15300),ke=e(9518),Se=e(55740),We=e(23662),De=e(14792),pe=e(19073),Ne=e(64861),Le=e(15458),He=e(55127),je=e.n(He),at=e(80045),Ye=e(56361),$e=e(15054);const xe=({rule:Q,alerts:ce,options:he,grafanaTotalInstances:Ae,handleInstancesLimit:Ke,limitInstances:Qe,grafanaFilteredInstancesTotal:tt})=>{const gt=he.groupMode===Ne.r6.Custom?!0:he.showInstances,[yt,bt]=(0,p.useState)(gt),It=(0,ie.of)(Fe),Rt=(0,ie.of)(R.my),Nt=(0,p.useCallback)(()=>{bt(xa=>!xa)},[]),St=(0,p.useMemo)(()=>k(he,(0,Ye.Cp)(he.sortOrder,ce))??[],[ce,he]),Jt=Ae!==void 0,tn=Ae&&tt?Ae-tt:0,Yt=ce.length-St.length,Zt=Jt?tn:Yt,sn=St.length>0,Tn=sn?Nt:w.noop;(0,p.useEffect)(()=>{St.length===0&&bt(!1)},[St]);const cn=async()=>{Ke&&(Ke(!1),bt(!0))},ta=async()=>{Ke&&(Ke(!0),bt(!0))},Kn=Qe?tt:St.length,Qn=St.length,va=Jt?Kn:Qn,ca=Qe?`Showing ${Me.Ys} of ${Ae} instances`:`Showing all ${Ae} instances`,ma=Qe?"View all instances":`Limit the result to ${Me.Ys} instances`,On=Ae&&Me.Ys===St.length&&Ae>St.length,$n=Ae&&Me.Ys<St.length&&!Qe,Nn=On||$n?p.createElement("div",{className:It.footerRow},p.createElement("div",null,ca),p.createElement(R.$n,{size:"sm",variant:"secondary",onClick:Qe?cn:ta},ma)):void 0;return p.createElement("div",null,he.groupMode===Ne.r6.Default&&p.createElement("button",{className:(0,j.cx)(Rt,sn?It.clickable:""),onClick:()=>Tn()},sn&&p.createElement(N.I,{name:yt?"angle-down":"angle-right",size:"md"}),p.createElement("span",null,`${va} ${je()("instance",va)}`),Zt>0&&p.createElement("span",null,", ",`${Zt} hidden by filters`)),yt&&p.createElement(at.D,{rule:Q,instances:St,pagination:{itemsPerPage:2*$e.FG},footerRow:Nn}))},Fe=Q=>({clickable:(0,j.css)`
    cursor: pointer;
  `,footerRow:(0,j.css)`
    display: flex;
    flex-direction: column;
    gap: ${Q.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),Ee="__ungrouped__",se=({rules:Q,options:ce})=>{const he=(0,ie.of)(ot),Ae=ce.groupBy,Ke=(0,p.useMemo)(()=>{const Qe=new Map,tt=bt=>Ae?Ce(bt,Ae):!0;Q.forEach(bt=>{const It=(0,We.TU)(bt),Rt=tt(bt);(It?.alerts??[]).forEach(Nt=>{const St=Rt?ae(Ae,Nt.labels):Ee,Jt=Qe.get(St)?.alerts??[];Qe.set(St,{rule:bt,alerts:[...Jt,Nt]})})});const gt=Qe.get(Ee)?.alerts??[];return Qe.delete(Ee),Qe.set(Ee,{alerts:gt}),Array.from(Qe.entries()).reduce((bt,[It,{rule:Rt,alerts:Nt}])=>{const St=k(ce,Nt);return St.length>0&&bt.set(It,{rule:Rt,alerts:St}),bt},new Map)},[Ae,Q,ce]);return p.createElement(p.Fragment,null,Array.from(Ke).map(([Qe,{rule:tt,alerts:gt}])=>p.createElement("li",{className:he.alertRuleItem,key:Qe,"data-testid":Qe},p.createElement("div",null,p.createElement("div",{className:he.customGroupDetails},p.createElement("div",{className:he.alertLabels},Qe!==Ee&&fe(Qe).map(([yt,bt])=>p.createElement(Le.R,{key:yt,labelKey:yt,value:bt})),Qe===Ee&&"No grouping")),p.createElement(xe,{rule:tt,alerts:gt,options:ce})))))};function ae(Q,ce){return new URLSearchParams(Q.map(he=>[he,ce[he]])).toString()}function fe(Q){return[...new URLSearchParams(Q)]}function Ce(Q,ce){const he=(0,We.TU)(Q);return ce.every(Ae=>(he?.alerts??[]).some(Ke=>Ke.labels[Ae]))}const Re=se;var Oe=e(87586),ze=e(70416),Xe=e(26058),Ze=e(18461),et=e(3704);function nt(Q){return Object.values(Q).filter(ce=>ce!==void 0).reduce((ce,he)=>ce+he,0)}const lt=({rules:Q,options:ce,handleInstancesLimit:he,limitInstances:Ae,hideViewRuleLinkText:Ke})=>{const Qe=(0,ie.of)(ot),tt=(0,ie.of)(rt),{href:gt}=(0,Oe.A)(),yt=Q.length<=ce.maxItems?Q:Q.slice(0,ce.maxItems);return p.createElement(p.Fragment,null,p.createElement("ol",{className:Qe.alertRuleList},yt.map((bt,It)=>{const{namespaceName:Rt,groupName:Nt,dataSourceName:St}=bt,Jt=(0,We.Z8)(bt.promRule)?bt.promRule:void 0,tn=(0,We.Om)(Jt),Yt=(0,Ze.UP)(bt.dataSourceName,bt),Zt=(0,Ze.$9)(Yt),sn=bt.dataSourceName===K.hY?nt(bt.instanceTotals):void 0,Tn=bt.dataSourceName===K.hY?nt(bt.filteredInstanceTotals):void 0,cn=(0,et.c)(`/alerting/${encodeURIComponent(St)}/${encodeURIComponent(Zt)}/view`,{returnTo:gt??""});return Jt?p.createElement("li",{className:Qe.alertRuleItem,key:`alert-${Rt}-${Nt}-${bt.name}-${It}`},p.createElement("div",{className:tt.icon},p.createElement(N.I,{name:Be.A.getStateDisplayModel(Jt.state).iconClass,className:tt[(0,We.Wy)(Jt.state)],size:"lg"})),p.createElement("div",{className:Qe.alertNameWrapper},p.createElement("div",{className:Qe.instanceDetails},p.createElement(A.B,{direction:"row",gap:1},p.createElement("div",{className:Qe.alertName,title:bt.name},bt.name),p.createElement(Xe.h,null),cn&&p.createElement("a",{href:cn,target:"__blank",className:Qe.link,rel:"noopener","aria-label":"View alert rule"},p.createElement("span",{className:(0,j.cx)({[Qe.hidden]:Ke})},"View alert rule"),p.createElement(N.I,{name:"external-link-alt",size:"sm"}))),p.createElement("div",{className:Qe.alertDuration},p.createElement("span",{className:tt[(0,We.Wy)(Jt.state)]},(0,We.XI)(Jt.state))," ",tn&&Jt.state!==H.cF.Inactive&&p.createElement(p.Fragment,null,"for"," ",p.createElement("span",null,(0,ze.dU)({start:tn,end:Date.now()}))))),p.createElement(xe,{rule:bt,alerts:Jt.alerts??[],options:ce,grafanaTotalInstances:sn,grafanaFilteredInstancesTotal:Tn,handleInstancesLimit:he,limitInstances:Ae}))):null})))},rt=Q=>({common:(0,j.css)`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${Q.shape.radius.default};
    font-size: ${Q.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:(0,j.css)`
    margin-top: ${Q.spacing(2.5)};
    align-self: flex-start;
  `,good:(0,j.css)`
    color: ${Q.colors.success.main};
  `,bad:(0,j.css)`
    color: ${Q.colors.error.main};
  `,warning:(0,j.css)`
    color: ${Q.colors.warning.main};
  `,neutral:(0,j.css)`
    color: ${Q.colors.secondary.main};
  `,info:(0,j.css)`
    color: ${Q.colors.primary.main};
  `}),ut=lt;function Et(Q){const ce=(he,[Ae,Ke])=>Ke?[...he,Ae]:he;return Object.entries(Q).reduce(ce,[])}const Ct=({dispatch:Q,limitInstances:ce,matcherList:he,dataSourceName:Ae,stateList:Ke})=>{Q(Ae?(0,J.Lc)({rulesSourceName:Ae,limitAlerts:ce?Me.Ys:void 0,matcher:he,state:Ke}):(0,J.yo)(!1,{limitAlerts:ce?Me.Ys:void 0,matcher:he,state:Ke}))};function Ut(Q){const ce=(0,F.useDispatch)(),[he,Ae]=(0,ne.A)(!0),[,Ke]=(0,pe.Ej)(pe.RY.ViewAlertRule),{usePrometheusRulesByNamespaceQuery:Qe}=ve.hK,tt=(0,z.$)(da=>da.promRules),gt=(0,z.$)(da=>da.rulerRules),yt=(0,G.t4)(tt),bt=Q.width<320;(0,p.useEffect)(()=>{Q.options.stateFilter.inactive===!0&&(Q.options.stateFilter.normal=!0),Q.options.stateFilter.inactive=void 0},[Q.options.stateFilter]);let It;(0,te.A)(()=>{It=(0,De.UA)().getCurrent()});const Rt=(0,p.useMemo)(()=>Et(Q.options.stateFilter),[Q.options.stateFilter]),{options:Nt,replaceVariables:St}=Q,Jt=Nt.datasource===K.vv?K.hY:Nt.datasource,tn={...Q.options,alertName:St(Nt.alertName),alertInstanceLabelFilter:St(Nt.alertInstanceLabelFilter)},Yt=(0,p.useMemo)(()=>(0,q.J$)(tn.alertInstanceLabelFilter),[tn.alertInstanceLabelFilter]),Zt=(!Jt||Jt===K.hY)&&Ke,{currentData:sn=[],isLoading:Tn,refetch:cn}=Qe({limitAlerts:he?Me.Ys:void 0,matcher:Yt,state:Rt},{skip:!Zt});(0,p.useEffect)(()=>{tt.loading||Ct({dispatch:ce,limitInstances:he,matcherList:Yt,dataSourceName:Jt,stateList:Rt});const da=It?.events.subscribe(oe.sR,()=>{Zt&&cn(),(!Jt||Jt!==K.hY)&&Ct({dispatch:ce,limitInstances:he,matcherList:Yt,dataSourceName:Jt,stateList:Rt})});return()=>{da?.unsubscribe()}},[ce,It,Yt,Rt,he,Jt,cn,Zt,tt.loading]);const ta=da=>{da?(Ct({dispatch:ce,limitInstances:he,matcherList:Yt,dataSourceName:Jt,stateList:Rt}),Ae(!0)):(Ct({dispatch:ce,limitInstances:!1,matcherList:Yt,dataSourceName:Jt,stateList:Rt}),Ae(!1))},Kn=(0,ke.dy)(void 0,sn),Qn=(0,G.t4)(gt),va=(0,G.BU)(tt),ca=yt||Qn,ma=(0,G.Vf)(tt),On=(0,ie.of)(ot),$n=(0,We.dS)(Kn),Nn=Q.options.sortOrder,xa=(0,p.useMemo)(()=>Wt(Q,Gt(Nn,$n)),[$n,Nn,Q]),Wa=xa.length===0?"No alerts matching filters":void 0,ka=Tn||ca&&ma&&!va,ra=Object.values(tt).some(da=>da.result);return p.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},p.createElement("div",{className:On.container},ra&&Wa&&p.createElement("div",{className:On.noAlertsMessage},Wa),ra&&p.createElement("section",null,Q.options.viewMode===Ne.nE.Stat&&p.createElement(be.yV,{width:Q.width,height:Q.height,graphMode:be.$p.None,textMode:be.SV.Auto,justifyMode:be.F8.Auto,theme:ye.config.theme2,value:{text:`${xa.length}`,numeric:xa.length}}),Q.options.viewMode===Ne.nE.List&&Q.options.groupMode===Ne.r6.Custom&&p.createElement(Re,{rules:xa,options:tn}),Q.options.viewMode===Ne.nE.List&&Q.options.groupMode===Ne.r6.Default&&p.createElement(ut,{rules:xa,options:tn,handleInstancesLimit:ta,limitInstances:he,hideViewRuleLinkText:bt})),ka&&p.createElement(ge._,{text:"Loading..."})))}function Gt(Q,ce){if(Q===Ne.xB.Importance)return(0,w.sortBy)(ce,Ae=>Be.A.alertStateSortScore[Ae.state]);if(Q===Ne.xB.TimeAsc)return(0,w.sortBy)(ce,Ae=>{const Ke=(0,We.TU)(Ae)??void 0;return(0,We.Om)(Ke)||new Date});if(Q===Ne.xB.TimeDesc)return(0,w.sortBy)(ce,Ae=>{const Ke=(0,We.TU)(Ae)??void 0;return(0,We.Om)(Ke)||new Date}).reverse();const he=(0,w.sortBy)(ce,Ae=>Ae.name.toLowerCase());return Q===Ne.xB.AlphaDesc&&he.reverse(),he}function Wt(Q,ce){const{options:he,replaceVariables:Ae}=Q;let Ke=[...ce];if(he.dashboardAlerts){const Qe=(0,De.UA)().getCurrent()?.uid;Ke=Ke.filter(({annotations:tt={}})=>Object.entries(tt).some(([gt,yt])=>gt===Se.YH.dashboardUID&&yt===Qe))}if(he.alertName){const Qe=Ae(he.alertName);Ke=Ke.filter(({name:tt})=>tt.toLocaleLowerCase().includes(Qe.toLocaleLowerCase()))}if(Ke=Ke.filter(Qe=>{const tt=(0,We.TU)(Qe);return tt?he.stateFilter.firing&&tt.state===H.cF.Firing||he.stateFilter.pending&&tt.state===H.cF.Pending||he.stateFilter.normal&&tt.state===H.cF.Inactive:!1}),he.folder&&(Ke=Ke.filter(Qe=>Qe.namespaceName===he.folder.title)),he.datasource){const Qe=he.datasource===K.vv;Ke=Ke.filter(Qe?({dataSourceName:tt})=>tt===K.hY:({dataSourceName:tt})=>tt===he.datasource)}return Ke=Ke.reduce((Qe,tt)=>{const gt=(0,We.TU)(tt);return(gt?k({stateFilter:he.stateFilter,alertInstanceLabelFilter:Ae(he.alertInstanceLabelFilter)},gt.alerts??[]):[]).length&&Qe.push(tt),Qe},[]),Ke}const ot=Q=>({cardContainer:(0,j.css)`
    padding: ${Q.spacing(.5)} 0 ${Q.spacing(.25)} 0;
    line-height: ${Q.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,j.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,j.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,j.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${Q.colors.background.secondary};
    padding: ${Q.spacing(.5)} ${Q.spacing(1)};
    border-radius: ${Q.shape.radius.default};
    margin-bottom: ${Q.spacing(.5)};

    gap: ${Q.spacing(2)};
  `,alertName:(0,j.css)`
    font-size: ${Q.typography.h6.fontSize};
    font-weight: ${Q.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:(0,j.css)`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:(0,j.css)`
    > * {
      margin-right: ${Q.spacing(.5)};
    }
  `,alertDuration:(0,j.css)`
    font-size: ${Q.typography.bodySmall.fontSize};
  `,alertRuleItemText:(0,j.css)`
    font-weight: ${Q.typography.fontWeightBold};
    font-size: ${Q.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:(0,j.css)`
    color: ${Q.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,j.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,j.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,j.css)`
    margin-right: ${Q.spacing(.5)};
  `,instanceDetails:(0,j.css)`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:(0,j.css)`
    margin-bottom: ${Q.spacing(.5)};
  `,link:(0,j.css)`
    word-break: break-all;
    color: ${Q.colors.primary.text};
    display: flex;
    align-items: center;
    gap: ${Q.spacing(1)};
  `,hidden:(0,j.css)`
    display: none;
  `});function Tt(Q){const[,ce]=(0,pe.Ej)(pe.RY.ViewAlertRule),[,he]=(0,pe.Ej)(pe.RY.ViewExternalAlertRule);return!ce&&!he?p.createElement(re.F,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):p.createElement(Ut,{...Q})}const ft=new x.m(Tt).setPanelOptions(Q=>{Q.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:Ne.nE.List,settings:{options:[{label:"List",value:Ne.nE.List},{label:"Stat",value:Ne.nE.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:Ne.r6.Default,settings:{options:[{value:Ne.r6.Default,label:"Default grouping"},{value:Ne.r6.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:ce=>ce.groupMode===Ne.r6.Custom,category:["Options"],editor:ce=>p.createElement(X,{id:ce.id??"groupBy",defaultValue:ce.value.map(he=>({label:he,value:he})),onChange:ce.onChange,dataSource:ce.context.options.datasource})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:Ne.xB.AlphaAsc},{label:"Alphabetical (desc)",value:Ne.xB.AlphaDesc},{label:"Importance",value:Ne.xB.Importance},{label:"Time (asc)",value:Ne.xB.TimeAsc},{label:"Time (desc)",value:Ne.xB.TimeDesc}]},defaultValue:Ne.xB.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts linked to this dashboard",description:"Only show alerts linked to this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter from alert source",id:"datasource",defaultValue:null,editor:function(he){return p.createElement(A.B,{gap:1},p.createElement(U.s,{...he,type:["prometheus","loki","grafana"],noDefault:!0,current:he.value,onChange:Ae=>he.onChange(Ae.name)}),p.createElement(R.$n,{variant:"secondary",onClick:()=>he.onChange(null)},"Clear"))},category:["Filter"]}).addCustomEditor({showIf:ce=>ce.datasource===K.vv||!ce.datasource,path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(he){return p.createElement(B.sR,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:he.value?.title,initialFolderUid:he.value?.uid,permissionLevel:F.PermissionLevelString.View,onClear:()=>he.onChange(""),...he})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})});var Mt=e(79924),_t=e(64423),nn=e(71733),dn=e(26272),en=e(69129),Xt=e(47232),En=e(12131),Vn=e(17172),Wn=e(64149),na=e(3911),Bt=e(85918),ln=e(28138),mn=e(10860),Dn=e(44522),hn=e(56034);const Fn=({options:Q,annotation:ce,formatDate:he,onClick:Ae,onAvatarClick:Ke,onTagClick:Qe})=>{const tt=(0,ie.of)(An),{showUser:gt,showTags:yt,showTime:bt}=Q,{text:It="",login:Rt,email:Nt,avatarUrl:St,tags:Jt,time:tn,timeEnd:Yt}=ce,Zt=()=>{Ae(ce)},sn=()=>{Ke(ce)},Tn=Rt&&gt,cn=tn&&bt,ta=Yt&&Yt!==tn&&bt;return p.createElement(mn.Z,{className:tt.card,onClick:Zt},p.createElement(mn.Z.Heading,null,p.createElement(Dn.I,{className:tt.heading,onClick:Kn=>{Kn.stopPropagation()},content:It})),cn&&p.createElement(mn.Z.Description,{className:tt.timestamp},p.createElement(Hn,{formatDate:he,time:tn}),ta&&p.createElement(p.Fragment,null,p.createElement("span",{className:tt.time},"-"),p.createElement(Hn,{formatDate:he,time:Yt})," ")),Tn&&p.createElement(mn.Z.Meta,{className:tt.meta},p.createElement(wn,{email:Nt,login:Rt,avatarUrl:St,onClick:sn})),yt&&Jt&&p.createElement(mn.Z.Tags,null,p.createElement(Wn.L,{tags:Jt,onClick:Kn=>Qe(Kn,!1)})))},wn=({onClick:Q,avatarUrl:ce,login:he,email:Ae})=>{const Ke=(0,ie.of)(An),Qe=gt=>{gt.stopPropagation(),Q()},tt=p.createElement("span",null,"Created by:",p.createElement("br",null)," ",Ae);return p.createElement(hn.m,{content:tt,theme:"info",placement:"top"},p.createElement("button",{onClick:Qe,className:Ke.avatar},p.createElement("img",{src:ce,alt:"avatar icon"})))},Hn=({time:Q,formatDate:ce})=>{const he=(0,ie.of)(An);return p.createElement("span",{className:he.time},p.createElement("span",null,ce(Q)))};function An(Q){return{card:(0,j.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:Q.spacing(1),margin:Q.spacing(.5),width:"inherit"}),heading:(0,j.css)({a:{zIndex:1,position:"relative",color:Q.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,j.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,j.css)({margin:0,alignSelf:"center"}),time:(0,j.css)({marginLeft:Q.spacing(1),marginRight:Q.spacing(1),fontSize:Q.typography.bodySmall.fontSize,color:Q.colors.text.secondary}),avatar:(0,j.css)({border:"none",background:"inherit",margin:0,padding:Q.spacing(.5),img:{borderRadius:Q.shape.radius.circle,width:Q.spacing(2),height:Q.spacing(2)}})}}class In extends p.PureComponent{constructor(ce){super(ce),this.style=kn(S.$.theme2),this.subs=new _t.yU,this.tagListRef=p.createRef(),this.onAnnoClick=async he=>{if(!he.time)return;const{options:Ae}=this.props,Qe=(0,De.UA)().getCurrent(),tt={from:this._timeOffset(he.time,Ae.navigateBefore,!0),to:this._timeOffset(he.timeEnd??he.time,Ae.navigateAfter,!1),viewPanel:Ae.navigateToPanel?he.panelId:void 0};if(Qe?.uid===he.dashboardUID){En.Ny.partial(tt);return}const gt=await(0,Vn.AI)().get("/api/search",{dashboardUIDs:he.dashboardUID});if(gt&&gt.length&&gt[0].uid===he.dashboardUID){const yt=gt[0],bt=new URL(yt.url,window.location.origin);bt.searchParams.set("from",String(tt.from)),bt.searchParams.set("to",String(tt.to)),En.Ny.push(nn.I.stripBaseFromUrl(bt.toString()));return}ln.A.emit(dn.r1.alertWarning,["Unknown Dashboard: "+he.dashboardUID])},this.onTagClick=(he,Ae)=>{if(!Ae&&this.state.queryTags.includes(he))return;const Ke=Ae?this.state.queryTags.filter(tt=>tt!==he):[...this.state.queryTags,he];let Qe;if(Ae){const tt=document.activeElement,gt=tt?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(tt)&&gt){const yt=Number.parseInt(gt,10),bt=this.tagListRef.current.querySelector(`[data-tag-id="${yt+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${yt-1}"]`);bt instanceof HTMLElement&&(Qe=bt)}}this.setState({queryTags:Ke},()=>Qe?.focus())},this.onUserClick=he=>{this.setState({queryUser:{id:he.userId,login:he.login,email:he.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(he,Ae)=>{const{options:Ke}=this.props,Qe=(0,De.UA)().getCurrent();return Qe?p.createElement(Fn,{annotation:he,formatDate:Qe.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Ke}):p.createElement(p.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(en.We).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(ce,he){const{options:Ae,timeRange:Ke}=this.props;(Ae!==ce.options||this.state.queryTags!==he.queryTags||this.state.queryUser!==he.queryUser||ce.renderCounter!==this.props.renderCounter||Ae.onlyInTimeRange&&Ke!==ce.timeRange)&&this.doSearch()}async doSearch(){const{options:ce}=this.props,{queryUser:he,queryTags:Ae}=this.state,Ke={tags:ce.tags,limit:ce.limit,type:"annotation"};ce.onlyFromThisDashboard&&(Ke.dashboardUID=(0,De.UA)().getCurrent()?.uid);let Qe="";if(ce.onlyInTimeRange){const{timeRange:gt}=this.props;Ke.from=gt.from.valueOf(),Ke.to=gt.to.valueOf()}else Qe="All Time";he&&(Ke.userId=he.id),ce.tags&&ce.tags.length&&(Ke.tags=ce.tags.map(gt=>this.props.replaceVariables(gt))),Ae.length&&(Ke.tags=Ke.tags?[...Ke.tags,...Ae]:Ae);const tt=await(0,Vn.AI)().get("/api/annotations",Ke,`anno-list-panel-${this.props.id}`);this.setState({annotations:tt,timeInfo:Qe,loaded:!0})}_timeOffset(ce,he,Ae=!1){let Ke=5,Qe="m";const tt=/^(\d+)(\w)/.exec(he);tt&&tt.length===3&&(Ke=parseInt(tt[1],10),Qe=tt[2]);const gt=(0,Xt.KQ)(ce);return Ae&&(Ke*=-1),gt.add(Ke,Qe).valueOf()}render(){const{loaded:ce,annotations:he,queryUser:Ae,queryTags:Ke}=this.state;if(!ce)return p.createElement("div",null,"loading...");const Qe=Ae||Ke.length>0;return p.createElement(ue.E,{autoHeightMin:"100%"},Qe&&p.createElement("div",{className:this.style.filter},p.createElement("b",null,"Filter:"),Ae&&p.createElement(R.$n,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${Ae.email}`},Ae.email),Ke.length>0&&p.createElement(Wn.L,{icon:"times",tags:Ke,onClick:tt=>this.onTagClick(tt,!0),getAriaLabel:tt=>`Remove ${tt} tag`,className:this.style.tagList,ref:this.tagListRef})),he.length<1&&p.createElement("div",{className:this.style.noneFound},"No Annotations Found"),p.createElement(Bt.p,{items:he,renderItem:this.renderItem,getItemKey:tt=>`${tt.id}`}))}}const kn=(0,na.N)(Q=>({noneFound:(0,j.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,j.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:Q.spacing(.5),padding:Q.spacing(.5)}),tagList:(0,j.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),Vt={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},zt=new x.m(In).setPanelOptions(Q=>{Q.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:Vt.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:Vt.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(ce){return p.createElement(Mt.u,{tags:ce.value,onChange:ce.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:Vt.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:Vt.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:Vt.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:Vt.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Vt.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:Vt.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:Vt.navigateAfter,description:""})}).setPanelChangeHandler((Q,ce,he)=>ce==="ryantxu-annolist-panel"?he:Q.options);var kt=e(37055),rn=e(24293),yn=e(27310),gn=e(28240),Rn=e(47070),Kt=e(11261),mt=e(52622),pt=e(52198),Qt=e(38248),on=e(11404),pn=e(89654),fn=e(22680),zn=e(71242),aa=e(24882),Zn=e(21423),jn=e(97152),ga=e(79041),Ra=e(29413),_a=e(30501),Za=e(67266),ms=e(55726),rs=e(24182),Ja=e(77455),Ns=e(17464),ls=e(69503),cs=e(94624),ds=e(16615);const ps=({config:Q,onUPlotClick:ce,setFocusedSeriesIdx:he,setFocusedPointIdx:Ae,setCoords:Ke,setHover:Qe,isToolTipOpen:tt,isActive:gt,setIsActive:yt,sync:bt})=>{tt.current=!1;const It=()=>{yt&&yt(!0)},Rt=()=>{tt.current||(Ke(null),yt&&yt(!1))};let Nt=null,St=null;Q.addHook("init",Zt=>{Nt=Zt.root.parentElement,St=Zt.over,Nt?.addEventListener("click",ce),St.addEventListener("mouseleave",Rt),St.addEventListener("mouseenter",It),bt&&bt()===cs.y.Crosshair&&Zt.root.classList.add("shared-crosshair")});const Jt=()=>{tt.current&&(Ke(null),ce())};Q.addHook("drawClear",Jt),Q.addHook("destroy",()=>{Nt?.removeEventListener("click",ce),St?.removeEventListener("mouseleave",Rt),St?.removeEventListener("mouseenter",It),Jt()});let tn;Q.addHook("syncRect",(Zt,sn)=>{tn=sn});const Yt=Q.getTooltipInterpolator();return Yt&&Q.addHook("setCursor",Zt=>{tt.current||Yt(he,Ae,sn=>{if(sn){Ke(null);return}if(!tn)return;const{x:Tn,y:cn}=(0,ds.n)(Zt,tn);Tn!==void 0&&cn!==void 0&&Ke({canvas:{x:Zt.cursor.left,y:Zt.cursor.top},viewport:{x:Tn,y:cn}})},Zt)}),Q.addHook("setLegend",Zt=>{if(!tt.current&&!Yt&&Ae(Zt.legend.idx),Zt.cursor.idxs!=null)for(let sn=0;sn<Zt.cursor.idxs.length;sn++){const Tn=Zt.cursor.idxs[sn];if(Tn!=null){const cn={xIndex:Tn,yIndex:0,pageX:tn.left+Zt.cursor.left,pageY:tn.top+Zt.cursor.top};(!tt.current||!cn)&&Qe(cn);return}}}),Q.addHook("setSeries",(Zt,sn)=>{tt.current||he(sn)}),Q};var Vr=e(25469),ur=e(30249),ks=e(28895),ws=e(1819),Yr=e(22731),Os=e(36613),Es=e(83195),us=e(8066),tr=e(73060),Ts=e(57875),Jr=e(51336),Bo=e(52811),nr=e(16895),io=e(63577),Eo=e(50311),Ko=e(46294),$o=e(39624),br=e(55129);function _r(Q){let ce=new Map;return Q.map(Ae=>({...Ae,fields:Ae.fields.map(Ke=>{if(Ke.type===Kt.PU.enum){let Qe=(0,br.M)(Ke.config,Ke.type),tt=ce.get(Qe);tt||(tt=[],ce.set(Qe,tt));let gt=Ke.values.toArray().slice(),yt=Ke.config.type.enum.text;if(tt.length>0)for(let bt=0;bt<gt.length;bt++)gt[bt]+=tt.length;return tt.push(...yt),Ke.config.type.enum.text=tt,{...Ke,values:gt}}return Ke})}))}function lo(Q,ce,he,Ae){if(!Q?.length)return null;(0,gn.Fm)(Q);let Ke=Ae!=null;Ae!=null&&Ae>0&&(Q=[{...Q[0],fields:[Q[0].fields[Ae],...Q[0].fields.filter((yt,bt)=>bt!==Ae)]}]);for(let yt of Q)for(let bt of yt.fields)bt.type===Kt.PU.time&&typeof bt.values[0]!="number"&&(bt.values=(0,Eo.s7)(bt,{destinationType:Kt.PU.time}).values);let Qe=0;e:for(let yt of Q)for(let bt of yt.fields)if(bt.type===Kt.PU.enum&&++Qe>1){Q=_r(Q);break e}let tt;const gt=[];for(let yt of Q){const bt=[];let It=!1,Rt=!1,Nt=Ke?yt:(0,Ko.M)({frame:yt,refFieldPseudoMin:he?.from.valueOf(),refFieldPseudoMax:he?.to.valueOf()});const St=(0,$o.C)(Nt).fields;for(let Jt=0;Jt<St?.length;Jt++){const tn=St[Jt];switch(tn.type){case Kt.PU.time:It=!0,bt.push(tn);break;case Kt.PU.number:Rt=Ke?Jt>0:!0,tt={...tn,values:tn.values.map(sn=>Number.isFinite(sn)||sn==null?sn:null)},bt.push(tt);break;case Kt.PU.enum:Rt=!0;case Kt.PU.string:tt={...tn,values:tn.values},bt.push(tt);break;case Kt.PU.boolean:Rt=!0;const Yt=tn.config?.custom??{},Zt={...tn.config,max:1,min:0,custom:Yt};Yt.lineInterpolation!==mt.dx.StepBefore&&(Yt.lineInterpolation=mt.dx.StepAfter),tt={...tn,config:Zt,type:Kt.PU.number,values:tn.values.map(sn=>sn==null?sn:sn?1:0)},(0,Es.j9)(Zt.unit)||(Zt.unit="bool",tt.display=(0,Ts.J)({field:tt,theme:ce})),bt.push(tt);break}}(Ke||It)&&Rt&&gt.push({...yt,length:Nt.length,fields:bt})}return gt.length?(co(gt,ce,0),Vo(gt,ce),gt):null}const Vo=(Q,ce)=>{const{palette:he}=ce.visualization;for(const Ae of Q)for(const Ke of Ae.fields)if(Ke.type===Kt.PU.enum){const Qe=he[Ke.state?.seriesIndex%he.length],tt=ce.visualization.getColorByName(Qe),gt=Ke.config.type.enum;gt.color=Array(gt.text.length).fill(tt),Ke.display=(0,Ts.J)({field:Ke,theme:ce})}},co=(Q,ce,he)=>{let Ae=0;Q.forEach(Ke=>{Ke.fields.forEach((Qe,tt)=>{tt!==he&&(Qe.type===Kt.PU.number||Qe.type===Kt.PU.boolean||Qe.type===Kt.PU.enum)&&(Qe.state={...Qe.state,seriesIndex:Ae++},Qe.display=(0,Ts.J)({field:Qe,theme:ce}))})})};function Xr(Q,ce){return!Q||!Q.length?[ce]:Q.map(he=>he?.length?he:ce)}const Zr=Q=>Q.mode===mt.$N.Multi&&Q.maxHeight!=null;var zr=e(42994),yo=e(72724),qr=e(23596),Pr=e(39758),uo=e(4134);const Ws=zr.WC.interval,xt=Pr.ur,wt=Pr.ur,vn=8,un=30,Mn=.65,_n=.1,Jn=.15,pa=5,Da=10,Ha=.1;function es(Q,ce,he,Ae,Ke){const Qe=(0,Ra.kD)(Q,14),tt=ce/(Qe.width+2)*14,gt=he/Ae,yt=Math.min(gt,tt);return{fontSize:Math.min(yt,Ke??yt),textMetrics:Qe}}function Ba(Q,ce){const{xOri:he,xDir:Ae,rawValue:Ke,getColor:Qe,formatValue:tt,formatShortValue:gt,fillOpacity:yt=1,showValue:bt,xSpacing:It=0,hoverMulti:Rt=!1,timeZone:Nt="browser"}=Q,St=he===mt.Lt.Horizontal,Jt=!Q.text?.valueSize,tn=Q.stacking!==mt.gs.None,Yt=Q.stacking===mt.gs.Percent;let{groupWidth:Zt,barWidth:sn,barRadius:Tn=0}=Q;tn&&([Zt,sn]=[sn,Zt]);let cn;const Kn=Array(30).fill(null);let Qn;const va=ea=>Array.from(ea.data[0].map((sa,ua)=>ua)),ca=It===0?void 0:(ea,sa)=>{const ua=ea.bbox.width,Na=Ae*(St?1:-1);let Ka=sa.length,ss=Ka-1,Ya=0,Vs=ua/Os.A.pxRatio,Qr=Math.abs(Math.floor(Vs/It));Ya=Ka<Qr?0:Math.ceil(Ka/Qr);let Go=sa.map((oo,oi)=>Ya!==0&&(It>0?oi:ss-oi)%Ya>0?null:oo);return Na===1?Go:Go.reverse()},ma=(ea,sa,ua,Na,Ka)=>{if(Q.xTimeAuto){let ss=Ws.year;return Ka<_a.Zj.second?ss=Ws.millisecond:Ka<_a.Zj.minute?ss=Ws.second:Ka<_a.Zj.hour?ss=Ws.minute:Ka<_a.Zj.day?ss=Ws.hour:Ka<_a.Zj.month?ss=Ws.day:Ka<_a.Zj.year?ss=Ws.month:ss=Ws.year,sa.map(Ya=>Ya==null?"":(0,yo.LE)(Ya,{format:ss,timeZone:Nt}))}return sa.map(ss=>St?gt(0,ss):tt(0,ss))},On=(ea,sa,ua)=>{sa=0,ua=Math.max(1,ea.data[0].length-1);let Na=0;(0,Pr.mn)(ea.data[0].length,Zt,xt,0,(ss,Ya,Vs)=>{Na=Ya+Vs/2});let Ka=ua-sa;if(Na===.5)sa-=Ka;else{let Ya=(1/(1-Na*2)*Ka-Ka)/2;sa-=Ya,ua+=Ya}return[sa,ua]};let $n=(ea,sa)=>{let ua=Array.from({length:sa},()=>({offs:Array(ea).fill(0),size:Array(ea).fill(0)}));return(0,Pr.mn)(ea,Zt,xt,null,(Na,Ka,ss)=>{(0,Pr.mn)(sa,sn,wt,null,(Ya,Vs,Qr)=>{ua[Ya].offs[Na]=Ka+ss*Vs,ua[Ya].size[Na]=ss*Qr})}),ua},Nn=(ea,sa)=>{let ua=Array.from({length:sa},()=>({offs:Array(ea).fill(0),size:Array(ea).fill(0)}));return(0,Pr.mn)(ea,Zt,xt,null,(Na,Ka,ss)=>{(0,Pr.mn)(sa,sn,wt,null,(Ya,Vs,Qr)=>{ua[Ya].offs[Na]=Ka,ua[Ya].size[Na]=ss})}),ua};const xa=St?_n:Jn,Wa=St?pa:Da;let ka=[],ra=[],da=1,$a,qa=Q.text?.valueSize??un,as=Wa,fa=1/0,Oa=1/0,qn=Qe!=null,Sn=qn?{fill:{unit:3,values:(ea,sa)=>ra[sa].fill},stroke:{unit:3,values:(ea,sa)=>ra[sa].stroke}}:{},oa=Os.A.paths.bars({radius:Yt?0:tn?(ea,sa)=>sa===ea.data.length-1?[Tn,0]:[0,0]:Tn,disp:{x0:{unit:2,values:(ea,sa)=>ka[sa].offs},size:{unit:2,values:(ea,sa)=>ka[sa].size},...Sn},each:(ea,sa,ua,Na,Ka,ss,Ya)=>{Na-=ea.bbox.left,Ka-=ea.bbox.top;let Vs=ea.data[sa][ua];St?(fa=Math.min(fa,Vs<0?ea.bbox.height-(Ka+Ya):Ka),Oa=ss):(fa=Ya,Oa=Math.min(Oa,Vs<0?Na:ea.bbox.width-(Na+ss)));let Qr={x:Na,y:Ka,w:ss,h:Ya,sidx:sa,didx:ua};if(!tn&&Q.fullHighlight&&(Q.xOri===mt.Lt.Horizontal?(Qr.y=0,Qr.h=ea.bbox.height):(Qr.x=0,Qr.w=ea.bbox.width)),cn.add(Qr),bt!==mt.yL.Never){const Go=Ke(sa,ua);let oo=1;Yt&&Ht[sa][ua]&&(oo=Ht[sa][ua]);const oi=oo===0?0:Go/oo,gl=tt(sa,oi);if(as=Math.min(as,Math.round(xa*(St?ss:Ya))),$a[ua]===void 0&&($a[ua]={}),$a[ua][sa]={text:gl,value:Ke(sa,ua),hidden:!1},Jt){const{fontSize:Ro,textMetrics:_i}=es($a[ua][sa].text,Oa*(St?Mn:1)-(St?0:as),fa*(St?1:Mn)-(St?as:0),1);$a[ua][sa].textMetrics=_i;let Rr=Math.round(Math.min(qa,un,Ro));da=Rr/qa*(Rr/14),qa=Rr}else $a[ua][sa].textMetrics=(0,Ra.kD)($a[ua][sa].text,qa);let Yl=St?0:-Math.round(Ha*qa),Ao=Ke(sa,ua);if(Q.negY?.[sa]&&Ao!=null&&(Ao*=-1),Ao!=null){const Ro=ea.bbox.left+(St?Na+ss/2:Ao<0?Na-as:Na+ss+as),_i=ea.bbox.top+(St?Ao<0?Ka+Ya+as:Ka-as:Ka+Ya/2-Yl),{textMetrics:Rr={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=$a[ua][sa];let pl=0,Sc=0;St?(pl=Rr.width*da/2,Sc=Ao>0?(Rr.actualBoundingBoxAscent+Rr.actualBoundingBoxDescent)*da:0):(Sc=(Rr.actualBoundingBoxAscent+Rr.actualBoundingBoxDescent)*da/2,pl=Ao<0?Rr.width*da:0),$a[ua][sa].x=Ro,$a[ua][sa].y=_i,$a[ua][sa].bbox={x:Ro-pl,y:_i-Sc,w:Rr.width*da,h:(Rr.actualBoundingBoxAscent+Rr.actualBoundingBoxDescent)*da}}}}});const Ea=ea=>{ea.root.querySelectorAll(".u-cursor-pt").forEach(sa=>{sa.style.borderRadius="0",Q.fullHighlight&&(sa.style.zIndex="-1")})},Pa={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(ea,sa)=>{if(sa===0){Kn.fill(null),Qn=null;let ua=ea.cursor.left*Os.A.pxRatio,Na=ea.cursor.top*Os.A.pxRatio;cn.get(ua,Na,1,1,Ka=>{(0,uo.ur)(ua,Na,Ka.x,Ka.y,Ka.x+Ka.w,Ka.y+Ka.h)&&(Qn=Kn[0]=Ka,Kn[Qn.sidx]=Qn,Rt&&(0,uo.Tr)(cn,void 0,Qn.didx).forEach(ss=>{Kn[ss.sidx]=ss}))})}return Kn[sa]?.didx},points:{fill:"rgba(255,255,255,0.4)",bbox:(ea,sa)=>{let ua=Kn[sa],Na=ua!=null;return{left:Na?ua.x/Os.A.pxRatio:-10,top:Na?ua.y/Os.A.pxRatio:-10,width:Na?ua.w/Os.A.pxRatio:0,height:Na?ua.h/Os.A.pxRatio:0}}},focus:{prox:1e3,dist:(ea,sa)=>Qn?.sidx===sa?0:1/0}},Sa=ea=>{if(cn=cn||new uo.C$(0,0,ea.bbox.width,ea.bbox.height),cn.clear(),ea.series.forEach(sa=>{sa._paths=null}),tn?ka=[null,...Nn(ea.data[0].length,ea.data.length-1)]:ka=[null,...$n(ea.data[0].length,ea.data.length-1)],qn){ra=[null];for(let sa=1;sa<ea.data.length;sa++){let ua=ea.data[sa].map((Na,Ka)=>Na!=null?Qe(sa,Ka,Na):null);ra.push({fill:yt<1?ua.map(Na=>Na!=null?(0,qr.alpha)(Na,yt):null):ua,stroke:ua})}}$a={},qa=Q.text?.valueSize??un,as=Wa,fa=Oa=1/0},za=ea=>{if(bt===mt.yL.Never||qa<vn)return;ea.ctx.save(),ea.ctx.fillStyle=ce.colors.text.primary,ea.ctx.font=`${qa}px ${ce.typography.fontFamily}`;let sa,ua;for(const Na in $a){let Ka=!0;for(const ss in $a[Na]){const Ya=$a[Na][ss],{text:Vs,x:Qr=0,y:Go=0}=Ya;let{value:oo}=Ya;Q.negY?.[ss]&&oo!=null&&(oo*=-1);let oi=St?"center":oo!==null&&oo<0?"right":"left",gl=St?oo!==null&&oo<0?"top":"alphabetic":"middle";if(oi!==sa&&(ea.ctx.textAlign=sa=oi),gl!==ua&&(ea.ctx.textBaseline=ua=gl),bt===mt.yL.Always)ea.ctx.fillText(Vs,Qr,Go);else if(bt===mt.yL.Auto){let{bbox:Yl}=Ya,Ao=!1;if(Yl==null)Ao=!0,Ya.hidden=!0;else if(!Ka)for(const Ro in $a[Na]){if(Ro===ss)continue;const _i=$a[Na][Ro],{bbox:Rr,hidden:pl}=_i;if(!pl&&Rr&&(0,uo.HY)(Yl,Rr)){Ao=!0,Ya.hidden=!0;break}}Ka=!1,!Ao&&ea.ctx.fillText(Vs,Qr,Go)}}}ea.ctx.restore()},gs=(ea,sa,ua,Na)=>{Qn?(ea(Qn.sidx),sa(Qn.didx),ua()):ua(!0)};let Ht=null;function Ls(ea,sa){return Ht=null,(0,nr.bq)(ea[0],sa,({totals:ua})=>{Ht=ua})}return{cursor:Pa,xRange:On,xValues:ma,xSplits:va,hFilter:ca,barsBuilder:oa,init:Ea,drawClear:Sa,draw:za,interpolateTooltip:gs,prepData:Ls}}const Fa={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:mt.wV.Auto,showValue:mt.yL.Auto,stacking:mt.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},Is={fillOpacity:80,gradientMode:mt.on.None,lineWidth:1};function Hs(Q){return Q===Rn.wV.Vertical?{xOri:mt.Lt.Horizontal,xDir:mt.ON.Right,yOri:mt.Lt.Vertical,yDir:mt.ON.Up}:{xOri:mt.Lt.Vertical,xDir:mt.ON.Down,yOri:mt.Lt.Horizontal,yDir:mt.ON.Right}}const Bs=({frame:Q,theme:ce,orientation:he,showValue:Ae,groupWidth:Ke,barWidth:Qe,barRadius:tt=0,stacking:gt,text:yt,rawValue:bt,getColor:It,fillOpacity:Rt,allFrames:Nt,xTickLabelRotation:St,xTickLabelMaxLength:Jt,xTickLabelSpacing:tn=0,legend:Yt,timeZone:Zt,fullHighlight:sn,hoverMulti:Tn})=>{const cn=new Jr.e,ta=(ka,ra)=>(0,Es.cN)(Q.fields[ka].display(ra)),Kn=(ka,ra)=>ar(ta(ka,ra),Jt),Qn=Hs(he);Q.fields.length===2&&(Ke=Qe,Qe=1);const va={xOri:Qn.xOri,xDir:Qn.xDir,groupWidth:Ke,barWidth:Qe,barRadius:tt,stacking:gt,rawValue:bt,getColor:It,fillOpacity:Rt,formatValue:ta,formatShortValue:Kn,timeZone:Zt,text:yt,showValue:Ae,legend:Yt,xSpacing:tn,xTimeAuto:Q.fields[0]?.type===Kt.PU.time&&!Q.fields[0].config.unit?.startsWith("time:"),negY:Q.fields.map(ka=>ka.config.custom?.transform===mt.NU.NegativeY),fullHighlight:sn,hoverMulti:Tn},ca=Ba(va,ce);if(cn.setCursor(ca.cursor),cn.addHook("init",ca.init),cn.addHook("drawClear",ca.drawClear),cn.addHook("draw",ca.draw),!!!S.$.featureToggles.newVizTooltips&&cn.setTooltipInterpolator(ca.interpolateTooltip),St!==0){let ka=50,ra=Qn.xOri===mt.Lt.Horizontal?14:5;cn.setPadding(eo(Q,St,Jt,ka,ra))}cn.setPrepData(ca.prepData),cn.addScale({scaleKey:"x",isTime:!1,range:ca.xRange,distribution:mt.L4.Ordinal,orientation:Qn.xOri,direction:Qn.xDir});const On=Q.fields[0].config.custom?.axisPlacement!==mt.vM.Hidden?Qn.xOri===mt.Lt.Horizontal?mt.vM.Bottom:mt.vM.Left:mt.vM.Hidden,$n=Q.fields[0].config.custom?.axisPlacement!==mt.vM.Hidden;cn.addAxis({scaleKey:"x",isTime:!1,placement:On,label:Q.fields[0].config.custom?.axisLabel,splits:ca.xSplits,filter:Qn.xOri===0?ca.hFilter:void 0,values:ca.xValues,timeZone:Zt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:Qn.xOri===0?St*-1:0,theme:ce,show:$n});let Nn=0;const xa=Do(Yt);for(let ka=1;ka<Q.fields.length;ka++){const ra=Q.fields[ka];Nn++;const da={...Is,...ra.config.custom},$a=ra.config.unit||Bo.s,qa=(0,us.Qi)(ra),fa=(0,us.lz)(ra,ce).color;let Oa=da.axisSoftMin,qn=da.axisSoftMax;if(Oa==null&&ra.config.min==null&&(Oa=0),qn==null&&ra.config.max==null&&(qn=0),da.thresholdsStyle&&ra.config.thresholds&&(da.thresholdsStyle.mode??mt.Ly.Off)!==mt.Ly.Off&&cn.addThresholds({config:da.thresholdsStyle,thresholds:ra.config.thresholds,scaleKey:$a,theme:ce,hardMin:ra.config.min,hardMax:ra.config.max,softMin:da.axisSoftMin,softMax:da.axisSoftMax}),cn.addSeries({scaleKey:$a,pxAlign:!0,lineWidth:da.lineWidth,lineColor:fa,fillOpacity:da.fillOpacity,theme:ce,colorMode:qa,pathBuilder:ca.barsBuilder,show:!da.hideFrom?.viz,gradientMode:da.gradientMode,thresholds:ra.config.thresholds,hardMin:ra.config.min,hardMax:ra.config.max,softMin:da.axisSoftMin,softMax:da.axisSoftMax,dataFrameFieldIndex:{fieldIndex:xa?ka:Nt[0].fields.findIndex(Sn=>Sn.type===Kt.PU.number&&Sn.state?.seriesIndex===Nn-1),frameIndex:0}}),cn.addScale({scaleKey:$a,min:ra.config.min,max:ra.config.max,softMin:Oa,softMax:qn,centeredZero:da.axisCenteredZero,orientation:Qn.yOri,direction:Qn.yDir,distribution:da.scaleDistribution?.type,log:da.scaleDistribution?.log}),da.axisPlacement!==mt.vM.Hidden){let Sn=da.axisPlacement;(!Sn||Sn===mt.vM.Auto)&&(Sn=mt.vM.Left),Qn.xOri===1&&(Sn===mt.vM.Left&&(Sn=mt.vM.Bottom),Sn===mt.vM.Right&&(Sn=mt.vM.Top));let oa={scaleKey:$a,label:da.axisLabel,size:da.axisWidth,placement:Sn,formatValue:(Ea,Pa)=>(0,Es.cN)(ra.display(Ea,Pa)),filter:Qn.yOri===0?ca.hFilter:void 0,tickLabelRotation:Qn.xOri===1?St*-1:0,theme:ce,grid:{show:da.axisGridShow}};da.axisBorderShow&&(oa.border={show:!0}),da.axisColorMode===mt.Y$.Series&&(oa.color=fa),cn.addAxis(oa)}}let Wa=(0,nr.ro)(Q);return cn.setStackingGroups(Wa),cn};function ar(Q,ce){return Q.length>ce?Q.substring(0,ce).concat("..."):Q}function eo(Q,ce,he,Ae=0,Ke=0){const Qe=Q.fields[0].values,tt=_a.pi,gt=Q.fields[0].display,yt=St=>gt?gt(Qe[St]):Qe[St];let bt=0;for(let St=0;St<Qe.length;St++){let Jt=(0,Ra.kD)(ar((0,Es.cN)(yt(St)),he),tt);bt=Jt.width>bt?Jt.width:bt}const It=ce>0?Math.cos(ce*Math.PI/180)*(0,Ra.kD)(ar((0,Es.cN)(yt(Qe.length-1)),he),tt).width:0,Rt=ce<0?Math.cos(ce*-1*Math.PI/180)*(0,Ra.kD)(ar((0,Es.cN)(yt(0)),he),tt).width:0,Nt=Math.sin((ce>=0?ce:ce*-1)*Math.PI/180)*bt-Ke;return[Math.round(_a.pi*Os.A.pxRatio),It,Nt,Math.max(0,Rt-Ae)]}function Rs(Q,ce,he){if(!Q.length||Q.every(Rt=>Rt.length===0))return{warn:"No data in response"};(0,gn.Fm)(Q);const Ae=Q.length===1?(0,tr.Yj)(Q[0],Q[0].fields.findIndex(Rt=>Rt.type===Kt.PU.time)):(0,tr.Fd)({frames:Q,keepDisplayNames:!0});if(!Ae)return{warn:"Unable to join data"};let Ke;if(he.colorByField&&(Ke=(0,io.findField)(Ae,he.colorByField),!Ke))return{warn:"Color field not found"};let Qe;if(he.xField&&(Qe=(0,io.findField)(Ae,he.xField),!Qe))return{warn:"Configured x field not found"};let tt,gt,yt=[];for(const Rt of Ae.fields)if(Rt!==Qe)switch(Rt.type){case Kt.PU.string:tt||(tt=Rt);break;case Kt.PU.time:gt||(gt=Rt);break;case Kt.PU.number:{const Nt={...Rt,state:{...Rt.state,seriesIndex:yt.length},config:{...Rt.config,custom:{...Rt.config.custom,stacking:{group:"_",mode:he.stacking}}},values:Rt.values.map(St=>Number.isFinite(St)||St==null?St:null)};he.stacking===mt.gs.Percent&&(Nt.config.unit="percentunit",Nt.display=(0,Ts.J)({field:Nt,theme:ce})),yt.push(Nt)}}let bt=Qe;if(bt||(bt=tt||gt),!bt)return{warn:"Bar charts requires a string or time field"};if(Ae.fields[0].type===Kt.PU.time&&Ae.fields[0]!==bt&&Ae.fields.shift(),co([Ae],ce,0),!yt.length)return{warn:"No numeric fields found"};if(Ke&&yt.length>1){const Rt=yt.find(Nt=>Nt!==Ke);Rt&&(yt=[Rt])}let It=(0,w.cloneDeep)(yt);return he.stacking===mt.gs.Percent&&It.map(Rt=>{const Nt=Ae.fields.find(St=>(0,gn.Ct)(St,Ae)===(0,gn.Ct)(St,Ae));Rt.config.unit=Nt?.config?.unit??void 0,Rt.display=(0,Ts.J)({field:Rt,theme:ce})}),yt.unshift(bt),It.unshift(bt),{aligned:Ae,colorByField:Ke,viz:[{fields:yt,length:bt.values.length}],legend:{fields:It,length:bt.values.length}}}const Do=Q=>!!(Q?.sortBy&&Q.sortDesc!==null),Nr=10,ja=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(Q,ce)=>ce.text?.valueSize===Q.text?.valueSize],bs=({data:Q,options:ce,fieldConfig:he,width:Ae,height:Ke,timeZone:Qe,id:tt,replaceVariables:gt})=>{const yt=(0,ie.$j)(),{dataLinkPostProcessor:bt}=(0,ga.d2)(),It=(0,p.useRef)(void 0),Rt=(0,p.useRef)(!1),[Nt,St]=(0,p.useState)(void 0),[Jt,tn]=(0,p.useState)(null),[Yt,Zt]=(0,p.useState)(null),[sn,Tn]=(0,p.useState)(null),[cn,ta]=(0,p.useState)(!1),[Kn,Qn]=(0,p.useState)(!1),va=()=>{Rt.current=!1,tn(null),Qn(!1)},ca=()=>{Rt.current=!Rt.current,Qn(Rt.current)},ma=(0,p.useRef)(),On=(0,p.useRef)(),$n=(0,p.useMemo)(()=>Rs(Q.series,yt,ce),[Q.series,yt,ce]),Nn="viz"in $n?$n:null;On.current=Nn?.colorByField;const xa=(0,p.useRef)(1e4);(0,p.useMemo)(()=>{xa.current++},[ce]);const Wa=(0,p.useMemo)(()=>{const Sn=Nn?.viz[0],oa=ma.current;return Sn&&oa&&(0,Zn.bW)(Sn,oa,!0)||xa.current++,ma.current=Sn,(Q.structureRev??0)+xa.current},[Nn,Q.structureRev]),ka=(0,p.useMemo)(()=>!ce.orientation||ce.orientation===Rn.wV.Auto?Ae<Ke?Rn.wV.Horizontal:Rn.wV.Vertical:ce.orientation,[Ae,Ke,ce.orientation]),ra=(0,p.useMemo)(()=>{if(ce.xTickLabelMaxLength)return ce.xTickLabelMaxLength;{const Sn=ce.xTickLabelRotation,oa=(0,Ra.kD)("M",_a.pi).width;return Ke/2/(Math.sin((Sn>=0?Sn:Sn*-1)*Math.PI/180)*oa)-3}},[Ke,ce.xTickLabelRotation,ce.xTickLabelMaxLength]);if("warn"in $n)return p.createElement(jn.a,{panelId:tt,fieldConfig:he,data:Q,message:$n.warn,needsNumberField:!0});const da=(Sn,oa,Ea)=>{const Pa=oa==null?null:Sn.fields[oa];if(Pa){const gs=(0,gn.Ct)(Pa,Sn);oa=$n.aligned.fields.findIndex(Ht=>gs===(0,gn.Ct)(Ht,$n.aligned))}const Sa=ce.fullHighlight&&ce.stacking!==mt.gs.None?mt.$N.Multi:ce.tooltip.mode,za=ce.tooltip.mode===mt.$N.Multi?ce.tooltip.sort:mt.xB.None;return p.createElement(p.Fragment,null,Kn&&p.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},p.createElement(Vr.J,{onClick:va,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),p.createElement(ws.e,{data:$n.aligned,rowIndex:Ea,columnIndex:oa,sortOrder:za,mode:Sa}))},$a=Sn=>{const{legend:oa}=ce;if(!Sn||oa.showLegend===!1)return null;if($n.colorByField){const Ea=(0,ks.jY)([$n.colorByField],yt);if(Ea?.length)return p.createElement(Za.KU.Legend,{placement:oa.placement},p.createElement(ms.t,{placement:oa.placement,items:Ea,displayMode:oa.displayMode}))}return p.createElement(rs.$,{data:[$n.legend],config:Sn,maxHeight:"35%",maxWidth:"60%",...ce.legend})},qa=(Sn,oa)=>ma.current.fields[Sn].values[oa];let as,fa=1;if($n.colorByField){const Sn=$n.colorByField,oa=Sn.display;fa=(Sn.config.custom.fillOpacity??100)/100,as=(Ea,Pa)=>oa(On.current?.values[Pa]).color}else ma.current.fields.some(oa=>oa.config.custom?.gradientMode===mt.on.Scheme&&oa.config.color?.mode===rn.Y.Thresholds||oa.config.mappings?.some(Pa=>Pa.type==="value"?Object.values(Pa.options).some(Sa=>Sa.color!=null):Pa.options.result.color!=null))&&(fa=(ma.current.fields.find(Ea=>Ea.type===Kt.PU.number).config.custom.fillOpacity??100)/100,as=(Ea,Pa)=>{let Sa=ma.current.fields[Ea];return Sa.display(Sa.values[Pa]).color});const Oa=(Sn,oa,Ea)=>{const{barWidth:Pa,barRadius:Sa=0,showValue:za,groupWidth:gs,stacking:Ht,legend:Ls,tooltip:ea,text:sa,xTickLabelRotation:ua,xTickLabelSpacing:Na,fullHighlight:Ka}=ce;return Bs({frame:Sn,getTimeRange:Ea,timeZone:Qe,theme:yt,timeZones:[Qe],orientation:ka,barWidth:Pa,barRadius:Sa,showValue:za,groupWidth:gs,xTickLabelRotation:ua,xTickLabelMaxLength:ra,xTickLabelSpacing:Na,stacking:Ht,legend:Ls,tooltip:ea,text:sa,rawValue:qa,getColor:as,fillOpacity:fa,allFrames:$n.viz,fullHighlight:Ka,hoverMulti:ea.mode===mt.$N.Multi})},qn=!!S.$.featureToggles.newVizTooltips;return p.createElement(ur.o,{theme:yt,frames:$n.viz,prepConfig:Oa,propsToDiff:ja,preparePlotFrame:Sn=>Sn[0],renderLegend:$a,legend:ce.legend,timeZone:Qe,timeRange:{from:1,to:1},structureRev:Wa,width:Ae,height:Ke,replaceVariables:gt,dataLinkPostProcessor:bt},Sn=>qn&&ce.tooltip.mode!==mt.$N.None?p.createElement(Ja.xl,{config:Sn,hoverMode:ce.tooltip.mode===mt.$N.Single?Ja.b3.xOne:Ja.b3.xAll,render:(oa,Ea,Pa,Sa,za,gs)=>p.createElement(Yr.k,{frames:$n.viz,seriesFrame:$n.aligned,dataIdxs:Ea,seriesIdx:Pa,mode:ce.tooltip.mode,sortOrder:ce.tooltip.sort,isPinned:Sa}),maxWidth:ce.tooltip.maxWidth,maxHeight:ce.tooltip.maxHeight}):(!qn&&It.current!==Sn&&(It.current=ps({config:Sn,onUPlotClick:ca,setFocusedSeriesIdx:Zt,setFocusedPointIdx:Tn,setCoords:tn,setHover:St,isToolTipOpen:Rt,isActive:cn,setIsActive:ta})),ce.tooltip.mode===mt.$N.None?null:p.createElement(Ns.ZL,null,Nt&&Jt&&Yt&&p.createElement(ls.o,{position:{x:Jt.viewport.x,y:Jt.viewport.y},offset:{x:Nr,y:Nr},allowPointerEvents:Rt.current},da($n.viz[0],Yt,sn)))))};var wr=e(66864),ts=e(94354),to=e(10880);const mo=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],_o=Q=>{let ce=Q.value??0;const he=ce<0;he&&(ce*=-1);let Ae=mo[0];for(const tt of mo)if(Ae=tt,ce<=Ae.value)break;const Ke=tt=>{Q.onChange(tt*(he?-1:1))},Qe=()=>{Q.onChange(Q.value*-1)};return p.createElement(wr.Gy,null,p.createElement(ts.z,{value:Ae.value,options:mo,onChange:Ke}),ce!==0&&p.createElement(hn.m,{content:"Require space from the right side",placement:"top"},p.createElement("div",null,p.createElement(to.S,{value:he,onChange:Qe,label:"RTL"}))))},Hi=(Q,ce,he,Ae)=>{if(ce==="graph"){const Ke=he.angular;if(Ke.xaxis?.mode==="series"){const Qe=Q.transformations||[];Qe.push({id:"reduce",options:{reducers:Ke.xaxis?.values??["sum"]}}),Q.transformations=Qe}}return{}};var ns=e(38824);class ji{getListWithDefaults(ce){return ce.getListAppender({name:ns.m.BarChart,pluginId:"barchart",options:{showValue:mt.yL.Never,legend:{calcs:[],displayMode:mt.lm.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:he=>{he.options.barWidth=.8}}})}getSuggestionsForData(ce){const he=this.getListWithDefaults(ce),{dataSummary:Ae}=ce;Ae.frameCount===1&&(!Ae.hasNumberField||!Ae.hasStringField||Ae.rowCountTotal>50||(he.append({name:ns.m.BarChart}),Ae.numberFieldCount>1&&(he.append({name:ns.m.BarChartStacked,options:{stacking:mt.gs.Normal}}),he.append({name:ns.m.BarChartStackedPercent,options:{stacking:mt.gs.Percent}})),he.append({name:ns.m.BarChartHorizontal,options:{orientation:Rn.wV.Horizontal}}),Ae.numberFieldCount>1&&(he.append({name:ns.m.BarChartHorizontalStacked,options:{stacking:mt.gs.Normal,orientation:Rn.wV.Horizontal}}),he.append({name:ns.m.BarChartHorizontalStackedPercent,options:{orientation:Rn.wV.Horizontal,stacking:mt.gs.Percent}}))))}}const Si=new x.m(bs).setPanelChangeHandler(Hi).useFieldConfig({standardOptions:{[kt.uo.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:rn.Y.PaletteClassic}}},useCustomConfig:Q=>{const ce=Is;Q.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ce.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ce.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:pt.t.fillGradient[0].value,settings:{options:pt.t.fillGradient}}),Q.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:mt.NU.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:mt.NU.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),Q.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:mt.Ly.Off},settings:{options:pt.t.thresholdsDisplayModes},editor:aa.D,override:aa.D,process:yn.hS,shouldApply:()=>!0}),Qt.r(Q,ce,!1),on.e(Q)}}).setPanelOptions((Q,ce)=>{const he=Rs(ce.data,S.$.theme2,ce.options??{});let Ae="First string or time field";const Ke="viz"in he?he.viz[0]:void 0;if(Ke?.fields?.length){const Qe=Ke.fields[0];Ae+=` (${(0,gn.Ct)(Qe,Ke)})`}Q.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:Ae}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:Rn.wV.Auto,label:"Auto"},{value:Rn.wV.Horizontal,label:"Horizontal"},{value:Rn.wV.Vertical,label:"Vertical"}]},defaultValue:Fa.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Fa.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:Qe=>Qe.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Fa.xTickLabelSpacing,editor:_o}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:mt.yL.Auto,label:"Auto"},{value:mt.yL.Always,label:"Always"},{value:mt.yL.Never,label:"Never"}]},defaultValue:Fa.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:pt.t.stacking},defaultValue:Fa.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Fa.groupWidth,settings:{min:0,max:1,step:.01},showIf:(Qe,tt)=>Qe.stacking&&Qe.stacking!==mt.gs.None?!1:Gi(tt)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Fa.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Fa.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Fa.fullHighlight,showIf:Qe=>Qe.stacking===mt.gs.None}),Q.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),pn.D(Q),fn.H(Q),zn.I(Q,!1)}).setSuggestionsSupplier(new ji);function Gi(Q){let ce=0;if(Q)for(const he of Q)for(const Ae of he.fields)Ae.type===Kt.PU.number&&ce++;return ce}var ii=e(63250),Xs=e(23799);const li=Q=>(0,ii._$)(Q);var Mi=e(58384),Ks=e(17516);class xi{getSuggestionsForData(ce){const{dataSummary:he}=ce;if(!he.hasData||!he.hasNumberField)return;const Ae=ce.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});he.numberFieldCount>50||(he.hasStringField&&he.frameCount===1&&he.rowCountTotal<30?(Ae.append({name:ns.m.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:mt.eX.Basic,orientation:Rn.wV.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ae.append({name:ns.m.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:mt.eX.Lcd,orientation:Rn.wV.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(Ae.append({name:ns.m.BarGaugeBasic,options:{displayMode:mt.eX.Basic,orientation:Rn.wV.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ae.append({name:ns.m.BarGaugeLCD,options:{displayMode:mt.eX.Lcd,orientation:Rn.wV.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Qi=new x.m(Mi.d).useFieldConfig().setPanelOptions(Q=>{(0,Xs.L)(Q),(0,Xs.h)(Q),zn.I(Q),Q.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:mt.eX.Gradient,label:"Gradient"},{value:mt.eX.Lcd,label:"Retro LCD"},{value:mt.eX.Basic,label:"Basic"}]},defaultValue:Ks.K.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:mt.$l.Color,label:"Value color"},{value:mt.$l.Text,label:"Text color"},{value:mt.$l.Hidden,label:"Hidden"}]},defaultValue:Ks.K.valueMode}).addRadio({path:"namePlacement",name:"Name placement",settings:{options:[{value:mt.TZ.Auto,label:"Auto"},{value:mt.TZ.Top,label:"Top"},{value:mt.TZ.Left,label:"Left"}]},defaultValue:Ks.K.namePlacement,showIf:ce=>ce.orientation!==Rn.wV.Vertical}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Ks.K.showUnfilled,showIf:ce=>ce.displayMode!=="lcd"}).addRadio({path:"sizing",name:"Bar size",settings:{options:[{value:mt.T6.Auto,label:"Auto"},{value:mt.T6.Manual,label:"Manual"}]},defaultValue:Ks.K.sizing}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:Ks.K.minVizWidth,settings:{min:0,max:300,step:1},showIf:ce=>ce.sizing===mt.T6.Manual&&(ce.orientation===Rn.wV.Auto||ce.orientation===Rn.wV.Vertical)}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:Ks.K.minVizHeight,settings:{min:0,max:300,step:1},showIf:ce=>ce.sizing===mt.T6.Manual&&(ce.orientation===Rn.wV.Auto||ce.orientation===Rn.wV.Horizontal)}).addSliderInput({path:"maxVizHeight",name:"Max height",description:"Maximum row height (horizontal orientation)",defaultValue:Ks.K.maxVizHeight,settings:{min:0,max:300,step:1},showIf:ce=>ce.sizing===mt.T6.Manual&&(ce.orientation===Rn.wV.Auto||ce.orientation===Rn.wV.Horizontal)})}).setPanelChangeHandler(ii.gl).setMigrationHandler(li).setSuggestionsSupplier(new xi);var kr=e(41706),no=e(73134),Zs=e(23117),bo=e(68268),Po=e(10175),ao=e(74863);const ci=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),di=Array(53);for(let Q=0;Q<di.length;Q++)di[Q]=2**Q;const Oi=(Q,ce=1)=>Q==null?"-":Q.toFixed(ce),Yi={drawStyle:mt.GR.Line,showPoints:mt.yL.Auto,axisPlacement:mt.vM.Auto},Ii=({frame:Q,theme:ce,timeZones:he,getTimeRange:Ae,sync:Ke,allFrames:Qe,renderers:tt,tweakScale:gt=Nt=>Nt,tweakAxis:yt=Nt=>Nt,eventsScope:bt="__global_",hoverProximity:It,orientation:Rt=mt.wV.Horizontal})=>{const Nt=Rt!==mt.wV.Vertical,St=new Jr.e(he[0]);let Jt;St.setPrepData(ma=>(Jt=ma[0],(0,nr.bq)(ma[0],St.getStackingGroups())));const tn=Q.fields[0];if(!tn)return St;const Yt="x";let Zt="";const sn=tn.config.custom?.axisPlacement===mt.vM.Hidden?mt.vM.Hidden:Nt?mt.vM.Bottom:mt.vM.Left,Tn=tn.config.custom?.axisPlacement!==mt.vM.Hidden;if(tn.type===Kt.PU.time){St.addScale({scaleKey:Yt,orientation:Nt?mt.Lt.Horizontal:mt.Lt.Vertical,direction:Nt?mt.ON.Right:mt.ON.Up,isTime:!0,range:()=>{const On=Ae();return[On.from.valueOf(),On.to.valueOf()]}});const ma=he.length>1?(On,$n)=>Nt?$n.map((Nn,xa)=>xa<2?null:Nn):$n:void 0;for(let On=0;On<he.length;On++){const $n=he[On];St.addAxis({scaleKey:Yt,isTime:!0,placement:sn,show:Tn,label:tn.config.custom?.axisLabel,timeZone:$n,theme:ce,grid:{show:On===0&&tn.config.custom?.axisGridShow},filter:ma})}he.length>1&&St.addHook("drawAxes",On=>{On.ctx.save();let $n=0;On.axes.forEach(Nn=>{if(Nt&&Nn.side===2){On.ctx.fillStyle=ce.colors.text.primary,On.ctx.textAlign="left",On.ctx.textBaseline="bottom";let xa=Nn._pos+Nn._size;On.ctx.fillText(he[$n],On.bbox.left,xa*Os.A.pxRatio),$n++}}),On.ctx.restore()})}else St.addScale({scaleKey:Yt,orientation:Nt?mt.Lt.Horizontal:mt.Lt.Vertical,direction:Nt?mt.ON.Right:mt.ON.Up,range:(ma,On,$n)=>[tn.config.min??On,tn.config.max??$n]}),St.addAxis({scaleKey:Yt,placement:sn,show:Tn,label:tn.config.custom?.axisLabel,theme:ce,grid:{show:tn.config.custom?.axisGridShow},formatValue:(ma,On)=>(0,Es.cN)(tn.display(ma,On))});let cn=tt?.flatMap(ma=>Object.values(ma.fieldMap).filter(On=>ma.indicesOnly.indexOf(On)===-1))??[],ta;for(let ma=1;ma<Q.fields.length;ma++){const On=Q.fields[ma],$n={...On.config,custom:{...Yi,...On.config.custom}},Nn=$n.custom;if(On===tn||On.type!==Kt.PU.number&&On.type!==Kt.PU.enum)continue;let xa=On.display??Oi;On.config.custom?.stacking?.mode===mt.gs.Percent&&(xa=(0,Ts.J)({field:{...On,config:{...On.config,unit:"percentunit"}},theme:ce}));const Wa=(0,br.M)($n,On.type),ka=(0,us.Qi)(On),da=(0,us.lz)(On,ce).color;if(St.addScale(gt({scaleKey:Wa,orientation:Nt?mt.Lt.Vertical:mt.Lt.Horizontal,direction:Nt?mt.ON.Up:mt.ON.Right,distribution:Nn.scaleDistribution?.type,log:Nn.scaleDistribution?.log,linearThreshold:Nn.scaleDistribution?.linearThreshold,min:On.config.min,max:On.config.max,softMin:Nn.axisSoftMin,softMax:Nn.axisSoftMax,centeredZero:Nn.axisCenteredZero,range:Nn.stacking?.mode===mt.gs.Percent?(Sn,oa,Ea)=>(oa=oa<0?-1:0,Ea=Ea>0?1:0,[oa,Ea]):On.type===Kt.PU.enum?(Sn,oa,Ea)=>[-1,On.config.type.enum.text.length]:void 0,decimals:On.config.decimals},On)),Zt||(Zt=Wa),Nn.axisPlacement!==mt.vM.Hidden){let Sn;Nn.axisColorMode===mt.Y$.Series&&(ka.isByValue&&On.config.custom?.gradientMode===mt.on.Scheme&&ka.id===rn.Y.Thresholds?Sn=(0,ao.pl)(1,ce,ka,On.config.thresholds):Sn=da);const oa={border:{show:Nn.axisBorderShow||!1,width:1/devicePixelRatio,stroke:Sn||ce.colors.text.primary},ticks:{show:Nn.axisBorderShow||!1,stroke:Sn||ce.colors.text.primary},color:Sn||ce.colors.text.primary};let Ea,Pa,Sa;if(ci.has($n.unit))Ea=di;else if(On.type===Kt.PU.enum){let za=On.config.type.enum.text;Sa=za.map((gs,Ht)=>Ht),Pa=za}St.addAxis(yt({scaleKey:Wa,label:Nn.axisLabel,size:Nn.axisWidth,placement:Nt?Nn.axisPlacement??mt.vM.Auto:mt.vM.Bottom,formatValue:(za,gs)=>(0,Es.cN)(xa(za,gs)),theme:ce,grid:{show:Nn.axisGridShow},decimals:On.config.decimals,distr:Nn.scaleDistribution?.type,splits:Sa,values:Pa,incrs:Ea,...oa},On))}const $a=Nn.drawStyle===mt.GR.Points?mt.yL.Always:Nn.showPoints;let qa=()=>null;Nn.spanNulls!==!0&&(qa=(Sn,oa,Ea,Pa)=>{let Sa=[],za=Sn.series[oa];if(!Ea&&Pa&&Pa.length){const[gs,Ht]=za.idxs,Ls=Sn.data[0],ea=Sn.data[oa],sa=Math.round(Sn.valToPos(Ls[gs],"x",!0)),ua=Math.round(Sn.valToPos(Ls[Ht],"x",!0));Pa[0][0]===sa&&Sa.push(gs);for(let Na=0;Na<Pa.length;Na++){let Ka=Pa[Na],ss=Pa[Na+1];if(ss&&Ka[1]===ss[0]){let Ya=Sn.posToIdx(Ka[1],!0);if(ea[Ya]==null)for(let Vs=1;Vs<100;Vs++){if(ea[Ya+Vs]!=null){Ya+=Vs;break}if(ea[Ya-Vs]!=null){Ya-=Vs;break}}Sa.push(Ya)}}Pa[Pa.length-1][1]===ua&&Sa.push(Ht)}return Sa.length?Sa:null});let{fillOpacity:as}=Nn,fa=null,Oa=null;if(On.state?.origin){ta||(ta=Ai(Q,Qe));const Sn=Qe[On.state.origin.frameIndex],oa=Sn?.fields[On.state.origin.fieldIndex],Ea=(0,gn.Ct)(oa??On,Sn,Qe);if(cn.indexOf(Ea)>=0)fa=()=>null,Oa=()=>{};else if(Nn.transform===mt.NU.Constant){const Pa=Os.A.paths.linear();fa=(Sa,za)=>{const gs=Sa._data,Ht=Ae();let Ls=[Ht.from.valueOf(),Ht.to.valueOf()],ea=gs[za].find(Na=>Na!=null),sa=[ea,ea],ua=gs.slice();return ua[0]=Ls,ua[za]=sa,Pa({...Sa,_data:ua},za,0,1)}}if(Nn.fillBelowTo){const Pa=Q.fields.find(Ht=>Nn.fillBelowTo===Ht.name||Nn.fillBelowTo===Ht.config?.displayNameFromDS||Nn.fillBelowTo===(0,gn.Ct)(Ht,Q,Qe)),Sa=Pa?(0,gn.Ct)(Pa,Q,Qe):Nn.fillBelowTo,za=ta.get(Ea),gs=ta.get(Sa);(0,w.isNumber)(gs)&&(0,w.isNumber)(za)?(St.addBand({series:[za,gs],fill:void 0}),as||(as=35)):as=0}}let qn;ka.id===rn.Y.Thresholds&&(qn=Sn=>(0,us.lz)(Jt.fields[Sn],ce).color),St.addSeries({pathBuilder:fa,pointsBuilder:Oa,scaleKey:Wa,showPoints:$a,pointsFilter:qa,colorMode:ka,fillOpacity:as,theme:ce,dynamicSeriesColor:qn,drawStyle:Nn.drawStyle,lineColor:Nn.lineColor??da,lineWidth:Nn.lineWidth,lineInterpolation:Nn.lineInterpolation,lineStyle:Nn.lineStyle,barAlignment:Nn.barAlignment,barWidthFactor:Nn.barWidthFactor,barMaxWidth:Nn.barMaxWidth,pointSize:Nn.pointSize,spanNulls:Nn.spanNulls||!1,show:!Nn.hideFrom?.viz,gradientMode:Nn.gradientMode,thresholds:$n.thresholds,hardMin:On.config.min,hardMax:On.config.max,softMin:Nn.axisSoftMin,softMax:Nn.axisSoftMax,dataFrameFieldIndex:On.state?.origin}),Nn.thresholdsStyle&&$n.thresholds&&(Nn.thresholdsStyle.mode??mt.Ly.Off)!==mt.Ly.Off&&St.addThresholds({config:Nn.thresholdsStyle,thresholds:$n.thresholds,scaleKey:Wa,theme:ce,hardMin:On.config.min,hardMax:On.config.max,softMin:Nn.axisSoftMin,softMax:Nn.axisSoftMax})}let Kn=(0,nr.ro)(Q);St.setStackingGroups(Kn),tt?.forEach(ma=>{ta||(ta=Ai(Q,Qe));let On={};for(let $n in ma.fieldMap){let Nn=ma.fieldMap[$n];On[$n]=ta.get(Nn)}ma.init(St,On)}),St.scaleKeys=[Yt,Zt];const Qn=15;let ca={hover:{prox:(ma,On,$n)=>It??(ma.data[On][$n]===null?Qn:null),skip:[null]},focus:{prox:It??30}};return tn.type===Kt.PU.time&&Ke&&Ke()!==cs.y.Off&&(ca.sync={key:bt,scales:[Yt,null]}),St.setSync(),St.setCursor(ca),St};function Ai(Q,ce){const he=new Map;return Q.fields.forEach((Ae,Ke)=>{const Qe=Ae.state?.origin;if(Qe){const tt=ce[Qe.frameIndex]?.fields[Qe.fieldIndex];tt&&he.set((0,gn.Ct)(tt,ce[Qe.frameIndex],ce),Ke)}}),he}const Ji=["legend","options","theme"];class ui extends p.Component{constructor(){super(...arguments),this.prepConfig=(ce,he,Ae)=>{const{eventsScope:Ke,sync:Qe}=this.context,{theme:tt,timeZone:gt,options:yt,renderers:bt,tweakAxis:It,tweakScale:Rt}=this.props;return Ii({frame:ce,theme:tt,timeZones:Array.isArray(gt)?gt:[gt],getTimeRange:Ae,sync:Qe,allFrames:he,renderers:bt,tweakScale:Rt,tweakAxis:It,eventsScope:Ke,hoverProximity:yt?.tooltip?.hoverProximity,orientation:yt?.orientation})},this.renderLegend=ce=>{const{legend:he,frames:Ae}=this.props;return!ce||he&&!he.showLegend||!(0,rs.t)(ce,Ae)?null:p.createElement(rs.$,{data:Ae,config:ce,...he})}}static{this.contextType=ga.e4}render(){return p.createElement(ur.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:Ji,renderLegend:this.renderLegend})}}const sr=(0,ie.cV)(ui);sr.displayName="TimeSeries";var fo=e(1604),fr=e(18491),gr=e(36376),mi=e(24284);const fi=Q=>ce=>{const he=Q.visualization.getColorByName(ce?.color||mi.Mk);return{markerTriangle:(0,j.css)`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${he};
      `,markerBar:(0,j.css)`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${he};
      `}};var zo=e(49785),gi=e(5805),pi=e(37151),Hr=e(88575),Xi=e(21744),Ri=e(72235),Zi=e(99818),hi=e(10154);const go=p.forwardRef(({annotation:Q,onSave:ce,onDismiss:he,timeFormatter:Ae,className:Ke,...Qe},tt)=>{const gt=(0,ie.of)(Li),yt=(0,ga.d2)(),bt=(0,p.useRef)(null);(0,pi.A)(bt,()=>{he()});const[It,Rt]=(0,gi.default)(async ta=>{const Kn=await yt.onAnnotationCreate(ta);return ce&&ce(),Kn}),[Nt,St]=(0,gi.default)(async ta=>{const Kn=await yt.onAnnotationUpdate(ta);return ce&&ce(),Kn}),Jt=Q.id!==void 0,tn=Q.time!==Q.timeEnd,Yt=Jt?St:Rt,Zt=Jt?Nt:It,sn=tn?`${Ae(Q.time)} - ${Ae(Q.timeEnd)}`:Ae(Q.time),Tn=({tags:ta,description:Kn})=>{Yt({id:Q.id,tags:ta,description:Kn,from:Math.round(Q.time),to:Math.round(Q.timeEnd)})},cn=p.createElement("div",{ref:tt,className:(0,j.cx)(gt.editor,Ke),...Qe},p.createElement("div",{className:gt.header},p.createElement(A.B,{justifyContent:"space-between",alignItems:"center"},p.createElement("div",{className:gt.title},"Add annotation"),p.createElement("div",{className:gt.ts},sn))),p.createElement("div",{className:gt.editorForm},p.createElement(Ri.l,{onSubmit:Tn,defaultValues:{description:Q?.text,tags:Q?.tags||[]}},({register:ta,errors:Kn,control:Qn})=>p.createElement(p.Fragment,null,p.createElement(Hr.D,{label:"Description",invalid:!!Kn.description,error:Kn?.description?.message},p.createElement(Xi.f,{...ta("description",{required:"Annotation description is required"})})),p.createElement(Hr.D,{label:"Tags"},p.createElement(zo.xI,{control:Qn,name:"tags",render:({field:{ref:va,onChange:ca,...ma}})=>p.createElement(Zi.$,{allowCustomValue:!0,placeholder:"Add tags",onChange:ca,tagOptions:hi.vy,tags:ma.value})})),p.createElement(A.B,{justifyContent:"flex-end"},p.createElement(R.$n,{size:"sm",variant:"secondary",onClick:he,fill:"outline"},"Cancel"),p.createElement(R.$n,{size:"sm",type:"submit",disabled:Zt?.loading},Zt?.loading?"Saving":"Save"))))));return p.createElement(p.Fragment,null,p.createElement("div",{className:gt.backdrop}),p.createElement("div",{ref:bt},cn))});go.displayName="AnnotationEditorForm";const Li=Q=>({backdrop:(0,j.css)`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${Q.zIndex.navbarFixed};
    `,editorContainer:(0,j.css)`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:(0,j.css)`
      background: ${Q.colors.background.primary};
      box-shadow: ${Q.shadows.z3};
      z-index: ${Q.zIndex.dropdown};
      border: 1px solid ${Q.colors.border.weak};
      border-radius: ${Q.shape.radius.default};
      width: 460px;
    `,editorForm:(0,j.css)`
      padding: ${Q.spacing(1)};
    `,header:(0,j.css)`
      border-bottom: 1px solid ${Q.colors.border.weak};
      padding: ${Q.spacing(1.5,1)};
    `,title:(0,j.css)`
      font-weight: ${Q.typography.fontWeightMedium};
    `,ts:(0,j.css)`
      font-size: ${Q.typography.bodySmall.fontSize};
      color: ${Q.colors.text.secondary};
    `}),vi=({onDismiss:Q,onSave:ce,timeZone:he,data:Ae,selection:Ke,annotation:Qe,style:tt})=>{const gt=(0,ie.$j)(),yt=(0,ie.of)(hl),bt=(0,ie.of)(fi),It=[(0,fr.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,fr.BN)()],{context:Rt,refs:Nt,floatingStyles:St}=(0,gr.we)({open:!0,placement:"bottom",onOpenChange:cn=>{cn||Q()},middleware:It,whileElementsMounted:fr.ll,strategy:"fixed"}),Jt=(0,gr.s9)(Rt),{getReferenceProps:tn,getFloatingProps:Yt}=(0,gr.bv)([Jt]);let Zt=Ae.fields[0];if(!Zt)return null;const sn=Zt.display||(0,Ts.J)({field:Zt,timeZone:he,theme:gt}),Tn=Ke.min!==Ke.max;return p.createElement(Ns.ZL,null,p.createElement(p.Fragment,null,p.createElement("div",{style:tt},p.createElement("div",{className:(0,j.cx)((0,j.css)({position:"absolute",top:Ke.bbox.top,left:Ke.bbox.left,width:Ke.bbox.width,height:Ke.bbox.height}),Tn?yt.overlayRange(Qe):yt.overlay(Qe))},p.createElement("div",{ref:Nt.setReference,className:Tn?(0,j.cx)(bt(Qe).markerBar,yt.markerBar):(0,j.cx)(bt(Qe).markerTriangle,yt.markerTriangle),...tn()}))),p.createElement(go,{annotation:Qe||{time:Ke.min,timeEnd:Ke.max},timeFormatter:cn=>sn(cn).text,onSave:ce,onDismiss:Q,ref:Nt.setFloating,style:St,...Yt()})))},hl=Q=>({overlay:ce=>{const he=Q.visualization.getColorByName(ce?.color||mi.Mk);return(0,j.css)({borderLeft:`1px dashed ${he}`})},overlayRange:ce=>{const he=Q.visualization.getColorByName(ce?.color||mi.Mk);return(0,j.css)({background:qr.alpha(he,.1),borderLeft:`1px dashed ${he}`,borderRight:`1px dashed ${he}`})},markerTriangle:(0,j.css)({top:"calc(100% + 2px)",left:"-4px",position:"absolute"}),markerBar:(0,j.css)({top:"100%",left:0,position:"absolute"})}),Xo=({data:Q,timeZone:ce,config:he,children:Ae})=>{const Ke=(0,p.useRef)(),[Qe,tt]=(0,p.useState)(),[gt,yt]=(0,p.useState)(!1),[bt,It]=(0,p.useState)(null),Rt=(0,fo.A)(),Nt=(0,p.useCallback)(()=>{It(null),Ke.current&&Ke.current.setSelect({top:0,left:0,width:0,height:0}),yt(!1)},[yt,It]);(0,p.useLayoutEffect)(()=>{let Jt=!1;he.addHook("init",Yt=>{Ke.current=Yt;const Zt=Yt.hooks.setSelect;if(Zt)for(let sn=0;sn<Zt.length;sn++){const Tn=Zt[sn];Tn!==tn&&(Zt[sn]=(...cn)=>{!Jt&&Tn(...cn)})}}),he.addHook("syncRect",(Yt,Zt)=>{Rt()&&tt(Zt)});const tn=Yt=>{Jt&&(yt(!0),It({min:Yt.posToVal(Yt.select.left,"x"),max:Yt.posToVal(Yt.select.left+Yt.select.width,"x"),bbox:{left:Yt.select.left,top:0,height:Yt.select.height,width:Yt.select.width}}),Jt=!1)};he.addHook("setSelect",tn),he.setCursor({bind:{mousedown:(Yt,Zt,sn)=>Tn=>(Jt=Tn.button===0&&(Tn.metaKey||Tn.ctrlKey),sn(Tn),null),mouseup:(Yt,Zt,sn)=>Tn=>(Jt&&Yt.select.width===0&&(Yt.select.left=Yt.cursor.left,Yt.select.height=Yt.bbox.height/window.devicePixelRatio),sn(Tn),null)}})},[he,tt,Rt]);const St=(0,p.useCallback)(({coords:Jt})=>{if(!Ke.current||!Qe||!Jt)return;const tn=Ke.current.posToVal(Jt.plotCanvas.x,"x");tn&&(It({min:tn,max:tn,bbox:{left:Jt.plotCanvas.x,top:0,height:Qe.height,width:0}}),yt(!0))},[Qe]);return p.createElement(p.Fragment,null,gt&&bt&&Qe&&p.createElement(vi,{selection:bt,onDismiss:Nt,onSave:Nt,data:Q,timeZone:ce,style:{position:"absolute",top:`${Qe.top}px`,left:`${Qe.left}px`,width:`${Qe.width}px`,height:`${Qe.height}px`}}),Ae?Ae({startAnnotating:St}):null)};var Cr=e(78368),so=e(78226),_s=e(13544),Ei=e(16797),Fr=e(40672),Co=e(29158),qi=e(78369);const Bi=({annotation:Q,timeFormatter:ce,canEdit:he,canDelete:Ae,onEdit:Ke,onDelete:Qe})=>{const tt=(0,ie.of)(el),gt=ce(Q.time),yt=ce(Q.timeEnd);let bt=Q.text;const It=Q.tags;let Rt="",Nt,St,Jt=null;const tn=p.createElement("span",{className:tt.time},Q.isRegion?`${gt} - ${yt}`:gt);if(Q.login&&Q.avatarUrl&&(Nt=p.createElement("img",{className:tt.avatar,alt:"Annotation avatar",src:Q.avatarUrl})),Q.alertId!==void 0&&Q.newState){const Yt=Be.A.getStateDisplayModel(Q.newState);Jt=p.createElement("div",{className:tt.alertState},p.createElement("i",{className:Yt.stateClass},Yt.text)),Rt=Be.A.getAlertAnnotationInfo(Q)}else Q.title&&(bt=Q.title+"<br />"+(typeof bt=="string"?bt:""));return(he||Ae)&&(St=p.createElement("div",{className:tt.editControls},he&&p.createElement(Co.K,{name:"pen",size:"sm",onClick:Ke,tooltip:"Edit"}),Ae&&p.createElement(Co.K,{name:"trash-alt",size:"sm",onClick:Qe,tooltip:"Delete"}))),p.createElement("div",{className:tt.wrapper},p.createElement("div",{className:tt.header},p.createElement(wr.Gy,{justify:"space-between",align:"center",spacing:"md"},p.createElement("div",{className:tt.meta},p.createElement("span",null,Nt,Jt),tn),St)),p.createElement("div",{className:tt.body},bt&&p.createElement("div",{dangerouslySetInnerHTML:{__html:Fr.sQ.sanitize(bt)}}),Rt,p.createElement(p.Fragment,null,p.createElement(wr.Gy,{spacing:"xs",wrap:!0},It?.map((Yt,Zt)=>p.createElement(qi.v,{name:Yt,key:`${Yt}-${Zt}`}))))))};Bi.displayName="AnnotationTooltip";const el=Q=>({wrapper:(0,j.css)`
      max-width: 400px;
    `,commentWrapper:(0,j.css)`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:(0,j.css)`
      padding: ${Q.spacing(.5,1)};
      border-bottom: 1px solid ${Q.colors.border.weak};
      font-size: ${Q.typography.bodySmall.fontSize};
      display: flex;
    `,meta:(0,j.css)`
      display: flex;
      justify-content: space-between;
    `,editControls:(0,j.css)`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:(0,j.css)`
      border-radius: ${Q.shape.radius.circle};
      width: 16px;
      height: 16px;
      margin-right: ${Q.spacing(1)};
    `,alertState:(0,j.css)`
      padding-right: ${Q.spacing(1)};
      font-weight: ${Q.typography.fontWeightMedium};
    `,time:(0,j.css)`
      color: ${Q.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:(0,j.css)`
      padding: ${Q.spacing(1)};

      a {
        color: ${Q.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),tl=6;function it({annotation:Q,timeZone:ce,width:he}){const{canEditAnnotations:Ae,canDeleteAnnotations:Ke,...Qe}=(0,ga.d2)(),tt=(0,ie.of)(fi),gt=(0,ie.of)(_e),[yt,bt]=(0,p.useState)(!1),[It,Rt]=(0,p.useState)(!1),Nt=[(0,fr.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,fr.BN)()],{context:St,refs:Jt,floatingStyles:tn}=(0,gr.we)({open:yt,placement:"bottom",onOpenChange:bt,middleware:Nt,whileElementsMounted:fr.ll,strategy:"fixed"}),Yt=(0,gr.Mk)(St,{handleClose:(0,gr.iB)()}),Zt=(0,gr.s9)(St),{getReferenceProps:sn,getFloatingProps:Tn}=(0,gr.bv)([Zt,Yt]),cn=(0,p.useCallback)(()=>{Rt(!0),bt(!1)},[Rt,bt]),ta=(0,p.useCallback)(()=>{Qe.onAnnotationDelete&&Qe.onAnnotationDelete(Q.id)},[Q,Qe]),Kn=(0,p.useCallback)(On=>(0,yo.LE)(On,{format:zr.WC.fullDate,timeZone:ce}),[ce]),Qn=(0,p.useCallback)(()=>p.createElement(Bi,{annotation:Q,timeFormatter:Kn,onEdit:cn,onDelete:ta,canEdit:Ae?Ae(Q.dashboardUID):!1,canDelete:Ke?Ke(Q.dashboardUID):!1}),[Ae,Ke,ta,cn,Kn,Q]),va=!!Q.isRegion&&he>tl;let ca=`${he/2}px`,ma=p.createElement("div",{className:tt(Q).markerTriangle,style:{left:ca,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return va&&(ma=p.createElement("div",{className:tt(Q).markerBar,style:{width:`${he}px`,transform:"translate3d(0,-50%, 0)"}})),p.createElement(p.Fragment,null,p.createElement("div",{ref:Jt.setReference,className:va?void 0:gt.markerWrapper,"data-testid":_s.Tp.pages.Dashboard.Annotations.marker,...sn()},ma),yt&&p.createElement(Ns.ZL,null,p.createElement("div",{className:gt.tooltip,ref:Jt.setFloating,style:tn,...Tn()},Qn())),It&&p.createElement(Ns.ZL,null,p.createElement(go,{onDismiss:()=>Rt(!1),onSave:()=>Rt(!1),timeFormatter:Kn,annotation:Q,ref:Jt.setFloating,style:tn,...Tn()})))}const _e=Q=>({markerWrapper:(0,j.css)({label:"markerWrapper",padding:Q.spacing(0,.5,.5,.5)}),tooltip:(0,j.css)({...(0,Ei.getTooltipContainerStyles)(Q),padding:0})}),st=({annotations:Q,timeZone:ce,config:he,disableCanvasRendering:Ae=!1})=>{const Ke=(0,ie.$j)(),Qe=(0,p.useRef)(),tt=(0,p.useRef)();(0,p.useEffect)(()=>{const bt=[];for(const It of Q)bt.push(new Cr.R(It));return tt.current=bt,()=>{tt.current=[]}},[Q]),(0,p.useLayoutEffect)(()=>{he.addHook("init",bt=>{Qe.current=bt}),he.addHook("draw",bt=>{if(!tt.current)return null;const It=bt.ctx;if(!It)return;It.save(),It.beginPath(),It.rect(bt.bbox.left,bt.bbox.top,bt.bbox.width,bt.bbox.height),It.clip();const Rt=(Nt,St)=>{It.beginPath(),It.lineWidth=2,It.strokeStyle=St,It.setLineDash([5,5]),It.moveTo(Nt,bt.bbox.top),It.lineTo(Nt,bt.bbox.top+bt.bbox.height),It.stroke(),It.closePath()};if(!Ae)for(let Nt=0;Nt<tt.current.length;Nt++){const St=tt.current[Nt];for(let Jt=0;Jt<St.length;Jt++){const tn=St.get(Jt);if(!tn.time)continue;let Yt=bt.valToPos(tn.time,"x",!0);const Zt=Ke.visualization.getColorByName(tn.color);if(Rt(Yt,Zt),tn.isRegion&&tn.timeEnd){let sn=bt.valToPos(tn.timeEnd,"x",!0);Rt(sn,Zt),It.fillStyle=qr.alpha(Zt,.1),It.rect(Yt,bt.bbox.top,sn-Yt,bt.bbox.height),It.fill()}}}It.restore()})},[he,Ke,Ae]);const gt=(0,p.useCallback)((bt,It)=>{const Nt=new Cr.R(bt).get(It.fieldIndex);if(!Nt.time||!Qe.current)return;let St=Qe.current.valToPos(Nt.time,"x");return St<0&&(St=0),{x:St,y:Qe.current.bbox.height/window.devicePixelRatio+4}},[]),yt=(0,p.useCallback)((bt,It)=>{let Rt=0;const St=new Cr.R(bt).get(It.fieldIndex);if(!!St.isRegion&&Qe.current){let tn=Qe.current.valToPos(St.time,"x"),Yt=Qe.current.valToPos(St.timeEnd,"x");tn<0&&(tn=0),Yt>Qe.current.bbox.width/window.devicePixelRatio&&(Yt=Qe.current.bbox.width/window.devicePixelRatio),Rt=Yt-tn}return p.createElement(it,{annotation:St,timeZone:ce,width:Rt})},[ce]);return p.createElement(so.a,{id:"annotations",config:he,events:Q,renderEventMarker:yt,mapEventToXYCoords:gt})};var ht=e(62567),Te=e(29647),we=e(33083),Ue=e(59093),Ge=e(64539),ct=e(28122);const vt=({data:Q,config:ce,onClose:he,timeZone:Ae,replaceVariables:Ke,...Qe})=>{const[tt,gt]=(0,p.useState)(null),[yt,bt]=(0,p.useState)(null),[It,Rt]=(0,p.useState)(!1);(0,p.useLayoutEffect)(()=>{let St=null;ce.addHook("init",Jt=>{Jt.over.addEventListener("click",tn=>{St!=null&&!tn.metaKey&&!tn.ctrlKey&&!tn.shiftKey&&(gt({viewport:{x:tn.clientX,y:tn.clientY},plotCanvas:{x:tn.clientX-Jt.rect.left,y:tn.clientY-Jt.rect.top}}),bt({seriesIdx:St,dataIdx:Jt.cursor.idxs[St]}),Rt(!0))})}),ce.addHook("setSeries",(Jt,tn)=>{St=tn})},[ce]);const Nt=(0,p.useMemo)(()=>Qe.defaultItems?Qe.defaultItems.map(St=>({...St,items:St.items.map(Jt=>({...Jt,onClick:tn=>{tt&&Jt.onClick?.(tn,{coords:tt})}}))})):[],[tt,Qe.defaultItems]);return p.createElement(p.Fragment,null,It&&tt&&p.createElement(At,{data:Q,frames:Qe.frames,defaultItems:Nt,timeZone:Ae,selection:{point:yt,coords:tt},replaceVariables:Ke,onClose:()=>{bt(null),Rt(!1),he&&he()}}))},At=({selection:Q,timeZone:ce,defaultItems:he,replaceVariables:Ae,data:Ke,...Qe})=>{const tt=(0,p.useRef)(null),gt=()=>{Qe.onClose&&Qe.onClose()};(0,Te.A)(tt,()=>{gt()});const yt=Ke.fields[0];if(!yt)return null;const bt=he?[...he]:[];let It=()=>null;if(Q.point){const{seriesIdx:Nt,dataIdx:St}=Q.point,Jt=yt.display;if(Nt&&St!==null){const tn=Ke.fields[Nt],Yt=tn.display(tn.values[St]);tn.config.links&&tn.config.links.length>0&&tn.getLinks&&bt.push({items:tn.getLinks({valueRowIndex:St}).map(sn=>({label:sn.title,ariaLabel:sn.title,url:sn.href,target:sn.target,icon:sn.target==="_self"?"link":"external-link-alt",onClick:sn.onClick}))}),It=()=>p.createElement(we.i,{timestamp:Jt(yt.values[St]).text,displayValue:Yt,seriesColor:Yt.color,displayName:(0,gn.Ct)(tn,Ke,Qe.frames)})}}const Rt=()=>bt?.map((Nt,St)=>p.createElement(Ue.r,{key:`${Nt.label}${St}`,label:Nt.label},(Nt.items||[]).map(Jt=>p.createElement(Ge.D,{key:Jt.url,url:Jt.url,label:Jt.label,target:Jt.target,icon:Jt.icon,active:Jt.active,onClick:Jt.onClick}))));return p.createElement(ct.t,{renderMenuItems:Rt,renderHeader:It,x:Q.coords.viewport.x,y:Q.coords.viewport.y,onClose:gt})};var jt=e(79961),qt=e(74007),an=e(86106);const xn=({timeZone:Q,dataFrame:ce,dataFrameFieldIndex:he,config:Ae,exemplarColor:Ke,clickedExemplarFieldIndex:Qe,setClickedExemplarFieldIndex:tt})=>{const gt=(0,ie.of)(Un),[yt,bt]=(0,p.useState)(!1),[It,Rt]=(0,p.useState)(!1),Nt=[(0,fr.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,fr.BN)()],{context:St,refs:Jt,floatingStyles:tn}=(0,gr.we)({open:yt,placement:"bottom",onOpenChange:bt,middleware:Nt,whileElementsMounted:fr.ll,strategy:"fixed"}),Yt=(0,gr.s9)(St),Zt=(0,gr.Mk)(St,{handleClose:(0,gr.iB)(),enabled:Qe===void 0}),{getReferenceProps:sn,getFloatingProps:Tn}=(0,gr.bv)([Yt,Zt]);(0,p.useEffect)(()=>{Qe?.fieldIndex===he.fieldIndex&&Qe?.frameIndex===he.frameIndex||Rt(!1)},[Qe,he]);const cn=()=>{const ca=[p.createElement("rect",{fill:Ke,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),p.createElement("path",{fill:Ke,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),p.createElement("path",{fill:Ke,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),p.createElement("rect",{fill:Ke,key:"rectangle",width:"5",height:"5"}),p.createElement("path",{fill:Ke,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),p.createElement("path",{fill:Ke,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return ca[he.frameIndex%ca.length]},ta=()=>{Rt(!0)},Kn=(0,p.useCallback)(()=>{const ca=ce.fields.filter(ra=>ra.config.links?.length&&ra.config.links?.length>0)||[],ma=[...ca,...ce.fields.filter(ra=>!ca.includes(ra))],On=ra=>(0,yo.LE)(ra,{format:zr.WC.fullDate,timeZone:Q}),$n=()=>{Rt(!1),bt(!1),tt(void 0)};let Nn=[],xa=[];ma.map((ra,da)=>{const $a=ra.values[he.fieldIndex];ra.config.links?.length&&xa?.push(...ra.getLinks?.({valueRowIndex:he.fieldIndex})||[]);const qa=ra.display?ra.display($a):{text:`${$a}`,numeric:+$a};Nn.push({name:ra.name,value:$a,valueString:(0,Es.cN)(qa),highlight:!1})});const Wa={position:"relative",top:"35px",right:"5px",marginRight:0},ka=()=>S.$.featureToggles.newVizTooltips?p.createElement(p.Fragment,null,It&&p.createElement(an.d,{onClick:$n,style:Wa}),p.createElement(qt.i,{displayValues:Nn,links:xa})):p.createElement("div",{className:gt.wrapper},It&&p.createElement(an.d,{onClick:$n}),p.createElement("div",{className:gt.body},p.createElement("div",{className:gt.header},p.createElement("span",{className:gt.title},"Exemplars")),p.createElement("div",null,p.createElement("table",{className:gt.exemplarsTable},p.createElement("tbody",null,ma.map((ra,da)=>{const $a=ra.values[he.fieldIndex],qa=ra.config.links?.length?ra.getLinks?.({valueRowIndex:he.fieldIndex}):void 0;return p.createElement("tr",{key:da},p.createElement("td",{valign:"top"},ra.name),p.createElement("td",null,p.createElement("div",{className:gt.valueWrapper},p.createElement("span",null,ra.type===Kt.PU.time?On($a):$a),qa&&p.createElement(jt.n,{links:qa}))))}))))));return p.createElement("div",{className:gt.tooltip,ref:Jt.setFloating,style:tn,...Tn()},ka())},[ce.fields,he,gt,Q,It,tt,tn,Tn,Jt.setFloating]),Qn=Ae.getSeries().find(ca=>ca.props.dataFrameFieldIndex?.frameIndex===he.frameIndex)?.props.lineColor,va=()=>{tt(he),ta()};return p.createElement(p.Fragment,null,p.createElement("div",{ref:Jt.setReference,className:gt.markerWrapper,"data-testid":_s.Tp.components.DataSource.Prometheus.exemplarMarker,role:"button",tabIndex:0,...sn(),onClick:va,onKeyDown:ca=>{ca.key==="Enter"&&va()}},p.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:Qn},className:(0,j.cx)(gt.marble,(yt||It)&&gt.activeMarble)},cn())),(yt||It)&&p.createElement(Ns.ZL,null,Kn()))},Un=Q=>{const ce=Q.isDark?Q.v1.palette.dark2:Q.v1.palette.white,he=Q.isDark?Q.v1.palette.dark9:Q.v1.palette.gray5,Ae=Q.isDark?Q.v1.palette.black:Q.v1.palette.white,Ke=Q.isDark?Q.v1.palette.dark3:Q.v1.palette.gray6;return{markerWrapper:(0,j.css)({padding:"0 4px 4px 4px",width:"8px",height:"8px",boxSizing:"content-box",transform:"translate3d(-50%, 0, 0)","&:hover":{"> svg":{transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"}}}),marker:(0,j.css)({width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderBottom:`4px solid ${Q.v1.palette.red}`,pointerEvents:"none"}),wrapper:(0,j.css)({background:ce,border:`1px solid ${he}`,borderRadius:Q.shape.borderRadius(2),boxShadow:`0 0 20px ${Ae}`,padding:Q.spacing(1)}),exemplarsTable:(0,j.css)({width:"100%","tr td":{padding:"5px 10px",whiteSpace:"nowrap",borderBottom:`4px solid ${Q.components.panel.background}`},tr:{backgroundColor:Q.colors.background.primary,"&:nth-child(even)":{backgroundColor:Ke}}}),valueWrapper:(0,j.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",columnGap:Q.spacing(1),"> span":{flexGrow:0},"> *":{flex:"1 1",alignSelf:"center"}}),tooltip:(0,j.css)({background:"none",padding:0,overflowY:"auto",maxHeight:"95vh"}),header:(0,j.css)({background:he,padding:"6px 10px",display:"flex"}),title:(0,j.css)({fontWeight:Q.typography.fontWeightMedium,paddingRight:Q.spacing(2),overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),body:(0,j.css)({fontWeight:Q.typography.fontWeightMedium,borderRadius:Q.shape.borderRadius(2),overflow:"hidden"}),marble:(0,j.css)({display:"block",opacity:.5,transition:"transform 0.15s ease-out"}),activeMarble:(0,j.css)({transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"})}},Cn=({exemplars:Q,timeZone:ce,config:he,visibleSeries:Ae})=>{const Ke=(0,p.useRef)(),[Qe,tt]=(0,p.useState)();(0,p.useLayoutEffect)(()=>{he.addHook("init",bt=>{Ke.current=bt})},[he]);const gt=(0,p.useCallback)((bt,It)=>{const Rt=bt.fields.find(Zt=>Zt.name===Kt.LE),Nt=bt.fields.find(Zt=>Zt.name===Kt.Bc);if(!Rt||!Nt||!Ke.current)return;const St=Object.keys(Ke.current.scales).find(Zt=>!["x","y"].some(sn=>sn===Zt))??Bo.s,Jt=Ke.current.scales[St].min,tn=Ke.current.scales[St].max;let Yt=Nt.values[It.fieldIndex];return Jt!=null&&Yt<Jt&&(Yt=Jt),tn!=null&&Yt>tn&&(Yt=tn),{x:Ke.current.valToPos(Rt.values[It.fieldIndex],"x"),y:Ke.current.valToPos(Yt,St)}},[]),yt=(0,p.useCallback)((bt,It)=>{const Rt=Ae!==void 0?Xn(Ae,bt,It):!0,Nt=Ae!==void 0?la(bt,It,Ae):void 0;return Rt?p.createElement(xn,{setClickedExemplarFieldIndex:tt,clickedExemplarFieldIndex:Qe,timeZone:ce,dataFrame:bt,dataFrameFieldIndex:It,config:he,exemplarColor:Nt}):p.createElement(p.Fragment,null)},[he,ce,Ae,tt,Qe]);return p.createElement(so.a,{config:he,id:"exemplars",events:Q,renderEventMarker:yt,mapEventToXYCoords:gt})},Ln=(Q,ce)=>{const he=Q.series.filter(Ke=>Ke.props.show),Ae=[];return ce?.length&&he.forEach(Ke=>{const Qe=Ke.props?.dataFrameFieldIndex?.frameIndex,tt=Ke.props?.dataFrameFieldIndex?.fieldIndex;if(Qe!==void 0&&tt!==void 0){const gt=ce[Qe]?.fields[tt];gt?.labels&&Ae.push({labels:gt.labels,color:Ke.props?.lineColor??""})}}),{labels:Ae,totalSeriesCount:Q.series.length}},la=(Q,ce,he)=>{let Ae;return he.labels.some(Ke=>{const Qe=Object.keys(Ke.labels),tt=Q.fields.filter(gt=>Qe.find(yt=>yt===gt.name));return tt.length&&tt.every((yt,bt,It)=>{const Rt=yt.values[ce.fieldIndex];return Ke.labels[yt.name]===Rt})?(Ae=Ke.color,!0):!1}),Ae},Xn=(Q,ce,he)=>{let Ae=!1;return Q.labels.length===Q.totalSeriesCount?Ae=!0:Q.labels.some(Ke=>{const Qe=Object.keys(Ke.labels);if(Object.keys(Ke.labels).length===0)Ae=!0;else{const tt=ce.fields.filter(gt=>Qe.find(yt=>yt===gt.name));tt.length&&(Ae=Q.labels.some(gt=>Object.keys(gt.labels).every(yt=>{const bt=gt.labels[yt];return tt.find(It=>It.values[he.fieldIndex]===bt)})))}return Ae}),Ae},Gn=({config:Q,onChangeTimeRange:ce})=>{const he=(0,p.useRef)(),[Ae,Ke]=(0,p.useState)([]),[Qe,tt]=(0,p.useState)();if((0,p.useLayoutEffect)(()=>{Q.addHook("init",St=>{he.current=St}),Q.addHook("setScale",St=>{Ke(St.data?.[0]??[]),tt(St.scales.x??void 0)})},[Q]),Ae.length<2||!ce||!Qe||!Qe.time||!Qe.min||!Qe.max)return null;let gt=0,yt=Ae.length-1;for(;gt<=yt&&Ae[gt]==null;)gt++;for(;yt>=0&&Ae[yt]==null;)yt--;const bt=Ae[gt],It=Ae[yt],Rt=Qe.min,Nt=Qe.max;return bt==null||It==null||bt<=Nt&&It>=Rt?null:p.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},p.createElement("div",null,p.createElement("div",null,"Data outside time range"),p.createElement(R.$n,{onClick:St=>ce({from:bt,to:It}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};Gn.displayName="OutsideRangePlugin";var Yn=e(55794),Ma=e.n(Yn);const Ua=({step:Q,y:ce,dragBounds:he,mapPositionToValue:Ae,formatValue:Ke,onChange:Qe})=>{const tt=(0,ie.$j)();let gt=ce,yt="none";ce<(he.top??0)&&(yt="top"),ce>(he.bottom??0)+22&&(yt="bottom"),yt==="bottom"&&(gt=he.bottom??ce),yt==="top"&&(gt=he.top??ce);const bt=typeof Qe!="function",It=(0,ie.of)(ha,Q,yt,bt),[Rt,Nt]=(0,p.useState)(Q.value),St=(0,p.useMemo)(()=>tt.colors.getContrastText(tt.visualization.getColorByName(Q.color)),[Q.color,tt]);return p.createElement(Ma(),{axis:"y",grid:[1,1],disabled:bt,onStop:bt?w.noop:(Jt,tn)=>(Qe(Ae(tn.lastY)),!1),onDrag:(Jt,tn)=>Nt(Ae(tn.lastY)),position:{x:0,y:gt},bounds:he},p.createElement("div",{className:It.handle,style:{color:St}},p.createElement("span",{className:It.handleText},Ke(Rt))))};Ua.displayName="ThresholdDragHandle";const ha=(Q,ce,he,Ae)=>{const Ke=Q.visualization.getColorByName(ce.color),Qe=Ia(he),tt=he!=="none";return{handle:(0,j.css)`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Ke};
      cursor: ${Ae?"initial":"grab"};
      border-top-right-radius: ${Q.shape.radius.default};
      border-bottom-right-radius: ${Q.shape.radius.default};
      ${tt&&(0,j.css)`
        margin-top: 0;
        border-radius: ${Q.shape.radius.default};
      `}
      background: ${Ke};
      font-size: ${Q.typography.bodySmall.fontSize};
      &:before {
        ${Qe};
      }
    `,handleText:(0,j.css)`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Ia(Q){const ce=Q==="none",he=Ae=>(0,j.css)`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${Ae}px;
    border-right-color: inherit;
    border-top: ${Ae}px solid transparent;
    border-bottom: ${Ae}px solid transparent;
  `;return ce?(0,j.css)`
      ${he(9)};
      left: -9px;
    `:Q==="top"?(0,j.css)`
      ${he(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:Q==="bottom"?(0,j.css)`
      ${he(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const Xa=60,Cs=({config:Q,fieldConfig:ce,onThresholdsChange:he})=>{const Ae=(0,p.useRef)(),[Ke,Qe]=(0,p.useState)(0);(0,p.useLayoutEffect)(()=>{Q.setPadding([0,Xa,0,0]),Q.addHook("init",gt=>{Ae.current=gt}),Q.addHook("draw",()=>{Qe(gt=>gt+1)})},[Q]);const tt=(0,p.useMemo)(()=>{const gt=Ae.current;if(!gt)return null;const yt=ce.defaults.thresholds;if(!yt)return null;const bt=(0,br.M)(ce.defaults,Kt.PU.number),It=ce.defaults.decimals,Rt=[];for(let Nt=0;Nt<yt.steps.length;Nt++){const St=yt.steps[Nt],Jt=gt.valToPos(St.value,bt);if(Number.isNaN(Jt)||!Number.isFinite(Jt))continue;const tn=gt.bbox.height/window.devicePixelRatio,Zt=typeof he=="function"?Tn=>{const cn=[...yt.steps.slice(0,Nt),...yt.steps.slice(Nt+1),{...yt.steps[Nt],value:Tn}].sort((ta,Kn)=>ta.value-Kn.value);he({...yt,steps:cn})}:void 0,sn=p.createElement(Ua,{key:`${St.value}-${Nt}`,step:St,y:Jt,dragBounds:{top:0,bottom:tn},mapPositionToValue:Tn=>gt.posToVal(Tn,bt),formatValue:Tn=>(0,Es.j_)(bt)(Tn,It).text,onChange:Zt});Rt.push(sn)}return Rt},[Ke,ce,he]);return Ae.current?p.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(Ae.current.bbox.left+Ae.current.bbox.width)/window.devicePixelRatio}px`,top:`${Ae.current.bbox.top/window.devicePixelRatio}px`,width:`${Xa}px`,height:`${Ae.current.bbox.height/window.devicePixelRatio}px`}},tt):null};Cs.displayName="ThresholdControlsPlugin";var hs=(Q=>(Q.Candles="candles",Q.CandlesVolume="candles+volume",Q.Volume="volume",Q))(hs||{}),As=(Q=>(Q.Candles="candles",Q.OHLCBars="ohlcbars",Q))(As||{}),is=(Q=>(Q.CloseClose="close-close",Q.OpenClose="open-close",Q))(is||{});const Qs={down:"red",flat:"gray",up:"green"},Ss={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:mt.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:mt.$N.Multi,sort:mt.xB.None}},Ys={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function po(Q,ce,he){const Ae=(0,io.findField)(Q,he[ce.key]);if(!Ae)for(const Ke of Q.fields){const Qe=(0,gn.Ct)(Ke,Q).toLowerCase();if(ce.defaults.includes(Qe)||ce.defaults.includes(Ke.name))return Ke}return Ae}function qs(Q,ce,he,Ae){if(!Q?.length)return null;const Ke=ce.fields??{},Qe=Q.length===1?(0,tr.Yj)(Q[0],Q[0].fields.findIndex(St=>St.type===Kt.PU.time)):(0,tr.Fd)({frames:Q});if(!Qe?.length)return null;const tt={aligned:Qe,frame:Qe,names:{}},gt=lo([Qe],he,Ae);if(!gt)return null;const yt=tt.frame=gt[0],bt=yt.fields.findIndex(St=>St.type===Kt.PU.time);if(bt<0)return null;const It=new Set;for(const St of Object.values(Ys)){const Jt=po(yt,St,Ke);Jt&&(tt[St.key]=Jt,It.add(Jt))}if(!tt.open&&!tt.close&&(tt.open=yt.fields.find(St=>St.type===Kt.PU.number),tt.open&&It.add(tt.open)),tt.open&&!tt.close&&!Ke.close){const St=tt.open.values.slice(1);St.push(St[St.length-1]),tt.close={...tt.open,values:St,name:"Next open",state:void 0},It.add(tt.close),yt.fields.push(tt.close),tt.autoOpenClose=!0}if(tt.close&&!tt.open&&!Ke.open){const St=tt.close.values.slice();St.unshift(St[0]),St.length=yt.length,tt.open={...tt.close,values:St,name:"Previous close",state:void 0},It.add(tt.open),yt.fields.push(tt.open),tt.autoOpenClose=!0}!tt.high&&!Ke.high&&(tt.high=tt.open),!tt.low&&!Ke.low&&(tt.low=tt.open),ce.mode===hs.Volume?(tt.high&&(tt.high!==tt.open&&It.delete(tt.high),tt.high=void 0),tt.low&&(tt.low!==tt.open&&It.delete(tt.low),tt.low=void 0)):ce.mode===hs.Candles&&tt.volume&&(It.delete(tt.volume),tt.volume=void 0);for(const St of Object.values(Ys)){const Jt=tt[St.key];Jt&&(tt.names[St.key]=(0,gn.Ct)(Jt,tt.frame))}const Rt=yt.fields[bt],Nt=[Rt];ce.includeAllFields?Nt.push(...yt.fields.filter(St=>St!==Rt)):Nt.push(...It),tt.frame={...tt.frame,fields:Nt};for(let St=0;St<tt.frame.fields.length;St++){const Jt=tt.frame.fields[St];Jt.state={...Jt.state,seriesIndex:St-1,origin:{fieldIndex:St,frameIndex:0}}}return tt}const{alpha:jr}=qr;function zs(Q){let{mode:ce,candleStyle:he,fields:Ae,colorStrategy:Ke,upColor:Qe,downColor:tt,flatColor:gt,volumeAlpha:yt,flatAsUp:bt=!0}=Q;const It=ce!==hs.Volume&&Ae.high!=null&&Ae.low!=null,Rt=It&&he===As.Candles,Nt=ce!==hs.Candles&&Ae.volume!=null;function St(cn,ta,Kn,Qn,va){return cn>0?Kn:cn<0?Qn:va?Kn:ta}let Jt=0,tn=Ae.open,Yt=Ae.high,Zt=Ae.low,sn=Ae.close,Tn=Ae.volume;return cn=>{let ta,Kn,Qn,va,ca,ma;It&&(Qn=new Path2D,Kn=new Path2D,ta=new Path2D),Nt&&(va=new Path2D,ca=new Path2D,ma=new Path2D);let On=new Path2D,$n=cn.ctx,Nn=cn.data[Jt],xa=cn.data[tn],Wa=cn.data[sn],ka=It?cn.data[Yt]:null,ra=It?cn.data[Zt]:null,da=Nt?cn.data[Tn]:null,$a=Tn!=null?Math.round(cn.valToPos(0,cn.series[Tn].scale,!0)):null,[qa,as]=cn.series[0].idxs,fa=cn.data[0],Oa=xa,qn=cn.bbox.width;if(fa.length>1){let Sa=null;for(let za=0,gs=1/0;za<fa.length;za++)if(Oa[za]!==void 0){if(Sa!=null){let Ht=Math.abs(fa[za]-fa[Sa]);Ht<gs&&(gs=Ht,qn=Math.abs(cn.valToPos(fa[za],"x",!0)-cn.valToPos(fa[Sa],"x",!0)))}Sa=za}}let Sn=Math.round(.6*qn),oa=2,Ea=2;Sn<=12&&(oa=Ea=1);let Pa=Math.floor(Sn/2);for(let Sa=qa;Sa<=as;Sa++){let za=Math.round(cn.valToPos(Nn[Sa],"x",!0)),gs=Sa===qa?0:Math.sign(Wa[Sa]-Wa[Sa-1]),Ht=Math.sign(Wa[Sa]-xa[Sa]);if(Nt&&ma&&ca&&va){let Ls=St(Ke===is.CloseClose?gs:Ht,ma,ca,va,Sa===qa&&is.CloseClose?!1:bt),ea=Math.round(cn.valToPos(da[Sa],cn.series[Tn].scale,!0));Ls.rect(za-Pa,ea,Sn,$a-ea)}if(It&&Qn&&Kn&&ta){let Ls=St(Ke===is.CloseClose?gs:Ht,Qn,Kn,ta,Sa===qa&&is.CloseClose?!1:bt),ea=Math.round(cn.valToPos(ka[Sa],cn.series[Yt].scale,!0)),sa=Math.round(cn.valToPos(ra[Sa],cn.series[Zt].scale,!0));Ls.rect(za-Math.floor(oa/2),ea,oa,sa-ea);let ua=Math.round(cn.valToPos(xa[Sa],cn.series[tn].scale,!0)),Na=Math.round(cn.valToPos(Wa[Sa],cn.series[sn].scale,!0));if(Rt){let Ka=Math.min(ua,Na),ss=Math.max(ua,Na),Ya=Math.max(1,ss-Ka);Ls.rect(za-Pa,Ka,Sn,Ya),Ke===is.CloseClose&&Ht>=0&&Ya>Ea*2&&On.rect(za-Pa+Ea,Ka+Ea,Sn-Ea*2,Ya-Ea*2)}else Ls.rect(za-Pa,ua,Pa,oa),Ls.rect(za,Na,Pa,oa)}}$n.save(),$n.rect(cn.bbox.left,cn.bbox.top,cn.bbox.width,cn.bbox.height),$n.clip(),Nt&&ma&&ca&&va&&($n.fillStyle=jr(Qe,yt),$n.fill(ca),$n.fillStyle=jr(tt,yt),$n.fill(va),$n.fillStyle=jr(gt,yt),$n.fill(ma)),It&&Qn&&Kn&&ta&&($n.fillStyle=Qe,$n.fill(Kn),$n.fillStyle=tt,$n.fill(ta),$n.fillStyle=gt,$n.fill(Qn),$n.globalCompositeOperation="destination-out",$n.fill(On)),$n.restore()}}const ia=({data:Q,id:ce,timeRange:he,timeZone:Ae,width:Ke,height:Qe,options:tt,fieldConfig:gt,onChangeTimeRange:yt,replaceVariables:bt})=>{const{sync:It,canAddAnnotations:Rt,onThresholdsChange:Nt,canEditThresholds:St,showThresholds:Jt,dataLinkPostProcessor:tn,eventBus:Yt}=(0,ga.d2)(),Zt=(0,ie.$j)(),sn=(0,p.useCallback)(()=>It?.()===no.yV.Tooltip,[]),Tn=(0,p.useCallback)(()=>It?.()!==no.yV.Off,[]),cn=(0,p.useMemo)(()=>qs(Q.series,tt,Zt,he),[Q.series,tt,Zt,he]),[ta,Kn]=(0,p.useState)(null),{renderers:Qn,tweakScale:va,tweakAxis:ca,shouldRenderPrice:ma}=(0,p.useMemo)(()=>{let Nn=(Ht,Ls)=>Ht,xa=(Ht,Ls)=>Ht,Wa={renderers:[],tweakScale:Nn,tweakAxis:xa,shouldRenderPrice:!1};if(!cn)return Wa;const ka=cn.names;if(!Object.keys(ka).length)return Wa;const{mode:ra,candleStyle:da,colorStrategy:$a}=tt,qa={...Qs,...tt.colors};let{open:as,high:fa,low:Oa,close:qn,volume:Sn}=ka;if(as==null||qn==null)return Wa;let oa=.5,Ea=-1,Pa=!1;if(Sn!=null&&ra!==hs.Candles){let Ht=cn.volume;if(Ht!=null){Pa=!0;let{fillOpacity:Ls}=Ht.config.custom;Ls&&(oa=Ls/100),ra!==hs.Volume&&(Ht.config={...Ht.config},Ht.config.unit="short",Ht.display=(0,Ts.J)({field:Ht,theme:ye.config.theme2}),xa=(ea,sa)=>{if(sa.name===cn.volume?.name){let ua=(Na,Ka)=>{let ss=[],Ya=Na.series[Ea].max;for(let Vs=0;Vs<Ka.length&&(ss.push(Ka[Vs]),!(Ya&&Ka[Vs]>Ya));Vs++);return ss};ea.space=20,ea.filter=ua,ea.ticks={...ea.ticks,filter:ua}}return ea},Nn=(ea,sa)=>(sa.name===cn.volume?.name&&(ea.range=(ua,Na,Ka)=>[0,Ka*7]),ea))}}let Sa=ra!==hs.Volume&&fa!=null&&Oa!=null;if(!Sa&&!Pa)return Wa;let za={},gs=[];return Sa?za={open:as,high:fa,low:Oa,close:qn}:gs.push(as,qn),Pa&&(za.volume=Sn,za.open=as,za.close=qn),{shouldRenderPrice:Sa,renderers:[{fieldMap:za,indicesOnly:gs,init:(Ht,Ls)=>{Ea=Ls.volume,Ht.addHook("drawAxes",zs({mode:ra,fields:Ls,upColor:ye.config.theme2.visualization.getColorByName(qa.up),downColor:ye.config.theme2.visualization.getColorByName(qa.down),flatColor:ye.config.theme2.visualization.getColorByName(qa.flat),volumeAlpha:oa,colorStrategy:$a,candleStyle:da,flatAsUp:!0}))}}],tweakScale:Nn,tweakAxis:xa}},[tt,Q.structureRev,Q.series.length]);if(!cn)return p.createElement(jn.a,{panelId:ce,fieldConfig:gt,data:Q,needsTimeField:!0,needsNumberField:!0});if(ma)for(let Nn in Qn[0].fieldMap){let xa=cn[Nn];xa.config={...xa.config,custom:{...xa.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const On=!!Rt?.(),$n=!!ye.config.featureToggles.newVizTooltips;return p.createElement(sr,{frames:[cn.frame],structureRev:Q.structureRev,timeRange:he,timeZone:Ae,width:Ke,height:Qe,legend:tt.legend,renderers:Qn,tweakAxis:ca,tweakScale:va,options:tt,replaceVariables:bt,dataLinkPostProcessor:tn},(Nn,xa)=>p.createElement(p.Fragment,null,p.createElement(Zs.Z,{config:Nn}),p.createElement(bo.K,{config:Nn,sync:Tn,eventBus:Yt,frame:xa}),$n?p.createElement(Ja.xl,{config:Nn,hoverMode:tt.tooltip.mode===mt.$N.Single?Ja.b3.xOne:Ja.b3.xAll,queryZoom:yt,clientZoom:!0,syncTooltip:sn,render:(Wa,ka,ra,da=!1,$a,qa,as)=>{if(On&&qa!=null){Kn(qa),$a();return}const fa=()=>{let Oa=Wa.posToVal(Wa.cursor.left,"x");Kn({from:Oa,to:Oa}),$a()};return p.createElement(Yr.k,{frames:[cn.frame],seriesFrame:xa,dataIdxs:ka,seriesIdx:ra,mode:as?mt.$N.Multi:tt.tooltip.mode,sortOrder:tt.tooltip.sort,isPinned:da,annotate:On?fa:void 0,scrollable:Zr(tt.tooltip)})},maxWidth:tt.tooltip.maxWidth,maxHeight:tt.tooltip.maxHeight}):p.createElement(p.Fragment,null,p.createElement(Po.j,{config:Nn,onZoom:yt,withZoomY:!0}),p.createElement(ds.T,{data:xa,config:Nn,mode:mt.$N.Multi,sync:It,timeZone:Ae})),$n?p.createElement(ht.W,{annotations:Q.annotations??[],config:Nn,timeZone:Ae,newRange:ta,setNewRange:Kn}):Q.annotations&&p.createElement(st,{annotations:Q.annotations,config:Nn,timeZone:Ae}),$n?void 0:On?p.createElement(Xo,{data:xa,timeZone:Ae,config:Nn},({startAnnotating:Wa})=>p.createElement(vt,{data:xa,config:Nn,timeZone:Ae,replaceVariables:bt,defaultItems:On?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(ka,ra)=>{ra&&Wa({coords:ra.coords})}}]}]:[]})):p.createElement(vt,{data:xa,config:Nn,timeZone:Ae,replaceVariables:bt,defaultItems:[]}),Q.annotations&&p.createElement(Cn,{config:Nn,exemplars:Q.annotations,timeZone:Ae}),(St&&Nt||Jt)&&p.createElement(Cs,{config:Nn,fieldConfig:gt,onThresholdsChange:St?Nt:void 0}),p.createElement(Gn,{config:Nn,onChangeTimeRange:yt})))};class ba{getSuggestionsForData(ce){const{dataSummary:he}=ce;if(!ce.data?.series||!he.hasData||he.timeFieldCount<1||he.numberFieldCount<2||he.numberFieldCount>10)return;const Ae=qs(ce.data.series,Ss,S.$.theme2);if(!Ae||Ae.open===Ae.high&&Ae.open===Ae.low)return;ce.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:ns.m.Candlestick,options:Ss,fieldConfig:{defaults:{},overrides:[]},score:Ae.autoOpenClose?Rn.nQ.Good:Rn.nQ.Best})}}const Va=[{label:"Candles",value:hs.Candles},{label:"Volume",value:hs.Volume},{label:"Both",value:hs.CandlesVolume}],os=[{label:"Candles",value:As.Candles},{label:"OHLC Bars",value:As.OHLCBars}],ys=[{label:"Since Open",value:is.OpenClose},{label:"Since Prior Close",value:is.CloseClose}],$s=Q=>Q.type===Kt.PU.number;function Fs(Q,ce,he){let Ae="Auto ";if(he){const Ke=he[ce.key];Ke?.config?(Ae+="= "+(0,gn.Ct)(Ke),Ke===he?.open&&ce.key!=="open"&&(Ae+=` (${ce.defaults.join(",")})`)):Ae+=`(${ce.defaults.join(",")})`}Q.addFieldNamePicker({path:`fields.${ce.key}`,name:ce.name,description:ce.description,settings:{filter:$s,placeholderText:Ae}})}const fs=new x.m(ia).useFieldConfig((0,kr.V)(kr.S)).setPanelOptions((Q,ce)=>{const he=ce.options??Ss,Ae=qs(ce.data,he,S.$.theme2);Q.addRadio({path:"mode",name:"Mode",description:"",defaultValue:Ss.mode,settings:{options:Va}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:Ss.candleStyle,settings:{options:os},showIf:Ke=>Ke.mode!==hs.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:Ss.colorStrategy,settings:{options:ys}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:Qs.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:Qs.down}),Fs(Q,Ys.open,Ae),he.mode!==hs.Volume&&(Fs(Q,Ys.high,Ae),Fs(Q,Ys.low,Ae)),Fs(Q,Ys.close,Ae),he.mode!==hs.Candles&&Fs(Q,Ys.volume,Ae),Q.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:Ss.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),S.$.featureToggles.newVizTooltips&&pn.D(Q,!1,!0,he),fn.H(Q)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new ba);var To=e(36607),So=e(76885),nl=e(6709),Uo=e(10096),Ps=e(16021),Mo=e(91219),Tr=e(27677),Gr=e(62301),yi=e(80484);const gu=Q=>({dashlistSectionHeader:(0,j.css)`
    padding: ${Q.spacing(.25,1)};
    margin-right: ${Q.spacing(1)};
  `,dashlistSection:(0,j.css)`
    margin-bottom: ${Q.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:(0,j.css)`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${Q.colors.border.weak};
    margin-right: ${Q.spacing(1)};
    padding: ${Q.spacing(1)};
    align-items: center;

    &:hover {
      a {
        color: ${Q.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistFolder:(0,j.css)`
    color: ${Q.colors.text.secondary};
    font-size: ${Q.typography.bodySmall.fontSize};
    line-height: ${Q.typography.body.lineHeight};
  `,dashlistTitle:(0,j.css)`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:(0,j.css)`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:(0,j.css)`
    position: relative;
    list-style: none;
  `});async function Uc(Q,ce){let he=Promise.resolve([]);if(Q.showStarred){const It={limit:Q.maxItems,starred:"true"};he=(0,Tr.AI)().search(It)}let Ae=Promise.resolve([]),Ke=[];if(Q.showRecentlyViewed){let It=await Gr.A.getDashboardOpened();Ke=(0,w.take)(It,Q.maxItems),Ae=(0,Tr.AI)().search({dashboardUIDs:Ke,limit:Q.maxItems})}let Qe=Promise.resolve([]);if(Q.showSearch){const It=Q.folderUID===""?"general":Q.folderUID,Rt={limit:Q.maxItems,query:ce(Q.query,{},"text"),folderUIDs:It,tag:Q.tags.map(Nt=>ce(Nt,{},"text")),type:"dash-db"};Qe=(0,Tr.AI)().search(Rt)}const[tt,gt,yt]=await Promise.all([he,Qe,Ae]);let bt=new Map;for(const It of Ke){const Rt=yt.find(Nt=>Nt.uid===It);Rt&&bt.set(It,{...Rt,isRecent:!0})}return gt.forEach(It=>{It.uid&&(bt.has(It.uid)?bt.get(It.uid).isSearchResult=!0:bt.set(It.uid,{...It,isSearchResult:!0}))}),tt.forEach(It=>{It.uid&&(bt.has(It.uid)?bt.get(It.uid).isStarred=!0:bt.set(It.uid,{...It,isStarred:!0}))}),bt}function Nc(Q){const[ce,he]=(0,p.useState)(new Map),Ae=(0,F.useDispatch)();(0,p.useEffect)(()=>{Uc(Q.options,Q.replaceVariables).then(Yt=>{he(Yt)})},[Q.options,Q.replaceVariables,Q.renderCounter]);const Ke=async(Yt,Zt)=>{const{uid:sn,title:Tn,url:cn}=Zt;Yt.preventDefault(),Yt.stopPropagation();const ta=await(0,De.UA)().starDashboard(Zt.uid,Zt.isStarred),Kn=new Map(ce);Kn.set(Zt?.uid??"",{...Zt,isStarred:ta}),he(Kn),Ae((0,Mo.ci)({id:sn??"",title:Tn,url:cn,isStarred:ta}))},[Qe,tt,gt]=(0,p.useMemo)(()=>{const Yt=[...ce.values()];return[Yt.filter(Zt=>Zt.isStarred).sort((Zt,sn)=>Zt.title.localeCompare(sn.title)),Yt.filter(Zt=>Zt.isRecent),Yt.filter(Zt=>Zt.isSearchResult).sort((Zt,sn)=>Zt.title.localeCompare(sn.title))]},[ce]),{showStarred:yt,showRecentlyViewed:bt,showHeadings:It,showSearch:Rt}=Q.options,Nt=[{header:"Starred dashboards",dashboards:Qe,show:yt},{header:"Recently viewed dashboards",dashboards:tt,show:bt},{header:"Search",dashboards:gt,show:Rt}],St=(0,ie.of)(gu),Jt=pu(Q),tn=Yt=>p.createElement("ul",null,Yt.map(Zt=>{let sn=Zt.url;return sn=So.kM.appendQueryToUrl(sn,Jt),sn=(0,ye.zj)().disableSanitizeHtml?sn:Fr.sQ.sanitizeUrl(sn),p.createElement("li",{className:St.dashlistItem,key:`dash-${Zt.uid}`},p.createElement("div",{className:St.dashlistLink},p.createElement("div",{className:St.dashlistLinkBody},p.createElement("a",{className:St.dashlistTitle,href:sn},Zt.title),Zt.folderTitle&&p.createElement("div",{className:St.dashlistFolder},Zt.folderTitle)),p.createElement(Co.K,{tooltip:Zt.isStarred?`Unmark "${Zt.title}" as favorite`:`Mark "${Zt.title}" as favorite`,name:Zt.isStarred?"favorite":"star",iconType:Zt.isStarred?"mono":"default",onClick:Tn=>Ke(Tn,Zt)})))}));return p.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},Nt.map(({show:Yt,header:Zt,dashboards:sn},Tn)=>Yt&&p.createElement("div",{className:St.dashlistSection,key:`dash-group-${Tn}`},It&&p.createElement("h6",{className:St.dashlistSectionHeader},Zt),tn(sn))))}function pu(Q){(0,Ps.u)(Uo.lE,yi.og);let ce={};return Q.options.keepTime&&(ce[`$${nl.c.keepTime}`]=!0),Q.options.includeVars&&(ce[`$${nl.c.includeVars}`]=!0),Q.replaceVariables(So.kM.toUrlParams(ce))}async function hu(Q){return Q===0?"":(await(0,Vn.AI)().get(`/api/folders/id/${Q}`,void 0,void 0,{showErrorAlert:!1})).uid}async function vu(Q){const ce={...Q.options,showStarred:Q.options.showStarred??Q.starred,showRecentlyViewed:Q.options.showRecentlyViewed??Q.recent,showSearch:Q.options.showSearch??Q.search,showHeadings:Q.options.showHeadings??Q.headings,maxItems:Q.options.maxItems??Q.limit,query:Q.options.query??Q.query,folderId:Q.options.folderId??Q.folderId,tags:Q.options.tags??Q.tags};if(parseFloat(Q.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Ke=>delete Q[Ke]),ce.folderId!==void 0){const Ae=ce.folderId;try{const Ke=await hu(Ae);ce.folderUID=Ke,delete ce.folderId}catch(Ke){console.warn("Dashlist: Error migrating folder ID to UID",Ke)}}return ce}const Wr={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Eu=new x.m(Nc).setPanelOptions(Q=>{Q.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:Wr.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:Wr.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:Wr.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:Wr.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:Wr.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:Wr.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:Wr.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:Wr.query}).addCustomEditor({path:"folderUID",name:"Folder",id:"folderUID",defaultValue:void 0,editor:function({value:he,onChange:Ae}){return p.createElement(To.d,{clearable:!0,permission:F.PermissionLevelString.View,value:he,onChange:Ke=>Ae(Ke)})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:Wr.tags,editor(ce){return p.createElement(Mt.u,{tags:ce.value,onChange:ce.onChange})}})}).setMigrationHandler(vu);var yu=e(47187),Ga=e(14110),Zo=e(11503);const rr=({onBlur:Q,placeholder:ce})=>{const he=(0,p.useRef)(null);(0,p.useEffect)(()=>{he.current&&he.current.focus()});const Ae=Ke=>{Ke.key==="Enter"&&Ke.currentTarget.blur()};return p.createElement("input",{type:"text",placeholder:ce,onBlur:Q,ref:he,onKeyDown:Ae,"data-testid":"column-input"})},wc=({divStyle:Q,onColumnInputBlur:ce})=>{const[he,Ae]=(0,p.useState)(!1),Ke=()=>{Ae(!0)},Qe=tt=>{const gt=tt.target.value;gt&&ce(gt),Ae(!1)};return p.createElement("div",{className:Q},he?p.createElement(rr,{placeholder:"Column Name",onBlur:Qe}):p.createElement("button",{onClick:Ke},"+"))};var hr=e(27183),ro=e(69321);const or=()=>S.$.featureToggles.enableDatagridEditing,Fc="600 13px Inter",Du="400 13px Inter",vr=document.createElement("canvas"),Wc=20,Qa=300,bu=65,Pu="both",Cu="number",Xl={isContextMenuOpen:!1},Tu={isInputOpen:!1},Js="datagrid_panel",js={EDIT_CELL:"edit_cell",GRID_SELECTED:"grid_selected",APPEND_ROW:"append_row",APPEND_COLUMN:"append_column",DELETE_BTN_PRESSED:"delete_btn_pressed",COLUMN_RESIZE:"column_resize",COLUMN_REORDER:"column_reorder",ROW_REORDER:"row_reorder",CONTEXT_MENU_ACTION:"context_menu_action",HEADER_MENU_ACTION:"header_menu_action"},Su={name:"A",fields:[],length:0},Mu={kind:ro.dd.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},Kc={columns:ro.I1.empty(),rows:ro.I1.empty()},xu={sticky:!1,tint:!0},Ou={fill:!0,sticky:!1};async function No(Q,ce){if(ce&&or()){for(let he=0;he<Q.fields.length;he++)delete Q.fields[he].config.displayName,delete Q.fields[he].config.displayNameFromDS;return await ce([Q])}return!1}const Sr=(Q,ce=!1)=>{const he=vr.getContext("2d");return he.font=ce?Fc:Du,he.measureText(Q).width},Iu=Q=>Math.max(Sr(Q.name,!0)+bu,Math.min(Qa,Q.values.toArray().reduce((ce,he)=>{const Ae=Sr(he?.toString()??"");return Ae>ce?Ae:ce},0)+Wc)),Ui=(Q,ce,he=!1)=>{const Ae={...Q,fields:Q.fields.map(Ke=>({...Ke,values:Ke.values.slice()}))};for(const Ke of Ae.fields){const Qe=Ke.values.toArray();for(let tt=ce.length-1;tt>=0;tt--)he?Qe.splice(ce[tt],1):Qe.splice(ce[tt],1,null);Ke.values=[...Qe]}return{...Ae,length:Ae.fields[0]?.values.length??0}},Au=(Q,ce)=>{const he=ce.x,Ae=ce.y,Ke=ce.x+ce.width-1,Qe={...Q,fields:Q.fields.map(tt=>({...tt,values:tt.values.slice()}))};for(let tt=he;tt<=Ke;tt++){const gt=Qe.fields[tt],yt=gt.values.toArray();yt.splice(Ae,ce.height,...new Array(ce.height).fill(null)),gt.values=[...yt]}return{...Qe,length:Qe.fields[0]?.values.length??0}},Ru=Q=>{const ce=Q.values.toArray();Q.values=ce.map(he=>he==="undefined"||he==="null"?null:he)};function wo(Q){return{accentColor:Q.colors.primary.main,accentFg:Q.colors.secondary.main,textDark:Q.colors.text.primary,textMedium:Q.colors.text.secondary,textLight:Q.colors.text.secondary,textBubble:Q.colors.text.primary,textHeader:Q.colors.text.primary,bgCell:Q.colors.background.primary,bgCellMedium:Q.colors.background.primary,bgHeader:Q.colors.background.primary,bgHeaderHasFocus:Q.colors.background.secondary,bgHeaderHovered:Q.colors.background.secondary,linkColor:Q.colors.text.link,fontFamily:Q.typography.fontFamily,headerFontStyle:`${Q.typography.fontWeightMedium} ${Q.typography.fontSize}px`,fgIconHeader:Q.colors.secondary.contrastText,bgIconHeader:Q.colors.secondary.main}}const Lu=(Q,ce,he=!1)=>{const Ae=Q.values.get(ce);switch(Q.type){case Kt.PU.boolean:return{kind:ro.dd.Boolean,data:Ae||!1,allowOverlay:!1,readonly:!1};case Kt.PU.number:return{kind:ro.dd.Number,data:Ae||0,allowOverlay:or()&&!he,readonly:!1,displayData:Ae!=null?Ae.toString():""};case Kt.PU.string:return{kind:ro.dd.Text,data:Ae||"",allowOverlay:or()&&!he,readonly:!1,displayData:Ae!=null?Ae.toString():""};default:return{kind:ro.dd.Text,data:Ae||"",allowOverlay:or()&&!he,readonly:!1,displayData:Ae!=null?Ae.toString():""}}},vl=(Q,ce)=>({dataEditor:(0,j.css)`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${Q.colors.background.secondary} ${Q.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${Q.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:(0,j.css)`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${Q.colors.background.primary};
      button {
        pointer-events: ${ce?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${Q.colors.background.primary};
        color: ${Q.colors.text.primary};
        border-right: 1px solid ${Q.components.panel.borderColor};
        border-bottom: 1px solid ${Q.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${Q.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${Q.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:(0,j.css)`
      height: 37px;
      border: 1px solid ${Q.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),Zl=Q=>Q.rows.length||Q.columns.length?!0:Q.current===void 0?!1:Q.current.range&&!(Q.current.range.height===1&&Q.current.range.width===1);var ir=(Q=>(Q.columnResizeStart="columnResizeStart",Q.columnResizeEnd="columnResizeEnd",Q.columnMove="columnMove",Q.updateColumns="updateColumns",Q.showColumnRenameInput="showColumnRenameInput",Q.hideColumnRenameInput="hideColumnRenameInput",Q.openCellContextMenu="openCellContextMenu",Q.openHeaderContextMenu="openHeaderContextMenu",Q.openHeaderDropdownMenu="openHeaderDropdownMenu",Q.closeContextMenu="closeContextMenu",Q.multipleCellsSelected="multipleCellsSelected",Q.gridSelectionCleared="gridSelectionCleared",Q.columnFreezeReset="columnFreezeReset",Q.columnFreezeChanged="columnFreezeChanged",Q.openSearch="openSearch",Q.closeSearch="closeSearch",Q))(ir||{});const Us={columns:[],contextMenuData:Xl,renameColumnInputData:Tu,gridSelection:Kc,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},$c=new Map([[Kt.PU.number,ro.Gf.HeaderNumber],[Kt.PU.string,ro.Gf.HeaderTextTemplate],[Kt.PU.boolean,ro.Gf.HeaderBoolean],[Kt.PU.time,ro.Gf.HeaderDate],[Kt.PU.other,ro.Gf.HeaderReference]]),vs=(Q,ce)=>{let he=[];switch(ce.type){case"columnResizeStart":he=[...Q.columns];const Ae=ce.payload;return he[Ae.columnIndex]={...Q.columns[Ae.columnIndex],width:Ae.width},{...Q,columns:he,isResizeInProgress:!0};case"columnMove":he=[...Q.columns];const Ke=ce.payload,Qe=Q.columns[Ke.from].width;let tt=he.splice(Ke.from,1)[0];return tt={...tt,width:Qe},he.splice(Ke.to,0,tt),{...Q,columns:he};case"columnResizeEnd":return{...Q,isResizeInProgress:!1};case"updateColumns":const gt=ce.payload;return he=[...gt.frame.fields.map((Zt,sn)=>{const Tn=Q.columns.find(ta=>ta.title===Zt.name)?.width;return{title:(0,gn.Ct)(Zt,gt.frame),width:Tn??Iu(Zt),icon:$c.get(Zt.type),hasMenu:or(),trailingRowOptions:{targetColumn:--sn}}})],{...Q,columns:he};case"showColumnRenameInput":return{...Q,renameColumnInputData:{...Q.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...Q,renameColumnInputData:{...Q.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const yt=ce.payload,bt=yt.event,It=yt.cell;return{...Q,contextMenuData:{x:bt.bounds.x+bt.localEventX,y:bt.bounds.y+bt.localEventY,column:It[0]===-1?void 0:It[0],row:It[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const Rt=ce.payload,Nt=Rt.event;return{...Q,contextMenuData:{x:Nt.bounds.x+Nt.localEventX,y:Nt.bounds.y+Nt.localEventY,column:Rt.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const St=ce.payload,Jt=St.screenPosition;return{...Q,contextMenuData:{x:Jt.x+Jt.width,y:Jt.y+Jt.height,column:St.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:Jt.x,y:Jt.y,width:Jt.width,height:Jt.height,columnIdx:St.columnIndex,isInputOpen:!1,inputValue:St.value}};case"closeContextMenu":return{...Q,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...Q,toggleSearch:!1};case"openSearch":return{...Q,toggleSearch:!0};case"multipleCellsSelected":const tn=ce.payload;return{...Q,gridSelection:tn.selection};case"gridSelectionCleared":return{...Q,gridSelection:Kc};case"columnFreezeReset":return{...Q,columnFreezeIndex:0};case"columnFreezeChanged":const Yt=ce.payload;return{...Q,columnFreezeIndex:Yt.columnIndex};default:return Q}},Bn=({menuData:Q,data:ce,saveData:he,closeContextMenu:Ae,dispatch:Ke,gridSelection:Qe,columnFreezeIndex:tt,renameColumnClicked:gt})=>{let yt=[],bt=[];const{row:It,column:Rt,x:Nt,y:St,isHeaderMenu:Jt}=Q;Qe.rows&&(yt=Qe.rows.toArray()),Qe.columns&&(bt=Qe.columns.toArray());let tn="Delete row";yt.length&&yt.length>1&&(tn=`Delete ${yt.length} rows`);let Yt="Delete column";bt.length&&bt.length>1&&(Yt=`Delete ${bt.length} columns`);const Zt=It!==void 0&&It>=0||yt.length,sn=Rt!==void 0&&Rt>=0&&It!==void 0||bt.length,Tn=It!==void 0&&It>=0&&!yt.length,cn=Rt!==void 0&&Rt>=0&&It!==void 0&&!bt.length,ta=()=>p.createElement(p.Fragment,null,Zt?p.createElement(Ge.D,{label:tn,onClick:()=>{if(yt.length){he(Ui(ce,yt,!0)),Ke({type:ir.gridSelectionCleared});return}It!==void 0&&It>=0&&((0,Ga.rR)(Js,{item:js.CONTEXT_MENU_ACTION,menu_action:"row_delete"}),he(Ui(ce,[It],!0)))}}):null,sn?p.createElement(Ge.D,{label:Yt,onClick:()=>{if(bt.length){he({...ce,fields:ce.fields.filter((Qn,va)=>!bt.includes(va))}),Ke({type:ir.gridSelectionCleared});return}Rt!==void 0&&Rt>=0&&((0,Ga.rR)(Js,{item:js.CONTEXT_MENU_ACTION,menu_action:"column_delete"}),he({...ce,fields:ce.fields.filter((Qn,va)=>va!==Rt)}))}}):null,sn||Zt?p.createElement(hr.N,null):null,Tn?p.createElement(Ge.D,{label:"Clear row",onClick:()=>{(0,Ga.rR)(Js,{item:js.CONTEXT_MENU_ACTION,menu_action:"row_clear"}),he(Ui(ce,[It]))}}):null,cn?p.createElement(Ge.D,{label:"Clear column",onClick:()=>{const Qn=ce.fields[Rt];Qn.values=Qn.values.map(()=>null),(0,Ga.rR)(Js,{item:js.CONTEXT_MENU_ACTION,menu_action:"column_clear"}),he({...ce})}}):null,Tn||cn?p.createElement(hr.N,null):null,p.createElement(Ge.D,{label:"Remove all data",onClick:()=>{(0,Ga.rR)(Js,{item:js.CONTEXT_MENU_ACTION,menu_action:"remove_all"}),he(Su)}}),p.createElement(Ge.D,{label:"Search...",onClick:()=>{(0,Ga.rR)(Js,{item:js.CONTEXT_MENU_ACTION,menu_action:"open_search"}),Ke({type:ir.openSearch})}})),Kn=()=>{if(Rt==null)return null;const Qn=ce.fields[Rt].type,va=[],ca=$n=>{va.push({label:(0,w.capitalize)($n),options:{targetField:ce.fields[Rt].name,destinationType:$n}})};Qn===Kt.PU.string?(ca(Kt.PU.number),ca(Kt.PU.boolean)):Qn===Kt.PU.number?(ca(Kt.PU.string),ca(Kt.PU.boolean)):Qn===Kt.PU.boolean?(ca(Kt.PU.number),ca(Kt.PU.string)):(ca(Kt.PU.string),ca(Kt.PU.number),ca(Kt.PU.boolean));let ma="Set column freeze position";const On=Rt+1;return tt===On&&(ma="Unset column freeze"),p.createElement(p.Fragment,null,va.length?p.createElement(Ue.r,{label:"Set field type"},va.map(($n,Nn)=>p.createElement(Ge.D,{key:Nn,label:$n.label,onClick:()=>{const xa=(0,Eo.s7)(ce.fields[Rt],$n.options);$n.options.destinationType===Kt.PU.string&&Ru(xa);const Wa={name:ce.name,fields:[...ce.fields],length:ce.length};Wa.fields[Rt]=xa,(0,Ga.rR)(Js,{item:js.HEADER_MENU_ACTION,menu_action:"convert_field"}),he(Wa)}}))):null,p.createElement(hr.N,null),p.createElement(Ge.D,{label:ma,onClick:()=>{(0,Ga.rR)(Js,{item:js.HEADER_MENU_ACTION,menu_action:"column_freeze"}),Ke(tt===On?{type:ir.columnFreezeReset}:{type:ir.columnFreezeChanged,payload:{columnIndex:On}})}}),p.createElement(Ge.D,{label:"Rename column",onClick:gt}),p.createElement(hr.N,null),p.createElement(Ge.D,{label:"Delete column",onClick:()=>{(0,Ga.rR)(Js,{item:js.HEADER_MENU_ACTION,menu_action:"delete_column"}),he({...ce,fields:ce.fields.filter(($n,Nn)=>Nn!==Rt)}),Ke({type:ir.gridSelectionCleared})}}),p.createElement(Ge.D,{label:"Clear column",onClick:()=>{const $n=ce.fields[Rt];$n.values=$n.values.map(()=>null),(0,Ga.rR)(Js,{item:js.HEADER_MENU_ACTION,menu_action:"clear_column"}),he({...ce})}}))};return p.createElement(ct.t,{renderMenuItems:Jt?Kn:ta,x:Nt,y:St,onClose:Ae})},Vc=({renameColumnData:Q,onColumnInputBlur:ce,classStyle:he})=>{const{x:Ae,y:Ke,width:Qe,height:tt,inputValue:gt,columnIdx:yt}=Q,[bt,It]=(0,p.useState)({}),[Rt,Nt]=(0,p.useState)(gt),St=(0,p.useRef)(null);(0,p.useLayoutEffect)(()=>{St.current?.focus();const Zt=St.current?.getBoundingClientRect();if(Zt){const sn={right:window.innerWidth<Ae+Zt.width,bottom:window.innerHeight<Ke+Zt.height};It({position:"fixed",left:sn.right?Ae-Zt.width:Ae,top:sn.bottom?Ke-Zt.height:Ke,width:Qe,height:tt})}},[tt,Qe,Ae,Ke]);const Jt=Zt=>{const sn=Zt.target.value;sn&&ce(sn,yt)},tn=Zt=>{Nt(Zt.target.value)},Yt=Zt=>{Zt.key==="Enter"&&Zt.currentTarget.blur()};return p.createElement(Ns.ZL,null,p.createElement("input",{type:"text",className:he,value:Rt,onBlur:Jt,ref:St,style:bt,onChange:tn,onKeyDown:Yt}))};function Bu({options:Q,data:ce,id:he,fieldConfig:Ae,width:Ke,height:Qe}){const[tt,gt]=(0,p.useReducer)(vs,Us),{onUpdateData:yt}=(0,ga.d2)(),{columns:bt,contextMenuData:It,renameColumnInputData:Rt,gridSelection:Nt,columnFreezeIndex:St,toggleSearch:Jt,isResizeInProgress:tn}=tt,Yt=ce.series[Q.selectedSeries??0],Zt=(0,ie.$j)(),sn=wo(Zt);(0,p.useEffect)(()=>{Yt&&gt({type:ir.updateColumns,payload:{frame:Yt}})},[Yt]);const Tn=([fa,Oa])=>{const qn=Yt.fields[fa];return!qn||Oa>Yt.length?Mu:Lu(qn,Oa,Zl(Nt))},cn=(fa,Oa)=>{if(Zl(Nt))return;const[qn,Sn]=fa,oa={...Yt,fields:Yt.fields.map(Sa=>({...Sa,values:[...Sa.values]}))},Ea=oa.fields[qn];if(!Ea)return;const Pa=Ea.values.toArray();Pa[Sn]=Oa.data,Ea.values=[...Pa],(0,Ga.rR)(Js,{item:js.EDIT_CELL}),No(oa,yt)},ta=fa=>{const Oa=Yt.length??0;(0,Ga.rR)(Js,{item:js.APPEND_COLUMN}),No({...Yt,fields:[...Yt.fields,{name:fa,type:Kt.PU.string,config:{},values:new Array(Oa).fill("")}]},yt)},Kn=()=>{const fa=Yt.fields.map(Oa=>{const qn=Oa.values.slice();return qn.push(null),{...Oa,values:qn}});(0,Ga.rR)(Js,{item:js.APPEND_ROW}),No({...Yt,fields:fa,length:Yt.length+1},yt)},Qn=(fa,Oa,qn,Sn)=>{(0,Ga.rR)(Js,{item:js.COLUMN_RESIZE}),gt({type:ir.columnResizeStart,payload:{columnIndex:qn,width:Oa}})},va=(fa,Oa,qn,Sn)=>{gt({type:ir.columnResizeEnd})},ca=()=>{gt({type:ir.closeContextMenu})},ma=fa=>{if(fa.current&&fa.current.range)return(0,Ga.rR)(Js,{item:js.DELETE_BTN_PRESSED,selection:"grid-cell"}),No(Au(Yt,fa.current.range),yt),!0;const Oa=fa.rows.toArray(),qn=fa.columns.toArray();if(Oa.length)return(0,Ga.rR)(Js,{item:js.DELETE_BTN_PRESSED,selection:"rows"}),No(Ui(Yt,Oa),yt),!0;if(qn.length){const Sn={...Yt,fields:Yt.fields.map((oa,Ea)=>qn.includes(Ea)?{...oa,values:new Array(Yt.length).fill(null)}:oa)};return(0,Ga.rR)(Js,{item:js.DELETE_BTN_PRESSED,selection:"columns"}),No(Sn,yt),!0}return!1},On=(fa,Oa)=>{Oa.preventDefault(),gt({type:ir.openCellContextMenu,payload:{event:Oa,cell:fa}})},$n=(fa,Oa)=>{Oa.preventDefault(),gt({type:ir.openHeaderContextMenu,payload:{event:Oa,columnIndex:fa}})},Nn=(fa,Oa)=>{gt({type:ir.openHeaderDropdownMenu,payload:{screenPosition:Oa,columnIndex:fa,value:tt.columns[fa].title}})},xa=async(fa,Oa)=>{const qn=Yt.fields.map(Ea=>Ea),Sn=qn[fa];qn.splice(fa,1),qn.splice(Oa,0,Sn),await No({...Yt,fields:qn},yt)&&((0,Ga.rR)(Js,{item:js.COLUMN_REORDER}),gt({type:ir.columnMove,payload:{from:fa,to:Oa}}))},Wa=(fa,Oa)=>{const qn=Yt.fields.map(Sn=>({...Sn,values:Sn.values.slice()}));for(const Sn of qn){const oa=Sn.values[fa];Sn.values.splice(fa,1),Sn.values.splice(Oa,0,oa)}(0,Ga.rR)(Js,{item:js.ROW_REORDER}),No({...Yt,fields:qn},yt)},ka=()=>{(0,Ga.rR)(Js,{item:js.HEADER_MENU_ACTION,menu_action:"rename_column"}),gt({type:ir.showColumnRenameInput})},ra=(fa,Oa)=>{const qn=Yt.fields.map(Sn=>Sn);qn[Oa].name=fa,gt({type:ir.hideColumnRenameInput}),No({...Yt,fields:qn},yt)},da=()=>{gt({type:ir.closeSearch})},$a=fa=>{(0,Ga.rR)(Js,{item:js.GRID_SELECTED}),gt({type:ir.multipleCellsSelected,payload:{selection:fa}})},qa=fa=>{No(fa,yt)};if(!Yt)return p.createElement(jn.a,{panelId:he,fieldConfig:Ae,data:ce});if(!or())return p.createElement(jn.a,{panelId:he,message:"Datagrid is not enabled",fieldConfig:Ae,data:ce});if(!document.getElementById("portal")){const fa=document.createElement("div");fa.id="portal",document.body.appendChild(fa)}const as=vl(Zt,tn);return p.createElement(p.Fragment,null,p.createElement(yu.D,{className:as.dataEditor,getCellContent:Tn,columns:bt,rows:Yt.length,width:Ke,height:Qe,initialSize:[Ke,Qe],theme:sn,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:or()?cn:void 0,getCellsForSelection:or()?!0:void 0,showSearch:or()?Jt:!1,onSearchClose:da,gridSelection:Nt,onGridSelectionChange:or()?$a:void 0,onRowAppended:or()?Kn:void 0,onDelete:or()?ma:void 0,rowMarkers:or()?Pu:Cu,onColumnResize:Qn,onColumnResizeEnd:va,onCellContextMenu:or()?On:void 0,onHeaderContextMenu:or()?$n:void 0,onHeaderMenuClick:or()?Nn:void 0,trailingRowOptions:xu,rightElement:or()?p.createElement(wc,{onColumnInputBlur:ta,divStyle:as.addColumnDiv}):null,rightElementProps:Ou,freezeColumns:St,onRowMoved:or()?Wa:void 0,onColumnMoved:or()?xa:void 0}),It.isContextMenuOpen&&p.createElement(Bn,{menuData:It,data:Yt,saveData:qa,closeContextMenu:ca,dispatch:gt,gridSelection:Nt,columnFreezeIndex:St,renameColumnClicked:ka}),Rt.isInputOpen?p.createElement(Vc,{onColumnInputBlur:ra,renameColumnData:Rt,classStyle:as.renameColumnInput}):null)}const _c={selectedSeries:0},Uu=new x.m(Bu).setPanelOptions((Q,ce)=>{const he=ce.data.map((Ae,Ke)=>({value:Ke,label:Ae.refId}));return ce.options&&!he.map(Ae=>Ae.value).includes(ce.options.selectedSeries??0)&&(ce.options.selectedSeries=_c.selectedSeries),Q.addSelect({path:"selectedSeries",name:"Select series",defaultValue:_c.selectedSeries,settings:{options:he}})});class El extends p.Component{constructor(){super(...arguments),this.subscription=new _t.yU,this.state={}}componentDidMount(){const{eventBus:ce}=this.props;this.subscription.add(ce.subscribe(en.b_,he=>{this.setState({event:he})})),this.subscription.add(ce.subscribe(en.ql,he=>{this.setState({event:he})})),this.subscription.add(ce.subscribe(dn.kb,he=>{this.setState({event:he})})),this.subscription.add(ce.subscribe(dn.Tq,he=>{this.setState({event:he})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:ce}=this.state;if(!ce)return p.createElement("div",null,"no events yet");const{type:he,payload:Ae,origin:Ke}=ce;return p.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},p.createElement("h3",null,"Origin: ",Ke?.path),p.createElement("span",null,"Type: ",he),!!Ae&&p.createElement(p.Fragment,null,p.createElement("pre",null,JSON.stringify(Ae.point,null,"  ")),Ae.data&&p.createElement(ws.e,{data:Ae.data,rowIndex:Ae.rowIndex,columnIndex:Ae.columnIndex})))}}var al=e(36120);let yl=100;class Ni extends p.PureComponent{constructor(ce){super(ce),this.history=new al.$({capacity:40,append:"head"}),this.eventObserver={next:Ae=>{const Ke=Ae.origin;this.history.add({key:yl++,type:Ae.type,path:Ke?.path,payload:Ae.payload}),this.setState({counter:yl})}},this.state={counter:yl};const he=[];he.push(ce.eventBus.getStream(en.b_).subscribe(this.eventObserver)),he.push(ce.eventBus.getStream(en.ql).subscribe(this.eventObserver)),he.push(ce.eventBus.getStream(en.LO).subscribe(this.eventObserver)),this.subs=he}componentWillUnmount(){for(const ce of this.subs)ce.unsubscribe()}render(){return p.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((ce,he)=>p.createElement("div",{key:ce.key},JSON.stringify(ce.path)," ",ce.type," / X:",JSON.stringify(ce.payload.x)," / Y:",JSON.stringify(ce.payload.y))))}}var qo=e(75059);class ql extends p.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(ce){const{data:he,options:Ae}=this.props;if(ce.data!==he&&(this.counters.dataChanged++,Ae.counters?.schemaChanged)){const Ke=ce.data?.series,Qe=he.series;Qe&&Ke&&((0,Zn.J3)(Qe,Ke,Zn.bW)||this.counters.schemaChanged++)}return!0}render(){const{data:ce,options:he}=this.props,Ae=he.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const Ke=Date.now(),Qe=Ke-this.lastRender;this.lastRender=Ke;const tt=qo.AS.get(qo.gy.lastNotNull);return p.createElement("div",null,p.createElement("div",null,p.createElement(Co.K,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),p.createElement("span",null,Ae.render&&p.createElement("span",null,"Render: ",this.counters.render,"\xA0"),Ae.dataChanged&&p.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),Ae.schemaChanged&&p.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),p.createElement("span",null,"TIME: ",Qe,"ms"))),ce.series&&ce.series.map((gt,yt)=>p.createElement("div",{key:`${yt}/${gt.refId}`},p.createElement("h4",null,(0,gn.Ri)(gt,yt)," (",gt.length,")"),p.createElement("table",{className:"filter-table"},p.createElement("thead",null,p.createElement("tr",null,p.createElement("td",null,"Field"),p.createElement("td",null,"Type"),p.createElement("td",null,"Last"))),p.createElement("tbody",null,gt.fields.map((bt,It)=>{const Rt=tt.reduce(bt,!1,!1)[tt.id];return p.createElement("tr",{key:`${It}/${bt.name}`},p.createElement("td",null,(0,gn.Ct)(bt,gt,ce.series)),p.createElement("td",null,bt.type),p.createElement("td",null,`${Rt}`))}))))))}}var Nu=e(10354);function wu(Q){const ce=(0,ga.d2)(),he=Ae=>{ce.onInstanceStateChange({name:Ae.currentTarget.value})};return p.createElement(p.Fragment,null,p.createElement(Hr.D,{label:"State name"},p.createElement(Nu.p,{value:ce.instanceState?.name??"",onChange:he})))}function Fu({value:Q,context:ce,onChange:he,item:Ae}){return p.createElement("div",null,"Current value: ",ce.instanceState?.name," ")}var Mr=(Q=>(Q.Cursor="cursor",Q.Events="events",Q.Render="render",Q.State="State",Q.ThrowError="ThrowError",Q))(Mr||{});class Wu extends p.Component{render(){const{options:ce}=this.props;switch(ce.mode){case Mr.Events:return p.createElement(Ni,{eventBus:this.props.eventBus});case Mr.Cursor:return p.createElement(El,{eventBus:this.props.eventBus});case Mr.State:return p.createElement(wu,{...this.props});case Mr.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return p.createElement(ql,{...this.props})}}}const Ku=new x.m(Wu).useFieldConfig().setPanelOptions(Q=>{Q.addSelect({path:"mode",name:"Mode",defaultValue:Mr.Render,settings:{options:[{label:"Render",value:Mr.Render},{label:"Events",value:Mr.Events},{label:"Cursor",value:Mr.Cursor},{label:"Cursor",value:Mr.Cursor},{label:"Share state",value:Mr.State},{label:"Throw error",value:Mr.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:ce})=>ce===Mr.State,editor:Fu}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:ce})=>ce===Mr.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:ce})=>ce===Mr.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:ce})=>ce===Mr.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var ec=e(76365),$u=e(85194);function Dl(Q,ce={}){(0,Ga.rR)(`grafana_flamegraph_${Q}`,{app:O.Jk.Unknown,grafana_version:S.$.buildInfo.version,...ce})}const Vu=Q=>{const ce=(0,ec.oA)(Q.data.series[0]);return ce?p.createElement(jn.a,{panelId:Q.id,data:Q.data,message:(0,ec.Ik)(ce)}):p.createElement($u.A,{data:Q.data.series[0],stickyHeader:!1,getTheme:()=>S.$.theme2,showFlameGraphOnly:Q.options?.showFlameGraphOnly??!1,onTableSymbolClick:()=>Dl("table_item_selected"),onViewSelected:he=>Dl("view_selected",{view:he}),onTextAlignSelected:he=>Dl("text_align_selected",{align:he}),onTableSort:he=>Dl("table_sort_selected",{sort:he}),disableCollapsing:!S.$.featureToggles.flameGraphItemCollapsing})};class _u{getListWithDefaults(ce){return ce.getListAppender({name:ns.m.FlameGraph,pluginId:"flamegraph"})}getSuggestionsForData(ce){if(!ce.data)return;const he=ce.data.series[0];!he||(0,ec.oA)(he)||this.getListWithDefaults(ce).append({name:ns.m.FlameGraph})}}const zc=new x.m(Vu).setSuggestionsSupplier(new _u);var zu=e(14738),ku=e(62930);const kc=(Q,ce)=>{const he="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",Ae=ce?he:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Ke=ce?he:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",Qe=Q.isDark?Ae:Ke;return`
      background-color: ${Q.colors.background.secondary};
      margin-right: ${Q.spacing(4)};
      border: 1px solid ${Q.colors.border.weak};
      border-bottom-left-radius: ${Q.shape.borderRadius(2)};
      border-bottom-right-radius: ${Q.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${Q.breakpoints.down("xxl")} {
        margin-right: ${Q.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${Qe};
      }
`},Hc=(0,j.css)`
  padding: 16px;
`,bl=({card:Q})=>{const ce=(0,ie.of)(jc,Q.done);return p.createElement("div",{className:ce.card},p.createElement("div",{className:Hc},p.createElement("a",{href:`${Q.href}?utm_source=grafana_gettingstarted`,className:ce.url,onClick:()=>(0,Ga.rR)("grafana_getting_started_docs",{title:Q.title,link:Q.href})},p.createElement("div",{className:ce.heading},Q.done?"complete":Q.heading),p.createElement("h4",{className:ce.title},Q.title))),p.createElement("a",{href:`${Q.learnHref}?utm_source=grafana_gettingstarted`,className:ce.learnUrl,target:"_blank",rel:"noreferrer",onClick:()=>(0,Ga.rR)("grafana_getting_started_docs",{title:Q.title,link:Q.learnHref})},"Learn how in the docs ",p.createElement(N.I,{name:"external-link-alt"})))},jc=(Q,ce)=>({card:(0,j.css)`
      ${kc(Q,ce)}

      min-width: 230px;

      ${Q.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:(0,j.css)`
      text-transform: uppercase;
      color: ${ce?Q.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${Q.spacing(2)};
    `,title:(0,j.css)`
      margin-bottom: ${Q.spacing(2)};
    `,url:(0,j.css)`
      display: inline-block;
    `,learnUrl:(0,j.css)`
      border-top: 1px solid ${Q.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var Pl=e(33390);const Cl=({card:Q})=>{const ce=(0,ie.of)(ju,Q.done);return p.createElement("a",{className:ce.card,target:"_blank",rel:"noreferrer",href:`${Q.href}?utm_source=grafana_gettingstarted`,onClick:he=>Hu(he,Q)},p.createElement("div",{className:Hc},p.createElement("div",{className:ce.type},Q.type),p.createElement("div",{className:ce.heading},Q.done?"complete":Q.heading),p.createElement("h4",{className:ce.cardTitle},Q.title),p.createElement("div",{className:ce.info},Q.info)))},Hu=(Q,ce)=>{Q.preventDefault(),Pl.A.get(ce.key)||Pl.A.set(ce.key,!0),(0,Ga.rR)("grafana_getting_started_tutorial",{title:ce.title})},ju=(Q,ce)=>({card:(0,j.css)`
      ${kc(Q,ce)}
      width: 460px;
      min-width: 460px;

      ${Q.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${Q.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:(0,j.css)`
      color: ${Q.colors.primary.text};
      text-transform: uppercase;
    `,heading:(0,j.css)`
      text-transform: uppercase;
      color: ${Q.colors.primary.text};
      margin-bottom: ${Q.spacing(1)};
    `,cardTitle:(0,j.css)`
      margin-bottom: ${Q.spacing(2)};
    `,info:(0,j.css)`
      margin-bottom: ${Q.spacing(2)};
    `,status:(0,j.css)`
      display: flex;
      justify-content: flex-end;
    `}),Gu=({step:Q})=>{const ce=(0,ie.of)(mr);return p.createElement("div",{className:ce.setup},p.createElement("div",{className:ce.info},p.createElement("h2",{className:ce.title},Q.title),p.createElement("p",null,Q.info)),p.createElement("div",{className:ce.cards},Q.cards.map((he,Ae)=>{const Ke=`${he.title}-${Ae}`;return he.type==="tutorial"?p.createElement(Cl,{key:Ke,card:he}):p.createElement(bl,{key:Ke,card:he})})))},mr=Q=>({setup:(0,j.css)({display:"flex",width:"95%"}),info:(0,j.css)({width:"172px",marginRight:"5%",[Q.breakpoints.down("xxl")]:{marginRight:Q.spacing(4)},[Q.breakpoints.down("sm")]:{display:"none"}}),title:(0,j.css)({color:Q.v1.palette.blue95}),cards:(0,j.css)({overflowX:"auto",overflowY:"hidden",width:"100%",display:"flex",justifyContent:"flex-start"})});var Qu=e(31193);const Gc="Grafana fundamentals",Yu="Create users and teams",Ju="getting.started.",Qc=`${Ju}${Gc.replace(" ","-").trim().toLowerCase()}`,Yc=`${Ju}${Yu.replace(" ","-").trim().toLowerCase()}`,wi=()=>[{heading:"Welcome to SyncCity",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:Gc,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(Pl.A.get(Qc)),key:Qc,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(Q=>{Q((0,Qu.tR)().getMetricSources().filter(ce=>ce.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Tr.AI)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Yc,check:()=>Promise.resolve(Pl.A.get(Yc)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const Q=await(0,Tr.AI)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(Q.length>0)},done:!1}]}];class Fi extends p.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:wi()},this.onForwardClick=()=>{(0,Ga.rR)("grafana_getting_started_button_to_advanced_tutorials"),this.setState(ce=>({currentStep:ce.currentStep+1}))},this.onPreviousClick=()=>{(0,Ga.rR)("grafana_getting_started_button_to_basic_tutorials"),this.setState(ce=>({currentStep:ce.currentStep-1}))},this.dismiss=()=>{const{id:ce}=this.props,he=(0,De.UA)().getCurrent(),Ae=he?.getPanelById(ce);(0,Ga.rR)("grafana_getting_started_remove_panel"),he?.removePanel(Ae),Tr.IB.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Ke=>{Uo.TP.user.helpFlags1=Ke.helpFlags1})}}async componentDidMount(){const{steps:ce}=this.state,he=ce.map(async Ke=>{const Qe=Ke.cards.map(async gt=>gt.check().then(yt=>({...gt,done:yt}))),tt=await Promise.all(Qe);return{...Ke,done:tt.every(gt=>gt.done),cards:tt}}),Ae=await Promise.all(he);this.setState({currentStep:Ae[0].done?1:0,steps:Ae,checksDone:!0})}render(){const{checksDone:ce,currentStep:he,steps:Ae}=this.state,Ke=Xu(),Qe=Ae[he];return p.createElement("div",{className:Ke.container},ce?p.createElement(p.Fragment,null,p.createElement(R.$n,{variant:"secondary",fill:"text",className:Ke.dismiss,onClick:this.dismiss},"Remove this panel"),he===Ae.length-1&&p.createElement(R.$n,{className:(0,j.cx)(Ke.backForwardButtons,Ke.previous),onClick:this.onPreviousClick,"aria-label":"To basic tutorials",icon:"angle-left",variant:"secondary"}),p.createElement("div",{className:Ke.content},p.createElement(Gu,{step:Qe})),he<Ae.length-1&&p.createElement(R.$n,{className:(0,j.cx)(Ke.backForwardButtons,Ke.forward),onClick:this.onForwardClick,"aria-label":"To advanced tutorials",icon:"angle-right",variant:"secondary"})):p.createElement("div",{className:Ke.loading},p.createElement("div",{className:Ke.loadingText},"Checking completed setup steps"),p.createElement(ku.y,{size:"xl",inline:!0})))}}const Xu=(0,na.N)(()=>{const Q=S.$.theme2;return{container:(0,j.css)({display:"flex",flexDirection:"column",height:"100%",backgroundSize:"cover",padding:`${Q.spacing(4)} ${Q.spacing(2)} 0`}),content:(0,j.css)({label:"content",display:"flex",justifyContent:"center",[Q.breakpoints.down("xxl")]:{marginLeft:Q.spacing(3),justifyContent:"flex-start"}}),header:(0,j.css)({label:"header",marginBottom:Q.spacing(3),display:"flex",flexDirection:"column",[Q.breakpoints.down("lg")]:{flexDirection:"row"}}),headerLogo:(0,j.css)({height:"58px",paddingRight:Q.spacing(2),display:"none",[Q.breakpoints.up("md")]:{display:"block"}}),heading:(0,j.css)({label:"heading",marginRight:Q.spacing(3),marginBottom:Q.spacing(3),flexGrow:1,display:"flex",[Q.breakpoints.up("md")]:{marginBottom:0}}),backForwardButtons:(0,j.css)({position:"absolute",top:"50%",transform:"translateY(-50%)"}),previous:(0,j.css)({left:"10px",[Q.breakpoints.down("md")]:{left:0}}),forward:(0,j.css)({right:"10px",[Q.breakpoints.down("md")]:{right:0}}),dismiss:(0,j.css)({alignSelf:"flex-end",textDecoration:"underline",marginBottom:Q.spacing(1)}),loading:(0,j.css)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}),loadingText:(0,j.css)({marginRight:Q.spacing(1)})}}),Zu=new x.m(Fi).setNoPadding();var xr=e(77678),Jc=e(56675),Xc=e(97706),qu=e(81297);const Tl={bucketCount:30,bucketOffset:0},Zc={fillOpacity:80,gradientMode:mt.on.None,lineWidth:1};function qc(Q,ce){return Math.floor(Q/ce)*ce}function ed(Q,ce){return Math.ceil(Q/ce)*ce}function td(Q){return Q.fields[0].type===Kt.PU.string?1:(0,Xc.h)(Q.fields[1].values[0]-Q.fields[0].values[0],9)}function em(Q){return Q.fields[0].type===Kt.PU.string?1:(0,Xc.h)(Q.fields[1].values[1]-Q.fields[0].values[1],9)}const tm=(Q,ce)=>{let{min:he,max:Ae}=Q.fields[2].config,Ke=new Jr.e,Qe=Q.fields[0].type===Kt.PU.string,tt=td(Q),gt=em(Q),yt=gt/tt,bt=gt!==tt,It=(sn,Tn,cn,ta,Kn,Qn)=>{let va=sn.axes[Tn]._space,ca=sn.valToPos(sn.data[0][0]+tt,"x")-sn.valToPos(sn.data[0][0],"x"),ma=qc(he??sn.data[0][0],tt),On=ed(Ae??sn.data[0][sn.data[0].length-1]+tt,tt),$n=[],Nn=Math.ceil(va/ca);for(let xa=0,Wa=ma;Wa<=On;xa++,Wa+=tt)!(xa%Nn)&&$n.push(Wa);return $n};Ke.addScale({scaleKey:"x",isTime:!1,distribution:Qe?mt.L4.Ordinal:bt?mt.L4.Log:mt.L4.Linear,log:2,orientation:mt.Lt.Horizontal,direction:mt.ON.Right,range:bt?(sn,Tn,cn)=>Os.A.rangeLog(Tn,cn*yt,2,!0):(sn,Tn,cn)=>{he!=null&&(Tn=he),Ae!=null&&(cn=Ae);let ta=sn.data[0][sn.data[0].length-1];return Tn=ed(Tn,tt),cn=!Qe&&cn===ta?cn+tt:qc(cn,tt),[Tn,cn]}}),Ke.addScale({scaleKey:"y",isTime:!1,distribution:mt.L4.Linear,orientation:mt.Lt.Vertical,direction:mt.ON.Up,softMin:0});const Rt=Q.fields[0].display,Nt=sn=>(0,Es.cN)(Rt(sn));Ke.addAxis({scaleKey:"x",isTime:!1,placement:mt.vM.Bottom,incrs:Qe?[1]:bt?void 0:xr.rW,splits:bt||Qe?void 0:It,values:Qe?(sn,Tn)=>Tn:(sn,Tn)=>{const cn=Tn.map(Nt),ta=cn.reduce((ca,ma)=>Math.max((0,Ra.kD)(ma,_a.pi).width,ca),0),Qn=sn.bbox.width/((ta+10)*devicePixelRatio),va=Math.ceil(cn.length/Qn);return cn.map((ca,ma)=>ma%va===0?ca:null)},theme:ce});let Jt=Q.fields[2].display;Ke.addAxis({scaleKey:"y",isTime:!1,placement:mt.vM.Left,formatValue:(sn,Tn)=>(0,Es.cN)(Jt(sn,Tn)),theme:ce}),Ke.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let tn=(0,nr.ro)(nm(Q));Ke.setStackingGroups(tn);let Yt=Os.A.paths.bars({align:1,size:[1,1/0]}),Zt=0;for(let sn=2;sn<Q.fields.length;sn++){const Tn=Q.fields[sn];Tn.state=Tn.state??{},Tn.state.seriesIndex=Zt++;const cn={...Zc,...Tn.config.custom},ta="y",Kn=(0,us.Qi)(Tn),va=(0,us.lz)(Tn,ce).color;Ke.addSeries({scaleKey:ta,lineWidth:cn.lineWidth,lineColor:va,fillOpacity:cn.fillOpacity,theme:ce,colorMode:Kn,pathBuilder:Yt,show:!cn.hideFrom?.viz,gradientMode:cn.gradientMode,thresholds:Tn.config.thresholds,hardMin:Tn.config.min,hardMax:Tn.config.max,softMin:cn.axisSoftMin,softMax:cn.axisSoftMax,dataFrameFieldIndex:Tn.state.origin})}return Ke},nm=Q=>({...Q,fields:Q.fields.filter(ce=>ce.name!==xr.dA)}),am=(Q,ce)=>{for(let he=1;he<ce.fields.length;he++){let Ae=ce.fields[he].values;for(let Ke=0;Ke<Ae.length;Ke++)Ae[Ke]===0&&(Ae[Ke]=null)}return(0,nr.bq)(ce,Q.getStackingGroups())};class ya extends p.Component{constructor(ce){super(ce),this.state=this.prepState(ce)}prepState(ce,he=!0){const{alignedFrame:Ae}=ce,Ke=he?tm(Ae,this.props.theme):this.state.config,Qe=am(Ke,nm(Ae));return{alignedFrame:Ae,alignedData:Qe,config:Ke}}renderLegend(ce){const{legend:he}=this.props;if(!ce||he.showLegend===!1)return null;const Ae=this.props.options.combine?[this.props.alignedFrame]:this.props.rawSeries;return p.createElement(rs.$,{data:Ae,config:ce,maxHeight:"35%",maxWidth:"60%",...he})}componentDidUpdate(ce){const{structureRev:he,alignedFrame:Ae,bucketSize:Ke,bucketCount:Qe}=this.props;if(Ae!==ce.alignedFrame){const tt=this.state.config==null||Qe!==ce.bucketCount||Ke!==ce.bucketSize||this.props.options!==ce.options||this.state.config===void 0||he!==ce.structureRev||!he,gt=this.prepState(this.props,tt);this.setState(gt)}}render(){const{width:ce,height:he,children:Ae,alignedFrame:Ke}=this.props,{config:Qe}=this.state;return Qe?p.createElement(Za.KU,{width:ce,height:he,legend:this.renderLegend(Qe)},(tt,gt)=>p.createElement(qu.Z,{config:this.state.config,data:this.state.alignedData,width:tt,height:gt},Ae?Ae(Qe,Ke):null)):null}}const er=({data:Q,options:ce,width:he,height:Ae})=>{const Ke=(0,ie.$j)(),Qe=(0,p.useMemo)(()=>{if(!Q.series.length)return;if(Q.series.forEach((yt,bt)=>{yt.fields.forEach((It,Rt)=>{It.state={...It.state,origin:{frameIndex:bt,fieldIndex:Rt}}})}),Q.series.length===1){const yt=(0,xr.ix)(Q.series[0]);if(yt)return(0,xr.cg)(yt)}const gt=(0,xr.p3)(Q.series,ce);if(gt)return(0,xr.cg)(gt,Ke)},[Q.series,ce,Ke]);if(!Qe||!Qe.fields.length)return p.createElement("div",{className:"panel-empty"},p.createElement("p",null,"No histogram found in response"));const tt=td(Qe);return p.createElement(ya,{options:ce,theme:Ke,legend:ce.legend,rawSeries:Q.series,structureRev:Q.structureRev,width:he,height:Ae,alignedFrame:Qe,bucketSize:tt,bucketCount:ce.bucketCount},(gt,yt)=>null)},nd={stacking:{mode:mt.gs.None,group:"A"}},Gs=(Q,ce,he,Ae)=>{if(ce==="graph"&&he.angular.xaxis?.mode==="histogram"){const{fieldConfig:Qe,options:tt}=Wi({...he.angular,fieldConfig:Ae});return Q.fieldConfig=Qe,tt}return{}};function Wi(Q){const ce=Q;let he={};const Ae={legend:{displayMode:mt.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:mt.$N.Single,sort:mt.xB.None},combine:!1};return ce.stack&&(he.stacking={mode:ce.percentage?mt.gs.Percent:mt.gs.Normal,group:nd.stacking.group},Ae.combine=!1),{fieldConfig:{defaults:(0,w.omitBy)({custom:he},w.isNil),overrides:[]},options:Ae}}function Ki(Q){if(Q?.length!==1)return!1;const ce=Q[0];if(ce.fields.length<3||!(0,xr.NX)(ce.fields[0].name)||!(0,xr.H1)(ce.fields[1].name))return!1;for(const he of ce.fields)if(he.type!==Kt.PU.number)return!1;return!0}const sm=new x.m(er).setPanelChangeHandler(Gs).setPanelOptions(Q=>{Q.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(ce,he)=>Ki(he)}).addNumberInput({path:"bucketCount",name:xr.Rt.bucketCount.name,description:xr.Rt.bucketCount.description,settings:{placeholder:`Default: ${Tl.bucketCount}`,min:0},showIf:(ce,he)=>!Ki(he)}).addNumberInput({path:"bucketSize",name:xr.Rt.bucketSize.name,description:xr.Rt.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:Tl.bucketSize,showIf:(ce,he)=>!Ki(he)}).addNumberInput({path:"bucketOffset",name:xr.Rt.bucketOffset.name,description:xr.Rt.bucketOffset.description,settings:{placeholder:`Default: ${Tl.bucketOffset}`,min:0},showIf:(ce,he)=>!Ki(he)}).addBooleanSwitch({path:"combine",name:xr.Rt.combine.name,description:xr.Rt.combine.description,defaultValue:Tl.combine,showIf:(ce,he)=>!Ki(he)}),fn.H(Q)}).useFieldConfig({standardOptions:{[kt.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:rn.Y.PaletteClassic}}},useCustomConfig:Q=>{const ce=Zc;Q.addCustomEditor({id:"stacking",path:"stacking",name:"Stacking",category:["Histogram"],defaultValue:nd.stacking,editor:Jc.m,override:Jc.m,settings:{options:pt.t.stacking},process:yn.hS,shouldApply:he=>he.type===Kt.PU.number,showIf:(he,Ae)=>!Ki(Ae)}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ce.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ce.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:pt.t.fillGradient[0].value,settings:{options:pt.t.fillGradient}}),on.e(Q)}});var Or=e(55004),$i=e(60029),tc=e(39408);const ad=[{label:"SyncCity",value:Or.qD.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:Or.qD.DataSource,description:"Data sources with live support"},{label:"Plugins",value:Or.qD.Plugin,description:"Plugins with live support"},{label:"Stream",value:Or.qD.Stream,description:"data streams (eg, influx style)"}];function nc(Q){const[ce,he]=(0,p.useState)([]),[Ae,Ke]=(0,p.useMemo)(()=>{const Nt=[],St=[],Jt=Q.value.scope,tn=Q.value.namespace;if(!Jt?.length)return[Nt,St];const Yt={};for(let Zt of ce){const sn=(0,Or.DG)(Zt.value);!sn||sn.scope!==Jt||(Yt[sn.namespace]||(Nt.push({value:sn.namespace,label:sn.namespace}),Yt[sn.namespace]=!0),tn?.length&&tn===sn.namespace&&St.push({...Zt,value:sn.path}))}return[Nt,St]},[ce,Q.value.scope,Q.value.namespace]);(0,p.useEffect)(()=>{(0,tc.l)().then(Nt=>{he(Nt.channels)})},[Q.value.scope]);const Qe=Nt=>{Nt.value&&Q.onChange({scope:Nt.value,namespace:void 0,path:void 0})},tt=Nt=>{Q.onChange({scope:Q.value?.scope,namespace:Nt?.value,path:void 0})},gt=Nt=>{const{value:St,onChange:Jt}=Q;Jt({scope:St.scope,namespace:St.namespace,path:Nt?.value})},{scope:yt,namespace:bt,path:It}=Q.value,Rt=om(ye.config.theme2);return p.createElement(p.Fragment,null,p.createElement(re.F,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),p.createElement("div",null,p.createElement("div",{className:Rt.dropWrap},p.createElement($i.J,null,"Scope"),p.createElement(V.l6,{options:ad,value:ad.find(Nt=>Nt.value===yt),onChange:Qe})),yt&&p.createElement("div",{className:Rt.dropWrap},p.createElement($i.J,null,"Namespace"),p.createElement(V.l6,{options:Ae,value:Ae.find(Nt=>Nt.value===bt)??(bt?{label:bt,value:bt}:void 0),onChange:tt,allowCustomValue:!0,backspaceRemovesValue:!0,isClearable:!0})),yt&&bt&&p.createElement("div",{className:Rt.dropWrap},p.createElement($i.J,null,"Path"),p.createElement(V.l6,{options:Ke,value:rm(Ke,It),onChange:gt,allowCustomValue:!0,backspaceRemovesValue:!0,isClearable:!0}))))}function rm(Q,ce){const he=Q.find(Ae=>Ae.value===ce);if(he)return he;if(ce)return{label:ce,value:ce}}const om=(0,na.N)(Q=>({dropWrap:(0,j.css)`
    margin-bottom: ${Q.spacing(1)};
  `}));var xo=e(9631),im=e(90708),Sl=e(39070),ei=e(78731),lm=e(24022),Er=e(1173),Up=e(77093),Ml=e(65885);function sl(Q){const{data:ce,height:he,width:Ae,options:Ke,fieldConfig:Qe,id:tt,timeRange:gt}=Q,yt=(0,ie.$j)(),bt=(0,ga.d2)(),It=(0,Ml.gy)(ce.series)?(0,Ml.S5)(ce.series):ce.series,Rt=It?.length,Nt=It[0]?.fields.length,St=cm(It,Ke),Jt=It[St];let tn=he;if(!Rt||!Nt)return p.createElement(jn.a,{panelId:tt,fieldConfig:Qe,data:ce});if(Rt>1){const Tn=yt.spacing.gridSize*yt.components.height.md,cn=yt.spacing.gridSize;tn=he-Tn-cn}const Yt=bt.sync&&bt.sync()!==cs.y.Off,Zt=p.createElement(Up.X,{height:tn,width:Ae,data:Jt,noHeader:!Ke.showHeader,showTypeIcons:Ke.showTypeIcons,resizable:!0,initialSortBy:Ke.sortBy,onSortByChange:Tn=>rd(Tn,Q),onColumnResize:(Tn,cn)=>sd(Tn,cn,Q),onCellFilterAdded:bt.onAddAdHocFilter,footerOptions:Ke.footer,enablePagination:Ke.footer?.enablePagination,cellHeight:Ke.cellHeight,timeRange:gt,enableSharedCrosshair:S.$.featureToggles.tableSharedCrosshair&&Yt,fieldConfig:Qe});if(Rt===1)return Zt;const sn=It.map((Tn,cn)=>({label:(0,gn.Ri)(Tn),value:cn}));return p.createElement("div",{className:xl.wrapper},Zt,p.createElement("div",{className:xl.selectWrapper},p.createElement(V.l6,{options:sn,value:sn[St],onChange:Tn=>od(Tn,Q)})))}function cm(Q,ce){return ce.frameIndex>0&&ce.frameIndex<Q.length?ce.frameIndex:0}function sd(Q,ce,he){const{fieldConfig:Ae}=he,{overrides:Ke}=Ae,Qe=Er.Ct.byName,tt="custom.width",gt=Ke.find(yt=>yt.matcher.id===Qe&&yt.matcher.options===Q);if(gt){const yt=gt.properties.find(bt=>bt.id===tt);yt?yt.value=ce:gt.properties.push({id:tt,value:ce})}else Ke.push({matcher:{id:Qe,options:Q},properties:[{id:tt,value:ce}]});he.onFieldConfigChange({...Ae,overrides:Ke})}function rd(Q,ce){ce.onOptionsChange({...ce.options,sortBy:Q})}function od(Q,ce){ce.onOptionsChange({...ce.options,frameIndex:Q.value||0})}const xl={wrapper:(0,j.css)`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:(0,j.css)`
    padding: 8px 8px 0px 8px;
  `};var Ol=e(32372),Fo=(Q=>(Q.Raw="raw",Q.JSON="json",Q.Auto="auto",Q.None="none",Q))(Fo||{}),Ir=(Q=>(Q.None="none",Q.JSON="json",Q.Influx="influx",Q))(Ir||{});function dm({height:Q,mode:ce,body:he,addr:Ae,onSave:Ke}){const Qe=(0,p.useMemo)(()=>ce===Ir.JSON?he?JSON.stringify(he,null,2):"{ }":he==null?"":`${he}`,[ce,he]),tt=yt=>{ce===Ir.JSON?Ke(JSON.parse(yt)):Ke(yt)},gt=async()=>{if(ce===Ir.Influx){if(Ae?.scope!=="stream"){alert("expected stream scope!");return}return(0,Vn.AI)().post(`api/live/push/${Ae.namespace}`,he)}if(!(0,Or.aj)(Ae)){alert("invalid address");return}const yt=await(0,ei.oF)().publish(Ae,he);console.log("onPublishClicked (response from publish)",yt)};return p.createElement(p.Fragment,null,p.createElement(Ol.B,{height:Q-32,language:ce===Ir.JSON?"json":"text",value:Qe,onBlur:tt,onSave:tt,showMiniMap:!1,showLineNumbers:!0}),p.createElement("div",{style:{height:32}},p.createElement(R.$n,{onClick:gt},"Publish")))}class um extends p.PureComponent{constructor(ce){super(ce),this.styles=id(S.$.theme2),this.streamObserver={next:he=>{(0,Or.ew)(he)?this.setState({status:he,changed:Date.now()}):(0,Or.Z7)(he)?this.setState({message:he.message,changed:Date.now()}):console.log("ignore",he)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.isValid=!!(0,ei.oF)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(ce){this.props.options?.channel!==ce.options?.channel&&this.loadChannel()}async loadChannel(){const ce=this.props.options?.channel;if(!(0,Or.aj)(ce)){console.log("INVALID",ce),this.unsubscribe(),this.setState({addr:void 0});return}if((0,w.isEqual)(ce,this.state.addr)){console.log("Same channel",this.state.addr);return}const he=(0,ei.oF)();if(!he){console.log("INVALID",ce),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",ce);try{this.subscription=he.getStream(ce).subscribe(this.streamObserver),this.setState({addr:ce,error:void 0})}catch(Ae){this.setState({addr:void 0,error:Ae})}}renderNotEnabled(){return p.createElement(re.F,{title:"Grafana Live",severity:"info"},p.createElement("p",null,"Grafana live requires a feature flag to run"),p.createElement("b",null,"custom.ini:"),p.createElement("pre",null,`[feature_toggles]
    enable = live`))}renderMessage(ce){const{options:he}=this.props,{message:Ae}=this.state;if(!Ae)return p.createElement("div",null,p.createElement("h4",null,"Waiting for data:"),he.channel?.scope,"/",he.channel?.namespace,"/",he.channel?.path);if(he.display===Fo.JSON)return p.createElement(lm.B,{json:Ae,open:5});if(he.display===Fo.Auto&&Ae instanceof xo.k9){const Ke={series:(0,im.we)({data:[Ae],theme:S.$.theme2,replaceVariables:tt=>tt,fieldConfig:{defaults:{},overrides:[]}}),state:Sl.Gu.Streaming},Qe={...this.props,options:{frameIndex:0,showHeader:!0}};return p.createElement(sl,{...Qe,data:Ke,height:ce})}return p.createElement("pre",null,JSON.stringify(Ae))}renderPublish(ce){const{options:he}=this.props;return p.createElement(dm,{height:ce,body:he.message,mode:he.publish??Ir.JSON,onSave:Ae=>this.props.onOptionsChange({...he,message:Ae}),addr:this.state.addr})}renderStatus(){const{status:ce}=this.state;if(ce?.state===Or.ZF.Connected)return;let he="";return ce&&(he=this.styles.status[ce.state]),p.createElement("div",{className:(0,j.cx)(he,this.styles.statusWrap)},ce?.state)}renderBody(){const{status:ce}=this.state,{options:he,height:Ae}=this.props;if(he.publish===Ir.JSON||he.publish===Ir.Influx){if(he.display===Fo.None)return this.renderPublish(Ae);const Qe=Ae/2;return p.createElement("div",null,p.createElement("div",{style:{height:Qe,overflow:"hidden"}},p.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Qe))),p.createElement("div",null,this.renderPublish(Qe)))}return he.display===Fo.None?p.createElement("pre",null,JSON.stringify(ce)):p.createElement("div",{style:{overflow:"hidden",height:Ae}},p.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ae)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:ce,error:he}=this.state;return ce?he?p.createElement("div",null,p.createElement("h2",null,"ERROR"),p.createElement("div",null,JSON.stringify(he))):p.createElement(p.Fragment,null,this.renderStatus(),this.renderBody()):p.createElement(re.F,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const id=(0,na.N)(Q=>({statusWrap:(0,j.css)`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${Q.components.panel.background};
    padding: 10px;
    z-index: ${Q.zIndex.modal};
  `,status:{[Or.ZF.Pending]:(0,j.css)`
      border: 1px solid ${Q.v1.palette.orange};
    `,[Or.ZF.Connected]:(0,j.css)`
      border: 1px solid ${Q.colors.success.main};
    `,[Or.ZF.Connecting]:(0,j.css)`
      border: 1px solid ${Q.v1.palette.brandWarning};
    `,[Or.ZF.Disconnected]:(0,j.css)`
      border: 1px solid ${Q.colors.warning.main};
    `,[Or.ZF.Shutdown]:(0,j.css)`
      border: 1px solid ${Q.colors.error.main};
    `,[Or.ZF.Invalid]:(0,j.css)`
      border: 1px solid red;
    `}})),Ms=new x.m(um).setPanelOptions(Q=>{Q.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:nc,defaultValue:{}}),Q.addRadio({path:"display",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Fo.Raw,label:"Raw Text"},{value:Fo.JSON,label:"JSON"},{value:Fo.Auto,label:"Auto"},{value:Fo.None,label:"None"}]},defaultValue:Fo.JSON}).addRadio({path:"publish",name:"Publish",description:"Display a form to publish values",settings:{options:[{value:Ir.None,label:"None"},{value:Ir.JSON,label:"JSON"},{value:Ir.Influx,label:"Influx"}]},defaultValue:Ir.None})});var Di=e(9557),ld=e(96192),mm=e(81166),fm=e(17888),gm=e(7030),pm=e(93463),hm=e(14647),Il=e(69147),ko=e(16817),cd=e(19347);const vm=Q=>{const[ce,he]=(0,p.useState)(new Map);return(0,ko.A)(async()=>{if(!Q){he(new Map);return}const Ae=await Promise.all(Q.filter(Ke=>!!Ke.datasource?.uid).map(Ke=>(0,cd.l)().get(Ke.datasource?.uid).then(Qe=>({key:Ke.refId,ds:Qe}))));he(new Map(Ae.map(({key:Ke,ds:Qe})=>[Ke,Qe])))},[Q]),ce},ti=({data:Q,timeZone:ce,fieldConfig:he,options:{showLabels:Ae,showTime:Ke,wrapLogMessage:Qe,showCommonLabels:tt,prettifyLogMessage:gt,sortOrder:yt,dedupStrategy:bt,enableLogDetails:It,showLogContextToggle:Rt},id:Nt})=>{const St=yt===mt.uH.Ascending,Jt=(0,ie.of)(Em),[tn,Yt]=(0,p.useState)(0),Zt=(0,p.useRef)(null),[sn,Tn]=(0,p.useState)(null),cn=Q.timeRange,ta=vm(Q.request?.targets),[Kn,Qn]=(0,p.useState)(null);let va=(0,p.useRef)();const{eventBus:ca}=(0,ga.d2)(),ma=(0,p.useCallback)(qn=>{qn?ca.publish(new en.b_({point:{time:qn.timeEpochMs}})):ca.publish(new en.ql)},[ca]),On=(0,p.useCallback)(()=>{Tn(null),va.current&&va.current()},[va]),$n=(0,p.useCallback)((qn,Sn)=>{Tn(qn),va.current=Sn},[va]),Nn=(0,p.useCallback)(async qn=>await Dm(qn,cn),[cn]),xa=(0,p.useCallback)(qn=>{if(!qn.dataFrame.refId||!ta||!Rt&&Q.request?.app!==O.Jk.Dashboard&&Q.request?.app!==O.Jk.PanelEditor&&Q.request?.app!==O.Jk.PanelViewer)return!1;const Sn=ta.get(qn.dataFrame.refId);return(0,Di.Ol)(Sn)},[ta,Rt,Q.request?.app]),Wa=(0,p.useCallback)(()=>!(Q.request?.app!==O.Jk.Dashboard&&Q.request?.app!==O.Jk.PanelEditor&&Q.request?.app!==O.Jk.PanelViewer),[Q.request?.app]),ka=(0,p.useCallback)(async(qn,Sn,oa)=>{if(!Sn.dataFrame.refId||!ta)return Promise.resolve({data:[]});const Ea=Q.request?.targets[0];if(!Ea)return Promise.resolve({data:[]});const Pa=ta.get(Sn.dataFrame.refId);return(0,Di.Ol)(Pa)?Pa.getLogRowContext(qn,oa,Ea):Promise.resolve({data:[]})},[Q.request?.targets,ta]),ra=(0,p.useCallback)((qn,Sn)=>{if(!qn.dataFrame.refId||!ta)return p.createElement(p.Fragment,null);const oa=Q.request?.targets[0];if(!oa)return p.createElement(p.Fragment,null);const Ea=ta.get(qn.dataFrame.refId);return!(0,Di.wj)(Ea)||!Ea.getLogRowContextUi?p.createElement(p.Fragment,null):Ea.getLogRowContextUi(qn,Sn,oa)},[Q.request?.targets,ta]),[da,$a,qa]=(0,p.useMemo)(()=>{const qn=Q?(0,Il.HT)(Q.series,Q.request?.intervalMs,void 0,Q.request?.targets):null,Sn=qn?.rows||[],oa=qn?.meta?.find(Pa=>Pa.label===Il.yR),Ea=(0,Il.M0)(Sn,bt);return[Sn,Ea,oa]},[Q,bt]);(0,p.useLayoutEffect)(()=>{St&&Zt.current?Yt(Zt.current.offsetHeight):Yt(0)},[St,da]);const as=(0,p.useCallback)((qn,Sn)=>(0,ld.QL)({field:qn,rowIndex:Sn,range:Q.timeRange}),[Q]),fa=(0,p.useCallback)(qn=>{Kn?.scrollTo({top:qn.offsetTop,behavior:"smooth"})},[Kn]);if(!Q||da.length===0)return p.createElement(fm.a,{fieldConfig:he,panelId:Nt,data:Q,needsStringField:!0});const Oa=()=>p.createElement("div",{className:(0,j.cx)(Jt.labelContainer,St&&Jt.labelContainerAscending)},p.createElement("span",{className:Jt.label},"Common labels:"),p.createElement(pm.A,{labels:qa?qa.value:{labels:"(no common labels)"}}));return p.createElement(p.Fragment,null,sn&&p.createElement(mm.V,{open:sn!==null,row:sn,onClose:On,getRowContext:(qn,Sn)=>ka(qn,sn,Sn),logsSortOrder:yt,timeZone:ce,getLogRowContextUi:ra}),p.createElement(ue.E,{autoHide:!0,scrollTop:tn,scrollRefCallback:qn=>Qn(qn)},p.createElement("div",{className:Jt.container,ref:Zt},tt&&!St&&Oa(),p.createElement(hm.k,{containerRendered:Zt.current!==null,scrollIntoView:fa,permalinkedRowId:ym()?.logs?.id??void 0,onPermalinkClick:Wa()?Nn:void 0,logRows:da,showContextToggle:xa,deduplicatedRows:$a,dedupStrategy:bt,showLabels:Ae,showTime:Ke,wrapLogMessage:Qe,prettifyLogMessage:gt,timeZone:ce,getFieldLinks:as,logsSortOrder:yt,enableLogDetails:It,previewLimit:St?da.length:void 0,onLogRowHover:ma,app:O.Jk.Dashboard,onOpenContext:$n}),tt&&St&&Oa())))},Em=Q=>({container:(0,j.css)({marginBottom:Q.spacing(1.5)}),labelContainer:(0,j.css)({margin:Q.spacing(0,0,.5,.5),display:"flex",alignItems:"center"}),labelContainerAscending:(0,j.css)({margin:Q.spacing(.5,0,.5,0)}),label:(0,j.css)({marginRight:Q.spacing(.5),fontSize:Q.typography.bodySmall.fontSize,fontWeight:Q.typography.fontWeightMedium})});function ym(){const ce=So.kM.getUrlSearchParams()?.panelState;if(ce&&Array.isArray(ce)&&ce?.length>0&&typeof ce[0]=="string")try{return JSON.parse(ce[0])}catch(he){console.error("error parsing logsPanelState",he)}}async function Dm(Q,ce){if(Q.rowId===void 0||!Q.dataFrame.refId)return;const he={logs:{id:Q.uid}},Ae=new URL(window.location.href);return Ae.searchParams.set("panelState",JSON.stringify(he)),Ae.searchParams.set("from",(0,Xt.yT)(ce.from).valueOf().toString(10)),Ae.searchParams.set("to",(0,Xt.yT)(ce.to).valueOf().toString(10)),await(0,gm.V)(Ae.toString()),Promise.resolve()}class bm{getSuggestionsForData(ce){const he=ce.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:Ae}=ce;!Ae.hasData||!Ae.hasTimeField||!Ae.hasStringField||(Ae.preferredVisualisationType==="logs"?he.append({name:ns.m.Logs,score:Rn.nQ.Best}):he.append({name:ns.m.Logs}))}}const Pm=new x.m(ti).setPanelOptions(Q=>{Q.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:mt.fY.none,label:"None",description:Di._C[mt.fY.none]},{value:mt.fY.exact,label:"Exact",description:Di._C[mt.fY.exact]},{value:mt.fY.numbers,label:"Numbers",description:Di._C[mt.fY.numbers]},{value:mt.fY.signature,label:"Signature",description:Di._C[mt.fY.signature]}]},defaultValue:mt.fY.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:mt.uH.Descending,label:"Newest first"},{value:mt.uH.Ascending,label:"Oldest first"}]},defaultValue:mt.uH.Descending})}).setSuggestionsSupplier(new bm);var rl=e(69386),Ho=e(62372),dd=e(4172);function ud(Q){const{width:ce,options:{feedUrl:he=Ho.$,showImage:Ae}}=Q,{state:Ke,getNews:Qe}=(0,dd.n)(he);return(0,p.useEffect)(()=>{const tt=Q.eventBus.subscribe(oe._,Qe);return()=>{tt.unsubscribe()}},[Qe,Q.eventBus]),(0,p.useEffect)(()=>{Qe()},[Qe]),Ke.error?p.createElement(re.F,{title:"Error loading RSS feed"},"Make sure that the feed URL is correct and that CORS is configured correctly on the server. See"," ",p.createElement("a",{style:{textDecoration:"underline"},href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/news/"},"News panel documentation. ",p.createElement(N.I,{name:"external-link-alt"}))):Ke.loading?p.createElement("div",null,"Loading..."):Ke.value?p.createElement(ue.E,{autoHeightMin:"100%",autoHeightMax:"100%"},Ke.value.map((tt,gt)=>p.createElement(rl.K,{key:gt,index:gt,width:ce,showImage:Ae,data:Ke.value}))):null}const Al={showImage:!0},Cm=new x.m(ud).setPanelOptions(Q=>{Q.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:Ho.$},defaultValue:Al.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:Al.showImage})});var Tm=e(56323),md=e(29995),Sm=e(89227),Rl=e(98361),Mm=e(33434),fd=e(44916),xm=e(4118),Om=e(35472),ac=e(84140),Im=e(59796),Ll=e(3139);let Am=0;const Rm=()=>Am++;function Lm(Q){const ce=(0,p.useRef)(null);return ce.current===null&&(ce.current=Q+Rm()),ce.current.toString()}var Oo=(Q=>(Q.Donut="donut",Q.Pie="pie",Q))(Oo||{}),ho=(Q=>(Q.Name="name",Q.Percent="percent",Q.Value="value",Q))(ho||{}),ni=(Q=>(Q.Percent="percent",Q.Value="value",Q))(ni||{});const Np={values:[]},Bm={displayLabels:[]};function gd(Q){return!Q.field.custom?.hideFrom?.viz&&!isNaN(Q.display.numeric)}function pd(Q,ce){return ce.display.numeric+Q}const Um=({fieldDisplayValues:Q,pieType:ce,width:he,height:Ae,highlightedTitle:Ke,displayLabels:Qe=[],tooltipOptions:tt})=>{const gt=(0,ie.$j)(),yt=Lm("PieChart"),bt=(0,ie.of)(Ul),It=(0,xm.A)(),{containerRef:Rt,TooltipInPortal:Nt}=(0,Om.A)({detectBounds:!0,scroll:!0}),St=Q.filter(gd),Jt=Kn=>Kn.display.numeric,tn=Kn=>`${yt}-${(0,ac.A)(Kn).toHex()}`,Yt=Kn=>`url(#${tn(Kn)})`,Zt=Qe.length>0,sn=tt.mode!=="none"&&It.tooltipOpen,Tn=St.reduce(pd,0),cn=sc(he,Ae,ce),ta=[...new Set(St.map(Kn=>Kn.display.color??rn.F))];return p.createElement("div",{className:bt.container},p.createElement("svg",{width:cn.size,height:cn.size,ref:Rt,style:{overflow:"visible"}},p.createElement(Mm.A,{top:cn.position,left:cn.position},ta.map(Kn=>p.createElement(Rl.A,{key:Kn,id:tn(Kn),from:vd(Kn,gt),to:Ed(Kn,gt),fromOffset:cn.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:cn.outerRadius})),p.createElement(fd.A,{data:St,pieValue:Jt,outerRadius:cn.outerRadius,innerRadius:cn.innerRadius,cornerRadius:3,padAngle:.005},Kn=>p.createElement(p.Fragment,null,Kn.arcs.map(Qn=>{const va=Qn.data.display.color??rn.F,ca=Bl(Ke,Qn);return Qn.data.hasLinks&&Qn.data.getLinks?p.createElement(Im.e,{key:Qn.index,links:Qn.data.getLinks},ma=>p.createElement(hd,{tooltip:It,highlightState:ca,arc:Qn,pie:Kn,fill:Yt(va),openMenu:ma.openMenu,tooltipOptions:tt})):p.createElement(hd,{key:Qn.index,highlightState:ca,tooltip:It,arc:Qn,pie:Kn,fill:Yt(va),tooltipOptions:tt})}),Zt&&Kn.arcs.map(Qn=>{const va=Bl(Ke,Qn);return p.createElement(Ar,{arc:Qn,key:Qn.index,highlightState:va,outerRadius:cn.outerRadius,innerRadius:cn.innerRadius,displayLabels:Qe,total:Tn,color:gt.colors.text.primary})}))))),sn?p.createElement(Nt,{key:Math.random(),top:It.tooltipTop,className:bt.tooltipPortal,left:It.tooltipLeft,unstyled:!0,applyPositionStyle:!0},p.createElement(Ll.o,{series:It.tooltipData})):null)};function hd({arc:Q,pie:ce,highlightState:he,openMenu:Ae,fill:Ke,tooltip:Qe,tooltipOptions:tt}){const gt=(0,ie.$j)(),yt=(0,ie.of)(Ul),{eventBus:bt}=(0,ga.d2)(),It=(0,p.useCallback)(St=>{bt?.publish({type:en.ql.type,payload:{raw:St,x:0,y:0,dataId:Q.data.display.title}}),Qe.hideTooltip()},[bt,Q,Qe]),Rt=(0,p.useCallback)(St=>{bt?.publish({type:en.b_.type,payload:{raw:St,x:0,y:0,dataId:Q.data.display.title}});const Jt=St.currentTarget.ownerSVGElement;if(Jt){const tn=(0,Sm.A)(Jt,St);Qe.showTooltip({tooltipLeft:tn.x,tooltipTop:tn.y,tooltipData:lr(ce,Q,tt)})}},[bt,Q,Qe,ce,tt]),Nt=ol(he,yt);return p.createElement("g",{key:Q.data.display.title,className:Nt,onMouseMove:tt.mode!=="none"?Rt:void 0,onMouseOut:It,onClick:Ae,"data-testid":_s.Tp.components.Panels.Visualization.PieChart.svgSlice},p.createElement("path",{d:ce.path({...Q}),fill:Ke,stroke:gt.colors.background.primary,strokeWidth:1}))}function Ar({arc:Q,outerRadius:ce,innerRadius:he,displayLabels:Ae,total:Ke,color:Qe,highlightState:tt}){const gt=(0,ie.of)(Ul),yt=he===0?ce/6:he,[bt,It]=Nm(Q,ce,yt);if(!(Q.endAngle-Q.startAngle>=.3))return null;let Nt=Ae.includes(ho.Name)?Math.min(Math.max(ce/150*14,12),30):Math.min(Math.max(ce/100*14,12),36);return p.createElement("g",{className:ol(tt,gt)},p.createElement("text",{fill:Qe,x:bt,y:It,dy:".33em",fontSize:Nt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},Ae.includes(ho.Name)&&p.createElement("tspan",{x:bt,dy:"1.2em"},Q.data.display.title),Ae.includes(ho.Value)&&p.createElement("tspan",{x:bt,dy:"1.2em"},(0,Es.cN)(Q.data.display)),Ae.includes(ho.Percent)&&p.createElement("tspan",{x:bt,dy:"1.2em"},(Q.data.display.numeric/Ke*100).toFixed(Q.data.field.decimals??0)+"%")))}function lr(Q,ce,he){return he.mode==="multi"?Q.arcs.filter(Ae=>{const Ke=Ae.data.field;return Ke&&!Ke.custom?.hideFrom?.tooltip&&!Ke.custom?.hideFrom?.viz}).map(Ae=>({color:Ae.data.display.color??rn.F,label:Ae.data.display.title,value:(0,Es.cN)(Ae.data.display),isActive:Ae.index===ce.index})):[{color:ce.data.display.color??rn.F,label:ce.data.display.title,value:(0,Es.cN)(ce.data.display)}]}function Nm(Q,ce,he){const Ae=(ce+he)/2,Ke=(+Q.startAngle+ +Q.endAngle)/2-Math.PI/2;return[Math.cos(Ke)*Ae,Math.sin(Ke)*Ae]}function vd(Q,ce){return(0,ac.A)(Q).darken(20*(ce.isDark?1:-.7)).spin(4).toRgbString()}function Ed(Q,ce){return(0,ac.A)(Q).darken(10*(ce.isDark?1:-.7)).spin(-4).toRgbString()}function sc(Q,ce,he,Ae=16){const Ke=Math.min(ce,Q),Qe=(Ke-Ae*2)/2,tt=he===Oo.Pie?Qe:Math.max(Qe/3,20),gt=Qe-tt,yt=(Ke-Ae*2)/2,bt=1-(Qe-gt)/Qe;return{position:yt+Ae,size:Ke,outerRadius:Qe,innerRadius:gt,gradientFromOffset:bt}}var wp=(Q=>(Q[Q.Highlighted=0]="Highlighted",Q[Q.Deemphasized=1]="Deemphasized",Q[Q.Normal=2]="Normal",Q))(wp||{});function Bl(Q,ce){return Q?Q===ce.data.display.title?0:1:2}function ol(Q,ce){switch(Q){case 0:return ce.svgArg.highlighted;case 1:return ce.svgArg.deemphasized;case 2:default:return ce.svgArg.normal}}const Ul=Q=>({container:(0,j.css)`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:(0,j.css)`
        transition: all 200ms ease-in-out;
      `,highlighted:(0,j.css)`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:(0,j.css)`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:(0,j.css)`
      ${(0,Ei.getTooltipContainerStyles)(Q)}
    `}),yd={displayMode:mt.lm.List,showLegend:!0,placement:"right",calcs:[],values:[ni.Percent]};function wm(Q){const{data:ce,timeZone:he,fieldConfig:Ae,replaceVariables:Ke,width:Qe,height:tt,options:gt,id:yt}=Q,bt=(0,ie.$j)(),It=Fm(),Rt=(0,Tm.PI)({fieldConfig:Ae,reduceOptions:gt.reduceOptions,data:ce.series,theme:bt,replaceVariables:Ke,timeZone:he});return il(Rt)?p.createElement(Za.KU,{width:Qe,height:tt,legend:Nl(Q,Rt)},(Nt,St)=>p.createElement(Um,{width:Nt,height:St,highlightedTitle:It,fieldDisplayValues:Rt,tooltipOptions:gt.tooltip,pieType:gt.pieType,displayLabels:gt.displayLabels})):p.createElement(jn.a,{panelId:yt,fieldConfig:Ae,data:ce})}function Nl(Q,ce){const he=Q.options.legend??yd;if(he.showLegend===!1)return;const Ae=ce.filter(gd).reduce(pd,0),Ke=ce.sort((Qe,tt)=>isNaN(Qe.display.numeric)?1:isNaN(tt.display.numeric)?-1:tt.display.numeric-Qe.display.numeric).map((Qe,tt)=>{const gt=Qe.field.custom?.hideFrom??{};if(gt.legend)return;const yt=!!gt.viz,bt=Qe.display;return{label:bt.title??"",color:bt.color??rn.F,yAxis:1,disabled:yt,getItemKey:()=>(bt.title??"")+tt,getDisplayValues:()=>{const It=he.values??[];let Rt=[];if(It.includes(ni.Value)&&Rt.push({numeric:bt.numeric,text:(0,Es.cN)(bt),title:"Value"}),It.includes(ni.Percent)){const Nt=yt?0:bt.numeric/Ae,St=Nt*100;Rt.push({numeric:Nt,percent:St,text:yt||isNaN(Nt)?Q.fieldConfig.defaults.noValue??"-":St.toFixed(Qe.field.decimals??0)+"%",title:It.length>1?"Percent":""})}return Rt}}}).filter(Qe=>!!Qe);return p.createElement(Za.KU.Legend,{placement:he.placement,width:he.width},p.createElement(ms.t,{items:Ke,seriesVisibilityChangeBehavior:md.K.Hide,placement:he.placement,displayMode:he.displayMode}))}function il(Q){return Q.some(ce=>ce.view?.dataFrame.length)}function Fm(){const[Q,ce]=(0,p.useState)(),{eventBus:he}=(0,ga.d2)();return(0,p.useEffect)(()=>{const Ae=tt=>{ce(tt.payload.dataId)},Ke=tt=>{ce(void 0)},Qe=new _t.yU;return Qe.add(he.getStream(en.b_).subscribe({next:Ae})),Qe.add(he.getStream(en.ql).subscribe({next:Ke})),()=>{Qe.unsubscribe()}},[ce,he]),Q}const Dd=(Q,ce,he)=>{if(ce==="grafana-piechart-panel"&&he.angular){const Ae=he.angular,Ke=[];let Qe=Q.options;if(Ae.aliasColors)for(const tt of Object.keys(Ae.aliasColors)){const gt=Ae.aliasColors[tt];gt&&Ke.push({matcher:{id:Er.Ct.byName,options:tt},properties:[{id:kt.uo.Color,value:{mode:rn.Y.Fixed,fixedColor:gt}}]})}if(Q.fieldConfig={overrides:Ke,defaults:{unit:Ae.format,decimals:Ae.decimals?Ae.decimals:0}},Qe.legend={placement:"right",values:[],displayMode:mt.lm.Table,showLegend:!0,calcs:[]},Ae.valueName)switch(Qe.reduceOptions={calcs:[]},Ae.valueName){case"current":Qe.reduceOptions.calcs=["lastNotNull"];break;case"min":Qe.reduceOptions.calcs=["min"];break;case"max":Qe.reduceOptions.calcs=["max"];break;case"avg":Qe.reduceOptions.calcs=["mean"];break;case"total":Qe.reduceOptions.calcs=["sum"];break}switch(Ae.legendType){case"Under graph":Qe.legend.placement="bottom";break;case"Right side":Qe.legend.placement="right";break}switch(Ae.pieType){case"pie":Qe.pieType=Oo.Pie;break;case"donut":Qe.pieType=Oo.Donut;break}return Ae.legend&&(Ae.legend.show||(Qe.legend.showLegend=!1),Ae.legend.values&&Qe.legend.values.push(ni.Value),Ae.legend.percentage&&Qe.legend.values.push(ni.Percent)),Ae.legendType==="On graph"&&(Qe.legend.showLegend=!1,Qe.displayLabels=[ho.Name],Ae.legend.values&&Qe.displayLabels.push(ho.Value),Ae.legend.percentage&&Qe.displayLabels.push(ho.Percent)),Qe}return{}};class bd{getSuggestionsForData(ce){const he=ce.getListAppender({name:ns.m.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[ho.Percent],legend:{calcs:[],displayMode:mt.lm.Hidden,placement:"right",values:[],showLegend:!1}}}),{dataSummary:Ae}=ce;if(Ae.hasNumberField){if(Ae.hasStringField&&Ae.frameCount===1){if(Ae.rowCountTotal>30||Ae.rowCountTotal<2)return;he.append({name:ns.m.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),he.append({name:ns.m.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Oo.Donut}});return}Ae.numberFieldCount>30||Ae.numberFieldCount<2||(he.append({name:ns.m.PieChart}),he.append({name:ns.m.PieChartDonut,options:{pieType:Oo.Donut}}))}}}const Wm=new x.m(wm).setPanelChangeHandler(Dd).useFieldConfig({disableStandardOptions:[kt.uo.Thresholds],standardOptions:{[kt.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:rn.Y.PaletteClassic}}},useCustomConfig:Q=>{on.e(Q)}}).setPanelOptions(Q=>{(0,Xs.L)(Q),Q.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Oo.Pie,label:"Pie"},{value:Oo.Donut,label:"Donut"}]},defaultValue:Oo.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:ho.Percent,label:"Percent"},{value:ho.Name,label:"Name"},{value:ho.Value,label:"Value"}]}}),pn.D(Q),fn.H(Q,!1),Q.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:ni.Percent,label:"Percent"},{value:ni.Value,label:"Value"}]},showIf:ce=>ce.legend.showLegend!==!1})}).setSuggestionsSupplier(new bd);var Km=e(36373),Pd=e(11082),rc=e(34163),wl=e(82389);const Cd=({data:Q,alignedData:ce,seriesIdx:he,datapointIdx:Ae,timeZone:Ke,onAnnotationAdd:Qe})=>{const tt=(0,ie.$j)();if(!Q||Ae==null)return null;const gt=ce.fields[he],yt=[],bt=new Set;if(gt.getLinks){const Kn=gt.values[Ae],Qn=gt.display?gt.display(Kn):{text:`${Kn}`,numeric:+Kn};gt.getLinks({calculatedValue:Qn,valueRowIndex:Ae}).forEach(va=>{const ca=`${va.title}/${va.href}`;bt.has(ca)||(yt.push(va),bt.add(ca))})}const It=ce.fields[0],Rt=It.display||(0,Ts.J)({field:It,timeZone:Ke,theme:tt}),Nt=gt.state?.origin,St=gt.display||(0,Ts.J)({field:gt,timeZone:Ke,theme:tt}),Jt=gt.values[Ae],tn=St(Jt),Yt=Nt?(0,gn.Ct)(Q[Nt.frameIndex].fields[Nt.fieldIndex],Q[Nt.frameIndex],Q):null,Zt=(0,ks.GY)(gt,Ae);let sn;Zt&&(sn=It.values[Zt]);const Tn=It.values[Ae];let cn=null,ta=null;if(sn){const Kn=sn&&(0,ks.c5)(sn-Tn);ta=p.createElement(p.Fragment,null,p.createElement("br",null),p.createElement("strong",null,"Duration:")," ",Kn),cn=p.createElement(p.Fragment,null," to"," ",p.createElement("strong",null,Rt(It.values[Zt]).text))}return p.createElement("div",null,p.createElement("div",{style:{fontSize:tt.typography.bodySmall.fontSize}},Yt,p.createElement("br",null),p.createElement(Ll.g,{label:tn.text,color:tn.color||rn.F,isActive:!0}),"From ",p.createElement("strong",null,Rt(It.values[Ae]).text),cn,ta),p.createElement("div",{style:{margin:tt.spacing(1,-1,-1,-1),borderTop:`1px solid ${tt.colors.border.weak}`}},Qe&&p.createElement(Ge.D,{label:"Add annotation",icon:"comment-alt",onClick:Qe}),yt.length>0&&yt.map((Kn,Qn)=>p.createElement(Ge.D,{key:Qn,icon:"external-link-alt",target:Kn.target,label:Kn.title,url:Kn.href,onClick:Kn.onClick}))))};Cd.displayName="StateTimelineTooltip";var $m=e(11389),Vm=e(58749),_m=e(52415),zm=e(10875),km=e(21164);const oc=({frames:Q,seriesFrame:ce,dataIdxs:he,seriesIdx:Ae,mode:Ke=mt.$N.Single,sortOrder:Qe=mt.xB.None,scrollable:tt=!1,isPinned:gt,annotate:yt,timeRange:bt,withDuration:It})=>{const Rt=(0,ie.of)(Yr.$),Nt=ce.fields[0],St=Ae!=null?he[Ae]:he.find(sn=>sn!=null),Jt=Nt.display(Nt.values[St]).text;Ke=gt?mt.$N.Single:Ke;const tn=(0,zm.cp)(ce.fields,Nt,he,Ae,Ke,Qe);if(It&&Ke===mt.$N.Single){const sn=ce.fields[Ae],Tn=(0,ks.GY)(sn,St);let cn;Tn&&(cn=Nt.values[Tn]);const ta=Nt.values[St];let Kn;if(cn)Kn=cn&&(0,ks.c5)(cn-ta);else{const Qn=bt.to.valueOf();Kn=(0,ks.c5)(Qn-ta)}tn.push({label:"Duration",value:Kn})}let Yt;if(gt&&Ae!=null){const sn=ce.fields[Ae],Tn=he[Ae],cn=(0,km.u)(sn,Tn);Yt=p.createElement(Vm.S,{dataLinks:cn,annotate:yt})}const Zt={label:Nt.type===Kt.PU.time?"":(0,gn.Ct)(Nt,ce,Q),value:Jt};return p.createElement("div",{className:Rt.wrapper},p.createElement(_m.A,{item:Zt,isPinned:gt}),p.createElement($m.o,{items:tn,isPinned:gt,scrollable:tt}),Yt)},ll=10,Hm=({data:Q,timeRange:ce,timeZone:he,options:Ae,width:Ke,height:Qe,replaceVariables:tt,onChangeTimeRange:gt})=>{const yt=(0,ie.$j)(),bt=(0,p.useCallback)(()=>On?.()===cs.y.Tooltip,[]),It=(0,p.useCallback)(()=>On?.()!==cs.y.Off,[]),Rt=(0,p.useRef)(void 0),Nt=(0,p.useRef)(!1),[St,Jt]=(0,p.useState)(void 0),[tn,Yt]=(0,p.useState)(null),[Zt,sn]=(0,p.useState)(null),[Tn,cn]=(0,p.useState)(null),[ta,Kn]=(0,p.useState)(!1),[Qn,va]=(0,p.useState)(!1),[ca,ma]=(0,p.useState)(null),{sync:On,canAddAnnotations:$n,dataLinkPostProcessor:Nn,eventBus:xa}=(0,ga.d2)(),Wa=()=>{Nt.current=!1,Yt(null),va(!1)},ka=()=>{Nt.current=!Nt.current,va(Nt.current)},{frames:ra,warn:da}=(0,p.useMemo)(()=>(0,ks.Qe)(Q.series,Ae.mergeValues??!0,ce,yt),[Q.series,Ae.mergeValues,ce,yt]),$a=(0,p.useMemo)(()=>(0,ks.Or)(ra,Ae.legend,yt),[ra,Ae.legend,yt]),qa=(0,p.useMemo)(()=>Xr(Ae.timezone,he),[Ae.timezone,he]),as=(0,p.useCallback)((qn,Sn,oa,Ea)=>{const Pa=ra??[],Sa=Pa.reduce((za,gs)=>za+gs.fields.filter(Ht=>Ht.type!==Kt.PU.time).length,0);return Sn===null||oa===null||qn.fields.length-1!==Sa||!qn.fields[Sn]?null:p.createElement(p.Fragment,null,Qn&&p.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},p.createElement(Vr.J,{onClick:Wa,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),p.createElement(Cd,{data:Pa,alignedData:qn,seriesIdx:Sn,datapointIdx:oa,timeZone:he,onAnnotationAdd:Ea}))},[he,ra,Qn]);if(!ra||da)return p.createElement("div",{className:"panel-empty"},p.createElement("p",null,da??"No data found in response"));if(ra.length===1){const qn=(0,xo.wC)(ra[0])}const fa=!!($n&&$n()),Oa=!!S.$.featureToggles.newVizTooltips;return p.createElement(wl.I,{theme:yt,frames:ra,structureRev:Q.structureRev,timeRange:ce,timeZone:qa,width:Ke,height:Qe,legendItems:$a,...Ae,mode:ks.pm.Changes,replaceVariables:tt,dataLinkPostProcessor:Nn},(qn,Sn)=>(Rt.current!==qn&&!Oa&&(Rt.current=ps({config:qn,onUPlotClick:ka,setFocusedSeriesIdx:sn,setFocusedPointIdx:cn,setCoords:Yt,setHover:Jt,isToolTipOpen:Nt,isActive:ta,setIsActive:Kn,sync:On})),p.createElement(p.Fragment,null,p.createElement(bo.K,{config:qn,sync:It,eventBus:xa,frame:Sn}),Oa?p.createElement(p.Fragment,null,Ae.tooltip.mode!==mt.$N.None&&p.createElement(Ja.xl,{config:qn,hoverMode:Ae.tooltip.mode===mt.$N.Multi?Ja.b3.xAll:Ja.b3.xOne,queryZoom:gt,syncTooltip:bt,render:(oa,Ea,Pa,Sa,za,gs,Ht)=>{if(fa&&gs!=null){ma(gs),za();return}const Ls=()=>{let ea=oa.posToVal(oa.cursor.left,"x");ma({from:ea,to:ea}),za()};return p.createElement(oc,{frames:ra??[],seriesFrame:Sn,dataIdxs:Ea,seriesIdx:Pa,mode:Ht?mt.$N.Multi:Ae.tooltip.mode,sortOrder:Ae.tooltip.sort,isPinned:Sa,timeRange:ce,annotate:fa?Ls:void 0,withDuration:!0})},maxWidth:Ae.tooltip.maxWidth,maxHeight:Ae.tooltip.maxHeight}),p.createElement(ht.W,{annotations:Q.annotations??[],config:qn,timeZone:he,newRange:ca,setNewRange:ma,canvasRegionRendering:!1})):p.createElement(p.Fragment,null,p.createElement(Po.j,{config:qn,onZoom:gt}),p.createElement(Gn,{config:qn,onChangeTimeRange:gt}),Q.annotations&&p.createElement(st,{annotations:Q.annotations,config:qn,timeZone:he}),fa?p.createElement(Xo,{data:Sn,timeZone:he,config:qn},({startAnnotating:oa})=>Ae.tooltip.mode===mt.$N.None||Tn===null||!ta&&On&&On()===cs.y.Crosshair?null:p.createElement(Ns.ZL,null,St&&tn&&Zt&&p.createElement(ls.o,{position:{x:tn.viewport.x,y:tn.viewport.y},offset:{x:ll,y:ll},allowPointerEvents:Nt.current},as(Sn,Zt,Tn,()=>{oa({coords:{plotCanvas:tn.canvas,viewport:tn.viewport}}),Wa()})))):p.createElement(Ns.ZL,null,Ae.tooltip.mode!==mt.$N.None&&St&&tn&&p.createElement(ls.o,{position:{x:tn.viewport.x,y:tn.viewport.y},offset:{x:ll,y:ll},allowPointerEvents:Nt.current},as(Sn,Zt,Tn)))))))};var Td=e(25019);const jm=(Q,ce,he)=>{let Ae=Q.options??{};if(ce==="natel-discrete-panel"&&he.angular){const Ke=he.angular,Qe=Q.fieldConfig??{defaults:{},overrides:[]};Ke.units&&(Qe.defaults.unit=Ke.units);const tt={fillOpacity:100,lineWidth:0};Qe.defaults.custom=tt,Ae.mergeValues=!0;const gt={type:Td.d.ValueToText,options:{}};if(Qe.defaults.mappings=[gt],(0,w.isArray)(Ke.colorMaps))for(const yt of Ke.colorMaps){const bt=yt.color;bt&&(gt.options[yt.text]={color:bt})}if((0,w.isArray)(Ke.valueMaps))for(const yt of Ke.valueMaps){const bt=yt.text,It=yt.value;if(bt&&It){let Rt=gt.options[It];Rt?Rt.text=bt:gt.options[It]={text:bt}}}if((0,w.isArray)(Ke.rangeMaps))for(const yt of Ke.rangeMaps){let bt=+yt.from,It=+yt.to;const Rt=yt.text;Rt&&Qe.defaults.mappings.push({type:Td.d.RangeToText,options:{from:bt,to:It,result:{text:Rt}}})}Q.fieldConfig=Qe}return Ae},Fl={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:mt.yL.Auto},Sd={fillOpacity:70,lineWidth:0};class Gm{getSuggestionsForData(ce){const{dataSummary:he}=ce;if(!he.hasData||!he.hasTimeField||!he.hasStringField&&!he.hasNumberField||he.numberFieldCount>=30||he.preferredVisualisationType==="logs")return;ce.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:ns.m.StateTimeline})}}const Qm=new x.m(Hm).setPanelChangeHandler(jm).useFieldConfig({standardOptions:{[kt.uo.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:rn.Y.ContinuousGrYlRd}}},useCustomConfig:Q=>{Q.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Sd.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Sd.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:rc.e,override:rc.e,shouldApply:ce=>ce.type!==Kt.PU.time,process:yn.hS,settings:{isTime:!0}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",defaultValue:!1,editor:Pd.Z,override:Pd.Z,shouldApply:ce=>ce.type!==Kt.PU.time,process:yn.hS,settings:{isTime:!0}}),on.e(Q)}}).setPanelOptions(Q=>{Q.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:Fl.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:mt.yL.Auto,label:"Auto"},{value:mt.yL.Always,label:"Always"},{value:mt.yL.Never,label:"Never"}]},defaultValue:Fl.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:Fl.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:Fl.rowHeight}),fn.H(Q,!1),pn.D(Q,!S.$.featureToggles.newVizTooltips)}).setSuggestionsSupplier(new Gm).setDataSupport({annotations:!0}),ic=({data:Q,alignedData:ce,seriesIdx:he,datapointIdx:Ae,timeZone:Ke})=>{const Qe=(0,ie.$j)();if(!Q||Ae==null)return null;const tt=ce.fields[he],gt=[],yt=new Set;if(tt.getLinks){const Yt=tt.values[Ae],Zt=tt.display?tt.display(Yt):{text:`${Yt}`,numeric:+Yt};tt.getLinks({calculatedValue:Zt,valueRowIndex:Ae}).forEach(sn=>{const Tn=`${sn.title}/${sn.href}`;yt.has(Tn)||(gt.push(sn),yt.add(Tn))})}const bt=ce.fields[0],It=bt.display||(0,Ts.J)({field:bt,timeZone:Ke,theme:Qe}),Rt=tt.state?.origin,Nt=tt.display||(0,Ts.J)({field:tt,timeZone:Ke,theme:Qe}),St=tt.values[Ae],Jt=Nt(St),tn=Rt?(0,gn.Ct)(Q[Rt.frameIndex].fields[Rt.fieldIndex],Q[Rt.frameIndex],Q):null;return p.createElement("div",null,p.createElement("div",{style:{fontSize:Qe.typography.bodySmall.fontSize}},p.createElement("strong",null,It(bt.values[Ae]).text),p.createElement("br",null),p.createElement(Ll.g,{label:Jt.text,color:Jt.color||rn.F,isActive:!0}),tn),gt.length>0&&p.createElement("div",{style:{margin:Qe.spacing(1,-1,-1,-1),borderTop:`1px solid ${Qe.colors.border.weak}`}},gt.map((Yt,Zt)=>p.createElement(Ge.D,{key:Zt,icon:"external-link-alt",target:Yt.target,label:Yt.title,url:Yt.href,onClick:Yt.onClick}))))};ic.displayName="StatusHistoryTooltip";const Md=10,Wl=({data:Q,timeRange:ce,timeZone:he,options:Ae,width:Ke,height:Qe,replaceVariables:tt,onChangeTimeRange:gt})=>{const yt=(0,ie.$j)(),bt=(0,p.useCallback)(()=>On?.()===cs.y.Tooltip,[]),It=(0,p.useCallback)(()=>On?.()!==cs.y.Off,[]),Rt=(0,p.useRef)(void 0),Nt=(0,p.useRef)(!1),[St,Jt]=(0,p.useState)(void 0),[tn,Yt]=(0,p.useState)(null),[Zt,sn]=(0,p.useState)(null),[Tn,cn]=(0,p.useState)(null),[ta,Kn]=(0,p.useState)(!1),[Qn,va]=(0,p.useState)(!1),[ca,ma]=(0,p.useState)(null),{sync:On,canAddAnnotations:$n,dataLinkPostProcessor:Nn,eventBus:xa}=(0,ga.d2)(),Wa=!!($n&&$n()),ka=()=>{Nt.current=!1,Yt(null),va(!1)},ra=()=>{Nt.current=!Nt.current,va(Nt.current)},{frames:da,warn:$a}=(0,p.useMemo)(()=>(0,ks.Qe)(Q.series,!1,ce,yt),[Q.series,ce,yt]),qa=(0,p.useMemo)(()=>(0,ks.Or)(da,Ae.legend,yt),[da,Ae.legend,yt]),as=(0,p.useCallback)((Sn,oa,Ea)=>{const Pa=da??[],Sa=Pa.reduce((za,gs)=>za+gs.fields.filter(Ht=>Ht.type!==Kt.PU.time).length,0);return oa===null||Ea===null||Sn.fields.length-1!==Sa||!Sn.fields[oa]?null:p.createElement(p.Fragment,null,Qn&&p.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},p.createElement(Vr.J,{onClick:ka,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),p.createElement(ic,{data:Pa,alignedData:Sn,seriesIdx:oa,datapointIdx:Ea,timeZone:he}))},[he,da,Qn]),fa=Sn=>Ae.tooltip.mode===mt.$N.None||Tn===null||!ta&&On&&On()===cs.y.Crosshair?null:p.createElement(Ns.ZL,null,St&&tn&&Zt&&p.createElement(ls.o,{position:{x:tn.viewport.x,y:tn.viewport.y},offset:{x:Md,y:Md},allowPointerEvents:Nt.current},as(Sn,Zt,Tn))),Oa=(0,p.useMemo)(()=>Xr(Ae.timezone,he),[Ae.timezone,he]);if(!da||$a)return p.createElement("div",{className:"panel-empty"},p.createElement("p",null,$a??"No data found in response"));if(da[0].length>Ke/2)return p.createElement("div",{className:"panel-empty"},p.createElement("p",null,"Too many points to visualize properly. ",p.createElement("br",null),"Update the query to return fewer points. ",p.createElement("br",null),"(",da[0].length," points received)"));const qn=!!S.$.featureToggles.newVizTooltips;return p.createElement(wl.I,{theme:yt,frames:da,structureRev:Q.structureRev,timeRange:ce,timeZone:Oa,width:Ke,height:Qe,legendItems:qa,...Ae,mode:ks.pm.Samples,replaceVariables:tt,dataLinkPostProcessor:Nn},(Sn,oa)=>(Rt.current!==Sn&&!qn&&(Rt.current=ps({config:Sn,onUPlotClick:ra,setFocusedSeriesIdx:sn,setFocusedPointIdx:cn,setCoords:Yt,setHover:Jt,isToolTipOpen:Nt,isActive:ta,setIsActive:Kn})),p.createElement(p.Fragment,null,p.createElement(bo.K,{config:Sn,sync:It,eventBus:xa,frame:oa}),qn?p.createElement(p.Fragment,null,Ae.tooltip.mode!==mt.$N.None&&p.createElement(Ja.xl,{config:Sn,hoverMode:Ae.tooltip.mode===mt.$N.Multi?Ja.b3.xAll:Ja.b3.xOne,queryZoom:gt,syncTooltip:bt,render:(Ea,Pa,Sa,za,gs,Ht,Ls)=>{if(Wa&&Ht!=null){ma(Ht),gs();return}const ea=()=>{let sa=Ea.posToVal(Ea.cursor.left,"x");ma({from:sa,to:sa}),gs()};return p.createElement(oc,{frames:da??[],seriesFrame:oa,dataIdxs:Pa,seriesIdx:Sa,mode:Ls?mt.$N.Multi:Ae.tooltip.mode,sortOrder:Ae.tooltip.sort,isPinned:za,timeRange:ce,annotate:Wa?ea:void 0,withDuration:!1})},maxWidth:Ae.tooltip.maxWidth,maxHeight:Ae.tooltip.maxHeight}),p.createElement(ht.W,{annotations:Q.annotations??[],config:Sn,timeZone:he,newRange:ca,setNewRange:ma,canvasRegionRendering:!1})):p.createElement(p.Fragment,null,p.createElement(Po.j,{config:Sn,onZoom:gt}),fa(oa),p.createElement(Gn,{config:Sn,onChangeTimeRange:gt}),Q.annotations&&p.createElement(st,{annotations:Q.annotations,config:Sn,timeZone:he,disableCanvasRendering:!0})))))},Ym={colWidth:.9,rowHeight:.9,showValue:mt.yL.Auto},xd={fillOpacity:70,lineWidth:1};class Od{getSuggestionsForData(ce){const{dataSummary:he}=ce;if(!he.hasData||!he.hasTimeField||!he.hasStringField&&!he.hasNumberField||he.numberFieldCount>=30||he.rowCountMax>100||he.preferredVisualisationType==="logs")return;ce.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:rn.Y.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Ke=>{Ke.options.colWidth=.7}}}).append({name:ns.m.StatusHistory})}}const Jm=new x.m(Wl).useFieldConfig({standardOptions:{[kt.uo.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:rn.Y.Thresholds}}},useCustomConfig:Q=>{Q.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:xd.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:xd.fillOpacity,settings:{min:0,max:100,step:1}}),on.e(Q)}}).setPanelOptions(Q=>{Q.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:mt.yL.Auto,label:"Auto"},{value:mt.yL.Always,label:"Always"},{value:mt.yL.Never,label:"Never"}]},defaultValue:mt.yL.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),fn.H(Q,!1),pn.D(Q,!S.$.featureToggles.newVizTooltips)}).setSuggestionsSupplier(new Od).setDataSupport({annotations:!0});var Id=e(69550),bi=e(39651),Ad=e(15292);function Kl({onChange:Q,value:ce,context:he}){const Ae=Ke=>{Ke?.currentTarget.checked&&(he.options.footer.show=!1),Q(Ke?.currentTarget.checked)};return p.createElement(Ad.d,{value:!!ce,onChange:Ae})}function Pi({cellOptions:Q,onChange:ce}){const he=Ke=>{Q.mode=Ke,ce(Q)},Ae=Ke=>{Q.valueDisplayMode=Ke,ce(Q)};return p.createElement(A.B,{direction:"column",gap:0},p.createElement(Hr.D,{label:"Gauge display mode"},p.createElement(ts.z,{value:Q?.mode??mt.eX.Gradient,onChange:he,options:lc})),p.createElement(Hr.D,{label:"Value display"},p.createElement(ts.z,{value:Q?.valueDisplayMode??mt.$l.Text,onChange:Ae,options:Xm})))}const lc=[{value:mt.eX.Basic,label:"Basic"},{value:mt.eX.Gradient,label:"Gradient"},{value:mt.eX.Lcd,label:"Retro LCD"}],Xm=[{value:mt.$l.Color,label:"Value color"},{value:mt.$l.Text,label:"Text color"},{value:mt.$l.Hidden,label:"Hidden"}],Zm=[{value:mt.Wq.Basic,label:"Basic"},{value:mt.Wq.Gradient,label:"Gradient"}],qm=({cellOptions:Q,onChange:ce})=>{const he=Ke=>{Q.mode=Ke,ce(Q)},Ae=()=>{Q.applyToRow=!Q.applyToRow,ce(Q)};return p.createElement(p.Fragment,null,p.createElement(Hr.D,{label:"Background display mode"},p.createElement(ts.z,{value:Q?.mode??mt.Wq.Gradient,onChange:he,options:Zm})),p.createElement(Hr.D,{label:"Apply to entire row",description:"If selected the entire row will be colored as this cell would be."},p.createElement(Ad.d,{value:Q.applyToRow,onChange:Ae})))};var ef=e(28528),Rd=e(30355);const tf=["hideValue","drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"];function ai(Q){const ce=(0,kr.V)(Q);return{...ce,useCustomConfig:he=>{ce.useCustomConfig?.(he),he.addBooleanSwitch({path:"hideValue",name:"Hide value"})}}}const Ld=Q=>{const{cellOptions:ce,onChange:he}=Q,Ae=(0,p.useMemo)(()=>{const tt=ai(Rd.t);return(0,ef.O)(tt,"ChartCell")},[]),Ke=(0,ie.of)(nf),Qe={...Rd.t,...ce};return p.createElement(wr.gW,null,Ae.list(tf.map(tt=>`custom.${tt}`)).map(tt=>{if(tt.showIf&&!tt.showIf(Qe))return null;const gt=tt.editor,yt=tt.path;return p.createElement(Hr.D,{label:tt.name,key:tt.id,className:Ke.field},p.createElement(gt,{onChange:bt=>he({...ce,[yt]:bt}),value:(Bd(yt,Qe)?Qe[yt]:void 0)??tt.defaultValue,item:tt,context:{data:[]}}))}))};function Bd(Q,ce){return Q in ce}const nf=()=>({field:(0,j.css)`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),Ud=({value:Q,onChange:ce})=>{const he=Q.type,Ae=(0,ie.of)(af),Ke=Nd.find(bt=>bt.value.type===he);let[Qe,tt]=(0,p.useState)({});const gt=bt=>{bt.value!==void 0&&(Q=bt.value,Qe[Q.type]!==void 0&&Object.keys(Qe[Q.type]).length>1&&(Q=(0,w.merge)(Q,Qe[Q.type])),ce(Q))},yt=bt=>{Qe[Q.type]=(0,w.merge)(Q,bt),tt(Qe),ce(Qe[Q.type])};return p.createElement("div",{className:Ae.fixBottomMargin},p.createElement(Hr.D,null,p.createElement(V.l6,{options:Nd,value:Ke,onChange:gt})),he===mt.ob.Gauge&&p.createElement(Pi,{cellOptions:Q,onChange:yt}),he===mt.ob.ColorBackground&&p.createElement(qm,{cellOptions:Q,onChange:yt}),he===mt.ob.Sparkline&&p.createElement(Ld,{cellOptions:Q,onChange:yt}))},Nd=[{value:{type:mt.ob.Auto},label:"Auto"},{value:{type:mt.ob.Sparkline},label:"Sparkline"},{value:{type:mt.ob.ColorText},label:"Colored text"},{value:{type:mt.ob.ColorBackground},label:"Colored background"},{value:{type:mt.ob.Gauge},label:"Gauge"},{value:{type:mt.ob.DataLinks},label:"Data links"},{value:{type:mt.ob.JSONView},label:"JSON View"},{value:{type:mt.ob.Image},label:"Image"}],af=Q=>({fixBottomMargin:(0,j.css)({marginBottom:Q.spacing(-2)})}),$l={cellHeight:mt.qM.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class sf{getSuggestionsForData(ce){const he=ce.getListAppender({name:ns.m.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ae=>{Ae.fieldConfig.defaults.custom.minWidth=50}}});ce.dataSummary.fieldCount===0?he.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):he.append({})}}const Vl="Table footer",wd=["Cell options"],cc=new x.m(sl).setPanelChangeHandler(Ml.l1).setMigrationHandler(Ml.fq).useFieldConfig({useCustomConfig:Q=>{Q.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:bi.gB.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:bi.gB.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"Auto",value:"auto"},{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}]},defaultValue:bi.gB.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:Ud,override:Ud,defaultValue:bi.gB.cellOptions,process:yn.hS,category:wd,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:wd,showIf:ce=>ce.cellOptions.type===mt.ob.Auto||ce.cellOptions.type===mt.ob.JSONView||ce.cellOptions.type===mt.ob.ColorText||ce.cellOptions.type===mt.ob.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:bi.gB.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(Q=>{Q.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:$l.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:$l.cellHeight,settings:{options:[{value:mt.qM.Sm,label:"Small"},{value:mt.qM.Md,label:"Medium"},{value:mt.qM.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[Vl],name:"Show table footer",defaultValue:$l.footer?.show}).addCustomEditor({id:"footer.reducer",category:[Vl],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:Id.D.get("stats-picker").editor,defaultValue:[qo.gy.sum],showIf:ce=>ce.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[Vl],name:"Count rows",description:"Display a single count for all data rows",defaultValue:$l.footer?.countRows,showIf:ce=>ce.footer?.reducer?.length===1&&ce.footer?.reducer[0]===qo.gy.count}).addMultiSelect({path:"footer.fields",category:[Vl],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async ce=>{const he=[];if(ce&&ce.data&&ce.data.length>0){const Ae=ce.data[0];for(const Ke of Ae.fields)if(Ke.type===Kt.PU.number){const Qe=(0,gn.Ct)(Ke,Ae,ce.data),tt=Ke.name;he.push({value:tt,label:Qe})}}return he}},defaultValue:"",showIf:ce=>ce.footer?.show&&!ce.footer?.countRows}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:Kl})}).setSuggestionsSupplier(new sf);var dc=e(49880),rf=e.n(dc),uc=e(40996),of=e(36663),yr=(Q=>(Q.Code="code",Q.HTML="html",Q.Markdown="markdown",Q))(yr||{}),Fd=(Q=>(Q.Go="go",Q.Html="html",Q.Json="json",Q.Markdown="markdown",Q.Plaintext="plaintext",Q.Sql="sql",Q.Typescript="typescript",Q.Xml="xml",Q.Yaml="yaml",Q))(Fd||{});const lf="plaintext",cl={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},_l={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function mc(Q){const ce=(0,ie.of)(cf),[he,Ae]=(0,p.useState)({mode:Q.options.mode,content:Wd(Q.options,Q.replaceVariables,ye.Ay.disableSanitizeHtml)});if((0,uc.A)(()=>{const{options:Ke,replaceVariables:Qe}=Q,tt=Wd(Ke,Qe,ye.Ay.disableSanitizeHtml);(tt!==he.content||Ke.mode!==he.mode)&&Ae({mode:Ke.mode,content:tt})},100,[Q]),he.mode===yr.Code){const Ke=Q.options.code??cl;return p.createElement(Ol.B,{key:`${Ke.showLineNumbers}/${Ke.showMiniMap}`,value:he.content,language:Ke.language??cl.language,width:Q.width,height:Q.height,containerStyles:ce.codeEditorContainer,showMiniMap:Ke.showMiniMap,showLineNumbers:Ke.showLineNumbers,readOnly:!0})}return p.createElement(ue.E,{autoHeightMin:"100%",className:ce.containStrict},p.createElement(rf(),{allowRerender:!0,html:he.content,className:ce.markdown,"data-testid":"TextPanel-converted-content"}))}function Wd(Q,ce,he){let{mode:Ae,content:Ke}=Q;if(!Ke)return" ";switch(Ke=ce(Ke,{},Q.code?.language==="json"?"json":"html"),Ae){case yr.Code:break;case yr.HTML:he||(Ke=Fr.sQ.sanitizeTextPanelContent(Ke));break;case yr.Markdown:default:Ke=(0,of.P)(Ke,{noSanitize:he})}return Ke}const cf=Q=>({codeEditorContainer:(0,j.css)`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${Q.colors.background.primary};
    }
  `,markdown:(0,j.cx)("markdown-html",(0,j.css)`
      height: 100%;
    `),containStrict:(0,j.css)({contain:"strict"})});var df=e(70713),uf=e(99544);const Vi=({value:Q,onChange:ce,context:he})=>{const Ae=(0,p.useMemo)(()=>he.options?.mode??yr.Markdown,[he]),Ke=(0,ie.of)(mf),Qe=()=>he.getSuggestions?he.getSuggestions().map(tt=>(0,uf.O)(tt)):[];return p.createElement("div",{className:(0,j.cx)(Ke.editorBox)},p.createElement(df.Ay,{disableHeight:!0},({width:tt})=>tt===0?null:p.createElement(Ol.B,{value:Q,onBlur:ce,onSave:ce,language:Ae,width:tt,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:Qe})))},mf=Q=>({editorBox:(0,j.css)`
    label: editorBox;
    border: 1px solid ${Q.colors.border.medium};
    border-radius: ${Q.shape.radius.default};
    margin: ${Q.spacing(.5)} 0;
    width: 100%;
  `}),ff=Q=>{const ce=parseFloat(Q.pluginVersion||"6.1");let he=Q.options;if(Q.hasOwnProperty("content")&&Q.hasOwnProperty("mode")){const Ke=Q,Qe=Ke.content,tt=Ke.mode;delete Ke.content,delete Ke.mode,ce<7.1&&(he={content:Qe,mode:tt})}return[yr.Code,yr.HTML,yr.Markdown].find(Ke=>Ke===he.mode)||(he={...he,mode:yr.Markdown}),he},gf=new x.m(mc).setPanelOptions(Q=>{Q.addRadio({path:"mode",name:"Mode",settings:{options:[{value:yr.Markdown,label:"Markdown"},{value:yr.HTML,label:"HTML"},{value:yr.Code,label:"Code"}]},defaultValue:_l.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Fd).map(ce=>({value:ce,label:ce}))},defaultValue:cl.language,showIf:ce=>ce.mode===yr.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:cl.showLineNumbers,showIf:ce=>ce.mode===yr.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:cl.showMiniMap,showIf:ce=>ce.mode===yr.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:Vi,defaultValue:_l.content})}).setMigrationHandler(ff);var pf=e(41260),hf=e(18282);class Kd{getSuggestionsForData(ce){const{dataSummary:he}=ce;if(!he.hasTimeField||!he.hasNumberField||he.rowCountTotal<2)return;const Ae=ce.getListAppender({name:ns.m.LineChart,pluginId:"timeseries",options:{legend:{calcs:[],displayMode:mt.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Qe=>{Qe.fieldConfig?.defaults.custom?.drawStyle!==mt.GR.Bars&&(Qe.fieldConfig.defaults.custom.lineWidth=Math.max(Qe.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Ke=100;if(Ae.append({name:ns.m.LineChart}),he.rowCountMax<200&&Ae.append({name:ns.m.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:mt.dx.Smooth}},overrides:[]}}),he.numberFieldCount===1){Ae.append({name:ns.m.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),Ae.append({name:ns.m.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:rn.Y.ContinuousGrYlRd},custom:{gradientMode:mt.on.Scheme,lineInterpolation:mt.dx.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),he.rowCountMax<Ke&&(Ae.append({name:ns.m.BarChart,fieldConfig:{defaults:{custom:{drawStyle:mt.GR.Bars,fillOpacity:100,lineWidth:1,gradientMode:mt.on.Hue}},overrides:[]}}),Ae.append({name:ns.m.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:rn.Y.ContinuousGrYlRd},custom:{drawStyle:mt.GR.Bars,fillOpacity:90,lineWidth:1,gradientMode:mt.on.Scheme}},overrides:[]}}));return}Ae.append({name:ns.m.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:mt.gs.Normal,group:"A"}}},overrides:[]}}),Ae.append({name:ns.m.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:mt.gs.Percent,group:"A"}}},overrides:[]}}),he.rowCountTotal/he.numberFieldCount<Ke&&(Ae.append({name:ns.m.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:mt.GR.Bars,fillOpacity:100,lineWidth:1,gradientMode:mt.on.Hue,stacking:{mode:mt.gs.Normal,group:"A"}}},overrides:[]}}),Ae.append({name:ns.m.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:mt.GR.Bars,fillOpacity:100,lineWidth:1,gradientMode:mt.on.Hue,stacking:{mode:mt.gs.Percent,group:"A"}}},overrides:[]}}))}}function vf(Q){const ce=(0,De.UA)().getCurrent()?.getPanelById(Q);if(ce){const he=ce.transformations?[...ce.transformations]:[];return he.push({id:hf.F.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:he}}}const Ef=({data:Q,timeRange:ce,timeZone:he,width:Ae,height:Ke,options:Qe,fieldConfig:tt,onChangeTimeRange:gt,replaceVariables:yt,id:bt})=>{const{sync:It,canAddAnnotations:Rt,onThresholdsChange:Nt,canEditThresholds:St,showThresholds:Jt,dataLinkPostProcessor:tn,eventBus:Yt}=(0,ga.d2)(),Zt=Qe.orientation===mt.wV.Vertical,sn=(0,p.useMemo)(()=>lo(Q.series,ye.config.theme2,ce),[Q.series,ce]),Tn=(0,p.useMemo)(()=>Xr(Qe.timezone,he),[Qe.timezone,he]),cn=(0,p.useMemo)(()=>{if(sn?.length&&sn.every(On=>On.meta?.type===pf.m.TimeSeriesLong)){const On=vf(bt);return{message:"Long data must be converted to wide",suggestions:On?[On]:void 0}}},[sn,bt]),ta=!!(Rt&&Rt()),Kn=!!ye.config.featureToggles.newVizTooltips,[Qn,va]=(0,p.useState)(null),ca=(0,p.useCallback)(()=>It?.()===cs.y.Tooltip,[]),ma=(0,p.useCallback)(()=>It?.()!==cs.y.Off,[]);return!sn||cn?p.createElement(jn.a,{panelId:bt,message:cn?.message,fieldConfig:tt,data:Q,needsTimeField:!0,needsNumberField:!0,suggestions:cn?.suggestions}):p.createElement(sr,{frames:sn,structureRev:Q.structureRev,timeRange:ce,timeZone:Tn,width:Ae,height:Ke,legend:Qe.legend,options:Qe,replaceVariables:yt,dataLinkPostProcessor:tn},(On,$n)=>p.createElement(p.Fragment,null,p.createElement(Zs.Z,{config:On}),p.createElement(bo.K,{config:On,sync:ma,eventBus:Yt,frame:$n}),Qe.tooltip.mode===mt.$N.None||p.createElement(p.Fragment,null,Kn?p.createElement(Ja.xl,{config:On,hoverMode:Qe.tooltip.mode===mt.$N.Single?Ja.b3.xOne:Ja.b3.xAll,queryZoom:gt,clientZoom:!0,syncTooltip:ca,render:(Nn,xa,Wa,ka=!1,ra,da,$a)=>{if(ta&&da!=null){va(da),ra();return}const qa=()=>{let as=Nn.posToVal(Nn.cursor.left,"x");va({from:as,to:as}),ra()};return p.createElement(Yr.k,{frames:sn,seriesFrame:$n,dataIdxs:xa,seriesIdx:Wa,mode:$a?mt.$N.Multi:Qe.tooltip.mode,sortOrder:Qe.tooltip.sort,isPinned:ka,annotate:ta?qa:void 0,scrollable:Zr(Qe.tooltip)})},maxWidth:Qe.tooltip.maxWidth,maxHeight:Qe.tooltip.maxHeight}):p.createElement(p.Fragment,null,p.createElement(Po.j,{config:On,onZoom:gt,withZoomY:!0}),p.createElement(ds.T,{frames:sn,data:$n,config:On,mode:Qe.tooltip.mode,sortOrder:Qe.tooltip.sort,sync:It,timeZone:he}))),!Zt&&Kn?p.createElement(ht.W,{annotations:Q.annotations??[],config:On,timeZone:he,newRange:Qn,setNewRange:va}):!Zt&&Q.annotations&&p.createElement(st,{annotations:Q.annotations,config:On,timeZone:he}),Kn?void 0:ta&&!Zt?p.createElement(Xo,{data:$n,timeZone:he,config:On},({startAnnotating:Nn})=>p.createElement(vt,{data:$n,config:On,timeZone:he,replaceVariables:yt,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(xa,Wa)=>{Wa&&Nn({coords:Wa.coords})}}]}]})):p.createElement(vt,{data:$n,frames:sn,config:On,timeZone:he,replaceVariables:yt,defaultItems:[]}),Q.annotations&&!Zt&&p.createElement(Cn,{visibleSeries:Ln(On,sn),config:On,exemplars:Q.annotations,timeZone:he}),(St&&Nt||Jt)&&!Zt&&p.createElement(Cs,{config:On,fieldConfig:tt,onThresholdsChange:St?Nt:void 0}),p.createElement(Gn,{config:On,onChangeTimeRange:gt})))};var fc=e(91410),yf=e(20333);const Df=({value:Q,onChange:ce})=>{const he=(0,ie.of)(gc);(!Q||Q.length<1)&&(Q=[""]);const Ae=()=>{ce([...Q,fc.g$.default])},Ke=tt=>{const gt=Q.slice();gt.splice(tt,1),ce(gt)},Qe=(tt,gt)=>{const yt=Q.slice();yt[tt]=gt??fc.g$.default,yt.length===0||yt.length===1&&yt[0]===""?ce(void 0):ce(yt)};return p.createElement("div",null,Q.map((tt,gt)=>p.createElement("div",{className:he.wrapper,key:`${gt}.${tt}`},p.createElement("span",{className:he.first},p.createElement(yf.U,{onChange:yt=>Qe(gt,yt),includeInternal:!0,value:tt??fc.g$.default})),gt===Q.length-1?p.createElement(Co.K,{name:"plus",onClick:Ae,tooltip:"Add timezone"}):p.createElement(Co.K,{name:"times",onClick:()=>Ke(gt),tooltip:"Remove timezone"}))))},gc=Q=>({wrapper:(0,j.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,j.css)`
    margin-right: 8px;
    flex-grow: 2;
  `});var $d=e(50082),bf=e(74856),Pf=e(38477),Cf=e(63117),Tf=e(32023),Vd=e(68706);let zl=null;const Sf=(Q,ce,he,Ae)=>{if(ce==="graph"&&he.angular){const{fieldConfig:Ke,options:Qe,annotations:tt}=Mf({...he.angular,fieldConfig:Ae,panel:Q});return tt?.length>0&&Af(tt),Q.fieldConfig=Ke,Q.alert=he.angular.alert,Qe}return Of(Q),{}};function Mf(Q){let ce=[];const he=Q.fieldConfig?.overrides??[],Ae=Q.yaxes??[];let Ke=_d(Ae[0]);Q.fieldConfig?.defaults&&(Ke={...Q.fieldConfig?.defaults,...Ke});const Qe={fill:Q.dashes?"dash":"solid",dash:[Q.dashLength??10,Q.spaceLength??10]};if(Q.aliasColors)for(const Rt of Object.keys(Q.aliasColors)){const Nt=Q.aliasColors[Rt];Nt&&he.push({matcher:{id:Er.Ct.byName,options:Rt},properties:[{id:kt.uo.Color,value:{mode:rn.Y.Fixed,fixedColor:Nt}}]})}let tt=!1;if(Q.seriesOverrides?.length)for(const Rt of Q.seriesOverrides){if(!Rt.alias)continue;const St={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(Rt.alias)?Er.Ct.byRegexp:Er.Ct.byName,options:Rt.alias},properties:[]};let Jt;for(const tn of Object.keys(Rt)){const Yt=Rt[tn];switch(tn){case"alias":case"$$hashKey":break;case"yaxis":if(Yt===2){const Zt=_d(Ae[1]);xf(Ke,Zt,St.properties)}break;case"fill":St.properties.push({id:"custom.fillOpacity",value:Yt*10});break;case"fillBelowTo":tt=!0,St.properties.push({id:"custom.fillBelowTo",value:Yt});break;case"fillGradient":Yt&&(St.properties.push({id:"custom.fillGradient",value:"opacity"}),St.properties.push({id:"custom.fillOpacity",value:Yt*10}));break;case"points":St.properties.push({id:"custom.showPoints",value:Yt?mt.yL.Always:mt.yL.Never});break;case"bars":Yt?(St.properties.push({id:"custom.drawStyle",value:mt.GR.Bars}),St.properties.push({id:"custom.fillOpacity",value:100})):St.properties.push({id:"custom.drawStyle",value:mt.GR.Line});break;case"lines":Yt?St.properties.push({id:"custom.drawStyle",value:"line"}):St.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":St.properties.push({id:"custom.lineWidth",value:Yt});break;case"pointradius":St.properties.push({id:"custom.pointSize",value:2+Yt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Jt||(Jt={fill:Qe.fill,dash:[...Qe.dash]}),tn){case"dashLength":Jt.dash[0]=Yt;break;case"spaceLength":Jt.dash[1]=Yt;break;case"dashes":Jt.fill=Yt?"dash":"solid";break}break;case"stack":St.properties.push({id:"custom.stacking",value:If(Yt)});break;case"color":St.properties.push({id:"color",value:{fixedColor:Yt,mode:rn.Y.Fixed}});break;case"transform":St.properties.push({id:"custom.transform",value:Yt==="negative-Y"?mt.NU.NegativeY:mt.NU.Constant});break;default:console.log("Ignore override migration:",Rt.alias,tn,Yt)}}Jt&&St.properties.push({id:"custom.lineStyle",value:Jt}),St.properties.length&&he.push(St)}const gt=Ke.custom??{};gt.drawStyle=Q.bars?mt.GR.Bars:Q.lines?mt.GR.Line:mt.GR.Points,Q.points?(gt.showPoints=mt.yL.Always,(0,w.isNumber)(Q.pointradius)&&(gt.pointSize=2+Q.pointradius*2)):gt.drawStyle!==mt.GR.Points&&(gt.showPoints=mt.yL.Never),gt.lineWidth=Q.linewidth,Qe.fill!=="solid"&&(gt.lineStyle=Qe),tt?gt.fillOpacity=35:(0,w.isNumber)(Q.fill)&&(gt.fillOpacity=Q.fill*10),(0,w.isNumber)(Q.fillGradient)&&Q.fillGradient>0&&(gt.gradientMode=mt.on.Opacity,gt.fillOpacity=Q.fillGradient*10),gt.spanNulls=Q.nullPointMode===Sl.UW.Ignore,Q.steppedLine&&(gt.lineInterpolation=mt.dx.StepAfter),gt.drawStyle===mt.GR.Bars&&(gt.fillOpacity=100),Q.stack&&(gt.stacking={mode:Q.percentage?mt.gs.Percent:mt.gs.Normal,group:kr.S.stacking.group},Q.percentage&&Q.yaxis&&(delete Ke.min,delete Ke.max,Ke.decimals===0&&delete Ke.decimals)),Ke.custom=(0,w.omitBy)(gt,w.isNil),Ke.nullValueMode=Q.nullPointMode;const yt={legend:{displayMode:mt.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:mt.$N.Single,sort:mt.xB.None}},bt=Q.legend;if(bt){if(bt.show?yt.legend.displayMode=bt.alignAsTable?mt.lm.Table:mt.lm.List:yt.legend.showLegend=!1,bt.rightSide&&(yt.legend.placement="right"),Q.legend.values){const Rt=(0,w.pickBy)(Q.legend);yt.legend.calcs=vc(Rt)}Q.legend.sideWidth&&(yt.legend.width=Q.legend.sideWidth),bt.hideZero&&he.push(zd(qo.gy.allIsZero)),bt.hideEmpty&&he.push(zd(qo.gy.allIsNull))}Q.timeRegions?.length&&Q.timeRegions.map((Nt,St)=>({name:`T${St}`,color:Nt.colorMode!=="custom"?Nt.colorMode:Nt.fillColor,line:Nt.line,fill:Nt.fill,fromDayOfWeek:Nt.fromDayOfWeek,toDayOfWeek:Nt.toDayOfWeek,from:Nt.from,to:Nt.to})).forEach((Nt,St)=>{const Jt={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[Q.panel.id]},iconColor:Nt.fillColor??Nt.color,name:`Time region for panel ${Q.panel.title}${St>0?` ${St}`:""}`,target:{queryType:Vd.nj.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:Nt.fromDayOfWeek,toDayOfWeek:Nt.toDayOfWeek,from:Nt.from,to:Nt.to,timezone:"utc"}}};Nt.fill?ce.push(Jt):Nt.line&&(Jt.iconColor=Nt.lineColor??"white",ce.push(Jt))});const It=Q.tooltip;if(It&&(It.shared!==void 0&&(yt.tooltip.mode=It.shared?mt.$N.Multi:mt.$N.Single),It.sort!==void 0&&It.shared))switch(It.sort){case 1:yt.tooltip.sort=mt.xB.Ascending;break;case 2:yt.tooltip.sort=mt.xB.Descending;break;default:yt.tooltip.sort=mt.xB.None}if(Q.thresholds&&Q.thresholds.length>0){let Rt=[],Nt=!1,St=!1;const Jt=Q.thresholds.sort((Yt,Zt)=>Yt.value>Zt.value?1:-1);for(let Yt=0;Yt<Jt.length;Yt++){const Zt=Jt[Yt],sn=Jt.length>Yt+1?Jt[Yt+1]:null;Zt.fill&&(Nt=!0),Zt.line&&(St=!0),Zt.op==="gt"&&Rt.push({value:Zt.value,color:pc(Zt)}),Zt.op==="lt"&&(Rt.length===0&&Rt.push({value:-1/0,color:pc(Zt)}),sn&&sn.op==="gt"&&sn.value>Zt.value?Rt.push({value:Zt.value,color:"transparent"}):sn&&sn.op==="lt"?Rt.push({value:Zt.value,color:pc(sn)}):Rt.push({value:Zt.value,color:"transparent"}))}Rt.length>0&&Rt[0].value!==-1/0&&Rt.unshift({color:"transparent",value:-1/0});let tn=Nt?mt.Ly.Area:mt.Ly.Line;St&&Nt&&(tn=mt.Ly.LineAndArea),Ke.custom.thresholdsStyle={mode:tn},Ke.thresholds={mode:$d.O.Absolute,steps:Rt}}return Q.xaxis&&Q.xaxis.show===!1&&Q.xaxis.mode==="time"&&he.push({matcher:{id:Er.Ct.byType,options:Kt.PU.time},properties:[{id:"custom.axisPlacement",value:mt.vM.Hidden}]}),{fieldConfig:{defaults:(0,w.omitBy)(Ke,w.isNil),overrides:he},options:yt,annotations:ce}}function pc(Q){return Q.colorMode==="critical"?"red":Q.colorMode==="warning"?"orange":Q.colorMode==="custom"?Q.fillColor||Q.lineColor:"red"}function _d(Q){if(!Q)return{};const ce={axisPlacement:Q.show?mt.vM.Auto:mt.vM.Hidden};if(Q.label&&(ce.axisLabel=Q.label),Q.logBase){const he=Q.logBase;(he===2||he===10)&&(ce.scaleDistribution={type:mt.L4.Log,log:he})}return(0,w.omitBy)({unit:Q.format,decimals:hc(Q.decimals),min:hc(Q.min),max:hc(Q.max),custom:ce},w.isNil)}function xf(Q,ce,he){for(const[Qe,tt]of Object.entries(ce))Qe!=="custom"&&tt!==Q[Qe]&&he.push({id:Qe,value:tt});he.push({id:"custom.axisPlacement",value:mt.vM.Right});const Ae=Q.custom??{},Ke=ce.custom??{};for(const[Qe,tt]of Object.entries(Ke))tt!==Ae[Qe]&&he.push({id:`custom.${Qe}`,value:tt})}function hc(Q){if((0,w.isNumber)(Q))return Q;if((0,w.isString)(Q)){const ce=Number(Q);if(!isNaN(ce))return ce}}function vc(Q){const ce=[];for(const he of Object.keys(Q)){const Ae=qo.AS.getIfExists(he);Ae&&ce.push(Ae.id)}return ce}function Of(Q){Q.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(Q.fieldConfig.defaults.custom.hideFrom.viz=Q.fieldConfig.defaults.custom.hideFrom.graph,delete Q.fieldConfig.defaults.custom.hideFrom.graph),Q.fieldConfig?.overrides&&(Q.fieldConfig.overrides=Q.fieldConfig.overrides.map(ce=>(ce.properties=ce.properties.map(he=>(he.id==="custom.hideFrom"&&he.value.graph&&(he.value.viz=he.value.graph,delete he.value.graph),he)),ce)))}function zd(Q){return{matcher:{id:Er.Ct.byValue,options:{reducer:Q,op:mt.zT.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function If(Q){const ce=kr.S.stacking?.group;return{mode:Q?mt.gs.Normal:mt.gs.None,group:(0,w.isString)(Q)?Q:ce}}function Af(Q){const ce=window.__grafanaSceneContext;if(ce instanceof Cf.H$){const Ae=Tf.b4.getDataLayers(ce),Ke=[...Ae.state.annotationLayers];for(let Qe of Q){const tt=new Pf.g({key:`annotations-${Qe.name}`,query:Qe,name:Qe.name,isEnabled:Qe.enable,isHidden:Qe.hide});Ke.push(tt)}Ae.setState({annotationLayers:Ke});return}const he=(0,De.UA)().getCurrent();he&&(he.annotations.list=[...he.annotations.list,...Q],zl==null&&(zl=setTimeout(()=>{zl=null,(0,bf.jG)().refreshTimeModel()})))}const Rf=new x.m(Ef).setPanelChangeHandler(Sf).useFieldConfig((0,kr.V)(kr.S)).setPanelOptions(Q=>{pn.D(Q,!1,!0),fn.H(Q),Q.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:Df,defaultValue:void 0})}).setSuggestionsSupplier(new Kd).setDataSupport({annotations:!0,alertStates:!0});var kl=e(92599),kd=e(35090);const Hl={wrapper:(0,j.css)`
    height: 100%;
    overflow: scroll;
  `},Lf=({data:Q,options:ce})=>{const he=(0,p.createRef)(),Ae=(0,p.useMemo)(()=>(0,kd.L)(Q.series[0]),[Q.series]),Ke=(0,ko.A)(async()=>await(0,cd.l)().get(Q.request?.targets[0].datasource?.uid));return!Q||!Q.series.length||!Ae?p.createElement("div",{className:"panel-empty"},p.createElement("p",null,"No data found in response")):p.createElement("div",{className:Hl.wrapper},p.createElement("div",{ref:he}),p.createElement(kl.V,{dataFrames:Q.series,scrollElementClass:Hl.wrapper,traceProp:Ae,datasource:Ke.value,topOfViewRef:he,createSpanLink:ce.createSpanLink,focusedSpanId:ce.focusedSpanId,createFocusSpanLink:ce.createFocusSpanLink}))};class Bf{getListWithDefaults(ce){return ce.getListAppender({name:ns.m.Trace,pluginId:"traces"})}getSuggestionsForData(ce){!ce.data||!ce.data.series[0]||ce.data.series[0].meta?.preferredVisualisationType==="trace"&&this.getListWithDefaults(ce).append({name:ns.m.Trace,score:Rn.nQ.Best})}}const Uf=new x.m(Lf).setSuggestionsSupplier(new Bf);var Nf=e(85200),wf=e(40458);const Ff=({data:Q,timeRange:ce,timeZone:he,width:Ae,height:Ke,options:Qe,fieldConfig:tt,replaceVariables:gt,id:yt})=>{const bt=!!S.$.featureToggles.newVizTooltips,{dataLinkPostProcessor:It}=(0,ga.d2)(),Rt=Qe.xField??Q.series[0].fields.find(Jt=>Jt.type===Kt.PU.number)?.name,Nt=(Jt,tn,Yt)=>(tn={...tn,x:Nf.sJ.get(Er.Ct.byName).get(Rt)},(0,wf.m)(Jt,tn)),St=(0,p.useMemo)(()=>{if(Q.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:Q.series};let Jt=Q.series,tn;if(Qe.xField){if(tn=(0,io.findFieldIndex)(Qe.xField,Jt[0]),tn==null)return{warning:"Unable to find field: "+Qe.xField,frames:Q.series}}else if(tn=Jt[0].fields.findIndex(Yt=>Yt.type===Kt.PU.number),tn===-1)return{warning:"No numeric fields found for X axis",frames:Jt};if(tn!=null){const Yt=Jt[0].fields[tn];if(Yt.type===Kt.PU.number&&!(0,tr.g2)(Yt.values))return{warning:"Values must be in ascending order",frames:Jt}}return{frames:lo(Jt,S.$.theme2,void 0,tn)}},[Q.series,Qe.xField]);return St.warning||!St.frames?p.createElement(jn.a,{panelId:yt,fieldConfig:tt,data:Q,message:St.warning,needsNumberField:!0}):p.createElement(sr,{frames:St.frames,structureRev:Q.structureRev,timeRange:ce,timeZone:he,width:Ae,height:Ke,legend:Qe.legend,options:Qe,preparePlotFrame:Nt,replaceVariables:gt,dataLinkPostProcessor:It},(Jt,tn)=>p.createElement(p.Fragment,null,p.createElement(Zs.Z,{config:Jt}),Qe.tooltip.mode!==mt.$N.None&&p.createElement(p.Fragment,null,bt?p.createElement(Ja.xl,{config:Jt,hoverMode:Qe.tooltip.mode===mt.$N.Single?Ja.b3.xOne:Ja.b3.xAll,render:(Yt,Zt,sn,Tn=!1)=>p.createElement(Yr.k,{frames:St.frames,seriesFrame:tn,dataIdxs:Zt,seriesIdx:sn,mode:Qe.tooltip.mode,sortOrder:Qe.tooltip.sort,isPinned:Tn,scrollable:Zr(Qe.tooltip)}),maxWidth:Qe.tooltip.maxWidth,maxHeight:Qe.tooltip.maxHeight}):p.createElement(ds.T,{frames:St.frames,data:tn,config:Jt,mode:Qe.tooltip.mode,sortOrder:Qe.tooltip.sort,timeZone:he}))))};class Wf{getSuggestionsForData(ce){const{dataSummary:he}=ce;return he.numberFieldCount<2||he.rowCountTotal<2||he.rowCountTotal<2?void 0:ce.getListAppender({name:ns.m.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:mt.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ke=>{Ke.fieldConfig?.defaults.custom?.drawStyle!==mt.GR.Bars&&(Ke.fieldConfig.defaults.custom.lineWidth=Math.max(Ke.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const Kf=new x.m(Ff).useFieldConfig((0,kr.V)(kr.S,!1)).setPanelOptions(Q=>{const ce=["X Axis"];Q.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:ce,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:he=>he.type===Kt.PU.number}}),pn.D(Q,!1,!0),fn.H(Q)}).setSuggestionsSupplier(new Wf),$f=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],Hd=()=>{const Q=(0,ie.of)(Vf);return p.createElement("div",{className:Q.container},p.createElement("h1",{className:Q.title},"Welcome to SyncCity"),p.createElement("div",{className:Q.help},p.createElement("h3",{className:Q.helpText},"Need help?"),p.createElement("div",{className:Q.helpLinks},$f.map((ce,he)=>p.createElement("a",{key:`${ce.label}-${he}`,className:Q.helpLink,href:`${ce.href}?utm_source=grafana_gettingstarted`},ce.label)))))},Vf=Q=>({container:(0,j.css)`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${Q.spacing(3)};

      ${Q.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${Q.breakpoints.down("sm")} {
        padding: 0 ${Q.spacing(1)};
      }
    `,title:(0,j.css)`
      margin-bottom: 0;

      ${Q.breakpoints.down("lg")} {
        margin-bottom: ${Q.spacing(1)};
      }

      ${Q.breakpoints.down("md")} {
        font-size: ${Q.typography.h2.fontSize};
      }
      ${Q.breakpoints.down("sm")} {
        font-size: ${Q.typography.h3.fontSize};
      }
    `,help:(0,j.css)`
      display: flex;
      align-items: baseline;
    `,helpText:(0,j.css)`
      margin-right: ${Q.spacing(2)};
      margin-bottom: 0;

      ${Q.breakpoints.down("md")} {
        font-size: ${Q.typography.h4.fontSize};
      }

      ${Q.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:(0,j.css)`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:(0,j.css)`
      margin-right: ${Q.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${Q.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),_f=new x.m(Hd).setNoPadding(),Qf={"core:plugin/graphite":async()=>await e.e(6134).then(e.bind(e,8652)),"core:plugin/cloudwatch":async()=>await Promise.all([e.e(2651),e.e(3766)]).then(e.bind(e,92651)),"core:plugin/dashboard":async()=>await e.e(2058).then(e.bind(e,92058)),"core:plugin/elasticsearch":async()=>await Promise.all([e.e(2261),e.e(1717)]).then(e.bind(e,82261)),"core:plugin/opentsdb":async()=>await e.e(747).then(e.bind(e,24989)),"core:plugin/grafana":async()=>await e.e(3648).then(e.bind(e,62391)),"core:plugin/influxdb":async()=>await Promise.all([e.e(6224),e.e(9404)]).then(e.bind(e,23912)),"core:plugin/loki":async()=>await Promise.all([e.e(629),e.e(4417),e.e(1477)]).then(e.bind(e,26798)),"core:plugin/mixed":async()=>await e.e(2513).then(e.bind(e,12870)),"core:plugin/mysql":async()=>await Promise.all([e.e(6224),e.e(6918)]).then(e.bind(e,18715)),"core:plugin/grafana-postgresql-datasource":async()=>await Promise.all([e.e(6224),e.e(8651)]).then(e.bind(e,38254)),"core:plugin/mssql":async()=>await Promise.all([e.e(6224),e.e(9040)]).then(e.bind(e,56694)),"core:plugin/prometheus":async()=>await Promise.all([e.e(629),e.e(6712),e.e(9546)]).then(e.bind(e,86712)),"core:plugin/alertmanager":async()=>await e.e(4737).then(e.bind(e,27013)),"core:plugin/text":b,"core:plugin/timeseries":P,"core:plugin/trend":D,"core:plugin/state-timeline":a,"core:plugin/status-history":v,"core:plugin/candlestick":o,"core:plugin/graph":async()=>await Promise.all([e.e(9362),e.e(8068)]).then(e.bind(e,229)),"core:plugin/xychart":async()=>S.$.featureToggles.autoMigrateXYChartPanel?await e.e(3772).then(e.bind(e,80983)):await Promise.all([e.e(707),e.e(5594)]).then(e.bind(e,89598)),"core:plugin/geomap":async()=>await Promise.all([e.e(1698),e.e(707),e.e(3928),e.e(190)]).then(e.bind(e,63928)),"core:plugin/canvas":async()=>await Promise.all([e.e(707),e.e(7523)]).then(e.bind(e,43495)),"core:plugin/dashlist":m,"core:plugin/alertlist":t,"core:plugin/annolist":n,"core:plugin/heatmap":async()=>await e.e(5857).then(e.bind(e,46369)),"core:plugin/table":g,"core:plugin/table-old":async()=>await e.e(8777).then(e.bind(e,78491)),"core:plugin/news":h,"core:plugin/live":d,"core:plugin/stat":Km,"core:plugin/datagrid":l,"core:plugin/debug":i,"core:plugin/flamegraph":c,"core:plugin/gettingstarted":u,"core:plugin/gauge":zu,"core:plugin/piechart":y,"core:plugin/bargauge":s,"core:plugin/barchart":r,"core:plugin/logs":E,"core:plugin/traces":C,"core:plugin/welcome":T,"core:plugin/nodeGraph":async()=>await Promise.all([e.e(1698),e.e(5511),e.e(7317)]).then(e.bind(e,68403)),"core:plugin/histogram":f};var Ec=e(81900),jl=e(63770),Yf=e(52762),Jf=e(23482),Xf=e(21313),Zf=e(72635),qf=e(34796),eg=e.n(qf),tg=e(95093),ng=e.n(tg),ag=e(28848),Gd=e.n(ag),sg=e(40961),rg=e(8867),og=e(63329),ig=e(52594),lg=e(25213),cg=e(23546),dg=e(75091),ug=e(32975),mg=e(82611),fg=e(52845),Qd=e(29317),Xp=e(54087),Zp=e(80851),qp=e(32176),eh=e(31221),th=e(91520),nh=e(92275),ah=e(82013),sh=e(2341),rh=e(19538),gg=e(39954),pg=e(85858),hg=e(13303),vg=e(8984),Eg=e(91950),Yd=e(31140),yg=e(78827),Dg=e(68576),bg=e(92247);const dl=vg;dl.PanelPlugin=x.m,dl.DataSourcePlugin=M.tD,dl.AppPlugin=O.hX,dl.DataSourceApi=M.mA;const Pg=["jquery.flot.crosshair","jquery.flot.events","jquery.flot.fillbelow","jquery.flot.gauge","jquery.flot.pie","jquery.flot.selection","jquery.flot.stack","jquery.flot.stackpercent","jquery.flot.time","jquery.flot"].reduce((Q,ce)=>({...Q,[ce]:{fakeDep:1}}),{}),Cg={"@emotion/css":j,"@emotion/react":Yf,"@grafana/data":gg,"@grafana/runtime":hg,"@grafana/slate-react":Qd.Ay,"@grafana/ui":dl,"@kusto/monaco-kusto":Jf,"app/core/app_events":{default:Uo.lE,__useDefault:!0},"app/core/config":{default:ye.Ay,__useDefault:!0},"app/core/core":{appEvents:Uo.lE,contextSrv:Uo.TP},"app/core/services/backend_srv":{BackendSrv:Tr.Mf,getBackendSrv:Tr.AI},"app/core/table_model":{default:Eg.A,__useDefault:!0},"app/core/time_series":{default:Yd.A,__useDefault:!0},"app/core/time_series2":{default:Yd.A,__useDefault:!0},"app/core/utils/datemath":pg,"app/core/utils/flatten":yg,"app/core/utils/kbn":{default:Dg.A,__useDefault:!0},"app/core/utils/ticks":bg,"app/features/dashboard/impression_store":{impressions:Gr.A},d3:Xf,emotion:j,i18next:Zf,jquery:{default:eg(),__useDefault:!0},...Pg,lodash:{default:L(),__useDefault:!0},moment:{default:ng(),__useDefault:!0},prismjs:Gd(),react:p,"react-dom":sg,"react-inlinesvg":rg,"react-redux":og,"react-router-dom":ig,"react-router":lg,redux:cg,rxjs:dg,"rxjs/operators":ug,slate:mg.Ay,"slate-plain-serializer":fg.A,"slate-react":Qd.Ay};function ul({url:Q,source:ce,transformSourceMapURL:he=!1,transformAssets:Ae=!0}){const Ke=Q.split("/public/plugins/"),Qe=Ke[0],tt=Ke[1].split("/")[0];let gt=ce;return Ae&&(gt=gt.replace(/(\/?)(public\/plugins)/g,`${Qe}/$2`),gt=gt.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${Qe}/public/$2$3`)),he&&(gt=gt.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${Qe}/public/plugins/${tt}/$2.map`)),gt}var yc=e(45179),Ci=e(94429);async function Tg(Q,ce,he){const Ae=await Q(ce,he),Ke=Ae.headers.get("content-type")||"";if(yc.Bu.test(Ke)){let tt=await Ae.text();if((0,Ci.OD)(Ae.url)){const gt=ul({url:Ae.url,source:tt});return new Response(new Blob([gt],{type:"text/javascript"}))}return new Response(new Blob([tt],{type:"text/javascript"}))}return Ae}function Sg(Q,ce,he){const Ae=ce.endsWith("module.js")&&!(0,Ci.OD)(ce);try{const Ke=Q.apply(this,[ce,he]),Qe=xg(Ke);return Ae?(0,Ec.ni)(Qe):Qe}catch{return yc.$b.test(ce)?`${S.$.appSubUrl??""}/public/${ce}`:(console.log(`SystemJS: failed to resolve '${ce}'`),ce)}}function Mg(Q,ce){if(ce.endsWith(".css")&&!Q){const Ae=jl.z.get(ce)?.default;Ae&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,Ae])}}function xg(Q){return Q.startsWith(`${yc.XV}:`)?Q:(Q.endsWith("!")&&(Q=Q.slice(0,-1)),["css","js","json","wasm"].some(Ae=>Q.endsWith(Ae))?Q:Q+".js")}var Og=e(22055),Ig=e(6262),Jd=e(27716),Xd=e(35853);function Ag(Q){const ce=new URL(window.location.href),he=new URL(Q);return ce.host===he.host}async function Rg(Q,ce,he){let Ae="";if(Ag(Q)?(Ae=await(await fetch(Q)).text(),Ae=ul({url:Q,source:Ae,transformSourceMapURL:!0,transformAssets:!1})):(0,Ci.OD)(Q)&&(Ae=await(await fetch(Q)).text(),Ae=ul({url:Q,source:Ae,transformSourceMapURL:!0,transformAssets:!0})),Ae.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");Ae=Zd(Ae),he.evaluate(Ae)}async function Lg(Q){if((0,Ci.OD)(Q.module)){const ce=Q.module;let Ae=await(await fetch(ce)).text();return Ae=ul({url:ce,source:Ae,transformSourceMapURL:!0,transformAssets:!0}),Ae}else{let ce=(0,Ci.Av)(Q.module);const he=(0,Ec.ni)(ce);let Ke=await(await fetch(he)).text();return Ke=ul({url:he,source:Ke,transformSourceMapURL:!0,transformAssets:!1}),Ke=Zd(Ke),Ke}}function Zd(Q){return Q.replace(/window\.location/gi,"window.locationSandbox")}function Bg(Q){Q.evaluate(`${Xd.V.toString()};${Xd.V.name}()`)}const si=["iframe"];var qd=e(7077),Ug=e(29505),Gl=e(43429),Ng=e(34867);const wg=!!S.$.featureToggles.frontendSandboxMonitorOnly;function Fg(Q){return!!Q&&typeof Q=="object"&&Q?.hasOwnProperty("plugin")}function oh(Q){throw new Error(`Unexpected object: ${Q}. This should never happen.`)}const Dc=(0,Ng.DW)("sandbox",{monitorOnly:String(wg)});function Wg(Q){return Q instanceof p.Component}function Io(Q,ce){Dc.logWarning(Q,ce)}function ml(Q,ce){Dc.logError(Q,ce)}function eu(Q,ce){Dc.logInfo(Q,ce)}async function Kg({isAngular:Q,pluginId:ce}){if(!S.$.featureToggles.pluginsFrontendSandbox||Q||location.search.includes("nosandbox")&&S.$.buildInfo.env==="development"||S.$.disableFrontendSandboxForPlugins.includes(ce))return!1;const Ke=await(0,Jd.x)(ce);return!(Ke.type===Gl.QE.app&&Ke.signatureType===Gl.kv.grafana)}function $g(Q){return Q?.constructor?.name==="RegExp"}function bc(Q){return Q&&($g(Q)&&(0,qd.U)(Q)?new RegExp(Q):Array.isArray(Q)?Q.map(bc):typeof Q=="object"?Object.keys(Q).reduce((ce,he)=>(Reflect.set(ce,he,bc(Reflect.get(Q,he))),ce),{}):Q)}const ri=Symbol.for("@@SANDBOX_LIVE_VALUE"),tu=!!S.$.featureToggles.frontendSandboxMonitorOnly;function Vg(Q,ce){const he=Reflect.get(Q,"nodeName");if(he==="body"||Q===document.body)return document.body;if(he==="head"||Q===document.head||Q===document.documentElement)return Q;if(si.includes(he)&&(Io("<"+he+"> is not allowed in sandboxed plugins",{pluginId:ce,param:he}),!tu))throw new Error("<"+he+"> is not allowed in sandboxed plugins");if(jg(Q,ce)||Q.parentNode===document.body||Q.closest("#reactRoot")===null||tu)return Q;{const Ae=document.createElement(he);return Ae.dataset.grafanaPluginSandboxElement="true",Ae}}function _g(Q){if(typeof Q=="object"&&Q instanceof Element)try{return Q.nodeName!==void 0}catch{return!1}return!1}function zg(Q){const ce=Reflect.get(Q,"style");Object.hasOwn(ce,ri)||Reflect.defineProperty(ce,ri,{})}function Pc(Q){Q&&(Array.isArray(Q)?(Q.forEach(Pc),nu(Q)):typeof Q=="object"&&(Object.values(Q).forEach(Pc),nu(Q)))}function nu(Q){if(Q)return Object.hasOwn(Q,ri)||Reflect.defineProperty(Q,ri,{}),Q}function kg(Q){Q&&(Object.hasOwn(Q,ri)||((0,qd.U)(Q)&&!(Q instanceof Function)&&(Wg(Q)||Q instanceof M.mA||Q instanceof Ug.f5)?Reflect.defineProperty(Q,ri,{}):Q===Gd().languages&&Object.defineProperty(Q,ri,{})))}function Hg(Q){return Object.hasOwn(Q,ri)}function jg(Q,ce){return!document.contains(Q)||Q.closest(`[data-plugin-sandbox=${ce}]`)!==null}let vo;function ih(){return vo||(vo=document.createElement("div"),vo.setAttribute("id","grafana-plugin-sandbox-body"),vo.setAttribute("data-plugin-sandbox","true"),vo.dataset.pluginSandbox="sandboxed-plugin",vo.style.width="100%",vo.style.height="0%",vo.style.overflow="hidden",vo.style.top="0",vo.style.left="0",document.body.appendChild(vo)),vo}let au=!1;function Gg(){au||(au=!0,Qg())}function Qg(){const Q=window.history.replaceState;Object.defineProperty(window.history,"replaceState",{value:function(...ce){let he=ce;try{he=(0,w.cloneDeep)(ce)}catch(Ae){Io("Error cloning args in window.history.replaceState",{error:String(Ae)})}return Reflect.apply(Q,this,he)},writable:!0,configurable:!0,enumerable:!1})}const Kr=new Map,Wo=!!S.$.featureToggles.frontendSandboxMonitorOnly,su=Symbol.for("@SANDBOX_LIVE_API_PATCHED");function Yg(){return Kr.size===0&&(Jg(Kr),Xg(Kr),Zg(Kr),np(Kr),tp(Kr),qg(Kr),ep(Kr),ap(Kr),sp(Kr),ru(Kr),rp(Kr),ip(Kr)),Kr}function Ql(Q,ce){return Io(`Plugin ${ce.id} tried to set a sandboxed property`,{pluginId:ce.id,attrOrMethod:String(Q),entity:"window"}),Wo?Q:()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function Jg(Q){const ce=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const Ae of ce){const Ke=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,Ae);if(Ke){let Qe=function(tt,gt){const yt=gt.id;return Io(`Plugin ${yt} tried to access iframe.${Ae}`,{pluginId:yt,attrOrMethod:Ae,entity:"iframe"}),Wo?tt:()=>{throw new Error("iframe."+Ae+" is not allowed in sandboxed plugins")}};var he=Qe;Ke.value&&Q.set(Ke.value,Qe),Ke.set&&Q.set(Ke.set,Qe),Ke.get&&Q.set(Ke.get,Qe)}}}function Xg(Q){const ce=Object.getOwnPropertyDescriptor(window,"console");if(ce?.value){let Ae=function(Ke,Qe){const tt=Qe.id;if(Wo)return Ke;function gt(...yt){console.log(`[plugin ${tt}]`,...yt)}return{log:gt,warn:gt,error:gt,info:gt,debug:gt,table:gt}};var he=Ae;Q.set(ce.value,Ae)}ce?.set&&Q.set(ce.set,Ql)}function Zg(Q){function ce(Ae,Ke){const Qe=Ke.id;return Io(`Plugin ${Qe} accessed window.alert`,{pluginId:Qe,attrOrMethod:"alert",entity:"window"}),Wo?Ae:function(...tt){console.log(`[plugin ${Qe}]`,...tt)}}const he=Object.getOwnPropertyDescriptor(window,"alert");he?.value&&Q.set(he.value,ce),he?.set&&Q.set(he.set,Ql)}function qg(Q){function ce(Ae,Ke){const Qe=Ke.id;return function(...gt){for(const yt of gt){const bt=yt?.toLowerCase()||"";for(const It of si)if(bt.includes("<"+It)){if(Io(`Plugin ${Qe} tried to set ${It} in innerHTML`,{pluginId:Qe,attrOrMethod:"innerHTML",param:It,entity:"HTMLElement"}),Wo)continue;throw new Error("<"+It+"> is not allowed in sandboxed plugins")}}(0,w.isFunction)(Ae)&&Ae.apply(this,gt)}}const he=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const Ae of he)Ae?.set&&Q.set(Ae.set,ce),Ae?.value&&Q.set(Ae.value,ce)}function ep(Q){function ce(Ae,Ke){const Qe=Ke.id;return function(gt,yt){if(gt&&si.includes(gt)&&(Io(`Plugin ${Qe} tried to create ${gt}`,{pluginId:Qe,attrOrMethod:"createElement",param:gt,entity:"document"}),!Wo))return document.createDocumentFragment();if((0,w.isFunction)(Ae))return Ae.apply(this,[gt,yt])}}const he=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");he?.value&&Q.set(he.value,ce)}function tp(Q){function ce(Qe,tt){const gt=tt.id;return function(bt,It){const Rt=bt?.nodeName?.toLowerCase()||"";if(bt&&si.includes(Rt)&&(Io(`Plugin ${gt} tried to insert ${Rt}`,{pluginId:gt,attrOrMethod:"insertChild",param:Rt,entity:"HTMLElement"}),!Wo))return document.createDocumentFragment();if((0,w.isFunction)(Qe))return Qe.call(this,bt,It)}}function he(Qe,tt){const gt=tt.id;return function(bt,It){const Rt=It?.nodeName?.toLowerCase()||"";if(It&&si.includes(Rt)&&(Io(`Plugin ${gt} tried to insert ${Rt}`,{pluginId:gt,attrOrMethod:"insertAdjacentElement",param:Rt,entity:"HTMLElement"}),!Wo))return document.createDocumentFragment();if((0,w.isFunction)(Qe))return Qe.call(this,bt,It)}}const Ae=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const Qe of Ae)Qe?.value&&Q.set(Qe.set,ce);const Ke=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");Ke?.value&&Q.set(Ke.set,he)}function np(Q){function ce(Qe,tt){const gt=tt.id;return function(...bt){let It=bt;const Rt=bt?.filter(Nt=>!si.includes(Nt.nodeName.toLowerCase()));Wo||(It=Rt),It.length!==Rt.length&&Io(`Plugin ${gt} tried to append fobiddenElements`,{pluginId:gt,attrOrMethod:"append",param:bt?.filter(Nt=>si.includes(Nt.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,w.isFunction)(Qe)&&Qe.apply(this,It)}}function he(Qe,tt,gt){const yt=tt.id;return function(It){const Rt=It?.nodeName?.toLowerCase()||"";if(It&&si.includes(Rt)&&(Io(`Plugin ${yt} tried to append ${Rt}`,{pluginId:yt,attrOrMethod:"appendChild",param:Rt,entity:"HTMLElement"}),!Wo))return document.createDocumentFragment();if(gt&&It&&Rt==="script"&&It instanceof HTMLScriptElement){Rg(It.src,tt,gt).then(()=>{It.onload?.call(It,new Event("load"))}).catch(Nt=>{It.onerror?.call(It,new ErrorEvent("error",{error:Nt}))});return}if((0,w.isFunction)(Qe))return Qe.call(this,It)}}const Ae=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const Qe of Ae)Qe?.value&&Q.set(Qe.value,ce);const Ke=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");Ke?.value&&Q.set(Ke.value,he)}function ap(Q){const ce=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function he(Ae){return function(...Qe){try{const tt=(0,w.cloneDeep)(Qe);(0,w.isFunction)(Ae)&&Ae.apply(this,tt)}catch{throw new Error("postMessage arguments are invalid objects")}}}ce?.value&&Q.set(ce.value,he)}function sp(Q){const ce=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");ce?.get&&Q.set(ce.get,()=>()=>window);const he=["write"];for(const Ae of he){const Ke=Object.getOwnPropertyDescriptor(Document.prototype,Ae);Ke?.set&&Q.set(Ke.set,Ql),Ke?.value&&Q.set(Ke.value,Ql)}}async function ru(Q){const ce=Reflect.get(window,"monaco");if(!ce||Object.hasOwn(ce,su))return;const he=ce.languages.setMonarchTokensProvider;function Ae(){return function(...Ke){return Ke.length!==2?he.apply(ce,Ke):he.call(ce,Ke[0],bc(Ke[1]))}}Q.set(ce.languages.setMonarchTokensProvider,Ae),Reflect.set(ce,su,{})}async function rp(Q){const ce=Object.getOwnPropertyDescriptor(window,"postMessage");function he(Ae){return function(...Qe){try{const tt=(0,w.cloneDeep)(Qe);(0,w.isFunction)(Ae)&&Ae.apply(this,tt)}catch{throw new Error("postMessage arguments are invalid objects")}}}ce?.value&&Q.set(ce.value,he)}function op(Q){ru(Kr)}function ip(Q){function ce(he){return(0,w.isFunction)(he)?function(...Ae){const Ke=he.apply(this,Ae);return Pc(Ke),Ke}:he}Q.set(w.cloneDeep,ce)}var lp=e(66161);async function cp(Q,ce){if(!Fg(Q))return Q;const he=await Promise.resolve(Q.plugin);if(Reflect.has(he,"panel")&&Reflect.set(he,"panel",fl(Reflect.get(he,"panel"),ce)),Reflect.has(he,"components")){const Ae=Reflect.get(he,"components");Object.entries(Ae).forEach(([Ke,Qe])=>{Reflect.set(Ae,Ke,fl(Qe,ce))}),Reflect.set(he,"components",Ae)}if(Reflect.has(he,"root")&&Reflect.set(he,"root",fl(Reflect.get(he,"root"),ce)),Reflect.has(he,"extensionConfigs")){const Ae=Reflect.get(he,"extensionConfigs");for(const Ke of Ae)Reflect.has(Ke,"component")&&Reflect.set(Ke,"component",fl(Reflect.get(Ke,"component"),ce));Reflect.set(he,"extensionConfigs",Ae)}if(Reflect.has(he,"configPages")){const Ae=Reflect.get(he,"configPages")??[];for(const[Ke,Qe]of Object.entries(Ae))!Qe.body||!(0,w.isFunction)(Qe.body)||Reflect.set(Ae,Ke,{...Qe,body:fl(Qe.body,ce)});Reflect.set(he,"configPages",Ae)}return Q}const fl=(Q,ce)=>{const he=p.memo(Ae=>p.createElement("div",{"data-plugin-sandbox":ce.id,style:{height:ce.type===Gl.QE.app||ce.type===Gl.QE.panel?"100%":"auto"}},p.createElement(Q,{...Ae})));return he.displayName=`GrafanaSandbox(${Q.displayName||Q.name||"Component"})`,he},Cc=new Map,ou={};async function dp({pluginId:Q}){Gg();try{const ce=await(0,Jd.x)(Q);return Cc.has(Q)||Cc.set(Q,up(ce)),Cc.get(Q)}catch(ce){const he=new Error(`Could not import plugin ${Q} inside sandbox: `+ce);throw ml(he,{pluginId:Q,error:String(ce)}),he}}async function up(Q){return eu("Loading with sandbox",{pluginId:Q.id}),new Promise(async(ce,he)=>{const Ae=Yg();let Ke;function Qe(gt){if(_g(gt)){const It=Vg(gt,Q.id);return zg(It),It}else kg(gt);const yt=Ae.get(gt);if(yt)return yt(gt,Q,Ke);const bt=op(gt);return bt||gt}Ke=(0,Og.A)(window,{distortionCallback:Qe,defaultPolicy:Ig.G,liveTargetCallback:Hg,endowments:Object.getOwnPropertyDescriptors({locationSandbox:window.location,setImmediate:function(gt,...yt){return setTimeout(gt,0,...yt)},get monaco(){return Reflect.get(window,"monaco")},get Prism(){return Reflect.get(window,"Prism")},get jQuery(){return Reflect.get(window,"jQuery")},get $(){return Reflect.get(window,"jQuery")},get grafanaBootData(){if(ou[Q.id+"-grafanaBootData"]||(ou[Q.id+"-grafanaBootData"]=!0,eu("Plugin using window.grafanaBootData",{sandbox:"true",pluginId:Q.id,guessedPluginName:Q.id,parent:"window",packageName:"window",key:"grafanaBootData"})),S.$.buildInfo.env==="development")throw new Error(`Error in ${Q.id}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`);return console.error(`${Q.id.toUpperCase()}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`),S.$.bootData},async define(gt,yt,bt){let It,Rt;Array.isArray(gt)?(It=gt,Rt=yt):(It=yt,Rt=bt);try{const Nt=mp(It,Q.id),St=Rt.apply(null,Nt),Jt=await cp(St,Q);ce(Jt)}catch(Nt){const St=new Error(`Could not execute plugin's define ${Q.id}: `+Nt);ml(St,{pluginId:Q.id,error:String(Nt)}),he(St)}}})}),Bg(Ke);let tt="";try{tt=await Lg(Q)}catch(gt){const yt=new Error(`Could not load plugin code ${Q.id}: `+gt);ml(yt,{pluginId:Q.id,error:String(gt)}),he(yt)}try{Ke.evaluate(tt)}catch(gt){const yt=new Error(`Could not run plugin ${Q.id} inside sandbox: `+gt);ml(yt,{pluginId:Q.id,error:String(gt)}),he(yt)}})}function mp(Q,ce){const he=[];for(const Ae of Q){let Ke=lp.s.get(Ae);if(Ke?.__useDefault&&(Ke=Ke.default),!Ke){const Qe=new Error(`[sandbox] Could not resolve dependency ${Ae}`);throw ml(Qe,{pluginId:ce,dependency:Ae,error:String(Qe)}),Qe}he.push(Ke)}return he}const fp=(0,Ci.kB)(Cg);jl.z.addImportMap({imports:fp});const jo=jl.z.constructor.prototype;jo.shouldFetch=()=>!0;const gp=jo.import;jo.import=function(...Q){return gp.apply(this,Q).then(ce=>ce&&ce.__useDefault?ce.default:ce)};const pp=jo.fetch;jo.fetch=function(Q,ce){return Tg(pp,Q,ce)};const hp=jo.resolve;jo.resolve=Sg.bind(jo,hp),jo.onload=Mg;async function Tc({path:Q,version:ce,isAngular:he,pluginId:Ae}){ce&&(0,Ec.GD)({path:Q,version:ce});const Ke=Qf[Q];if(Ke)return typeof Ke=="function"?await Ke():Ke;let Qe=(0,Ci.Av)(Q);return await Kg({isAngular:he,pluginId:Ae})?dp({pluginId:Ae}):jl.z.import(Qe)}function vp(Q){return Tc({path:Q.module,version:Q.info?.version,isAngular:Q.angular?.detected,pluginId:Q.id}).then(ce=>{if(ce.plugin){const he=ce.plugin;return he.meta=Q,he}if(ce.Datasource){const he=new M.tD(ce.Datasource);return he.setComponentsFromLegacyExports(ce),he.meta=Q,he}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function Ep(Q){return Tc({path:Q.module,version:Q.info?.version,isAngular:Q.angular?.detected,pluginId:Q.id}).then(ce=>{const he=ce.plugin?ce.plugin:new O.hX;return he.init(Q),he.meta=Q,he.setComponentsFromLegacyExports(ce),he})}},66161:(Y,I,e)=>{"use strict";e.d(I,{s:()=>t});const t=new Map([])},60677:(Y,I,e)=>{"use strict";e.d(I,{W3:()=>m,Wy:()=>l,z4:()=>i});var t=e(43429),n=e(34867),r=e(15162),s=e(27716),o=e(22854);async function m(c){const u=await(0,s.x)(c);let f;if(u.type===t.QE.app&&(f=await(0,o.ui)(u)),u.type===t.QE.datasource&&(f=await(0,o.cS)(u)),u.type===t.QE.panel&&(f=await(0,r.Kk)(u)),u.type===t.QE.renderer&&(f={meta:u}),!f)throw new Error("Unknown Plugin type: "+u.type);return f}function l(c,u,f){let E={...c},h;function y(v,g){return!g.startsWith(v.url??"")||h&&(h.url?.length??0)>(v.url?.length??0)?v:(h&&(h.active=!1),h={...v,active:!0},h)}function a(v,g=0){if(g>10)return v;if(v.children){const b=v.children.map(P=>a(P,g+1));return{...y(v,f),children:b}}return y(v,f)}return E.children=(E?.children??[]).map(a),{main:E,node:h??E}}const i=(0,n.DW)("features.plugins")},81862:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>S,Cj:()=>f,HO:()=>g,Mj:()=>h,Nm:()=>E,Q9:()=>v,RS:()=>C,c1:()=>u,g$:()=>b,ny:()=>y,ri:()=>a,uh:()=>P,xu:()=>d});var t=e(30038),n=e(2543),r=e.n(n),s=e(72724),o=e(47232),m=e(2913),l=e(10096);const i={orgId:m.Ay.bootData.user.orgId,timeZone:m.Ay.bootData.user.timezone,weekStart:m.Ay.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},c=(0,t.Z0)({name:"user/profile",initialState:i,reducers:{updateTimeZone:(p,x)=>{p.timeZone=x.payload.timeZone},updateWeekStart:(p,x)=>{p.weekStart=x.payload.weekStart},updateFiscalYearStartMonth:(p,x)=>{p.fiscalYearStartMonth=x.payload.fiscalYearStartMonth},setUpdating:(p,x)=>{p.isUpdating=x.payload.updating},userLoaded:(p,x)=>{p.user=x.payload.user},initLoadTeams:(p,x)=>{p.teamsAreLoading=!0},teamsLoaded:(p,x)=>{p.teams=x.payload.teams,p.teamsAreLoading=!1},initLoadOrgs:(p,x)=>{p.orgsAreLoading=!0},orgsLoaded:(p,x)=>{p.orgs=x.payload.orgs,p.orgsAreLoading=!1},initLoadSessions:(p,x)=>{p.sessionsAreLoading=!0},sessionsLoaded:(p,x)=>{const A=x.payload.sessions.sort((R,B)=>Number(B.isActive)-Number(R.isActive));p.sessions=A.map(R=>({id:R.id,isActive:R.isActive,seenAt:(0,s.fq)(R.seenAt),createdAt:R.createdAt,clientIp:R.clientIp,browser:R.browser,browserVersion:R.browserVersion,os:R.os,osVersion:R.osVersion,device:R.device})),p.sessionsAreLoading=!1},userSessionRevoked:(p,x)=>{p.sessions=p.sessions.filter(A=>A.id!==x.payload.tokenId),p.isUpdating=!1}}}),u=p=>async x=>{(0,n.set)(l.TP,"user.fiscalYearStartMonth",p),x(M({fiscalYearStartMonth:p}))},f=p=>async x=>{(!(0,n.isString)(p)||(0,n.isEmpty)(p))&&(p=m.Ay?.bootData?.user?.timezone),(0,n.set)(l.TP,"user.timezone",p),x(D({timeZone:p}))},d=p=>async x=>{(!(0,n.isString)(p)||(0,n.isEmpty)(p))&&(p=m.Ay?.bootData?.user?.weekStart),(0,n.set)(l.TP,"user.weekStart",p),x(T({weekStart:p})),(0,o.$D)(p)},{setUpdating:E,initLoadOrgs:h,orgsLoaded:y,initLoadTeams:a,teamsLoaded:v,userLoaded:g,userSessionRevoked:b,initLoadSessions:P,sessionsLoaded:C,updateTimeZone:D,updateWeekStart:T,updateFiscalYearStartMonth:M}=c.actions,O=c.reducer,S={user:c.reducer}},32901:(Y,I,e)=>{"use strict";e.d(I,{O:()=>t,q:()=>n});const t=r=>r.timeZone,n=r=>r.fiscalYearStartMonth},64152:(Y,I,e)=>{"use strict";e.d(I,{d:()=>r,m:()=>n});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(o){this.extraRenderActions=this.extraRenderActions.concat(o)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,r=new t},65160:(Y,I,e)=>{"use strict";e.d(I,{c:()=>V,E:()=>z});var t=e(46942),n=e.n(t),r=e(2543),s=e(55127),o=e.n(s),m=e(96540),l=e(41987),i=e(76287),c=e(18226),u=e(39070),f=e(14236),d=e(26272),E=e(13544),h=e(19347),y=e(7376),a=e(14110),v=e(39938),g=e(66602),b=e(22214),P=e(10343),C=e(7788),D=e(44836),T=e(74856),M=e(84423),O=e(64152),S=e(32196),p=e(40845),x=e(14578),A=e(10354),R=e(72093),B=e(51612);const U=J=>{const{query:G,queries:H,onChange:q,collapsedText:le,renderExtras:me,hidden:k}=J,ee=(0,p.of)(K),[X,j]=(0,m.useState)(!1),[ne,te]=(0,m.useState)(null),oe=ye=>{j(!0)},ie=ye=>{if(j(!1),ne){te(null);return}G.refId!==ye&&q({...G,refId:ye})},ue=ye=>{const Be=ye.currentTarget.value.trim();if(Be.length===0){te("An empty query name is not allowed");return}for(const ve of H)if(ve!==G&&Be===ve.refId){te("Query name already exists");return}ne&&te(null)},be=ye=>{ie(ye.currentTarget.value.trim())},ge=ye=>{ye.key==="Enter"&&ie(ye.currentTarget.value)},re=ye=>{ye.target.select()};return m.createElement(m.Fragment,null,m.createElement("div",{className:ee.wrapper},!X&&m.createElement("button",{className:ee.queryNameWrapper,"aria-label":E.Tp.components.QueryEditorRow.title(G.refId),title:"Edit query name",onClick:oe,"data-testid":"query-name-div",type:"button"},m.createElement("span",{className:ee.queryName},G.refId),m.createElement(x.I,{name:"pen",className:ee.queryEditIcon,size:"sm"})),X&&m.createElement(m.Fragment,null,m.createElement(A.p,{type:"text",defaultValue:G.refId,onBlur:be,autoFocus:!0,onKeyDown:ge,onFocus:re,invalid:ne!==null,onChange:ue,className:ee.queryNameInput,"data-testid":"query-name-input"}),ne&&m.createElement(R.P,{horizontal:!0},ne)),F(J,ee),me&&m.createElement("div",{className:ee.itemWrapper},me()),k&&m.createElement("em",{className:ee.contextInfo},"Hidden")),le&&m.createElement("div",{className:ee.collapsedText},le))},F=(J,G)=>{const{alerting:H,dataSource:q,onChangeDataSource:le}=J;return le?m.createElement("div",{className:G.itemWrapper},m.createElement(B.s,{variables:!0,alerting:H,current:q.name,onChange:le})):m.createElement("em",{className:G.contextInfo},"(",q.name,")")},K=J=>({wrapper:(0,S.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${J.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:(0,S.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${J.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${J.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${J.colors.action.hover};
        border: 1px dashed ${J.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${J.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:(0,S.css)`
      font-weight: ${J.typography.fontWeightMedium};
      color: ${J.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${J.spacing(.5)};
    `,queryEditIcon:(0,S.cx)((0,S.css)`
        margin-left: ${J.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:(0,S.css)`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:(0,S.css)`
      font-weight: ${J.typography.fontWeightRegular};
      font-size: ${J.typography.bodySmall.fontSize};
      color: ${J.colors.text.secondary};
      padding-left: ${J.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:(0,S.css)`
      font-size: ${J.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${J.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:(0,S.css)`
      display: flex;
      margin-left: 4px;
    `});function w({error:J}){const G=(0,p.of)(L),H=J?.message??J?.data?.message??"Query error";return m.createElement("div",{className:G.wrapper},m.createElement("div",{className:G.icon},m.createElement(x.I,{name:"exclamation-triangle"})),m.createElement("div",{className:G.message},H,J.traceId!=null&&m.createElement(m.Fragment,null,m.createElement("br",null)," ",m.createElement("span",null,"(Trace ID: ",J.traceId,")"))))}const L=J=>({wrapper:(0,S.css)({marginTop:J.spacing(.5),background:J.colors.background.secondary,display:"flex"}),icon:(0,S.css)({background:J.colors.error.main,color:J.colors.error.contrastText,padding:J.spacing(1)}),message:(0,S.css)({fontSize:J.typography.bodySmall.fontSize,fontFamily:J.typography.fontFamilyMonospace,padding:J.spacing(1)})});class V extends m.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,h.l)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const G=(0,y.E)(),H='<plugin-component type="query-ctrl" />',q={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=G.load(this.element,q,H),this.angularScope=q.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:G,onChange:H,queries:q,onRunQuery:le,onAddQuery:me,app:k=l.Jk.PanelEditor,history:ee}=this.props,{datasource:X,data:j}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(X?.components?.QueryCtrl)return m.createElement("div",{ref:ne=>this.element=ne});if(X){let ne=this.getReactQueryEditor(X);if(ne)return m.createElement(i.p,{instanceSettings:this.props.dataSource},m.createElement(ne,{key:X?.name,query:G,datasource:X,onChange:H,onRunQuery:le,onAddQuery:me,data:j,range:(0,T.jG)().timeRange(),queries:q,app:k,history:ee}))}return m.createElement("div",null,m.createElement(D.x6,{i18nKey:"query-operation.query-editor-not-exported"},"Data source plugin does not export any Query Editor component"))},this.onToggleEditMode=(G,H)=>{G.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),H.isOpen||H.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:G,query:H,onQueryRemoved:q}=this.props;G(H),q&&q()},this.onCopyQuery=()=>{const{query:G,onAddQuery:H,onQueryCopied:q}=this.props,le=(0,r.cloneDeep)(G);H(le),q&&q()},this.onHideQuery=()=>{const{query:G,onChange:H,onRunQuery:q,onQueryToggled:le}=this.props;H({...G,hide:!G.hide}),q(),le&&le(G.hide),(0,a.rR)("query_editor_row_hide_query_clicked",{hide:!G.hide})},this.onToggleHelp=()=>{this.setState(G=>({showingHelp:!G.showingHelp}))},this.onClickExample=G=>{G.datasource===void 0&&(G.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...G,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:G,query:H}=this.props,le=(z(G,H.refId)?.series??[]).reduce((X,j)=>{if(!j.meta?.notices)return X;const ne=(0,r.filter)(j.meta.notices,{severity:"warning"})??[];return X.concat(ne)},[]),me=(0,r.uniqBy)(le,"text");if(!(me.length>0))return null;const ee=me.map(X=>X.text).join(`
`);return m.createElement(v.E,{key:"query-warning",color:"orange",icon:"exclamation-triangle",text:m.createElement(m.Fragment,null,me.length," ",o()("warning",me.length)),tooltip:ee})},this.renderExtraActions=()=>{const{query:G,queries:H,data:q,onAddQuery:le,dataSource:me}=this.props,k=O.d.getAllExtraRenderAction().map((ee,X)=>ee({query:G,queries:H,timeRange:q.timeRange,onAddQuery:le,dataSource:me,key:X})).filter(Boolean);return k.push(this.renderWarnings()),k},this.renderActions=G=>{const{query:H,hideHideQueryButton:q=!1}=this.props,{hasTextEditMode:le,datasource:me,showingHelp:k}=this.state,ee=!!H.hide,X=me?.components?.QueryEditorHelp;return m.createElement(m.Fragment,null,X&&m.createElement(P.A,{title:(0,D.t)("query-operation.header.datasource-help","Show data source help"),icon:"question-circle",onClick:this.onToggleHelp,active:k}),le&&m.createElement(P.q,{title:(0,D.t)("query-operation.header.toggle-edit-mode","Toggle text edit mode"),icon:"pen",onClick:j=>{this.onToggleEditMode(j,G)}}),this.renderExtraActions(),m.createElement(P.q,{title:(0,D.t)("query-operation.header.duplicate-query","Duplicate query"),icon:"copy",onClick:this.onCopyQuery}),q?null:m.createElement(P.A,{dataTestId:E.Tp.components.QueryEditorRow.actionButton("Hide response"),title:H.hide?(0,D.t)("query-operation.header.show-response","Show response"):(0,D.t)("query-operation.header.hide-response","Hide response"),icon:ee?"eye-slash":"eye",active:ee,onClick:this.onHideQuery}),m.createElement(P.q,{title:(0,D.t)("query-operation.header.remove-query","Remove query"),icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=G=>{const{alerting:H,query:q,dataSource:le,onChangeDataSource:me,onChange:k,queries:ee,renderHeaderExtras:X}=this.props;return m.createElement(U,{query:q,queries:ee,onChangeDataSource:me,dataSource:le,hidden:q.hide,onClick:j=>this.onToggleEditMode(j,G),onChange:k,collapsedText:G.isOpen?null:this.renderCollapsedText(),renderExtras:X,alerting:H})}}componentDidMount(){const{data:G,query:H,id:q}=this.props,le=z(G,H.refId);this.id=(0,r.uniqueId)(q+"_"),this.setState({data:le}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:G,queries:H}=this.props,{datasource:q}=this.state,le=new M.a9({targets:H}),me={},k=this;return{datasource:q,target:G,panel:le,dashboard:me,refresh:()=>{G.hide!==k.props.query.hide&&(G.hide=k.props.query.hide),this.props.onChange(G),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new c.o,range:(0,T.jG)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const G=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return G?.rawRef?.uid??G?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let G;const H=this.getInterpolatedDataSourceUID();try{G=await this.dataSourceSrv.get(H)}catch{G=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(G),this.setState({datasource:G,queriedDataSourceIdentifier:H,hasTextEditMode:(0,r.has)(G,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(G){const{datasource:H,queriedDataSourceIdentifier:q}=this.state,{data:le,query:me}=this.props;if(G.id!==this.props.id&&(this.id=(0,r.uniqueId)(this.props.id+"_")),le!==G.data){const k=z(le,me.refId);this.setState({data:k}),this.angularScope&&(this.angularScope.range=(0,T.jG)().timeRange()),this.angularQueryEditor&&k&&N(this.angularScope,k,this.angularQueryEditor)}if(H&&q!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(G){if(G)switch(this.props.app){case l.Jk.Explore:return G.components?.ExploreMetricsQueryField||G.components?.ExploreLogsQueryField||G.components?.ExploreQueryField||G.components?.QueryEditor;case l.Jk.PanelEditor:case l.Jk.Dashboard:default:return G.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:G}=this.state;return G?.getQueryDisplayText?G.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:G,index:H,visualization:q,collapsable:le}=this.props,{datasource:me,showingHelp:k,data:ee}=this.state,X=G.hide,j=ee?.error&&ee.error.refId===G.refId?ee.error:ee?.errors?.find(ie=>ie.refId===G.refId),ne=n()("query-editor-row",{"query-editor-row--disabled":X,"gf-form-disabled":X});if(!me)return null;const te=this.renderPluginEditor(),oe=me.components?.QueryEditorHelp;return m.createElement("div",{"data-testid":"query-editor-row","aria-label":E.Tp.components.QueryEditorRows.rows},m.createElement(C.u,{id:this.id,draggable:!0,collapsable:le,index:H,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},m.createElement("div",{className:ne,id:this.id},m.createElement(g.Xw,null,k&&oe&&m.createElement(b.j,null,m.createElement(oe,{onClickExample:ie=>this.onClickExample(ie),query:this.props.query,datasource:me})),te),j&&m.createElement(w,{error:j}),q)))}}function N(J,G,H){if(G.state===u.Gu.Done){const q=G.series.map(le=>(0,f.w3)(le));J.events.emit(d.ee.dataReceived,q)}else G.state===u.Gu.Error&&J.events.emit(d.ee.dataError,G.error);setTimeout(H.digest)}function z(J,G){const H=J.series.filter(k=>k.refId===G);if(J.state!==u.Gu.Loading&&(J.error||J.errors?.length)&&!J.series.length)return{...J,state:u.Gu.Error};let q=J.state,le=J.errors?.find(k=>k.refId===G);!le&&J.error&&(le=J.error.refId===G?J.error:void 0),q!==u.Gu.Loading&&(le?q=u.Gu.Error:J.state===u.Gu.Error&&(q=u.Gu.Done));const me=J.timeRange;return{...J,state:q,series:H,error:le,errors:le?[le]:void 0,timeRange:me}}},44932:(Y,I,e)=>{"use strict";e.d(I,{L:()=>m});var t=e(96540),n=e(55244),r=e(14110),s=e(19347),o=e(65160);class m extends t.PureComponent{constructor(){super(...arguments),this.onRemoveQuery=c=>{this.props.onQueriesChange(this.props.queries.filter(u=>u!==c))},this.onDragStart=c=>{const{queries:u,dsSettings:f}=this.props;(0,r.rR)("query_row_reorder_started",{startIndex:c.source.index,numberOfQueries:u.length,datasourceType:f.type})},this.onDragEnd=c=>{const{queries:u,onQueriesChange:f,dsSettings:d}=this.props;if(!c||!c.destination)return;const E=c.source.index,h=c.destination.index;if(E===h){(0,r.rR)("query_row_reorder_canceled",{startIndex:E,endIndex:h,numberOfQueries:u.length,datasourceType:d.type});return}const y=Array.from(u),[a]=y.splice(E,1);y.splice(h,0,a),f(y),(0,r.rR)("query_row_reorder_ended",{startIndex:E,endIndex:h,numberOfQueries:u.length,datasourceType:d.type})}}onChangeQuery(c,u){const{queries:f,onQueriesChange:d}=this.props;d(f.map((E,h)=>h===u?c:E))}onDataSourceChange(c,u){const{queries:f,onQueriesChange:d}=this.props;d(f.map((E,h)=>{if(h!==u)return E;const y={type:c.type,uid:c.uid};return E.datasource&&(0,s.l)().getInstanceSettings(E.datasource)?.type===c.type?{...E,datasource:y}:{refId:E.refId,hide:E.hide,datasource:y}}))}render(){const{dsSettings:c,data:u,queries:f,app:d,history:E,eventBus:h,onAddQuery:y,onRunQueries:a,onQueryCopied:v,onQueryRemoved:g,onQueryToggled:b,queryRowWrapper:P}=this.props;return t.createElement(n.JY,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},t.createElement(n.gL,{droppableId:"transformations-list",direction:"vertical"},C=>t.createElement("div",{"data-testid":"query-editor-rows",ref:C.innerRef,...C.droppableProps},f.map((D,T)=>{const M=l(D,c),O=c.meta.mixed?p=>this.onDataSourceChange(p,T):void 0,S=t.createElement(o.c,{id:D.refId,index:T,key:D.refId,data:u,query:D,dataSource:M,onChangeDataSource:O,onChange:p=>this.onChangeQuery(p,T),onRemoveQuery:this.onRemoveQuery,onAddQuery:y,onRunQuery:a,onQueryCopied:v,onQueryRemoved:g,onQueryToggled:b,queries:f,app:d,history:E,eventBus:h});return P?P(S,D.refId):S}),C.placeholder)))}}const l=(i,c)=>i.datasource&&(0,s.l)().getInstanceSettings(i.datasource)||c},37464:(Y,I,e)=>{"use strict";e.d(I,{g:()=>G,K:()=>q});var t=e(32196),n=e(96540),r=e(39070),s=e(43127),o=e(41987),m=e(43429),l=e(13544),i=e(19347),c=e(12131),u=e(66864),f=e(55852),d=e(40276),E=e(37390),h=e(3911),y=e(38894),a=e(16817),v=e(36663),g=e(17172),b=e(39558);function P({pluginId:me}){const{value:k,loading:ee,error:X}=(0,a.A)(async()=>(0,g.AI)().get(`/api/plugins/${me}/markdown/query_help`),[]),j=(0,v.G)(k);return ee?n.createElement(b._,{text:"Loading help..."}):X?n.createElement("h3",null,"An error occurred when loading help."):k===""?n.createElement("h3",null,"No query help could be found."):n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:j}})}var C=e(2913),D=e(27677),T=e(21969),M=e(50481),O=e(51612),S=e(53478),p=e(74106),x=e(14348),A=e(8480),R=e(93117),B=e(64152),U=e(44932),F=e(65879),K=e(10354),w=e(15292),L=e(7788);class V extends n.PureComponent{constructor(k){super(k),this.onRelativeTimeChange=X=>{this.setState({timeRangeFrom:X.target.value})},this.onTimeShiftChange=X=>{this.setState({timeRangeShift:X.target.value})},this.onOverrideTime=X=>{const{options:j,onChange:ne}=this.props,te=z(X.target.value),oe=N(te);oe&&j.timeRange?.from!==te&&ne({...j,timeRange:{...j.timeRange??{},from:te}}),this.setState({relativeTimeIsValid:oe})},this.onTimeShift=X=>{const{options:j,onChange:ne}=this.props,te=z(X.target.value),oe=N(te);oe&&j.timeRange?.shift!==te&&ne({...j,timeRange:{...j.timeRange??{},shift:te}}),this.setState({timeShiftIsValid:oe})},this.onToggleTimeOverride=()=>{const{onChange:X,options:j}=this.props;this.setState({timeRangeHide:!this.state.timeRangeHide},()=>{X({...j,timeRange:{...j.timeRange??{},hide:this.state.timeRangeHide}})})},this.onCacheTimeoutBlur=X=>{const{options:j,onChange:ne}=this.props;ne({...j,cacheTimeout:z(X.target.value)})},this.onQueryCachingTTLBlur=X=>{const{options:j,onChange:ne}=this.props;let te=parseInt(X.target.value,10);(isNaN(te)||te===0)&&(te=null),ne({...j,queryCachingTTL:te})},this.onMaxDataPointsBlur=X=>{const{options:j,onChange:ne}=this.props;let te=parseInt(X.currentTarget.value,10);(isNaN(te)||te===0)&&(te=null),te!==j.maxDataPoints&&ne({...j,maxDataPoints:te})},this.onMinIntervalBlur=X=>{const{options:j,onChange:ne}=this.props,te=z(X.target.value);te!==j.minInterval&&ne({...j,minInterval:te})},this.onOpenOptions=()=>{this.setState({isOpen:!0})},this.onCloseOptions=()=>{this.setState({isOpen:!1})};const{options:ee}=k;this.state={timeRangeFrom:ee.timeRange?.from||"",timeRangeShift:ee.timeRange?.shift||"",timeRangeHide:ee.timeRange?.hide??!1,isOpen:!1,relativeTimeIsValid:!0,timeShiftIsValid:!0}}renderCacheTimeoutOption(){const{dataSource:k,options:ee}=this.props,X=`If your time series store has a query cache this option can override the default cache timeout. Specify a
    numeric value in seconds.`;return k.meta.queryOptions?.cacheTimeout?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(y.I,{width:9,tooltip:X},"Cache timeout"),n.createElement(K.p,{type:"text",className:"width-6",placeholder:"60",spellCheck:!1,onBlur:this.onCacheTimeoutBlur,defaultValue:ee.cacheTimeout??""}))):null}renderQueryCachingTTLOption(){const{dataSource:k,options:ee}=this.props,X="Cache time-to-live: How long results from this queries in this panel will be cached, in milliseconds. Defaults to the TTL in the caching configuration for this datasource.";return k.cachingConfig?.enabled?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(y.I,{width:9,tooltip:X},"Cache TTL"),n.createElement(K.p,{type:"number",className:"width-6",placeholder:`${k.cachingConfig.TTLMs}`,spellCheck:!1,onBlur:this.onQueryCachingTTLBlur,defaultValue:ee.queryCachingTTL??void 0}))):null}renderMaxDataPointsOption(){const{data:k,options:ee}=this.props,X=k.request?.maxDataPoints,j=ee.maxDataPoints??"",ne=j==="";return n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(y.I,{width:9,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(K.p,{type:"number",className:"width-6",placeholder:`${X}`,spellCheck:!1,onBlur:this.onMaxDataPointsBlur,defaultValue:j}),ne&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-label query-segment-operator"},"="),n.createElement("div",{className:"gf-form-label"},"Width of panel"))))}renderIntervalOption(){const{data:k,dataSource:ee,options:X}=this.props,j=k.request?.interval,ne=ee.interval??"No limit";return n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(y.I,{width:9,tooltip:n.createElement(n.Fragment,null,"A lower limit for the interval. Recommended to be set to write frequency, for example ",n.createElement("code",null,"1m")," ","if your data is written every minute. Default value can be set in data source settings for most data sources.")},"Min interval"),n.createElement(K.p,{type:"text",className:"width-6",placeholder:`${ne}`,spellCheck:!1,onBlur:this.onMinIntervalBlur,defaultValue:X.minInterval??""}))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(y.I,{width:9,tooltip:n.createElement(n.Fragment,null,"The evaluated interval that is sent to data source and is used in ",n.createElement("code",null,"$__interval")," and"," ",n.createElement("code",null,"$__interval_ms"),". This value is not exactly equal to"," ",n.createElement("code",null,"Time range / max data points"),", it will approximate a series of magic number.")},"Interval"),n.createElement(y.I,{width:6},j),n.createElement("div",{className:"gf-form-label query-segment-operator"},"="),n.createElement("div",{className:"gf-form-label"},"Time range / max data points"))))}renderCollapsedText(k){const{data:ee,options:X}=this.props,{isOpen:j}=this.state;if(j)return;let ne=X.maxDataPoints??"";ne===""&&ee.request&&(ne=`auto = ${ee.request.maxDataPoints}`);let te=X.minInterval;return ee.request&&(te=`${ee.request.interval}`),n.createElement(n.Fragment,null,n.createElement("div",{className:k.collapsedText},"MD = ",ne),n.createElement("div",{className:k.collapsedText},"Interval = ",te))}render(){const{timeRangeHide:k,relativeTimeIsValid:ee,timeShiftIsValid:X}=this.state,{timeRangeFrom:j,timeRangeShift:ne,isOpen:te}=this.state,oe=J();return n.createElement(L.u,{id:"Query options",index:0,title:"Query options",headerElement:this.renderCollapsedText(oe),isOpen:te,onOpen:this.onOpenOptions,onClose:this.onCloseOptions},this.renderMaxDataPointsOption(),this.renderIntervalOption(),this.renderCacheTimeoutOption(),this.renderQueryCachingTTLOption(),n.createElement("div",{className:"gf-form"},n.createElement(y.I,{width:9,tooltip:n.createElement(n.Fragment,null,"Overrides the relative time range for individual panels, which causes them to be different than what is selected in the dashboard time picker in the top-right corner of the dashboard. For example to configure the Last 5 minutes the Relative time should be ",n.createElement("code",null,"now-5m")," and ",n.createElement("code",null,"5m"),", or variables like ",n.createElement("code",null,"$_relativeTime"),".")},"Relative time"),n.createElement(K.p,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onRelativeTimeChange,onBlur:this.onOverrideTime,invalid:!ee,value:j})),n.createElement("div",{className:"gf-form"},n.createElement(y.I,{width:9,tooltip:n.createElement(n.Fragment,null,"Overrides the time range for individual panels by shifting its start and end relative to the time picker. For example to configure the Last 1h the Time shift should be ",n.createElement("code",null,"now-1h")," and"," ",n.createElement("code",null,"1h"),", or variables like ",n.createElement("code",null,"$_timeShift"),".")},"Time shift"),n.createElement(K.p,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onTimeShiftChange,onBlur:this.onTimeShift,invalid:!X,value:ne})),(ne||j)&&n.createElement("div",{className:"gf-form-inline align-items-center"},n.createElement(y.I,{width:9},"Hide time info"),n.createElement(w.d,{value:k,onChange:this.onToggleTimeOverride})))}}const N=me=>me?F.isValidTimeSpan(me):!0,z=me=>me===""?null:me,J=(0,h.N)(()=>{const{theme:me}=C.config;return{collapsedText:(0,t.css)`
      margin-left: ${me.spacing.md};
      font-size: ${me.typography.size.sm};
      color: ${me.colors.textWeak};
    `}});class G extends n.PureComponent{constructor(){super(...arguments),this.backendSrv=D.IB,this.dataSourceSrv=(0,i.l)(),this.querySubscription=null,this.state={isDataSourceModalOpen:!!c.Ny.getSearchObject().firstPanel,isLoadingHelp:!1,helpContent:null,isPickerOpen:!1,isHelpOpen:!1,queries:[],data:{state:r.Gu.NotStarted,series:[],timeRange:(0,s.E2)()}},this.onChangeDataSource=async(k,ee)=>{const{dsSettings:X}=this.state,j=X?await(0,i.l)().get(X.uid):void 0,ne=await(0,i.l)().get(k.uid),te=ee||await(0,R.y)(ne,k.uid,this.state.queries,j),oe=await this.dataSourceSrv.get(k.name);this.onChange({queries:te,dataSource:{name:k.name,uid:k.uid,type:k.meta.id,default:k.isDefault}}),this.setState({queries:te,dataSource:oe,dsSettings:k}),ee&&this.props.onRunQueries()},this.onAddQueryClick=()=>{const{queries:k}=this.state;this.onQueriesChange((0,T.U7)(k,this.newQuery())),this.onScrollBottom()},this.onAddExpressionClick=()=>{this.onQueriesChange((0,T.U7)(this.state.queries,S.Ex.newQuery())),this.onScrollBottom()},this.onScrollBottom=()=>{setTimeout(()=>{this.state.scrollElement&&this.state.scrollElement.scrollTo({top:1e4})},20)},this.onUpdateAndRun=k=>{this.props.onOptionsChange(k),this.props.onRunQueries()},this.onOpenHelp=()=>{this.setState({isHelpOpen:!0})},this.onCloseHelp=()=>{this.setState({isHelpOpen:!1})},this.onCloseDataSourceModal=()=>{this.setState({isDataSourceModalOpen:!1})},this.onAddQuery=k=>{const{dsSettings:ee,queries:X}=this.state;this.onQueriesChange((0,T.U7)(X,k,{type:ee?.type,uid:ee?.uid})),this.onScrollBottom()},this.onQueriesChange=k=>{this.onChange({queries:k}),this.setState({queries:k})},this.setScrollRef=k=>{this.setState({scrollElement:k})}}async componentDidMount(){const{options:k,queryRunner:ee}=this.props;this.querySubscription=ee.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:X=>this.onPanelDataUpdate(X)}),this.setNewQueriesAndDatasource(k)}componentWillUnmount(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)}async componentDidUpdate(){const{options:k}=this.props,ee=await(0,i.l)().get(k.dataSource);this.state.dataSource&&ee.uid!==this.state.dataSource?.uid&&this.setNewQueriesAndDatasource(k)}async setNewQueriesAndDatasource(k){try{const ee=await this.dataSourceSrv.get(k.dataSource),X=this.dataSourceSrv.getInstanceSettings(k.dataSource),j=await this.dataSourceSrv.get(),ne=ee.getRef(),te=k.queries.map(oe=>({...(0,T.Ih)(oe)&&ee?.getDefaultQuery?.(o.Jk.PanelEditor),datasource:ne,...oe}));this.setState({queries:te,dataSource:ee,dsSettings:X,defaultDataSource:j})}catch(ee){console.error("failed to load data source",ee)}}onPanelDataUpdate(k){this.setState({data:k})}newQuery(){const{dsSettings:k,defaultDataSource:ee}=this.state,X=k?.meta.mixed?ee:k;return{...this.state.dataSource?.getDefaultQuery?.(o.Jk.PanelEditor),datasource:{uid:X?.uid,type:X?.type}}}onChange(k){this.props.onOptionsChange({...this.props.options,...k})}renderTopSection(k){const{onOpenQueryInspector:ee,options:X}=this.props,{dataSource:j,data:ne,dsSettings:te}=this.state;return!te||!j?null:n.createElement(q,{data:ne,dataSource:j,options:X,dsSettings:te,onOptionsChange:this.onUpdateAndRun,onDataSourceChange:this.onChangeDataSource,onOpenQueryInspector:ee})}renderQueries(k){const{onRunQueries:ee}=this.props,{data:X,queries:j}=this.state;return n.createElement("div",{"aria-label":l.Tp.components.QueryTab.content},n.createElement(U.L,{queries:j,dsSettings:k,onQueriesChange:this.onQueriesChange,onAddQuery:this.onAddQuery,onRunQueries:ee,data:X}))}isExpressionsSupported(k){return(k.meta.alerting||k.meta.mixed)===!0}renderExtraActions(){return B.m.getAllExtraRenderAction().map((k,ee)=>k({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:ee})).filter(Boolean)}renderAddQueryRow(k,ee){const X=!(0,x.kN)(k.name);return n.createElement(u.Gy,{spacing:"md",align:"flex-start"},X&&n.createElement(f.$n,{icon:"plus",onClick:this.onAddQueryClick,variant:"secondary","data-testid":l.Tp.components.QueryTab.addQuery},"Add query"),C.Ay.expressionsEnabled&&this.isExpressionsSupported(k)&&n.createElement(f.$n,{icon:"plus",onClick:this.onAddExpressionClick,variant:"secondary",className:ee.expressionButton,"data-testid":"query-tab-add-expression"},n.createElement("span",null,"Expression\xA0")),this.renderExtraActions())}render(){const{isHelpOpen:k,dsSettings:ee}=this.state,X=H();return n.createElement(d.E,{autoHeightMin:"100%",scrollRefCallback:this.setScrollRef},n.createElement("div",{className:X.innerWrapper},this.renderTopSection(X),ee&&n.createElement(n.Fragment,null,n.createElement("div",{className:X.queriesWrapper},this.renderQueries(ee)),this.renderAddQueryRow(ee,X),k&&n.createElement(E.a,{title:"Data source help",isOpen:!0,onDismiss:this.onCloseHelp},n.createElement(P,{pluginId:ee.meta.id})))))}}const H=(0,h.N)(()=>{const{theme:me}=C.Ay;return{innerWrapper:(0,t.css)`
      display: flex;
      flex-direction: column;
      padding: ${me.spacing.md};
    `,dataSourceRow:(0,t.css)`
      display: flex;
      margin-bottom: ${me.spacing.md};
    `,dataSourceRowItem:(0,t.css)`
      margin-right: ${me.spacing.inlineFormMargin};
    `,dataSourceRowItemOptions:(0,t.css)`
      flex-grow: 1;
      margin-right: ${me.spacing.inlineFormMargin};
    `,queriesWrapper:(0,t.css)`
      padding-bottom: 16px;
    `,expressionWrapper:(0,t.css)``,expressionButton:(0,t.css)`
      margin-right: ${me.spacing.sm};
    `}});function q({dataSource:me,options:k,data:ee,dsSettings:X,onDataSourceChange:j,onOptionsChange:ne,onOpenQueryInspector:te}){const oe=H(),[ie,ue]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement("div",{"data-testid":l.Tp.components.QueryTab.queryGroupTopSection},n.createElement("div",{className:oe.dataSourceRow},n.createElement(y.I,{htmlFor:"data-source-picker",width:"auto"},"Data source"),n.createElement("div",{className:oe.dataSourceRowItem},n.createElement(le,{options:k,onChange:async(be,ge)=>await j?.(be,ge),isDataSourceModalOpen:!!c.Ny.getSearchObject().firstPanel})),me&&n.createElement(n.Fragment,null,n.createElement("div",{className:oe.dataSourceRowItem},n.createElement(f.$n,{variant:"secondary",icon:"question-circle",title:"Open data source help",onClick:()=>ue(!0),"data-testid":"query-tab-help-button"})),n.createElement("div",{className:oe.dataSourceRowItemOptions},n.createElement(V,{options:k,dataSource:me,data:ee,onChange:be=>{ne?.(be)}})),te&&n.createElement("div",{className:oe.dataSourceRowItem},n.createElement(f.$n,{variant:"secondary",onClick:te,"aria-label":l.Tp.components.QueryTab.queryInspectorButton},"Query inspector")))),me&&(0,A.Hv)(me.uid)&&n.createElement(p.c,{pluginId:me.type,pluginType:m.QE.datasource,angularSupportEnabled:C.Ay?.angularSupportEnabled,showPluginDetailsLink:!0,interactionElementId:"datasource-query"})),ie&&n.createElement(E.a,{title:"Data source help",isOpen:!0,onDismiss:()=>ue(!1)},n.createElement(P,{pluginId:X.meta.id})))}function le({options:me,onChange:k,...ee}){const[X,j]=(0,n.useState)(!!ee.isDataSourceModalOpen);(0,n.useEffect)(()=>{c.Ny.getSearchObject().firstPanel&&c.Ny.partial({firstPanel:null},!0)},[]);const ne={metrics:!0,mixed:!0,dashboard:!0,variables:!0,current:me.dataSource,uploadFile:!0,onChange:async(te,oe)=>{await k(te,oe),j(!1)}};return n.createElement(n.Fragment,null,X&&n.createElement(M.p,{...ne,onDismiss:()=>j(!1)}),n.createElement(O.s,{...ne}))}},42972:(Y,I,e)=>{"use strict";e.d(I,{nm:()=>X,Dh:()=>me});var t=e(39741),n=e(13752),r=e(64423),s=e(44240),o=e(39697),m=e(81160),l=e(67791),i=e(93031),c=e(71030),u=e(69850),f=e(1005),d=e(65961),E=e(3591),h=e(2543);function y(j){let ne=[];const te=(0,h.partition)(j,"id"),oe=(0,h.groupBy)(te[0],"id");return ne=(0,h.map)(oe,ie=>ie.length>1&&!(0,h.every)(ie,a)?(0,h.find)(ie,ue=>ue.eventType!=="panel-alert"):(0,h.head)(ie)),ne=(0,h.concat)(ne,te[1]),ne}function a(j){return j.eventType==="panel-alert"}var v=e(74856),g=e(62467),b=e(65474),P=e(66847),C=e(69862),D=e(16126),T=e(32264),M=e(19347),O=e(90569),S=e(28444),p=e(27302),x=e(7436);class A{canRun(ne){return ne?!!(!ne.annotationQuery||ne.annotations):!1}run({annotation:ne,datasource:te,dashboard:oe,range:ie}){if(!this.canRun(te))return(0,g.of)([]);const ue={};return(0,p.b)({dashboard:oe,range:ie,panel:ue},te,ne).pipe((0,m.T)(be=>be.events??[]),(0,P.W)(x.SD))}}var R=e(42493);class B{canRun(ne){return ne?(0,R.E7)(ne)?!0:!!(ne.annotationQuery&&!ne.annotations):!1}run({annotation:ne,datasource:te,dashboard:oe,range:ie}){return this.canRun(te)?(0,b.H)(te.annotationQuery({range:ie,rangeRaw:ie.raw,annotation:ne,dashboard:oe})).pipe((0,P.W)(x.SD)):(0,g.of)([])}}class U{constructor(ne=[new B,new A]){this.runners=ne}canWork({dashboard:ne}){return!!ne.annotations.list.find(U.getAnnotationsToProcessFilter)}work(ne){if(!this.canWork(ne))return(0,x.$)();const{dashboard:te,range:oe}=ne;let ie=te.annotations.list.filter(U.getAnnotationsToProcessFilter);T.$.publicDashboardAccessToken&&ie.length>0&&(ie=[ie[0]]);const ue=ie.map(be=>{let ge;if(T.$.publicDashboardAccessToken){const re=new O.X;ge=(0,g.of)(re).pipe((0,P.W)(x.H0))}else ge=(0,b.H)((0,M.l)().get(be.datasource)).pipe((0,P.W)(x.H0));return ge.pipe((0,C.Z)(re=>{const ye=this.runners.find(Be=>Be.canRun(re));return ye?(te.events.publish(new S.xc(be)),ye.run({annotation:be,datasource:re,dashboard:te,range:oe}).pipe((0,l.Q)(me().cancellations().pipe((0,D.p)(Be=>Be===be))),(0,m.T)(Be=>(te.snapshot&&(be.snapshotData=(0,h.cloneDeep)(Be)),T.$.publicDashboardAccessToken?Be:(0,x.G9)(be,Be))),(0,u.j)(()=>{te.events.publish(new S.yj(be))}))):(0,g.of)([])}))});return(0,s.h)(ue).pipe((0,i.U)(),(0,c.T)((be,ge)=>be.concat(ge)),(0,m.T)(be=>({annotations:be,alertStates:[]})))}static getAnnotationsToProcessFilter(ne){return ne.enable&&!ne.snapshotData}}var F=e(85595),K=e(43585),w=e(17172),L=e(16233),V=e(55740),N=e(23662),z=e(91309),J=e(31678);class G{constructor(){this.hasAlertRules={}}canWork({dashboard:ne,range:te}){return!(!ne.uid||T.$.publicDashboardAccessToken||te.raw.to!=="now"||this.hasAlertRules[ne.uid]===!1||!(L.TP.hasPermission(J.AccessControlAction.AlertingRuleRead)&&L.TP.hasPermission(J.AccessControlAction.AlertingRuleExternalRead)))}work(ne){if(!this.canWork(ne))return(0,x.$)();const{dashboard:te}=ne;return(0,b.H)((0,w.AI)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:te.uid},`dashboard-query-runner-unified-alert-states-${te.id}`)).pipe((0,m.T)(oe=>{if(oe.status==="success"){this.hasAlertRules[te.uid]=!1;const ie={};return oe.data.groups.forEach(ue=>ue.rules.forEach(be=>{if((0,N.Z8)(be)&&be.annotations&&be.annotations[V.YH.panelID]){this.hasAlertRules[te.uid]=!0;const ge=Number(be.annotations[V.YH.panelID]),re=(0,z.S)(be.state);ie[ge]?re===K.O.Alerting&&ie[ge].state!==K.O.Alerting?ie[ge].state=K.O.Alerting:re===K.O.Pending&&ie[ge].state!==K.O.Alerting&&ie[ge].state!==K.O.Pending&&(ie[ge].state=K.O.Pending):ie[ge]={state:re,id:Object.keys(ie).length,panelId:ge,dashboardId:te.id}}})),{alertStates:Object.values(ie),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,P.W)(x.Zr))}}class H{constructor(ne,te=(0,v.jG)(),oe=[new G,new F.F,new U]){this.dashboard=ne,this.timeSrv=te,this.workers=oe,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.m(1),this.runs=new n.B,this.cancellationStream=new n.B,this.runsSubscription=this.runs.subscribe(ie=>this.executeRun(ie)),this.eventsSubscription=ne.events.subscribe(E._,ie=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(ne){this.runs.next(ne)}getResult(ne){return this.results.asObservable().pipe((0,m.T)(te=>{const oe=(0,x.FK)(te.annotations,ne),ie=te.alertStates.find(ue=>!!ne&&ue.panelId===ne);return{annotations:y(oe),alertState:ie}}))}executeRun(ne){const oe=this.workers.filter(re=>re.canWork(ne)).map(re=>re.work(ne)),ie=new r.yU,ue=(0,s.h)(oe).pipe((0,l.Q)(this.runs.asObservable()),(0,i.U)(),(0,c.T)((re,ye)=>(re.annotations=re.annotations.concat(ye.annotations),re.alertStates=re.alertStates.concat(ye.alertStates),re)),(0,u.j)(()=>{ie.unsubscribe()}),(0,f.u)()),be=new r.yU,ge=(0,o.O)(200).pipe((0,d.u)({annotations:[],alertStates:[]}),(0,l.Q)(ue),(0,u.j)(()=>{be.unsubscribe()}));be.add(ge.subscribe(re=>{this.results.next(re)})),ie.add(ue.subscribe(re=>{this.results.next(re)}))}cancel(ne){this.cancellationStream.next(ne)}cancellations(){return this.cancellationStream.asObservable().pipe((0,f.u)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let q;function le(j){q&&q.destroy(),q=j}function me(){if(!q)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return q}let k;function ee(j){k=j}function X(j){k||(k=({dashboard:te,timeSrv:oe,workers:ie})=>new H(te,oe,ie));const ne=k(j);return le(ne),ne}},90569:(Y,I,e)=>{"use strict";e.d(I,{X:()=>u});var t=e(62467),n=e(65474),r=e(40187),s=e(14236),o=e(17172),m=e(32264),l=e(57220),i=e(68706);const c="-- Public --";class u extends r.mA{constructor(){let d={};super({name:"public-ds",id:0,type:"public-ds",meta:d,uid:c,jsonData:{},access:"proxy",readOnly:!0}),this.annotations={prepareQuery(E){return{...E,queryType:i.nj.Annotations,refId:"anno"}}}}query(d){return d.targets.length?d.targets[0]?.datasource?.uid===l.vv?(0,n.H)(this.getAnnotations(d)):(0,t.of)({data:[]}):(0,t.of)({data:[]})}async getAnnotations(d){const{range:{to:E,from:h}}=d,y={from:h.valueOf(),to:E.valueOf()},a=await(0,o.AI)().get(`/api/public/dashboards/${m.$.publicDashboardAccessToken}/annotations`,y);return{data:[(0,s.Vc)(a)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},85595:(Y,I,e)=>{"use strict";e.d(I,{F:()=>r});var t=e(62467),n=e(7436);class r{canWork({dashboard:o}){return o?.annotations?.list?.some(m=>m.enable&&!!m.snapshotData)}work(o){if(!this.canWork(o))return(0,n.$)();const m=this.getAnnotationsFromSnapshot(o.dashboard);return(0,t.of)({annotations:m,alertStates:[]})}getAnnotationsFromSnapshot(o){return(o?.annotations?.list?.filter(c=>c.enable)).filter(c=>!!c.snapshotData).reduce((c,u)=>c.concat((0,n.G9)(u,u.snapshotData)),[])}getAnnotationsInSnapshot(o,m){const l=this.getAnnotationsFromSnapshot(o);return(0,n.FK)(l,m)}}},7436:(Y,I,e)=>{"use strict";e.d(I,{$:()=>d,FK:()=>y,G9:()=>a,H:()=>v,H0:()=>f,SD:()=>u,Zr:()=>E});var t=e(2543),n=e.n(t),r=e(62467),s=e(78368),o=e(12091),m=e(32264),l=e(99140),i=e(3169),c=e(16001);function u(g){return g.cancelled?(0,r.of)([]):(h("AnnotationQueryRunner failed",g),(0,r.of)([]))}function f(g){return h("Failed to retrieve datasource",g),(0,r.of)(void 0)}const d=()=>(0,r.of)({annotations:[],alertStates:[]});function E(g){return g.cancelled||h("DashboardQueryRunner failed",g),d()}function h(g,b){const P=(0,o.u)(b);console.error("handleAnnotationQueryRunnerError",P);const C=(0,i.gi)(g,P.message);(0,l.JD)((0,c.dx)(C))}function y(g,b){return b==null?g:g.filter(P=>{let C;if(C=P.source,!C)return!0;if(C.filter){const D=(C.filter.ids??[]).includes(b);if(C.filter.exclude){if(D)return!1}else if(!D)return!1}return P.panelId&&P.source.type==="dashboard"?P.panelId===b:!0})}function a(g,b){g.snapshotData&&(g=(0,t.cloneDeep)(g),delete g.snapshotData);for(const P of b)switch(P.source=g,P.color=m.$.theme2.visualization.getColorByName(g.iconColor),P.type=g.name,P.isRegion=!!(P.timeEnd&&P.time!==P.timeEnd),P.newState?.toLowerCase()){case"pending":P.color="yellow";break;case"alerting":P.color="red";break;case"ok":P.color="green";break;case"normal":P.color="green";break;case"no_data":P.color="gray";break;case"nodata":P.color="gray";break}return b}function v(g){if(!g||!g.length)return[];const b=[];for(const P of g){const C=new s.R(P);for(let D=0;D<P.length;D++){const T=(0,t.cloneDeep)(C.get(D));b.push(T)}}return b}},80924:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>R,S:()=>A});var t=e(2543),n=e(39741),r=e(62467),s=e(69862),o=e(81160),m=e(66847),l=e(39070),i=e(14236),c=e(43127),u=e(90708),f=e(21423),d=e(52622),E=e(2514),h=e(41987),y=e(65879),a=e(12091),v=e(26657),g=e(47118),b=e(31193),P=e(23989),C=e(14348),D=e(42972),T=e(49510),M=e(33948);function O(U=[]){U.forEach(F=>{F.meta={...F.meta,dataTopic:d.QR.Annotations}})}function S(U,F){return(0,T.z)([U,F]).pipe((0,s.Z)(K=>{const[w,L]=K;if(L.annotations?.length||L.alertState){w.annotations||(w.annotations=[]);const V=w.annotations.concat((0,M.I)(L.annotations));O(V);const N=L.alertState;return(0,r.of)({...w,annotations:V,alertState:N})}return O(w.annotations),(0,r.of)(w)}))}var p=e(39374);let x=100;function A(){return"Q"+x++}class R{constructor(F){this.templateSrv=(0,P.w)(),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new n.m(1),this.dataConfigSource=F}getData(F){const{withFieldConfig:K,withTransforms:w}=F;let L=1,V,N=[],z=[],J,G=!0,H=-1;if(this.dataConfigSource.snapshotData){const q={state:l.Gu.Done,series:this.dataConfigSource.snapshotData.map(le=>(0,i.Vc)(le)),timeRange:(0,c.E2)(),structureRev:L};return(0,r.of)(q)}return this.subject.pipe((0,s.Z)(q=>{let le=this.dataConfigSource.getFieldOverrideOptions(),me=this.dataConfigSource.getTransformations();if(q.series===z&&V?.fieldConfig===le?.fieldConfig&&J===me)return(0,r.of)({...q,structureRev:L,series:N});V=le,J=me,z=q.series;let k=(0,r.of)(q);return w&&(k=this.applyTransformations(q)),k.pipe((0,o.T)(ee=>{let X=ee,j=!1;if(K&&ee.series?.length){if(H===this.dataConfigSource.configRev){let ne;for(const te of ee.series)if((0,g.o$)(te)){ne=te;break}ne&&!ne.packetInfo.schemaChanged&&N[0].fields.length===ne.fields.length&&(X={...X,series:N.map((te,oe)=>({...te,length:ee.series[oe].length,fields:te.fields.map((ie,ue)=>({...ie,values:ee.series[oe].fields[ue].values,state:{...ie.state,calcs:void 0,range:void 0}}))}))},j=!0)}le!=null&&(G||!j)&&(H=this.dataConfigSource.configRev,X={...X,series:(0,u.we)({timeZone:ee.request?.timezone??"browser",data:X.series,...le})},X.annotations&&(X.annotations=(0,u.we)({data:X.annotations,...le,fieldConfig:{defaults:{},overrides:[]}})),G=!1)}return!j&&!(0,f.J3)(N,X.series,f.bW)&&L++,N=X.series,{...X,structureRev:L}}))}))}applyTransformations(F){const K=this.dataConfigSource.getTransformations();if(K&&K.every(G=>G.disabled)||!K||K.length===0)return(0,r.of)(F);const L={interpolate:G=>this.templateSrv.replace(G,F?.request?.scopedVars)};let V=K.filter(G=>G.topic==null||G.topic===d.QR.Series),N=K.filter(G=>G.topic===d.QR.Annotations),z=(0,E.m)(V,F.series,L),J=(0,E.m)(N,F.annotations??[],L);return(0,t.merge)(z,J).pipe((0,o.T)(G=>{let q=G.some(le=>le.meta?.dataTopic===d.QR.Annotations)?{annotations:G}:{series:G};return{...F,...q}}),(0,m.W)(G=>(console.warn("Error running transformation:",G),(0,r.of)({...F,state:l.Gu.Error,errors:[(0,a.u)(G)]}))))}async run(F){const{queries:K,timezone:w,datasource:L,panelId:V,panelPluginId:N,dashboardUID:z,timeRange:J,timeInfo:G,cacheTimeout:H,queryCachingTTL:q,maxDataPoints:le,scopedVars:me,minInterval:k,app:ee}=F;if((0,C.kN)(L)){this.pipeToSubject((0,C.mw)(F,K[0]),V,!0);return}const X=this.shouldAddErrorWhenDatasourceVariableIsMultiple(L,me),j={app:ee??h.Jk.Dashboard,requestId:A(),timezone:w,panelId:V,panelPluginId:N,dashboardUID:z,range:J,timeInfo:G,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(K),maxDataPoints:le,scopedVars:me||{},cacheTimeout:H,queryCachingTTL:q,startTime:Date.now(),rangeRaw:J.raw};try{const ne=await B(L,j.scopedVars),te=ne.meta?.mixed;j.targets=j.targets.map(ue=>{const be=ue.datasource?.type===v.dR.type;return(!ue.datasource||ue.datasource.uid!==ne.uid&&!te&&!be)&&(ue.datasource=ne.getRef()),ue});const oe=k?this.templateSrv.replace(k,j.scopedVars):ne.interval,ie=y.calculateInterval(J,le,oe);j.scopedVars=Object.assign({},j.scopedVars,{__interval:{text:ie.interval,value:ie.interval},__interval_ms:{text:ie.intervalMs.toString(),value:ie.intervalMs}}),j.interval=ie.interval,j.intervalMs=ie.intervalMs,j.filters=this.templateSrv.getAdhocFilters(ne.name,!0),this.lastRequest=j,this.pipeToSubject((0,p.BN)(ne,j),V,!1,X)}catch(ne){this.pipeToSubject((0,r.of)({state:l.Gu.Error,error:(0,a.u)(ne),series:[],timeRange:j.range}),V)}}pipeToSubject(F,K,w=!1,L=!1){this.subscription&&this.subscription.unsubscribe();let V=F;const N=this.dataConfigSource.getDataSupport();if(N.alertStates||N.annotations){const z=this.dataConfigSource;V=S(F,(0,D.Dh)().getResult(z.id))}this.subscription=V.subscribe({next:z=>{const J=this.lastResult,G=w?z:(0,i.N$)(z,J);if(J!=null&&G.state!==l.Gu.Streaming){let H=(0,f.J3)(J.series??[],G.series??[],(me,k)=>me===k),q=(0,f.J3)(J.annotations??[],G.annotations??[],(me,k)=>me===k),le=J.state===G.state;if(H&&(G.series=J.series),q&&(G.annotations=J.annotations),H&&q&&le)return}this.lastResult=G,L&&(G.errors=[{message:"Panel is using a variable datasource with multiple values without repeat option. Please configure the panel to be repeated by the same datasource variable."}],G.state=l.Gu.Error),this.subject.next(G)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===l.Gu.Loading||this.lastResult.state===l.Gu.Streaming)&&this.subject.next({...this.lastResult,state:l.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new n.m(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(F){this.lastResult=F.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(F){this.lastResult=F}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}shouldAddErrorWhenDatasourceVariableIsMultiple(F,K){let w=!1;return F?.uid?.startsWith("${")&&this.templateSrv.replace(F.uid,K,L=>(Array.isArray(L)&&L.length>1&&(w=!0),"")),w}}async function B(U,F){return U&&typeof U=="object"&&"query"in U?U:await(0,b.tR)().get(U,F)}},81583:(Y,I,e)=>{"use strict";e.d(I,{N:()=>n});var t=e(69850);function n(r,s){return(0,t.j)(()=>{s&&r.resolveCancelerIfExists(s)})}},72955:(Y,I,e)=>{"use strict";e.d(I,{B:()=>n});var t=e(21423);const n=(r,s)=>{let o=1;return s?.structureRev&&s.series&&(o=s.structureRev,(0,t.J3)(r.series,s.series,t.bW)||o++),r.structureRev=o,r}},39374:(Y,I,e)=>{"use strict";e.d(I,{BN:()=>F});var t=e(2543),n=e(62467),r=e(44240),s=e(39697),o=e(65474),m=e(81160),l=e(66847),i=e(59099),c=e(1005),u=e(65961),f=e(67791),d=e(39070),E=e(52622),h=e(85858),y=e(41987),a=e(12091),v=e(32264),g=e(26657),b=e(27677),P=e(21969),C=e(53478),D=e(34867);const T=(0,D.DW)("features.query");var M=e(81583),O=e(76885),S=e(61298),p=e(14110),x=e(14792);function A(w){let L=!1;return N=>{if(!N.request||L||O.kM.getUrlSearchParams().editPanel!=null||N.state!==d.Gu.Done&&N.state!==d.Gu.Error)return;const J={eventName:S.n_.DataRequest,source:N.request.app,datasourceName:w.name,datasourceId:w.id,datasourceUid:w.uid,datasourceType:w.type,dataSize:0,panelId:0,panelPluginId:N.request?.panelPluginId,duration:N.request.endTime-N.request.startTime};V(J,N),N.request.app!==y.Jk.Explore&&N.request.app!==y.Jk.Correlations&&R(J,N),N.series&&N.series.length>0&&(J.dataSize=N.series.length),(0,p.G$)(J),L=!0};function V(N,z){const J={};for(let H=0;H<z.series.length;H++){const q=z.series[H].refId;q&&!J[q]&&(J[q]=z.series[H].meta?.isCachedResponse??!1)}N.totalQueries=Object.keys(J).length,N.cachedQueries=Object.values(J).filter(H=>H===!0).length,z.request&&Number.isInteger(z.request.panelId)&&(N.panelId=z.request.panelId);const G=(0,x.UA)().getCurrent();G&&(N.dashboardId=G.id,N.dashboardName=G.title,N.dashboardUid=G.uid,N.folderName=G.meta.folderTitle)}}function R(w,L){L.errors?.length?w.error=L.errors.join(", "):L.error&&(w.error=L.error.message)}function B(w,L){const V=L.panelData.request,N={...L.packets},z=w.key??w.data?.[0]?.refId??"A";N[z]=w;let J=w.state||d.Gu.Done,G,H;const q=[],le=[];for(const X in N){const j=N[X];if((j.error||j.errors?.length)&&(J=d.Gu.Error,G=j.error,H=j.errors),j.data&&j.data.length)for(const ne of j.data){if(ne.meta?.dataTopic===E.QR.Annotations){le.push(ne);continue}q.push(ne)}}const me=U(V,J),k={state:J,series:q,annotations:le,error:G,errors:H,request:V,timeRange:me},ee=new Set([...L.panelData.traceIds??[],...w.traceIds??[]]);return ee.size>0&&(k.traceIds=Array.from(ee)),{packets:N,panelData:k}}function U(w,L){const V=w.range;return!(0,t.isString)(V.raw.from)||L!==d.Gu.Streaming?V:{...V,from:h.parse(V.raw.from,!1),to:h.parse(V.raw.to,!0)}}function F(w,L,V){let N={panelData:{state:d.Gu.Loading,series:[],request:L,timeRange:L.range},packets:{}};if(!L.targets.length)return L.endTime=Date.now(),N.panelData.state=d.Gu.Done,(0,n.of)(N.panelData);const z=K(w,L,V).pipe((0,m.T)(J=>{if(!(0,t.map)(J.data))throw new Error(`Expected response data to be array, got ${typeof J.data}.`);const G=L.targets.filter(H=>H.hide);for(const H of G)J.data=J.data.filter(q=>q.refId!==H.refId);return L.endTime=Date.now(),N=B(J,N),N.panelData}),(0,l.W)(J=>(console.error("runRequest.catchError",J),T.logError(J),(0,n.of)({...N.panelData,state:d.Gu.Error,error:(0,a.u)(J)}))),(0,i.M)(A(w)),(0,M.N)(b.IB,L.requestId),(0,c.u)());return(0,r.h)((0,s.O)(200).pipe((0,u.u)(N.panelData),(0,f.Q)(z)),z)}function K(w,L,V){if(L.targets=L.targets.map(z=>(0,P.Ih)(z)?{...w?.getDefaultQuery?.(y.Jk.PanelEditor),...z}:z),v.$.publicDashboardAccessToken)return(0,o.H)(w.query(L));for(const z of L.targets)if((0,g.s9)(z.datasource))return C.Ex.query(L);if(V||(L.targets=L.targets.filter(z=>w.filterQuery?.(z)??!0)),L.targets.length===0)return(0,n.of)({data:[]});const N=V?V(L):w.query(L);return(0,o.H)(N)}},93117:(Y,I,e)=>{"use strict";e.d(I,{y:()=>m});var t=e(41987),n=e(73372),r=e(72574),s=e(26657),o=e(21969);async function m(l,i,c,u){let f=c;const d={type:l.type,uid:i},E={...l?.getDefaultQuery?.(t.Jk.PanelEditor),datasource:d,refId:"A"};if(u?.meta.id!==l.meta.id){if(l.meta.mixed)return c;if((0,n.Ee)(u)&&(0,n.FL)(l)){const h=await u.exportToAbstractQueries(c);f=await l.importFromAbstractQueries(h)}else if(u&&l.importQueries)f=await l.importQueries(c,u);else{if(u){const h=(0,r.w)(),y=[];let a=l.uid;const v=h.containsTemplate(i);v&&(a=h.replace(l.uid));const g=c.reduce((b,P)=>{if(P.datasource){let C=P.datasource.uid;const D=h.containsTemplate(C);if(D&&(C=h.replace(P.datasource.uid)),C===a&&D===v)return P.refId=(0,o.W3)(b),b.concat([P])}return b},y);if(g.length>0)return g}return[E]}}return f.length===0?[E]:f.map(h=>(!(0,s.s9)(h.datasource)&&!l.meta.mixed&&(h.datasource=d),h))}},53477:(Y,I,e)=>{"use strict";e.d(I,{G3:()=>m,TF:()=>c,XJ:()=>h,YU:()=>d,d7:()=>f,if:()=>y,r4:()=>o,w7:()=>E});var t=e(64161);const n=null,r=58,s=8,o={label:"A\u2013Z",value:"alpha-asc"},m="search.sections",l="grafana.search.expanded-folder",i=0,c="general",u="General",f="grafana.search.include.panels",d="grafana.search.layout",E="grafana.search.sort",h={dashboard:t.G.DashDB,folder:t.G.DashFolder,home:t.G.DashHome},y=1e3},97427:(Y,I,e)=>{"use strict";e.d(I,{d:()=>o,n:()=>m});var t=e(96540),n=e(13752),r=e(71733),s=e(12131);function o(){const l=(0,t.useRef)(new n.B);return{keyboardEvents:l.current,onKeyDown:i=>{switch(i.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":l.current.next(i);default:}}}}function m(l,i,c){const u=(0,t.useRef)({x:0,y:-1}),[f,d]=(0,t.useState)({x:0,y:-1}),E=(0,t.useRef)();return(0,t.useEffect)(()=>{E.current=c.view.fields.url,u.current.x=0,u.current.y=-1,d({...u.current})},[c]),(0,t.useEffect)(()=>{const h=l.subscribe({next:y=>{switch(y?.code){case"ArrowDown":{u.current.y++,d({...u.current});break}case"ArrowUp":u.current.y=Math.max(0,u.current.y-1),d({...u.current});break;case"ArrowRight":{i>0&&(u.current.x=Math.min(i,u.current.x+1),d({...u.current}));break}case"ArrowLeft":{i>0&&(u.current.x=Math.max(0,u.current.x-1),d({...u.current}));break}case"Enter":if(!E.current)break;const a=u.current.x*i+u.current.y;if(a<0){u.current.x=0,u.current.y=0,d({...u.current});break}const v=E.current.values?.[a];typeof v=="string"&&s.Ny.push(r.I.stripBaseFromUrl(v))}}});return()=>h.unsubscribe()},[l,i]),f}},6204:(Y,I,e)=>{"use strict";e.d(I,{B9:()=>m,J$:()=>s,KZ:()=>o,MK:()=>r,Pf:()=>n});var t=e(14110);const n=(i,c)=>{(0,t.rR)(`${i}_viewed`,l(c))},r=(i,c)=>{(0,t.rR)(`${i}_result_clicked`,l(c))},s=(i,c)=>{(0,t.rR)(`${i}_query_submitted`,l(c))},o=(i,{error:c,...u})=>{(0,t.rR)(`${i}_query_failed`,{...l(u),error:c})},m=(i,c,u)=>{(0,t.rR)(`grafana_panel_inspect_${i}_${c}_clicked`,u)},l=i=>({layout:i.layout,starredFilter:i.starred??!1,sort:i.sortValue??"",tagCount:i.tagCount??0,queryLength:i.query?.length??0,includePanels:i.includePanels??!1})},24439:(Y,I,e)=>{"use strict";e.d(I,{getGrafanaSearcher:()=>O});var t=e(32264),n=e(78368),r=e(14236),s=e(57875),o=e(17172),m=e(40957);const l="Loading",i="api/search-v2",c="name_sort";class u{constructor(p){this.fallbackSearcher=p}async search(p){if(p.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(p)}async starred(p){if(p.facet?.length)throw new Error("facets not supported!");const x=await(0,o.AI)().get("api/user/stars");return x?.length?this.doSearchQuery({uid:x,query:p.query??"*"}):{view:new n.R({length:0,fields:[]}),totalRows:0,loadMoreItems:async(A,R)=>{},isItemLoaded:A=>!0}}async tags(p){const x={...p,query:p.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},R=(await(0,o.AI)().post(i,x)).frames.map(B=>(0,r.Vc)(B));if(R[0]?.name===l)return this.fallbackSearcher.tags(p);for(const B of R)if(B.fields[0].name==="tag")return E(B);return[]}getSortOptions(){const p=[{value:c,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.$.licenseInfo.enabledFeatures.analytics){for(const x of h)p.push({value:`-${x.name}`,label:`${x.display} (most)`}),p.push({value:`${x.name}`,label:`${x.display} (least)`});for(const x of y)p.push({value:`-${x.name}`,label:`${x.display} (recent)`}),p.push({value:`${x.name}`,label:`${x.display} (oldest)`})}return Promise.resolve(p)}async doSearchQuery(p){p=await(0,m.u4)(p);const x={...p,query:p.query??"*",limit:p.limit??f},R=(await(0,o.AI)().post(i,x)).frames.map(V=>(0,r.Vc)(V)),B=R.length?(0,r.Vc)(R[0]):{fields:[],length:0};if(B.name===l)return this.fallbackSearcher.search(p);for(const V of B.fields)V.display=(0,s.J)({field:V,theme:t.$.theme2});B.meta?.custom||(B.meta={...B.meta,custom:{count:B.length,max_score:1}});const U=B.meta.custom;if(U.locationInfo||(U.locationInfo={}),U.sortBy?.length){const V=B.fields.find(N=>N.name===U.sortBy);if(V){const N=a(V.name);U.sortBy=N,V.name=N}}let F=0,K;const w=async()=>{for(;F>L.dataFrame.length;){const V=L.dataFrame.length;if(V>=U.count)return;const N=await(0,o.AI)().post(i,{...x??{},from:V,limit:d}),z=(0,r.Vc)(N.frames[0]);if(!z){console.log("no results",z);return}if(z.fields.length!==L.dataFrame.fields.length){console.log("invalid shape",z,L.dataFrame);return}const J=z.length+L.dataFrame.length;for(let H=0;H<z.fields.length;H++)L.dataFrame.fields[H].values.push(...z.fields[H].values);L.dataFrame.length=J;const G=z.meta?.custom;if(G?.locationInfo&&U)for(const[H,q]of Object.entries(G.locationInfo))U.locationInfo[H]=q}K=void 0},L=new n.R(B);return{totalRows:U.count??B.length,view:L,loadMoreItems:async(V,N)=>(F=Math.max(F,N),K||(K=w()),K),isItemLoaded:V=>V<L.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const f=50,d=100;function E(S){const p=S.fields[0].values,x=S.fields[1].values,A=[];for(let R=0;R<S.length;R++)A.push({term:p[R],count:x[R]});return A}const h=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],y=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function a(S){for(const p of h)if(p.name===S)return p.display;for(const p of y)if(p.name===S)return p.display;return S}var v=e(53076);class g{constructor(p){this.parent=p,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(p){if(p.facet?.length)throw new Error("facets not supported!");if(p.sort!=null)throw new Error("custom sorting is not supported yet");if(p.tags?.length||p.ds_uid?.length)return this.parent.search(p);const A=(await this.getCache(p.kind)).search(p.query);return{isItemLoaded:()=>!0,loadMoreItems:async(R,B)=>{},totalRows:A.length,view:A}}async getCache(p){const x=p?p.sort().join(","):"*",A=this.cache.get(x);if(A)try{return await A}catch{return this.cache.delete(x),new b(new n.R({name:"error",fields:[],length:0}))}const R=this.parent.search({kind:p,limit:5e3}).then(B=>new b(B.view));return this.cache.set(x,R),R}async starred(p){return this.parent.starred(p)}async getSortOptions(){return this.parent.getSortOptions()}async tags(p){return this.parent.tags(p)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class b{constructor(p){this.full=p,this.ufuzzy=new v.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new n.R({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(x=>({...x,values:[]})),length:0})}search(p){if(!p?.length||p==="*")return this.full;const x=this.full.dataFrame.fields,A=this.names,R=x.map(K=>[]);let[B,U,F]=this.ufuzzy.search(A,p,5);for(let K=0;K<x.length;K++){let w=x[K].values,L=R[K];if(U&&F)for(let V=0;V<F.length;V++){let N=U.idx[F[V]];L.push(w[N])}else if(B)for(let V=0;V<B.length;V++){let N=B[V];L.push(w[N])}}return this.empty.dataFrame.fields.forEach((K,w)=>{K.values=R[w]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var P=e(11261),C=e(27677),D=e(53477);class T{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards"}},this.getFolderViewSort=()=>""}async composeQuery(p,x){const A=await(0,m.u4)(x);return A.query?.length&&A.query!=="*"&&(p.query=A.query),A.kind?.length===1&&D.XJ[A.kind[0]]&&(p.type=D.XJ[A.kind[0]]),A.uid?p.dashboardUID=A.uid:A.location?.length&&(p.folderUIDs=[A.location]),p}async search(p){if(p.facet?.length)throw new Error("facets not supported!");if(p.from!==void 0){if(!p.limit)throw new Error("Must specify non-zero limit parameter when using from");if(p.from/p.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const x=p.limit??(p.from!==void 0?1:D.if),A=p.from!==void 0?p.from/x+1:void 0,R=await this.composeQuery({limit:x,tag:p.tags,sort:p.sort,permission:p.permission,page:A},p);return this.doAPIQuery(R)}async starred(p){if(p.facet?.length)throw new Error("facets not supported!");const x=await this.composeQuery({limit:p.limit??D.if,tag:p.tags,sort:p.sort,starred:p.starred},p);return this.doAPIQuery(x)}async getSortOptions(){return(await C.IB.get("/api/search/sorting")).sortOptions.map(x=>({value:x.name,label:x.displayName}))}async tags(p){return(await C.IB.get("/api/dashboards/tags")).sort((A,R)=>R.count-A.count)}async doAPIQuery(p){const x=await C.IB.get("/api/search",p),A=[],R=[],B=[],U=[],F=[],K=[],w=[];let L;for(let z of x){const J=z.type==="dash-folder"?"folder":"dashboard";A.push(J),R.push(z.title),B.push(z.uid),U.push(z.url),F.push(z.tags),w.push(z.sortMeta);let G=z.folderUid;!G&&J==="dashboard"&&(G="general"),K.push(G),z.sortMetaName?.length&&(L=z.sortMetaName),z.folderUid&&z.folderTitle?this.locationInfo[z.folderUid]={kind:"folder",name:z.folderTitle,url:z.folderUrl,folderUid:z.folderUid}:J==="folder"&&(this.locationInfo[z.uid]={kind:J,name:z.title,url:z.url,folderUid:z.folderUid})}const V={fields:[{name:"kind",type:P.PU.string,config:{},values:A},{name:"name",type:P.PU.string,config:{},values:R},{name:"uid",type:P.PU.string,config:{},values:B},{name:"url",type:P.PU.string,config:{},values:U},{name:"tags",type:P.PU.other,config:{},values:F},{name:"location",type:P.PU.string,config:{},values:K}],length:R.length,meta:{custom:{count:R.length,max_score:1,locationInfo:this.locationInfo}}};L?.length&&w.length&&(V.meta.custom.sortBy=L,V.fields.push({name:L,type:P.PU.number,config:{},values:w}));for(const z of V.fields)z.display=(0,s.J)({field:z,theme:t.$.theme2});const N=new n.R(V);return{totalRows:V.length,view:N,loadMoreItems:async(z,J)=>{},isItemLoaded:z=>!0}}}let M;function O(){if(!M){const S=new T,p=t.$.featureToggles.panelTitleSearch;M=p?new u(S):S,p&&location.search.includes("do-frontend-query")&&(M=new g(M))}return M}},40957:(Y,I,e)=>{"use strict";e.d(I,{TM:()=>m,cu:()=>l,hI:()=>c,u4:()=>r});var t=e(49952),n=e(14792);async function r(u){return u.query&&u.query.indexOf("folder:current")>=0&&(u={...u,location:await s(),query:u.query.replace("folder:current","").trim()},u.query?.length||(u.query="*")),Promise.resolve(u)}async function s(){try{let u=(0,n.UA)().getCurrent();return u||(await o(500),u=(0,n.UA)().getCurrent()),Promise.resolve(u?.meta?.folderUid)}catch(u){console.error(u)}}function o(u){return new Promise(f=>setTimeout(f,u))}function m(u,f){return u==="dashboard"?"apps":u==="folder"?f?"folder-open":"folder":"question-circle"}function l(u,f){return u&&(0,t.I)(u.uid)?"users-alt":m(u.kind,f)}function i(u){switch(u){case"dashboard":case"folder":case"panel":return u;default:return"dashboard"}}function c(u,f){const d=f?.dataFrame.meta?.custom,E={kind:i(u.kind),uid:u.uid,title:u.name,url:u.url,tags:u.tags??[]},h=d?.sortBy;if(h){const y=u[h];(typeof y=="string"||typeof y=="number")&&(E.sortMetaName=h,E.sortMeta=y)}if(u.location){const y=u.location.split("/"),a=y[y.length-1],v=d?.locationInfo[a];v&&(E.parentTitle=v.name,E.parentKind=v.kind,E.parentUID=a)}return E}},64161:(Y,I,e)=>{"use strict";e.d(I,{G:()=>t,P:()=>n});var t=(r=>(r.DashDB="dash-db",r.DashHome="dash-home",r.DashFolder="dash-folder",r))(t||{}),n=(r=>(r.List="list",r.Folders="folders",r))(n||{})},16757:(Y,I,e)=>{"use strict";e.d(I,{N1:()=>o,W1:()=>r});var t=e(53477);const n=m=>m?!!(m.query||m.tag?.length>0||m.starred||m.sort):!1,r=()=>{const m=t.G3+".";for(let l=0;l<window.localStorage.length;l++){const i=window.localStorage.key(l);i?.startsWith(m)&&window.localStorage.removeItem(i)}},s=(m="General")=>`${SECTION_STORAGE_KEY}.${m.toLowerCase()}`,o=m=>{const l=Object.entries(m).reduce((i,[c,u])=>{if(u){if(c==="tag"&&!Array.isArray(u))return{...i,tag:[u]}}else return i;return{...i,[c]:u}},{});if(m.folder){const i=`folder:${m.folder}`;return{...l,query:`${i} ${(l.query??"").replace(i,"")}`}}return{...l}}},1936:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>D,EC:()=>b,FW:()=>y,G3:()=>i,L5:()=>C,QM:()=>m,Yh:()=>a,aD:()=>c,c3:()=>P,ch:()=>l,dJ:()=>u,ew:()=>g,jE:()=>f,zh:()=>v});var t=e(30038),n=e(31678);const r={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.Z0)({name:"serviceaccount",initialState:r,reducers:{serviceAccountFetchBegin:T=>({...T,isLoading:!0}),serviceAccountFetchEnd:T=>({...T,isLoading:!1}),serviceAccountLoaded:(T,M)=>({...T,serviceAccount:M.payload,isLoading:!1}),serviceAccountTokensLoaded:(T,M)=>({...T,tokens:M.payload,isLoading:!1}),rolesFetchBegin:T=>({...T,rolesLoading:!0}),rolesFetchEnd:T=>({...T,rolesLoading:!1})}}),o=s.reducer,{serviceAccountLoaded:m,serviceAccountTokensLoaded:l,serviceAccountFetchBegin:i,serviceAccountFetchEnd:c,rolesFetchBegin:u,rolesFetchEnd:f}=s.actions,d={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All},E=(0,t.Z0)({name:"serviceaccounts",initialState:d,reducers:{serviceAccountsFetched:(T,M)=>{const{totalCount:O,perPage:S,...p}=M.payload,x=Math.ceil(O/S);return{...T,...p,totalPages:x,perPage:S,showPaging:x>1,isLoading:!1}},serviceAccountsFetchBegin:T=>({...T,isLoading:!0}),serviceAccountsFetchEnd:T=>({...T,isLoading:!1}),acOptionsLoaded:(T,M)=>({...T,roleOptions:M.payload}),queryChanged:(T,M)=>({...T,query:M.payload,page:0}),pageChanged:(T,M)=>({...T,page:M.payload}),stateFilterChanged:(T,M)=>({...T,serviceAccountStateFilter:M.payload})}}),h=E.reducer,{serviceAccountsFetchBegin:y,serviceAccountsFetchEnd:a,serviceAccountsFetched:v,acOptionsLoaded:g,pageChanged:b,stateFilterChanged:P,queryChanged:C}=E.actions,D={serviceAccountProfile:o,serviceAccounts:h}},8212:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>E,NV:()=>f,Y1:()=>i,j7:()=>l,kH:()=>m,pB:()=>u,s7:()=>c,sF:()=>o,sJ:()=>s});var t=e(30038);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},r=(0,t.Z0)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(h,y)=>({...h,supportBundles:y.payload,isLoading:!1}),fetchBegin:h=>({...h,isLoading:!0}),fetchEnd:h=>({...h,isLoading:!1}),collectorsFetchBegin:h=>({...h,createBundlePageLoading:!0}),collectorsFetchEnd:h=>({...h,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(h,y)=>({...h,supportBundleCollectors:y.payload,createBundlePageLoading:!1}),setLoadBundleError:(h,y)=>({...h,loadBundlesError:y.payload,supportBundleCollectors:[]}),setCreateBundleError:(h,y)=>({...h,createBundleError:y.payload})}}),{supportBundlesLoaded:s,fetchBegin:o,fetchEnd:m,supportBundleCollectorsLoaded:l,collectorsFetchBegin:i,collectorsFetchEnd:c,setLoadBundleError:u,setCreateBundleError:f}=r.actions,E={supportBundles:r.reducer}},34655:(Y,I,e)=>{"use strict";e.d(I,{$T:()=>E,$u:()=>l,Ay:()=>g,EC:()=>m,L5:()=>o,Q9:()=>s,dJ:()=>i,jE:()=>c,tC:()=>h});var t=e(30038);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},r=(0,t.Z0)({name:"teams",initialState:n,reducers:{teamsLoaded:(b,P)=>{const{totalCount:C,perPage:D,...T}=P.payload,M=Math.ceil(C/D);return{...b,...T,totalPages:M,perPage:D,hasFetched:!0}},queryChanged:(b,P)=>({...b,page:1,query:P.payload}),pageChanged:(b,P)=>({...b,page:P.payload}),sortChanged:(b,P)=>({...b,sort:P.payload,page:1}),rolesFetchBegin:b=>({...b,rolesLoading:!0}),rolesFetchEnd:b=>({...b,rolesLoading:!1})}}),{teamsLoaded:s,queryChanged:o,pageChanged:m,sortChanged:l,rolesFetchBegin:i,rolesFetchEnd:c}=r.actions,u=r.reducer,f={team:{},members:[],groups:[],searchMemberQuery:""},d=(0,t.Z0)({name:"team",initialState:f,reducers:{teamLoaded:(b,P)=>({...b,team:P.payload}),teamMembersLoaded:(b,P)=>({...b,members:P.payload}),setSearchMemberQuery:(b,P)=>({...b,searchMemberQuery:P.payload}),teamGroupsLoaded:(b,P)=>({...b,groups:P.payload})}}),{teamLoaded:E,teamGroupsLoaded:h,teamMembersLoaded:y,setSearchMemberQuery:a}=d.actions,v=d.reducer,g={teams:u,team:v}},23989:(Y,I,e)=>{"use strict";e.d(I,{w:()=>ee});var t=e(2543),n=e(95344),r=e(19347),s=e(72574),o=e(27857),m=e(52622),l=e(73788),i=e(20601),c=e(13344),u=e(24240),f=e(87421),d=e(75096);let E={};function h(X){const j=E[X];return j||(E[X]=(0,t.property)(X))}class y{constructor(j,ne,te){this.state={name:j.name,value:ne,text:te,type:j.type}}getValue(j){let{value:ne}=this.state;return ne==="string"||ne==="number"||ne==="boolean"?ne:String(ne)}getValueText(){const{value:j,text:ne}=this.state;return typeof ne=="string"?j===c.To?c.Zm:ne:Array.isArray(ne)?ne.join(" + "):(console.log("value",ne),String(ne))}}let a;function v(X,j,ne){return a?(a.state.name=X.name,a.state.type=X.type,a.state.value=j,a.state.text=ne):a=new y(X,j,ne),a}function g(X,j,ne,te){if(ne=ne||{},X==null||(0,u.EW)(ne)&&j!==m.$m.QueryParam)return"";if(!Array.isArray(X)&&typeof X=="object"&&(X=`${X}`),typeof j=="function")return j(X,ne,g);j||(j=m.$m.Glob);let oe=j.split(":");oe.length>1?(j=oe[0],oe=oe.slice(1)):oe=[];let ie=o.vz.getIfExists(j);ie||(console.error(`Variable format ${j} not found. Using glob format as fallback.`),ie=o.vz.get(m.$m.Glob));const ue=v(ne,X,te??X);return ie.formatter(X,oe,ue)}var b=e(84743),P=e.n(b),C=e(6709),D=e(76885),T=e(1933),M=e(74856),O=e(25304),S=e(83195),p=e(11261),x=e(92461),A=e(57875),R=e(28240),B=e(8249);function U(X,j,ne){return new Proxy({},{get:(te,oe)=>{if(oe==="name")return X.name;if(oe==="displayName")return(0,R.Ct)(X,j,ne);if(oe==="labels"||oe==="formattedLabels")return X.labels?{...X.labels,__values:Object.values(X.labels).sort().join(", "),toString:()=>(0,B.h6)(X.labels,"",!0)}:""}})}function F(X,j,ne,te){const oe=K(X,j,ne);return g(oe,te)}function K(X,j,ne){const te=ne?.__dataContext;if(!te)return X;const{frame:oe,rowIndex:ie,field:ue,calculatedValue:be}=te.value;if(be)switch(j){case"numeric":return be.numeric.toString();case"raw":return be.numeric;case"time":return"";case"text":default:return(0,S.cN)(be)}if(ie===void 0)return X;if(j==="time"){const Be=oe.fields.find(ve=>ve.type===p.PU.time);return Be?Be.values[ie]:void 0}const ge=ue.values[ie];if(j==="raw")return ge;const ye=(ue.display??V())(ge);switch(j){case"numeric":return ye.numeric;case"text":return ye.text;default:return(0,S.cN)(ye)}}function w(X,j,ne,te){const oe=ne?.__dataContext;if(!oe||!j)return X;const{frame:ie,rowIndex:ue}=oe.value;if(ue===void 0||j===void 0)return X;const be={name:ie.name,refId:ie.refId,fields:(0,x.F)({frame:ie,rowIndex:ue})},ge=h(j)(be)??"";return g(ge,te)}let L;function V(){return L||(L=(0,A.J)()),L}function N(X,j,ne,te){const oe=ne?.__dataContext;if(!oe||j!=="name")return X;const{frame:ie,frameIndex:ue}=oe.value,be=(0,R.Ri)(ie,ue);return g(be,te)}function z(X,j,ne,te){const oe=ne?.__dataContext;if(!oe||j===void 0||j==="")return X;const{frame:ie,field:ue,data:be}=oe.value,ge=U(ue,ie,be),re=h(j)(ge)??"";return g(re,te)}const J={__value:F,__data:w,__series:N,__field:z,[C.c.includeVars]:G,[C.c.keepTime]:H,__timezone:q};function G(X,j,ne){const te=(0,O.z)(ne);return D.kM.toUrlParams(te)}function H(){return D.kM.toUrlParams((0,M.jG)().timeRangeForUrl())}function q(){const X=(0,T.O)({timeZone:(0,M.jG)().timeModel?.getTimezone()});return X==="browser"?P().tz.guess():X}const le={getFilteredVariables:f.bZ,getVariables:f.UN,getVariableWithName:f._2};class me{constructor(j=le){this.dependencies=j,this.regex=d.SY,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._adhocFiltersDeprecationWarningLogged=new Map,this._variables=[]}init(j,ne){this._variables=j,this.timeRange=ne,this.updateIndex()}get variables(){return(0,n.l)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return window.__grafanaSceneContext?(0,l.E)(window.__grafanaSceneContext):this.dependencies.getVariables()}updateIndex(){const j=ne=>ne||ne==="";if(this.index=this._variables.reduce((ne,te)=>(te.current&&(te.current.isNone||j(te.current.value))&&(ne[te.name]=te),ne),{}),this.timeRange){const ne=this.timeRange.from.valueOf().toString(),te=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:ne,text:ne}},__to:{current:{value:te,text:te}}}}}updateTimeRange(j){this.timeRange=j,this.updateIndex()}variableInitialized(j){this.index[j.name]=j}getAdhocFilters(j,ne){let te=[],oe=(0,r.l)().getInstanceSettings(j);if(!oe)return[];!ne&&!this._adhocFiltersDeprecationWarningLogged.get(oe.type)&&((0,n.l)(`DataSource ${oe.type}`,"templateSrv.getAdhocFilters","filters property on the request (DataQueryRequest). Or if this is called from interpolateVariablesInQueries or applyTemplateVariables it is passed as a new argument"),this._adhocFiltersDeprecationWarningLogged.set(oe.type,!0));for(const ie of this.getAdHocVariables()){const ue=ie.datasource?.uid;(ue===oe.uid||ue?.indexOf("$")===0&&this.replace(ue)===oe.uid)&&(te=te.concat(ie.filters))}return te}setGrafanaVariable(j,ne){this.grafanaVariables.set(j,ne)}setGlobalVariable(j,ne){(0,n.l)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[j]:{current:ne}}}getVariableName(j){this.regex.lastIndex=0;const ne=this.regex.exec(j);return ne?ne.slice(1).find(oe=>oe!==void 0):null}containsTemplate(j){if(!j)return!1;const ne=this.getVariableName(j),te=ne&&this.getVariableAtIndex(ne);return te!=null}variableExists(j){return(0,n.l)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(j)}highlightVariablesAsHtml(j){return!j||!(0,t.isString)(j)?j:(j=(0,t.escape)(j),this._replaceWithVariableRegex(j,void 0,(ne,te)=>this.getVariableAtIndex(te)?'<span class="template-variable">'+ne+"</span>":ne))}getAllValue(j){if(j.allValue)return j.allValue;const ne=[];for(let te=1;te<j.options.length;te++)ne.push(j.options[te].value);return ne}getVariableValue(j,ne){return ne?h(ne)(j.value):j.value}getVariableText(j,ne){return j.value===ne||typeof ne!="string"?j.text:ne}replace(j,ne,te,oe){return ne&&ne.__sceneObject?o.jh.interpolate(ne.__sceneObject.value,j,ne,te):window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?o.jh.interpolate(window.__grafanaSceneContext,j,ne,te):j?(this.regex.lastIndex=0,this._replaceWithVariableRegex(j,te,(ie,ue,be,ge)=>{const re=this._evaluateVariableExpression(ie,ue,be,ge,ne);return oe&&oe.push({match:ie,variableName:ue,fieldPath:be,format:ge,value:re,found:re!==ie}),re})):j??""}_evaluateVariableExpression(j,ne,te,oe,ie){const ue=this.getVariableAtIndex(ne),be=ie?.[ne];if(be){const Be=this.getVariableValue(be,te),ve=this.getVariableText(be,Be);if(Be!=null)return g(Be,oe,ue,ve)}if(!ue){const Be=J[ne];return Be?Be(j,te,ie,oe):j}if(oe===m.$m.QueryParam||(0,u.EW)(ue)){const Be=i.B.get(ue.type).getValueForUrl(ue),ve=(0,u.EW)(ue)?ue.id:ue.current.text;return g(Be,oe,ue,ve)}const ge=this.grafanaVariables.get(ue.current.value);if(ge)return g(ge,oe,ue);let re=ue.current.value,ye=ue.current.text;if(this.isAllValue(re)&&(re=this.getAllValue(ue),ye=c.Zm,ue.allValue&&oe!==m.$m.Text&&oe!==m.$m.PercentEncode))return this.replace(re);if(te){const Be=this.getVariableValue({value:re,text:ye},te);if(Be!=null)return g(Be,oe,ue,ye)}return g(re,oe,ue,ye)}_replaceWithVariableRegex(j,ne,te){return this.regex.lastIndex=0,j.replace(this.regex,(oe,ie,ue,be,ge,re,ye)=>te(oe,ie||ue||ge,re,be||ye||ne))}isAllValue(j){return j===c.To||Array.isArray(j)&&j[0]===c.To}replaceWithText(j,ne){return(0,n.l)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(j,ne,"text")}getVariableAtIndex(j){if(j)return this.index[j]?this.index[j]:this.dependencies.getVariableWithName(j)}getAdHocVariables(){return this.dependencies.getFilteredVariables(u.EW)}}const k=new me;(0,s.d)(k);const ee=()=>k},3817:(Y,I,e)=>{"use strict";e.d(I,{v:()=>w});var t=e(4200),n=e(27857);function r({title:L,unit:V}){return n.d0.timeseries().setTitle(L).setUnit(V).setOption("legend",{showLegend:!1}).setCustomFieldConfig("fillOpacity",9)}function s({description:L,mainQueryExpr:V,breakdownQueryExpr:N,unit:z}){const J={title:`${t.Rp}`,unit:z},G={refId:"A",expr:V,legendFormat:L},H={...J,title:L,queries:[G],variant:"main",vizBuilder:()=>r({...H})},q={...H,title:`${t.Rp}`,queries:[{...G,legendFormat:L}],vizBuilder:()=>r(q),variant:"preview"},le={...J,queries:[{refId:"A",expr:N,legendFormat:`{{${t.aZ}}}`}],vizBuilder:()=>r(le),variant:"breakdown"};return{preview:q,main:H,breakdown:le,variants:[]}}const o=`${t.Rp}${t.ui}`,m=`rate(${o}[$__rate_interval])`;function l(L){return L?m:o}const i={avg:"average",sum:"overall"};function c(L){return i[L]||L}function u({agg:L,rate:V,unit:N}){const z=l(V),J=V?`${c(L)} per-second rate`:`${c(L)}`,G=`${t.Rp} (${J})`,H=`${L}(${z})`,q=`${L}(${z})by(${t.aZ})`;return s({description:G,mainQueryExpr:H,breakdownQueryExpr:q,unit:N})}const f="short";function d(L){return L&&E[L]||f}const E={bytes:"bytes",seconds:"s"},h={bytes:"Bps",seconds:"short"},y="cps";function a(L){return L&&h[L]||y}const v=new Set(["count","total"]),g=new Set(["sum","bucket"]),b={count:"sum",total:"sum"};function P(L){return L==="total"}function C(L){const V=L.at(-1);if(V==null||g.has(V))throw new Error(`This function does not support a metric suffix of "${V}"`);const N=v.has(V),z=b[V]||"avg",J=P(V)?L.at(-2):V,G=N?a(J):d(J);return{agg:z,unit:G,rate:N}}function D(L){const V=C(L);return u(V)}const T={generator:D};var M=e(52995);function O({title:L,unit:V}){return n.d0.heatmap().setTitle(L).setUnit(V).setOption("calculate",!1).setOption("color",{mode:M.P7.Scheme,exponent:.5,scheme:"Spectral",steps:32,reverse:!1})}function S({title:L,unit:V}){return n.d0.timeseries().setTitle(L).setUnit(V).setCustomFieldConfig("fillOpacity",9)}function p(L){const V=`${t.Rp}`,N=L.at(-2),z=d(N),J={title:V,unit:z},G={...J,variant:"p50",queries:[B(50)],vizBuilder:()=>r(G)},H={...J,variant:"p50",queries:[B(50,[t.aZ])],vizBuilder:()=>r(H)},q={...J,variant:"percentiles",queries:[99,90,50].map(me=>B(me)),vizBuilder:()=>S(q)},le={...J,variant:"heatmap",queries:[R()],vizBuilder:()=>O(le)};return{preview:G,main:q,variants:[q,le],breakdown:H}}const x=`rate(${t.Rp}${t.ui}[$__rate_interval])`;function A(L=[]){return`sum by(${["le",...L].join(", ")}) (${x})`}function R(L=[]){return{refId:"Heatmap",expr:A(L),format:"heatmap"}}function B(L,V=[]){const N=L/100;return{refId:`Percentile${L}`,expr:`histogram_quantile(${N}, ${A(V)})`,legendFormat:`${L}th Percentile`}}function U(L){if(L.at(-1)!=="sum")throw new Error('createSummaryQueryDefs is only to be used for metrics that end in "_sum"');const N=L.at(-2),z=d(N),G=l(!0),H=L.slice(0,-1).join("_"),q=ee(`sum(${G})`),le=ee(`sum(${G})by(${t.aZ})`),k=`${H} (average)`;function ee(X){const j=X.replace(t.Rp,`${H}_sum`),ne=X.replace(t.Rp,`${H}_count`);return`${j}/${ne}`}return s({description:k,mainQueryExpr:q,breakdownQueryExpr:le,unit:z})}const F={sum:U,bucket:p};function K(L){return L&&F[L]||T.generator}function w(L){const V=L.split("_"),N=V.at(-1),z=K(N);if(!z)throw new Error(`Unable to generate queries for metric "${L}" due to issues with derived suffix "${N}"`);return z(V)}},56833:(Y,I,e)=>{"use strict";e.d(I,{b:()=>C,B:()=>D});var t=e(32196),n=e(96540),r=e(76885),s=e(12470),o=e(12131),m=e(27857),l=e(40845),i=e(15292),c=e(83122),u=e(27746),f=e(40588);class d extends m.Bs{constructor(p){super({stickyMainGraph:p.stickyMainGraph??!0,isOpen:p.isOpen??!1}),this.onToggleStickyMainGraph=()=>{const x=!this.state.stickyMainGraph;(0,f.z)("settings_changed",{stickyMainGraph:x}),this.setState({stickyMainGraph:x})},this.onToggleOpen=x=>{this.setState({isOpen:x})}}static{this.Component=({model:p})=>{const{stickyMainGraph:x,isOpen:A}=p.useState(),R=(0,l.of)(E),B=()=>n.createElement("div",{className:R.popover,onClick:U=>U.stopPropagation()},n.createElement("div",{className:R.heading},"Settings"),n.createElement("div",{className:R.options},n.createElement("div",null,"Always keep selected metric graph in-view"),n.createElement(i.d,{value:x,onChange:p.onToggleStickyMainGraph})));return n.createElement(c.m,{overlay:B,placement:"bottom",onVisibleChange:p.onToggleOpen},n.createElement(u.I,{icon:"cog",variant:"canvas",isOpen:A}))}}}function E(S){return{popover:(0,t.css)({display:"flex",padding:S.spacing(2),flexDirection:"column",background:S.colors.background.primary,boxShadow:S.shadows.z3,borderRadius:S.shape.borderRadius(),border:`1px solid ${S.colors.border.weak}`,zIndex:1,marginRight:S.spacing(2)}),heading:(0,t.css)({fontWeight:S.typography.fontWeightMedium,paddingBottom:S.spacing(2)}),options:(0,t.css)({display:"grid",gridTemplateColumns:"1fr 50px",rowGap:S.spacing(1),columnGap:S.spacing(2)})}}var h=e(13054),y=e(75176),a=e(59055),v=e(90623),g=e(74764),b=e(88434),P=e(4200);class C extends m.Bs{constructor(p){super({$timeRange:p.$timeRange??new m.JZ({}),$variables:p.$variables??T(p.initialDS,p.metric,p.initialFilters),controls:p.controls??[new m.K8({layout:"vertical"}),new m.N0,new m.KE({}),new m.WM({})],history:p.history??new h.L({}),settings:p.settings??new d({}),createdAt:p.createdAt??new Date().getTime(),...p}),this._urlSync=new m.So(this,{keys:["metric"]}),this._variableDependency=new m.Sh(this,{variableNames:[P.EY],onReferencedVariableValueChanged:x=>{const{name:A}=x.state;A===P.EY&&this.datasourceHelper.reset()}}),this._addingFilterWithoutReportingInteraction=!1,this.datasourceHelper=new b.q(this),this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){this.state.topScene||this.setState({topScene:D(this.state.metric)}),this.subscribeToEvent(P.OO,this._handleMetricSelectedEvent.bind(this));const p=m.jh.lookupVariable(P.Ao,this);p instanceof m.H9&&this._subs.add(p?.subscribeToState((R,B)=>{this._addingFilterWithoutReportingInteraction||(0,f.h)(R.filters,B.filters)}));const x=this.state.history.state.steps[this.state.history.state.currentStep]?.trailState;x&&this.restoreFromHistoryStep(x),this.enableUrlSync();const A=()=>(0,g._)().setRecentTrail(this);return window.addEventListener("unload",A),()=>{this.disableUrlSync(),this.state.embedded||A(),window.removeEventListener("unload",A)}}enableUrlSync(){this.state.embedded||(0,m.Is)().initSync(this)}disableUrlSync(){this.state.embedded||(0,m.Is)().cleanUp(this)}addFilterWithoutReportingInteraction(p){const x=m.jh.lookupVariable("filters",this);x instanceof m.H9&&(this._addingFilterWithoutReportingInteraction=!0,x.setState({filters:[...x.state.filters,p]}),this._addingFilterWithoutReportingInteraction=!1)}getMetricMetadata(p){return this.datasourceHelper.getMetricMetadata(p)}getCurrentMetricMetadata(){return this.getMetricMetadata(this.state.metric)}restoreFromHistoryStep(p){this.disableUrlSync(),!p.topScene&&!p.metric&&(p.topScene=new a.t({})),this.setState(m.Go.cloneSceneObjectState(p,{history:this.state.history,metric:p.metric?p.metric:void 0}));const x=(0,m.Is)().getUrlState(this),A=r.kM.renderUrl(o.Ny.getLocation().pathname,x);o.Ny.replace(A),this.enableUrlSync()}_handleMetricSelectedEvent(p){this.setState(this.getSceneUpdatesForNewMetricValue(p.payload));const x=m.jh.lookupVariable(P.Ao,this);x instanceof m.H9&&x.setState({baseFilters:O(p.payload)})}getSceneUpdatesForNewMetricValue(p){const x={};return x.metric=p,x.topScene=D(p),x}getUrlState(){return{metric:this.state.metric}}updateFromUrl(p){const x={};typeof p.metric=="string"?this.state.metric!==p.metric&&Object.assign(x,this.getSceneUpdatesForNewMetricValue(p.metric)):p.metric==null&&(x.metric=void 0,x.topScene=new a.t({})),this.setState(x)}static{this.Component=({model:p})=>{const{controls:x,topScene:A,history:R,settings:B}=p.useState(),U=(0,l.of)(M),F=(0,g._)().recent.length<2;return n.createElement("div",{className:U.container},F&&n.createElement(v.p,null),n.createElement(R.Component,{model:R}),x&&n.createElement("div",{className:U.controls},x.map(K=>n.createElement(K.Component,{key:K.state.key,model:K})),n.createElement(B.Component,{model:B})),n.createElement("div",{className:U.body},A&&n.createElement(A.Component,{model:A})))}}}function D(S){return S?new y.R({metric:S}):new a.t({})}function T(S,p,x){return new m.Pj({variables:[new m.mI({name:P.EY,label:"Data source",description:"Only prometheus data sources are supported",value:S,pluginId:"prometheus"}),new m.H9({name:P.Ao,addFilterButtonText:"Add label",datasource:P.GH,hide:s.zL.hideLabel,layout:"vertical",filters:x??[],baseFilters:O(p)})]})}function M(S){return{container:(0,t.css)({flexGrow:1,display:"flex",gap:S.spacing(1),minHeight:"100%",flexDirection:"column"}),body:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column"}),controls:(0,t.css)({display:"flex",gap:S.spacing(1),padding:S.spacing(1,0),alignItems:"flex-end",flexWrap:"wrap",position:"sticky",background:S.isDark?S.colors.background.canvas:S.colors.background.primary,zIndex:S.zIndex.navbarFixed,top:0})}}function O(S){return S?[{key:"__name__",operator:"=",value:S}]:[]}},13054:(Y,I,e)=>{"use strict";e.d(I,{L:()=>d,h:()=>f});var t=e(32196),n=e(96540),r=e(27857),s=e(67061),o=e(40845),m=e(56034),l=e(56833),i=e(40588),c=e(4200),u=e(51080);function f(a){return"currentStep"in a&&"steps"in a}class d extends r.Bs{constructor(v){super({steps:v.steps??[],currentStep:v.currentStep??0}),this.stepTransitionInProgress=!1,this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const v=(0,u.kj)(this);if(this.state.steps.length===0&&(this.addTrailStep(v,"start"),v.state.metric)){const{metric:g,...b}=v.state;b.topScene=(0,l.B)(void 0),this.state.steps[0].trailState=b,this.addTrailStep(v,"metric")}v.subscribeToState((g,b)=>{g.metric!==b.metric&&(this.state.steps.length===1&&(this.state.steps[0].trailState=r.Go.cloneSceneObjectState(b,{history:this})),(g.metric||b.metric)&&this.addTrailStep(v,"metric"))}),v.subscribeToEvent(r.oh,g=>{g.payload.state.name===c.Ao&&this.addTrailStep(v,"filters")}),v.subscribeToEvent(r.bZ,g=>{if(g.payload.changedObject instanceof r.JZ){const{prevState:b,newState:P}=g.payload;if((0,u.iG)(b)&&(0,u.iG)(P)&&b.from===P.from&&b.to===P.to)return;this.addTrailStep(v,"time")}})}addTrailStep(v,g){if(this.stepTransitionInProgress)return;const b=this.state.steps.length,P=g==="start"?-1:this.state.currentStep;this.setState({currentStep:b,steps:[...this.state.steps,{description:"Test",type:g,trailState:r.Go.cloneSceneObjectState(v.state,{history:this}),parentIndex:P}]})}goBackToStep(v){if(v===this.state.currentStep)return;const g=this.state.steps[v],b=g.type==="metric"&&g.trailState.metric===void 0?"metric-clear":g.type;(0,i.z)("history_step_clicked",{type:b}),this.stepTransitionInProgress=!0,this.setState({currentStep:v}),(0,u.kj)(this).restoreFromHistoryStep(g.trailState),this.stepTransitionInProgress=!1}renderStepTooltip(v){return n.createElement(s.B,{direction:"column"},n.createElement("div",null,v.type),v.type==="metric"&&n.createElement("div",null,v.trailState.metric||"Select new metric"))}static{this.Component=({model:v})=>{const{steps:g,currentStep:b}=v.useState(),P=(0,o.of)(E),{ancestry:C,alternatePredecessorStyle:D}=(0,n.useMemo)(()=>{const T=new Set;let M=b;for(;M>=0;){const S=g[M];if(!S)break;T.add(M),M=S.parentIndex}const O=new Map;return T.forEach(S=>{const p=g[S].parentIndex;p+1!==S&&O.set(S,y(S,p))}),{ancestry:T,alternatePredecessorStyle:O}},[b,g]);return n.createElement("div",{className:P.container},n.createElement("div",{className:P.heading},"History"),g.map((T,M)=>{let O=T.type;return O==="metric"&&T.trailState.metric===void 0&&(O="start"),n.createElement(m.m,{content:()=>v.renderStepTooltip(T),key:M},n.createElement("button",{className:(0,t.cx)(P.step,P.stepTypes[O],v.state.currentStep===M?P.stepSelected:"",D.get(M)??"",M!==T.parentIndex+1?P.stepOmitsDirectLeftLink:"",M===0?P.stepOmitsDirectLeftLink:"",C.has(M)?"":P.stepIsNotAncestorOfCurrent),onClick:()=>v.goBackToStep(M)}))}))}}}function E(a){const v=a.visualization;return{container:(0,t.css)({display:"flex",gap:10,alignItems:"center"}),heading:(0,t.css)({}),step:(0,t.css)({flexGrow:0,cursor:"pointer",border:"none",boxShadow:"none",padding:0,margin:0,width:8,height:8,opacity:.7,borderRadius:a.shape.radius.circle,background:a.colors.primary.main,position:"relative","&:hover":{opacity:1},"&:hover:before":{opacity:.7},"&:before":{content:'""',position:"absolute",width:10,height:2,left:-10,top:3,background:a.colors.primary.border,pointerEvents:"none"}}),stepSelected:(0,t.css)({"&:after":{content:'""',borderStyle:"solid",borderWidth:2,borderRadius:"50%",position:"absolute",width:16,height:16,left:-4,top:-4,boxShadow:`0px 0px 0px 2px inset ${a.colors.background.canvas}`}}),stepOmitsDirectLeftLink:(0,t.css)({"&:before":{background:"none"}}),stepIsNotAncestorOfCurrent:(0,t.css)({opacity:.2,"&:hover:before":{opacity:.2}}),stepTypes:{start:h(v.getColorByName("green")),filters:h(v.getColorByName("purple")),metric:h(v.getColorByName("orange")),time:h(a.colors.primary.main)}}}function h(a){return(0,t.css)({background:a,"&:before":{background:a,borderColor:a},"&:after":{borderColor:a}})}function y(a,v){const P=(a-v)*18;return(0,t.css)({"&:before":{content:'""',width:P+2,height:10,borderStyle:"solid",borderWidth:2,borderBottom:"none",borderTopLeftRadius:8,borderTopRightRadius:8,top:-10,left:3-P,background:"none"}})}},75176:(Y,I,e)=>{"use strict";e.d(I,{k:()=>at,R:()=>He});var t=e(32196),n=e(96540),r=e(32264),s=e(27857),o=e(40845),m=e(90613),l=e(67061),i=e(27746),c=e(14578),u=e(55852),f=e(63021),d=e(40675),E=e(56034),h=e(87490),y=e(2543),a=e(11261),v=e(88575),g=e(13344),b=e(3817),P=e(16792),C=e(29413),D=e(94354),T=e(88323);function M({options:xe,value:Fe,onChange:Ee}){const se=(0,o.of)(O),ae=(0,o.$j)(),[fe,Ce]=(0,n.useState)(0),[Re,Oe]=(0,n.useState)(0),ze=Re>fe,Xe=(0,n.useRef)(null);return(0,P.wY)({ref:Xe,onResize:()=>{const Ze=Xe.current;Ze&&Oe(Ze.clientWidth)}}),(0,n.useEffect)(()=>{const{fontSize:Ze}=ae.typography,et=xe.map(rt=>rt.label||rt.value||"").join(" "),nt=(0,C.kD)(et,Ze).width;Ce(nt+32*xe.length)},[xe,ae]),n.createElement("div",{ref:Xe},ze?n.createElement(D.z,{options:xe,value:Fe,onChange:Ee}):n.createElement(T.l6,{options:xe,value:Fe,onChange:Ze=>Ee(Ze.value),className:se.select}))}function O(xe){return{select:(0,t.css)({maxWidth:xe.spacing(16)})}}var S=e(69096),p=e(40588),x=e(4200),A=e(51080);class R extends s.Bs{constructor(){super(...arguments),this.onClick=()=>{if(!(s.jh.lookupVariable("filters",this)instanceof s.H9))return;const Ee=this.state.frame.fields[1]?.labels??{};if(Object.keys(Ee).length!==1)return;const se=Object.keys(Ee)[0];(0,p.z)("label_filter_changed",{label:se,action:"added",cause:"breakdown"});const ae=(0,A.kj)(this),fe={key:se,operator:"=",value:Ee[se]};ae.addFilterWithoutReportingInteraction(fe)}}static{this.Component=({model:Fe})=>{const se=Fe.useState().frame.fields[1]?.labels||{};return Object.keys(se).length!==0?n.createElement(u.$n,{variant:"secondary",size:"sm",fill:"solid",onClick:Fe.onClick},"Add to filters"):null}}}var B=e(39070);function U(xe,Fe){const Ee=s.jh.lookupVariable(x.Ao,xe),se=[];if(!(Ee instanceof s.H9))return[];const ae=Ee.state.filters;for(const fe of Fe.getOptionsForSelect()){const Ce=ae.find(Re=>Re.key===fe.value);fe.label!=="le"&&(Ce||se.push({label:fe.label,value:String(fe.value)}))}return se}function F(xe,Fe){const Ee=sceneGraph.findObject(xe,se=>se instanceof Fe);return Ee instanceof Fe?Ee:null}function K(xe,Fe){function Ee(ae){return ae instanceof Fe}return s.jh.findAllObjects(xe,Ee).filter(Ee)}class w extends s.Bs{constructor(Fe){super(Fe),this.addActivationHandler(()=>{const Ee=s.jh.getData(this);this._subs.add(Ee.subscribeToState((se,ae)=>{if(se.data===void 0)return;const fe=se.data;se.data!==void 0&&se.data?.state!==ae.data?.state&&K(this,s.Zv).forEach(Ce=>{Ce.setState({data:{...Ce.state.data,state:fe.state}})}),fe.state===B.Gu.Done&&this.performRepeat(fe)})),Ee.state.data&&this.performRepeat(Ee.state.data)})}performRepeat(Fe){const Ee=[];for(let se=0;se<Fe.series.length;se++){const ae=Fe.series[se];if(ae.length<=1)continue;const fe=this.state.getLayoutChild(Fe,ae,se);Ee.push(fe)}this.state.body.setState({children:Ee}),this.setState({body:this.state.body})}static{this.Component=({model:Fe})=>{const{body:Ee}=Fe.useState(),{children:se}=Ee.useState(),Ce=s.jh.getData(Fe).useState()?.data,Re=Ce?.state==="Loading"&&se.length===0,Oe=Ce?.state===B.Gu.Error?"Failed to load data.":void 0,ze=!Re&&se.length===0&&!Oe?"There is no data available. Try adjusting your filters, time range, or selecting a different label.":void 0;return n.createElement(S.O,{blockingMessage:ze,error:Oe,isLoading:Re},n.createElement(Ee.Component,{model:Ee}))}}}class L extends s.Bs{constructor(){super(...arguments),this.onLayoutChange=Fe=>{(0,p.z)("breakdown_layout_changed",{layout:Fe}),this.getMetricScene().setState({layout:Fe})}}getMetricScene(){return s.jh.getAncestor(this,He)}Selector({model:Fe}){const{options:Ee}=Fe.useState(),se=Fe.useActiveLayout();return n.createElement(v.D,{label:"View"},n.createElement(D.z,{options:Ee,value:se,onChange:Fe.onLayoutChange}))}useActiveLayout(){const{options:Fe}=this.useState(),{layout:Ee}=this.getMetricScene().useState();return Fe.map(ae=>ae.value).includes(Ee)?Ee:Fe[0].value}static{this.Component=({model:Fe})=>{const{layouts:Ee,options:se}=Fe.useState(),ae=Fe.useActiveLayout(),fe=se.findIndex(Re=>Re.value===ae);if(fe===-1)return null;const Ce=Ee[fe];return n.createElement(Ce.Component,{model:Ce})}}}var V=e(52622);const N=s.zd.timeseries().setOption("tooltip",{mode:V.$N.Multi,sort:V.xB.Descending}).setOption("legend",{showLegend:!1}).build();var z=e(65463);class J extends z.x{static{this.type="selected-metric-query-results-event"}}const G=xe=>{const Fe=s.jh.getAncestor(xe,q);K(xe,s.Eb).forEach(ae=>{ae.isActive?Ee(ae.state.$data):ae.addActivationHandler(()=>{Ee(ae.state.$data)})}),K(xe,s.Eb).forEach(ae=>Ee(ae.state.$data));function Ee(ae){ae&&(ae.isActive||ae.addActivationHandler(()=>{Ee(ae)}),ae.state.data&&Fe.reportBreakdownPanelData(ae.state.data),ae.subscribeToState(({data:fe},Ce)=>{Fe.reportBreakdownPanelData(fe)}))}const se=Fe.subscribeToEvent(J,ae=>{if(!xe.isActive){se.unsubscribe();return}const fe=s.No.timeseries().setCustomFieldConfig("axisSoftMin",ae.payload.min).setCustomFieldConfig("axisSoftMax",ae.payload.max).build();K(xe,s.Eb).forEach(Ce=>{function Re(){Ce.onFieldConfigChange(fe)}Ce.isActive?Re():Ce.addActivationHandler(Re)})})},H=60;class q extends s.Bs{constructor(Fe){super({labels:Fe.labels??[],...Fe}),this._variableDependency=new s.Sh(this,{variableNames:[x.Ao],onReferencedVariableValueChanged:this.onReferencedVariableValueChanged.bind(this)}),this._triggerAxisChangedEvent=(0,y.throttle)(()=>{const{breakdownPanelMinValue:Ee,breakdownPanelMaxValue:se}=this;Ee!==void 0&&se!==void 0&&this.publishEvent(new J({min:Ee,max:se}))},1e3),this.onChange=Ee=>{if(!Ee)return;(0,p.z)("label_selected",{label:Ee,cause:"selector"}),this.getVariable().changeValueTo(Ee)},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){const Fe=this.getVariable();Fe.subscribeToState((fe,Ce)=>{(fe.options!==Ce.options||fe.value!==Ce.value||fe.loading!==Ce.loading)&&this.updateBody(Fe)});const Ee=s.jh.getAncestor(this,He),se=Ee.state.metric;this._query=(0,b.v)(se).breakdown,(0,A.kj)(this).state.$timeRange?.subscribeToState(()=>{this.clearBreakdownPanelAxisValues()}),Ee.subscribeToState(({layout:fe},Ce)=>{fe!==Ce.layout&&this.clearBreakdownPanelAxisValues()}),this.updateBody(Fe)}reportBreakdownPanelData(Fe){if(!Fe)return;let Ee=this.breakdownPanelMinValue,se=this.breakdownPanelMaxValue;Fe.series.forEach(ae=>{ae.fields.forEach(fe=>{if(fe.type!==a.PU.number)return;const Ce=fe.values.filter(y.isNumber),Re=(0,y.max)(Ce),Oe=(0,y.min)(Ce);se=(0,y.max)([se,Re].filter(y.isNumber)),Ee=(0,y.min)([Ee,Oe].filter(y.isNumber))})}),!(se===void 0||Ee===void 0||!Number.isFinite(se+Ee))&&(this.breakdownPanelMaxValue===se&&this.breakdownPanelMinValue===Ee||(this.breakdownPanelMaxValue=se,this.breakdownPanelMinValue=Ee,this._triggerAxisChangedEvent()))}clearBreakdownPanelAxisValues(){this.breakdownPanelMaxValue=void 0,this.breakdownPanelMinValue=void 0}getVariable(){const Fe=s.jh.lookupVariable(x.yr,this);if(!(Fe instanceof s.fS))throw new Error("Group by variable not found");return Fe}onReferencedVariableValueChanged(){const Fe=this.getVariable();Fe.changeValueTo(g.To),this.updateBody(Fe)}updateBody(Fe){const Ee=U(this,Fe),se={loading:Fe.state.loading,value:String(Fe.state.value),labels:Ee,error:Fe.state.error,blockingMessage:void 0};!Fe.state.loading&&Fe.state.options.length?se.body=Fe.hasAllValue()?me(Ee,this._query):ee(this._query):Fe.state.loading||(se.body=void 0,se.blockingMessage="Unable to retrieve label options for currently selected metric."),this.clearBreakdownPanelAxisValues(),this.setState(se)}static{this.Component=({model:Fe})=>{const{labels:Ee,body:se,loading:ae,value:fe,blockingMessage:Ce}=Fe.useState(),Re=(0,o.of)(le);return n.createElement("div",{className:Re.container},n.createElement(S.O,{isLoading:ae,blockingMessage:Ce},n.createElement("div",{className:Re.controls},!ae&&Ee.length&&n.createElement("div",{className:Re.controlsLeft},n.createElement(v.D,{label:"By label"},n.createElement(M,{options:Ee,value:fe,onChange:Fe.onChange}))),se instanceof L&&n.createElement("div",{className:Re.controlsRight},n.createElement(se.Selector,{model:se}))),n.createElement("div",{className:Re.content},se&&n.createElement(se.Component,{model:se}))))}}}function le(xe){return{container:(0,t.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column"}),content:(0,t.css)({flexGrow:1,display:"flex",paddingTop:xe.spacing(0)}),controls:(0,t.css)({flexGrow:0,display:"flex",alignItems:"top",gap:xe.spacing(2)}),controlsRight:(0,t.css)({flexGrow:0,display:"flex",justifyContent:"flex-end"}),controlsLeft:(0,t.css)({display:"flex",justifyContent:"flex-left",justifyItems:"left",width:"100%",flexDirection:"column"})}}function me(xe,Fe){const Ee=[];for(const se of xe){if(se.value===g.To)continue;if(Ee.length===H)break;const ae=Fe.queries[0].expr.replaceAll(x.aZ,String(se.value)),fe=Fe.unit,Ce=s.d0.timeseries().setTitle(se.label).setData(new s.dt({maxDataPoints:250,datasource:x.GH,queries:[{refId:"A",expr:ae,legendFormat:`{{${se.label}}}`}]})).setHeaderActions(new ne({labelName:String(se.value)})).setUnit(fe).build();Ce.addActivationHandler(()=>{Ce.onOptionsChange(N)}),Ee.push(new s.xK({$behaviors:[G],body:Ce}))}return new L({options:[{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],layouts:[new s.gF({templateColumns:k,autoRows:"200px",children:Ee,isLazy:!0}),new s.gF({templateColumns:"1fr",autoRows:"200px",children:Ee.map(se=>se.clone()),isLazy:!0})]})}const k="repeat(auto-fit, minmax(400px, 1fr))";function ee(xe){const Fe=xe.unit;function Ee(se,ae,fe){const Ce=xe.vizBuilder().setTitle(X(ae)).setData(new s.Zv({data:{...se,series:[ae]}})).setColor({mode:"fixed",fixedColor:(0,A.Vy)(fe)}).setHeaderActions(new R({frame:ae})).setUnit(Fe).build(),Re=ae.length<=1,Oe=new s.xK({$behaviors:[G],body:Ce,isHidden:Re});return Ce.addActivationHandler(()=>{Ce.onOptionsChange(N)}),Oe}return new L({$data:new s.dt({datasource:x.GH,maxDataPoints:300,queries:xe.queries}),options:[{value:"single",label:"Single"},{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],layouts:[new s.G1({direction:"column",children:[new s.vA({minHeight:300,body:s.d0.timeseries().setTitle("$metric").build()})]}),new w({body:new s.gF({templateColumns:k,autoRows:"200px",children:[]}),getLayoutChild:Ee}),new w({body:new s.gF({templateColumns:"1fr",autoRows:"200px",children:[]}),getLayoutChild:Ee})]})}function X(xe){const Fe=xe.fields[1]?.labels||{},Ee=Object.keys(Fe);return Ee.length===0?"<unspecified>":Fe[Ee[0]]}function j(){return new q({})}class ne extends s.Bs{constructor(){super(...arguments),this.onClick=()=>{const Fe=this.state.labelName;(0,p.z)("label_selected",{label:Fe,cause:"breakdown_panel"}),te(this).onChange(Fe)}}static{this.Component=({model:Fe})=>n.createElement(u.$n,{variant:"secondary",size:"sm",fill:"solid",onClick:Fe.onClick},"Select")}}function te(xe){if(xe instanceof q)return xe;if(xe.parent)return te(xe.parent);throw new Error("Unable to find breakdown scene")}var oe=e(94753),ie=e(72109);class ue extends s.Bs{constructor(Fe){super({...Fe}),this._variableDependency=new s.Sh(this,{variableNames:[x.gR],onReferencedVariableValueChanged:this.onReferencedVariableValueChanged.bind(this)}),this.addActivationHandler(this._onActivate.bind(this))}getVariable(){const Fe=s.jh.lookupVariable(x.yr,this);if(!(Fe instanceof s.fS))throw new Error("Group by variable not found");return Fe}_onActivate(){this.updateMetadata()}onReferencedVariableValueChanged(){this.updateMetadata()}async updateMetadata(){this.setState({metadataLoading:!0,metadata:void 0});const Ee=(0,A.aM)(this).state.metric,ae=await(0,A.kj)(this).getMetricMetadata(Ee);this.setState({metadata:ae,metadataLoading:!1})}static{this.Component=({model:Fe})=>{const{metadata:Ee,metadataLoading:se}=Fe.useState(),ae=Fe.getVariable(),{loading:fe}=ae.useState(),Ce=U(Fe,ae).filter(Re=>Re.value!==g.To);return n.createElement(S.O,{isLoading:fe||se},n.createElement(l.B,{gap:6},n.createElement(n.Fragment,null,n.createElement(l.B,{direction:"column",gap:.5},n.createElement(oe.E,{weight:"medium"},"Description"),n.createElement("div",{style:{maxWidth:360}},Ee?.help?n.createElement("div",null,Ee?.help):n.createElement("i",null,"No description available"))),n.createElement(l.B,{direction:"column",gap:.5},n.createElement(oe.E,{weight:"medium"},"Type"),Ee?.type?n.createElement("div",null,Ee?.type):n.createElement("i",null,"Unknown")),n.createElement(l.B,{direction:"column",gap:.5},n.createElement(oe.E,{weight:"medium"},"Unit"),Ee?.unit?n.createElement("div",null,Ee?.unit):n.createElement("i",null,"Unknown")),n.createElement(l.B,{direction:"column",gap:.5},n.createElement(oe.E,{weight:"medium"},"Labels"),Ce.length===0&&"Unable to fetch labels.",Ce.map(Re=>n.createElement(ie.Y,{key:Re.label,href:`#View breakdown for ${Re.label}`,title:`View breakdown for ${Re.label}`,onClick:Oe=>{Oe.preventDefault(),Oe.stopPropagation(),s.jh.getAncestor(Fe,He).setActionView("breakdown");const ze=s.jh.lookupVariable(x.yr,Fe);return ze instanceof s.fS&&Re.label!=null&&((0,p.z)("label_selected",{label:Re.label,cause:"overview_link"}),ze.setState({value:Re.value})),!1}},Re.label))))))}}}function be(){return new ue({})}var ge=e(59055);function re(){return new ge.t({})}var ye=e(94624);class Be extends s.Bs{constructor(Fe){super(Fe),this.onChangeQuery=Ee=>{const se=(0,A.aM)(this),ae=se.state.autoQuery.variants.find(fe=>fe.variant===Ee);this.setState({panel:this.getVizPanelFor(ae)}),se.setState({queryDef:ae})},this.addActivationHandler(this.onActivate.bind(this))}onActivate(){if(!this.state.panel){const{autoQuery:Fe}=(0,A.aM)(this).state;this.setState({panel:this.getVizPanelFor(Fe.main)})}}getQuerySelector(Fe){const{autoQuery:Ee}=(0,A.aM)(this).state;if(Ee.variants.length===0)return;const se=Ee.variants.map(ae=>({label:ae.variant,value:ae.variant}));return n.createElement(D.z,{size:"sm",options:se,value:Fe.variant,onChange:this.onChangeQuery})}getVizPanelFor(Fe){return Fe.vizBuilder().setData(new s.dt({datasource:x.GH,maxDataPoints:500,queries:Fe.queries})).setHeaderActions(this.getQuerySelector(Fe)).build()}static{this.Component=({model:Fe})=>{const{panel:Ee}=Fe.useState();if(Ee)return n.createElement(Ee.Component,{model:Ee})}}}const ve=280,Me="40%";class ke extends s.Bs{constructor(Fe){super({topView:Fe.topView??We(),...Fe})}static{this.Component=({model:Fe})=>{const{topView:Ee,selectedTab:se}=Fe.useState(),{stickyMainGraph:ae}=(0,A.KE)(Fe).useState(),fe=(0,o.of)(Se);return n.createElement("div",{className:fe.container},n.createElement("div",{className:ae?fe.sticky:fe.nonSticky},n.createElement(Ee.Component,{model:Ee})),se&&n.createElement(se.Component,{model:se}))}}}function Se(xe){return{container:(0,t.css)({display:"flex",flexDirection:"column",position:"relative"}),sticky:(0,t.css)({display:"flex",flexDirection:"row",background:xe.isLight?xe.colors.background.primary:xe.colors.background.canvas,position:"sticky",top:"70px",zIndex:10}),nonSticky:(0,t.css)({display:"flex",flexDirection:"row"})}}function We(){return new s.G1({direction:"column",$behaviors:[new s.Gg.K2({key:"metricCrosshairSync",sync:ye.y.Crosshair})],children:[new s.vA({minHeight:ve,maxHeight:Me,body:new Be({})}),new s.vA({ySizing:"content",body:new at({})})]})}const De=({trail:xe})=>{const[Fe,Ee]=(0,n.useState)("Copy url"),se=()=>{if(navigator.clipboard){(0,p.z)("selected_metric_action_clicked",{action:"share_url"});const fe=(r.$.appUrl.endsWith("/")?r.$.appUrl.slice(0,-1):r.$.appUrl)+(0,A.xi)(xe);navigator.clipboard.writeText(fe),Ee("Copied!"),setTimeout(()=>{Ee("Copy url")},2e3)}};return n.createElement(i.I,{variant:"canvas",icon:"share-alt",tooltip:Fe,onClick:se})};var pe=e(13054),Ne=e(74764);function Le(xe){const Fe=()=>(0,Ne._)().getBookmarkIndex(xe),Ee=Fe(),[se,ae]=(0,n.useState)(Ee);(0,n.useEffect)(()=>{const Oe=xe.subscribeToEvent(s.bZ,({payload:{prevState:ze,newState:Xe}})=>{(0,pe.h)(ze)&&(0,pe.h)(Xe)&&Xe.steps.length>ze.steps.length&&ae((0,Ne._)().getBookmarkIndex(xe))});return()=>Oe.unsubscribe()},[xe]),Ee!==se&&ae(Ee);const fe=se!=null;return[fe,()=>{if((0,p.z)("bookmark_changed",{action:fe?"toggled_off":"toggled_on"}),fe){let Oe=Fe();for(;Oe!=null;)(0,Ne._)().removeBookmark(Oe),Oe=Fe()}else(0,Ne._)().addBookmark(xe);ae(Fe())}]}class He extends s.Bs{constructor(Fe){const Ee=Fe.autoQuery??(0,b.v)(Fe.metric);super({$variables:Fe.$variables??$e(Fe.metric),body:Fe.body??new ke({}),autoQuery:Ee,queryDef:Fe.queryDef??Ee.main,layout:Fe.layout??"grid",...Fe}),this._urlSync=new s.So(this,{keys:["actionView","layout"]}),this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){this.state.actionView===void 0&&this.setActionView("overview")}getUrlState(){return{actionView:this.state.actionView,layout:this.state.layout}}updateFromUrl(Fe){if(typeof Fe.actionView=="string"){if(this.state.actionView!==Fe.actionView){const Ee=je.find(se=>se.value===Fe.actionView);Ee&&this.setActionView(Ee.value)}}else Fe.actionView===null&&this.setActionView(void 0);if(typeof Fe.layout=="string"){const Ee=Fe.layout;this.state.layout!==Ee&&this.setState({layout:Ee})}}setActionView(Fe){const{body:Ee}=this.state,se=je.find(ae=>ae.value===Fe);se&&se.value!==this.state.actionView?(Ee.state.topView.state.children[0].setState({maxHeight:ve}),Ee.setState({selectedTab:se.getScene()}),this.setState({actionView:se.value})):(Ee.state.topView.state.children[0].setState({maxHeight:Me}),Ee.setState({selectedTab:void 0}),this.setState({actionView:void 0}))}static{this.Component=({model:Fe})=>{const{body:Ee}=Fe.useState();return n.createElement(Ee.Component,{model:Ee})}}}const je=[{displayName:"Overview",value:"overview",getScene:be},{displayName:"Breakdown",value:"breakdown",getScene:j},{displayName:"Related metrics",value:"related",getScene:re,description:"Relevant metrics based on current label filters"}];class at extends s.Bs{constructor(){super(...arguments),this.getLinkToExplore=async()=>{const Fe=s.jh.getAncestor(this,He),Ee=(0,A.kj)(this),se=(0,A.U4)(Ee),ae=Fe.state.queryDef?.queries||[],fe=s.jh.getTimeRange(this);return(0,h.Xe)({queries:ae,dsRef:{uid:se},timeRange:fe.state.value,scopedVars:{__sceneObject:{value:Fe}}})},this.openExploreLink=async()=>{(0,p.z)("selected_metric_action_clicked",{action:"open_in_explore"}),this.getLinkToExplore().then(Fe=>{const Ee=`${r.$.appSubUrl}${Fe}`;window.open(Ee,"_blank")})}}static{this.Component=({model:Fe})=>{const Ee=s.jh.getAncestor(Fe,He),se=(0,o.of)(Ye),ae=(0,A.kj)(Fe),[fe,Ce]=Le(ae),{actionView:Re}=Ee.useState();return n.createElement(m.a,{paddingY:1},n.createElement("div",{className:se.actions},n.createElement(l.B,{gap:1},n.createElement(i.I,{variant:"canvas",tooltip:"Remove existing metric and choose a new metric",onClick:()=>{(0,p.z)("selected_metric_action_clicked",{action:"unselect"}),ae.publishEvent(new x.OO(void 0))}},"Select new metric"),n.createElement(i.I,{variant:"canvas",icon:"compass",tooltip:"Open in explore",onClick:Fe.openExploreLink}),n.createElement(De,{trail:ae}),n.createElement(i.I,{variant:"canvas",icon:fe?n.createElement(c.I,{name:"favorite",type:"mono",size:"lg"}):n.createElement(c.I,{name:"star",type:"default",size:"lg"}),tooltip:"Bookmark",onClick:Ce}),ae.state.embedded&&n.createElement(u.z9,{href:(0,A.xi)(ae),variant:"secondary",onClick:()=>(0,p.z)("selected_metric_action_clicked",{action:"open_from_embedded"})},"Open"))),n.createElement(f.U,null,je.map((Oe,ze)=>{const Xe=n.createElement(d.o,{key:ze,label:Oe.displayName,active:Re===Oe.value,onChangeTab:()=>{(0,p.z)("metric_action_view_changed",{view:Oe.value}),Ee.setActionView(Oe.value)}});return Oe.description?n.createElement(E.m,{key:ze,content:Oe.description,placement:"bottom-start",theme:"info"},Xe):Xe})))}}}function Ye(xe){return{actions:(0,t.css)({[xe.breakpoints.up(xe.breakpoints.values.md)]:{position:"absolute",right:0,top:16,zIndex:2}})}}function $e(xe){return new s.Pj({variables:[...(0,x.ym)(xe),new s.fS({name:x.yr,label:"Group by",datasource:x.GH,includeAll:!0,defaultToAll:!0,query:{query:`label_names(${x.Rp})`,refId:"A"},value:"",text:""})]})}},59055:(Y,I,e)=>{"use strict";e.d(I,{t:()=>F});var t=e(32196),n=e(2543),r=e(96540),s=e(12470),o=e(27857),m=e(79422),l=e(40845),i=e(88575),c=e(10354),u=e(14578),f=e(15292),d=e(42418),E=e(55852),h=e(4200);class y extends o.Bs{constructor(){super(...arguments),this.onClick=()=>{this.publishEvent(new h.OO(this.state.metric),!0)}}static{this.Component=({model:G})=>r.createElement(E.$n,{variant:"secondary",size:"sm",fill:"solid",onClick:G.onClick},G.state.title)}}var a=e(39070),v=e(11261);function g(J){return G=>{const H=o.jh.getData(G);H&&H.subscribeToState(q=>{if(q.data?.state===a.Gu.Loading||q.data?.state===a.Gu.Error)return;const le=o.jh.getAncestor(G,F);if(!q.data?.series.length){le.updateMetricPanel(J,!0,!0);return}let me=!1;for(const k of q.data.series){for(const ee of k.fields)if(ee.type===v.PU.number&&(me=ee.values.some(X=>X!=null&&!isNaN(X)&&X!==0),me))break;if(me)break}le.updateMetricPanel(J,!0,!me)})}}var b=e(51080),P=e(3817);function C(J,G,H,q){const le=(0,P.v)(J),me=le.preview.vizBuilder().setColor({mode:"fixed",fixedColor:(0,b.Vy)(G)}).setDescription(q).setHeaderActions(new y({metric:J,title:"Select"})).build(),k=le.preview.queries.map(ee=>D(ee,H));return new o.xK({$variables:new o.Pj({variables:(0,h.ym)(J)}),$behaviors:[g(J)],$data:new o.dt({datasource:h.GH,maxDataPoints:200,queries:k}),body:me})}function D(J,G){const H=G>0?'${filters},__ignore_usage__=""':'__ignore_usage__=""',q=J.expr?.replace("${filters}",H);return{...J,expr:q}}var T=e(75176),M=e(69096),O=e(88434),S=e(40588),p=e(51088);function x(J,G){return J.sort((H,q)=>{const le=R(H,G),me=R(q,G);return le.halfLeven+le.wholeLeven-(me.halfLeven+me.wholeLeven)})}const A=new Map;function R(J,G){let H=A.get(J);H||(H=new Map,A.set(J,H));let q=H.get(G);if(!q){const le=J.split("_"),me=le.slice(0,le.length/2).join("_"),k=(0,p.A)(me,G)||0,ee=(0,p.A)(J,G)||0;q={halfLeven:k,wholeLeven:ee},H.set(G,q)}return q}const B="175px",U="64px";class F extends o.Bs{constructor(G){super({$variables:G.$variables??K(),body:G.body??new o.gF({children:[],templateColumns:"repeat(auto-fill, minmax(450px, 1fr))",autoRows:B,isLazy:!0}),showPreviews:!0,...G}),this.previewCache={},this.ignoreNextUpdate=!1,this._variableDependency=new o.Sh(this,{variableNames:[h.MN,h.EY],onReferencedVariableValueChanged:H=>{const{name:q}=H.state;q===h.EY?this.state.body.setState({children:[]}):q===h.MN&&(this.onMetricNamesChange(),this.updateMetrics(),this.buildLayout())}}),this.currentMetricNames=new Set,this.updateMetricPanel=(H,q,le)=>{const me=this.previewCache[H];me&&(me.isEmpty=le,me.loaded=q,this.previewCache[H]=me,this.buildLayout())},this.onSearchQueryChange=H=>{this.setState({searchQuery:H.currentTarget.value}),this.searchQueryChangedDebounced()},this.searchQueryChangedDebounced=(0,n.debounce)(()=>{this.updateMetrics(),this.buildLayout()},500),this.onTogglePreviews=()=>{this.setState({showPreviews:!this.state.showPreviews}),this.buildLayout()},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){this.state.body.state.children.length===0?this.buildLayout():this.ignoreNextUpdate=!0;const G=(0,b.kj)(this),H=G.subscribeToEvent(h.OO,q=>{const{steps:le,currentStep:me}=G.state.history.state,k=le[me].parentIndex,X=le[k].trailState.metric!==void 0,j=this.state.searchQuery?.split(V).filter(ne=>ne.length>0);q.payload!==void 0&&(0,S.z)("metric_selected",{from:X?"related_metrics":"metric_list",searchTermCount:j?.length||0})});return()=>{H.unsubscribe()}}sortedPreviewMetrics(){return Object.values(this.previewCache).sort((G,H)=>G.isEmpty&&H.isEmpty?G.index-H.index:G.isEmpty?1:H.isEmpty?-1:G.index-H.index)}onMetricNamesChange(){const G=o.jh.lookupVariable(h.MN,this);if(!(G instanceof o.fS)||G.state.loading)return;const H=G.state.options.map(le=>le.value.toString()),q=new Set(H);Object.values(this.previewCache).forEach(le=>{q.has(le.name)||(le.isEmpty=!0)}),this.currentMetricNames=q,this.buildLayout()}applyMetricSearch(){const G=Array.from(this.currentMetricNames);if(G==null)return;const H=N(this.state.searchQuery);if(!H)this.setState({metricsAfterSearch:G});else{const q=G.filter(le=>!H||H.test(le));this.setState({metricsAfterSearch:q})}}updateMetrics(G=!0){G&&this.applyMetricSearch();const{metricsAfterSearch:H}=this.state,q=H||[],le=(0,b.kj)(this),me=le.state.metric!==void 0?x(q,le.state.metric):q,k={},ee=120;Object.keys(this.previewCache).forEach(X=>{this.currentMetricNames.has(X)||delete this.previewCache[X]});for(let X=0;X<me.length;X++){const j=me[X];if(Object.keys(k).length>ee)break;const te=this.previewCache[j]||{name:j,index:X,loaded:!1};k[j]=te}try{const X=o.jh.getAncestor(this,T.R).state.metric;delete k[X]}catch{}this.previewCache=k}async buildLayout(){if(this.ignoreNextUpdate){this.ignoreNextUpdate=!1;return}const G=o.jh.lookupVariable(h.MN,this);if(!(G instanceof o.fS)||G.state.loading)return;Object.keys(this.previewCache).length||this.updateMetrics();const H=[],q=(0,b.kj)(this),le=this.sortedPreviewMetrics(),k=(0,b.gA)(this)?.length||0;for(let X=0;X<le.length;X++){const j=le[X],ne=await q.getMetricMetadata(j.name),te=(0,O.R)(ne);if(this.state.showPreviews){if(j.itemRef&&j.isPanel){H.push(j.itemRef.resolve());continue}const oe=C(j.name,X,k,te);j.itemRef=oe.getRef(),j.isPanel=!0,H.push(oe)}else{const oe=new o.xK({$variables:new o.Pj({variables:(0,h.ym)(j.name)}),body:w(j.name,te)});j.itemRef=oe.getRef(),j.isPanel=!1,H.push(oe)}}const ee=this.state.showPreviews?B:U;this.state.body.setState({children:H,autoRows:ee})}static{this.Component=({model:G})=>{const{searchQuery:H,showPreviews:q,body:le}=G.useState(),{children:me}=le.useState(),k=(0,l.of)(L),ee=z(h.MN,G),X=me.length===0&&H,j=!ee.isLoading&&G.currentMetricNames.size===0,ne=ee.isLoading&&me.length===0,te=ne?void 0:j&&"There are no results found. Try a different time range or a different data source."||X&&"There are no results found. Try adjusting your search or filters."||void 0,oe=ee.error||ee.isLoading;return r.createElement("div",{className:k.container},r.createElement("div",{className:k.header},r.createElement(i.D,{label:"Search metrics",className:k.searchField},r.createElement(c.p,{placeholder:"Search metrics",prefix:r.createElement(u.I,{name:"search"}),value:H,onChange:G.onSearchQueryChange,disabled:oe})),r.createElement(f.K,{showLabel:!0,label:"Show previews",value:q,onChange:G.onTogglePreviews,disabled:oe})),ee.error&&r.createElement(d.F,{title:"Unable to retrieve metric names",severity:"error"},r.createElement("div",null,"We are unable to connect to your data source. Double check your data source URL and credentials."),r.createElement("div",null,"(",ee.error,")")),r.createElement(M.O,{isLoading:ne,blockingMessage:te},r.createElement(G.state.body.Component,{model:G.state.body})))}}}function K(){return new o.Pj({variables:[new o.fS({name:h.MN,datasource:h.GH,hide:m.zL.hideVariable,includeAll:!0,defaultToAll:!0,skipUrlSync:!0,refresh:s.CO.onTimeRangeChanged,query:{query:`label_values(${h.ui},__name__)`,refId:"A"}})]})}function w(J,G){return o.d0.text().setTitle(J).setDescription(G).setHeaderActions(new y({metric:J,title:"Select"})).setOption("content","").build()}function L(J){return{container:(0,t.css)({display:"flex",flexDirection:"column",flexGrow:1}),headingWrapper:(0,t.css)({marginBottom:J.spacing(.5)}),header:(0,t.css)({flexGrow:0,display:"flex",gap:J.spacing(2),marginBottom:J.spacing(2),alignItems:"flex-end"}),searchField:(0,t.css)({flexGrow:1,marginBottom:0})}}const V=/[^a-z0-9_:]+/;function N(J){if(!J)return null;const G=J?.toLowerCase().split(V).filter(q=>q.length>0).map(q=>`(?=(.*${q}.*))`);if(G.length===0)return null;const H=G.join("");return new RegExp(H,"igy")}function z(J,G){const H=o.jh.lookupVariable(J,G),q=(0,r.useCallback)(()=>{if(H)return H.useState()},[H]),{error:le,loading:me}=q()||{};return{isLoading:!!me,error:le}}},90623:(Y,I,e)=>{"use strict";e.d(I,{p:()=>s});var t=e(96540),n=e(67061),r=e(94753);const s=()=>t.createElement(n.B,{direction:"column",gap:1},t.createElement(r.E,{variant:"h1"},"Metrics"),t.createElement(r.E,{color:"secondary"},"Explore your Prometheus-compatible metrics without writing a query"))},69096:(Y,I,e)=>{"use strict";e.d(I,{O:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(39558);function o({blockingMessage:l,isLoading:i,children:c}){const u=(0,r.of)(m);return i&&!l&&(l="Loading..."),i?n.createElement(s._,{className:u.statusMessage,text:l}):l?n.createElement("div",{className:u.statusMessage},l):c}function m(l){return{statusMessage:(0,t.css)({fontStyle:"italic",marginTop:l.spacing(7),textAlign:"center",width:"100%"})}}},74764:(Y,I,e)=>{"use strict";e.d(I,{_:()=>v});var t=e(2543),n=e(27857),r=e(99140),s=e(16001),o=e(56833),m=e(4200),l=e(96540),i=e(67061),c=e(55852),u=e(3169);function f(){const g=(0,u.tZ)("Bookmark created");return g.component=l.createElement(i.B,{gap:2,direction:"row"},l.createElement("div",null,"You can view bookmarks under ",l.createElement("i",null,"Explore > Metrics")),l.createElement(c.z9,{fill:"solid",variant:"secondary",href:m.QX},"View bookmarks")),g}const d=20;class E{constructor(){this._recent=[],this._bookmarks=[],this._bookmarkIndexMap=new Map,this.load();const b=()=>{const P=this._recent.slice(0,d).map(D=>this._serializeTrail(D.resolve()));localStorage.setItem(m.sQ,JSON.stringify(P));const C=this._bookmarks.map(D=>this._serializeTrail(D.resolve()));localStorage.setItem(m.me,JSON.stringify(C))};this._save=(0,t.debounce)(b,1e3),window.addEventListener("beforeunload",P=>{this._save=b})}_loadFromStorage(b){const P=[],C=localStorage.getItem(b);if(C){const D=JSON.parse(C);for(const T of D){const M=this._deserializeTrail(T);P.push(M.getRef())}}return P}_deserializeTrail(b){const P=new o.b({createdAt:b.createdAt});b.history.map(D=>{this._loadFromUrl(P,D.urlValues);const T=D.parentIndex??P.state.history.state.steps.length-1;P.state.history.setState({currentStep:T}),P.state.history.addTrailStep(P,D.type)});const C=b.currentStep??P.state.history.state.steps.length-1;return P.state.history.setState({currentStep:C}),P.setState(P.state.history.state.steps[C].trailState),P}_serializeTrail(b){return{history:b.state.history.state.steps.map(C=>{const D=new o.b(n.Go.cloneSceneObjectState(C.trailState));return{urlValues:(0,n.Is)().getUrlState(D),type:C.type,description:C.description,parentIndex:C.parentIndex}}),currentStep:b.state.history.state.currentStep,createdAt:b.state.createdAt}}_loadFromUrl(b,P){b.urlSync?.updateFromUrl(P),b.forEachChild(C=>this._loadFromUrl(C,P))}get recent(){return this._recent}load(){this._recent=this._loadFromStorage(m.sQ),this._bookmarks=this._loadFromStorage(m.me),this._refreshBookmarkIndexMap()}setRecentTrail(b){const{steps:P}=b.state.history.state;if(P.length===0||P.length===1&&P[0].type==="start")return;this._recent=this._recent.filter(D=>D!==b.getRef());const C=h(b);this._recent=this._recent.filter(D=>{const T=h(D.resolve());return!(0,t.isEqual)(C,T)}),this._recent.unshift(b.getRef()),this._save()}findMatchingRecentTrail(b){const P=h(b);return this._recent.find(C=>{const D=h(C.resolve());return(0,t.isEqual)(P,D)})}get bookmarks(){return this._bookmarks}addBookmark(b){const P=new o.b(n.Go.cloneSceneObjectState(b.state));this._bookmarks.unshift(P.getRef()),this._refreshBookmarkIndexMap(),this._save(),(0,r.JD)((0,s.dx)(f()))}removeBookmark(b){b<this._bookmarks.length&&(this._bookmarks.splice(b,1),this._refreshBookmarkIndexMap(),this._save())}getBookmarkIndex(b){const P=y(b);return this._bookmarkIndexMap.get(P)}_refreshBookmarkIndexMap(){this._bookmarkIndexMap.clear(),this._bookmarks.forEach((b,P)=>{const C=b.resolve(),D=y(C);this._bookmarkIndexMap.set(D,P)})}}function h(g){const b=(0,n.Is)().getUrlState(g);return delete b.actionView,delete b.layout,b["var-groupby"]===""&&(b["var-groupby"]="$__all"),b}function y(g){return JSON.stringify(h(g))}let a;function v(){return a||(a=new E),a}},88434:(Y,I,e)=>{"use strict";e.d(I,{R:()=>o,q:()=>s});var t=e(19347),n=e(32799),r=e(4200);class s{constructor(l){this._trail=l}reset(){this._datasource=void 0,this._metricsMetadata=void 0}async getDatasource(){return this._datasource||(this._datasource=(0,t.l)().get(r.gR,{__sceneObject:{value:this._trail}})),await this._datasource}async _getMetricsMetadata(){const l=await this.getDatasource();if(l.languageProvider instanceof n.Ay)return l.languageProvider.metricsMetadata||await l.languageProvider.loadMetricsMetadata(),l.languageProvider.metricsMetadata}async getMetricMetadata(l){return l?(this._metricsMetadata||(this._metricsMetadata=this._getMetricsMetadata()),(await this._metricsMetadata)?.[l]):void 0}}function o(m){if(!m)return;const{type:l,help:i,unit:c}=m;return[i,l&&`**Type:** *${l}*`,c&&`**Unit:** ${c}`].join(`

`)}},40588:(Y,I,e)=>{"use strict";e.d(I,{h:()=>s,z:()=>r});var t=e(14110);const n="grafana_explore_metrics_";function r(o,m){(0,t.rR)(`${n}${o}`,m)}function s(o,m){if(o.length===m.length)for(const l of m)for(const i of o)l.key===i.key&&l.value!==i.value&&r("label_filter_changed",{label:l.key,action:"changed",cause:"adhoc_filter"});else if(o.length<m.length)for(const l of m){let i=!1;for(const c of o)if(l.key===c.key){i=!0;break}i||r("label_filter_changed",{label:l.key,action:"removed",cause:"adhoc_filter"})}else for(const l of o){let i=!1;for(const c of m)if(c.key===l.key){i=!0;break}i||r("label_filter_changed",{label:l.key,action:"added",cause:"adhoc_filter"})}}},4200:(Y,I,e)=>{"use strict";e.d(I,{Ao:()=>l,EY:()=>E,GH:()=>b,MN:()=>m,OO:()=>T,QX:()=>o,Rp:()=>u,aZ:()=>d,gR:()=>h,km:()=>s,me:()=>C,sQ:()=>P,td:()=>v,ui:()=>i,ym:()=>D,yr:()=>f});var t=e(65463),n=e(27857),r=e(79422);const s="/explore/metrics/trail",o="/explore/metrics",m="metricNames",l="filters",i="{${filters}}",c="metric",u="${metric}",f="groupby",d="${groupby}",E="ds",h="${ds}",y="logsDs",a="${logsDs}",v="$__logs__",g="sqr-metric-viz-query",b={uid:h},P="grafana.trails.recent",C="grafana.trails.bookmarks";function D(M){return[new n.x0({name:c,value:M,hide:r.zL.hideVariable})]}class T extends t.x{static{this.type="metric-selected-event"}}},51080:(Y,I,e)=>{"use strict";e.d(I,{KE:()=>f,U4:()=>a,Vy:()=>P,aM:()=>y,aO:()=>g,ef:()=>d,gA:()=>D,hR:()=>b,iG:()=>C,kj:()=>u,nH:()=>v,xi:()=>E});var t=e(76885),n=e(19347),r=e(32264),s=e(27857),o=e(31193),m=e(56833),l=e(75176),i=e(74764),c=e(4200);function u(T){return s.jh.getAncestor(T,m.b)}function f(T){return s.jh.getAncestor(T,m.b).state.settings}function d(T){return new m.b({initialDS:T,$timeRange:new s.JZ({from:"now-1h",to:"now"}),embedded:!1})}function E(T){const M=(0,s.Is)().getUrlState(T);return h(M)}function h(T){return t.kM.renderUrl(c.km,T)}function y(T){if(T instanceof l.R)return T;if(T.parent)return y(T.parent);throw console.error("Unable to find graph view for",T),new Error("Unable to find trail")}function a(T){return s.jh.interpolate(T,c.gR)}function v(T){return(0,n.l)().getInstanceSettings(T)?.name||T}function g(T){return T?T===c.td?"Logs":T:"Select metric"}function b(){const T=(0,i._)().recent[0];if(T){const O=s.jh.interpolate(T.resolve(),c.gR);if(typeof O=="string"&&O.length>0)return O}const M=(0,o.tR)().getList({type:"prometheus"});if(M.length>0)return M.find(O=>O.uid===r.$.defaultDatasource)?.uid??M[0].uid}function P(T){const M=r.$.theme2.visualization;return M.getColorByName(M.palette[T%8])}function C(T){const M=Object.keys(T);return M.includes("from")&&M.includes("to")}function D(T){const M=s.jh.lookupVariable("filters",T);return M instanceof s.H9?M.state.filters:null}},27825:(Y,I,e)=>{"use strict";e.d(I,{J:()=>y});var t=e(52622),n=e(38248),r=e(96540),s=e(91890),o=e(72574),m=e(32264),l=e(66864),i=e(94354),c=e(10354),u=e(88841),f=e(94397);const d=[{label:"Size",value:t.J1.Size,description:"Split the buckets based on size"},{label:"Count",value:t.J1.Count,description:"Split the buckets based on count"}],E=[{label:"Split",value:t.J1.Size,description:"Split the buckets based on size"}],h=({value:a,onChange:v,item:g})=>{const[b,P]=(0,r.useState)(!1),C=M=>{P(!(0,f.N_)(M)),v({...a,value:M})},T=(0,o.w)().getVariables().map(M=>({value:M.name,label:M.label||M.name,origin:s.$0.Template}));return r.createElement(l.Gy,null,r.createElement(i.z,{value:a?.mode||t.J1.Size,options:a?.scale?.type===t.L4.Log?E:d,onChange:M=>{v({...a,mode:M})}}),m.$.featureToggles.transformationsVariableSupport?r.createElement(u.y,{invalid:b,error:"Value needs to be an integer or a variable",value:a?.value??"",placeholder:"Auto",onChange:C,suggestions:T}):r.createElement(c.p,{value:a?.value??"",placeholder:"Auto",onChange:M=>{v({...a,value:M.currentTarget.value})}}))};function y(a,v,g,b){v.addCustomEditor({id:"xBuckets",path:`${a}xBuckets`,name:"X Bucket",editor:h,category:b,defaultValue:{mode:t.J1.Size}}),v.addCustomEditor({id:"yBuckets",path:`${a}yBuckets`,name:"Y Bucket",editor:h,category:b,defaultValue:{mode:t.J1.Size}}),v.addCustomEditor({id:"yBuckets-scale",path:`${a}yBuckets.scale`,name:"Y Bucket scale",category:b,editor:n.W,defaultValue:{type:t.L4.Linear}})}},3290:(Y,I,e)=>{"use strict";e.d(I,{VQ:()=>N,wY:()=>B,Nb:()=>w,eE:()=>K,yJ:()=>L});var t=e(81160),n=e(18282),r=e(81010),s=e(11261),o=e(28240),m=e(83195),l=e(41260),i=e(70416),c=e(77678),u=e(73060),f=e(32264),d=e(52622),E=e(97706);const{abs:h,pow:y}=Math,a=new Map;function v(H,q,le,me){let k=[],ee=me.map(E.E);for(let X=q;X<le;X++){let j=h(X),ne=(0,E.h)(y(H,X),j);for(let te=0;te<me.length;te++){let oe=me[te]*ne,ie=(oe>=0&&X>=0?0:j)+(X>=ee[te]?0:ee[te]),ue=(0,E.h)(oe,ie);k.push(ue),a.set(ue,ie)}}return k}const g=H=>H%1===0,b=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],P=v(10,-16,0,b),C=v(10,0,16,b),D=C.filter(g),T=P.concat(C),M=P.concat(D),O=1*1e3,S=60*O,p=60*S,x=24*p,A=365*x,R=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,O,2*O,4*O,5*O,10*O,15*O,20*O,30*O,S,2*S,4*S,5*S,10*S,15*S,20*S,30*S,p,2*p,4*p,6*p,8*p,12*p,18*p,x,2*x,3*x,4*x,5*x,6*x,7*x,10*x,15*x,30*x,45*x,60*x,90*x,180*x,A,2*A,3*A,4*A,5*A,6*A,7*A,8*A,9*A,10*A],B={id:n.F.heatmap,name:"Create heatmap",description:"Generate heatmap data from source data.",defaultOptions:{},isApplicable:H=>{const{xField:q,yField:le,xs:me,ys:k}=z(H);return q||le||!me.length||!k.length?r.M.NotPossible:r.M.Applicable},isApplicableDescription:"The Heatmap transformation requires fields with Heatmap compatible data. No fields with Heatmap data could be found.",operator:(H,q)=>le=>le.pipe((0,t.T)(me=>{if(f.$.featureToggles.transformationsVariableSupport){const k={...H,xBuckets:{...H.xBuckets},yBuckets:{...H.yBuckets}};return k.xBuckets?.value&&(k.xBuckets.value=q.interpolate(k.xBuckets.value)),k.yBuckets?.value&&(k.yBuckets.value=q.interpolate(k.yBuckets.value)),B.transformer(k,q)(me)}else return B.transformer(H,q)(me)})),transformer:H=>q=>{const le=N(q,H);return H.keepOriginalData?[le,...q]:[le]}};function U(H){return H==="+Inf"?1/0:H==="-Inf"?-1/0:+(H??0)}function F(H,q){return U(H)-U(q)}function K(H){return H?.meta?.custom??{}}function w(H){let q=!1;for(let le of H.fields)switch(le.name){case"y":case"yMin":case"yMax":if(q)return!1;q=!0}return q}function L(H){const q=H.frame.fields[0],le=q.values,me=H.frame.fields.filter((be,ge)=>be.type===s.PU.number&&ge>0),k=le.length*me.length,ee=new Array(k),X=new Array(k),j=new Array(k),ne=me.map(be=>be.values.slice());ne.forEach((be,ge)=>{for(let re=0;re<be.length;re++)j[ne.length*re+ge]=be[re]});const te=Array.from({length:me.length},(be,ge)=>ge);for(let be=0,ge=0,re=0;be<k;ge=++be%te.length)X[be]=te[ge],ge===0&&be>=te.length&&re++,ee[be]=le[re];let oe=me[0].labels?.le!=null?"yMax":"y";switch(H.layout){case d.D7.le:oe="yMax";break;case d.D7.ge:oe="yMin";break;case d.D7.unknown:oe="y";break}const ie={yOrdinalDisplay:me.map(be=>(0,o.Ct)(be,H.frame)),yMatchWithLabel:Object.keys(me[0].labels??{})[0]};if(ie.yMatchWithLabel&&(ie.yOrdinalLabel=me.map(be=>be.labels?.[ie.yMatchWithLabel]??""),ie.yMatchWithLabel==="le"&&(ie.yMinDisplay="0.0")),H.unit?.length||H.decimals!=null){const be=(0,m.j_)(H.unit??"short");ie.yMinDisplay&&(ie.yMinDisplay=(0,m.cN)(be(0,H.decimals))),ie.yOrdinalDisplay=ie.yOrdinalDisplay.map(ge=>{let re=+ge;return Number.isNaN(re)?ge:(0,m.cN)(be(re,H.decimals))})}const ue={...me[0].config};return ue.displayNameFromDS&&delete ue.displayNameFromDS,{length:ee.length,refId:H.frame.refId,meta:{type:l.m.HeatmapCells,custom:ie},fields:[{name:q.type===s.PU.time?"xMax":"x",type:q.type,values:ee,config:q.config},{name:oe,type:s.PU.number,values:X,config:{unit:"short"}},{name:H.value?.length?H.value:"Value",type:s.PU.number,values:j,config:ue,display:me[0].display}]}}function V(H){H=H.slice(),H.sort((le,me)=>F(le.name,me.name));const q=H.map(le=>le.fields[1].values.slice());return q.reverse(),q.forEach((le,me)=>{if(me<q.length-1)for(let k=0;k<le.length;k++)le[k]-=q[me+1][k]}),q.reverse(),H.map((le,me)=>({...le,fields:[le.fields[0],{...le.fields[1],values:q[me]}]}))}function N(H,q){const{xField:le,yField:me,xs:k,ys:ee}=z(H);if(!le||!me)throw"no heatmap fields found";if(!k.length||!ee.length)throw"no values found";const X=q.xBuckets??{},j=q.yBuckets??{};if(X.scale?.type===d.L4.Log)throw"X axis only supports linear buckets";const ne=q.yBuckets?.scale??{type:d.L4.Linear},te=J(k,ee,{xSorted:(0,u.g2)(k),xTime:le.type===s.PU.time,xMode:X.mode,xSize:X.mode===d.J1.Size?(0,i.WT)((0,i.E9)(X.value??"")):X.value?+X.value:void 0,yMode:j.mode,ySize:j.value?+j.value:void 0,yLog:ne?.type===d.L4.Log?ne?.log:void 0});return{length:te.x.length,name:(0,o.Ct)(me),meta:{type:l.m.HeatmapCells},fields:[{name:"xMin",type:le.type,values:te.x,config:le.config},{name:"yMin",type:s.PU.number,values:te.y,config:{...me.config,custom:{scaleDistribution:ne}}},{name:"Count",type:s.PU.number,values:te.count,config:{unit:"short"}}]}}function z(H){let q,le,me=0;for(let j of H)j.fields.find(te=>te.type===s.PU.time)&&(me+=j.length);let k=Array(me),ee=Array(me),X=0;for(let j of H){const ne=j.fields.find(oe=>oe.type===s.PU.time);if(!ne)continue;q||(q=ne);const te=ne.values;for(let oe of j.fields)if(oe!==ne&&oe.type===s.PU.number){const ie=oe.values;for(let ue=0;ue<te.length;ue++,X++)k[X]=te[ue],ee[X]=ie[ue];le||(le=oe)}}return{xField:q,yField:le,xs:k,ys:ee}}function J(H,q,le){let me=H.length,k=le?.xSorted??!1,ee=le?.ySorted??!1,X=k?H[0]:1/0,j=ee?q[0]:1/0,ne=k?H[me-1]:-1/0,te=ee?q[me-1]:-1/0,oe=le?.yLog;for(let Le=0;Le<me;Le++)k||(X=Math.min(X,H[Le]),ne=Math.max(ne,H[Le])),ee||(!oe||q[Le]>0)&&(j=Math.min(j,q[Le]),te=Math.max(te,q[Le]));let ie=le?.xSize??0,ue=le?.ySize??0,be=le?.xMode,ge=le?.yMode;if((!Number.isFinite(ie)||ie<=0)&&(be=d.J1.Count,ie=20),(!Number.isFinite(ue)||ue<=0)&&(ge=d.J1.Count,ue=10),be===d.J1.Count){let Le=(ne-X)/Math.max(ie-1,1),He=le?.xTime?R:M,je=He.findIndex(at=>at>Le)-1;ie=He[Math.max(je,0)]}if(ge===d.J1.Count){let Le=(te-j)/Math.max(ue-1,1),He=le?.yTime?R:M,je=He.findIndex(at=>at>Le)-1;ue=He[Math.max(je,0)]}let re=le?.xCeil?Le=>(0,c.Uh)(Le,ie):Le=>(0,c.rs)(Le,ie),ye=le?.yCeil?Le=>(0,c.Uh)(Le,ue):Le=>(0,c.rs)(Le,ue);if(oe){ue=1/(le?.ySize??1);let Le=oe===2?Math.log2:Math.log10;ye=le?.yCeil?He=>(0,c.Uh)(Le(He),ue):He=>(0,c.rs)(Le(He),ue)}let Be=re(X),ve=re(ne),Me=ye(j),ke=ye(te),Se=Math.round((ve-Be)/ie)+1,We=Math.round((ke-Me)/ue)+1,[De,pe,Ne]=G(Se,We,Be,ie,Me,ue,oe);for(let Le=0;Le<me;Le++){if(oe&&q[Le]<=0)continue;const He=(re(H[Le])-Be)/ie,je=(ye(q[Le])-Me)/ue,at=He*We+je;Ne[at]++}return{x:De,y:pe,count:Ne}}function G(H,q,le,me,k,ee,X){const j=H*q,ne=new Array(j),te=new Array(j),oe=new Array(j);for(let ie=0,ue=0,be=le;ie<j;ue=++ie%q)oe[ie]=0,X?te[ie]=X**(k+ue*ee):te[ie]=k+ue*ee,ue===0&&ie>=q&&(be+=me),ne[ie]=be;return[ne,te,oe]}},91847:(Y,I,e)=>{"use strict";e.d(I,{$n:()=>r,g_:()=>t,uk:()=>n});var t=(o=>(o.ShortcodeFigure="shortcodeFigure",o.UIImage="uiImage",o))(t||{});const n={calculateField:{name:"Add field from calculation",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to add a new field calculated from two other fields. Each transformation allows you to add one new field.

- **Mode** - Select a mode:
  - **Reduce row** - Apply selected calculation on each row of selected fields independently.
  - **Binary operation** - Apply basic binary operations (for example, sum or multiply) on values in a single row from two selected fields.
  - **Unary operation** - Apply basic unary operations on values in a single row from a selected field. The available operations are:
    - **Absolute value (abs)** - Returns the absolute value of a given expression. It represents its distance from zero as a positive number.
    - **Natural exponential (exp)** - Returns _e_ raised to the power of a given expression.
    - **Natural logarithm (ln)** - Returns the natural logarithm of a given expression.
    - **Floor (floor)** - Returns the largest integer less than or equal to a given expression.
    - **Ceiling (ceil)** - Returns the smallest integer greater than or equal to a given expression.
  - **Cumulative functions** - Apply functions on the current row and all preceding rows.
    - **Total** - Calculates the cumulative total up to and including the current row.
    - **Mean** - Calculates the mean up to and including the current row.
  - **Window functions** - Apply window functions. The window can either be **trailing** or **centered**.
    With a trailing window the current row will be the last row in the window.
    With a centered window the window will be centered on the current row.
    For even window sizes, the window will be centered between the current row, and the previous row.
    - **Mean** - Calculates the moving mean or running average.
    - **Stddev** - Calculates the moving standard deviation.
    - **Variance** - Calculates the moving variance.
  - **Row index** - Insert a field with the row index.
- **Field name** - Select the names of fields you want to use in the calculation for the new field.
- **Calculation** - If you select **Reduce row** mode, then the **Calculation** field appears. Click in the field to see a list of calculation choices you can use to create the new field. For information about available calculations, refer to [Calculation types][].
- **Operation** - If you select **Binary operation** or **Unary operation** mode, then the **Operation** fields appear. These fields allow you to apply basic math operations on values in a single row from selected fields. You can also use numerical values for binary operations.
- **As percentile** - If you select **Row index** mode, then the **As percentile** switch appears. This switch allows you to transform the row index as a percentage of the total number of rows.
- **Alias** - (Optional) Enter the name of your new field. If you leave this blank, then the field will be named to match the calculation.
- **Replace all fields** - (Optional) Select this option if you want to hide all other fields and display only your calculated field in the visualization.

> **Note:** **Cumulative functions** and **Window functions** modes are currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`addFieldFromCalculationStatFunctions\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.

In the example below, we added two fields together and named them Sum.

${s("/static/img/docs/transformations/add-field-from-calc-stat-example-7-0.png",o,"A stat visualization including one field called Sum")}
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},concatenate:{name:"Concatenate fields",getHelperDocs:function(){return`
Use this transformation to combine all fields from all frames into one result.

For example, if you have separate queries retrieving temperature and uptime data (Query A) and air quality index and error information (Query B), applying the concatenate transformation yields a consolidated data frame with all relevant information in one view.

Consider the following:

**Query A:**

| Temp  | Uptime  |
| ----- | ------- |
| 15.4  | 1230233 |

**Query B:**

| AQI   | Errors |
| ----- | ------ |
| 3.2   | 5      |

After you concatenate the fields, the data frame would be:

| Temp | Uptime  | AQI | Errors |
| ---- | ------- | --- | ------ |
| 15.4 | 1230233 | 3.2 | 5      |

This transformation simplifies the process of merging data from different sources, providing a comprehensive view for analysis and visualization.
  `}},configFromData:{name:"Config from query results",getHelperDocs:function(){return`
Use this transformation to select a query and extract standard options, such as **Min**, **Max**, **Unit**, and **Thresholds**, and apply them to other query results. This feature enables dynamic visualization configuration based on the data returned by a specific query.

#### Options

- **Config query** - Select the query that returns the data you want to use as configuration.
- **Apply to** - Select the fields or series to which the configuration should be applied.
- **Apply to options** - Specify a field type or use a field name regex, depending on your selection in **Apply to**.

#### Field mapping table

Below the configuration options, you'll find the field mapping table. This table lists all fields found in the data returned by the config query, along with **Use as** and **Select** options. It provides control over mapping fields to config properties, and for multiple rows, it allows you to choose which value to select.

#### Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now has a maximum configuration option set. Options such as **Min**, **Max**, **Unit**, and **Thresholds** are part of the field configuration. If set, they are used by the visualization instead of any options manually configured in the panel editor options pane.

#### Value mappings

You can also transform a query result into value mappings. With this option, every row in the configuration query result defines a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Color | All values |

Grafana builds value mappings from your query result and applies them to the real data query results. You should see values being mapped and colored according to the config query results.
  `}},convertFieldType:{name:"Convert field type",getHelperDocs:function(){return`
Use this transformation to modify the field type of a specified field.

This transformation has the following options:

- **Field** - Select from available fields
- **as** - Select the FieldType to convert to
  - **Numeric** - attempts to make the values numbers
  - **String** - will make the values strings
  - **Time** - attempts to parse the values as time
    - The input will be parsed according to the [Moment.js parsing format](https://momentjs.com/docs/#/parsing/)
    - It will parse the numeric input as a Unix epoch timestamp in milliseconds.
      You must multiply your input by 1000 if it's in seconds.
    - Will show an option to specify a DateFormat as input by a string like yyyy-mm-dd or DD MM YYYY hh:mm:ss
  - **Boolean** - will make the values booleans
  - **Enum** - will make the values enums
    - Will show a table to manage the enums
  - **Other** - attempts to parse the values as JSON

For example, consider the following query that could be modified by selecting the time field as Time and specifying Date Format as YYYY.

#### Sample Query

| Time       | Mark  | Value |
|------------|-------|-------|
| 2017-07-01 | above | 25    |
| 2018-08-02 | below | 22    |
| 2019-09-02 | below | 29    |
| 2020-10-04 | above | 22    |

The result:

#### Transformed Query

| Time                | Mark  | Value |
|---------------------|-------|-------|
| 2017-01-01 00:00:00 | above | 25    |
| 2018-01-01 00:00:00 | below | 22    |
| 2019-01-01 00:00:00 | below | 29    |
| 2020-01-01 00:00:00 | above | 22    |

This transformation allows you to flexibly adapt your data types, ensuring compatibility and consistency in your visualizations.
  `}},extractFields:{name:"Extract fields",getHelperDocs:function(){return`
Use this transformation to select a source of data and extract content from it in different formats. This transformation has the following fields:

- **Source** - Select the field for the source of data.
- **Format** - Choose one of the following:
  - **JSON** - Parse JSON content from the source.
  - **Key+value pairs** - Parse content in the format 'a=b' or 'c:d' from the source.
  - **Auto** - Discover fields automatically.
- **Replace All Fields** - (Optional) Select this option to hide all other fields and display only your calculated field in the visualization.
- **Keep Time** - (Optional) Available only if **Replace All Fields** is true. Keeps the time field in the output.

Consider the following dataset:

#### Dataset Example

| Timestamp           | json_data     |
|---------------------|---------------|
| 1636678740000000000 | {"value": 1}  |
| 1636678680000000000 | {"value": 5}  |
| 1636678620000000000 | {"value": 12} |

You could prepare the data to be used by a [Time series panel][] with this configuration:

- Source: json_data
- Format: JSON
  - Field: value
  - Alias: my_value
- Replace all fields: true
- Keep time: true

This will generate the following output:

#### Transformed Data

| Timestamp           | my_value |
|---------------------|----------|
| 1636678740000000000 | 1        |
| 1636678680000000000 | 5        |
| 1636678620000000000 | 12       |

This transformation allows you to extract and format data in various ways. You can customize the extraction format based on your specific data needs.
  `},links:[{title:"Time series panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/time-series/"}]},fieldLookup:{name:"Lookup fields from resource",getHelperDocs:function(){return`
Use this transformation to enrich a field value by looking up additional fields from an external source. 
  
This transformation has the following fields:

- **Field** - Select a text field from your dataset.
- **Lookup** - Choose from **Countries**, **USA States**, and **Airports**.

This transformation currently supports spatial data.

For example, if you have this data:

#### Dataset Example

| Location  | Values |
|-----------|--------|
| AL        | 0      |
| AK        | 10     |
| Arizona   | 5      |
| Arkansas  | 1      |
| Somewhere | 5      |

With this configuration:

- Field: location
- Lookup: USA States

You'll get the following output:

#### Transformed Data

| Location  | ID | Name     | Lng         | Lat       | Values |
|-----------|----|----------|-------------|-----------|--------|
| AL        | AL | Alabama  | -80.891064  | 12.448457 | 0      |
| AK        | AK | Arkansas | -100.891064 | 24.448457 | 10     |
| Arizona   |    |          |             |           | 5      |
| Arkansas  |    |          |             |           | 1      |
| Somewhere |    |          |             |           | 5      |

This transformation lets you augment your data by fetching additional information from external sources, providing a more comprehensive dataset for analysis and visualization.
  `}},filterByRefId:{name:"Filter data by query refId",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to hide one or more queries in panels that have multiple queries.

Grafana displays the query identification letters in dark gray text. Click a query identifier to toggle filtering. If the query letter is white, then the results are displayed. If the query letter is dark, then the results are hidden.

> **Note:** This transformation is not available for Graphite because this data source does not support correlating returned data with queries.

In the example below, the panel has three queries (A, B, C). We removed the B query from the visualization.

${s("/static/img/docs/transformations/filter-by-query-stat-example-7-0.png",o,"A stat visualization with results from two queries, A and C")}
  `}},filterByValue:{name:"Filter data by values",getHelperDocs:function(){return`
Use this transformation to selectively filter data points directly within your visualization. This transformation provides options to include or exclude data based on one or more conditions applied to a selected field.

This transformation is very useful if your data source does not natively filter by values. You might also use this to narrow values to display if you are using a shared query.

The available conditions for all fields are:

- **Regex** - Match a regex expression.
- **Is Null** - Match if the value is null.
- **Is Not Null** - Match if the value is not null.
- **Equal** - Match if the value is equal to the specified value.
- **Different** - Match if the value is different than the specified value.

The available conditions for string fields are:

- **Contains substring** - Match if the value contains the specified substring (case insensitive).
- **Does not contain substring** - Match if the value doesn't contain the specified substring (case insensitive).

The available conditions for number fields are:

- **Greater** - Match if the value is greater than the specified value.
- **Lower** - Match if the value is lower than the specified value.
- **Greater or equal** - Match if the value is greater or equal.
- **Lower or equal** - Match if the value is lower or equal.
- **Range** - Match a range between a specified minimum and maximum, min and max included.

Consider the following dataset:

#### Dataset Example

| Time                | Temperature | Altitude |
|---------------------|-------------|----------|
| 2020-07-07 11:34:23 | 32          | 101      |
| 2020-07-07 11:34:22 | 28          | 125      |
| 2020-07-07 11:34:21 | 26          | 110      |
| 2020-07-07 11:34:20 | 23          | 98       |
| 2020-07-07 10:32:24 | 31          | 95       |
| 2020-07-07 10:31:22 | 20          | 85       |
| 2020-07-07 09:30:57 | 19          | 101      |

If you **Include** the data points that have a temperature below 30\xB0C, the configuration will look as follows:

- Filter Type: 'Include'
- Condition: Rows where 'Temperature' matches 'Lower Than' '30'

And you will get the following result, where only the temperatures below 30\xB0C are included:

#### Transformed Data

| Time                | Temperature | Altitude |
|---------------------|-------------|----------|
| 2020-07-07 11:34:22 | 28          | 125      |
| 2020-07-07 11:34:21 | 26          | 110      |
| 2020-07-07 11:34:20 | 23          | 98       |
| 2020-07-07 10:31:22 | 20          | 85       |
| 2020-07-07 09:30:57 | 19          | 101      |

You can add more than one condition to the filter. For example, you might want to include the data only if the altitude is greater than 100. To do so, add that condition to the following configuration:

- Filter type: 'Include' rows that 'Match All' conditions
- Condition 1: Rows where 'Temperature' matches 'Lower' than '30'
- Condition 2: Rows where 'Altitude' matches 'Greater' than '100'

When you have more than one condition, you can choose if you want the action (include/exclude) to be applied on rows that **Match all** conditions or **Match any** of the conditions you added.

In the example above, we chose **Match all** because we wanted to include the rows that have a temperature lower than 30\xB0C *AND* an altitude higher than 100. If we wanted to include the rows that have a temperature lower than 30\xB0C *OR* an altitude higher than 100 instead, then we would select **Match any**. This would include the first row in the original data, which has a temperature of 32\xB0C (does not match the first condition) but an altitude of 101 (which matches the second condition), so it is included.

Conditions that are invalid or incompletely configured are ignored.

This versatile data filtering transformation lets you to selectively include or exclude data points based on specific conditions. Customize the criteria to tailor your data presentation to meet your unique analytical needs.
  `}},filterFieldsByName:{name:"Filter fields by name",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to selectively remove parts of your query results. There are three ways to filter field names:

- [Using a regular expression](#use-a-regular-expression)
- [Manually selecting included fields](#manually-select-included-fields)
- [Using a dashboard variable](#use-a-dashboard-variable)

#### Use a regular expression

When you filter using a regular expression, field names that match the regular expression are included. 

For example, from the input data:

| Time                | dev-eu-west | dev-eu-north | prod-eu-west | prod-eu-north |
| ------------------- | ----------- | ------------ | ------------ | ------------- |
| 2023-03-04 23:56:23 | 23.5        | 24.5         | 22.2         | 20.2          |
| 2023-03-04 23:56:23 | 23.6        | 24.4         | 22.1         | 20.1          |

The result from using the regular expression 'prod.*' would be:

| Time                | prod-eu-west | prod-eu-north |
| ------------------- | ------------ | ------------- |
| 2023-03-04 23:56:23 | 22.2         | 20.2          |
| 2023-03-04 23:56:23 | 22.1         | 20.1          |

The regular expression can include an interpolated dashboard variable by using the \${variableName} syntax.

#### Manually select included fields

Click and uncheck the field names to remove them from the result. Fields that are matched by the regular expression are still included, even if they're unchecked.

#### Use a dashboard variable

Enable 'From variable' to let you select a dashboard variable that's used to include fields. By setting up a [dashboard variable][] with multiple choices, the same fields can be displayed across multiple visualizations.

${s("/static/img/docs/transformations/filter-name-table-before-7-0.png",o,"A table visualization with time, value, Min, and Max columns")}

Here's the table after we applied the transformation to remove the Min field.

${s("/static/img/docs/transformations/filter-name-table-after-7-0.png",o,"A table visualization with time, value, and Max columns")}

Here is the same query using a Stat visualization.

${s("/static/img/docs/transformations/filter-name-stat-after-7-0.png",o,"A stat visualization with value and Max fields")}

This transformation provides flexibility in tailoring your query results to focus on the specific fields you need for effective analysis and visualization.
  `}},formatString:{name:"Format string",getHelperDocs:function(){return`
Use this transformation to customize the output of a string field. This transformation has the following fields:

- **Upper case** - Formats the entire string in uppercase characters.
- **Lower case** - Formats the entire string in lowercase characters.
- **Sentence case** - Formats the first character of the string in uppercase.
- **Title case** - Formats the first character of each word in the string in uppercase.
- **Pascal case** - Formats the first character of each word in the string in uppercase and doesn't include spaces between words.
- **Camel case** - Formats the first character of each word in the string in uppercase, except the first word, and doesn't include spaces between words.
- **Snake case** - Formats all characters in the string in lowercase and uses underscores instead of spaces between words.
- **Kebab case** - Formats all characters in the string in lowercase and uses dashes instead of spaces between words.
- **Trim** - Removes all leading and trailing spaces from the string.
- **Substring** - Returns a substring of the string, using the specified start and end positions.

This transformation provides a convenient way to standardize and tailor the presentation of string data for better visualization and analysis.

> **Note:** This transformation is currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`formatString\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.`}},formatTime:{name:"Format time",getHelperDocs:function(){return`
Use this transformation to customize the output of a time field. Output can be formatted using [Moment.js format strings](https://momentjs.com/docs/#/displaying/). For example, if you want to display only the year of a time field, the format string 'YYYY' can be used to show the calendar year (for example, 1999 or 2012).

**Before Transformation:**

| Timestamp           | Event        |
| ------------------- | ------------ |
| 1636678740000000000 | System Start |
| 1636678680000000000 | User Login   |
| 1636678620000000000 | Data Updated |

**After applying 'YYYY-MM-DD HH:mm:ss':**

| Timestamp           | Event        |
| ------------------- | ------------ |
| 2021-11-12 14:25:40 | System Start |
| 2021-11-12 14:24:40 | User Login   |
| 2021-11-12 14:23:40 | Data Updated |

This transformation lets you tailor the time representation in your visualizations, providing flexibility and precision in displaying temporal data.

> **Note:** This transformation is available in Grafana 10.1+ as an alpha feature.
  `}},groupBy:{name:"Group by",getHelperDocs:function(){return`
Use this transformation to group the data by a specified field (column) value and process calculations on each group. Click to see a list of calculation choices. For information about available calculations, refer to [Calculation types][].

Here's an example of original data.

| Time                | Server ID | CPU Temperature | Server Status |
| ------------------- | --------- | --------------- | ------------- |
| 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
| 2020-07-07 11:34:20 | server 3  | 62              | OK            |
| 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
| 2020-07-07 10:31:22 | server 3  | 55              | OK            |
| 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
| 2020-07-07 09:30:05 | server 2  | 88              | OK            |
| 2020-07-07 09:28:06 | server 1  | 80              | OK            |
| 2020-07-07 09:25:05 | server 2  | 88              | OK            |
| 2020-07-07 09:23:07 | server 1  | 86              | OK            |

This transformation goes in two steps. First you specify one or multiple fields to group the data by. This will group all the same values of those fields together, as if you sorted them. For instance if we group by the Server ID field, then it would group the data this way:

| Time                | Server ID      | CPU Temperature | Server Status |
| ------------------- | -------------- | --------------- | ------------- |
| 2020-07-07 11:34:20 | **server 1**   | 80              | Shutdown      |
| 2020-07-07 09:28:06 | **server 1**   | 80              | OK            |
| 2020-07-07 09:23:07 | **server 1**   | 86              | OK            |
| 2020-07-07 10:32:20 | server 2       | 90              | Overload      |
| 2020-07-07 09:30:05 | server 2       | 88              | OK            |
| 2020-07-07 09:25:05 | server 2       | 88              | OK            |
| 2020-07-07 11:34:20 | **_server 3_** | 62              | OK            |
| 2020-07-07 10:31:22 | **_server 3_** | 55              | OK            |
| 2020-07-07 09:30:57 | **_server 3_** | 62              | Rebooting     |

All rows with the same value of Server ID are grouped together.

After choosing which field you want to group your data by, you can add various calculations on the other fields, and apply the calculation to each group of rows. For instance, we could want to calculate the average CPU temperature for each of those servers. So we can add the _mean_ calculation applied on the CPU Temperature field to get the following:

| Server ID | CPU Temperature (mean) |
| --------- | ---------------------- |
| server 1  | 82                     |
| server 2  | 88.6                   |
| server 3  | 59.6                   |

And we can add more than one calculation. For instance:

- For field Time, we can calculate the _Last_ value, to know when the last data point was received for each server
- For field Server Status, we can calculate the _Last_ value to know what is the last state value for each server
- For field Temperature, we can also calculate the _Last_ value to know what is the latest monitored temperature for each server

We would then get:

| Server ID | CPU Temperature (mean) | CPU Temperature (last) | Time (last)         | Server Status (last) |
| --------- | ---------------------- | ---------------------- | ------------------- | -------------------- |
| server 1  | 82                     | 80                     | 2020-07-07 11:34:20 | Shutdown             |
| server 2  | 88.6                   | 90                     | 2020-07-07 10:32:20 | Overload             |
| server 3  | 59.6                   | 62                     | 2020-07-07 11:34:20 | OK                   |

This transformation allows you to extract essential information from your time series and present it conveniently.
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},groupingToMatrix:{name:"Grouping to matrix",getHelperDocs:function(){return`
Use this transformation to combine three fields\u2014which are used as input for the **Column**, **Row**, and **Cell value** fields from the query output\u2014and generate a matrix. The matrix is calculated as follows:

**Original data**

| Server ID | CPU Temperature | Server Status |
| --------- | --------------- | ------------- |
| server 1  | 82              | OK            |
| server 2  | 88.6            | OK            |
| server 3  | 59.6            | Shutdown      |

We can generate a matrix using the values of 'Server Status' as column names, the 'Server ID' values as row names, and the 'CPU Temperature' as content of each cell. The content of each cell will appear for the existing column ('Server Status') and row combination ('Server ID'). For the rest of the cells, you can select which value to display between: **Null**, **True**, **False**, or **Empty**.

**Output**

| Server IDServer Status | OK   | Shutdown |
| ----------------------- | ---- | -------- |
| server 1                | 82   |          |
| server 2                | 88.6 |          |
| server 3                |      | 59.6     |

Use this transformation to construct a matrix by specifying fields from your query results. The matrix output reflects the relationships between the unique values in these fields. This helps you present complex relationships in a clear and structured matrix format.
  `}},groupToNestedTable:{name:"Group to nested table",getHelperDocs:function(o="shortcodeFigure"){return`
  Use this transformation to group the data by a specified field (column) value and process calculations on each group. Records are generated that share the same grouped field value, to be displayed in a nested table.
    
  To calculate a statistic for a field, click the selection box next to it and select the **Calculate** option:

  ${s("/static/img/docs/transformations/nested-table-select-calculation.png",o,"A select box showing the Group and Calculate options for the transformation.")}

  Once **Calculate** has been selected, another selection box will appear next to the respective field which will allow statistics to be selected:

  ${s("/static/img/docs/transformations/nested-table-select-stat.png",o,"A select box showing available statistic calculations once the calculate option for the field has been selected.")}

  For information about available calculations, refer to [Calculation types][].

  Here's an example of original data:

  | Time                | Server ID | CPU Temperature | Server Status |
  | ------------------- | --------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
  | 2020-07-07 11:34:20 | server 3  | 62              | OK            |
  | 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
  | 2020-07-07 10:31:22 | server 3  | 55              | OK            |
  | 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
  | 2020-07-07 09:30:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:28:06 | server 1  | 80              | OK            |
  | 2020-07-07 09:25:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:23:07 | server 1  | 86              | OK            |

  This transformation has two steps. First, specify one or more fields by which to group the data. This groups all the same values of those fields together, as if you sorted them. For instance, if you group by the Server ID field, Grafana groups the data this way:

  | Server ID      |  |
  | -------------- | ------------- |
  | server 1 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>80</td><td>Shutdown</td></tr><tr><td>2020-07-07 09:28:06</td><td>80</td><td>OK</td></tr><tr><td>2020-07-07 09:23:07</td><td>86</td><td>OK</td></tr></tbody></table> |
  | server 2 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 10:32:20</td><td>90</td><td>Overload</td></tr><tr><td>2020-07-07 09:30:05</td><td>88</td><td>OK</td></tr><tr><td>2020-07-07 09:25:05</td><td>88</td><td>OK</td></tr></tbody></table> |
  | server 3 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>62</td><td>OK</td></tr><tr><td>2020-07-07 10:31:22</td><td>55</td><td>OK</td></tr><tr><td>2020-07-07 09:30:57</td><td>62</td><td>Rebooting</td></tr></tbody></table> |

  After choosing the field by which you want to group your data, you can add various calculations on the other fields and apply the calculation to each group of rows. For instance, you might want to calculate the average CPU temperature for each of those servers. To do so, add the **mean calculation** applied on the CPU Temperature field to get the following result:

  | Server ID      | CPU Temperatute (mean) | |
  | -------------- | ------------- | ------------- |
  | server 1 | 82 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>Shutdown</td></tr><tr><td>2020-07-07 09:28:06</td><td>OK</td></tr><tr><td>2020-07-07 09:23:07</td><td>OK</td></tr></tbody></table> |
  | server 2 | 88.6 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 10:32:20</td><td>Overload</td></tr><tr><td>2020-07-07 09:30:05</td><td>OK</td></tr><tr><td>2020-07-07 09:25:05</td><td>OK</td></tr></tbody></table> |
  | server 3 | 59.6 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>OK</td></tr><tr><td>2020-07-07 10:31:22</td><td>OK</td></tr><tr><td>2020-07-07 09:30:57</td><td>Rebooting</td></tr></tbody></table> |
      `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},heatmap:{name:"Create heatmap",getHelperDocs:function(){return`
Use this transformation to prepare histogram data for visualizing trends over time. Similar to the heatmap visualization, this transformation converts histogram metrics into temporal buckets.

#### X Bucket

This setting determines how the x-axis is split into buckets.

- **Size** - Specify a time interval in the input field. For example, a time range of '1h' creates cells one hour wide on the x-axis.
- **Count** - For non-time-related series, use this option to define the number of elements in a bucket.

#### Y Bucket

This setting determines how the y-axis is split into buckets.

- **Linear**
- **Logarithmic** - Choose between log base 2 or log base 10.
- **Symlog** - Uses a symmetrical logarithmic scale. Choose between log base 2 or log base 10, allowing for negative values.

Assume you have the following dataset:

| Timestamp           | Value |
|-------------------- |-------|
| 2023-01-01 12:00:00 | 5     |
| 2023-01-01 12:15:00 | 10    |
| 2023-01-01 12:30:00 | 15    |
| 2023-01-01 12:45:00 | 8     |

- With X Bucket set to 'Size: 15m' and Y Bucket as 'Linear', the histogram organizes values into time intervals of 15 minutes on the x-axis and linearly on the y-axis.
- For X Bucket as 'Count: 2' and Y Bucket as 'Logarithmic (base 10)', the histogram groups values into buckets of two on the x-axis and use a logarithmic scale on the y-axis.
  `}},histogram:{name:"Histogram",getHelperDocs:function(){return`
Use this transformation to generate a histogram based on input data, allowing you to visualize the distribution of values.

- **Bucket size** - The range between the lowest and highest items in a bucket (xMin to xMax).
- **Bucket offset** - The offset for non-zero-based buckets.
- **Combine series** - Create a unified histogram using all available series.

**Original data**

Series 1:

| A | B | C |
| - | - | - |
| 1 | 3 | 5 |
| 2 | 4 | 6 |
| 3 | 5 | 7 |
| 4 | 6 | 8 |
| 5 | 7 | 9 |

Series 2:

| C |
| - |
| 5 |
| 6 |
| 7 |
| 8 |
| 9 |

**Output**

| xMin | xMax | A | B | C | C |
| ---- | ---- | --| --| --| --|
| 1    | 2    | 1 | 0 | 0 | 0 |
| 2    | 3    | 1 | 0 | 0 | 0 |
| 3    | 4    | 1 | 1 | 0 | 0 |
| 4    | 5    | 1 | 1 | 0 | 0 |
| 5    | 6    | 1 | 1 | 1 | 1 |
| 6    | 7    | 0 | 1 | 1 | 1 |
| 7    | 8    | 0 | 1 | 1 | 1 |
| 8    | 9    | 0 | 0 | 1 | 1 |
| 9    | 10   | 0 | 0 | 1 | 1 |

Visualize the distribution of values using the generated histogram, providing insights into the data's spread and density.
  `}},joinByField:{name:"Join by field",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to merge multiple results into a single table, enabling the consolidation of data from different queries.

This is especially useful for converting multiple time series results into a single wide table with a shared time field.

#### Inner join

An inner join merges data from multiple tables where all tables share the same value from the selected field. This type of join excludes data where values do not match in every result.

Use this transformation to combine the results from multiple queries (combining on a passed join field or the first time column) into one result, and drop rows where a successful join cannot occur.

In the following example, two queries return table data. It is visualized as two separate tables before applying the inner join transformation.

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |
| 2020-07-07 11:14:20 | postgre | 345001233 |

**Query B:**

| Time                | Server   | Errors |
| ------------------- | -------- | ------ |
| 2020-07-07 11:34:20 | server 1 | 15     |
| 2020-07-07 11:24:20 | server 2 | 5      |
| 2020-07-07 11:04:20 | server 3 | 10     |

The result after applying the inner join transformation looks like the following:

| Time                | Job     | Uptime    | Server   | Errors |
| ------------------- | ------- | --------- | -------- | ------ |
| 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
| 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

#### Outer join

An outer join includes all data from an inner join and rows where values do not match in every input. While the inner join joins Query A and Query B on the time field, the outer join includes all rows that don't match on the time field.

In the following example, two queries return table data. It is visualized as two tables before applying the outer join transformation.

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |
| 2020-07-07 11:14:20 | postgre | 345001233 |

**Query B:**

| Time                | Server   | Errors |
| ------------------- | -------- | ------ |
| 2020-07-07 11:34:20 | server 1 | 15     |
| 2020-07-07 11:24:20 | server 2 | 5      |
| 2020-07-07 11:04:20 | server 3 | 10     |

The result after applying the outer join transformation looks like the following:

| Time                | Job     | Uptime    | Server   | Errors |
| ------------------- | ------- | --------- | -------- | ------ |
| 2020-07-07 11:04:20 |         |           | server 3 | 10     |
| 2020-07-07 11:14:20 | postgre | 345001233 |          |        |
| 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
| 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

In the following example, a template query displays time series data from multiple servers in a table visualization. The results of only one query can be viewed at a time.

${s("/static/img/docs/transformations/join-fields-before-7-0.png",o,"A table visualization showing results for one server")}

I applied a transformation to join the query results using the time field. Now I can run calculations, combine, and organize the results in this new table.

${s("/static/img/docs/transformations/join-fields-after-7-0.png",o,"A table visualization showing results for multiple servers")}

Combine and analyze data from various queries with table joining for a comprehensive view of your information.
  `}},joinByLabels:{name:"Join by labels",getHelperDocs:function(){return`
Use this transformation to join multiple results into a single table.

This is especially useful for converting multiple time series results into a single wide table with a shared **Label** field.

- **Join** - Select the label to join by between the labels available or common across all time series.
- **Value** - The name for the output result.

#### Example

##### Input

series1{what="Temp", cluster="A", job="J1"}

| Time | Value |
| ---- | ----- |
| 1    | 10    |
| 2    | 200   |

series2{what="Temp", cluster="B", job="J1"}

| Time | Value |
| ---- | ----- |
| 1    | 10    |
| 2    | 200   |

series3{what="Speed", cluster="B", job="J1"}

| Time | Value |
| ---- | ----- |
| 22   | 22    |
| 28   | 77    |

##### Config

value: "what"

##### Output

| cluster | job | Temp | Speed |
| ------- | --- | ---- | ----- |
| A       | J1  | 10   |       |
| A       | J1  | 200  |       |
| B       | J1  | 10   | 22    |
| B       | J1  | 200  | 77    |

Combine and organize time series data effectively with this transformation for comprehensive insights.
  `}},labelsToFields:{name:"Labels to fields",getHelperDocs:function(){return`
Use this transformation to convert time series results with labels or tags into a table, including each label's keys and values in the result. Display labels as either columns or row values for enhanced data visualization.

Given a query result of two time series:

- Series 1: labels Server=Server A, Datacenter=EU
- Series 2: labels Server=Server B, Datacenter=EU

In "Columns" mode, the result looks like this:

| Time                | Server   | Datacenter | Value |
| ------------------- | -------- | ---------- | ----- |
| 2020-07-07 11:34:20 | Server A | EU         | 1     |
| 2020-07-07 11:34:20 | Server B | EU         | 2     |

In "Rows" mode, the result has a table for each series and show each label value like this:

| label      | value    |
| ---------- | -------- |
| Server     | Server A |
| Datacenter | EU       |

| label      | value    |
| ---------- | -------- |
| Server     | Server B |
| Datacenter | EU       |

#### Value field name

If you selected Server as the **Value field name**, then you would get one field for every value of the Server label.

| Time                | Datacenter | Server A | Server B |
| ------------------- | ---------- | -------- | -------- |
| 2020-07-07 11:34:20 | EU         | 1        | 2        |

#### Merging behavior

The labels to fields transformer is internally two separate transformations. The first acts on single series and extracts labels to fields. The second is the [merge](#merge) transformation that joins all the results into a single table. The merge transformation tries to join on all matching fields. This merge step is required and cannot be turned off.

To illustrate this, here is an example where you have two queries that return time series with no overlapping labels.

- Series 1: labels Server=ServerA
- Series 2: labels Datacenter=EU

This will first result in these two tables:

| Time                | Server  | Value |
| ------------------- | ------- | ----- |
| 2020-07-07 11:34:20 | ServerA | 10    |

| Time                | Datacenter | Value |
| ------------------- | ---------- | ----- |
| 2020-07-07 11:34:20 | EU         | 20    |

After merge:

| Time                | Server  | Value | Datacenter |
| ------------------- | ------- | ----- | ---------- |
| 2020-07-07 11:34:20 | ServerA | 10    |            |
| 2020-07-07 11:34:20 |         | 20    | EU         |

Convert your time series data into a structured table format for a clearer and more organized representation.
  `}},limit:{name:"Limit",getHelperDocs:function(){return`
Use this transformation to restrict the number of rows displayed, providing a more focused view of your data. This is particularly useful when dealing with large datasets.

Below is an example illustrating the impact of the **Limit** transformation on a response from a data source:

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |

Here is the result after adding a Limit transformation with a value of '3':

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |

This transformation helps you tailor the visual presentation of your data to focus on the most relevant information.
  `}},merge:{name:"Merge series/tables",getHelperDocs:function(){return`
Use this transformation to combine the results from multiple queries into a single result, which is particularly useful when using the table panel visualization. This transformation merges values into the same row if the shared fields contain the same data.

Here's an example illustrating the impact of the **Merge series/tables** transformation on two queries returning table data:

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |

**Query B:**

| Time                | Job     | Errors |
| ------------------- | ------- | ------ |
| 2020-07-07 11:34:20 | node    | 15     |
| 2020-07-07 11:24:20 | postgre | 5      |

Here is the result after applying the Merge transformation.

| Time                | Job     | Errors | Uptime    |
| ------------------- | ------- | ------ | --------- |
| 2020-07-07 11:34:20 | node    | 15     | 25260122  |
| 2020-07-07 11:24:20 | postgre | 5      | 123001233 |

This transformation combines values from Query A and Query B into a unified table, enhancing the presentation of data for better insights.
  `},links:[{title:"Table panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/"}]},organize:{name:"Organize fields by name",getHelperDocs:function(){return`
Use this transformation to provide the flexibility to rename, reorder, or hide fields returned by a single query in your panel. This transformation is applicable only to panels with a single query. If your panel has multiple queries, consider using an "Outer join" transformation or removing extra queries.

#### Transforming fields

Grafana displays a list of fields returned by the query, allowing you to perform the following actions:

- **Change field order** - Hover over a field, and when your cursor turns into a hand, drag the field to its new position.
- **Hide or show a field** - Use the eye icon next to the field name to toggle the visibility of a specific field.
- **Rename fields** - Type a new name in the "Rename <field>" box to customize field names.

#### Example:

##### Original Query Result

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |

##### After Applying Field Overrides

| Time                | Sensor      | Reading |
| ------------------- | ----------- | ------- |
| 2020-07-07 11:34:20 | Temperature | 25      |
| 2020-07-07 11:34:20 | Humidity    | 22      |
| 2020-07-07 10:32:20 | Humidity    | 29      |

This transformation lets you to tailor the display of query results, ensuring a clear and insightful representation of your data in Grafana.
  `}},partitionByValues:{name:"Partition by values",getHelperDocs:function(){return`
Use this transformation to streamline the process of graphing multiple series without the need for multiple queries with different 'WHERE' clauses.

This is particularly useful when dealing with a metrics SQL table, as illustrated below:

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | US     | 1520  |
| 2022-10-20 12:00:00 | EU     | 2936  |
| 2022-10-20 01:00:00 | US     | 1327  |
| 2022-10-20 01:00:00 | EU     | 912   |

With the **Partition by values** transformation, you can issue a single query and split the results by unique values in one or more columns (fields) of your choosing. The following example uses 'Region':

'SELECT Time, Region, Value FROM metrics WHERE Time > "2022-10-20"'

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | US     | 1520  |
| 2022-10-20 01:00:00 | US     | 1327  |

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | EU     | 2936  |
| 2022-10-20 01:00:00 | EU     | 912   |

This transformation simplifies the process and enhances the flexibility of visualizing multiple series within the same time series visualization.
  `}},prepareTimeSeries:{name:"Prepare time series",getHelperDocs:function(){return`
Use this transformation to address issues when a data source returns time series data in a format that isn't compatible with the desired visualization. This transformation allows you to convert time series data between wide and long formats, providing flexibility in data frame structures.

#### Available options

##### Multi-frame time series

Use this option to transform the time series data frame from the wide format to the long format. This is particularly helpful when your data source delivers time series information in a format that needs to be reshaped for optimal compatibility with your visualization.

**Example: Converting from wide to long format**

| Timestamp           | Value1 | Value2 |
|---------------------|--------|--------|
| 2023-01-01 00:00:00 | 10     | 20     |
| 2023-01-01 01:00:00 | 15     | 25     |

**Transformed to:**

| Timestamp           | Variable | Value |
|---------------------|----------|-------|
| 2023-01-01 00:00:00 | Value1   | 10    |
| 2023-01-01 00:00:00 | Value2   | 20    |
| 2023-01-01 01:00:00 | Value1   | 15    |
| 2023-01-01 01:00:00 | Value2   | 25    |


##### Wide time series

Select this option to transform the time series data frame from the long format to the wide format. If your data source returns time series data in a long format and your visualization requires a wide format, this transformation simplifies the process.

**Example: Converting from long to wide format**

| Timestamp           | Variable | Value |
|---------------------|----------|-------|
| 2023-01-01 00:00:00 | Value1   | 10    |
| 2023-01-01 00:00:00 | Value2   | 20    |
| 2023-01-01 01:00:00 | Value1   | 15    |
| 2023-01-01 01:00:00 | Value2   | 25    |

**Transformed to:**

| Timestamp           | Value1 | Value2 |
|---------------------|--------|--------|
| 2023-01-01 00:00:00 | 10     | 20     |
| 2023-01-01 01:00:00 | 15     | 25     |

> **Note:** This transformation is available in Grafana 7.5.10+ and Grafana 8.0.6+.
  `},links:[{title:"Data frames",url:"https://grafana.com/docs/grafana/latest/developers/plugins/introduction-to-plugin-development/data-frames/"}]},reduce:{name:"Reduce",getHelperDocs:function(){return`
Use this transformation to apply a calculation to each field in the data frame and return a single value. This transformation is particularly useful for consolidating multiple time series data into a more compact, summarized format. Time fields are removed when applying this transformation.

Consider the input:

**Query A:**

| Time                | Temp | Uptime  |
| ------------------- | ---- | ------- |
| 2020-07-07 11:34:20 | 12.3 | 256122  |
| 2020-07-07 11:24:20 | 15.4 | 1230233 |

**Query B:**

| Time                | AQI | Errors |
| ------------------- | --- | ------ |
| 2020-07-07 11:34:20 | 6.5 | 15     |
| 2020-07-07 11:24:20 | 3.2 | 5      |

The reduce transformer has two modes:

- **Series to rows** - Creates a row for each field and a column for each calculation.
- **Reduce fields** - Keeps the existing frame structure, but collapses each field into a single value.

For example, if you used the **First** and **Last** calculation with a **Series to rows** transformation, then
the result would be:

| Field  | First  | Last    |
| ------ | ------ | ------- |
| Temp   | 12.3   | 15.4    |
| Uptime | 256122 | 1230233 |
| AQI    | 6.5    | 3.2     |
| Errors | 15     | 5       |

The **Reduce fields** with the **Last** calculation,
results in two frames, each with one row:

**Query A:**

| Temp | Uptime  |
| ---- | ------- |
| 15.4 | 1230233 |

**Query B:**

| AQI | Errors |
| --- | ------ |
| 3.2 | 5      |

This flexible transformation simplifies the process of consolidating and summarizing data from multiple time series into a more manageable and organized format.
  `}},renameByRegex:{name:"Rename by regex",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to rename parts of the query results using a regular expression and replacement pattern.

You can specify a regular expression, which is only applied to matches, along with a replacement pattern that support back references. For example, let's imagine you're visualizing CPU usage per host and you want to remove the domain name. You could set the regex to '/^([^.]+).*/' and the replacement pattern to '$1', 'web-01.example.com' would become 'web-01'.

> **Note:** The Rename by regex transformation was improved in Grafana v9.0.0 to allow global patterns of the form '/<stringToReplace>/g'. Depending on the regex match used, this may cause some transformations to behave slightly differently. You can guarantee the same behavior as before by wrapping the match string in forward slashes '(/)', e.g. '(.*)' would become '/(.*)/'.

In the following example, we are stripping the 'A-' prefix from field names. In the before image, you can see everything is prefixed with 'A-':

${s("/media/docs/grafana/panels-visualizations/screenshot-rename-by-regex-before-v11.0.png",o,"A time series with full series names")}

With the transformation applied, you can see we are left with just the remainder of the string.

${s("/media/docs/grafana/panels-visualizations/screenshot-rename-by-regex-after-v11.0.png",o,"A time series with shortened series names")}

This transformation lets you to tailor your data to meet your visualization needs, making your dashboards more informative and user-friendly.
  `}},rowsToFields:{name:"Rows to fields",getHelperDocs:function(){return`
Use this transformation to convert rows into separate fields. This can be useful because fields can be styled and configured individually. It can also use additional fields as sources for dynamic field configuration or map them to field labels. The additional labels can then be used to define better display names for the resulting fields.

This transformation includes a field table which lists all fields in the data returned by the configuration query. This table gives you control over what field should be mapped to each configuration property (the **Use as** option). You can also choose which value to select if there are multiple rows in the returned data.

This transformation requires:

- One field to use as the source of field names.

  By default, the transform uses the first string field as the source. You can override this default setting by selecting **Field name** in the **Use as** column for the field you want to use instead.

- One field to use as the source of values.

  By default, the transform uses the first number field as the source. But you can override this default setting by selecting **Field value** in the **Use as** column for the field you want to use instead.

Useful when visualizing data in:

- Gauge
- Stat
- Pie chart

#### Map extra fields to labels

If a field does not map to config property Grafana will automatically use it as source for a label on the output field-

**Example:**

| Name    | DataCenter | Value |
| ------- | ---------- | ----- |
| ServerA | US         | 100   |
| ServerB | EU         | 200   |

**Output:**

| ServerA (labels: DataCenter: US) | ServerB (labels: DataCenter: EU) |
| -------------------------------- | -------------------------------- |
| 10                               | 20                               |

The extra labels can now be used in the field display name provide more complete field names.

If you want to extract config from one query and apply it to another you should use the config from query results transformation.

#### Example

**Input:**

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

**Output:**

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field configuration and if set like this will be used by the visualization instead of any options manually configured in the panel editor options pane.

This transformation enables the conversion of rows into individual fields, facilitates dynamic field configuration, and maps additional fields to labels.
  `}},seriesToRows:{name:"Series to rows",getHelperDocs:function(){return`
Use this transformation to combine the result from multiple time series data queries into one single result. This is helpful when using the table panel visualization.

The result from this transformation will contain three columns: Time, Metric, and Value. The Metric column is added so you easily can see from which query the metric originates from. Customize this value by defining Label on the source query.

In the example below, we have two queries returning time series data. It is visualized as two separate tables before applying the transformation.

**Query A:**

| Time                | Temperature |
| ------------------- | ----------- |
| 2020-07-07 11:34:20 | 25          |
| 2020-07-07 10:31:22 | 22          |
| 2020-07-07 09:30:05 | 19          |

**Query B:**

| Time                | Humidity |
| ------------------- | -------- |
| 2020-07-07 11:34:20 | 24       |
| 2020-07-07 10:32:20 | 29       |
| 2020-07-07 09:30:57 | 33       |

Here is the result after applying the Series to rows transformation.

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |

This transformation facilitates the consolidation of results from multiple time series queries, providing a streamlined and unified dataset for efficient analysis and visualization in a tabular format.

> **Note:** This transformation is available in Grafana 7.1+.
  `}},sortBy:{name:"Sort by",getHelperDocs:function(){return`
Use this transformation to sort each frame within a query result based on a specified field, making your data easier to understand and analyze. By configuring the desired field for sorting, you can control the order in which the data is presented in the table or visualization.

Use the **Reverse** switch to inversely order the values within the specified field. This functionality is particularly useful when you want to quickly toggle between ascending and descending order to suit your analytical needs.

For example, in a scenario where time-series data is retrieved from a data source, the **Sort by** transformation can be applied to arrange the data frames based on the timestamp, either in ascending or descending order, depending on the analytical requirements. This capability ensures that you can easily navigate and interpret time-series data, gaining valuable insights from the organized and visually coherent presentation.
  `}},spatial:{name:"Spatial",getHelperDocs:function(){return`
Use this transformation to apply spatial operations to query results.

- **Action** - Select an action:
  - **Prepare spatial field** - Set a geometry field based on the results of other fields.
    - **Location mode** - Select a location mode (these options are shared by the **Calculate value** and **Transform** modes):
      - **Auto** - Automatically identify location data based on default field names.
      - **Coords** - Specify latitude and longitude fields.
      - **Geohash** - Specify a geohash field.
      - **Lookup** - Specify Gazetteer location fields.
  - **Calculate value** - Use the geometry to define a new field (heading/distance/area).
    - **Function** - Choose a mathematical operation to apply to the geometry:
      - **Heading** - Calculate the heading (direction) between two points.
      - **Area** - Calculate the area enclosed by a polygon defined by the geometry.
      - **Distance** - Calculate the distance between two points.
  - **Transform** - Apply spatial operations to the geometry.
    - **Operation** - Choose an operation to apply to the geometry:
      - **As line** - Create a single line feature with a vertex at each row.
      - **Line builder** - Create a line between two points.

This transformation allows you to manipulate and analyze geospatial data, enabling operations such as creating lines between points, calculating spatial properties, and more.
  `}},timeSeriesTable:{name:"Time series to table transform",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to convert time series results into a table, transforming a time series data frame into a **Trend** field which can then be used with the [sparkline cell type][]. If there are multiple time series queries, each will result in a separate table data frame. These can be joined using join or merge transforms to produce a single table with multiple sparklines per row.

${s("/static/img/docs/transformations/table-sparklines.png",o,"A table panel showing multiple values and their corresponding sparklines.")}

For each generated **Trend** field value, a calculation function can be selected. This value is displayed next to the sparkline and will be used for sorting table rows.

${s("/static/img/docs/transformations/timeseries-table-select-stat.png",o,"A select box showing available statistics that can be calculated.")}


> **Note:** This transformation is available in Grafana 9.5+ as an opt-in beta feature. Modify the Grafana [configuration file][] to use it.
  `},links:[{title:"sparkline cell type",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/#sparkline"},{title:"configuration file",url:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/"}]},regression:{name:"Regression analysis",getHelperDocs:function(o="shortcodeFigure"){return`
Use this transformation to create a new data frame containing values predicted by a statistical model. This is useful for finding a trend in chaotic data. It works by fitting a mathematical function to the data, using either linear or polynomial regression. The data frame can then be used in a visualization to display a trendline.

There are two different models:

- **Linear regression** - Fits a linear function to the data.
${s("/static/img/docs/transformations/linear-regression.png",o,"A time series visualization with a straight line representing the linear function")}
- **Polynomial regression** - Fits a polynomial function to the data.
${s("/static/img/docs/transformations/polynomial-regression.png",o,"A time series visualization with a curved line representing the polynomial function")}

> **Note:** This transformation is currently in public preview. Grafana Labs offers limited support, and breaking changes might occur prior to the feature being made generally available. Enable the \`regressionTransformation\` feature toggle in Grafana to use this feature. Contact Grafana Support to enable this feature in Grafana Cloud.
  `}}};function r(){return`
  Go to the <a href="https://grafana.com/docs/grafana/latest/panels/transformations/?utm_source=grafana" target="_blank" rel="noreferrer">
  transformation documentation
  </a> for more general documentation.
  `}function s(o,m,l){return m==="shortcodeFigure"?`{{< figure src="${o}" class="docs-image--no-shadow" max-width= "1100px" alt="${l}" >}}`:`![${l}](https://grafana.com${o})`}},9581:(Y,I,e)=>{"use strict";e.d(I,{YD:()=>s,dy:()=>n,kD:()=>r});var t=e(52622),n=(m=>(m.Prepare="prepare",m.Calculate="calculate",m.Modify="modify",m))(n||{}),r=(m=>(m.Heading="heading",m.Distance="distance",m.Area="area",m))(r||{}),s=(m=>(m.AsLine="asLine",m.LineBuilder="lineBuilder",m))(s||{});const o={action:"prepare",source:{mode:t.aG.Auto}}},78134:(Y,I,e)=>{"use strict";e.d(I,{EX:()=>u,pp:()=>d,tt:()=>i});var t=e(70915),n=e(11217),r=e(44294),s=e(22796),o=e(52490),m=e(11261),l=e(9581);function i(E){const h=[];for(const y of E.values)y&&h.push(u(y));return new n.A(h)}function c(E){const h=new Array(E.length);if(E.length>1){let y=f(E[0]);for(let a=1;a<E.length;a++){let v=f(E[a]);if(y&&v){let g=Math.atan2(v[0]-y[0],v[1]-y[1])*180/Math.PI;g<0&&(g+=360),h[a-1]=h[a]=g}}}else h.fill(0);return h}function u(E){return E instanceof r.A?E.getCoordinates():(0,t.q1)(E.getExtent())}function f(E){if(E)return(0,s.WP)(u(E))}function d(E,h){const y=E.values,a=new Array(E.values.length),v=h.calc??l.kD.Heading,g=h.field??v;switch(v){case l.kD.Area:{for(let b=0;b<y.length;b++){const P=y[b];P&&(a[b]=(0,o.UG)(P))}return{name:g,type:m.PU.number,config:{unit:"areaM2"},values:a}}case l.kD.Distance:{for(let b=0;b<y.length;b++){const P=y[b];P&&(a[b]=(0,o.R3)(P))}return{name:g,type:m.PU.number,config:{unit:"lengthm"},values:a}}case l.kD.Heading:default:return{name:g,type:m.PU.number,config:{unit:"degree"},values:c(y)}}}},88841:(Y,I,e)=>{"use strict";e.d(I,{y:()=>h});var t=e(32196),n=e(18491),r=e(36376),s=e(96540),o=e(40845),m=e(17464),l=e(40276),i=e(72093),c=e(10354),u=e(43538);const f=(a,v)=>a-v*Math.floor(a/v),d=8,E=(a,v)=>({suggestionsWrapper:(0,t.css)({boxShadow:a.shadows.z2}),errorTooltip:(0,t.css)({position:"absolute",top:v+d+"px",zIndex:a.zIndex.tooltip}),inputWrapper:(0,t.css)({position:"relative"})}),h=({value:a="",onChange:v,suggestions:g,placeholder:b,error:P,invalid:C})=>{const[D,T]=(0,s.useState)(!1),[M,O]=(0,s.useState)(0),[S,p]=(0,s.useState)(a.toString()),[x,A]=(0,s.useState)(0),[R,B]=(0,s.useState)(0),[U,F]=(0,s.useState)(0),K=(0,o.$j)(),w=E(K,R),L=(0,s.useRef)(),V=[(0,n.UU)({fallbackAxisSideDirection:"start",crossAxis:!1,boundary:document.body}),(0,n.BN)()],{refs:N,floatingStyles:z}=(0,r.we)({open:D,placement:"bottom-start",onOpenChange:T,middleware:V,whileElementsMounted:n.ll,strategy:"fixed"}),J=(0,s.useCallback)(k=>{N.setReference(k),L.current=k},[N]),G=(0,s.useRef)(null);(0,s.useEffect)(()=>{A(y(G.current,M))},[M]);const H=s.useCallback((k,ee=L.current)=>{const X=ee.selectionStart,j=ee.value;j[U-1]==="$"?ee.value=j.slice(0,U)+k.value+j.slice(X):ee.value=j.slice(0,U)+"$"+k.value+j.slice(X),p(ee.value),T(!1),O(0),v(ee.value)},[v,U]),q=s.useCallback(k=>{if(!D){if(k.key==="$"||k.key===" "&&k.ctrlKey){F(L.current.selectionStart||0),T(!0);return}return}switch(k.key){case"Backspace":case"Escape":case"ArrowLeft":case"ArrowRight":return T(!1),O(0);case"Enter":return k.preventDefault(),H(g[M]);case"ArrowDown":case"ArrowUp":k.preventDefault();const ee=k.key==="ArrowDown"?1:-1;return O(X=>f(X+ee,g.length));default:return}},[D,g,M,H]),le=s.useCallback(k=>{p(k.currentTarget.value)},[]),me=s.useCallback(k=>{v(k.currentTarget.value)},[v]);return(0,s.useEffect)(()=>{B(L.current.clientHeight)},[]),s.createElement("div",{className:w.inputWrapper},D&&s.createElement(m.ZL,null,s.createElement("div",{ref:N.setFloating,style:z,className:w.suggestionsWrapper},s.createElement(l.E,{scrollTop:x,autoHeightMax:"300px",setScrollTop:({scrollTop:k})=>A(k)},s.createElement(u.k,{activeRef:G,suggestions:g,onSuggestionSelect:H,onClose:()=>T(!1),activeIndex:M})))),C&&P&&s.createElement("div",{className:w.errorTooltip},s.createElement(i.P,null,P)),s.createElement(c.p,{placeholder:b,invalid:C,ref:J,value:S,onChange:le,onBlur:me,onKeyDown:q}))};h.displayName="SuggestionsInput";function y(a,v){return(a?.clientHeight??0)*v}},94397:(Y,I,e)=>{"use strict";e.d(I,{N_:()=>i,ZI:()=>o,aG:()=>m,eJ:()=>l,qt:()=>c});var t=e(96540),n=e(28240),r=e(91410),s=e(32264);function o(u){return(0,t.useMemo)(()=>Array.isArray(u)?Object.keys(u.reduce((f,d)=>!d||!Array.isArray(d.fields)?f:d.fields.reduce((E,h)=>{const y=(0,n.Ct)(h,d,u);return E[y]=!0,E},f),{})):[],[u])}function m(u){const f=new Set;for(const d of u)for(const E of d.fields)if(E.labels)for(const h of Object.keys(E.labels))f.add(h);return f}const l={combine:"Combine",calculateNewFields:"Calculate new fields",createNewVisualization:"Create new visualization",filter:"Filter",performSpatialOperations:"Perform spatial operations",reformat:"Reformat",reorderAndRename:"Reorder and rename"},i=u=>!!(typeof u=="number"||!Number.isNaN(Number(u))||/^\$[A-Za-z0-9_]+$/.test(u)&&s.$.featureToggles.transformationsVariableSupport);function c(u){const f=[];u&&(f.push({label:"Browser",value:"browser"}),f.push({label:"UTC",value:"utc"}));const d=(0,r.P3)();for(const E of d)f.push({label:E,value:E});return f}},87617:(Y,I,e)=>{"use strict";e.d(I,{$u:()=>f,Ay:()=>y,Cj:()=>i,EC:()=>u,Y_:()=>l,dJ:()=>d,g4:()=>c,jE:()=>E,t_:()=>o});var t=e(30038),n=e(2913);const r={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,externalUserMngInfo:n.Ay.externalUserMngInfo,externalUserMngLinkName:n.Ay.externalUserMngLinkName,externalUserMngLinkUrl:n.Ay.externalUserMngLinkUrl,isLoading:!1,rolesLoading:!1},s=(0,t.Z0)({name:"users",initialState:r,reducers:{usersLoaded:(a,v)=>{const{totalCount:g,perPage:b,page:P,orgUsers:C}=v.payload,D=Math.ceil(g/b);return{...a,isLoading:!0,users:C,perPage:b,page:P,totalPages:D}},searchQueryChanged:(a,v)=>({...a,searchQuery:v.payload,page:r.page}),setUsersSearchPage:(a,v)=>({...a,page:v.payload}),pageChanged:(a,v)=>({...a,page:v.payload}),sortChanged:(a,v)=>({...a,sort:v.payload}),usersFetchBegin:a=>({...a,isLoading:!0}),usersFetchEnd:a=>({...a,isLoading:!1}),rolesFetchBegin:a=>({...a,rolesLoading:!0}),rolesFetchEnd:a=>({...a,rolesLoading:!1})}}),{searchQueryChanged:o,setUsersSearchPage:m,usersLoaded:l,usersFetchBegin:i,usersFetchEnd:c,pageChanged:u,sortChanged:f,rolesFetchBegin:d,rolesFetchEnd:E}=s.actions,y={users:s.reducer}},20601:(Y,I,e)=>{"use strict";e.d(I,{B:()=>n});var t=e(83077);const n=new t.O},26260:(Y,I,e)=>{"use strict";e.d(I,{$u:()=>h,D4:()=>v,Iv:()=>g,U2:()=>a,VT:()=>y,z_:()=>E});var t=e(2543),n=e.n(t),r=e(31193),s=e(3843),o=e(24240),m=e(72401),l=e(48594),i=e(87421),c=e(56968),u=e(75096),f=e(53699);const d="Filters",E=C=>async(D,T)=>{let M=P(C,T());if(!M&&(D(b(C)),M=P(C,T()),!M))return;const O=M.filters.findIndex(p=>p.key===C.key&&p.value===C.value);if(O===-1){const{value:p,key:x,operator:A}=C,R={value:p,key:x,operator:A};return await D(a((0,u.jX)(M),R))}const S={...M.filters[O],operator:C.operator};return await D(h((0,u.jX)(M),{index:O,filter:S}))},h=(C,D)=>async(T,M)=>{const O=(0,i.dn)(C,M());T((0,l.kb)(C.rootStateKey,(0,f.E2)((0,u.qD)(O,D)))),await T((0,m.us)((0,u.jX)(O),!0))},y=(C,D)=>async(T,M)=>{const O=(0,i.dn)(C,M());T((0,l.kb)(C.rootStateKey,(0,f.D$)((0,u.qD)(O,D)))),await T((0,m.us)((0,u.jX)(O),!0))},a=(C,D)=>async(T,M)=>{const O=(0,i.dn)(C,M());T((0,l.kb)(C.rootStateKey,(0,f.xt)((0,u.qD)(O,D)))),await T((0,m.us)((0,u.jX)(O),!0))},v=(C,D)=>async(T,M)=>{const O=(0,i.dn)(C,M());T((0,l.kb)(C.rootStateKey,(0,f.qZ)((0,u.qD)(O,D)))),await T((0,m.us)((0,u.jX)(O),!0))},g=(C,D)=>async(T,M)=>{const O=(0,i.dn)(C,M());T((0,l.kb)(C.rootStateKey,(0,c.QP)((0,u.qD)(O,{propName:"datasource",propValue:D}))));const p=(await(0,r.tR)().get(D))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";T((0,l.kb)(C.rootStateKey,(0,s.BC)({infoText:p})))},b=C=>(D,T)=>{const M=(0,i.y7)(T()),O={...(0,t.cloneDeep)(f.MK),datasource:C.datasource,name:d,id:d,rootStateKey:M},S=!1,p=(0,i.hk)(M,T()),x={type:"adhoc",id:O.id,rootStateKey:M};D((0,l.kb)(M,(0,c.QV)((0,u.qD)(x,{global:S,model:O,index:p}))))},P=(C,D)=>{const T=(0,i.y7)(D),M=(0,i.nx)(T,D);let O;for(const S of Object.values(M.variables))if((0,o.EW)(S)&&S.datasource?.uid===C.datasource.uid){O=S;break}return O}},53699:(Y,I,e)=>{"use strict";e.d(I,{AA:()=>f,D$:()=>i,E2:()=>c,MK:()=>o,qZ:()=>u,xt:()=>l});var t=e(30038),n=e(80484),r=e(87421),s=e(83370);const o={...n.Vg,type:"adhoc",datasource:null,filters:[]},m=(0,t.Z0)({name:"templating/adhoc",initialState:s.j,reducers:{filterAdded:(d,E)=>{const h=(0,r.Fs)(d,E.payload.id);h.type==="adhoc"&&h.filters.push(E.payload.data)},filterRemoved:(d,E)=>{const h=(0,r.Fs)(d,E.payload.id);if(h.type!=="adhoc")return;const y=E.payload.data;h.filters.splice(y,1)},filterUpdated:(d,E)=>{const h=(0,r.Fs)(d,E.payload.id);if(h.type!=="adhoc")return;const{filter:y,index:a}=E.payload.data;h.filters[a]=y},filtersRestored:(d,E)=>{const h=(0,r.Fs)(d,E.payload.id);h.type==="adhoc"&&(h.filters=E.payload.data)}}}),{filterAdded:l,filterRemoved:i,filterUpdated:c,filtersRestored:u}=m.actions,f=m.reducer},13344:(Y,I,e)=>{"use strict";e.d(I,{Ek:()=>o,To:()=>r,Zm:()=>n,ou:()=>s,qF:()=>t,qz:()=>m});const t="00000000-0000-0000-0000-000000000000",n="All",r="$__all",s="None",o="",m="var-"},35589:(Y,I,e)=>{"use strict";e.d(I,{c:()=>l,z:()=>i});var t=e(16792),n=e(96540),r=e(13544),s=e(40845),o=e(21744),m=e(85140);const l="Grafana-LegacyVariableQueryEditor",i=({onChange:c,query:u})=>{const f=(0,s.of)(m.$),[d,E]=(0,n.useState)(u),h=v=>{E(v.currentTarget.value)},y=(0,n.useCallback)(v=>{c(v.currentTarget.value,v.currentTarget.value)},[c]),a=(0,t.Bi)();return n.createElement(o.f,{id:a,rows:2,value:d,onChange:h,onBlur:y,placeholder:"Metric name or tags query",required:!0,"data-testid":r.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:f.textarea})};i.displayName=l},70766:(Y,I,e)=>{"use strict";e.d(I,{y:()=>m});var t=e(96540),n=e(72574),r=e(22854),s=e(24240),o=e(35589);async function m(i,c=r.cS){if((0,s.zs)(i))return i.variables.editor;if((0,s.X3)(i)){const u=await c(i.meta);if(!u.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return u.components.QueryEditor??null}return(0,s.Hf)(i)?l:(0,s.d5)(i)?(await c(i.meta)).components.VariableQueryEditor??o.z:null}function l({datasource:i,query:c,onChange:u}){const f=(0,t.useCallback)(d=>{u({refId:"StandardVariableQuery",query:d})},[u]);return t.createElement(o.z,{query:c.query,onChange:f,datasource:i,templateSrv:(0,n.w)()})}},3843:(Y,I,e)=>{"use strict";e.d(I,{BC:()=>c,DW:()=>m,Eo:()=>f,FN:()=>o,NY:()=>u,T7:()=>i,nS:()=>n,sJ:()=>l,wf:()=>s,y8:()=>d});var t=e(30038);const n={id:"",isValid:!0,errors:{},name:"",extended:null},r=(0,t.Z0)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(E,h)=>{E.name=h.payload.name,E.id=h.payload.id},variableEditorUnMounted:(E,h)=>n,changeVariableNameSucceeded:(E,h)=>{E.name=h.payload.data.newName,delete E.errors.name,E.isValid=Object.keys(E.errors).length===0},changeVariableNameFailed:(E,h)=>{E.name=h.payload.newName,E.errors.name=h.payload.errorText,E.isValid=Object.keys(E.errors).length===0},addVariableEditorError:(E,h)=>{E.errors[h.payload.errorProp]=h.payload.errorText,E.isValid=Object.keys(E.errors).length===0},removeVariableEditorError:(E,h)=>{delete E.errors[h.payload.errorProp],E.isValid=Object.keys(E.errors).length===0},changeVariableEditorExtended:(E,h)=>{E.extended={...E.extended,...h.payload}},cleanEditorState:()=>n}}),s=r.reducer,{changeVariableNameSucceeded:o,changeVariableNameFailed:m,variableEditorMounted:l,variableEditorUnMounted:i,changeVariableEditorExtended:c,addVariableEditorError:u,removeVariableEditorError:f,cleanEditorState:d}=r.actions},85830:(Y,I,e)=>{"use strict";e.d(I,{M:()=>t});var t=(n=>(n[n.MaxSize=50]="MaxSize",n))(t||{})},25304:(Y,I,e)=>{"use strict";e.d(I,{z:()=>s});var t=e(72574),n=e(20601),r=e(13344);function s(o){const m={},l=(0,t.w)().getVariables();for(let i=0;i<l.length;i++){const c=l[i],u=o&&o[c.name];c.skipUrlSync||(u?m[r.qz+c.name]=u.value:m[r.qz+c.name]=n.B.get(c.type).getValueForUrl(c))}return m}},24240:(Y,I,e)=>{"use strict";e.d(I,{CH:()=>y,EW:()=>s,Hf:()=>f,P4:()=>r,SP:()=>l,VN:()=>h,VO:()=>o,X3:()=>E,d5:()=>u,iv:()=>m,m8:()=>i,zs:()=>d});var t=e(29505),n=e(35589);const r=a=>a.type==="query",s=a=>a.type==="adhoc",o=a=>a.type==="constant",m=a=>"multi"in a,l=a=>"options"in a,i=a=>"current"in a;function c(a){return a===null?!1:typeof a=="string"}const u=a=>!!a.metricFindQuery&&!a.variables,f=a=>{if(!a.variables||a.variables.getType()!==t.Qz.Standard)return!1;const v=a.variables;return"toDataQuery"in v&&!!v.toDataQuery},d=a=>{if(!a.variables||a.variables.getType()!==t.Qz.Custom)return!1;const v=a.variables;return"query"in v&&"editor"in v&&!!v.query&&!!v.editor},E=a=>a.variables?a.variables.getType()===t.Qz.Datasource:!1;function h(a,v){return a?a.displayName===n.c||u(v):!1}function y(a,v){return a?a.displayName!==n.c&&(E(v)||f(v)||d(v)):!1}},27238:(Y,I,e)=>{"use strict";e.d(I,{WT:()=>n,bX:()=>o,t4:()=>s});var t=e(30038);const n={usages:[],usagesNetwork:[]},r=(0,t.Z0)({name:"templating/inspect",initialState:n,reducers:{initInspect:(m,l)=>{const{usages:i,usagesNetwork:c}=l.payload;m.usages=i,m.usagesNetwork=c}}}),s=r.reducer,{initInspect:o}=r.actions},12846:(Y,I,e)=>{"use strict";e.d(I,{qJ:()=>f,hI:()=>c,hM:()=>a,H7:()=>u,xU:()=>b,P5:()=>S,g0:()=>v,PK:()=>M,Ow:()=>D});var t=e(6709);function n(p,x){const A=new Set;for(const R of p)A.add(x(R));return A}var r=e(84423),s=e(87490),o=e(34214),m=e(20601),l=e(24240),i=e(75096);const c=p=>{const x=[];for(const A of p)x.push({id:A.id,label:`${A.id}`});return x},u=(p,x)=>p.filter(A=>x.some(R=>R.from===A.id||R.to===A.id)),f=p=>{const x=[];for(const A of p)for(const R of p){if(A===R)continue;m.B.get(A.type).dependsOn(A,R)&&x.push({from:A.id,to:R.id})}return x};function d(p){const x=(0,i.t4)(p);if(!x)return;const A=x.slice(1).find(R=>R!==void 0);if(!(A in{}))return A}const E=(p,x)=>{i.SY.lastIndex=0;const A=[],B=(0,s.MA)(x,2).match(i.SY);if(!B)return A;for(const U of B){if(!U||U.indexOf("$__")!==-1||U.indexOf("${__")!==-1||U.indexOf("$hashKey")!==-1)continue;const F=d(U);p.some(K=>K.id===F)||A.find(K=>K===F)||F&&A.push(F)}return A},h={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},y=(p,x,A)=>{const R=Object.keys(x.value).reduce((U,F)=>{const K=x.value[F];if(!K||typeof K!="string")return U;const w=h[F]?h[F].find(V=>V.test(p)):void 0;let L=(0,i.wJ)(K,p);return F==="repeat"&&K===p&&(L=!0),!w&&L&&(U={...U,[F]:K}),U},{}),B=Object.keys(x.value).reduce((U,F)=>{const K=x.value[F];if(K&&typeof K=="object"&&Object.keys(K).length){let w=K.title||K.name||K.id||F;Array.isArray(x.value)&&x.key==="panels"&&(w=`${w}[${K.id}]`);const L=y(p,{key:F,value:K},{});Object.keys(L).length&&(U={...U,[w]:L})}return U},{});return(Object.keys(R).length||Object.keys(B).length)&&(A={...A,...R,...B}),A},a=(p,x)=>{if(!x)return{unUsed:[],usages:[]};const A=[];let R=[];const B=x.getSaveModelCloneOld();for(const U of p){const F=U.id,K=y(F,{key:"model",value:B},{});!Object.keys(K).length&&!(0,l.EW)(U)&&A.push(U),Object.keys(K).length&&R.push({variable:U,tree:K})}return{unUsed:A,usages:R}};async function v(p,x){return new Promise((A,R)=>{setTimeout(()=>{try{const B=g(p,x);A(D(B))}catch(B){R(B)}},200)})}function g(p,x){if(!x)return[];let A=[];const R=x.getSaveModelCloneOld(),B=E(p,R);for(const U of B){const F=y(U,{key:"model",value:R},{});if(Object.keys(F).length){const K={id:U,name:U};A.push({variable:K,tree:F})}}return A}function b(p,x,A){const R=n(x.descendants(p),U=>U.name);R.add(t.c.includeVars);for(const U of p)R.add(U);return P([...R],A)}function P(p,x){const A=[];for(const R of p)x[R]&&A.push(...x[R]);return new Set(A)}const C=(p,x)=>{const{id:A,value:R}=x,{nodes:B,edges:U}=p;if(R&&typeof R=="string"){const F=`${x.id}-${R}`;return B.push({id:F,label:R}),U.push({from:F,to:A}),p}if(R&&typeof R=="object"){const F=Object.keys(R);for(const K of F){const w=`${x.id}-${K}`;B.push({id:w,label:K}),U.push({from:w,to:A}),p=C(p,{id:w,value:R[K]})}return p}return p},D=p=>{const x=[];for(const A of p){const{variable:R,tree:B}=A,U={variable:R,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};x.push(C(U,{id:"dashboard",value:B}))}return x},T=p=>Object.values(p).reduce((A,R)=>typeof R=="object"?A+T(R):A+1,0),M=(p,x)=>{const A=x.find(R=>R.variable.id===p);return A?T(A.tree):0};function O(p){const x=[];for(const A of p)x.push(A),A.panels?.length&&x.push(...O(A.panels.map(R=>new PanelModel(R))));return x}function S(p){const x={};for(const A of p){const R=(0,r.tw)(A),B=[...R.matchAll(/"repeat":"([^"]+)"/g)].map(K=>K[1]),U=R.match(i.SY)?.map(K=>d(K))??[],F=[...B,...U];for(const K of F)K in x?x[K].add(A.id):x[K]=new Set([A.id])}return x}},81515:(Y,I,e)=>{"use strict";e.d(I,{E5:()=>c,Ez:()=>l,mn:()=>u});var t=e(30038),n=e(2543),r=e.n(n),s=e(87421),o=e(83370),m=e(80484);const l={...m.Vg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:m.CO.onTimeRangeChanged,current:{}},i=(0,t.Z0)({name:"templating/interval",initialState:o.j,reducers:{createIntervalOptions:(f,d)=>{const E=(0,s.Fs)(f,d.payload.id);if(E.type!=="interval")return;const h=(0,n.map)(E.query.match(/(["'])(.*?)\1|\w+/g),y=>(y=y.replace(/["']+/g,""),{text:y.trim(),value:y.trim(),selected:!1}));E.auto&&h.length&&h[0].text!=="auto"&&h.unshift({text:"auto",value:"$__auto_interval_"+E.name,selected:!1}),E.options=h}}}),c=i.reducer,{createIntervalOptions:u}=i.actions},24300:(Y,I,e)=>{"use strict";e.d(I,{jR:()=>S,Fu:()=>P,$z:()=>i,O$:()=>C,ho:()=>p,MO:()=>b,an:()=>D,U9:()=>g,fx:()=>M,qh:()=>O,S8:()=>T});var t=e(53076),n=e(30038),r=e(2543),s=e(92053);const o=(x,...A)=>A.reduce((R,B)=>B(R),x);var m=e(13344),l=e(24240);const i={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},c=1e3,u=new t.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),f=x=>Array.isArray(x)?x.reduce((A,R)=>((0,r.isString)(R.value)&&(A[R.value]=R),A),{}):{},d=x=>{if(!Array.isArray(x.options))return x.options=[],x;const A=f(x.selectedValues);return x.selectedValues=Object.values(A),x.options=x.options.map(R=>{if(!(0,r.isString)(R.value))return R;const B=!!A[R.value];return R.selected===B?R:{...R,selected:B}}),x.options=E(x.options),x},E=x=>Array.isArray(x)?x.length<=c?x:x.slice(0,c):[],h=x=>{const{options:A,selectedValues:R}=x;return A.length===0||R.length>0||!A[0]||A[0].value!==m.To||(x.selectedValues=[{...A[0],selected:!0}]),x},y=x=>{const{selectedValues:A}=x;return A.length>1&&(x.selectedValues=A.filter(R=>R.value!==m.To)),x},a=x=>x.filter(A=>A.value!==m.To).map(A=>({...A,selected:!0})),v=(0,n.Z0)({name:"templating/optionsPicker",initialState:i,reducers:{showOptions:(x,A)=>{const{query:R,options:B}=A.payload;if(x.highlightIndex=-1,x.options=(0,r.cloneDeep)(B),x.id=A.payload.id,x.queryValue="",x.multi=!1,(0,l.iv)(A.payload)&&(x.multi=A.payload.multi??!1),(0,l.P4)(A.payload)){const{queryValue:U}=A.payload,F=(0,s.E)(R);x.queryValue=F&&U?U:""}return x.selectedValues=x.options.filter(U=>U.selected),o(x,h,d)},hideOptions:(x,A)=>({...i}),toggleOption:(x,A)=>{const{option:R,clearOthers:B,forceSelect:U}=A.payload,{multi:F,selectedValues:K}=x;if(R){const w=!K.find(L=>L.value===R.value&&L.text===R.text);if(R.value===m.To||!F||B)return w||U?x.selectedValues=[{...R,selected:!0}]:x.selectedValues=[],o(x,h,y,d);if(U||w)return x.selectedValues.push({...R,selected:!0}),o(x,h,y,d);x.selectedValues=K.filter(L=>L.value!==R.value&&L.text!==R.text)}else x.selectedValues=[];return o(x,h,y,d)},moveOptionsHighlight:(x,A)=>{let R=x.highlightIndex+A.payload;return R<0?R=-1:R>=x.options.length&&(R=x.options.length-1),{...x,highlightIndex:R}},toggleAllOptions:(x,A)=>{const R=x.selectedValues.find(U=>U.value===m.To),B=x.options.find(U=>U.value===m.To);return x.selectedValues.length>0&&B&&!R?(x.selectedValues=[],x.selectedValues.push({text:B.text??"All",value:B.value,selected:!0}),o(x,d)):R&&x.selectedValues.length===1?(x.selectedValues=a(x.options),o(x,d)):x.selectedValues.length>0&&!B?(x.selectedValues=[],o(x,d)):(x.selectedValues=a(x.options),o(x,d))},updateSearchQuery:(x,A)=>(x.queryValue=A.payload,x),updateOptionsAndFilter:(x,A)=>{const R=x.queryValue.trim();let B=[];if(R==="")B=A.payload;else{const U=A.payload.map(({text:L})=>Array.isArray(L)?L.toString():L),[F,K,w]=u.search(U,R,5);F?.length&&(K&&w?B=w.map(L=>A.payload[K.idx[L]]):B=F.map(L=>A.payload[L]),B.sort((L,V)=>(L.value===m.To?-1:0)-(V.value===m.To?-1:0)))}if(x.highlightIndex=0,R!==""){let U=B.findIndex(F=>F.value!==m.To);(U===-1||B[U].value!==R)&&(B.unshift({selected:!1,text:"> "+R,value:R}),x.highlightIndex=U===-1?0:U+1)}return x.options=B,o(x,h,d)},updateOptionsFromSearch:(x,A)=>(x.options=A.payload,x.highlightIndex=0,o(x,h,d)),cleanPickerState:()=>i}}),{toggleOption:g,showOptions:b,hideOptions:P,moveOptionsHighlight:C,toggleAllOptions:D,updateSearchQuery:T,updateOptionsAndFilter:M,updateOptionsFromSearch:O,cleanPickerState:S}=v.actions,p=v.reducer},86886:(Y,I,e)=>{"use strict";e.d(I,{C:()=>t});const t=(s,o)=>s&&(o&&!Array.isArray(s.value)?{...s,value:r(s.value),text:r(s.text)}:!o&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,r=s=>Array.isArray(s)?s:[s]},72401:(Y,I,e)=>{"use strict";e.d(I,{Y7:()=>je,TI:()=>me,_q:()=>Ne,RK:()=>ke,t9:()=>be,x7:()=>oe,Hn:()=>We,mZ:()=>at,kl:()=>ue,us:()=>re});var t=e(2543),n=e(12470),r=e(92041),s=e(39070),o=e(22391),m=e(12131),l=e(32264),i=e(82467),c=e(16233),u=e(74856),f=e(99140),d=e(3169),E=e(10096),h=e(27677),y=e(34525),a=e(31193),v=e(23989),g=e(20601),b=e(13344),P=e(3843),C=e(24240),D=e(12846),T=e(24300),M=e(86886),O=e(80484),S=e(75096),p=e(73134),x=e(28601),A=e(48594),R=e(84014);const B=(Ee,se=-1,ae=!1,fe=!1)=>{const Ce={};if(fe){const Re={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"A dashboard title",uid:"An dashboard UID",toString:()=>"A dashboard title"}}},Oe={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"An org name",id:1,toString:()=>"1"}}},ze={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:"admin",id:1,email:"admin@test",toString:()=>"1"}}};Ce[Re.id]=Re,Ce[Oe.id]=Oe,Ce[ze.id]=ze}for(let Re=0;Re<Ee;Re++)Ce[Re]=createQueryVariable({id:Re.toString(),name:`Name-${Re}`,label:`Label-${Re}`,index:Re});return ae&&(Ce[NEW_VARIABLE_ID]=createQueryVariable({id:NEW_VARIABLE_ID,name:`Name-${NEW_VARIABLE_ID}`,label:`Label-${NEW_VARIABLE_ID}`,index:Ee})),Ce},U=(Ee,se={})=>{const ae={id:"0",rootStateKey:"key",index:0,name:"0"};return{initialState:{0:{...{...Ee.initialState,...ae},...se}}}},F=()=>combineReducers({dashboard:dashboardReducer,templating:keyedVariablesReducer}),K=()=>combineReducers({templating:keyedVariablesReducer});function w(Ee,se){return{templating:{lastKey:Ee,keys:{[Ee]:{...getInitialTemplatingState(),...se}}}}}function L(Ee,se){return Ee.find(fe=>fe.name===se)}function V(Ee){return(Ee.type==="query"||Ee.type==="datasource"||Ee.type==="interval")&&Ee.refresh===p.CO.onTimeRangeChanged}var N=e(87421),z=e(56968),J=e(85675),G=e(15120);const H=(Ee,se)=>(ae,fe)=>{let Ce=0;const Re=se.templating.list;for(let ze=0;ze<Re.length;ze++){const Xe=q(Re[ze]);Xe.rootStateKey=Ee,g.B.getIfExists(Xe.type)&&ae((0,A.kb)(Ee,(0,z.QV)((0,S.qD)(Xe,{global:!1,index:Ce++,model:Xe}))))}(0,v.w)().updateTimeRange((0,u.jG)().timeRange());const Oe=(0,N.SS)(Ee,fe());for(const ze of Oe)ae((0,A.kb)(Ee,(0,z.wB)((0,S.qD)(ze))))};function q(Ee){if(!(0,C.SP)(Ee))return Ee;let se=!1;for(const ae of Ee.options)if(ae.selected=!1,Array.isArray(Ee.current.value))for(const fe of Ee.current.value)ae.value===fe&&(ae.selected=se=!0);else ae.value===Ee.current.value&&(ae.selected=se=!0);return!se&&Ee.options.length&&(Ee.options[0].selected=!0),Ee}const le=(Ee,se)=>ae=>{const fe={...O.Vg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:n.zL.hideVariable,current:{value:{name:se.title,uid:se.uid,toString:()=>se.title}}};ae((0,A.kb)(Ee,(0,z.QV)((0,S.qD)(fe,{global:fe.global,index:fe.index,model:fe}))));const Ce={...O.Vg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:n.zL.hideVariable,current:{value:{name:c.TP.user.orgName,id:c.TP.user.orgId,toString:()=>c.TP.user.orgId.toString()}}};ae((0,A.kb)(Ee,(0,z.QV)((0,S.qD)(Ce,{global:Ce.global,index:Ce.index,model:Ce}))));const Re={...O.Vg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:n.zL.hideVariable,current:{value:{login:c.TP.user.login,id:c.TP.user.id,email:c.TP.user.email,toString:()=>c.TP.user.id.toString()}}};ae((0,A.kb)(Ee,(0,z.QV)((0,S.qD)(Re,{global:Re.global,index:Re.index,model:Re}))))},me=(Ee,se)=>(ae,fe)=>{const{rootStateKey:Ce}=Ee,Re=(0,N.dn)(Ee,fe());if(!(0,C.iv)(Re)||(0,r.R)(Re.current))return;const Oe=(0,M.C)(Re.current,se);ae((0,A.kb)(Ce,(0,z.QP)((0,S.qD)(Ee,{propName:"multi",propValue:se})))),ae((0,A.kb)(Ce,(0,z.QP)((0,S.qD)(Ee,{propName:"current",propValue:Oe}))))},k=async(Ee,se)=>{if(!Ee.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Ee.id}`);if(ee(Ee,se))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const ae=X(Ee,se);j(Ee.rootStateKey,ae,se)&&await new Promise(fe=>{const Ce=f.M_.subscribe(()=>{if(!Ee.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Ee.id}`);j(Ee.rootStateKey,ae,f.M_.getState())||(Ce(),fe())})})},ee=(Ee,se,ae=new Set)=>ae.has(Ee.id)?!0:(ae=new Set([...ae,Ee.id]),X(Ee,se).some(fe=>ee(fe,se,ae))),X=(Ee,se)=>{if(!Ee.rootStateKey)return[];const ae=[];for(const fe of(0,N.SS)(Ee.rootStateKey,se))Ee!==fe&&g.B.getIfExists(Ee.type)&&g.B.get(Ee.type).dependsOn(Ee,fe)&&ae.push(fe);return ae},j=(Ee,se,ae)=>{if(se.length===0)return!1;const fe=(0,N.SS)(Ee,ae);return se.filter(Re=>fe.some(Oe=>Oe.id===Re.id&&(Oe.state===s.Gu.NotStarted||Oe.state===s.Gu.Loading))).length>0},ne=(Ee,se)=>async(ae,fe)=>{const Ce=(0,N.dn)(Ee,fe());await k(Ce,fe());const Re=se[b.qz+Ce.name];if(Re!==void 0){const Oe=(0,S.QT)(Re);await g.B.get(Ce.type).setValueFromUrl(Ce,Oe);return}if(Ce.hasOwnProperty("refresh")){const Oe=Ce;if(Oe.refresh===n.CO.onDashboardLoad||Oe.refresh===n.CO.onTimeRangeChanged){await ae(at((0,S.jX)(Oe)));return}}if(Ce.type==="custom"){await ae(at((0,S.jX)(Ce)));return}ae($e(Ee))},te=Ee=>async(se,ae)=>{const fe=m.Ny.getSearchObject(),Ce=(0,N.SS)(Ee,ae()).map(async Re=>await se(ne((0,S.jX)(Re),fe)));await Promise.all(Ce)},oe=(Ee,se)=>async(ae,fe)=>{const Ce=(0,S.QT)(se),Re=(0,N.dn)(Ee,fe());(0,S.q$)(Re)!==n.CO.never&&await ae(at((0,S.jX)(Re)));const Oe=(0,N.dn)((0,S.jX)(Re),fe());if(!(0,C.SP)(Oe))return;if(!Oe)throw new Error(`Couldn't find variable with name: ${Re.name}`);let ze=Oe.options.find(Xe=>Xe.text===Ce||Xe.value===Ce);if(!ze&&(0,C.iv)(Oe)&&Oe.allValue&&Ce===Oe.allValue&&(ze={text:b.Zm,value:b.To,selected:!1}),!ze){let Xe=Ce;const Ze=Ce;Array.isArray(Ce)&&(Xe=Ce.reduce((et,nt)=>{const lt=Oe.options.find(rt=>rt.value===nt);return lt?[].concat(et,[lt.text]):[].concat(et,[nt])},[])),ze={text:Xe,value:Ze,selected:!1}}(0,C.iv)(Oe)&&(ze=(0,M.C)({text:(0,t.castArray)(ze.text),value:(0,t.castArray)(ze.value),selected:!1},Oe.multi)),await g.B.get(Re.type).setValue(Oe,ze)},ie=Ee=>{let se,ae,fe,Ce;const Re=[];for(se=0;se<Ee.options.length;se++)if(Ce={...Ee.options[se]},Ce.selected=!1,Array.isArray(Ee.current.value))for(ae=0;ae<Ee.current.value.length;ae++)fe=Ee.current.value[ae],Ce.value===fe&&(Ce.selected=!0,Re.push(Ce));else Ce.value===Ee.current.value&&(Ce.selected=!0,Re.push(Ce));return Re},ue=(Ee,se)=>(ae,fe)=>{const Ce=(0,N.dn)(Ee,fe());if(!(0,C.SP)(Ce))return Promise.resolve();const Re=Ce.current||{},Oe=g.B.get(Ce.type).setValue;if(Array.isArray(Re.value)){const et=ie(Ce);if(et.length===0){const lt=Ce.options[0];return Oe(Ce,{value:typeof lt.value=="string"?[lt.value]:lt.value,text:typeof lt.text=="string"?[lt.text]:lt.text,selected:!0})}const nt={value:et.map(lt=>lt.value),text:et.map(lt=>lt.text),selected:!0};return Oe(Ce,nt)}let ze=null;const Xe=(0,S.Nz)(Ce),Ze=(0,S.Lz)(Ce);if(ze=Ce.options?.find(et=>et.text===Xe||et.value===Ze),ze||se&&(ze=Ce.options?.find(et=>et.text===se||et.value===se),ze))return Oe(Ce,ze);if(Ce.options){const et=Ce.options[0];if(et)return Oe(Ce,et)}return Promise.resolve()},be=(Ee,se,ae)=>async fe=>{const{rootStateKey:Ce}=Ee;return fe((0,A.kb)(Ce,(0,z.dE)((0,S.qD)(Ee,{option:se})))),await fe(re(Ee,ae))},ge=Ee=>{const se=new y.TS;return Ee.forEach(ae=>{se.createNode(ae.name)}),Ee.forEach(ae=>{Ee.forEach(fe=>{ae!==fe&&g.B.get(ae.type).dependsOn(ae,fe)&&se.link(ae.name,fe.name)})}),se},re=(Ee,se,ae=E.lE)=>async(fe,Ce)=>{const Re=Ce(),{rootStateKey:Oe}=Ee,ze=(0,N.dn)(Ee,Re);if((0,N.nx)(Oe,Re).transaction.status===O.x8.Fetching)return(0,S.q$)(ze)===n.CO.never&&(await fe(xe((0,S.jX)(ze))),fe($e(Ee))),Promise.resolve();const Xe=(0,N.SS)(Oe,Re),Ze=ge(Xe),et=Re.dashboard?.getModel()?.panels??[],nt=(0,D.P5)(et),lt=ze.type==="adhoc"?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,D.xU)([ze.id],Ze,nt)),variable:(0,N.dn)(Ee,Re)},rt=Ze.getNode(ze.name);let ut=[];return rt&&(ut=rt.getOptimizedInputEdges().map(Et=>{const Ct=Xe.find(Ut=>Ut.name===Et.inputNode?.name);return Ct?fe(at((0,S.jX)(Ct))):Promise.resolve()})),Promise.all(ut).then(()=>{se&&(ae.publish(new O.og(lt)),m.Ny.partial(pe(Oe,Ce)))})},ye=(Ee,se,ae,fe)=>(se.includes(Ee.name)||se.push(Ee.name),Ee.outputEdges.forEach(Ce=>{const Re=Ce.outputNode;if(Re&&!se.includes(Re.name)){const Oe=ae.find(ze=>ze.name===Re.name);Oe&&Oe.refresh===n.CO.onTimeRangeChanged&&fe.indexOf(Oe)===-1?(fe.push(Oe),se.push(Re.name)):ye(Re,se,ae,fe)}}),fe),Be=(Ee,se)=>Ee.outputEdges.every(ae=>{const fe=ae.outputNode;if(fe){const Ce=L(se,fe.name);if(Ce&&Ce.type==="query")return Ce.refresh!==n.CO.onTimeRangeChanged}return!0}),ve=(Ee,se)=>{const ae=(0,N.SS)(Ee,se),fe=ge(ae),Ce=[],Re=[];return ae.forEach(Oe=>{const ze=fe.getNode(Oe.name);if(!Ce.includes(Oe.name)&&ze){const Xe=L(ae,ze.name);if(!Xe)return;const Ze=V(Xe);Ze&&ze.outputEdges.length===0&&Re.push(Xe),Ze&&Re.includes(Xe)&&ze.outputEdges.length>0&&(Re.push(Xe),ye(ze,Ce,ae,Re)),Ze&&ze.outputEdges.length>0&&Be(ze,ae)&&(Re.includes(Xe)||Re.push(Xe)),!Ze&&ze.outputEdges.length>0&&ye(ze,Ce,ae,Re)}}),Re},Me=(Ee,se)=>(0,N.SS)(Ee,se).filter(Ce=>"refresh"in Ce&&"options"in Ce?Ce.refresh===n.CO.onTimeRangeChanged:!1),ke=(Ee,se,ae={templateSrv:(0,v.w)(),events:E.lE})=>async(fe,Ce)=>{ae.templateSrv.updateTimeRange(se);let Re=[];l.$.featureToggles.refactorVariablesTimeRange?Re=ve(Ee,Ce()):Re=Me(Ee,Ce());const Oe=Re.map(Xe=>Xe.id),ze=Re.map(Xe=>fe(Se((0,S.jX)(Xe))));try{await Promise.all(ze),ae.events.publish(new O.BS({variableIds:Oe}))}catch(Xe){console.error(Xe),fe((0,i.dx)(Ye("Template variable service failed",Xe)))}},Se=Ee=>async(se,ae)=>{const fe=(0,N.dn)(Ee,ae());if(!(0,C.SP)(fe))return;const Ce=fe.options.slice();await se(at((0,S.jX)(fe),!0));const Re=(0,N.dn)(Ee,ae());if(!(0,C.SP)(Re))return;const Oe=Re.options;JSON.stringify(Ce)!==JSON.stringify(Oe)&&ae().dashboard.getModel()?.templateVariableValueUpdated()},We=(Ee,se,ae=E.lE)=>async(fe,Ce)=>{const Re=[],Oe=Ce().dashboard.getModel(),ze=(0,N.SS)(Ee,Ce());for(const lt of ze){const rt=b.qz+lt.name;if(!se.hasOwnProperty(rt)||!De(lt,se[rt].value))continue;let ut=se[rt].value;if(se[rt].removed){const Ct=Oe?.templating.list.find(Ut=>Ut.name===lt.name);Ct&&(0,C.m8)(Ct)&&(ut=Ct.current.value),Ct&&Ct.type==="constant"&&(ut=Ct.query)}const Et=g.B.get(lt.type).setValueFromUrl(lt,ut);Re.push(Et)}const Xe=ze.filter(lt=>{const rt=b.qz+lt.name;return se.hasOwnProperty(rt)&&De(lt,se[rt].value)&&lt.type!=="adhoc"}),Ze=ge(ze),et=(0,D.P5)(Oe?.panels??[]),nt=(0,D.xU)(Xe.map(lt=>lt.id),Ze,et);Re.length&&(await Promise.all(Re),ae.publish(new O.eF({refreshAll:nt.size===0,panelIds:Array.from(nt)})))};function De(Ee,se){const ae=g.B.get(Ee.type).getValueForUrl(Ee);let fe=(0,S.QT)(se);return Array.isArray(ae)&&!Array.isArray(fe)&&(fe=[fe]),!(0,t.isEqual)(ae,fe)}const pe=(Ee,se)=>{const ae=m.Ny.getSearchObject(),fe=Object.keys(ae).filter(Ce=>Ce.indexOf(b.qz)===-1).reduce((Ce,Re)=>(Ce[Re]=ae[Re],Ce),{});for(const Ce of(0,N.SS)(Ee,se())){if(Ce.skipUrlSync)continue;const Re=g.B.get(Ce.type);fe[b.qz+Ce.name]=Re.getValueForUrl(Ce)}return fe},Ne=(Ee,se)=>async(ae,fe)=>{try{const Ce=(0,S.q4)(Ee),Re=fe(),Oe=(0,N.Tk)(Re);Oe&&(0,N.nx)(Oe,Re).transaction.status===O.x8.Fetching&&ae(je(Oe)),ae((0,A.kb)(Ce,(0,J.kH)({uid:Ce}))),ae(le(Ce,se)),ae(H(Ce,se)),ae(Le(Ce)),await ae(te(Ce)),ae((0,A.kb)(Ce,(0,J.$O)({uid:Ce})))}catch(Ce){ae((0,i.dx)(Ye("Templating init failed",Ce))),console.error(Ce)}};function Le(Ee,se=a.tR){return(ae,fe)=>{const Ce=(0,N.SS)(Ee,fe());for(const Re of Ce){if(Re.type!=="adhoc"&&Re.type!=="query")continue;const{datasource:Oe}=Re;if((0,o.fN)(Oe))continue;const ze=se().getInstanceSettings(Oe),Xe=ze?(0,o.p$)(ze):{uid:Oe};ae((0,A.kb)(Ee,(0,z.QP)((0,S.qD)(Re,{propName:"datasource",propValue:Xe}))))}}}const He=Ee=>se=>{se((0,A.kb)(Ee,(0,G.v)())),se((0,A.kb)(Ee,(0,P.y8)())),se((0,A.kb)(Ee,(0,T.jR)())),se((0,A.kb)(Ee,(0,J.pu)()))},je=(Ee,se={getBackendSrv:h.AI})=>ae=>{se.getBackendSrv().cancelAllInFlightRequests(),ae(He(Ee))},at=(Ee,se=!1)=>async(ae,fe)=>{const{rootStateKey:Ce}=Ee;try{if(!(0,S.sN)(Ce,fe()))return;const Re=(0,N.dn)(Ee,fe());ae((0,A.kb)(Ce,(0,z.a7)((0,S.qD)(Re)))),await ae(xe((0,S.jX)(Re))),await g.B.get(Re.type).updateOptions(Re),ae($e(Ee))}catch(Re){if(ae((0,A.kb)(Ce,(0,z.Te)((0,S.qD)(Ee,{error:Re})))),se||(console.error(Re),ae((0,i.dx)(Ye("Error updating options:",Re,Ee)))),se)throw Re}},Ye=(Ee,se,ae)=>(0,d.gi)(`${ae?`Templating [${ae.id}]`:"Templating"}`,se instanceof Error?`${Ee} ${se.message}`:`${Ee}`),$e=Ee=>(se,ae)=>{const{rootStateKey:fe}=Ee;if(!(0,S.sN)(fe,ae()))return;const Ce=(0,N.dn)(Ee,ae());Ce.state!==s.Gu.Done&&se((0,A.kb)(Ee.rootStateKey,(0,z.Pu)((0,S.qD)(Ce))))};function xe(Ee,se=a.tR){return async function(ae,fe){const{id:Ce,rootStateKey:Re}=Ee;if(!(0,S.sN)(Re,fe()))return;const Oe=(0,N.dn)(Ee,fe());if(Oe.type==="query")try{const ze=await se().get(Oe.datasource??"");if((0,C.d5)(ze)||!(0,C.Hf)(ze)||Fe(Oe.query))return;const Xe={refId:`${ze.name}-${Ce}-Variable-Query`,query:Oe.query};ae((0,A.kb)(Re,(0,z.QP)((0,S.qD)(Ee,{propName:"query",propValue:Xe}))))}catch(ze){ae((0,i.dx)(Ye("Failed to upgrade legacy queries",ze))),console.error(ze)}}}function Fe(Ee){return(0,s.Gv)(Ee)&&"refId"in Ee&&typeof Ee.refId=="string"}},48594:(Y,I,e)=>{"use strict";e.d(I,{Ay:()=>c,L1:()=>s,kb:()=>m});var t=e(75096),n=e(84014),r=e(85675);const s={keys:{}},o=u=>({type:`templating/keyed/${u.action.type.replace(/^templating\//,"")}`,payload:u});function m(u,f){const d=(0,t.q4)(u);return o({key:d,action:f})}const l=u=>typeof u.type=="string"&&u.type.startsWith("templating/keyed")&&"payload"in u&&typeof u.payload.key=="string";function i(u=s,f){if(l(f)){const{key:d,action:E}=f.payload,h=(0,t.q4)(d),y=r.kH.match(E)?h:u.lastKey,a=(0,n.H)(),v=u.keys[h],g=a(v,E);return{...u,lastKey:y,keys:{...u.keys,[h]:g}}}return u}const c={templating:i}},84014:(Y,I,e)=>{"use strict";e.d(I,{H:()=>c,x:()=>u});var t=e(23546),n=e(3843),r=e(27238),s=e(24300),o=e(85675),m=e(83370),l=e(15120);let i;function c(){return i||(i=(0,t.combineReducers)({editor:n.wf,variables:l.Y,optionsPicker:s.ho,transaction:o.Dd,inspect:r.t4})),i}function u(){return{editor:n.nS,variables:m.j,optionsPicker:s.$z,transaction:o.i3,inspect:r.WT}}},87421:(Y,I,e)=>{"use strict";e.d(I,{Fs:()=>P,SS:()=>i,Tk:()=>y,UN:()=>g,_2:()=>b,bZ:()=>v,dn:()=>o,hk:()=>d,nS:()=>f,nx:()=>l,pi:()=>u,wk:()=>E,y7:()=>a});var t=e(41811),n=e(99140),r=e(75096),s=e(84014);function o(C,D=(0,n.Gu)(),T=!0){const{id:M,rootStateKey:O}=C,p=l(O,D).variables[M];if(!p){if(T)throw new Error(`Couldn't find variable with id:${M}`);return}return p}function m(C,D,T=(0,n.Gu)()){return Object.values(l(D,T).variables).filter(C).sort((M,O)=>M.index-O.index)}function l(C,D=(0,n.Gu)()){return D.templating.keys[(0,r.q4)(C)]??(0,s.x)()}function i(C,D=(0,n.Gu)()){return m(c,C,D)}function c(C){return C.type!=="system"}const u=(0,t.A)((C,D)=>i(C,(0,n.Gu)())),f=(C,D)=>i(C,D);function d(C,D=(0,n.Gu)()){return E(Object.values(l(C,D).variables))}function E(C){const D=C.filter(c).sort((T,M)=>T.index-M.index);return D.length>0?D[D.length-1].index+1:0}function h(C,D=getState()){return l(C,D).transaction.isDirty}function y(C=(0,n.Gu)()){return C.templating?.lastKey}function a(C=(0,n.Gu)()){if(!C.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return C.templating.lastKey}function v(C,D=(0,n.Gu)()){const T=y(D);return T?m(C,T,D):[]}function g(C=(0,n.Gu)()){const D=y(C);return D?i(D,C):[]}function b(C,D=(0,n.Gu)()){const T=y(D);if(T)return o({id:C,rootStateKey:T,type:"query"},D,!1)}function P(C,D){return C[D]}},56968:(Y,I,e)=>{"use strict";e.d(I,{Hr:()=>E,Pu:()=>D,QP:()=>y,QV:()=>h,Te:()=>T,a7:()=>C,dE:()=>g,hj:()=>a,l_:()=>b,qi:()=>d,ut:()=>v,wB:()=>P});var t=e(30038),n=e(2543),r=e.n(n),s=e(39070),o=e(20601),m=e(3843),l=e(24240),i=e(75096),c=e(87421),u=e(83370);const f=(0,t.Z0)({name:"templating/shared",initialState:u.j,reducers:{addVariable:(M,O)=>{const S=O.payload.id??O.payload.data.model.name,p=o.B.get(O.payload.type),x=(0,n.cloneDeep)(p.initialState),A=p.beforeAdding?p.beforeAdding(O.payload.data.model):(0,n.cloneDeep)(O.payload.data.model),R={...(0,n.defaults)({},A,x),id:S,index:O.payload.data.index,global:O.payload.data.global};M[S]=R},variableStateNotStarted:(M,O)=>{const S=(0,c.Fs)(M,O.payload.id);S.state=s.Gu.NotStarted,S.error=null},variableStateFetching:(M,O)=>{const S=(0,c.Fs)(M,O.payload.id);S.state=s.Gu.Loading,S.error=null},variableStateCompleted:(M,O)=>{const S=(0,c.Fs)(M,O.payload.id);S&&(S.state=s.Gu.Done,S.error=null)},variableStateFailed:(M,O)=>{const S=(0,c.Fs)(M,O.payload.id);S&&(S.state=s.Gu.Error,S.error=O.payload.data.error)},removeVariable:(M,O)=>{if(delete M[O.payload.id],!O.payload.data.reIndex)return;const S=Object.values(M).sort((p,x)=>p.index-x.index);for(let p=0;p<S.length;p++)S[p].index=p},duplicateVariable:(M,O)=>{function S(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const p=(0,n.cloneDeep)(M[O.payload.id]),x=new RegExp(`^copy_of_${S(p.name)}(_(\\d+))?$`),A=Object.values(M).map(({name:w})=>w.match(x)).filter(w=>w!=null),R=A.map(w=>w[2]).filter(w=>w!=null),B=A.length===0?null:R.length===0?1:R.map(w=>+w).sort((w,L)=>L-w)[0]+1,U=`copy_of_${p.name}${B?`_${B}`:""}`,F=O.payload.data?.newId??U,K=(0,c.wk)(Object.values(M));M[F]={...(0,n.cloneDeep)(o.B.get(O.payload.type).initialState),...p,id:F,name:U,index:K}},changeVariableOrder:(M,O)=>{const{toIndex:S,fromIndex:p}=O.payload.data,x=Object.values(M);for(let A=0;A<x.length;A++){const R=x[A];R.index===p?R.index=S:R.index>p&&R.index<=S?R.index--:R.index<p&&R.index>=S&&R.index++}},changeVariableType:(M,O)=>{const{id:S}=O.payload,{label:p,name:x,index:A,description:R,rootStateKey:B}=M[S];M[S]={...(0,n.cloneDeep)(o.B.get(O.payload.data.newType).initialState),id:S,rootStateKey:B,label:p,name:x,index:A,description:R}},setCurrentVariableValue:(M,O)=>{if(!O.payload.data.option)return;const S=(0,c.Fs)(M,O.payload.id);if(!(0,l.SP)(S))return;const{option:p}=O.payload.data,x={...p,text:(0,i.QT)(p?.text),value:(0,i.QT)(p?.value)};S.current=x,S.options=S.options.map(A=>{A.value=(0,i.QT)(A.value),A.text=(0,i.QT)(A.text);let R=!1;if(Array.isArray(x.value))for(let B=0;B<x.value.length;B++){const U=x.value[B];if(A.value===U){R=!0;break}}else A.value===x.value&&(R=!0);return A.selected=R,A})},changeVariableProp:(M,O)=>{const S=(0,c.Fs)(M,O.payload.id);S[O.payload.data.propName]=O.payload.data.propValue}},extraReducers:M=>M.addCase(m.FN,(O,S)=>{const p=(0,c.Fs)(O,S.payload.id);p.name=S.payload.data.newName})}),d=f.reducer,{removeVariable:E,addVariable:h,changeVariableProp:y,changeVariableOrder:a,duplicateVariable:v,setCurrentVariableValue:g,changeVariableType:b,variableStateNotStarted:P,variableStateFetching:C,variableStateCompleted:D,variableStateFailed:T}=f.actions},85675:(Y,I,e)=>{"use strict";e.d(I,{$O:()=>c,Dd:()=>u,i3:()=>s,kH:()=>l,pu:()=>i});var t=e(30038),n=e(80484),r=e(56968);const s={uid:null,status:n.x8.NotStarted,isDirty:!1},o=(0,t.Z0)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(f,d)=>{f.uid=d.payload.uid,f.status=n.x8.Fetching},variablesCompleteTransaction:(f,d)=>{f.uid===d.payload.uid&&(f.status=n.x8.Completed)},variablesClearTransaction:(f,d)=>{f.uid=null,f.status=n.x8.NotStarted,f.isDirty=!1}},extraReducers:f=>f.addMatcher(m,(d,E)=>{d.status===n.x8.Completed&&(d.isDirty=!0)})});function m(f){return r.Hr.match(f)||r.QV.match(f)||r.QP.match(f)||r.hj.match(f)||r.ut.match(f)||r.l_.match(f)}const{variablesInitTransaction:l,variablesClearTransaction:i,variablesCompleteTransaction:c}=o.actions,u=o.reducer},83370:(Y,I,e)=>{"use strict";e.d(I,{j:()=>t});const t={}},15120:(Y,I,e)=>{"use strict";e.d(I,{Y:()=>m,v:()=>o});var t=e(30038),n=e(20601),r=e(56968),s=e(83370);const o=(0,t.VP)("templating/cleanVariables"),m=(l=s.j,i)=>{if(o.match(i)){const c=Object.values(l).filter(f=>f.global);return c?c.reduce((f,d)=>(f[d.id]=d,f),{}):s.j}return i?.payload?.type&&n.B.getIfExists(i?.payload?.type)?n.B.get(i.payload.type).reducer((0,r.qi)(l,i),i):l}},80484:(Y,I,e)=>{"use strict";e.d(I,{BS:()=>i,CO:()=>t.CO,Vg:()=>m,ZG:()=>t.ZG,eF:()=>c,og:()=>l,x8:()=>o,zL:()=>t.zL});var t=e(12470),n=e(39070),r=e(65463),s=e(13344),o=(u=>(u.NotStarted="Not started",u.Fetching="Fetching",u.Completed="Completed",u))(o||{});const m={id:s.qF,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.zL.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class l extends r.x{static{this.type="variables-changed"}}class i extends r.x{static{this.type="variables-time-range-process-done"}}class c extends r.x{static{this.type="variables-changed-in-url"}}},75096:(Y,I,e)=>{"use strict";e.d(I,{AX:()=>P,Lz:()=>a,ML:()=>h,Nz:()=>y,QT:()=>T,SY:()=>f,Wz:()=>D,iP:()=>g,jX:()=>S,q$:()=>b,q4:()=>O,qD:()=>p,sN:()=>M,t4:()=>d,u7:()=>v,wJ:()=>E});var t=e(2543),n=e.n(t),r=e(12470),s=e(72574),o=e(87490),m=e(99140),l=e(20601),i=e(13344),c=e(87421),u=e(80484);const f=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,d=A=>(f.lastIndex=0,f.exec(A));function E(...A){const R=A[A.length-1];A[0]=typeof A[0]=="string"?A[0]:(0,o.MA)(A[0]);const U=A.slice(0,-1).join(" ").match(f);return!!(U!==null?U.find(K=>{const w=d(K);return w!==null&&w.indexOf(R)>-1}):!1)}const h=A=>{if(!A||!A.current)return!1;if(A.current.value){const R=Array.isArray(A.current.value);if(R&&A.current.value.length&&A.current.value[0]===i.To||!R&&A.current.value===i.To)return!0}if(A.current.text){const R=Array.isArray(A.current.text);if(R&&A.current.text.length&&A.current.text[0]===i.Zm||!R&&A.current.text===i.Zm)return!0}return!1},y=A=>!A||!A.current||!A.current.text?"":Array.isArray(A.current.text)?A.current.text.toString():typeof A.current.text!="string"?"":A.current.text,a=A=>!A||!A.current||A.current.value===void 0||A.current.value===null?null:Array.isArray(A.current.value)?A.current.value.toString():typeof A.current.value!="string"?null:A.current.value;function v(A,R=(0,s.w)()){return!A||!A.regex?"":R.replace(A.regex,{},"regex")}function g(A,R,B,U){const F={range:void 0,variable:A,searchFilter:R,scopedVars:U};return(A.refresh===r.CO.onTimeRangeChanged||A.refresh===r.CO.onDashboardLoad)&&(F.range=B.timeRange()),F}function b(A){return A?.type==="custom"?r.CO.onDashboardLoad:!A||!("refresh"in A)||A.refresh!==r.CO.onTimeRangeChanged&&A.refresh!==r.CO.onDashboardLoad?r.CO.never:A.refresh}function P(){return l.B.list().filter(A=>A.id!=="system").map(({id:A,name:R,description:B})=>({label:R,value:A,description:B}))}function C(A){return(0,t.isArray)(A)&&(A.length===0?A=void 0:A.length===1&&(A=A[0])),A}function D(A,R){let B=0;const U={};for(const F in A){if(!F.startsWith(i.qz))continue;let K=C(R[F]),w=C(A[F]);(0,t.isEqual)(w,K)||(U[F]={value:A[F]},B++)}for(const F in R){if(!F.startsWith(i.qz))continue;const K=R[F];(0,t.isArray)(K)&&K.length===0||A.hasOwnProperty(F)||(U[F]={value:"",removed:!0},B++)}return B?U:void 0}function T(A){return Array.isArray(A)?A.map(String):A==null?"":typeof A=="number"?A.toString(10):typeof A=="string"?A:typeof A=="boolean"?A.toString():""}function M(A,R=(0,m.Gu)()){return(0,c.nx)(A,R).transaction.status!==u.x8.NotStarted}function O(A){return String(A)}const S=A=>{if(!A.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${A.id}`);return{type:A.type,id:A.id,rootStateKey:A.rootStateKey}};function p(A,R){return{type:A.type,id:A.id,data:R}}function x(){const A=getTemplateSrv().getVariables(),R=locationService.getSearchObject();return Object.keys(R).filter(B=>B.indexOf(VARIABLE_PREFIX)!==-1&&A.some(U=>U.name===B.replace(VARIABLE_PREFIX,""))).reduce((B,U)=>{const F=U.replace(VARIABLE_PREFIX,"");return B[F]=R[U],B},{})}},1819:(Y,I,e)=>{"use strict";e.d(I,{e:()=>E});var t=e(32196),n=e(96540),r=e(28240),s=e(83195),o=e(14588),m=e(32264),l=e(52622),i=e(40845),c=e(72109),u=e(61994),f=e(74007);function d(y,a,v,g,b){const P=y.fields,C=v!=null?P[v]:null,D=P.filter(x=>!x.config.custom?.hideFrom?.tooltip),T=D.find(x=>x.name==="traceID")||P[0],M=[];if(D.filter(x=>T===x).length>0&&M.push(T),M.push(...D.filter(x=>T!==x)),M.length===0)return null;const O=[],S=[],p=new Set;for(const x of M){if(b===l.$N.Single&&x!==C)continue;const A=x.values[a],R=x.display?x.display(A):{text:`${A}`,numeric:+A};x.getLinks&&x.getLinks({calculatedValue:R,valueRowIndex:a}).forEach(B=>{const U=`${B.title}/${B.href}`;p.has(U)||(S.push(B),p.add(U))}),O.push({name:(0,r.Ct)(x,y),value:A,valueString:(0,s.cN)(R),highlight:x===C})}return g&&g!==l.xB.None&&O.sort((x,A)=>o.sortValues(g)(x.value,A.value)),{displayValues:O,links:S}}const E=({data:y,rowIndex:a,columnIndex:v,sortOrder:g,mode:b,header:P,padding:C=0})=>{const D=(0,i.of)(h,C);if(!y||a==null)return null;const T=d(y,a,v,g,b);if(T==null)return null;const{displayValues:M,links:O}=T;return m.$.featureToggles.newVizTooltips&&P==="Exemplar"?n.createElement(f.i,{displayValues:M,links:O,header:P}):n.createElement("div",{className:D.wrapper},P&&n.createElement("div",{className:D.header},n.createElement("span",{className:D.title},P)),n.createElement("table",{className:D.infoWrap},n.createElement("tbody",null,M.map((S,p)=>n.createElement("tr",{key:`${p}/${a}`},n.createElement("th",null,S.name),n.createElement("td",null,(0,u.A)(S.valueString)))),O.map((S,p)=>n.createElement("tr",{key:p},n.createElement("th",null,"Link"),n.createElement("td",{colSpan:2},n.createElement(c.Y,{href:S.href,external:S.target==="_blank",weight:"medium",inline:!1},S.title)))))))},h=(y,a=0)=>({wrapper:(0,t.css)({padding:`${a}px`,background:y.components.tooltip.background,borderRadius:y.shape.borderRadius(2)}),header:(0,t.css)({background:y.colors.background.secondary,alignItems:"center",alignContent:"center",display:"flex",paddingBottom:y.spacing(1)}),title:(0,t.css)({fontWeight:y.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),infoWrap:(0,t.css)({padding:y.spacing(1),background:"transparent",border:"none",th:{fontWeight:y.typography.fontWeightMedium,padding:y.spacing(.25,2,.25,0)},tr:{borderBottom:`1px solid ${y.colors.border.weak}`,"&:last-child":{borderBottom:"none"}}}),link:(0,t.css)({color:y.colors.text.link})})},74007:(Y,I,e)=>{"use strict";e.d(I,{i:()=>l});var t=e(32196),n=e(96540),r=e(40845),s=e(14689),o=e(13471),m=e(61994);const l=({displayValues:c,links:u,header:f="Exemplar"})=>{const d=(0,r.of)(i),E=c.find(h=>h.name==="Time");return c=c.filter(h=>h.name!=="Time"),n.createElement("div",{className:d.exemplarWrapper},n.createElement("div",{className:d.exemplarHeader},n.createElement("span",{className:d.title},f),E&&n.createElement("span",{className:d.time},(0,m.A)(E.valueString))),n.createElement("div",{className:d.exemplarContent},c.map((h,y)=>n.createElement(o.B,{key:y,label:h.name,value:(0,m.A)(h.valueString),justify:"space-between",isPinned:!1}))),u&&u.length>0&&n.createElement("div",{className:d.exemplarFooter},u.map((h,y)=>n.createElement(s.R,{link:h,key:y,buttonProps:{size:"md"}}))))},i=(c,u=0)=>({exemplarWrapper:(0,t.css)({display:"flex",flexDirection:"column",flex:1,gap:4,whiteSpace:"pre",borderRadius:c.shape.radius.default,background:c.colors.background.primary,border:`1px solid ${c.colors.border.weak}`,boxShadow:`0 4px 8px ${c.colors.background.primary}`}),exemplarHeader:(0,t.css)({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:c.spacing(.5),color:c.colors.text.secondary,padding:c.spacing(1)}),time:(0,t.css)({color:c.colors.text.primary}),exemplarContent:(0,t.css)({display:"flex",flexDirection:"column",flex:1,gap:4,borderTop:`1px solid ${c.colors.border.medium}`,padding:c.spacing(1)}),exemplarFooter:(0,t.css)({display:"flex",flexDirection:"column",flex:1,borderTop:`1px solid ${c.colors.border.medium}`,padding:c.spacing(1),overflowX:"auto",overflowY:"hidden",whiteSpace:"nowrap"}),linkButton:(0,t.css)({width:"fit-content"}),label:(0,t.css)({color:c.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:c.spacing(.5)}),value:(0,t.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),title:(0,t.css)({fontWeight:c.typography.fontWeightMedium,overflow:"hidden",display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1})})},98958:(Y,I,e)=>{"use strict";var t=e(6262),n=e(9423),r=e(7452),s=e(78624),o=e(4213),m=e(34796),l=e(13609),i=e(31193),c=e(17493),u=e(14792),f=e(15858),d=e(16495),E=e(16561),h=e(2543),y=e.n(h),a=e(96540),v=e(5338),g=e(47232),b=e(1933),P=e(69550),C=e(97497),D=e(96915),T=e(71733),M=e(17172),O=e(23509),S=e(12131),p=e(96937),x=e(3591),A=e(63639),R=e(89191),B=e(19347),U=e(4402),F=e(14778),K=e(63415),w=e(97152),L=e(24308),V=e(46235),N=e(5260),z=e(2913),J=e(94041),G=e(32264),H=e(11261),q=e(85200),le=e(1173),me=e(28240),k=e(18282),ee=e(57934),X=e(73376),j=e(14186),ne=e(94354),te=e(90613),oe=e(55852),ie=e(91847);function ue(W){if(W in ie.uk){const{name:_,getHelperDocs:Z,links:de}=ie.uk[W],Pe=Z(ie.g_.UIImage),Ie=be(Pe);if(de?.length){const Ve=de.map(Je=>`
  Or visit <a href="${Je.url}" target="_blank">${Je.title}</a>

  `).join("");return{name:_,helperDocs:`
        ${Ie}
        ${(0,ie.$n)()}
  ${Ve}
        `}}return{name:_,helperDocs:`
      ${Ie}
      ${(0,ie.$n)()}
      `}}return{name:"No documentation found",helperDocs:(0,ie.$n)()}}const be=W=>W.replace(/\[(.*?)\]\(#.*?\)/g,"$1").replace(/\[[^\]]*\]\[\]/g,"");var ge=e(39268),re=e(88323),ye=e(83077),Be=e(91890),ve=e(72574),Me=e(10354),ke=e(88841),Se=e(94397);function We(W,_){switch(_.type){case H.PU.boolean:return(0,h.isUndefined)(W)?!1:De(W);case H.PU.number:return isNaN(W)?0:parseFloat(W);case H.PU.string:return W?String(W):"";default:return W}}const De=W=>(0,h.isString)(W)?!(W[0]==="F"||W[0]==="f"||W[0]==="0"):!!W;function pe(W){return function({options:Z,onChange:de,field:Pe}){const{validator:Ie,converter:Ve=We}=W,{value:Je}=Z,[qe,dt]=(0,a.useState)(!Ie(Je)),Pt=(0,ve.w)().getVariables().map(Ft=>({value:Ft.name,label:Ft.label||Ft.name,origin:Be.$0.Template})),$t=(0,a.useCallback)(Ft=>{dt(!Ie(Ft.currentTarget.value))},[dt,Ie]),Lt=(0,a.useCallback)(Ft=>{if(qe)return;const{value:bn}=Ft.currentTarget;de({...Z,value:Ve(bn,Pe)})},[Z,de,qe,Pe,Ve]),Ot=(0,a.useCallback)(Ft=>{dt(!Ie(Ft)),de({...Z,value:Ft})},[dt,Ie,de,Z]);return G.$.featureToggles.transformationsVariableSupport?a.createElement(ke.y,{invalid:qe,value:Je,error:"Value needs to be an integer or a variable",onChange:Ot,placeholder:"Value or variable",suggestions:Pt}):a.createElement(Me.p,{className:"flex-grow-1",invalid:qe,defaultValue:String(Z.value),placeholder:"Value",onChange:$t,onBlur:Lt})}}const Ne=()=>[{name:"Is greater",id:le.Js.greater,component:pe({validator:Se.N_})},{name:"Is greater or equal",id:le.Js.greaterOrEqual,component:pe({validator:Se.N_})},{name:"Is lower",id:le.Js.lower,component:pe({validator:Se.N_})},{name:"Is lower or equal",id:le.Js.lowerOrEqual,component:pe({validator:Se.N_})},{name:"Is equal",id:le.Js.equal,component:pe({validator:()=>!0})},{name:"Is not equal",id:le.Js.notEqual,component:pe({validator:()=>!0})},{name:"Is Substring",id:le.Js.substring,component:pe({validator:()=>!0})},{name:"Is not substring",id:le.Js.notSubstring,component:pe({validator:()=>!0})}],Le=()=>null,He=()=>[{name:"Is null",id:le.Js.isNull,component:Le},{name:"Is not null",id:le.Js.isNotNull,component:Le}];function je(W){return function({options:Z,onChange:de,field:Pe}){const{validator:Ie}=W,[Ve,Je]=(0,a.useState)({from:!Ie(Z.from),to:!Ie(Z.to)}),dt=(0,ve.w)().getVariables().map(Lt=>({value:Lt.name,label:Lt.label||Lt.name,origin:Be.$0.Template})),Dt=(0,a.useCallback)((Lt,Ot)=>{Je({...Ve,[Ot]:!Ie(Lt.currentTarget.value)})},[Je,Ie,Ve]),Pt=(0,a.useCallback)((Lt,Ot)=>{if(Ve[Ot])return;const{value:Ft}=Lt.currentTarget;de({...Z,[Ot]:We(Ft,Pe)})},[Z,de,Ve,Pe]),$t=(0,a.useCallback)((Lt,Ot)=>{const Ft=!Ie(Lt);Je({...Ve,[Ot]:Ft}),!Ft&&de({...Z,[Ot]:Lt})},[Z,de,Ve,Je,Ie]);return G.$.featureToggles.transformationsVariableSupport?a.createElement(a.Fragment,null,a.createElement(ke.y,{value:String(Z.from),invalid:Ve.from,error:"Value needs to be an integer or a variable",placeholder:"From",onChange:Lt=>$t(Lt,"from"),suggestions:dt}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(ke.y,{invalid:Ve.to,error:"Value needs to be an integer or a variable",value:String(Z.to),placeholder:"To",suggestions:dt,onChange:Lt=>$t(Lt,"to")})):a.createElement(a.Fragment,null,a.createElement(Me.p,{className:"flex-grow-1 gf-form-spacing",invalid:Ve.from,defaultValue:String(Z.from),placeholder:"From",onChange:Lt=>Dt(Lt,"from"),onBlur:Lt=>Pt(Lt,"from")}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(Me.p,{className:"flex-grow-1",invalid:Ve.to,defaultValue:String(Z.to),placeholder:"To",onChange:Lt=>Dt(Lt,"to"),onBlur:Lt=>Pt(Lt,"to")}))}}const at=()=>[{name:"Is between",id:le.Js.between,component:je({validator:Se.N_})}];function Ye(W){return function({options:Z,onChange:de,field:Pe}){const{validator:Ie,converter:Ve=We}=W,{value:Je}=Z,[qe,dt]=(0,a.useState)(!Ie(Je)),Dt=(0,a.useCallback)($t=>{dt(!Ie($t.currentTarget.value))},[dt,Ie]),Pt=(0,a.useCallback)($t=>{if(qe)return;const{value:Lt}=$t.currentTarget;de({...Z,value:Ve(Lt,Pe)})},[Z,de,qe,Pe,Ve]);return a.createElement(Me.p,{className:"flex-grow-1",invalid:qe,defaultValue:String(Z.value),placeholder:"Value",onChange:Dt,onBlur:Pt})}}const $e=()=>[{name:"Regex",id:le.Js.regex,component:Ye({validator:()=>!0,converter:W=>String(W)})}],xe=new ye.O(()=>[...Ne(),...He(),...at(),...$e()]),Fe=W=>{const{onDelete:_,onChange:Z,filter:de,fieldsInfo:Pe}=W,{fieldsAsOptions:Ie,fieldByDisplayName:Ve}=Pe,Je=ae(de,Ie)??"",qe=Ve[Je],dt=qe?Ee(qe):[],Dt=se(de,dt),Pt=xe.getIfExists(Dt),$t=(0,a.useCallback)(Ft=>{Ft?.value&&Z({...de,fieldName:Ft.value})},[Z,de]),Lt=(0,a.useCallback)(Ft=>{if(!Ft?.value)return;const bn=Ft.value,Ta=q.hI.get(bn).getDefaultOptions(qe);Z({...de,config:{id:bn,options:Ta}})},[Z,de,qe]),Ot=(0,a.useCallback)(Ft=>{Z({...de,config:{...de.config,options:Ft}})},[Z,de]);return!qe||!Pt||!Pt.component?null:a.createElement(ge.C,null,a.createElement(j.I,{label:"Field",labelWidth:14},a.createElement(re.l6,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:Ie,value:de.fieldName,onChange:$t})),a.createElement(j.I,{label:"Match"},a.createElement(re.l6,{className:"width-12",placeholder:"Select test",options:dt,value:Dt,onChange:Lt})),a.createElement(j.I,{label:"Value",grow:!0},a.createElement(Pt.component,{field:qe,options:de.config.options??{},onChange:Ot})),a.createElement(te.a,{marginBottom:.5},a.createElement(oe.$n,{icon:"times",onClick:_,variant:"secondary"})))},Ee=W=>{const _=[];for(const Z of q.hI.list())!Z.isApplicable(W)||!xe.getIfExists(Z.id)||_.push({value:Z.id,label:Z.name,description:Z.description});return _},se=(W,_)=>{const Z=_.find(de=>de.value===W.config.id);if(Z&&Z.value)return Z.value;if(_[0]?.value)return _[0]?.value},ae=(W,_)=>{const Z=_.find(de=>de.value===W.fieldName);if(Z&&Z.value)return Z.value;if(_[0]?.value)return _[0]?.value},fe=[{label:"Include",value:X.j4.include},{label:"Exclude",value:X.j4.exclude}],Ce=[{label:"Match all",value:X.Sm.all},{label:"Match any",value:X.Sm.any}],Re=W=>{const{input:_,options:Z,onChange:de}=W,Pe=ze(_),Ie=(0,a.useCallback)(()=>{const Dt=_[0],Pt=Dt.fields.find(Ot=>Ot.type!==H.PU.time);if(!Pt)return;const $t=(0,h.cloneDeep)(Z.filters),Lt=q.hI.get(le.Js.greater);$t.push({fieldName:(0,me.Ct)(Pt,Dt,_),config:{id:Lt.id,options:Lt.getDefaultOptions(Pt)}}),de({...Z,filters:$t})},[de,Z,_]),Ve=(0,a.useCallback)(Dt=>{let Pt=(0,h.cloneDeep)(Z.filters);Pt.splice(Dt,1),de({...Z,filters:Pt})},[Z,de]),Je=(0,a.useCallback)((Dt,Pt)=>{let $t=(0,h.cloneDeep)(Z.filters);$t[Pt]=Dt,de({...Z,filters:$t})},[Z,de]),qe=(0,a.useCallback)(Dt=>{de({...Z,type:Dt??X.j4.include})},[Z,de]),dt=(0,a.useCallback)(Dt=>{de({...Z,match:Dt??X.Sm.all})},[Z,de]);return a.createElement("div",null,a.createElement(j.I,{label:"Filter type",labelWidth:16},a.createElement("div",{className:"width-15"},a.createElement(ne.z,{options:fe,value:Z.type,onChange:qe,fullWidth:!0}))),a.createElement(j.I,{label:"Conditions",labelWidth:16},a.createElement("div",{className:"width-15"},a.createElement(ne.z,{options:Ce,value:Z.match,onChange:dt,fullWidth:!0}))),a.createElement(te.a,{paddingLeft:2},Z.filters.map((Dt,Pt)=>a.createElement(Fe,{key:Pt,filter:Dt,fieldsInfo:Pe,onChange:$t=>Je($t,Pt),onDelete:()=>Ve(Pt)})),a.createElement(oe.$n,{icon:"plus",size:"sm",onClick:Ie,variant:"secondary"},"Add condition")))},Oe={id:k.F.filterByValue,editor:Re,transformation:ee.c.filterByValueTransformer,name:ee.c.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source.",categories:new Set([C.m.Filter]),help:ue(k.F.filterByValue).helperDocs},ze=W=>(0,a.useMemo)(()=>{const _={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(W)?W.reduce((Z,de)=>de.fields.reduce((Pe,Ie)=>{const Ve=(0,me.Ct)(Ie,de,W);return Pe.fieldByDisplayName[Ve]||(Pe.fieldsAsOptions.push({label:Ve,value:Ve,type:Ie.type}),Pe.fieldByDisplayName[Ve]=Ie),Pe},Z),_):_},[W]);var Xe=e(43429),Ze=e(60264),et=e(48192),nt=e(66211),lt=e(54612);function rt(W,_){const Z={data:W.input,options:W.options},de=new et.C({id:"root",title:"root"}),Pe=Ve=>{if(Ve?.length){const Je=Ve[0];let qe=de.categories.find(dt=>dt.props.id===Je);return qe||(qe=new et.C({id:Je,title:Je}),de.categories.push(qe)),qe}return de},Ie={getValue:Ve=>(0,h.get)(W.options,Ve),onChange:(Ve,Je)=>{W.onChange((0,lt.Sf)(W.options,Ve,Je))}};return(0,nt.g5)(_,Ie,Pe,Z),de}function ut(W){const _={data:[],options:{}},Z={},de=new Ze.pv;W(de,_);for(const Pe of de.getItems())Pe.defaultValue!=null&&(0,h.set)(Z,Pe.path,Pe.defaultValue);return Z}var Et=e(27825),Ct=e(3290);const Ut=(W,_)=>{const Z=_.options??{};(0,Et.J)("",W,Z)},Gt=W=>{(0,a.useEffect)(()=>{if(!W.options.xBuckets?.mode){const Z=ut(Ut);W.onChange({...Z,...W.options})}});const _=rt(W,Ut);return a.createElement("div",null,a.createElement("div",null,_.items.map(Z=>Z.render())))},Wt={id:Ct.wY.id,editor:Gt,transformation:Ct.wY,name:Ct.wY.name,description:Ct.wY.description,state:Xe.pn.alpha,categories:new Set([C.m.CreateNewVisualization]),help:ue(Ct.wY.id).helperDocs};var ot=e(32196),Tt=e(40845),Pn=e(84349),ft=e(75059),Mt=e(42734),_t=e(24293),nn=e(28802),dn=e(50082),en=e(25019);function Xt(W,_,Z){const de={},Pe={};for(const Ie of W.fields){const Ve=(0,me.Ct)(Ie,W),Je=Z.index[Ve],qe=Je.handler;if(!qe)continue;const dt=Ie.values[_];if(dt==null)continue;const Dt=qe.processor(dt,de,Pe,Je.handlerArguments);Dt!=null&&(de[qe.targetProperty??qe.key]=Dt)}return Pe.mappingValues&&(de.mappings=Wn(Pe)),de}var En=(W=>(W.Name="field.name",W.Value="field.value",W.Label="field.label",W.Ignore="__ignore",W))(En||{});const Vn=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:ln},{key:"min",processor:ln},{key:"unit",processor:W=>W.toString()},{key:"decimals",processor:ln},{key:"displayName",name:"Display name",processor:W=>W.toString()},{key:"color",processor:W=>({fixedColor:W,mode:_t.Y.Fixed})},{key:"threshold1",name:"Threshold",targetProperty:"thresholds",processor:(W,_,Z,de)=>{const Pe=(0,nn.t)(W);if(!isNaN(Pe))return _.thresholds||(_.thresholds={mode:dn.O.Absolute,steps:[{value:-1/0,color:"green"}]}),_.thresholds.steps.push({value:Pe,color:de.threshold?.color??"red"}),_.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:ft.gy.allValues,processor:(W,_,Z)=>{if((0,h.isArray)(W))return Z.mappingValues=W,_.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:ft.gy.allValues,processor:(W,_,Z)=>{if((0,h.isArray)(W))return Z.mappingColors=W,_.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:ft.gy.allValues,processor:(W,_,Z)=>{if((0,h.isArray)(W))return Z.mappingTexts=W,_.mappings}}];function Wn(W){const _={type:en.d.ValueToText,options:{}};if(!W.mappingValues)return[];for(let Z=0;Z<W.mappingValues.length;Z++){const de=W.mappingValues[Z];de!=null&&(_.options[de.toString()]={color:W.mappingColors&&W.mappingColors[Z],text:W.mappingTexts&&W.mappingTexts[Z],index:Z})}return[_]}let na=null;function Bt(){if(na===null){na={};for(const W of Vn)na[W.key]=W}return na}function ln(W){const _=(0,nn.t)(W);if(!isNaN(_))return _}function mn(W,_){for(const Z of _)if(W===Z.fieldName)return Z.handlerKey;return W.toLowerCase()}function Dn(W){return W?Bt()[W]:null}function hn(W,_,Z){const de={index:{}};let Pe=_.find(Ve=>Ve.handlerKey==="field.name"),Ie=_.find(Ve=>Ve.handlerKey==="field.value");for(const Ve of W.fields){const Je=(0,me.Ct)(Ve,W),qe=_.find(Pt=>Pt.fieldName===Je),dt=qe?qe.handlerKey:Je.toLowerCase();let Dt=Dn(dt);Z&&(Dt?(Dt.key==="field.name"&&(de.nameField=Ve),Dt.key==="field.value"&&(de.valueField=Ve)):qe||(!de.nameField&&!Pe&&Ve.type===H.PU.string&&(de.nameField=Ve,Dt=Dn("field.name")),!de.valueField&&!Ie&&Ve.type===H.PU.number&&(de.valueField=Ve,Dt=Dn("field.value")))),!Dt&&Z&&(Dt=Dn("field.label")),de.index[Je]={automatic:!qe,handler:Dt,handlerArguments:qe?.handlerArguments??{},reducerId:qe?.reducerId??Dt?.defaultReducer??ft.gy.lastNotNull}}return de}var Fn=e(83598);function wn(W){switch(W){case"threshold1":return!0;default:return!1}}function Hn({handlerArguments:W,handlerKey:_,onChange:Z}){const de=Pe=>{Z(Pe?{...W,threshold:{...W.threshold,color:Pe}}:{...W,threshold:void 0})};return a.createElement(a.Fragment,null,_==="threshold1"&&a.createElement(Me.p,{type:"text",value:"Threshold color","aria-label":"Threshold color",disabled:!0,width:20,prefix:a.createElement(Fn.sk,{color:W.threshold?.color??"red",onChange:de,enableNamedColors:!0})}))}function An({frame:W,mappings:_,onChange:Z,withReducers:de,withNameAndValue:Pe}){const Ie=(0,Tt.of)(Vt),Ve=In(W,_,Pe),Je=Vn.map($t=>kn($t,!1)),qe=_.reduce(($t,Lt)=>$t||wn(Lt.handlerKey),!1),dt=($t,Lt)=>{const Ot=_.findIndex(Ft=>Ft.fieldName===$t.fieldName);if(Lt)if(Ot!==-1){const Ft=[..._];Ft.splice(Ot,1,{..._[Ot],handlerKey:Lt.value}),Z(Ft)}else Z([..._,{fieldName:$t.fieldName,handlerKey:Lt.value}]);else Z(Ot!==-1?_.filter((Ft,bn)=>bn!==Ot):[..._,{fieldName:$t.fieldName,handlerKey:"__ignore"}])},Dt=($t,Lt)=>{const Ot=_.findIndex(Ft=>Ft.fieldName===$t.fieldName);if(Ot!==-1){const Ft=[..._];Ft.splice(Ot,1,{..._[Ot],reducerId:Lt}),Z(Ft)}else Z([..._,{fieldName:$t.fieldName,handlerKey:$t.handlerKey,reducerId:Lt}])},Pt=($t,Lt)=>{const Ot=_.findIndex(Ft=>Ft.fieldName===$t.fieldName);if(Ot!==-1){const Ft=[..._];Ft.splice(Ot,1,{..._[Ot],handlerArguments:Lt}),Z(Ft)}else Z([..._,{fieldName:$t.fieldName,handlerKey:$t.handlerKey,handlerArguments:Lt}])};return a.createElement("table",{className:Ie.table},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Field"),a.createElement("th",null,"Use as"),de&&a.createElement("th",null,"Select"),qe&&a.createElement("th",null,"Additional settings"))),a.createElement("tbody",null,Ve.map($t=>a.createElement("tr",{key:$t.fieldName},a.createElement("td",{className:Ie.labelCell},$t.fieldName),a.createElement("td",{className:Ie.selectCell,"data-testid":`${$t.fieldName}-config-key`},a.createElement(re.l6,{options:Je,value:$t.configOption,placeholder:$t.placeholder,isClearable:!0,onChange:Lt=>dt($t,Lt)})),de&&a.createElement("td",{"data-testid":`${$t.fieldName}-reducer`,className:Ie.selectCell},a.createElement(Mt.S,{stats:[$t.reducerId],defaultStat:$t.reducerId,onChange:Lt=>Dt($t,Lt[0])})),qe&&a.createElement("td",{"data-testid":`${$t.fieldName}-handler-arg`,className:Ie.selectCell},a.createElement(Hn,{handlerKey:$t.handlerKey,handlerArguments:$t.handlerArguments,onChange:Lt=>Pt($t,Lt)}))))))}function In(W,_,Z){const de=[],Pe=hn(W,_??[],Z);for(const Ie of W.fields){const Ve=(0,me.Ct)(Ie,W),Je=Pe.index[Ve],qe=kn(Je.handler,Je.automatic);de.push({fieldName:Ve,configOption:Je.automatic?null:qe,placeholder:Je.automatic?qe?.label:"Choose",handlerKey:Je.handler?.key??null,reducerId:Je.reducerId,handlerArguments:Je.handlerArguments})}for(const Ie of _)if(!de.find(Ve=>Ve.fieldName===Ie.fieldName)){const Ve=Dn(Ie.handlerKey);de.push({fieldName:Ie.fieldName,handlerKey:Ie.handlerKey,configOption:kn(Ve,!1),missingInFrame:!0,reducerId:Ie.reducerId??ft.gy.lastNotNull,handlerArguments:{}})}return Object.values(de)}function kn(W,_){if(!W)return null;let Z=W.name??(0,h.capitalize)(W.key);return _&&(Z=`${Z} (auto)`),{label:Z,value:W.key}}const Vt=W=>({table:(0,ot.css)`
    margin-top: ${W.spacing(1)};

    td,
    th {
      border-right: 4px solid ${W.colors.background.primary};
      border-bottom: 4px solid ${W.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${W.typography.bodySmall.fontSize};
      line-height: ${W.spacing(4)};
      padding: ${W.spacing(0,1)};
    }
  `,labelCell:(0,ot.css)`
    font-size: ${W.typography.bodySmall.fontSize};
    background: ${W.colors.background.secondary};
    padding: ${W.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:(0,ot.css)`
    padding: 0;
    min-width: 161px;
  `});var zt=e(81160);function kt(W,_){let Z=null;for(const Je of _)if(Je.refId===W.configRefId){Z=Je;break}if(!Z)return _;const de={fields:[],length:1},Pe=hn(Z,W.mappings??[],!1);for(const Je of Z.fields){const qe={...Je},dt=(0,me.Ct)(Je,Z),Dt=Pe.index[dt],Pt=(0,ft.Nw)({field:Je,reducers:[Dt.reducerId]});qe.values=[Pt[Dt.reducerId]],de.fields.push(qe)}const Ie=[],Ve=(0,q.NS)(W.applyTo||{id:le.Ct.numeric});for(const Je of _){if(Je===Z&&_.length>1)continue;const qe={fields:[],length:Je.length,refId:Je.refId};for(const dt of Je.fields)if(Ve(dt,Je,_)){const Dt=Xt(de,0,Pe);qe.fields.push({...dt,config:{...dt.config,...Dt}})}else qe.fields.push(dt);Ie.push(qe)}return Ie}const rn={id:k.F.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data.",defaultOptions:{configRefId:"config",mappings:[]},operator:W=>_=>_.pipe((0,zt.T)(Z=>kt(W,Z)))};function yn({input:W,onChange:_,options:Z}){const de=(0,Tt.of)(Rn),Pe=W.map(Lt=>Lt.refId).filter(Lt=>Lt!=null).map(Lt=>({label:Lt,value:Lt})),Ie=Z.configRefId||"config",Ve=Z.applyTo??{id:le.Ct.byType,options:"number"},Je=Pn.g.get(Ve.id),qe=W.find(Lt=>Lt.refId===Ie),dt=Lt=>{_({...Z,configRefId:Lt.value||"config"})},Dt=Lt=>{_({...Z,applyTo:{id:Lt.value}})},Pt=Lt=>{_({...Z,applyTo:{id:Ve.id,options:Lt}})},$t=Pn.g.list().filter(Lt=>!Lt.excludeFromPicker).map(Lt=>({label:Lt.name,value:Lt.id,description:Lt.description}));return a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Config query",labelWidth:20},a.createElement(re.l6,{onChange:dt,options:Pe,value:Ie,width:30}))),a.createElement(ge.C,null,a.createElement(j.I,{label:"Apply to",labelWidth:20},a.createElement(re.l6,{onChange:Dt,options:$t,value:Ve.id,width:30}))),a.createElement(ge.C,null,a.createElement(j.I,{label:"Apply to options",labelWidth:20,className:de.matcherOptions},a.createElement(Je.component,{matcher:Je.matcher,data:W,options:Ve.options,onChange:Pt}))),a.createElement(ge.C,null,qe&&a.createElement(An,{frame:qe,mappings:Z.mappings,onChange:Lt=>_({...Z,mappings:Lt}),withReducers:!0})))}const gn={id:rn.id,editor:yn,transformation:rn,name:rn.name,description:rn.description,state:Xe.pn.beta,categories:new Set([C.m.CalculateNewFields]),help:ue(rn.id).helperDocs},Rn=W=>({matcherOptions:(0,ot.css)`
    min-width: 404px;
  `});var Kt=e(62467),mt=e(58307),pt=e(66350),Qt=e(15292),on=e(11710);const pn=16,fn=W=>{const{options:_,onChange:Z}=W,{binary:de}=_;let Pe=!de?.left,Ie=!de?.right;const Ve=W.names.map(Ot=>(Ot===de?.left&&(Pe=!0),Ot===de?.right&&(Ie=!0),{label:Ot,value:Ot})),Je=Pe?Ve:[...Ve,{label:de?.left,value:de?.left}],qe=Ie?Ve:[...Ve,{label:de?.right,value:de?.right}],dt=on.b.list().map(Ot=>({label:Ot.binaryOperationID,value:Ot.binaryOperationID})),Dt=Ot=>{Z({..._,mode:pt.UY.BinaryOperation,binary:Ot})},Pt=Ot=>{Dt({...de,left:Ot.value})},$t=Ot=>{Dt({...de,right:Ot.value})},Lt=Ot=>{Dt({...de,operator:Ot.value})};return a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Operation",labelWidth:pn},a.createElement(re.l6,{allowCustomValue:!0,placeholder:"Field or number",options:Je,className:"min-width-18",value:de?.left,onChange:Pt})),a.createElement(j.I,null,a.createElement(re.l6,{className:"width-4",options:dt,value:de?.operator??dt[0].value,onChange:Lt})),a.createElement(j.I,null,a.createElement(re.l6,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:qe,value:de?.right,onChange:$t}))))},zn=W=>{const{names:_,onChange:Z,options:de}=W,{cumulative:Pe}=de,Ie=_.map(dt=>({label:dt,value:dt})),Ve=dt=>{const Dt=dt.length?dt[0]:ft.gy.sum;Je({...Pe,reducer:Dt})},Je=dt=>{Z({...de,mode:pt.UY.CumulativeFunctions,cumulative:dt})},qe=dt=>{Je({...Pe,field:dt.value})};return a.createElement(a.Fragment,null,a.createElement(j.I,{label:"Field",labelWidth:pn},a.createElement(re.l6,{placeholder:"Field",options:Ie,className:"min-width-18",value:Pe?.field,onChange:qe})),a.createElement(j.I,{label:"Calculation",labelWidth:pn},a.createElement(Mt.S,{allowMultiple:!1,className:"width-18",stats:[Pe?.reducer||ft.gy.sum],onChange:Ve,defaultStat:ft.gy.sum,filterOptions:dt=>dt.id===ft.gy.sum||dt.id===ft.gy.mean})))},aa=W=>{const{options:_,onChange:Z}=W,{index:de}=_,Pe=Ie=>{Z({..._,index:{asPercentile:Ie.currentTarget.checked}})};return a.createElement(a.Fragment,null,a.createElement(j.I,{labelWidth:pn,label:"As percentile",tooltip:"Transform the row index as a percentile."},a.createElement(Qt.K,{value:!!de?.asPercentile,onChange:Pe})))};var Zn=e(66864),jn=e(92174);const ga=W=>{const{names:_,selected:Z,onChange:de,options:Pe}=W,{reduce:Ie}=Pe,Ve=Dt=>{de({...Pe,reduce:Dt})},Je=Dt=>{Z.indexOf(Dt)>-1?qe(Z.filter(Pt=>Pt!==Dt)):qe([...Z,Dt])},qe=Dt=>{Ve({...Ie,include:Dt})},dt=Dt=>{const Pt=Dt.length?Dt[0]:ft.gy.sum,{reduce:$t}=Pe;Ve({...$t,reducer:Pt})};return a.createElement(a.Fragment,null,a.createElement(j.I,{label:"Operation",labelWidth:pn,grow:!0},a.createElement(Zn.Gy,{spacing:"xs",align:"flex-start",wrap:!0},_.map((Dt,Pt)=>a.createElement(jn.m,{key:`${Dt}/${Pt}`,onClick:()=>{Je(Dt)},label:Dt,selected:Z.indexOf(Dt)>-1})))),a.createElement(j.I,{label:"Calculation",labelWidth:pn},a.createElement(Mt.S,{allowMultiple:!1,className:"width-18",stats:[Ie?.reducer||ft.gy.sum],onChange:dt,defaultStat:ft.gy.sum})))};var Ra=e(27618),_a=e(76892);const Za=W=>{const{options:_,onChange:Z}=W,{unary:de}=_,Pe=Pt=>{Z({..._,mode:pt.UY.UnaryOperation,unary:Pt})},Ie=Pt=>{Pe({...de,operator:Pt.value})},Ve=Pt=>{Pe({...de,fieldName:Pt.value})};let Je=!de?.fieldName;const qe=W.names.map(Pt=>(Pt===de?.fieldName&&(Je=!0),{label:Pt,value:Pt})),dt=Ra.j.list().map(Pt=>({label:Pt.unaryOperationID,value:Pt.unaryOperationID})),Dt=Je?qe:[...qe,{label:de?.fieldName,value:de?.fieldName}];return a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Operation",labelWidth:pn},a.createElement(re.l6,{options:dt,value:de?.operator??dt[0].value,onChange:Ie})),a.createElement(j.I,{label:"(",labelWidth:2},a.createElement(re.l6,{placeholder:"Field",className:"min-width-11",options:Dt,value:de?.fieldName,onChange:Ve})),a.createElement(_a.c,{width:2},")")))};var ms=e(60188);const rs=W=>{const{options:_,names:Z,onChange:de}=W,{window:Pe}=_,Ie=Z.map(Ot=>({label:Ot,value:Ot})),Ve=[{label:"Trailing",value:pt.ip.Trailing},{label:"Centered",value:pt.ip.Centered}],Je=[{label:"Percentage",value:pt.Bp.Percentage},{label:"Fixed",value:pt.Bp.Fixed}],qe=Ot=>{de({..._,mode:pt.UY.WindowFunctions,window:Ot})},dt=Ot=>{qe({...Pe,field:Ot.value})},Dt=Ot=>{qe({...Pe,windowSize:Ot&&Pe?.windowSizeMode===pt.Bp.Percentage?Ot/100:Ot})},Pt=Ot=>{qe({...Pe,windowSize:Pe?.windowSize?Ot===pt.Bp.Percentage?Pe.windowSize/100:Pe.windowSize*100:void 0,windowSizeMode:Ot})},$t=Ot=>{const Ft=Ot.length?Ot[0]:ft.gy.sum;qe({...Pe,reducer:Ft})},Lt=Ot=>{qe({...Pe,windowAlignment:Ot})};return a.createElement(a.Fragment,null,a.createElement(j.I,{label:"Field",labelWidth:pn},a.createElement(re.l6,{placeholder:"Field",options:Ie,className:"min-width-18",value:Pe?.field,onChange:dt})),a.createElement(j.I,{label:"Calculation",labelWidth:pn},a.createElement(Mt.S,{allowMultiple:!1,className:"width-18",stats:[Pe?.reducer||ft.gy.mean],onChange:$t,defaultStat:ft.gy.mean,filterOptions:Ot=>Ot.id===ft.gy.mean||Ot.id===ft.gy.variance||Ot.id===ft.gy.stdDev})),a.createElement(j.I,{label:"Type",labelWidth:pn},a.createElement(ne.z,{value:Pe?.windowAlignment??pt.ip.Trailing,options:Ve,onChange:Lt})),a.createElement(j.I,{label:"Window size mode"},a.createElement(ne.z,{value:Pe?.windowSizeMode??pt.Bp.Percentage,options:Je,onChange:Pt})),a.createElement(j.I,{label:Pe?.windowSizeMode===pt.Bp.Percentage?"Window size %":"Window size",labelWidth:pn,tooltip:Pe?.windowSizeMode===pt.Bp.Percentage?"Set the window size as a percentage of the total data":"Window size"},a.createElement(ms.Q,{placeholder:"Auto",min:.1,value:Pe?.windowSize&&Pe.windowSizeMode===pt.Bp.Percentage?Pe.windowSize*100:Pe?.windowSize,onChange:Dt})))},Ja=[{value:pt.UY.BinaryOperation,label:"Binary operation"},{value:pt.UY.UnaryOperation,label:"Unary operation"},{value:pt.UY.ReduceRow,label:"Reduce row"},{value:pt.UY.Index,label:"Row index"}];G.$.featureToggles.addFieldFromCalculationStatFunctions&&Ja.push({value:pt.UY.CumulativeFunctions,label:"Cumulative functions"},{value:pt.UY.WindowFunctions,label:"Window functions"});const Ns=new Set([H.PU.time,H.PU.number,H.PU.string]),ls=W=>{const{options:_,onChange:Z,input:de}=W,Pe=_?.reduce?.include,[Ie,Ve]=(0,a.useState)({names:[],selected:[]});(0,a.useEffect)(()=>{const Ot={interpolate:bn=>bn},Ft=(0,Kt.of)(de).pipe(ee.c.ensureColumnsTransformer.operator(null,Ot),qe(),Je(),dt(Pe||[])).subscribe(({selected:bn,names:Ta})=>{Ve({names:Ta,selected:bn})});return()=>{Ft.unsubscribe()}},[de,Pe]);const Je=()=>{if(!G.$.featureToggles.transformationsVariableSupport)return mt.D;const Ot=(0,ve.w)();return Ft=>Ft.pipe((0,zt.T)(bn=>(bn.push(...Ot.getVariables().map(Ta=>"$"+Ta.name)),bn)))},qe=()=>Ot=>Ot.pipe((0,zt.T)(Ft=>{const bn=[],Ta={};for(const wa of Ft)for(const La of wa.fields){if(!Ns.has(La.type))continue;const Aa=(0,me.Ct)(La,wa,Ft);Ta[Aa]||(Ta[Aa]=!0,bn.push(Aa))}return bn})),dt=Ot=>Ft=>Ft.pipe((0,zt.T)(bn=>{if(!Ot.length)return{names:bn,selected:[]};const Ta=[],wa=[];for(const La of bn)Ot.includes(La)&&wa.push(La),Ta.push(La);return{names:Ta,selected:wa}})),Dt=Ot=>{Z({..._,replaceFields:Ot.currentTarget.checked})},Pt=Ot=>{const Ft=Ot.value??pt.UY.BinaryOperation;Ft===pt.UY.WindowFunctions&&(_.window=_.window??pt.Uj),Z({..._,mode:Ft})},$t=Ot=>{Z({..._,alias:Ot.target.value})},Lt=_.mode??pt.UY.BinaryOperation;return a.createElement(a.Fragment,null,a.createElement(j.I,{labelWidth:pn,label:"Mode"},a.createElement(re.l6,{className:"width-18",options:Ja,value:Ja.find(Ot=>Ot.value===Lt),onChange:Pt})),Lt===pt.UY.BinaryOperation&&a.createElement(fn,{options:_,names:Ie.names,onChange:W.onChange}),Lt===pt.UY.UnaryOperation&&a.createElement(Za,{names:Ie.names,options:_,onChange:W.onChange}),Lt===pt.UY.ReduceRow&&a.createElement(ga,{names:Ie.names,selected:Ie.selected,options:_,onChange:W.onChange}),Lt===pt.UY.CumulativeFunctions&&a.createElement(zn,{names:Ie.names,options:_,onChange:W.onChange}),Lt===pt.UY.WindowFunctions&&a.createElement(rs,{names:Ie.names,options:_,onChange:W.onChange}),Lt===pt.UY.Index&&a.createElement(aa,{options:_,onChange:W.onChange}),a.createElement(j.I,{labelWidth:pn,label:"Alias"},a.createElement(Me.p,{className:"width-18",value:_.alias??"",placeholder:(0,pt.sw)(_),onChange:$t})),a.createElement(j.I,{labelWidth:pn,label:"Replace all fields"},a.createElement(Qt.K,{value:!!_.replaceFields,onChange:Dt})))},cs={id:k.F.calculateField,editor:ls,transformation:ee.c.calculateFieldTransformer,name:ee.c.calculateFieldTransformer.name,description:"Use the row values to calculate a new field.",categories:new Set([C.m.CalculateNewFields]),help:ue(k.F.calculateField).helperDocs};var ds=e(82150);const ps=[{value:ds.x1.FieldName,label:"Copy frame name to field name"},{value:ds.x1.Label,label:"Add a label with the frame name"},{value:ds.x1.Drop,label:"Ignore the frame name"}];class Vr extends a.PureComponent{constructor(_){super(_),this.onModeChanged=Z=>{const{options:de,onChange:Pe}=this.props,Ie=Z.value??ds.x1.FieldName;Pe({...de,frameNameMode:Ie})},this.onLabelChanged=Z=>{const{options:de}=this.props;this.props.onChange({...de,frameNameLabel:Z.target.value})}}render(){const{options:_}=this.props,Z=_.frameNameMode??ds.x1.FieldName;return a.createElement("div",null,a.createElement(j.I,{label:"Name",labelWidth:16,grow:!0},a.createElement(re.l6,{width:36,options:ps,value:ps.find(de=>de.value===Z),onChange:this.onModeChanged})),Z===ds.x1.Label&&a.createElement(j.I,{label:"Label",labelWidth:16,grow:!0},a.createElement(Me.p,{width:36,value:_.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged})))}}const ur={id:k.F.concatenate,editor:Vr,transformation:ee.c.concatenateTransformer,name:ee.c.concatenateTransformer.name,description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",categories:new Set([C.m.Combine]),help:ue(k.F.concatenate).helperDocs};var ks=e(91410),ws=e(76218),Yr=e(9988),Os=e(63577),Es=e(55244),us=e(14578),tr=e(72093),Ts=e(29158);const Jr=({transformIndex:W,value:_,index:Z,mappedIndex:de,onChangeEnumValue:Pe,onRemoveEnumRow:Ie,checkIsEnumUniqueValue:Ve})=>{const Je=(0,Tt.of)(Bo),[qe,dt]=(0,a.useState)(_),[Dt,Pt]=(0,a.useState)(qe===""),[$t,Lt]=(0,a.useState)(null),Ot=(0,a.useRef)(null);(0,a.useEffect)(()=>{Ot.current&&Ot.current.focus()},[Ot]);const Ft=Aa=>{Aa.currentTarget.value!==""&&Ve(Aa.currentTarget.value)&&Aa.currentTarget.value!==_?Lt("Enum value already exists"):Lt(null),dt(Aa.currentTarget.value)},bn=()=>{if(Pt(!1),Lt(null),qe===""||$t!==null){Ie(de);return}Pe(de,qe)},Ta=Aa=>{Aa.key==="Enter"&&(Aa.preventDefault(),bn())},wa=()=>{Pt(!0)},La=()=>{Ie(de)};return a.createElement(Es.sx,{key:`${W}/${_}`,draggableId:`${W}/${_}`,index:Z},Aa=>a.createElement("tr",{key:Z,ref:Aa.innerRef,...Aa.draggableProps},a.createElement("td",null,a.createElement("div",{className:Je.dragHandle,...Aa.dragHandleProps},a.createElement(us.I,{name:"draggabledots",size:"lg"}))),Dt?a.createElement("td",null,a.createElement(Me.p,{ref:Ot,type:"text",value:qe,onChange:Ft,onBlur:bn,onKeyDown:Ta}),$t&&a.createElement(tr.P,null,$t)):a.createElement("td",{onClick:wa,className:Je.clickableTableCell},_&&_!==""?_:"Click to edit"),a.createElement("td",{className:Je.textAlignCenter},a.createElement(Zn.Gy,{spacing:"sm"},a.createElement(Ts.K,{name:"trash-alt",onClick:La,"data-testid":"remove-enum-row","aria-label":"Delete enum row",tooltip:"Delete"})))))},Bo=W=>({dragHandle:(0,ot.css)({cursor:"grab"}),textAlignCenter:(0,ot.css)({textAlign:"center"}),clickableTableCell:(0,ot.css)({cursor:"pointer",width:"100px","&:hover":{color:W.colors.text.maxContrast}})}),nr=Jr,io=({input:W,options:_,transformIndex:Z,onChange:de})=>{const Pe=(0,Tt.of)(Eo),[Ie,Ve]=(0,a.useState)(_.conversions[Z].enumConfig?.text??[]);(0,a.useEffect)(()=>{!_.conversions[Z].enumConfig?.text?.length&&W.length&&Je()},[W]),(0,a.useEffect)(()=>{(()=>{const Ft=Ie.map(wa=>wa),bn=_.conversions,Ta={text:Ft};bn[Z]={...bn[Z],enumConfig:Ta},de({..._,conversions:bn})})()},[Z,Ie]);const Je=()=>{const Ot=W.flatMap(bn=>bn?.fields??[]).find(bn=>bn.name===_.conversions[Z].targetField);if(!Ot)return;const Ft=new Set(Ot?.values);Ie.length>0&&!(0,h.isEqual)(Ie,Array.from(Ft))&&!window.confirm("This action will overwrite the existing configuration. Are you sure you want to continue?")||Ve([...Ft])},qe=(Ot,Ft)=>{const bn=[...Ie];bn.splice(Ot,1,Ft),Ve(bn)},dt=Ot=>{const Ft=[...Ie];Ft.splice(Ot,1),Ve(Ft)},Dt=()=>{Ve(["",...Ie])},Pt=(Ot,Ft)=>{Ie.includes(Ft)||qe(Ot,Ft)},$t=Ot=>Ie.includes(Ot),Lt=Ot=>{if(!Ot.destination)return;const Ft=Ie.length-Ot.source.index-1,bn=Ie.length-Ot.destination.index-1,Ta=[...Ie],wa=Ta[Ft];Ta.splice(Ft,1),Ta.splice(bn,0,wa),Ve(Ta)};return a.createElement(ge.C,null,a.createElement(Zn.Gy,null,a.createElement(oe.$n,{size:"sm",icon:"plus",onClick:()=>Je(),className:Pe.button},"Generate enum values from data"),a.createElement(oe.$n,{size:"sm",icon:"plus",onClick:()=>Dt(),className:Pe.button},"Add enum value")),a.createElement(Zn.gW,null,a.createElement("table",{className:Pe.compactTable},a.createElement(Es.JY,{onDragEnd:Lt},a.createElement(Es.gL,{droppableId:"sortable-enum-config-mappings",direction:"vertical"},Ot=>a.createElement("tbody",{ref:Ot.innerRef,...Ot.droppableProps},[...Ie].reverse().map((Ft,bn)=>{const Ta=Ie.length-bn-1;return a.createElement(nr,{key:`${Z}/${Ft}`,transformIndex:Z,value:Ft,index:bn,mappedIndex:Ta,onChangeEnumValue:Pt,onRemoveEnumRow:dt,checkIsEnumUniqueValue:$t})}),Ot.placeholder))))))},Eo=W=>({compactTable:(0,ot.css)({"tbody td":{padding:W.spacing(.5)},marginTop:W.spacing(1),marginBottom:W.spacing(2)}),button:(0,ot.css)({marginTop:W.spacing(1)})}),Ko={settings:{width:24,isClearable:!1}},$o=({input:W,options:_,onChange:Z})=>{const de=Yr.bx.filter(Lt=>Lt.value!==H.PU.trace),Pe=(0,Se.qt)(!0),Ie=(0,ks.P3)();Pe.push({label:"Browser",value:"browser"}),Pe.push({label:"UTC",value:"utc"});for(const Lt of Ie)Pe.push({label:Lt,value:Lt});const Ve=(0,a.useCallback)(Lt=>Ot=>{const Ft=_.conversions;Ft[Lt]={...Ft[Lt],targetField:Ot??"",dateFormat:void 0},Z({..._,conversions:Ft})},[Z,_]),Je=(0,a.useCallback)(Lt=>Ot=>{const Ft=_.conversions;Ft[Lt]={...Ft[Lt],destinationType:Ot.value},Z({..._,conversions:Ft})},[Z,_]),qe=(0,a.useCallback)(Lt=>Ot=>{const Ft=_.conversions;Ft[Lt]={...Ft[Lt],dateFormat:Ot.currentTarget.value},Z({..._,conversions:Ft})},[Z,_]),dt=(0,a.useCallback)(Lt=>Ot=>{const Ft=_.conversions;Ft[Lt]={...Ft[Lt],joinWith:Ot.currentTarget.value},Z({..._,conversions:Ft})},[Z,_]),Dt=(0,a.useCallback)(()=>{Z({..._,conversions:[..._.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[Z,_]),Pt=(0,a.useCallback)(Lt=>{const Ot=_.conversions;Ot.splice(Lt,1),Z({..._,conversions:Ot})},[Z,_]),$t=(0,a.useCallback)(Lt=>Ot=>{const Ft=_.conversions;Ft[Lt]={...Ft[Lt],timezone:Ot?.value},Z({..._,conversions:Ft})},[Z,_]);return a.createElement(a.Fragment,null,_.conversions.map((Lt,Ot)=>{const Ft=(0,Os.findField)(W?.[0],Lt.targetField);return a.createElement("div",{key:`${Lt.targetField}-${Ot}`},a.createElement(ge.C,null,a.createElement(j.I,{label:"Field"},a.createElement(ws.O,{context:{data:W},value:Lt.targetField??"",onChange:Ve(Ot),item:Ko})),a.createElement(j.I,{label:"as"},a.createElement(re.l6,{options:de,value:Lt.destinationType,placeholder:"Type",onChange:Je(Ot),width:18})),Lt.destinationType===H.PU.time&&a.createElement(j.I,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},a.createElement(Me.p,{value:Lt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:qe(Ot),width:24})),Lt.destinationType===H.PU.string&&a.createElement(a.Fragment,null,(Lt.joinWith?.length||Ft?.type===H.PU.other)&&a.createElement(j.I,{label:"Join with",tooltip:"Use an explicit separator when joining array values"},a.createElement(Me.p,{value:Lt.joinWith,placeholder:"JSON",onChange:dt(Ot),width:9})),Lt.dateFormat||Ft?.type===H.PU.time&&a.createElement(a.Fragment,null,a.createElement(j.I,{label:"Date format",tooltip:"Specify the output format."},a.createElement(Me.p,{value:Lt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:qe(Ot),width:24})),a.createElement(j.I,{label:"Set timezone",tooltip:"Set the timezone of the date manually"},a.createElement(re.l6,{options:Pe,value:Lt.timezone,onChange:$t(Ot),isClearable:!0})))),a.createElement(oe.$n,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>Pt(Ot),"aria-label":"Remove convert field type transformer"})),Lt.destinationType===H.PU.enum&&a.createElement(io,{input:W,options:_,transformIndex:Ot,onChange:Z}))}),a.createElement(oe.$n,{size:"sm",icon:"plus",onClick:Dt,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},br={id:k.F.convertFieldType,editor:$o,transformation:ee.c.convertFieldTypeTransformer,name:ee.c.convertFieldTypeTransformer.name,description:ee.c.convertFieldTypeTransformer.description,categories:new Set([C.m.Reformat]),help:ue(k.F.convertFieldType).helperDocs};var _r=e(54479);class lo extends a.PureComponent{constructor(_){super(_),this.onFieldToggle=Z=>{const{selected:de}=this.state;de.indexOf(Z)>-1?this.onChange(de.filter(Pe=>Pe!==Z)):this.onChange([...de,Z])},this.onChange=Z=>{const{regex:de,isRegexValid:Pe}=this.state,Ie={...this.props.options,include:{names:Z}};de&&Pe&&(Ie.include=Ie.include??{},Ie.include.pattern=de),this.setState({selected:Z},()=>{this.props.onChange(Ie)})},this.onInputBlur=Z=>{const{selected:de,regex:Pe}=this.state;let Ie=!0;try{Pe&&(0,_r.dO)(Pe)}catch{Ie=!1}Ie?this.props.onChange({...this.props.options,include:{pattern:Pe}}):this.props.onChange({...this.props.options,include:{names:de}}),this.setState({isRegexValid:Ie})},this.onVariableChange=Z=>{this.props.onChange({...this.props.options,include:{variable:Z.value}}),this.setState({variable:Z.value})},this.onFromVariableChange=Z=>{const de=Z.currentTarget.checked;this.props.onChange({...this.props.options,byVariable:de}),this.setState({byVariable:de})},this.state={include:_.options.include?.names||[],regex:_.options.include?.pattern,variable:_.options.include?.variable,byVariable:_.options.byVariable||!1,options:[],variables:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(_){this.props.input!==_.input&&this.initOptions()}initOptions(){const{input:_,options:Z}=this.props,de=Array.from(Z.include?.names??[]),Pe=(0,ve.w)().getVariables().map(Je=>({label:"$"+Je.name,value:"$"+Je.name})),Ie=[],Ve={};for(const Je of _)for(const qe of Je.fields){const dt=(0,me.Ct)(qe,Je,_);let Dt=Ve[dt];Dt||(Dt=Ve[dt]={name:dt,count:0},Ie.push(Dt)),Dt.count++}if(Z.include?.pattern)try{const Je=(0,_r.dO)(Z.include.pattern);for(const qe of Ie)Je.test(qe.name)&&de.push(qe.name)}catch(Je){console.error(Je)}if(de.length){const Je=Ie.filter(qe=>de.includes(qe.name));this.setState({options:Ie,selected:Je.map(qe=>qe.name),variables:Pe,byVariable:Z.byVariable||!1,variable:Z.include?.variable,regex:Z.include?.pattern})}else this.setState({options:Ie,selected:Ie.map(Je=>Je.name),variables:Pe,byVariable:Z.byVariable||!1,variable:Z.include?.variable,regex:Z.include?.pattern})}render(){const{options:_,selected:Z,isRegexValid:de}=this.state;return a.createElement("div",null,a.createElement(ge.C,{label:"Use variable"},a.createElement(j.I,{label:"From variable"},a.createElement(Qt.K,{value:this.state.byVariable,onChange:this.onFromVariableChange}))),this.state.byVariable?a.createElement(ge.C,null,a.createElement(j.I,{label:"Variable"},a.createElement(re.l6,{value:this.state.variable,onChange:this.onVariableChange,options:this.state.variables||[]}))):a.createElement(ge.C,{label:"Identifier"},a.createElement(j.I,{label:"Identifier",invalid:!de,error:de?void 0:"Invalid pattern"},a.createElement(Me.p,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:Pe=>this.setState({regex:Pe.currentTarget.value}),onBlur:this.onInputBlur,width:25})),_.map((Pe,Ie)=>{const Ve=`${Pe.name}${Pe.count>1?" ("+Pe.count+")":""}`,Je=Z.indexOf(Pe.name)>-1;return a.createElement(jn.m,{key:`${Pe.name}/${Ie}`,onClick:()=>{this.onFieldToggle(Pe.name)},label:Ve,selected:Je})})))}}const Vo={id:k.F.filterFieldsByName,editor:lo,transformation:ee.c.filterFieldsByNameTransformer,name:ee.c.filterFieldsByNameTransformer.name,description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive.",categories:new Set([C.m.Filter]),help:ue(k.F.filterFieldsByName).helperDocs};class co extends a.PureComponent{constructor(_){super(_),this.onFieldToggle=Z=>{const{selected:de}=this.state;de.indexOf(Z)>-1?this.onChange(de.filter(Pe=>Pe!==Z)):this.onChange([...de,Z])},this.onChange=Z=>{this.setState({selected:Z}),this.props.onChange({...this.props.options,include:Z.join("|")})},this.state={include:_.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(_){this.props.input!==_.input&&this.initOptions()}initOptions(){const{input:_,options:Z}=this.props,de=Z.include?Z.include.split("|"):[],Pe=[],Ie={};for(const Ve of _)if(Ve.refId){let Je=Ie[Ve.refId];Je||(Je=Ie[Ve.refId]={refId:Ve.refId,count:0},Pe.push(Je)),Je.count++}if(de.length){const Ve=[],Je=[];for(const qe of Pe)de.includes(qe.refId)&&Je.push(qe),Ve.push(qe);this.setState({options:Ve,selected:Je.map(qe=>qe.refId)})}else this.setState({options:Pe,selected:[]})}render(){const{options:_,selected:Z}=this.state,{input:de}=this.props;return a.createElement(a.Fragment,null,de.length<=1&&a.createElement("div",null,a.createElement(tr.P,null,"Filter data by query expects multiple queries in the input.")),a.createElement(j.I,{label:"Series refId",labelWidth:16,shrink:!0},a.createElement(Zn.Gy,{spacing:"xs",align:"flex-start",wrap:!0},_.map((Pe,Ie)=>{const Ve=`${Pe.refId}${Pe.count>1?" ("+Pe.count+")":""}`,Je=Z.indexOf(Pe.refId)>-1;return a.createElement(jn.m,{key:`${Pe.refId}/${Ie}`,onClick:()=>{this.onFieldToggle(Pe.refId)},label:Ve,selected:Je})}))))}}const Xr={id:k.F.filterByRefId,editor:co,transformation:ee.c.filterFramesByRefIdTransformer,name:ee.c.filterFramesByRefIdTransformer.name,description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel.",categories:new Set([C.m.Filter]),help:ue(k.F.filterByRefId).helperDocs};var Zr=e(15400);const zr={settings:{width:30,filter:W=>W.type===H.PU.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null};function yo({input:W,options:_,onChange:Z}){const de=(0,a.useCallback)(qe=>{Z({..._,stringField:qe??""})},[Z,_]),Pe=(0,a.useCallback)(qe=>{const dt=qe.value??Zr.gs.UpperCase;Z({..._,outputFormat:dt})},[Z,_]),Ie=(0,a.useCallback)(qe=>{Z({..._,substringStart:qe??0})},[Z,_]),Ve=(0,a.useCallback)(qe=>{Z({..._,substringEnd:qe??0})},[Z,_]),Je=Object.values(Zr.gs).map(qe=>({label:qe,value:qe}));return a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Field",labelWidth:10},a.createElement(ws.O,{context:{data:W},value:_.stringField??"",onChange:de,item:zr})),a.createElement(j.I,{label:"Format",labelWidth:10},a.createElement(re.l6,{options:Je,value:_.outputFormat,onChange:Pe,width:20}))),_.outputFormat===Zr.gs.Substring&&a.createElement(ge.C,null,a.createElement(j.I,{label:"Substring range",labelWidth:15},a.createElement(ms.Q,{min:0,value:_.substringStart??0,onChange:Ie,width:7})),a.createElement(j.I,null,a.createElement(ms.Q,{min:0,value:_.substringEnd??0,onChange:Ve,width:7}))))}const qr={id:k.F.formatString,editor:yo,transformation:ee.c.formatStringTransformer,name:ee.c.formatStringTransformer.name,state:Xe.pn.beta,description:ee.c.formatStringTransformer.description,categories:new Set([C.m.Reformat])};function Pr({input:W,options:_,onChange:Z}){const de=[],Pe=(0,Se.qt)(!0);for(const qe of W)for(const dt of qe.fields)if(dt.type==="time"){const Dt=(0,me.Ct)(dt,qe,W);de.push({label:Dt,value:Dt})}const Ie=(0,a.useCallback)(qe=>{const dt=qe?.value!==void 0?qe.value:"";Z({..._,timeField:dt})},[Z,_]),Ve=(0,a.useCallback)(qe=>{const dt=qe.target.value;Z({..._,outputFormat:dt})},[Z,_]),Je=(0,a.useCallback)(qe=>{const dt=qe?.value!==void 0?qe.value:"";Z({..._,timezone:dt})},[Z,_]);return a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Time Field",labelWidth:15,grow:!0},a.createElement(re.l6,{options:de,value:_.timeField,onChange:Ie,placeholder:"time",isClearable:!0})),a.createElement(j.I,{label:"Format",labelWidth:10,tooltip:a.createElement(a.Fragment,null,"The output format for the field specified as a"," ",a.createElement("a",{href:"https://momentjs.com/docs/#/displaying/",target:"_blank",rel:"noopener noreferrer"},"Moment.js format string"),"."),interactive:!0},a.createElement(Me.p,{onChange:Ve,value:_.outputFormat})),a.createElement(j.I,{label:"Set Timezone",tooltip:"Set the timezone of the date manually",labelWidth:20},a.createElement(re.l6,{options:Pe,value:_.timezone,onChange:Je,isClearable:!0}))))}const uo={id:k.F.formatTime,editor:Pr,transformation:ee.c.formatTimeTransformer,name:ee.c.formatTimeTransformer.name,state:Xe.pn.alpha,description:ee.c.formatTimeTransformer.description,help:ue(k.F.formatTime).helperDocs};var Ws=e(25094),xt=e(67061),wt=e(42418);const vn=({input:W,options:_,onChange:Z})=>{const de=(0,Se.ZI)(W),Pe=(0,a.useCallback)(qe=>dt=>{Z({..._,fields:{..._.fields,[qe]:dt}})},[Z]);let Ie,Ve=!1;for(const qe of Object.values(_.fields))qe.aggregations.length>0&&qe.operation!==null&&(Ve=!0),qe.operation===Ws.R3.groupBy&&(Ie=!0);const Je=Ve&&!Ie;return a.createElement(xt.B,{direction:"column"},Je&&a.createElement(wt.F,{title:"Calculations will not have an effect if no fields are being grouped on.",severity:"warning"}),de.map(qe=>a.createElement(Mn,{onConfigChange:Pe(qe),fieldName:qe,config:_.fields[qe],key:qe})))},un=[{label:"Group by",value:Ws.R3.groupBy},{label:"Calculate",value:Ws.R3.aggregate}],Mn=({fieldName:W,config:_,onConfigChange:Z})=>{const de=(0,Tt.$j)(),Pe=_n(de),Ie=(0,a.useCallback)(Ve=>{Z({aggregations:_?.aggregations??[],operation:Ve?.value??null})},[_,Z]);return a.createElement(j.I,{className:Pe.label,label:W,grow:!0,shrink:!0},a.createElement(xt.B,{gap:.5,direction:"row"},a.createElement("div",{className:Pe.operation},a.createElement(re.l6,{options:un,value:_?.operation,placeholder:"Ignored",onChange:Ie,isClearable:!0})),_?.operation===Ws.R3.aggregate&&a.createElement(Mt.S,{className:Pe.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:_.aggregations,onChange:Ve=>{Z({..._,aggregations:Ve})}})))},_n=W=>({label:(0,ot.css)`
      label {
        min-width: ${W.spacing(32)};
      }
    `,operation:(0,ot.css)`
      flex-shrink: 0;
      height: 100%;
      width: ${W.spacing(24)};
    `,aggregations:(0,ot.css)`
      flex-grow: 1;
    `}),Jn={id:k.F.groupBy,editor:vn,transformation:ee.c.groupByTransformer,name:ee.c.groupByTransformer.name,description:ee.c.groupByTransformer.description,categories:new Set([C.m.Combine,C.m.CalculateNewFields,C.m.Reformat]),help:ue(k.F.groupBy).helperDocs};var pa=e(68133),Da=e(46819),Ha=e(88575);const es=({input:W,options:_,onChange:Z})=>{const de=(0,Se.ZI)(W),Pe=_.showSubframeHeaders===void 0?pa.l:_.showSubframeHeaders,Ie=(0,a.useCallback)(Dt=>Pt=>{Z({..._,fields:{..._.fields,[Dt]:Pt}})},[Z]),Ve=(0,a.useCallback)(()=>{const Dt=_.showSubframeHeaders===void 0?!pa.l:!_.showSubframeHeaders;Z({showSubframeHeaders:Dt,fields:{..._.fields}})},[Z]);let Je,qe=!1;for(const Dt of Object.values(_.fields))Dt.aggregations.length>0&&Dt.operation!==null&&(qe=!0),Dt.operation===Ws.R3.groupBy&&(Je=!0);const dt=qe&&!Je;return a.createElement(Da.B,{direction:"column"},dt&&a.createElement(wt.F,{title:"Calculations will not have an effect if no fields are being grouped on.",severity:"warning"}),a.createElement("div",null,de.map(Dt=>a.createElement(Fa,{onConfigChange:Ie(Dt),fieldName:Dt,config:_.fields[Dt],key:Dt}))),a.createElement(Ha.D,{label:"Show field names in nested tables",description:"If enabled nested tables will show field names as a table header"},a.createElement(Qt.d,{value:Pe,onChange:Ve})))},Ba=[{label:"Group by",value:Ws.R3.groupBy},{label:"Calculate",value:Ws.R3.aggregate}],Fa=({fieldName:W,config:_,onConfigChange:Z})=>{const de=(0,Tt.$j)(),Pe=Is(de),Ie=(0,a.useCallback)(Ve=>{Z({aggregations:_?.aggregations??[],operation:Ve?.value??null})},[_,Z]);return a.createElement(j.I,{className:Pe.label,label:W,grow:!0,shrink:!0},a.createElement(Da.B,{gap:.5,direction:"row",wrap:!1},a.createElement("div",{className:Pe.operation},a.createElement(re.l6,{options:Ba,value:_?.operation,placeholder:"Ignored",onChange:Ie,isClearable:!0})),_?.operation===Ws.R3.aggregate&&a.createElement(Mt.S,{className:Pe.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:_.aggregations,onChange:Ve=>{Z({..._,aggregations:Ve})}})))},Is=W=>({label:(0,ot.css)({minWidth:W.spacing(32)}),operation:(0,ot.css)({flexShrink:0,height:"100%",width:W.spacing(24)}),aggregations:(0,ot.css)({flexGrow:1})}),Hs={id:k.F.groupToNestedTable,editor:es,transformation:ee.c.groupToNestedTable,name:ee.c.groupToNestedTable.name,description:ee.c.groupToNestedTable.description,categories:new Set([C.m.Combine,C.m.CalculateNewFields,C.m.Reformat])};var Bs=e(81010);const ar=({input:W,options:_,onChange:Z})=>{const de=(0,Se.ZI)(W).map(dt=>({label:dt,value:dt})),Pe=(0,a.useCallback)(dt=>{Z({..._,columnField:dt?.value})},[Z,_]),Ie=(0,a.useCallback)(dt=>{Z({..._,rowField:dt?.value})},[Z,_]),Ve=(0,a.useCallback)(dt=>{Z({..._,valueField:dt?.value})},[Z,_]),Je=[{label:"Null",value:Bs.N.Null,description:"Null value"},{label:"True",value:Bs.N.True,description:"Boolean true value"},{label:"False",value:Bs.N.False,description:"Boolean false value"},{label:"Empty",value:Bs.N.Empty,description:"Empty string"}],qe=(0,a.useCallback)(dt=>{Z({..._,emptyValue:dt?.value})},[Z,_]);return a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Column",labelWidth:8},a.createElement(re.l6,{options:de,value:_.columnField,onChange:Pe,isClearable:!0})),a.createElement(j.I,{label:"Row",labelWidth:8},a.createElement(re.l6,{options:de,value:_.rowField,onChange:Ie,isClearable:!0})),a.createElement(j.I,{label:"Cell Value",labelWidth:10},a.createElement(re.l6,{options:de,value:_.valueField,onChange:Ve,isClearable:!0})),a.createElement(j.I,{label:"Empty Value"},a.createElement(re.l6,{options:Je,value:_.emptyValue,onChange:qe,isClearable:!0}))))},eo={id:k.F.groupingToMatrix,editor:ar,transformation:ee.c.groupingToMatrixTransformer,name:ee.c.groupingToMatrixTransformer.name,description:"Takes a three fields combination and produces a Matrix.",categories:new Set([C.m.Combine,C.m.Reformat]),help:ue(k.F.groupingToMatrix).helperDocs};var Rs=e(77678);const Do=({input:W,options:_,onChange:Z})=>{const[Pe,Ie]=(0,a.useState)({bucketCount:!(0,Se.N_)(_.bucketCount||""),bucketSize:!(0,Se.N_)(_.bucketSize||""),bucketOffset:!(0,Se.N_)(_.bucketOffset||"")}),Ve=(0,a.useCallback)(Ft=>{Z({..._,bucketCount:Ft})},[Z,_]),Je=(0,a.useCallback)(Ft=>{Z({..._,bucketSize:Ft})},[Z,_]),qe=(0,a.useCallback)(Ft=>{Z({..._,bucketOffset:Ft})},[Z,_]),dt=(0,a.useCallback)(Ft=>{Ie({...Pe,bucketCount:!(0,Se.N_)(Ft)}),Z({..._,bucketCount:Number(Ft)===0?void 0:Number(Ft)})},[Z,_,Pe]),Dt=(0,a.useCallback)(Ft=>{Ie({...Pe,bucketSize:!(0,Se.N_)(Ft)}),Z({..._,bucketSize:Ft})},[Z,_,Pe,Ie]),Pt=(0,a.useCallback)(Ft=>{Ie({...Pe,bucketOffset:!(0,Se.N_)(Ft)}),Z({..._,bucketOffset:Ft})},[Z,_,Pe,Ie]),$t=(0,a.useCallback)(()=>{Z({..._,combine:!_.combine})},[Z,_]),Ot=(0,ve.w)().getVariables().map(Ft=>({value:Ft.name,label:Ft.label||Ft.name,origin:Be.$0.Template}));if(!G.$.featureToggles.transformationsVariableSupport){let Ft;typeof _.bucketSize=="string"?Ft=parseInt(_.bucketSize,10):Ft=_.bucketSize;let bn;return typeof _.bucketOffset=="string"?bn=parseInt(_.bucketOffset,10):bn=_.bucketOffset,a.createElement("div",null,a.createElement(ge.C,null,a.createElement(j.I,{labelWidth:18,label:Rs.Rt.bucketCount.name,tooltip:Rs.Rt.bucketCount.description},a.createElement(ms.Q,{value:_.bucketCount,placeholder:"Default: 30",onChange:Ve,min:0}))),a.createElement(ge.C,null,a.createElement(j.I,{labelWidth:18,label:Rs.Rt.bucketSize.name,tooltip:Rs.Rt.bucketSize.description},a.createElement(ms.Q,{value:Ft,placeholder:"auto",onChange:Je,min:0}))),a.createElement(ge.C,null,a.createElement(j.I,{labelWidth:18,label:Rs.Rt.bucketOffset.name,tooltip:Rs.Rt.bucketOffset.description},a.createElement(ms.Q,{value:bn,placeholder:"none",onChange:qe,min:0}))),a.createElement(ge.C,null,a.createElement(j.I,{labelWidth:18,label:Rs.Rt.combine.name,tooltip:Rs.Rt.combine.description},a.createElement(Qt.K,{value:_.combine??!1,onChange:$t}))))}return a.createElement("div",null,a.createElement(ge.C,null,a.createElement(j.I,{invalid:Pe.bucketCount,error:"Value needs to be an integer or a variable",labelWidth:18,label:Rs.Rt.bucketCount.name,tooltip:Rs.Rt.bucketCount.description},a.createElement(ke.y,{suggestions:Ot,value:_.bucketCount,placeholder:"Default: 30",onChange:dt}))),a.createElement(ge.C,null,a.createElement(j.I,{invalid:Pe.bucketSize,error:"Value needs to be an integer or a variable",labelWidth:18,label:Rs.Rt.bucketSize.name,tooltip:Rs.Rt.bucketSize.description},a.createElement(ke.y,{suggestions:Ot,value:_.bucketSize,placeholder:"auto",onChange:Dt}))),a.createElement(ge.C,null,a.createElement(j.I,{labelWidth:18,label:Rs.Rt.bucketOffset.name,tooltip:Rs.Rt.bucketOffset.description,invalid:Pe.bucketOffset,error:"Value needs to be an integer or a variable"},a.createElement(ke.y,{suggestions:Ot,value:_.bucketOffset,placeholder:"none",onChange:Pt}))),a.createElement(ge.C,null,a.createElement(j.I,{labelWidth:18,label:Rs.Rt.combine.name,tooltip:Rs.Rt.combine.description},a.createElement(Qt.K,{value:_.combine??!1,onChange:$t}))))},Nr={id:k.F.histogram,editor:Do,transformation:ee.c.histogramTransformer,name:ee.c.histogramTransformer.name,description:ee.c.histogramTransformer.description,categories:new Set([C.m.CreateNewVisualization]),help:ue(k.F.histogram).helperDocs};var ja=e(41511),bs=e(64278);const wr=[{value:ja.W.outer,label:"OUTER (TIME SERIES)",description:"Keep all rows from any table with a value. Join on distinct field values. Performant and best used for time series."},{value:ja.W.outerTabular,label:"OUTER (TABULAR)",description:"Join on a field value with duplicated values. Non performant outer join best used for tabular(SQL like) data."},{value:ja.W.inner,label:"INNER",description:"Drop rows that do not match a value in all tables."}];function ts({input:W,options:_,onChange:Z}){const de=(0,bs.sE)(W),Pe=(0,bs.m3)(de),Ie=(0,ve.w)().getVariables().map(qe=>({value:"$"+qe.name,label:"$"+qe.name})),Ve=(0,a.useCallback)(qe=>{Z({..._,byField:qe?.value})},[Z,_]),Je=(0,a.useCallback)(qe=>{Z({..._,mode:qe?.value})},[Z,_]);return a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Mode",labelWidth:8,grow:!0},a.createElement(re.l6,{options:wr,value:_.mode??ja.W.outer,onChange:Je}))),a.createElement(ge.C,null,a.createElement(j.I,{label:"Field",labelWidth:8,grow:!0},a.createElement(re.l6,{options:[...Pe,...Ie],value:_.byField,onChange:Ve,placeholder:"time",isClearable:!0}))))}const to={id:k.F.joinByField,aliasIds:[k.F.seriesToColumns],editor:ts,transformation:ee.c.joinByFieldTransformer,name:ee.c.joinByFieldTransformer.name,description:ee.c.joinByFieldTransformer.description,categories:new Set([C.m.Combine]),help:ue(k.F.joinByField).helperDocs};var mo=e(6829);const _o=[{value:mo.n.Columns,label:"Columns"},{value:mo.n.Rows,label:"Rows"}],Hi=({input:W,options:_,onChange:Z})=>{const{labelNames:Pe,selected:Ie}=(0,a.useMemo)(()=>{let qe=[],dt={};for(const Pt of W)for(const $t of Pt.fields)if($t.labels)for(const Lt of Object.keys($t.labels))dt[Lt]||(qe.push({value:Lt,label:Lt}),dt[Lt]=!0);const Dt=new Set(_.keepLabels?.length?_.keepLabels:Object.keys(dt));return{labelNames:qe,selected:Dt}},[_.keepLabels,W]),Ve=qe=>{Z({..._,valueLabel:qe?.value})},Je=qe=>{if(Ie.has(qe)?Ie.delete(qe):Ie.add(qe),Ie.size===Pe.length||!Ie.size){const{keepLabels:dt,...Dt}=_;Z(Dt)}else Z({..._,keepLabels:[...Ie]})};return a.createElement("div",null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Mode",labelWidth:20},a.createElement(ne.z,{options:_o,value:_.mode??mo.n.Columns,onChange:qe=>Z({..._,mode:qe})}))),a.createElement(ge.C,null,a.createElement(j.I,{label:"Labels",labelWidth:20},a.createElement(xt.B,{gap:1,wrap:"wrap"},Pe.map((qe,dt)=>{const Dt=qe.label;return a.createElement(jn.m,{key:`${Dt}/${dt}`,onClick:()=>Je(Dt),label:Dt,selected:Ie.has(Dt)})})))),_.mode!==mo.n.Rows&&a.createElement(ge.C,null,a.createElement(j.I,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},a.createElement(re.l6,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:Pe,value:_?.valueLabel,onChange:Ve,className:"min-width-16"}))))},ns={id:k.F.labelsToFields,editor:Hi,transformation:ee.c.labelsToFieldsTransformer,name:ee.c.labelsToFieldsTransformer.name,description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column.`,categories:new Set([C.m.Reformat]),help:ue(k.F.labelsToFields).helperDocs},ji=({options:W,onChange:_})=>{const[Z,de]=(0,a.useState)(!1),Pe=(0,a.useCallback)(qe=>{_({...W,limitField:Number(qe.currentTarget.value)})},[_,W]),Ie=(0,a.useCallback)(qe=>{de(!(0,Se.N_)(qe)),_({...W,limitField:qe})},[_,W]),Je=(0,ve.w)().getVariables().map(qe=>({value:qe.name,label:qe.label||qe.name,origin:Be.$0.Template}));return G.$.featureToggles.transformationsVariableSupport?a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(ke.y,{invalid:Z,error:"Value needs to be an integer or a variable",value:String(W.limitField),onChange:Ie,placeholder:"Value or variable",suggestions:Je}))):a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Limit",labelWidth:8},a.createElement(Me.p,{placeholder:"Limit count",pattern:"[0-9]*",value:W.limitField,onChange:Pe,width:25}))))},Si={id:k.F.limit,editor:ji,transformation:ee.c.limitTransformer,name:ee.c.limitTransformer.name,description:"Limit the number of items displayed.",categories:new Set([C.m.Filter]),help:ue(k.F.limit).helperDocs},Gi=({input:W,options:_,onChange:Z})=>W.length<=1?a.createElement(tr.P,null,"Merge has no effect when applied on a single frame."):null,ii={id:k.F.merge,editor:Gi,transformation:ee.c.mergeTransformer,name:ee.c.mergeTransformer.name,description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`,categories:new Set([C.m.Combine]),help:ue(k.F.merge).helperDocs};var Xs=e(82280);const li=({options:W,input:_,onChange:Z})=>{const{indexByName:de,excludeByName:Pe,renameByName:Ie,includeByName:Ve}=W,Je=(0,Se.ZI)(_),qe=(0,a.useMemo)(()=>Qi(Je,de),[Je,de]),dt=Ve&&Object.keys(Ve).length>0?"include":"exclude",Dt=(0,a.useCallback)((Ot,Ft)=>{Z({...W,excludeByName:{...Pe,[Ot]:Ft}})},[Z,W,Pe]),Pt=(0,a.useCallback)((Ot,Ft)=>{const bn={...W,includeByName:{...Ve,[Ot]:!Ft}};Z(bn)},[Z,W,Ve]),$t=(0,a.useCallback)(Ot=>{if(!Ot||!Ot.destination)return;const Ft=Ot.source.index,bn=Ot.destination.index;Ft!==bn&&Z({...W,indexByName:xi(Je,Ft,bn)})},[Z,W,Je]),Lt=(0,a.useCallback)((Ot,Ft)=>{Z({...W,renameByName:{...W.renameByName,[Ot]:Ft}})},[Z,W]);return _.length>1?a.createElement(tr.P,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):a.createElement(Es.JY,{onDragEnd:$t},a.createElement(Es.gL,{droppableId:"sortable-fields-transformer",direction:"vertical"},Ot=>a.createElement("div",{ref:Ot.innerRef,...Ot.droppableProps},qe.map((Ft,bn)=>{const Ta=Ve&&Ft in Ve?Ve[Ft]:!1,wa=dt==="include"?Ta:!Pe[Ft],La=dt==="include"?Pt:Dt;return a.createElement(Mi,{fieldName:Ft,renamedFieldName:Ie[Ft],index:bn,onToggleVisibility:La,onRenameField:Lt,visible:wa,key:Ft})}),Ot.placeholder)))};li.displayName="OrganizeFieldsTransformerEditor";const Mi=({fieldName:W,renamedFieldName:_,index:Z,visible:de,onToggleVisibility:Pe,onRenameField:Ie})=>{const Ve=(0,Tt.of)(Ks);return a.createElement(Es.sx,{draggableId:W,index:Z},Je=>a.createElement("div",{className:"gf-form-inline",ref:Je.innerRef,...Je.draggableProps},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},a.createElement("span",{...Je.dragHandleProps},a.createElement(us.I,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:Ve.draggable})),a.createElement(Ts.K,{className:Ve.toggle,size:"md",name:de?"eye":"eye-slash",onClick:()=>Pe(W,de),tooltip:de?"Disable":"Enable"}),a.createElement("span",{className:Ve.name,title:W},W)),a.createElement(Me.p,{className:"flex-grow-1",defaultValue:_||"",placeholder:`Rename ${W}`,onBlur:qe=>Ie(W,qe.currentTarget.value)}))))};Mi.displayName="DraggableFieldName";const Ks=W=>({toggle:(0,ot.css)`
    margin: 0 8px;
    color: ${W.colors.text.secondary};
  `,draggable:(0,ot.css)`
    opacity: 0.4;
    &:hover {
      color: ${W.colors.text.maxContrast};
    }
  `,name:(0,ot.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${W.typography.bodySmall.fontSize};
    font-weight: ${W.typography.fontWeightMedium};
  `}),xi=(W,_,Z)=>{const de=Array.from(W),[Pe]=de.splice(_,1);return de.splice(Z,0,Pe),de.reduce((Ie,Ve,Je)=>(Ie[Ve]=Je,Ie),{})},Qi=(W,_={})=>{if(!_||Object.keys(_).length===0)return W;const Z=(0,Xs.X)(_);return W.sort(Z)},kr={id:k.F.organize,editor:li,transformation:ee.c.organizeFieldsTransformer,name:ee.c.organizeFieldsTransformer.name,description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data.",categories:new Set([C.m.ReorderAndRename]),help:ue(k.F.organize).helperDocs};var no=e(21128),Zs=e(13544);const bo=({options:W,onChange:_})=>{const Z=[{label:"Series to rows",value:no.rV.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:no.rV.ReduceFields,description:"Collapse each field into a single value"}],de=(0,a.useCallback)(Ve=>{const Je=Ve.value;_({...W,mode:Je,includeTimeField:Je===no.rV.ReduceFields?!!W.includeTimeField:!1})},[_,W]),Pe=(0,a.useCallback)(()=>{_({...W,includeTimeField:!W.includeTimeField})},[_,W]),Ie=(0,a.useCallback)(()=>{_({...W,labelsToFields:!W.labelsToFields})},[_,W]);return a.createElement(a.Fragment,null,a.createElement(j.I,{label:"Mode","data-testid":Zs.Tp.components.Transforms.Reduce.modeLabel,grow:!0,labelWidth:16},a.createElement(re.l6,{options:Z,value:Z.find(Ve=>Ve.value===W.mode)||Z[0],onChange:de})),a.createElement(j.I,{label:"Calculations","data-testid":Zs.Tp.components.Transforms.Reduce.calculationsLabel,grow:!0,labelWidth:16},a.createElement(Mt.S,{placeholder:"Choose Stat",allowMultiple:!0,stats:W.reducers||[],onChange:Ve=>{_({...W,reducers:Ve})}})),W.mode===no.rV.ReduceFields&&a.createElement(j.I,{htmlFor:"include-time-field",labelWidth:16,label:"Include time"},a.createElement(Qt.K,{id:"include-time-field",value:!!W.includeTimeField,onChange:Pe})),W.mode!==no.rV.ReduceFields&&a.createElement(j.I,{htmlFor:"labels-to-fields",labelWidth:16,label:"Labels to fields"},a.createElement(Qt.K,{id:"labels-to-fields",value:!!W.labelsToFields,onChange:Ie})))},Po={id:k.F.reduce,editor:bo,transformation:ee.c.reduceTransformer,name:ee.c.reduceTransformer.name,description:ee.c.reduceTransformer.description,categories:new Set([C.m.CalculateNewFields]),help:ue(k.F.reduce).helperDocs};class ao extends a.PureComponent{constructor(_){super(_),this.handleRegexChange=Z=>{const de=Z.currentTarget.value;let Pe=!0;if(de)try{de&&(0,_r.dO)(de)}catch{Pe=!1}this.setState(Ie=>({...Ie,regex:de,isRegexValid:Pe}))},this.handleRenameChange=Z=>{const de=Z.currentTarget.value;this.setState(Pe=>({...Pe,renamePattern:de}))},this.handleRegexBlur=Z=>{const de=Z.currentTarget.value;let Pe=!0;try{de&&(0,_r.dO)(de)}catch{Pe=!1}this.setState({isRegexValid:Pe},()=>{Pe&&this.props.onChange({...this.props.options,regex:de})})},this.handleRenameBlur=Z=>{const de=Z.currentTarget.value;this.setState({renamePattern:de},()=>this.props.onChange({...this.props.options,renamePattern:de}))},this.state={regex:_.options.regex,renamePattern:_.options.renamePattern,isRegexValid:!0}}render(){const{regex:_,renamePattern:Z,isRegexValid:de}=this.state;return a.createElement(a.Fragment,null,a.createElement(j.I,{label:"Match",labelWidth:16,invalid:!de,error:de?void 0:"Invalid pattern"},a.createElement(Me.p,{placeholder:"Regular expression pattern",value:_||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})),a.createElement(j.I,{label:"Replace",labelWidth:16},a.createElement(Me.p,{placeholder:"Replacement pattern",value:Z||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))}}const ci={id:k.F.renameByRegex,editor:ao,transformation:ee.c.renameByRegexTransformer,name:ee.c.renameByRegexTransformer.name,description:"Renames part of the query result by using regular expression with placeholders.",categories:new Set([C.m.ReorderAndRename]),help:ue(k.F.renameByRegex).helperDocs},di=({input:W,options:_,onChange:Z})=>null,Oi={id:k.F.seriesToRows,editor:di,transformation:ee.c.seriesToRowsTransformer,name:ee.c.seriesToRowsTransformer.name,description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`,categories:new Set([C.m.Combine,C.m.Reformat]),help:ue(k.F.seriesToRows).helperDocs},Yi=({input:W,options:_,onChange:Z})=>{const de=(0,Se.ZI)(W).map(qe=>({label:qe,value:qe})),Ie=(0,ve.w)().getVariables().map(qe=>({label:"$"+qe.name,value:"$"+qe.name})),Ve=(0,a.useCallback)((qe,dt)=>{Z({..._,sort:[dt]})},[Z,_]),Je=_.sort?.length?_.sort:[{}];return a.createElement("div",null,Je.map((qe,dt)=>a.createElement(ge.C,{key:`${qe.field}/${dt}`},a.createElement(j.I,{label:"Field",labelWidth:10,grow:!0},a.createElement(re.l6,{options:G.$.featureToggles.transformationsVariableSupport?[...de,...Ie]:de,value:qe.field,placeholder:"Select field",onChange:Dt=>{Ve(dt,{...qe,field:Dt.value})}})),a.createElement(j.I,{label:"Reverse"},a.createElement(Qt.K,{value:!!qe.desc,onChange:()=>{Ve(dt,{...qe,desc:!qe.desc})}})))))},Ii={id:k.F.sortBy,editor:Yi,transformation:ee.c.sortByTransformer,name:ee.c.sortByTransformer.name,description:ee.c.sortByTransformer.description,categories:new Set([C.m.ReorderAndRename]),help:ue(k.F.sortBy).helperDocs};function Ai({options:W,onChange:_}){const[Z,de]=(0,a.useState)(W),Pe=Ji(),Ie=ui(),Ve=()=>{Z.push({path:""}),de([...Z]),dt()},Je=Dt=>{Z&&(Z.splice(Dt,1),de([...Z]),dt())},qe=(Dt,Pt,$t)=>{Z&&($t==="alias"?Z[Pt].alias=Dt.currentTarget.value??"":Z[Pt].path=Dt.currentTarget.value??"",de([...Z]))},dt=()=>{_(Z)};return a.createElement("ol",{className:(0,ot.cx)(Ie.list)},Z&&Z.map((Dt,Pt)=>a.createElement("li",{key:Pt},a.createElement(ge.C,null,a.createElement(j.I,{label:"Field",tooltip:Pe.field,grow:!0},a.createElement(Me.p,{onBlur:dt,onChange:$t=>qe($t,Pt,"path"),value:Dt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),a.createElement(j.I,{label:"Alias",tooltip:Pe.alias},a.createElement(Me.p,{width:12,value:Dt.alias,onBlur:dt,onChange:$t=>qe($t,Pt,"alias")})),a.createElement(j.I,{className:(0,ot.cx)(Ie.removeIcon)},a.createElement(Ts.K,{onClick:()=>Je(Pt),name:"trash-alt",tooltip:"Remove path"}))))),a.createElement(j.I,null,a.createElement(oe.$n,{icon:"plus",onClick:()=>Ve(),variant:"secondary"},"Add path")))}const Ji=()=>{const W=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:a.createElement("div",null,"A valid path of an json object.",a.createElement("div",null,a.createElement("strong",null,"JSON Value:")),a.createElement("pre",null,a.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),a.createElement("strong",null,"Valid Paths:"),W.map((_,Z)=>a.createElement("p",{key:Z},a.createElement("code",null,_.path),a.createElement("i",null,_.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function ui(){return{list:(0,ot.css)`
      margin-left: 20px;
    `,removeIcon:(0,ot.css)`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var sr=e(14236),fo=(W=>(W.JSON="json",W.KeyValues="kvp",W.Auto="auto",W))(fo||{});const fr={id:fo.JSON,name:"JSON",description:"Parse JSON string",parse:W=>JSON.parse(W)};function gr(W){const _=[];let Z="",de="";const Pe={};for(let Ie=0;Ie<W.length;Ie++){let Ve=W[Ie];Ve===Z&&(Z="",Ve=W[++Ie]);const Je=Ve==="\\";if(Je&&(Ve=W[++Ie]),Je||Z.length){_.push(Ve);continue}switch((Ve==='"'||Ve==="'")&&(Z=Ve),Ve){case":":case"=":_.length&&(de&&(Pe[de]=""),de=_.join(""),_.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:_.length&&de===""&&(Pe[_.join("")]="",_.length=0);case",":case";":case"&":case"{":case"}":if(_.length){const qe=_.join("");de.length?(Pe[de]=qe,de=""):de=qe,_.length=0}break;default:_.push(Ve),Ie===W.length-1&&de===""&&_.length&&(Pe[_.join("")]="",_.length=0)}}return de.length&&(Pe[de]=_.join("")),Pe}const mi={id:fo.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:gr},fi=[fr,mi],zo={id:fo.Auto,name:"Auto",description:"parse new fields automatically",parse:W=>{for(const _ of fi)try{const Z=_.parse(W);if(Z!=null)return Z}catch{}}},gi=new ye.O(()=>[...fi,zo]),pi={id:k.F.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(W,_)=>Z=>Z.pipe((0,zt.T)(de=>pi.transformer(W,_)(de))),transformer:W=>_=>_.map(Z=>Hr(Z,W))};function Hr(W,_){if(!_.source)return W;const Z=(0,Os.findField)(W,_.source);if(!Z)return W;const de=gi.getIfExists(_.format??fo.Auto);if(!de)throw new Error("unkonwn extractor");const Pe=W.length,Ie=[],Ve=new Map;for(let qe=0;qe<Pe;qe++){let dt=Z.values[qe];if((0,h.isString)(dt))try{dt=de.parse(dt)}catch{dt={}}if(dt!=null){if(_.format===fo.JSON&&_.jsonPaths&&_.jsonPaths?.length>0){const Dt={},Pt=_.jsonPaths.filter($t=>$t.path);Pt.length>0&&(Pt.forEach($t=>{const Lt=$t.alias&&$t.alias.length>0?$t.alias:$t.path;Dt[Lt]=(0,h.get)(dt,$t.path)??"Not Found"}),dt=Dt)}for(const[Dt,Pt]of Object.entries(dt)){let $t=Ve.get(Dt);$t==null&&($t=new Array(Pe).fill(void 0),Ve.set(Dt,$t),Ie.push(Dt)),$t[qe]=Pt}}}const Je=Ie.map(qe=>{const dt=Ve.get(qe),Dt={name:qe,values:dt,type:dt?(0,sr.oE)(dt.find(Pt=>Pt!=null)):H.PU.other,config:{}};return G.$.featureToggles.extractFieldsNameDeduplication&&(Dt.name=(0,me.fk)(Dt,W)),Dt});if(_.keepTime){const qe=(0,Os.findField)(W,"Time")||(0,Os.findField)(W,"time");qe&&Je.unshift(qe)}return _.replace||Je.unshift(...W.fields),{...W,fields:Je}}const Xi={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},Ri=({input:W,options:_,onChange:Z})=>{const de=dt=>{Z({..._,source:dt})},Pe=dt=>{Z({..._,format:dt?.value})},Ie=dt=>{Z({..._,jsonPaths:dt})},Ve=()=>{_.replace&&(_.keepTime=!1),Z({..._,replace:!_.replace})},Je=()=>{Z({..._,keepTime:!_.keepTime})},qe=gi.selectOptions(_.format?[_.format]:void 0);return a.createElement("div",null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Source",labelWidth:16},a.createElement(ws.O,{context:{data:W},value:_.source??"",onChange:de,item:Xi}))),a.createElement(ge.C,null,a.createElement(j.I,{label:"Format",labelWidth:16},a.createElement(re.l6,{value:qe.current[0],options:qe.options,onChange:Pe,width:24,placeholder:"Auto"}))),_.format==="json"&&a.createElement(Ai,{options:_.jsonPaths??[],onChange:Ie}),a.createElement(ge.C,null,a.createElement(j.I,{label:"Replace all fields",labelWidth:16},a.createElement(Qt.K,{value:_.replace??!1,onChange:Ve}))),_.replace&&a.createElement(ge.C,null,a.createElement(j.I,{label:"Keep time",labelWidth:16},a.createElement(Qt.K,{value:_.keepTime??!1,onChange:Je}))))},Zi={id:k.F.extractFields,editor:Ri,transformation:pi,name:pi.name,description:"Parse fields from content (JSON, labels, etc).",categories:new Set([C.m.Reformat]),help:ue(k.F.extractFields).helperDocs};var hi=e(51986);const go={id:k.F.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels.",defaultOptions:{},operator:(W,_)=>Z=>Z.pipe((0,zt.T)(de=>go.transformer(W,_)(de))),transformer:W=>_=>!_||!_.length?_:[Li(W,_)]};function Li(W,_){if(!W.value?.length)return vi("No value labele configured");const Z=(0,Se.aG)(_);if(Z.size<1)return vi("No labels in result");if(!Z.has(W.value))return vi("Value label not found");let de=W.join?.length?W.join:Array.from(Z);de=de.filter(Pt=>Pt!==W.value);const Pe=new Set,Ie=new Map,Ve={};for(const Pt of _)for(const $t of Pt.fields)if($t.labels&&$t.type!==H.PU.time){const Lt=de.map(La=>$t.labels[La]),Ot=Lt.join(",");let Ft=Ie.get(Ot);Ft||(Ft={keys:Lt,values:{}},Ie.set(Ot,Ft));const bn=$t.labels[W.value],Ta=$t.values,wa=Ft.values[bn];wa?Ft.values[bn]=wa.concat(Ta):Ft.values[bn]=Ta,Ve[bn]||(Ve[bn]=$t),Pe.add(bn)}const Je=Array.from(Pe),qe=de.map(()=>[]),dt=Je.map(()=>[]);for(const Pt of Ie.values()){let $t=-1,Lt=!1;for(;!Lt;){$t++,Lt=!0;for(let Ot=0;Ot<de.length;Ot++)qe[Ot].push(Pt.keys[Ot]);for(let Ot=0;Ot<Je.length;Ot++){const Ft=Je[Ot],bn=Pt.values[Ft]??[];dt[Ot].push(bn[$t]),bn.length>$t+1&&(Lt=!1)}}}const Dt={fields:[],length:dt[0].length};for(let Pt=0;Pt<de.length;Pt++)Dt.fields.push({name:de[Pt],config:{},type:H.PU.string,values:qe[Pt]});for(let Pt=0;Pt<Je.length;Pt++){const $t=Ve[Je[Pt]];Dt.fields.push({name:Je[Pt],config:{},type:$t.type??H.PU.number,values:dt[Pt]})}return Dt}function vi(W){return{meta:{notices:[{severity:"error",text:W}]},fields:[{name:"Error",type:H.PU.string,config:{},values:[W]}],length:0}}function hl({input:W,options:_,onChange:Z}){const de=(0,a.useMemo)(()=>{let qe;const dt=(0,Se.aG)(W),Dt=Array.from(dt).map(bn=>({label:bn,value:bn}));let Pt=Dt.find(bn=>bn.value===_.value);!Pt&&_.value&&(Pt={label:`${_.value} (not found)`,value:_.value},Dt.push(Pt)),W.length?dt.size===0&&(qe=a.createElement(wt.F,{title:"No labels found"},"The input does not contain any labels")):qe=a.createElement(wt.F,{title:"No input found"},"No input (or labels) found"),dt.delete(_.value);const $t=Array.from(dt).map(bn=>({label:bn,value:bn}));let Lt=$t;const Ot=!!_.join?.length;let Ft="Join";return Ot?Lt=$t.filter(bn=>!_.join.includes(bn.value)):Ft=$t.map(bn=>bn.value).join(", "),{warn:qe,valueOptions:Dt,valueOption:Pt,joinOptions:$t,addOptions:Lt,addText:Ft,hasJoin:Ot,key:Date.now()}},[_,W]),Pe=(qe,dt)=>{if(!_.join)return;const Dt=_.join.slice();if(dt)Dt[qe]=dt;else if(Dt.splice(qe,1),!Dt.length){Z({..._,join:void 0});return}const Pt=new Set(Dt);_.value&&Pt.delete(_.value),Z({..._,join:Array.from(Pt)})},Ie=qe=>{const dt=qe?.value;if(!dt)return;const Dt=_.join?_.join.slice():[];Dt.push(dt),Z({..._,join:Dt})},Ve=10,Je="No labels found";return a.createElement("div",null,de.warn,a.createElement(ge.C,null,a.createElement(j.I,{error:"required",invalid:!_.value?.length,label:"Value",labelWidth:Ve,tooltip:"Select the label indicating the values name"},a.createElement(re.l6,{options:de.valueOptions,value:de.valueOption,onChange:qe=>Z({..._,value:qe.value}),noOptionsMessage:Je}))),de.hasJoin?_.join.map((qe,dt)=>a.createElement(ge.C,{key:qe+dt},a.createElement(j.I,{label:"Join",labelWidth:Ve,error:"Unable to join by the value label",invalid:qe===_.value},a.createElement(Zn.Gy,null,a.createElement(re.l6,{options:de.joinOptions,value:de.joinOptions.find(Dt=>Dt.value===qe),isClearable:!0,onChange:Dt=>Pe(dt,Dt?.value),noOptionsMessage:Je}),!!(de.addOptions.length&&dt===_.join.length-1)&&a.createElement(hi.i,{icon:"plus",label:"",options:de.addOptions,onChange:Ie,variant:"secondary"}))))):a.createElement(a.Fragment,null,!!de.addOptions.length&&a.createElement(ge.C,null,a.createElement(j.I,{label:"Join",labelWidth:Ve},a.createElement(re.l6,{options:de.addOptions,placeholder:de.addText,onChange:Ie,noOptionsMessage:Je})))))}const Xo={id:go.id,editor:hl,transformation:go,name:go.name,description:go.description,state:Xe.pn.beta,categories:new Set([C.m.Combine]),help:ue(go.id).helperDocs};var Cr=e(84350),so=e(69862),_s=e(65474),Ei=e(67140);const Fr={id:k.F.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:W=>_=>_.pipe((0,so.Z)(Z=>(0,_s.H)(Co(Z,W))))};async function Co(W,_){const Z=q.sJ.get(le.Ct.byName).get(_?.lookupField),de=await(0,Ei.q3)(_?.gazetteer??Ei.fx);return de.frame?qi(W,de,Z):Promise.reject("missing frame in gazetteer")}function qi(W,_,Z){const de=_.frame()?.fields;return de?W.map(Pe=>{const Ie=Pe.length,Ve=[];for(const Je of Pe.fields)if(Ve.push(Je),Z(Je,Pe,W)){const qe=Je.values,dt=[];for(const Dt of de){const Pt=new Array(Ie);dt.push(Pt),Ve.push({...Dt,values:Pt})}for(let Dt=0;Dt<_.count;Dt++){const Pt=_.find(qe[Dt]);if(Pt?.index!=null)for(let $t=0;$t<de.length;$t++)dt[$t][Dt]=de[$t].values[Pt.index]}}return{...Pe,fields:Ve}}):W}const Bi={settings:{width:30,filter:W=>W.type===H.PU.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},el={settings:{}},tl=({input:W,options:_,onChange:Z})=>{const de=(0,a.useCallback)(Ie=>{Z({..._,lookupField:Ie})},[Z,_]),Pe=(0,a.useCallback)(Ie=>{Z({..._,gazetteer:Ie})},[Z,_]);return a.createElement("div",null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Field",labelWidth:12},a.createElement(ws.O,{context:{data:W},value:_?.lookupField??"",onChange:de,item:Bi}))),a.createElement(ge.C,null,a.createElement(j.I,{label:"Lookup",labelWidth:12},a.createElement(Cr.G,{value:_?.gazetteer??"",context:{data:W},item:el,onChange:Pe}))))},it={id:k.F.fieldLookup,editor:tl,transformation:Fr,name:Fr.name,description:"Use a field value to lookup additional fields from an external source. This currently supports spatial data, but will eventually support more formats.",state:Xe.pn.alpha,categories:new Set([C.m.PerformSpatialOperations]),help:ue(k.F.fieldLookup).helperDocs};var _e=e(35602),st=e(64586);const ht=(W,_,Z=[])=>(_===0?Z.push(W):W.forEach(de=>{ht(de,_-1,Z)}),Z);function Te(W){const _=W[0].length,Z=W.length,de=new Map;for(let Pe=0;Pe<_;Pe++){let Ie=de;for(let Ve=0;Ve<Z;Ve++){let Je=W[Ve][Pe],qe=Ie.get(Je);qe==null&&(qe=Ve===Z-1?[]:new Map,Ie.set(Je,qe)),Ie=qe}Ie.push(Pe)}return ht(de,Z)}const we={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function Ue(W,_,Z){return _.map((de,Pe)=>W.withNames?`${de}${W.separator1}${Z[Pe]}`:Z[Pe]).join(W.separator2)}function Ge(W,_){const Z={};return W.forEach((de,Pe)=>{Z[de]=String(_[Pe])}),Z}const ct={id:k.F.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{keepFields:!1},operator:(W,_)=>Z=>Z.pipe((0,zt.T)(de=>ct.transformer(W,_)(de))),transformer:(W,_)=>{const Z=(0,_e.R)(_,{names:W.fields});if(!Z)return st.W.transformer({},_);const de=(0,q.NS)(Z);return Pe=>Pe.length?vt(Pe[0],de,W):Pe}};function vt(W,_,Z){const de=W.fields.filter(Je=>_(Je,W,[W]));if(!de.length)return[W];const Pe=de.map(Je=>Je.values),Ie=de.map(Je=>Je.name),Ve={...we,...Z?.naming};return Te(Pe).map(Je=>{let qe=W.name,dt={};if(Ve.asLabels)dt=Ge(Ie,de.map((Pt,$t)=>Pe[$t][Je[0]]));else{let Pt=Ue(Ve,Ie,de.map(($t,Lt)=>Pe[Lt][Je[0]]));Ve?.append&&W.name&&(Pt=`${W.name} ${Pt}`),qe=Pt}let Dt=W.fields;if(!Z?.keepFields){const Pt=new Set(Ie);Dt=W.fields.filter($t=>!Pt.has($t.name))}return{name:qe,meta:W.meta,length:Je.length,fields:Dt.map(Pt=>{const $t=Pt.values,Lt=Array(Je.length);for(let Ot=0;Ot<Je.length;Ot++)Lt[Ot]=$t[Je[Ot]];return{name:Pt.name,type:Pt.type,config:Pt.config,labels:{...Pt.labels,...dt},values:Lt}})}})}function At({input:W,options:_,onChange:Z}){const de=(0,bs.sE)(W),Pe=(0,bs.m3)(de),Ie=(0,a.useMemo)(()=>{const $t=new Set(_.fields);return $t.size<1?Pe:Pe.filter(Lt=>!$t.has(Lt.value))},[Pe,_]),Ve=(0,a.useCallback)($t=>{if(!$t.value)return;const Lt=new Set(_.fields);Lt.add($t.value),Z({..._,fields:[...Lt]})},[Z,_]);let Je;($t=>{$t[$t.asLabels=0]="asLabels",$t[$t.frameName=1]="frameName"})(Je||(Je={}));const qe=[{label:"As label",value:0},{label:"As frame name",value:1}],dt=[{label:"Yes",value:!0},{label:"No",value:!1}],Dt=(0,a.useCallback)($t=>{if(!$t)return;const Lt=new Set(_.fields);Lt.delete($t),Z({..._,fields:[...Lt]})},[Z,_]);if(W.length>1)return a.createElement(tr.P,null,"Partition by values only works with a single frame.");const Pt=[...new Set(_.fields)];return a.createElement("div",null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Field",labelWidth:10,grow:!0},a.createElement(Zn.Gy,null,Pt.map($t=>a.createElement(oe.$n,{key:$t,icon:"times",variant:"secondary",size:"md",onClick:()=>Dt($t)},$t)),Ie.length&&a.createElement(hi.i,{variant:"secondary",size:"md",options:Ie,onChange:Ve,label:"Select field",icon:"plus"})))),a.createElement(ge.C,null,a.createElement(j.I,{tooltip:"Sets how the names of the selected fields are displayed. As frame name is usually better for tabular data",label:"Naming",labelWidth:10},a.createElement(ne.z,{options:qe,value:_.naming?.asLabels===void 0||_.naming.asLabels?0:1,onChange:$t=>Z({..._,naming:{..._.naming,asLabels:$t===0}})}))),a.createElement(ge.C,null,a.createElement(j.I,{tooltip:"Keeps the partition fields in the frames.",label:"Keep fields",labelWidth:16},a.createElement(ne.z,{options:dt,value:_.keepFields,onChange:$t=>Z({..._,keepFields:$t})}))))}const jt={id:k.F.partitionByValues,editor:At,transformation:ct,name:ct.name,description:ct.description,state:Xe.pn.alpha,categories:new Set([C.m.Reformat]),help:ue(k.F.partitionByValues).helperDocs};var qt=e(41260),an=e(37471),xn=e(73060),Un=(W=>(W.TimeSeriesWide="wide",W.TimeSeriesLong="long",W.TimeSeriesMulti="multi",W.TimeSeriesMany="many",W))(Un||{});function Cn(W){if(!Array.isArray(W)||W.length===0)return W;const _=[];for(const Z of Ln(W)){const de=Z.fields[0];if(!de||de.type!==H.PU.time)continue;const Pe=[],Ie=[];for(const Ve of Z.fields)switch(Ve.type){case H.PU.number:case H.PU.boolean:Pe.push(Ve);break;case H.PU.string:Ie.push(Ve);break}for(const Ve of Pe)if(Ie.length){const Je=new Map;for(let qe=0;qe<Z.length;qe++){const dt=de.values[qe],Dt=Ve.values[qe];if(Dt===void 0||dt==null)continue;const Pt=Ie.map(Lt=>Lt.values[qe]).join("/");let $t=Je.get(Pt);if(!$t){$t={key:Pt,time:[],value:[],labels:{}};for(const Lt of Ie)$t.labels[Lt.name]=Lt.values[qe];Je.set(Pt,$t)}$t.time.push(dt),$t.value.push(Dt)}for(const qe of Je.values())_.push({name:Z.name,refId:Z.refId,meta:{...Z.meta,type:qt.m.TimeSeriesMulti},fields:[{...de,values:qe.time},{...Ve,values:qe.value,labels:qe.labels}],length:qe.time.length})}else _.push({name:Z.name,refId:Z.refId,meta:{...Z.meta,type:qt.m.TimeSeriesMulti},fields:[de,Ve],length:Z.length})}return _}function Ln(W){if(!Array.isArray(W)||W.length===0)return W;const _=[];for(const Z of W){let de;const Pe=[],Ie={},Ve={},Je={},qe={};for(let Ot=0;Ot<Z.fields.length;Ot++){const Ft=Z.fields[Ot];switch(Ft.type){case H.PU.string:case H.PU.boolean:Ft.name in qe||(qe[Ft.name]=Ot,Ve[Ft.name]=!0);break;case H.PU.time:if(!de){de=Ft;break}default:if(Ft.name in Ie){const wa=Ie[Ft.name];if(Ft.type!==wa)continue}else Ie[Ft.name]=Ft.type,Pe.push(Ft.name);const bn=JSON.stringify(Ft.labels),Ta=Je[bn];if(Ta!==void 0?Ta.push(Ot):Je[bn]=[Ot],Ft.labels!=null)for(const wa in Ft.labels)Ve[wa]=!0}}if(!de)continue;const dt=[],Dt=[],Pt=[],$t=[];for(let Ot=0;Ot<Z.length;Ot++)dt.push({time:de.values[Ot],wideRowIndex:Ot});for(const Ot in Je)Dt.push(Ot);for(const Ot in Ve)Pt.push(Ot);for(const Ot in qe)$t.push(Ot);dt.sort((Ot,Ft)=>Ot.time-Ft.time),Dt.sort(),Pt.sort(),Pe.sort();const Lt=new an.k({...Z,meta:{...Z.meta,type:qt.m.TimeSeriesLong},fields:[{name:de.name,type:de.type}]});for(const Ot of Pe)Lt.addField({name:Ot,type:Ie[Ot]});for(const Ot of Pt)Lt.addField({name:Ot,type:H.PU.string});for(const Ot of dt){const{time:Ft,wideRowIndex:bn}=Ot;for(const Ta of Dt){const wa={};for(const Aa of $t)wa[Aa]=Z.fields[qe[Aa]].values[bn];let La=0;for(const Aa of Je[Ta]){const Dr=Z.fields[Aa];if(La++===0&&Dr.labels!=null)for(const Yo in Dr.labels)wa[Yo]=Dr.labels[Yo];wa[Dr.name]=Dr.values[bn]}wa[de.name]=Ft,Lt.add(wa)}}_.push(Lt)}return _}function la(W){return vt(W,Z=>Z.type===H.PU.string).map(Z=>(Z.meta||(Z.meta={}),Z.meta.type=qt.m.TimeSeriesMulti,Z))}const Xn={id:k.F.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(W,_)=>Z=>Z.pipe((0,zt.T)(de=>Xn.transformer(W,_)(de))),transformer:W=>{const _=W?.format??"wide";if(_==="many"||_==="multi")return Cn;if(_==="long")return Ln;const Z=q.sJ.get(le.Ct.firstTimeField).get({});return de=>{if(!de.length)return[];const Pe=[];for(const Ve of de)Ve.meta?.type===qt.m.TimeSeriesLong?la(Ve).forEach(Je=>Pe.push(Je)):Pe.push(Ve);const Ie=(0,xn.Fd)({frames:Pe,joinBy:Z,keepOriginIndices:!0});return Ie?(Ie.meta||(Ie.meta={}),Ie.meta.type=qt.m.TimeSeriesWide,[Ie]):[]}}},Gn={label:"Wide time series",value:Un.TimeSeriesWide,description:"Creates a single frame joined by time",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is shared time field"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"Multiple value fields of any type"))},Yn={label:"Multi-frame time series",value:Un.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:a.createElement("ul",null,a.createElement("li",null,"Multiple frames"),a.createElement("li",null,"Each frame has two fields: time, value"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"String values are represented as labels"),a.createElement("li",null,"All values are numeric"))},Ma={label:"Long time series",value:Un.TimeSeriesLong,description:"Convert each frame to long format",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is time field"),a.createElement("li",null,"Time in ascending order, but may have duplictes"),a.createElement("li",null,"String values are represented as separate fields rather than as labels"),a.createElement("li",null,"Multiple value fields may exist"))},Ua=[Gn,Yn,Ma];function ha(W){const{options:_,onChange:Z}=W,de=(0,Tt.of)(Ia),Pe=(0,a.useCallback)(Ie=>{Z({..._,format:Ie.value})},[Z,_]);return a.createElement(a.Fragment,null,a.createElement(ge.C,null,a.createElement(j.I,{label:"Format",labelWidth:12},a.createElement(re.l6,{width:35,options:Ua,value:Ua.find(Ie=>Ie.value===Un.TimeSeriesMulti&&_.format===Un.TimeSeriesMany?!0:Ie.value===_.format)||Ua[0],onChange:Pe,className:"flex-grow-1"}))),a.createElement(ge.C,null,a.createElement(j.I,{label:"Info",labelWidth:12},a.createElement("div",{className:de.info},(Ua.find(Ie=>Ie.value===_.format)||Ua[0]).info))))}const Ia=W=>({info:(0,ot.css)`
    margin-left: 20px;
  `}),Xa={id:Xn.id,editor:ha,transformation:Xn,name:Xn.name,description:Xn.description,categories:new Set([C.m.Reformat]),help:ue(Xn.id).helperDocs};var Cs=e(66648),hs=e(48817),As=(W=>(W.linear="linear",W.polynomial="polynomial",W))(As||{});const is={predictionCount:100,modelType:"linear",degree:2},Qs={id:k.F.regression,name:"Regression analysis",operator:(W,_)=>Z=>Z.pipe((0,zt.T)(de=>Qs.transformer(W,_)(de))),transformer:(W,_)=>Z=>{const{predictionCount:de,modelType:Pe,degree:Ie}={...is,...W};if(Z.length===0)return Z;const Ve=q.sJ.get(le.Ct.byName).get(W.yFieldName),Je=q.sJ.get(le.Ct.byName).get(W.xFieldName);let qe,dt,Dt;for(const Aa of Z){const Dr=Aa.fields.find(Yo=>Ve(Yo,Aa,Z));if(Dr){dt=Dr;const Yo=Aa.fields.find(Bp=>Je(Bp,Aa,Z));if(Yo){qe=Yo,Dt=Aa;break}else throw"X and Y fields must be part of the same frame"}}if(!qe||!dt)return Z;let Pt=qe.values[0],$t=qe.values[0];for(let Aa=1;Aa<qe.values.length;Aa++)qe.values[Aa]<Pt&&(Pt=qe.values[Aa]),qe.values[Aa]>$t&&($t=qe.values[Aa]);const Lt=($t-Pt)/(de-1),Ot=[...[...Array(de-1).keys()].map((Aa,Dr)=>Dr*Lt+Pt),$t],Ft=qe.type===H.PU.time?Pt:0,bn=[],Ta=[];for(let Aa=0;Aa<qe.values.length;Aa++)dt.values[Aa]!==null&&!isNaN(dt.values[Aa])&&(Ta.push(qe.values[Aa]-Ft),bn.push(dt.values[Aa]));let wa;switch(Pe){case"linear":wa=new hs.X(Ta,bn);break;case"polynomial":wa=new Cs.Y(Ta,bn,Ie);break;default:return Z}const La={name:`${Pe} regression`,length:Ot.length,fields:[{name:qe.name,type:qe.type,values:Ot,config:{}},{name:`${(0,me.Ct)(dt,Dt,Z)} predicted`,type:dt.type,values:Ot.map(Aa=>wa.predict(Aa-Ft)),config:{}}]};return[...Z,La]}},pr={editor:ws.O,id:"",name:"",settings:{width:24,isClearable:!1}},Ss=20,Ys=({input:W,options:_,onChange:Z})=>{const de=[{label:"Linear",value:As.linear},{label:"Polynomial",value:As.polynomial}];return(0,a.useEffect)(()=>{let Pe,Ie;if(!_.xFieldName){const Ve=q.sJ.get(le.Ct.firstTimeField).get({});for(const Je of W)if(Pe=Je.fields.find(qe=>Ve(qe,Je,W)),Pe)break;if(!Pe){const Je=q.sJ.get(le.Ct.numeric).get({});for(const qe of W)if(Pe=qe.fields.find(dt=>Je(dt,qe,W)),Pe)break}}if(!_.yFieldName){const Ve=q.sJ.get(le.Ct.numeric).get({});for(const Je of W)if(Ie=Je.fields.find(qe=>Ve(qe,Je,W)&&qe!==Pe),Ie)break}Pe&&Ie&&Z({..._,xFieldName:Pe.name,yFieldName:Ie.name})}),a.createElement(a.Fragment,null,a.createElement(j.I,{labelWidth:Ss,label:"X field"},a.createElement(ws.O,{context:{data:W},value:_.xFieldName??"",item:pr,onChange:Pe=>{Z({..._,xFieldName:Pe})}})),a.createElement(j.I,{labelWidth:Ss,label:"Y field"},a.createElement(ws.O,{context:{data:W},value:_.yFieldName??"",item:pr,onChange:Pe=>{Z({..._,yFieldName:Pe})}})),a.createElement(j.I,{labelWidth:Ss,label:"Model type"},a.createElement(re.l6,{value:_.modelType??is.modelType,onChange:Pe=>{Z({..._,modelType:Pe.value??is.modelType})},options:de})),a.createElement(j.I,{labelWidth:Ss,label:"Predicted points",tooltip:"Number of X,Y points to predict"},a.createElement(ms.Q,{value:_.predictionCount??is.predictionCount,onChange:Pe=>{Z({..._,predictionCount:Pe})}})),_.modelType===As.polynomial&&a.createElement(j.I,{labelWidth:Ss,label:"Degree"},a.createElement(re.l6,{value:_.degree??is.degree,options:[{label:"Quadratic",value:2},{label:"Cubic",value:3},{label:"Quartic",value:4},{label:"Quintic",value:5}],onChange:Pe=>{Z({..._,degree:Pe.value})}})))},po={id:k.F.regression,editor:Ys,transformation:Qs,name:Qs.name,description:Qs.description,categories:new Set([C.m.CalculateNewFields]),help:ue(k.F.regression).helperDocs},qs={id:k.F.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config.",defaultOptions:{},operator:W=>_=>_.pipe((0,zt.T)(Z=>Z.map(de=>jr(W,de))))};function jr(W,_){const Z=hn(_,W.mappings??[],!0),{nameField:de,valueField:Pe}=Z;if(!de||!Pe)return _;const Ie=[];for(let Ve=0;Ve<de.values.length;Ve++){const Je=de.values[Ve],qe=Pe.values[Ve],dt=Xt(_,Ve,Z),Dt=zs(_,Ve,Z),Pt={name:`${Je}`,type:Pe.type,values:[qe],config:dt,labels:Dt};Ie.push(Pt)}return{fields:Ie,length:1}}function zs(W,_,Z){const de={...Z.nameField.labels};for(let Pe=0;Pe<W.fields.length;Pe++){const Ie=W.fields[Pe],Ve=(0,me.Ct)(Ie,W),Je=Z.index[Ve];if(Je.handler&&Je.handler.key!==En.Label)continue;const qe=Ie.values[_];qe!=null&&(de[Ve]=qe)}return de}function ia({input:W,options:_,onChange:Z}){return W.length===0?null:a.createElement("div",null,a.createElement(An,{frame:W[0],mappings:_.mappings??[],onChange:de=>Z({..._,mappings:de}),withNameAndValue:!0}))}const ba={id:qs.id,editor:ia,transformation:qs,name:qs.name,description:qs.description,state:Xe.pn.beta,categories:new Set([C.m.Reformat]),help:ue(qs.id).helperDocs};var Va=e(52622),os=e(61983),ys=e(9581),$s=e(96606),Fs=e(31484),fs=e(78134);const To={id:k.F.spatial,name:"Spatial operations",description:"Apply spatial operations to query results.",defaultOptions:{},operator:W=>_=>_.pipe((0,so.Z)(Z=>(0,_s.H)(nl(Z,W))))};function So(W){return W.action===ys.dy.Modify&&W.modify?.op===ys.YD.LineBuilder}async function nl(W,_){const Z=await(0,Fs.nE)(_.source);if(So(_)){const de=await(0,Fs.nE)(_.modify?.target);return W.map(Pe=>{const Ie=(0,Fs.FM)(Pe,Z),Ve=(0,Fs.FM)(Pe,de);if(Ie.field&&Ve.field){const Je=[...Pe.fields],qe=(0,$s.XR)(Ie.field,Ve.field),dt=Je[0];return dt.type===H.PU.geo&&dt!==Ie.field&&dt!==Ve.field?Je[0]=(0,$s.RA)(dt,qe):Je.unshift(qe),{...Pe,fields:Je}}return Pe})}return W.map(de=>{let Pe=(0,Fs.FM)(de,Z);if(Pe.field){if(_.action===ys.dy.Modify){switch(_.modify?.op){case ys.YD.AsLine:let Ve=Pe.field.name;return(!Ve||Ve==="Point")&&(Ve="Line"),{...de,length:1,fields:[{...Pe.field,name:Ve,type:H.PU.geo,values:[(0,fs.tt)(Pe.field)]}]}}return de}const Ie=Pe.derived?[Pe.field,...de.fields]:de.fields.slice(0);if(_.action===ys.dy.Calculate&&(Ie.push((0,fs.pp)(Pe.field,_.calculate??{})),Pe.derived=!0),Pe.derived)return{...de,fields:Ie}}return de})}const Uo=(W,_)=>{const Z=_.options??{};W.addSelect({path:"action",name:"Action",description:"",defaultValue:ys.dy.Prepare,settings:{options:[{value:ys.dy.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:ys.dy.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:ys.dy.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),Z.action===ys.dy.Calculate?W.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:ys.kD.Heading,settings:{options:[{value:ys.kD.Heading,label:"Heading"},{value:ys.kD.Area,label:"Area"},{value:ys.kD.Distance,label:"Distance"}]}}):Z.action===ys.dy.Modify&&W.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:ys.YD.AsLine,settings:{options:[{value:ys.YD.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:ys.YD.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),So(Z)?(W.addNestedOptions({category:["Source"],path:"source",build:(de,Pe)=>{const Ie=Z.source??{mode:Va.aG.Auto};(0,os.G)("Point","",de,Ie)}}),W.addNestedOptions({category:["Target"],path:"modify",build:(de,Pe)=>{const Ie=Z.modify?.target??{mode:Va.aG.Auto};(0,os.G)("Point","target.",de,Ie)}})):(0,os.G)("Location","source.",W,Z.source)},Ps=W=>{(0,a.useEffect)(()=>{if(!W.options.source?.mode){const de=ut(Uo);W.onChange({...de,...W.options}),console.log("geometry useEffect",de)}},[]);const _=Mo((0,Tt.$j)()),Z=rt(W,Uo);return a.createElement("div",null,a.createElement("div",null,Z.items.map(de=>de.render())),a.createElement("div",null,Z.categories.map(de=>a.createElement("div",{key:de.props.id,className:_.wrap},a.createElement("h5",null,de.props.title),a.createElement("div",{className:_.item},de.items.map(Pe=>Pe.render()))))))},Mo=W=>({wrap:(0,ot.css)`
      margin-bottom: 20px;
    `,item:(0,ot.css)`
      border-left: 4px solid ${W.colors.border.strong};
      padding-left: 10px;
    `}),Tr={id:k.F.spatial,editor:Ps,transformation:To,name:To.name,description:To.description,state:Xe.pn.alpha,categories:new Set([C.m.PerformSpatialOperations]),help:ue(k.F.spatial).helperDocs};var Gr=e(19845);const yi={id:k.F.timeSeriesTable,name:"Time series to table",description:"Convert time series data to table rows so that they can be viewed in tabular or sparkline format.",defaultOptions:{},isApplicable:W=>{for(const _ of W)if((0,Gr.aH)(_))return Bs.M.Applicable;return Bs.M.NotApplicable},isApplicableDescription:"The Time series to table transformation requires at least one time series frame to function. You currently have none.",operator:W=>_=>_.pipe((0,zt.T)(Z=>gu(W,Z)))};function gu(W,_){const Z={},de={},Pe=[];let Ie=Nc(_);for(const Ve of Object.keys(Ie)){const Je=_.filter(dt=>dt.refId===Ve);Z[Ve]={},de[Ve]={};const qe=[];Je.forEach(dt=>{dt.fields.forEach(Dt=>{Dt.type===H.PU.number&&Dt.labels&&Object.keys(Dt.labels).forEach(Pt=>{qe.includes(Pt)||(de[Ve][Pt]=Uc(Pt,H.PU.string),qe.push(Pt))})})});for(let dt=0;dt<Je.length;dt++){const Dt=Je[dt];let Pt=null,$t=W[Ve]?.timeField;if($t&&$t.length>0?Pt=Dt.fields.find(Lt=>Lt.name===$t):Pt=Dt.fields.find(Lt=>(0,Gr.hF)(Lt)),!(0,Gr.aH)(Dt)){Pe.push(Dt);continue}for(const Lt of Dt.fields){if(Lt.type!==H.PU.number)continue;const Ot=W[Ve]?.stat??ft.gy.lastNotNull,Ft=(0,ft.Nw)({field:Lt,reducers:[Ot]})[Ot]??null,bn=new an.k;Pt!==void 0&&(bn.addField(Pt),bn.addField(Lt),Z[Ve][`Trend #${Ve}`]===void 0&&(Z[Ve][`Trend #${Ve}`]=Uc(`Trend #${Ve}`,H.PU.frame)),Z[Ve][`Trend #${Ve}`].values.push({...bn,value:Ft,length:Lt.values.length})),qe.forEach(Ta=>{de[Ve][Ta].values.push(Lt.labels?.[Ta]??"")})}}}for(const Ve of Object.keys(Ie)){const Je={},qe=new an.k;qe.refId=Ve;const dt=de[Ve];if(dt!==void 0)for(const[Pt,$t]of Object.entries(dt))Je[Pt]===void 0&&(Je[Pt]=$t);for(const Pt of Object.values(Je))qe.addField(Pt);const Dt=Z[Ve];for(const Pt of Object.values(Dt))qe.addField(Pt);qe.fields.length>0&&Pe.push(qe)}return Pe}function Uc(W,_){return{name:W,type:_,config:{},values:[]}}function Nc(W){let _={};for(const Z of W)Z.refId!==void 0&&(_[Z.refId]===void 0?_[Z.refId]=1:_[Z.refId]++);return _}function pu({input:W,options:_,onChange:Z}){const de=Nc(W),Pe=(0,a.useCallback)((Je,qe)=>{const dt=qe?.value!==void 0?qe.value:"";Z({..._,[Je]:{..._[Je],timeField:dt}})},[Z,_]),Ie=(0,a.useCallback)((Je,qe)=>{const dt=qe[0];dt&&(0,ft.Em)(dt)&&Z({..._,[Je]:{..._[Je],stat:dt}})},[Z,_]);let Ve=[];for(const Je of Object.keys(de)){const qe={},dt=[];for(const Dt of W)if(Dt.refId===Je)for(const Pt of Dt.fields)(0,Gr.hF)(Pt)&&(qe[Pt.name]=Pt);for(const Dt of Object.values(qe)){const{name:Pt}=Dt;dt.push({label:Pt,value:Pt})}Ve.push(a.createElement(ge.C,{key:Je},a.createElement(j.I,null,a.createElement(_a.c,null,`Trend #${Je}`)),a.createElement(j.I,{label:"Time field",tooltip:"The time field that will be used for the time series. If not selected the first found will be used."},a.createElement(re.l6,{onChange:Pe.bind(null,Je),options:dt,value:_[Je]?.timeField,isClearable:!0})),a.createElement(j.I,{label:"Stat",tooltip:"The statistic that should be calculated for this time series."},a.createElement(Mt.S,{stats:[_[Je]?.stat??ft.gy.lastNotNull],onChange:Ie.bind(null,Je),filterOptions:Dt=>Dt.id!==ft.gy.allValues&&Dt.id!==ft.gy.uniqueValues}))))}return a.createElement(a.Fragment,null,Ve)}const hu={id:yi.id,editor:pu,transformation:yi,name:yi.name,description:yi.description,state:Xe.pn.beta,help:ue(yi.id).helperDocs},vu=()=>[Po,Vo,ci,Xr,Oe,kr,to,Oi,ur,cs,ns,Jn,Ii,ii,Nr,ba,gn,Xa,br,Tr,it,Zi,Wt,eo,Si,Xo,jt,...G.$.featureToggles.formatString?[qr]:[],...G.$.featureToggles.regressionTransformation?[po]:[],...G.$.featureToggles.groupToNestedTableTransformation?[Hs]:[],uo,hu];var Wr=e(67278);function Eu(){return new Wr.c(new URL(e.p+e.u(7887),e.b))}function yu(){return[{id:"kusto",name:"kusto",init:Eu}]}var Ga=e(1503),Zo=e(63329),rr=e(58476),wc=e(25213),hr=e(14110),ro=e(66602),or=e(93218),Fc=e(71678),Du=e(17464),vr=e(39070),Wc=e(19361),Qa=e(44836),bu=e(53153),Pu=e(87570),Cu=e(4691),Xl=e(20851),Tu=e(58649);const Js=()=>{const W=!!z.Ay.oauth;return{saml:{bgColor:"#464646",enabled:z.Ay.samlEnabled,name:z.Ay.samlName||Tu.En,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:W&&!!z.Ay.oauth.google,name:z.Ay.oauth?.google?.name||"Google",icon:z.Ay.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:W&&!!z.Ay.oauth.azuread,name:z.Ay.oauth?.azuread?.name||"Microsoft",icon:z.Ay.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:W&&!!z.Ay.oauth.github,name:z.Ay.oauth?.github?.name||"GitHub",icon:z.Ay.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:W&&!!z.Ay.oauth.gitlab,name:z.Ay.oauth?.gitlab?.name||"GitLab",icon:z.Ay.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:W&&!!z.Ay.oauth.grafana_com,name:z.Ay.oauth?.grafana_com?.name||"Grafana.com",icon:z.Ay.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:W&&!!z.Ay.oauth.okta,name:z.Ay.oauth?.okta?.name||"Okta",icon:z.Ay.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:W&&!!z.Ay.oauth.generic_oauth,name:z.Ay.oauth?.generic_oauth?.name||"OAuth",icon:z.Ay.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},js=W=>({button:(0,ot.css)({color:"#d8d9da",position:"relative"}),buttonIcon:(0,ot.css)({position:"absolute",left:W.spacing(1),top:"50%",transform:"translateY(-50%)"}),divider:{base:(0,ot.css)({color:W.colors.text.primary,display:"flex",marginBottom:W.spacing(1),justifyContent:"space-between",textAlign:"center",width:"100%"}),line:(0,ot.css)({width:100,height:10,borderBottom:`1px solid ${W.colors.text}`})}}),Su=()=>{const W=(0,Tt.of)(js);return a.createElement(a.Fragment,null,a.createElement("div",{className:W.divider.base},a.createElement("div",null,a.createElement("div",{className:W.divider.line})),a.createElement("div",null,a.createElement("span",null,!z.Ay.disableLoginForm&&a.createElement("span",null,"or"))),a.createElement("div",null,a.createElement("div",{className:W.divider.line}))),a.createElement("div",{className:"clearfix"}))};function Mu(W,_,Z){return(0,ot.cx)(_.button,(0,ot.css)({backgroundColor:W.bgColor,color:Z.colors.getContrastText(W.bgColor),"&:hover":{backgroundColor:Z.colors.emphasize(W.bgColor,.15),boxShadow:Z.shadows.z1}}))}const Kc=()=>{const W=(0,h.pickBy)(Js(),Pe=>Pe.enabled),_=Object.keys(W).length>0,Z=(0,Tt.$j)(),de=(0,Tt.of)(js);return _?a.createElement(Zn.gW,null,a.createElement(Su,null),Object.entries(W).map(([Pe,Ie])=>{const Ve=Ie.name;return a.createElement(oe.z9,{key:Pe,className:Mu(Ie,de,Z),href:`login/${Ie.hrefName?Ie.hrefName:Pe}`,target:"_self",fullWidth:!0},a.createElement(us.I,{className:de.buttonIcon,name:Ie.icon}),a.createElement(Qa.x6,{i18nKey:"login.services.sing-in-with-prefix"},"Sign in with ",{serviceName:Ve}))})):null},xu=()=>{const W=(0,z.zj)().verifyEmailEnabled?`${(0,z.zj)().appSubUrl}/verify`:`${(0,z.zj)().appSubUrl}/signup`,_=(0,ot.css)({paddingTop:"16px"});return a.createElement(Zn.gW,null,a.createElement("div",{className:_},a.createElement(Qa.x6,{i18nKey:"login.signup.new-to-question"},"New to Grafana?")),a.createElement(oe.z9,{className:(0,ot.css)({width:"100%",justifyContent:"center"}),href:W,variant:"secondary",fill:"outline"},a.createElement(Qa.x6,{i18nKey:"login.signup.button-label"},"Sign up")))},Ou=()=>{const W=(0,Tt.of)(No);return document.title=Wc.M.AppTitle,a.createElement(Pu.A,null,({loginHint:_,passwordHint:Z,disableLoginForm:de,disableUserSignUp:Pe,login:Ie,isLoggingIn:Ve,changePassword:Je,skipPasswordChange:qe,isChangingPassword:dt,showDefaultPasswordWarning:Dt,loginErrorMessage:Pt})=>a.createElement(Xl.GU,{isChangingPassword:dt},!dt&&a.createElement(Xl.qm,null,Pt&&a.createElement(wt.F,{className:W.alert,severity:"error",title:(0,Qa.t)("login.error.title","Login failed")},Pt),!de&&a.createElement(Cu.Q,{onSubmit:Ie,loginHint:_,passwordHint:Z,isLoggingIn:Ve},a.createElement(Zn.Gy,{justify:"flex-end"},!G.$.auth.disableLogin&&a.createElement(oe.z9,{className:W.forgottenPassword,fill:"text",href:`${G.$.appSubUrl}/user/password/send-reset-email`},a.createElement(Qa.x6,{i18nKey:"login.forgot-password"},"Forgot your password?")))),a.createElement(Kc,null),!Pe&&a.createElement(xu,null)),dt&&a.createElement(Xl.qm,null,a.createElement(bu.S,{showDefaultPasswordWarning:Dt,onSubmit:Je,onSkip:()=>qe()}))))},No=W=>({forgottenPassword:(0,ot.css)({padding:0,marginTop:W.spacing(.5)}),alert:(0,ot.css)({width:"100%"})});var Sr=e(17205),Iu=e(25249),Ui=e(10860);function Au({description:W,text:_,url:Z}){const de=(0,Tt.of)(Ru);return a.createElement(Ui.Z,{className:de.card,href:Z},a.createElement(Ui.Z.Heading,null,_),a.createElement(Ui.Z.Description,{className:de.description},W))}const Ru=W=>({card:(0,ot.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,ot.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function wo({navId:W,header:_}){const{node:Z}=(0,Iu.C)(W),de=(0,Tt.of)(Lu),Pe=Z.children?.filter(Ie=>!Ie.hideFromTabs);return a.createElement(Sr.Y,{navId:Z.id},a.createElement(Sr.Y.Contents,null,a.createElement("div",{className:de.content},_,Pe&&Pe.length>0&&a.createElement("section",{className:de.grid},Pe?.map(Ie=>a.createElement(Au,{key:Ie.id,description:Ie.subTitle,text:Ie.text,url:Ie.url??""}))))))}const Lu=W=>({content:(0,ot.css)({display:"flex",flexDirection:"column",gap:W.spacing(2)}),grid:(0,ot.css)({display:"grid",gap:W.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:W.spacing(2,0)})});var vl=e(64388),Zl=e(7392);function ir(){return a.createElement(Sr.Y,{navId:"home",layout:vl.k.Canvas,pageNav:{text:"Page not found"}},a.createElement(Zl.L,{entity:"Page"}))}var Us=e(16233),$c=e(33378),vs=e(10096),Bn=e(31678),Vc=e(72724);const Bu="dddd YYYY-MM-DD HH:mm zz",_c="/admin/authentication/ldap";class Uu extends a.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:_,user:Z}=this.props,Pe=_&&_.nextSync?(0,Vc.LE)(_.nextSync,{format:Bu}):"",Ie=`${_c}?user=${Z&&Z.login}`,Ve=vs.TP.hasPermission(Bn.AccessControlAction.LDAPUsersRead),Je=vs.TP.hasPermission(Bn.AccessControlAction.LDAPUsersSync);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"External sync"),a.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),a.createElement("td",null,a.createElement("span",{className:"label label-tag"},"LDAP"))),a.createElement("tr",null,_.enabled?a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},Pe)):a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},"Not enabled")))))),a.createElement("div",{className:"gf-form-button-row"},Je&&a.createElement(oe.$n,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Ve&&a.createElement(oe.z9,{variant:"secondary",href:Ie},"Debug LDAP Mapping"))))}}var El=e(3911),al=e(82702),yl=e(37390),Ni=e(56034),qo=e(89062),ql=e(85927),Nu=e(41053);function wu({onSelected:W,className:_,inputId:Z,autoFocus:de,excludeOrgs:Pe}){(0,a.useEffect)(()=>{de&&Z&&document.getElementById(Z)?.focus()},[de,Z]);const[Ie,Ve]=(0,Nu.A)(async()=>{const qe=(await(0,M.AI)().get("/api/orgs")).map(dt=>({value:{id:dt.id,name:dt.name},label:dt.name}));if(Pe){let dt=Pe.map(Pt=>Pt.orgId);return qe.filter(Pt=>!dt.includes(Pt.value.id))}else return qe});return a.createElement(re.DW,{inputId:Z,className:_,isLoading:Ie.loading,defaultOptions:!0,loadOptions:Ve,filterOption:(Je,qe)=>{const dt=qe.toLowerCase();return!!Je.value?.name.toLowerCase().includes(dt)},onChange:W,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var Fu=e(5133);class Mr extends a.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=a.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:_,orgs:Z,isExternalUser:de,onOrgRoleChange:Pe,onOrgRemove:Ie,onOrgAdd:Ve}=this.props,{showAddOrgModal:Je}=this.state,qe=vs.TP.hasPermission(Bn.AccessControlAction.OrgUsersAdd)&&!de;return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"Organizations"),a.createElement(xt.B,{gap:1.5,direction:"column"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,Z.map((dt,Dt)=>a.createElement(ec,{key:`${dt.orgId}-${Dt}`,isExternalUser:de,user:_,org:dt,onOrgRoleChange:Pe,onOrgRemove:Ie})))),a.createElement("div",null,qe&&a.createElement(oe.$n,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),a.createElement(Dl,{user:_,userOrgs:Z,isOpen:Je,onOrgAdd:Ve,onDismiss:this.dismissOrgAddModal})))}}const Wu=(0,El.N)(W=>({removeButton:(0,ot.css)`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${W.v1.palette.blue95};
    `,label:(0,ot.css)`
      font-weight: 500;
    `,disabledTooltip:(0,ot.css)`
      display: flex;
    `,tooltipItem:(0,ot.css)`
      margin-left: 5px;
    `,tooltipItemLink:(0,ot.css)`
      color: ${W.v1.palette.blue95};
    `,rolePickerWrapper:(0,ot.css)`
      display: flex;
    `,rolePicker:(0,ot.css)`
      flex: auto;
      margin-right: ${W.spacing(1)};
    `}));class Ku extends a.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:_}=this.props;this.props.onOrgRemove(_.orgId)},this.onChangeRoleClick=()=>{const{org:_}=this.props;this.setState({isChangingRole:!0,currentRole:_.role})},this.onOrgRoleChange=_=>{this.setState({currentRole:_})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=_=>{this.props.onOrgRoleChange(this.props.org.orgId,_)}}componentDidMount(){vs.TP.licensedAccessControlEnabled()&&vs.TP.hasPermission(Bn.AccessControlAction.ActionRolesList)&&(0,ql.RL)(this.props.org.orgId).then(_=>this.setState({roleOptions:_})).catch(_=>console.error(_))}render(){const{user:_,org:Z,isExternalUser:de,theme:Pe}=this.props,Ie=_?.authLabels?.length&&_?.authLabels[0],Ve=Ie?`Synced via ${Ie}`:"",{currentRole:Je,isChangingRole:qe}=this.state,dt=Wu(Pe),Dt=(0,ot.cx)("width-16",dt.label),Pt=vs.TP.hasPermission(Bn.AccessControlAction.OrgUsersWrite),$t=vs.TP.hasPermission(Bn.AccessControlAction.OrgUsersRemove)&&!de,Lt=de||!Pt,Ot=`${Z.name}-input`;return a.createElement("tr",null,a.createElement("td",{className:Dt},a.createElement("label",{htmlFor:Ot},Z.name)),vs.TP.licensedAccessControlEnabled()?a.createElement("td",null,a.createElement("div",{className:dt.rolePickerWrapper},a.createElement("div",{className:dt.rolePicker},a.createElement(qo.y,{userId:_?.id||0,orgId:Z.orgId,basicRole:Z.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:Lt,basicRoleDisabledMessage:`This user's role is not editable because it is synchronized from your auth provider.
                    Refer to the Grafana authentication docs for details.`})),de&&a.createElement(zc,{lockMessage:Ve}))):a.createElement(a.Fragment,null,qe?a.createElement("td",null,a.createElement(Fu.r,{inputId:Ot,value:Je,onChange:this.onOrgRoleChange,autoFocus:!0})):a.createElement("td",{className:"width-25"},Z.role),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},Pt&&a.createElement(_u,{lockMessage:Ve,isExternalUser:de,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},$t&&a.createElement(al.Z,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove},"Remove from organization"))))}}const ec=(0,Tt.cV)(Ku),$u=(0,El.N)(()=>({modal:(0,ot.css)`
    width: 500px;
  `,buttonRow:(0,ot.css)`
    text-align: center;
  `,modalContent:(0,ot.css)`
    overflow: visible;
  `}));class Dl extends a.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:Bn.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=_=>{const Z=this.props.userOrgs.find(de=>de.orgId===_.value?.id);this.setState({selectedOrg:_.value,role:Z?.role||Bn.OrgRole.Viewer}),vs.TP.licensedAccessControlEnabled()&&vs.TP.hasPermission(Bn.AccessControlAction.ActionRolesList)&&(0,ql.RL)(_.value?.id).then(de=>this.setState({roleOptions:de})).catch(de=>console.error(de))},this.onOrgRoleChange=_=>{this.setState({role:_})},this.onAddUserToOrg=async()=>{const{selectedOrg:_,role:Z}=this.state;this.props.onOrgAdd(_.id,Z),vs.TP.licensedAccessControlEnabled()&&vs.TP.hasPermission(Bn.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,ql.eA)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(_,Z,de)=>{this.setState({pendingRoles:_,pendingOrgId:de,pendingUserId:Z})}}render(){const{isOpen:_,user:Z,userOrgs:de}=this.props,{role:Pe,roleOptions:Ie,selectedOrg:Ve}=this.state,Je=$u();return a.createElement(yl.a,{className:Je.modal,contentClassName:Je.modalContent,title:"Add to an organization",isOpen:_,onDismiss:this.onCancel},a.createElement(Ha.D,{label:"Organization"},a.createElement(wu,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:de,autoFocus:!0})),a.createElement(Ha.D,{label:"Role",disabled:Ve===null},a.createElement(qo.y,{userId:Z?.id||0,orgId:Ve?.id,basicRole:Pe,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Ie,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles})),a.createElement(yl.a.ButtonRow,null,a.createElement(Zn.Gy,{spacing:"md",justify:"center"},a.createElement(oe.$n,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),a.createElement(oe.$n,{variant:"primary",disabled:Ve===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const Vu=W=>({disabledTooltip:(0,ot.css)`
    display: flex;
  `,tooltipItemLink:(0,ot.css)`
    color: ${W.v1.palette.blue95};
  `,lockMessageClass:(0,ot.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:(0,ot.css)`
    line-height: 2;
  `});function _u({lockMessage:W,onChangeRoleClick:_,isExternalUser:Z,onOrgRoleSave:de,onCancelClick:Pe}){const Ie=(0,Tt.of)(Vu);return a.createElement("div",{className:Ie.disabledTooltip},Z?a.createElement(a.Fragment,null,a.createElement("span",{className:Ie.lockMessageClass},W),a.createElement(Ni.m,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:Ie.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement("div",{className:Ie.icon},a.createElement(us.I,{name:"question-circle"})))):a.createElement(al.Z,{confirmText:"Save",onClick:_,onCancel:Pe,onConfirm:de,disabled:Z},"Change role"))}const zc=({lockMessage:W})=>{const _=(0,Tt.of)(zu);return a.createElement("div",{className:_.disabledTooltip},a.createElement("span",{className:_.lockMessageClass},W),a.createElement(Ni.m,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:_.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(us.I,{name:"question-circle"})))},zu=W=>({disabledTooltip:(0,ot.css)`
    display: flex;
  `,tooltipItemLink:(0,ot.css)`
    color: ${W.v1.palette.blue95};
  `,lockMessageClass:(0,ot.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `}),ku=[{label:"Yes",value:!0},{label:"No",value:!1}];function kc({isGrafanaAdmin:W,isExternalUser:_,lockMessage:Z,onGrafanaAdminChange:de}){const[Pe,Ie]=(0,a.useState)(!1),[Ve,Je]=(0,a.useState)(W),qe=()=>Ie(!0),dt=()=>{Ie(!1),Je(W)},Dt=()=>de(Ve),Pt=vs.TP.hasPermission(Bn.AccessControlAction.UsersPermissionsUpdate)&&!_,$t=(0,Tt.of)(Hc);return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"Permissions"),a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Grafana Admin"),Pe?a.createElement("td",{colSpan:2},a.createElement(ne.z,{options:ku,value:Ve,onChange:Je,autoFocus:!0})):a.createElement("td",{colSpan:2},W?a.createElement(a.Fragment,null,a.createElement(us.I,{name:"shield"})," Yes"):a.createElement(a.Fragment,null,"No")),a.createElement("td",null,Pt&&a.createElement(al.Z,{onClick:qe,onConfirm:Dt,onCancel:dt,confirmText:"Change"},"Change"),_&&a.createElement("div",{className:$t.lockMessageClass},a.createElement(zc,{lockMessage:Z})))))))}const Hc=W=>({lockMessageClass:(0,ot.css)`
    display: flex;
    justify-content: flex-end;
    font-style: italic;
    margin-right: ${W.spacing(.6)};
  `});var bl=e(96374),jc=e(91634);function Pl({user:W,onUserUpdate:_,onUserDelete:Z,onUserDisable:de,onUserEnable:Pe,onPasswordChange:Ie}){const[Ve,Je]=(0,a.useState)(!1),[qe,dt]=(0,a.useState)(!1),Dt=(0,a.useRef)(null),Pt=Jo=>()=>{Je(Jo),!Jo&&Dt.current&&Dt.current.focus()},$t=(0,a.useRef)(null),Lt=Jo=>()=>{dt(Jo),!Jo&&$t.current&&$t.current.focus()},Ot=()=>Z(W.id),Ft=()=>de(W.id),bn=()=>Pe(W.id),Ta=Jo=>{_({...W,name:Jo})},wa=Jo=>{_({...W,email:Jo})},La=Jo=>{_({...W,login:Jo})},Aa=W.authLabels?.length&&W.authLabels[0],Dr=Aa?`Synced via ${Aa}`:"",Yo=W.isExternal||!vs.TP.hasPermissionInMetadata(Bn.AccessControlAction.UsersWrite,W),Bp=W.isExternal||!vs.TP.hasPermissionInMetadata(Bn.AccessControlAction.UsersPasswordUpdate,W),PD=vs.TP.hasPermissionInMetadata(Bn.AccessControlAction.UsersDelete,W),CD=vs.TP.hasPermissionInMetadata(Bn.AccessControlAction.UsersDisable,W),TD=vs.TP.hasPermissionInMetadata(Bn.AccessControlAction.UsersEnable,W);return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"User information"),a.createElement(xt.B,{direction:"column",gap:1.5},a.createElement("div",null,a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement(Cl,{label:"Name",value:W.name,locked:Yo,lockMessage:Dr,onChange:Ta}),a.createElement(Cl,{label:"Email",value:W.email,locked:Yo,lockMessage:Dr,onChange:wa}),a.createElement(Cl,{label:"Username",value:W.login,locked:Yo,lockMessage:Dr,onChange:La}),a.createElement(Cl,{label:"Password",value:"********",inputType:"password",locked:Bp,lockMessage:Dr,onChange:Ie})))),a.createElement(xt.B,{gap:2},PD&&a.createElement(a.Fragment,null,a.createElement(oe.$n,{variant:"destructive",onClick:Pt(!0),ref:Dt},"Delete user"),a.createElement(bl.u,{isOpen:Ve,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:Ot,onDismiss:Pt(!1)})),W.isDisabled&&TD&&a.createElement(oe.$n,{variant:"secondary",onClick:bn},"Enable user"),!W.isDisabled&&CD&&a.createElement(a.Fragment,null,a.createElement(oe.$n,{variant:"secondary",onClick:Lt(!0),ref:$t},"Disable user"),a.createElement(bl.u,{isOpen:qe,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:Ft,onDismiss:Lt(!1)})))))}class Cl extends a.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=_=>{this.inputElem=_},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(_,Z)=>{Z!==jc.O.Invalid&&this.setState({value:_.target.value})},this.onInputBlur=(_,Z)=>{Z!==jc.O.Invalid&&this.setState({value:_.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}static{this.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"}}render(){const{label:_,locked:Z,lockMessage:de,inputType:Pe}=this.props,{value:Ie}=this.state,Ve=(0,ot.cx)("width-16",(0,ot.css)`
        font-weight: 500;
      `);if(Z)return a.createElement(Hu,{label:_,value:Ie,lockMessage:de});const Je=`${_}-input`;return a.createElement("tr",null,a.createElement("td",{className:Ve},a.createElement("label",{htmlFor:Je},_)),a.createElement("td",{className:"width-25",colSpan:2},this.state.editing?a.createElement(Me.p,{id:Je,type:Pe,defaultValue:Ie,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):a.createElement("span",null,this.props.value)),a.createElement("td",null,a.createElement(al.Z,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}const Hu=({label:W,value:_,lockMessage:Z})=>{const de=(0,ot.css)`
    font-style: italic;
    margin-right: 0.6rem;
  `,Pe=(0,ot.cx)("width-16",(0,ot.css)`
      font-weight: 500;
    `);return a.createElement("tr",null,a.createElement("td",{className:Pe},W),a.createElement("td",{className:"width-25",colSpan:2},_),a.createElement("td",null,a.createElement("span",{className:de},Z)))};class ju extends a.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=a.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=_=>()=>{this.props.onSessionRevoke(_)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:_}=this.props,{showLogoutModal:Z}=this.state,de=vs.TP.hasPermission(Bn.AccessControlAction.UsersLogout);return a.createElement("div",null,a.createElement("h3",{className:"page-heading"},"Sessions"),a.createElement(xt.B,{direction:"column",gap:1.5},a.createElement("div",null,a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Last seen"),a.createElement("th",null,"Logged on"),a.createElement("th",null,"IP address"),a.createElement("th",{colSpan:2},"Browser and OS"))),a.createElement("tbody",null,_&&_.map((Pe,Ie)=>a.createElement("tr",{key:`${Pe.id}-${Ie}`},a.createElement("td",null,Pe.isActive?"Now":Pe.seenAt),a.createElement("td",null,(0,Qa.Xj)(Pe.createdAt,{dateStyle:"long"})),a.createElement("td",null,Pe.clientIp),a.createElement("td",null,`${Pe.browser} on ${Pe.os} ${Pe.osVersion}`),a.createElement("td",null,a.createElement("div",{className:"pull-right"},de&&a.createElement(al.Z,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(Pe.id)},"Force logout")))))))),a.createElement("div",null,de&&_.length>0&&a.createElement(oe.$n,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),a.createElement(bl.u,{isOpen:Z,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const Gu=ju;var mr=e(57334);class Qu extends a.PureComponent{constructor(){super(...arguments),this.onUserUpdate=_=>{this.props.updateUser(_)},this.onPasswordChange=_=>{const{user:Z,setUserPassword:de}=this.props;Z&&de(Z.id,_)},this.onUserDelete=_=>{this.props.deleteUser(_)},this.onUserDisable=_=>{this.props.disableUser(_)},this.onUserEnable=_=>{this.props.enableUser(_)},this.onGrafanaAdminChange=_=>{const{user:Z,updateUserPermissions:de}=this.props;Z&&de(Z.id,_)},this.onOrgRemove=_=>{const{user:Z,deleteOrgUser:de}=this.props;Z&&de(Z.id,_)},this.onOrgRoleChange=(_,Z)=>{const{user:de,updateOrgUserRole:Pe}=this.props;de&&Pe(de.id,_,Z)},this.onOrgAdd=(_,Z)=>{const{user:de,addOrgUser:Pe}=this.props;de&&Pe(de,_,Z)},this.onSessionRevoke=_=>{const{user:Z,revokeSession:de}=this.props;Z&&de(_,Z.id)},this.onAllSessionsRevoke=()=>{const{user:_,revokeAllSessions:Z}=this.props;_&&Z(_.id)},this.onUserSync=()=>{const{user:_,syncLdapUser:Z}=this.props;_&&Z(_.id)}}async componentDidMount(){const{match:_,loadAdminUserPage:Z}=this.props;Z(parseInt(_.params.id,10))}render(){const{user:_,orgs:Z,sessions:de,ldapSyncInfo:Pe,isLoading:Ie}=this.props,Ve=_?.isExternal&&_?.authLabels?.includes("LDAP"),Je=vs.TP.hasPermission(Bn.AccessControlAction.UsersAuthTokenList),qe=vs.TP.hasPermission(Bn.AccessControlAction.LDAPStatusRead),dt=_?.authLabels?.[0],Dt=dt?`Synced via ${dt}`:"",Pt={text:_?.login??"",icon:"shield",subTitle:"Manage settings for an individual user."};return a.createElement(Sr.Y,{navId:"global-users",pageNav:Pt},a.createElement(Sr.Y.Contents,{isLoading:Ie},a.createElement(xt.B,{gap:5,direction:"column"},_&&a.createElement(a.Fragment,null,a.createElement(Pl,{user:_,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),Ve&&_?.isExternallySynced&&(0,$c.a)("ldapsync")&&Pe&&qe&&a.createElement(Uu,{ldapSyncInfo:Pe,user:_,onUserSync:this.onUserSync}),a.createElement(kc,{isGrafanaAdmin:_.isGrafanaAdmin,isExternalUser:_?.isGrafanaAdminExternallySynced,lockMessage:Dt,onGrafanaAdminChange:this.onGrafanaAdminChange})),Z&&a.createElement(Mr,{user:_,orgs:Z,isExternalUser:_?.isExternallySynced,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),de&&Je&&a.createElement(Gu,{sessions:de,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke}))))}}const Gc=W=>({user:W.userAdmin.user,sessions:W.userAdmin.sessions,orgs:W.userAdmin.orgs,ldapSyncInfo:W.ldap.syncInfo,isLoading:W.userAdmin.isLoading,error:W.userAdmin.error}),Yu={loadAdminUserPage:mr.kz,updateUser:mr.TK,setUserPassword:mr.ly,disableUser:mr.MV,enableUser:mr.nr,deleteUser:mr.hG,updateUserPermissions:mr.N6,addOrgUser:mr.nh,updateOrgUserRole:mr.P3,deleteOrgUser:mr.Pi,revokeSession:mr.T$,revokeAllSessions:mr.VR,syncLdapUser:mr.mI},Qc=(0,Zo.connect)(Gc,Yu)(Qu);var Yc=e(49785),wi=e(94753),Fi=e(48840);const Xu=({ldapConnectionInfo:W})=>{const _=(0,a.useMemo)(()=>[{id:"host",header:"Host",disableGrow:!0},{id:"port",header:"Port",disableGrow:!0},{id:"available",cell:de=>de.cell.value?a.createElement(xt.B,{justifyContent:"end"},a.createElement(Ni.m,{content:"Connection is available"},a.createElement(us.I,{name:"check",className:"pull-right"}))):a.createElement(xt.B,{justifyContent:"end"},a.createElement(Ni.m,{content:"Connection is not available"},a.createElement(us.I,{name:"exclamation-triangle"})))}],[]),Z=(0,a.useMemo)(()=>W,[W]);return a.createElement("section",null,a.createElement(xt.B,{direction:"column",gap:2},a.createElement(wi.E,{color:"primary",element:"h3"},"LDAP Connection"),a.createElement(Fi.j,{data:Z,columns:_,getRowId:de=>de.host+de.port}),a.createElement(Zu,{ldapConnectionInfo:W})))},Zu=({ldapConnectionInfo:W})=>{if(!W.some(Pe=>Pe.error))return null;const Z=[];W.forEach(Pe=>{Pe.error&&Z.push(Pe)});const de=Z.map((Pe,Ie)=>a.createElement("div",{key:Ie},a.createElement("span",{style:{fontWeight:500}},Pe.host,":",Pe.port,a.createElement("br",null)),a.createElement("span",null,Pe.error),Ie!==Z.length-1&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null))));return a.createElement(wt.F,{title:"Connection error",severity:Bn.AppNotificationSeverity.Error},de)},xr="dddd YYYY-MM-DD HH:mm zz",Jc=({ldapSyncInfo:W})=>{const _=(0,Vc.LE)(W.nextSync,{format:xr}),Z=[{id:"syncAttribute"},{id:"syncValue"}],de=[{syncAttribute:"Active synchronization",syncValue:W.enabled?"Enabled":"Disabled"},{syncAttribute:"Scheduled",syncValue:W.schedule},{syncAttribute:"Next synchronization",syncValue:_}];return a.createElement("section",null,a.createElement(wi.E,{element:"h3"},"LDAP Synchronization"),a.createElement(Fi.j,{data:de,columns:Z,getRowId:Pe=>Pe.syncAttribute}))},Xc=({groups:W})=>{const _=(0,a.useMemo)(()=>W,[W]),Z=(0,a.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:de=>de.value&&de.row.original.orgRole?de.value:""},{id:"orgRole",header:"Role",cell:de=>de.value||a.createElement(a.Fragment,null,"No match"," ",a.createElement(Ni.m,{content:"No matching organizations found"},a.createElement(us.I,{name:"info-circle"})))}],[]);return a.createElement(Fi.j,{headerTooltips:{orgName:{content:"Only the first match for an Organization will be used",iconName:"info-circle"}},columns:Z,data:_,getRowId:de=>de.orgId+de.orgRole+de.groupDN})},qu=({info:W})=>{const _=(0,a.useMemo)(()=>[{id:"userInfo",header:"User Information",disableGrow:!0},{id:"ldapValue"},{id:"cfgAttrValue",header:"LDAP attribute"}],[]),Z=(0,a.useMemo)(()=>[{userInfo:"First name",ldapValue:W.name.ldapValue,cfgAttrValue:W.name.cfgAttrValue},{userInfo:"Surname",ldapValue:W.surname.ldapValue,cfgAttrValue:W.surname.cfgAttrValue},{userInfo:"Username",ldapValue:W.login.ldapValue,cfgAttrValue:W.login.cfgAttrValue},{userInfo:"Email",ldapValue:W.email.ldapValue,cfgAttrValue:W.email.cfgAttrValue}],[W]);return a.createElement(Fi.j,{columns:_,data:Z,getRowId:de=>de.userInfo})},Tl=({permissions:W})=>{const _=(0,a.useMemo)(()=>[{id:"permission",header:"Permissions",disableGrow:!0},{id:"value"}],[]),Z=(0,a.useMemo)(()=>[{permission:"Grafana admin",value:W.isGrafanaAdmin?a.createElement(a.Fragment,null,a.createElement(us.I,{name:"shield"})," Yes"):"No"},{permission:"Status",value:W.isDisabled?a.createElement(a.Fragment,null,a.createElement(us.I,{name:"times"})," Inactive"):a.createElement(a.Fragment,null,a.createElement(us.I,{name:"check"})," Active")}],[W]);return a.createElement(Fi.j,{data:Z,columns:_,getRowId:de=>de.permission})},Zc=({teams:W})=>{const _=(0,a.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:({row:{original:{orgName:Z}}})=>a.createElement(a.Fragment,null,Z||"No matching teams found")},{id:"teamName",header:"Team",cell:({row:{original:{teamName:Z,orgName:de}}})=>Z&&de?Z:""}],[]);return a.createElement(Fi.j,{data:W,columns:_,getRowId:Z=>Z.teamName})},qc=({ldapUser:W})=>a.createElement(xt.B,{direction:"column",gap:4},a.createElement(qu,{info:W.info}),a.createElement(Tl,{permissions:W.permissions}),W.roles&&W.roles.length>0&&a.createElement(Xc,{groups:W.roles}),W.teams&&W.teams.length>0?a.createElement(Zc,{teams:W.teams}):a.createElement(te.a,null,a.createElement(wi.E,null,"No teams found via LDAP"))),ed={text:"LDAP",subTitle:"Verify your LDAP and user mapping configuration.",icon:"book",id:"LDAP"},td=({clearUserMappingInfo:W,queryParams:_,loadLdapState:Z,loadLdapSyncStatus:de,loadUserMapping:Pe,clearUserError:Ie,ldapUser:Ve,userError:Je,ldapError:qe,ldapSyncInfo:dt,ldapConnectionInfo:Dt})=>{const[Pt,$t]=(0,a.useState)(!0),{register:Lt,handleSubmit:Ot}=(0,Yc.mN)(),Ft=(0,a.useCallback)(async La=>Pe(La),[Pe]);(0,a.useEffect)(()=>{const La=async()=>Promise.all([Z(),de()]);async function Aa(){await W(),await La(),_.username&&await Ft(_.username),$t(!1)}Aa()},[W,Ft,Z,de,_]);const bn=({username:La})=>{La&&Ft(La)},Ta=()=>{Ie()},wa=vs.TP.hasPermission(Bn.AccessControlAction.LDAPUsersRead);return a.createElement(Sr.Y,{navId:"authentication",pageNav:ed},a.createElement(Sr.Y.Contents,{isLoading:Pt},a.createElement(xt.B,{direction:"column",gap:4},qe&&qe.title&&a.createElement(wt.F,{title:qe.title,severity:Bn.AppNotificationSeverity.Error},qe.body),a.createElement(Xu,{ldapConnectionInfo:Dt}),(0,$c.a)("ldapsync")&&dt&&a.createElement(Jc,{ldapSyncInfo:dt}),wa&&a.createElement("section",null,a.createElement("h3",null,"Test user mapping"),a.createElement("form",{onSubmit:Ot(bn)},a.createElement(Ha.D,{label:"Username"},a.createElement(Me.p,{...Lt("username",{required:!0}),width:34,id:"username",type:"text",defaultValue:_.username,addonAfter:a.createElement(oe.$n,{variant:"primary",type:"submit"},"Run")}))),Je&&Je.title&&a.createElement(wt.F,{title:Je.title,severity:Bn.AppNotificationSeverity.Error,onRemove:Ta},Je.body),Ve&&a.createElement(qc,{ldapUser:Ve})))))},em=W=>({ldapConnectionInfo:W.ldap.connectionInfo,ldapUser:W.ldap.user,ldapSyncInfo:W.ldap.syncInfo,userError:W.ldap.userError,ldapError:W.ldap.ldapError}),tm={loadLdapState:mr.JI,loadLdapSyncStatus:mr.pm,loadUserMapping:mr.Kg,clearUserError:mr.DX,clearUserMappingInfo:mr.Jc},am=(0,Zo.connect)(em,tm)(td);var ya=e(27921),er=e(75471);function nd(W=z.config){return[{path:"/alerting",component:Gs(()=>e.e(3236).then(e.bind(e,58164)))},{path:"/alerting/home",exact:!1,component:Gs(()=>e.e(3236).then(e.bind(e,58164)))},{path:"/alerting/list",roles:(0,er.C0)([Bn.AccessControlAction.AlertingRuleRead,Bn.AccessControlAction.AlertingRuleExternalRead]),component:Gs(()=>Promise.all([e.e(3541),e.e(3511)]).then(e.bind(e,31987)))},{path:"/alerting/routes",roles:(0,er.C0)([Bn.AccessControlAction.AlertingNotificationsRead,Bn.AccessControlAction.AlertingNotificationsExternalRead]),component:Gs(()=>Promise.all([e.e(6489),e.e(6719)]).then(e.bind(e,34708)))},{path:"/alerting/routes/mute-timing/new",roles:(0,er.C0)([Bn.AccessControlAction.AlertingNotificationsWrite,Bn.AccessControlAction.AlertingNotificationsExternalWrite]),component:Gs(()=>e.e(4501).then(e.bind(e,39349)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,er.C0)([Bn.AccessControlAction.AlertingNotificationsWrite,Bn.AccessControlAction.AlertingNotificationsExternalWrite]),component:Gs(()=>e.e(4501).then(e.bind(e,39349)))},{path:"/alerting/silences",roles:(0,er.C0)([Bn.AccessControlAction.AlertingInstanceRead,Bn.AccessControlAction.AlertingInstancesExternalRead]),component:Gs(()=>e.e(9347).then(e.bind(e,24480)))},{path:"/alerting/silence/new",roles:(0,er.C0)([Bn.AccessControlAction.AlertingInstanceCreate,Bn.AccessControlAction.AlertingInstancesExternalWrite]),component:Gs(()=>e.e(9347).then(e.bind(e,24480)))},{path:"/alerting/silence/:id/edit",roles:(0,er.C0)([Bn.AccessControlAction.AlertingInstanceUpdate,Bn.AccessControlAction.AlertingInstancesExternalWrite]),component:Gs(()=>e.e(9347).then(e.bind(e,24480)))},{path:"/alerting/notifications",roles:(0,er.C0)([Bn.AccessControlAction.AlertingNotificationsRead,Bn.AccessControlAction.AlertingNotificationsExternalRead]),component:Gs(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type/new",roles:(0,er.C0)([Bn.AccessControlAction.AlertingNotificationsWrite,Bn.AccessControlAction.AlertingNotificationsExternalWrite]),component:Gs(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/receivers/:id/edit",roles:(0,er.C0)([Bn.AccessControlAction.AlertingNotificationsWrite,Bn.AccessControlAction.AlertingNotificationsExternalWrite,Bn.AccessControlAction.AlertingNotificationsRead,Bn.AccessControlAction.AlertingNotificationsExternalRead]),component:Gs(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,er.C0)([Bn.AccessControlAction.AlertingNotificationsWrite,Bn.AccessControlAction.AlertingNotificationsExternalWrite]),component:Gs(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,er.C0)([Bn.AccessControlAction.AlertingNotificationsWrite,Bn.AccessControlAction.AlertingNotificationsExternalWrite]),component:Gs(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/notifications/:type",roles:(0,er.C0)([Bn.AccessControlAction.AlertingNotificationsWrite,Bn.AccessControlAction.AlertingNotificationsExternalWrite]),component:Gs(()=>e.e(4772).then(e.bind(e,78199)))},{path:"/alerting/groups/",roles:(0,er.C0)([Bn.AccessControlAction.AlertingInstanceRead,Bn.AccessControlAction.AlertingInstancesExternalRead]),component:Gs(()=>e.e(8427).then(e.bind(e,12564)))},{path:"/alerting/new/:type?",pageClass:"page-alerting",roles:(0,er.C0)([Bn.AccessControlAction.AlertingRuleCreate,Bn.AccessControlAction.AlertingRuleExternalWrite]),component:Gs(()=>Promise.all([e.e(1660),e.e(6489),e.e(3726),e.e(3541),e.e(4009)]).then(e.bind(e,50166)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,er.C0)([Bn.AccessControlAction.AlertingRuleUpdate,Bn.AccessControlAction.AlertingRuleExternalWrite]),component:Gs(()=>Promise.all([e.e(1660),e.e(6489),e.e(3726),e.e(3541),e.e(4009)]).then(e.bind(e,50166)))},{path:"/alerting/:id/modify-export",pageClass:"page-alerting",roles:(0,er.C0)([Bn.AccessControlAction.AlertingRuleRead]),component:Gs(()=>Promise.all([e.e(1660),e.e(6489),e.e(3726),e.e(3541),e.e(4009)]).then(e.bind(e,69179)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,er.C0)([Bn.AccessControlAction.AlertingRuleRead,Bn.AccessControlAction.AlertingRuleExternalRead]),component:Gs(()=>Promise.resolve().then(e.bind(e,79741)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,er.C0)([Bn.AccessControlAction.AlertingRuleRead,Bn.AccessControlAction.AlertingRuleExternalRead]),component:Gs(()=>e.e(5516).then(e.bind(e,6165)))},{path:"/alerting/admin",roles:()=>["Admin"],component:Gs(()=>e.e(6130).then(e.bind(e,24513)))}]}function Gs(W){const _=()=>e.e(9029).then(e.bind(e,5961));return(0,ya.A)(z.config.unifiedAlertingEnabled?W:_)}var Wi=e(6320);const Ki=W=>({alertContent:(0,ot.css)`
    display: flex;
    flex-direction: row;
    padding: 0;
    justify-content: space-between;
    align-items: center;
  `,alertParagraph:(0,ot.css)`
    margin: 0 ${W.spacing(1)} 0 0;
    line-height: ${W.spacing(W.components.height.sm)};
  `});function sm(){const W=(0,Tt.of)(Ki),[_,Z]=(0,a.useState)(!0);return _?a.createElement(wt.F,{severity:"info",title:"",onRemove:()=>Z(!1)},a.createElement("div",{className:W.alertContent},a.createElement("p",{className:W.alertParagraph},"Data sources have a new home! You can discover new data sources or manage existing ones in the Connections page, accessible from the main menu."),a.createElement(oe.z9,{"aria-label":"Link to Connections",icon:"arrow-right",href:Wi.b.DataSources,fill:"text"},"Go to connections"))):a.createElement(a.Fragment,null)}function Or(){return[{path:`/${Wi.q}`,exact:!1,component:(0,ya.A)(()=>Promise.all([e.e(6359),e.e(3418),e.e(2154)]).then(e.bind(e,19514)))}]}var $i=e(83883),tc=e(66253);const ad=[{path:"/plugins",navId:"plugins",roles:nc([Bn.AccessControlAction.PluginsInstall,Bn.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:tc.vk.Home,component:(0,ya.A)(()=>e.e(4519).then(e.bind(e,65965)))},{path:"/plugins/browse",navId:"plugins",roles:nc([Bn.AccessControlAction.PluginsInstall,Bn.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:tc.vk.Browse,component:(0,ya.A)(()=>e.e(4519).then(e.bind(e,65965)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:nc([Bn.AccessControlAction.PluginsInstall,Bn.AccessControlAction.PluginsWrite],["Admin","ServerAdmin"]),routeName:tc.vk.Details,component:(0,ya.A)(()=>Promise.all([e.e(6359),e.e(3418),e.e(7891)]).then(e.bind(e,86400)))}];function nc(W,_){return()=>W.some(Z=>vs.TP.hasPermission(Z))?[]:_}function rm(){return ad}var om=e(17422),xo=e(30038),im=e(13834),Sl=e(62625),ei=e(26272),lm=e(39419),Er=e(76888);function Up(W){return console.error(W),sl("Exception thrown","See console for details")}function Ml(){return sl("Page not found","404 Error")}function sl(W,_){const Z={text:W,subTitle:_,icon:"exclamation-triangle"};return{node:Z,main:Z}}var cm=e(94954),sd=e(27716),rd=e(22854),od=e(60677),xl=e(72798);const Ol={loading:!0,loadingError:!1,pluginNav:null,plugin:null};function Fo({pluginId:W,pluginNavSection:_}){const Z=(0,rr.W5)(),de=(0,rr.zy)(),[Pe,Ie]=(0,a.useReducer)(Ir.reducer,Ol),Ve=G.$.appSubUrl+de.pathname+de.search,{plugin:Je,loading:qe,loadingError:dt,pluginNav:Dt}=Pe,Pt=(0,od.Wy)(_,Dt,Ve),$t=(0,a.useMemo)(()=>(0,S.SE)(de.search),[de.search]),Lt=(0,a.useMemo)(()=>(0,xl.S)(Pt),[Pt]),Ot=(0,Er.Il)();(0,a.useEffect)(()=>{dm(W,Ie)},[W]);const Ft=(0,a.useCallback)(La=>Ie(Ir.actions.changeNav(La)),[]);if(!Je||W!==Je.meta.id){const La=Ot.chrome.state.getValue().layout;return a.createElement(Sr.Y,{navModel:Pt,pageNav:{text:""},layout:La},qe&&a.createElement(lm.A,null),!qe&&dt&&a.createElement(Zl.L,{entity:"App"}))}if(!Je.root)return a.createElement(Sr.Y,{navModel:Pt??sl("Plugin load error")},a.createElement("div",null,"No root app page component found"));const bn=Je.root&&a.createElement(im.a,{meta:Je.meta},a.createElement(Je.root,{meta:Je.meta,basename:Z.url,onNavChanged:Ft,query:$t,path:de.pathname})),Ta=()=>{if(!Je.meta?.includes)return!0;const La=Je.meta?.includes.find(Dr=>Dr.path===de.pathname);if(!La)return!0;if(La?.action&&G.$.featureToggles.accessControlOnCall)return vs.TP.hasPermission(La.action);if(vs.TP.isGrafanaAdmin||vs.TP.user.orgRole===Sl.X.Admin)return!0;const Aa=La?.role||"";return!Aa||vs.TP.isEditor&&Aa===Sl.X.Viewer?!0:vs.TP.hasRole(Aa)},wa=()=>a.createElement(wt.F,{severity:"warning",title:"Access denied"},"You do not have permission to see this page.");return Ta()?Dt?a.createElement(a.Fragment,null,Pt?a.createElement(Sr.Y,{navModel:Pt,pageNav:Dt?.node},a.createElement(Sr.Y.Contents,{isLoading:qe},bn)):a.createElement(Sr.Y,null,bn)):a.createElement(xl.A.Provider,{value:Lt},bn):a.createElement(wa,null)}const Ir=(0,xo.Z0)({name:"prom-builder-container",initialState:Ol,reducers:{setState:(W,_)=>{Object.assign(W,_.payload)},changeNav:(W,_)=>{let Z=_.payload;Z&&Z.node.children&&(Z={...Z,node:{...Z.main,hideFromBreadcrumbs:!0}}),W.pluginNav=Z}}});async function dm(W,_){try{const Z=await(0,sd.x)(W).then(de=>{const Pe=um(de);return Pe?(vs.lE.emit(ei.r1.alertError,[Pe]),_(Ir.actions.setState({pluginNav:sl(Pe)})),null):(0,rd.ui)(de)});_(Ir.actions.setState({plugin:Z,loading:!1,loadingError:!1,pluginNav:null}))}catch(Z){_(Ir.actions.setState({plugin:null,loading:!1,loadingError:!0,pluginNav:Ml()}));const de=Z instanceof Error?Z:new Error((0,cm.q)(Z));od.z4.logError(de),console.error(de)}}function um(W){return W?W.type!==Xe.QE.app?"Plugin must be an app":W.enabled?null:"Application Not Enabled":"Unknown Plugin"}const id=Fo;var Ms=e(99140);function Di(){const W=(0,Ms.Gu)(),{navIndex:_}=W,Z=Ie=>Ie.startsWith("standalone-plugin-page-/"),de=Ie=>"pluginId"in Ie&&"id"in Ie;return[...Object.values(_).filter(de).map(Ie=>{const Ve=(0,om.rH)(Ie),Je=`/a/${Ie.pluginId}`,qe=Z(Ie.id)&&Ie.url||Je,dt=Z(Ie.id)&&!Ie.url?.startsWith("/a/");return{path:qe,exact:!1,sensitive:dt,component:()=>a.createElement(id,{pluginId:Ie.pluginId,pluginNavSection:Ve})}}),{path:"/a/:pluginId",exact:!1,component:({match:Ie})=>a.createElement(id,{pluginId:Ie.params.pluginId,pluginNavSection:_.home})}]}const ld=[{path:"/profile",component:(0,ya.A)(()=>e.e(2472).then(e.bind(e,48357)))},{path:"/profile/password",component:(0,ya.A)(()=>e.e(8107).then(e.bind(e,28107)))},{path:"/profile/select-org",component:(0,ya.A)(()=>e.e(7430).then(e.bind(e,44613)))},{path:"/profile/notifications",component:(0,ya.A)(()=>e.e(4140).then(e.bind(e,78015)))}];function mm(W=z.config){return W.profileEnabled?ld:(0,h.uniq)(ld.map(Z=>Z.path)).map(Z=>({path:Z,component:(0,ya.A)(()=>e.e(5173).then(e.bind(e,35208)))}))}const fm=()=>!z.config.publicDashboardsEnabled||!z.config.featureToggles.publicDashboards?[]:[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:Bn.DashboardRoutes.Public,component:(0,ya.A)(()=>e.e(5761).then(e.bind(e,53371)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:Bn.DashboardRoutes.Public,chromeless:!0,component:(0,ya.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(7197)]).then(e.bind(e,20302)))}],gm=[];function pm(){return[...Di(),{path:"/",pageClass:"page-dashboard",routeName:Bn.DashboardRoutes.Home,component:(0,ya.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136)]).then(e.bind(e,63392)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:Bn.DashboardRoutes.Normal,component:(0,ya.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136)]).then(e.bind(e,63392)))},{path:"/dashboard/new",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:Bn.DashboardRoutes.New,component:(0,ya.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,63392)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.DashboardsCreate]),component:(0,ya.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,30798)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:Bn.DashboardRoutes.Normal,component:(0,ya.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,63392)))},{path:"/dashboards/embedding-test",component:(0,ya.A)(()=>Promise.all([e.e(9569),e.e(6263),e.e(660),e.e(9136),e.e(2976)]).then(e.bind(e,14962)))},{path:"/d-solo/:uid/:slug?",pageClass:"dashboard-solo",routeName:Bn.DashboardRoutes.Normal,chromeless:!0,component:(0,ya.A)(()=>z.Ay.featureToggles.dashboardSceneSolo?Promise.all([e.e(9569),e.e(7849)]).then(e.bind(e,24880)):Promise.all([e.e(9569),e.e(4492)]).then(e.bind(e,55087)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:Bn.DashboardRoutes.Normal,chromeless:!0,component:(0,ya.A)(()=>Promise.all([e.e(9569),e.e(7849)]).then(e.bind(e,55087)))},{path:"/dashboard/import",component:(0,ya.A)(()=>e.e(2550).then(e.bind(e,23390)))},{path:$i.I.List,component:()=>a.createElement(rr.rd,{to:Wi.b.DataSources})},{path:$i.I.Edit,component:W=>a.createElement(rr.rd,{to:Wi.b.DataSourcesEdit.replace(":uid",W.match.params.uid)})},{path:$i.I.Dashboards,component:W=>a.createElement(rr.rd,{to:Wi.b.DataSourcesDashboards.replace(":uid",W.match.params.uid)})},{path:$i.I.New,component:()=>a.createElement(rr.rd,{to:Wi.b.DataSourcesNew})},{path:"/datasources/correlations",component:(0,ya.A)(()=>z.Ay.featureToggles.correlations?e.e(9981).then(e.bind(e,32429)):e.e(8014).then(e.bind(e,32863)))},{path:"/dashboards",component:(0,ya.A)(()=>Promise.all([e.e(6359),e.e(152)]).then(e.bind(e,77408)))},{path:"/dashboards/f/:uid/:slug",component:(0,ya.A)(()=>Promise.all([e.e(6359),e.e(152)]).then(e.bind(e,77408)))},{path:"/dashboards/f/:uid",component:(0,ya.A)(()=>Promise.all([e.e(6359),e.e(152)]).then(e.bind(e,77408)))},{path:"/explore",pageClass:"page-explore",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.DataSourcesExplore]),component:(0,ya.A)(()=>z.Ay.exploreEnabled?Promise.all([e.e(660),e.e(1698),e.e(5511),e.e(9604)]).then(e.bind(e,88322)):e.e(4422).then(e.bind(e,53518)))},{path:"/apps",component:()=>a.createElement(wo,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>a.createElement(wo,{navId:"alerts-and-incidents"})},{path:"/testing-and-synthetics",component:()=>a.createElement(wo,{navId:"testing-and-synthetics"})},{path:"/monitoring",component:()=>a.createElement(wo,{navId:"monitoring"})},{path:"/infrastructure",component:()=>a.createElement(wo,{navId:"infrastructure"})},{path:"/frontend",component:()=>a.createElement(wo,{navId:"frontend"})},{path:"/admin/general",component:()=>a.createElement(wo,{navId:"cfg/general"})},{path:"/admin/plugins",component:()=>a.createElement(wo,{navId:"cfg/plugins"})},{path:"/admin/access",component:()=>a.createElement(wo,{navId:"cfg/access"})},{path:"/org",component:(0,ya.A)(()=>e.e(1510).then(e.bind(e,69047)))},{path:"/org/new",component:(0,ya.A)(()=>e.e(7930).then(e.bind(e,25913)))},{path:"/org/users",component:(0,ya.A)(()=>e.e(9856).then(e.bind(e,31083)))},{path:"/org/users/invite",component:(0,ya.A)(()=>e.e(7720).then(e.bind(e,91230)))},{path:"/org/apikeys",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.ActionAPIKeysRead]),component:(0,ya.A)(()=>e.e(4196).then(e.bind(e,9699)))},{path:"/org/serviceaccounts",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.ServiceAccountsRead,Bn.AccessControlAction.ServiceAccountsCreate]),component:(0,ya.A)(()=>e.e(6777).then(e.bind(e,74409)))},{path:"/org/serviceaccounts/create",component:(0,ya.A)(()=>e.e(4176).then(e.bind(e,63606)))},{path:"/org/serviceaccounts/:id",component:(0,ya.A)(()=>e.e(6576).then(e.bind(e,82936)))},{path:"/org/teams",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.ActionTeamsRead,Bn.AccessControlAction.ActionTeamsCreate]),component:(0,ya.A)(()=>e.e(1036).then(e.bind(e,52576)))},{path:"/org/teams/new",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.ActionTeamsCreate]),component:(0,ya.A)(()=>e.e(5436).then(e.bind(e,80011)))},{path:"/org/teams/edit/:id/:page?",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.ActionTeamsRead,Bn.AccessControlAction.ActionTeamsCreate]),component:(0,ya.A)(()=>e.e(2212).then(e.bind(e,92886)))},{path:"/admin",component:()=>a.createElement(wo,{navId:"cfg",header:a.createElement(sm,null)})},{path:"/admin/authentication",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.SettingsWrite]),component:z.Ay.licenseInfo.enabledFeatures?.saml||z.Ay.ldapEnabled||z.Ay.featureToggles.ssoSettingsApi?(0,ya.A)(()=>e.e(5592).then(e.bind(e,51332))):()=>a.createElement(rr.rd,{to:"/admin"})},{path:"/admin/authentication/ldap",component:am},{path:"/admin/authentication/:provider",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.SettingsWrite]),component:z.Ay.featureToggles.ssoSettingsApi?(0,ya.A)(()=>e.e(5592).then(e.bind(e,22468))):()=>a.createElement(rr.rd,{to:"/admin"})},{path:"/admin/settings",component:(0,ya.A)(()=>e.e(7659).then(e.bind(e,98493)))},{path:"/admin/upgrading",component:(0,ya.A)(()=>e.e(5356).then(e.bind(e,55356)))},{path:"/admin/users",component:(0,ya.A)(()=>e.e(1743).then(e.bind(e,20972)))},{path:"/admin/users/create",component:(0,ya.A)(()=>e.e(9239).then(e.bind(e,64665)))},{path:"/admin/users/edit/:id",component:Qc},{path:"/admin/orgs",component:(0,ya.A)(()=>e.e(9736).then(e.bind(e,24870)))},{path:"/admin/orgs/edit/:id",component:(0,ya.A)(()=>e.e(9119).then(e.bind(e,57582)))},{path:"/admin/featuretoggles",component:z.Ay.featureToggles.featureToggleAdminPage?(0,ya.A)(()=>e.e(7024).then(e.bind(e,47295))):()=>a.createElement(rr.rd,{to:"/admin"})},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:(0,ya.A)(()=>e.e(1927).then(e.bind(e,68932)))},{path:"/admin/stats",component:(0,ya.A)(()=>e.e(9299).then(e.bind(e,51372)))},z.Ay.featureToggles.onPremToCloudMigrations&&{path:"/admin/migrate-to-cloud",roles:()=>["Admin"],component:(0,ya.A)(()=>e.e(3704).then(e.bind(e,36479)))},{path:"/login",component:Ou,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:(0,ya.A)(()=>e.e(8576).then(e.bind(e,14383))),chromeless:!0},{path:"/verify",component:z.Ay.verifyEmailEnabled?(0,ya.A)(()=>e.e(8786).then(e.bind(e,78786))):()=>a.createElement(rr.rd,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:z.Ay.disableUserSignUp?()=>a.createElement(rr.rd,{to:"/login"}):(0,ya.A)(()=>e.e(7914).then(e.bind(e,27914))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:(0,ya.A)(()=>e.e(3818).then(e.bind(e,2713)))},{path:"/user/password/reset",component:(0,ya.A)(()=>e.e(641).then(e.bind(e,37344))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:(0,ya.A)(()=>e.e(6590).then(e.bind(e,72602)))},{path:"/playlists",component:(0,ya.A)(()=>e.e(1168).then(e.bind(e,44450)))},{path:"/playlists/play/:uid",component:(0,ya.A)(()=>e.e(1374).then(e.bind(e,93129)))},{path:"/playlists/new",component:(0,ya.A)(()=>e.e(7616).then(e.bind(e,62579)))},{path:"/playlists/edit/:uid",component:(0,ya.A)(()=>e.e(7620).then(e.bind(e,84535)))},{path:"/sandbox/benchmarks",component:(0,ya.A)(()=>e.e(9354).then(e.bind(e,98351)))},{path:"/sandbox/test",component:(0,ya.A)(()=>e.e(5354).then(e.bind(e,65802)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:(0,ya.A)(()=>e.e(5804).then(e.bind(e,15111)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>Us.TP.evaluatePermission([Bn.AccessControlAction.AlertingRuleRead]),component:(0,ya.A)(()=>e.e(4333).then(e.bind(e,30027)))},{path:"/library-panels",component:(0,ya.A)(()=>e.e(8516).then(e.bind(e,45434)))},{path:"/notifications",component:(0,ya.A)(()=>e.e(4140).then(e.bind(e,78015)))},{path:"/explore/metrics",chromeless:!1,exact:!1,component:(0,ya.A)(()=>e.e(4785).then(e.bind(e,89858)))},...rm(),...hm(),...nd(),...mm(),...gm,...fm(),...Or(),{path:"/*",component:ir}].filter(vr.zz)}function hm(W=z.Ay){return W.supportBundlesEnabled?[{path:"/support-bundles",component:(0,ya.A)(()=>e.e(123).then(e.bind(e,21821)))},{path:"/support-bundles/create",component:(0,ya.A)(()=>e.e(1515).then(e.bind(e,33809)))}]:[]}const Il=a.forwardRef((W,_)=>a.createElement("div",{id:"ngRoot",ref:_,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));Il.displayName="AngularRoot";var ko=e(95344),cd=e(7376),vm=e(81634),ti=e(74856),Em=e(71500),ym=e(6923);async function Dm(){if(G.$.angularSupportEnabled){const{AngularApp:W}=await Promise.all([e.e(9362),e.e(4950),e.e(8888)]).then(e.bind(e,14950)),_=new W;_.init(),_.bootstrap()}else(0,cd.w)({load:(W,_,Z)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,vm.j)({get:W=>{switch(W){case"backendSrv":return(0,ko.l)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,M.AI)();case"contextSrv":return(0,ko.l)("getLegacyAngularInjector","contextSrv"),vs.TP;case"dashboardSrv":return(0,ko.l)("getLegacyAngularInjector","getDashboardSrv"),(0,u.UA)();case"datasourceSrv":return(0,ko.l)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,B.l)();case"linkSrv":return(0,ko.l)("getLegacyAngularInjector","linkSrv"),(0,ym.mQ)();case"validationSrv":return(0,ko.l)("getLegacyAngularInjector","validationSrv"),Em.P;case"timeSrv":return(0,ko.l)("getLegacyAngularInjector","timeSrv"),(0,ti.jG)();case"templateSrv":return(0,ko.l)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,ve.w)()}throw"Angular is disabled.  Unable to expose: "+W}})}var bm=e(46942),Pm=e.n(bm),rl=e(60619),Ho=e(33390),dd=e(80279),ud=e(7887),Al=e(87073),Cm=e(57514),Tm=e(69529),md=e(65178),Sm=e(35822);const Rl=0,Mm=W=>{const _=a.useRef(null),Z=a.useRef(null),de=a.useRef(W.items);de.current=W.items;const Pe=(0,Sm.useVirtual)({size:de.current.length,parentRef:Z}),{query:Ie,search:Ve,currentRootActionId:Je,activeIndex:qe,options:dt}=(0,Ga.useKBar)(Lt=>({search:Lt.searchQuery,currentRootActionId:Lt.currentRootActionId,activeIndex:Lt.activeIndex}));a.useEffect(()=>{const Lt=Ot=>{Ot.key==="ArrowUp"||Ot.ctrlKey&&Ot.key==="p"?(Ot.preventDefault(),Ie.setActiveIndex(Ft=>{let bn=Ft>Rl?Ft-1:Ft;if(typeof de.current[bn]=="string"){if(bn===0)return Ft;bn-=1}return bn})):Ot.key==="ArrowDown"||Ot.ctrlKey&&Ot.key==="n"?(Ot.preventDefault(),Ie.setActiveIndex(Ft=>{let bn=Ft<de.current.length-1?Ft+1:Ft;if(typeof de.current[bn]=="string"){if(bn===de.current.length-1)return Ft;bn+=1}return bn})):Ot.key==="Enter"&&(Ot.preventDefault(),_.current?.click())};return window.addEventListener("keydown",Lt),()=>window.removeEventListener("keydown",Lt)},[Ie]);const{scrollToIndex:Dt}=Pe;a.useEffect(()=>{Dt(qe,{align:qe<=1?"end":"auto"})},[qe,Dt]),a.useEffect(()=>{Ie.setActiveIndex(typeof W.items[Rl]=="string"?Rl+1:Rl)},[Ve,Je,W.items,Ie]);const Pt=a.useCallback((Lt,Ot)=>{if(typeof Ot=="string")return;const Ft=Ot.url;Ot.command?(Ot.command.perform(Ot),Ie.toggle()):Ft?Lt.ctrlKey||Lt.metaKey||Lt.shiftKey||Ie.toggle():(Ie.setSearch(""),Ie.setCurrentRootAction(Ot.id)),dt.callbacks?.onSelectAction?.(Ot)},[Ie,dt]),$t=(0,md.usePointerMovedSinceMount)();return a.createElement("div",{ref:Z,style:{maxHeight:W.maxHeight||400,position:"relative",overflow:"auto"}},a.createElement("div",{role:"listbox",id:Ga.KBAR_LISTBOX,style:{height:`${Pe.totalSize}px`,width:"100%"}},Pe.virtualItems.map(Lt=>{const Ot=de.current[Lt.index],{target:Ft,url:bn}=Ot,Ta=typeof Ot!="string"&&{onPointerMove:()=>$t&&qe!==Lt.index&&Ie.setActiveIndex(Lt.index),onPointerDown:()=>Ie.setActiveIndex(Lt.index),onClick:Dr=>Pt(Dr,Ot)},wa=Lt.index===qe,La={id:(0,Ga.getListboxItemId)(Lt.index),role:"option","aria-selected":wa,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Lt.start}px)`},...Ta},Aa=a.cloneElement(W.onRender({item:Ot,active:wa}),{ref:Lt.measureRef});return bn?a.createElement("a",{key:Lt.index,href:typeof bn=="function"?bn(Ve):bn,target:Ft,ref:wa?_:null,...La},Aa):a.createElement("div",{key:Lt.index,ref:wa?_:null,...La},Aa)})))},fd=a.forwardRef(({action:W,active:_,currentRootActionId:Z},de)=>{const Pe=a.useMemo(()=>{if(!Z)return W.ancestors;const qe=W.ancestors.findIndex(dt=>dt.id===Z);return W.ancestors.slice(qe+1)},[W.ancestors,Z]),Ie=(0,Tt.of)(xm);let Ve=W.name;const Je=qe=>!!(qe.command?.perform||qe.url);return W.children.length&&!Je(W)&&!Ve.endsWith("...")&&(Ve+="..."),a.createElement("div",{ref:de,className:(0,ot.cx)(Ie.row,_&&Ie.activeRow)},a.createElement("div",{className:Ie.actionContainer},W.icon,a.createElement("div",{className:Ie.textContainer},Pe.map(qe=>a.createElement(a.Fragment,{key:qe.id},!Je(qe)&&a.createElement(a.Fragment,null,a.createElement("span",{className:Ie.breadcrumbAncestor},qe.name),a.createElement("span",{className:Ie.breadcrumbSeparator},"\u203A")))),a.createElement("span",null,Ve)),W.subtitle&&a.createElement("span",{className:Ie.subtitleText},W.subtitle)))});fd.displayName="ResultItem";const xm=W=>({row:(0,ot.css)({padding:W.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:W.shape.radius.default,margin:W.spacing(0,1)}),activeRow:(0,ot.css)({color:W.colors.text.maxContrast,background:W.colors.emphasize(W.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:W.spacing(.5),borderRadius:W.shape.radius.default,backgroundImage:W.colors.gradients.brandVertical}}),actionContainer:(0,ot.css)({display:"flex",gap:W.spacing(1),alignItems:"baseline",fontSize:W.typography.fontSize,width:"100%"}),textContainer:(0,ot.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,ot.css)({color:W.colors.text.secondary}),breadcrumbSeparator:(0,ot.css)({color:W.colors.text.secondary,marginLeft:W.spacing(1),marginRight:W.spacing(1)}),subtitleText:(0,ot.css)({...W.typography.bodySmall,color:W.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var Om=e(76459),ac=e.n(Om),Im=e(62301),Ll=e(24439);const Am=6,Rm=5,Lm=4,Oo=3,ho=2,ni=1,Np=100,Bm=5,gd=ac()(Um,200);async function pd(){if(!Us.TP.user.isSignedIn)return[];const W=(await Im.A.getDashboardOpened()).slice(0,Bm),Z=(await(0,Ll.getGrafanaSearcher)().search({kind:["dashboard"],limit:Bm,uid:W})).view.toArray();return Z.sort((Pe,Ie)=>{const Ve=W.indexOf(Pe.uid),Je=W.indexOf(Ie.uid);return Ve-Je}),Z.map(Pe=>{const{url:Ie,name:Ve}=Pe;return{id:`recent-dashboards${Ie}`,name:`${Ve}`,section:(0,Qa.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Am,url:Ie}})}async function Um(W){if(W.length===0||!Us.TP.user.isSignedIn&&!G.$.bootData.settings.anonymousEnabled)return[];const _=await(0,Ll.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:W,limit:Np});return _.view.map(de=>{const{url:Pe,name:Ie,kind:Ve,location:Je}=de;return{id:`go/${Ve}${Pe}`,name:`${Ie}`,section:Ve==="dashboard"?(0,Qa.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,Qa.t)("command-palette.section.folder-search-results","Folders"),priority:ni,url:Pe,subtitle:_.view.dataFrame.meta?.custom?.locationInfo[Je]?.name}})}function hd(W,_){const[Z,de]=(0,a.useState)([]),[Pe,Ie]=(0,a.useState)(!1),Ve=(0,a.useRef)(0);return(0,a.useEffect)(()=>{const Je=Date.now();_&&W.length>0?(Ie(!0),gd(W).then(qe=>{Je>Ve.current&&(de(qe),Ie(!1),Ve.current=Je)})):(de([]),Ie(!1),Ve.current=Je)},[_,W]),{searchResults:Z,isFetchingSearchResults:Pe}}var Ar=e(28444),lr=e(28138),Nm=e(38645),vd=e(93522);const Ed=W=>{let _=W.children||[];if(W.id==="help"){const Z=()=>{lr.A.publish(new Ar.S8({component:vd.N}))};W.children=[..._,...(0,Nm.Dd)(),...wm(),{id:"keyboard-shortcuts",text:(0,Qa.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:Z}]}return W},sc=(W,_)=>{const Z={...W},de=Z.onClick;return Z.onClick=()=>{(0,hr.rR)("grafana_navigation_item_clicked",{path:Z.url??Z.id,menuIsDocked:_}),de?.()},Z.children&&(Z.children=Z.children.map(Pe=>sc(Pe,_))),Z},wp=(W,_)=>!!(W===_||Bl(W,_)),Bl=(W,_)=>!!W.children?.some(Z=>Z===_?!0:Bl(Z,_)),ol=W=>W?.split("?")[0]??"",Ul=(W,_)=>{const Z=ol(_?.url),de=ol(W.url);return de&&de.length>Z?.length},yd=(W,_,Z)=>{const de="/dashboards";for(const Pe of W){const Ie=ol(Pe.url),Ve=T.I.stripBaseFromUrl(Ie);if(Ve&&Pe.id!=="starred")if(Ve===_){Z=Pe;break}else if(Ve!=="/"&&_.startsWith(Ve))Ul(Pe,Z)&&(Z=Pe);else if(Ve==="/alerting/list"&&_.startsWith("/alerting/notification/")){Z=Pe;break}else Ve===de&&_.startsWith("/d/")&&Ul(Pe,Z)&&(Z=Pe);if(Pe.children&&(Z=yd(Pe.children,_,Z)),ol(Z?.url)===_)return Z}return Z};function wm(){const{buildInfo:W,licenseInfo:_}=G.$,Z=_.stateInfo?` (${_.stateInfo})`:"",de=[];return de.push({target:"_blank",id:"version",text:`${W.edition}${Z}`,url:_.licenseUrl,icon:"external-link-alt"}),W.hasUpdate&&de.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),de}var Nl=e(2769),il=e(74135);function Fm(){const W={},{extensions:_}=(0,U.Kf)({extensionPointId:il.S.CommandPalette,context:W,limitPerPlugin:3});return _.map(Z=>({section:Z.category??"Extensions",priority:ho,id:Z.id,name:Z.title,target:Z.path,perform:()=>Z.onClick&&Z.onClick()}))}function Dd(W){return"navModel."+W.id}function bd(W,_=[]){const Z=[];for(let de of W){de.id==="help"&&(de=Ed({...de}),delete de.url);const{url:Pe,target:Ie,text:Ve,isCreateAction:Je,children:qe,onClick:dt,keywords:Dt}=de,Pt=!!qe?.length;if(!(Pe||dt||Pt))continue;let $t=Pe;Pe&&(de.id==="connections-add-new-connection"||de.id==="standalone-plugin-page-/connections/add-new-connection")&&($t=Ta=>{const wa=Dt?.find(La=>La.toLowerCase().includes(Ta.toLowerCase()));return wa?`${Pe}?search=${wa}`:Pe});const Lt=Je?(0,Qa.t)("command-palette.section.actions","Actions"):(0,Qa.t)("command-palette.section.pages","Pages"),Ot=Je?Rm:Lm,Ft=_.map(Ta=>Ta.text).join(" > "),bn={id:Dd(de),name:Ve,section:Lt,url:$t,target:Ie,parent:_.length>0&&!Je?Dd(_[_.length-1]):void 0,perform:dt,keywords:Dt?.join(" "),priority:Ot,subtitle:Je?void 0:Ft};if(Z.push(bn),qe?.length){const Ta=bd(qe,[..._,de]);Z.push(...Ta)}}return Z}const Wm=W=>{const _=[{id:"preferences/theme",name:(0,Qa.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,Qa.t)("command-palette.section.preferences","Preferences"),priority:Oo},{id:"preferences/dark-theme",name:(0,Qa.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,Nl.K)("dark"),parent:"preferences/theme",priority:Oo},{id:"preferences/light-theme",name:(0,Qa.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,Nl.K)("light"),parent:"preferences/theme",priority:Oo}],Z=Fm(),de=bd(W);return[..._,...Z,...de]};function Km(W){const[_,Z]=(0,a.useState)([]),[de,Pe]=(0,a.useState)([]),Ie=(0,Bn.useSelector)(Ve=>Ve.navBarTree);return(0,a.useEffect)(()=>{const Ve=Wm(Ie);Z(Ve)},[Ie]),(0,a.useEffect)(()=>{W||pd().then(Ve=>Pe(Ve)).catch(Ve=>{console.error("Error loading recent dashboard actions",Ve)})},[W]),W?_:[...de,..._]}var Pd=e(53076);const rc={name:"none",priority:Ga.Priority.NORMAL};function wl(W,_){return _.priority-W.priority}function Cd(){const{search:W,actions:_,rootActionId:Z}=(0,Ga.useKBar)(Dt=>({search:Dt.searchQuery,actions:Dt.actions,rootActionId:Dt.currentRootActionId})),de=a.useMemo(()=>Object.keys(_).reduce((Dt,Pt)=>{const $t=_[Pt];if(!$t.parent&&!Z&&Dt.push($t),$t.id===Z)for(let Lt=0;Lt<$t.children.length;Lt++)Dt.push($t.children[Lt]);return Dt},[]).sort(wl),[_,Z]),Pe=a.useCallback(Dt=>{let Pt=[];for(let $t=0;$t<Dt.length;$t++)Pt.push(Dt[$t]);return function $t(Lt,Ot=Pt){for(let Ft=0;Ft<Lt.length;Ft++)if(Lt[Ft].children.length>0){let bn=Lt[Ft].children;for(let Ta=0;Ta<bn.length;Ta++)Ot.push(bn[Ta]);$t(Lt[Ft].children,Ot)}return Ot}(Dt)},[]),Ie=!W,Ve=a.useMemo(()=>Ie?de:Pe(de),[Pe,de,Ie]),Je=$m(Ve,W),qe=a.useMemo(()=>{let Dt={},Pt=[],$t=[];for(let Ot=0;Ot<Je.length;Ot++){const Ft=Je[Ot],bn=Ft.action,Ta=Ft.score||Ga.Priority.NORMAL,wa={name:typeof bn.section=="string"?bn.section:bn.section?.name||rc.name,priority:typeof bn.section=="string"?Ta:bn.section?.priority||0+Ta};Dt[wa.name]||(Dt[wa.name]=[],Pt.push(wa)),Dt[wa.name].push({priority:bn.priority+Ta,action:bn})}$t=Pt.sort(wl).map(Ot=>({name:Ot.name,actions:Dt[Ot.name].sort(wl).map(Ft=>Ft.action)}));let Lt=[];for(let Ot=0;Ot<$t.length;Ot++){let Ft=$t[Ot];Ft.name!==rc.name&&Lt.push(Ft.name);for(let bn=0;bn<Ft.actions.length;bn++)Lt.push(Ft.actions[bn])}return Lt},[Je]),dt=a.useMemo(()=>Z,[qe]);return a.useMemo(()=>({results:qe,rootActionId:dt}),[dt,qe])}function $m(W,_){const Z=_m(),de=a.useMemo(()=>({filtered:W,search:_}),[W,_]),{filtered:Pe,search:Ie}=(0,md.useThrottledValue)(de);return a.useMemo(()=>{if(Ie.trim()==="")return Pe.map(qe=>({score:0,action:qe}));const Ve=Pe.map(({name:qe,keywords:dt})=>`${qe} ${dt??""}`.toLowerCase()),Je=[];if(Ie.length>Vm){const qe=Ie.toLowerCase();for(let dt=0;dt<Ve.length;dt++){const Pt=Ve[dt].indexOf(qe);if(Pt>-1){const $t=Pt*-1,Lt=Pe[dt];Je.push({score:$t,action:Lt})}}}else{const qe=Z.split(Ie).length,dt=1/0,Dt=qe<5?4:0,[,Pt,$t]=Z.search(Ve,Ie,Dt,dt);if(Pt&&$t)for(let Lt=0;Lt<$t.length;Lt++){const Ot=$t[Lt],Ft=$t.length-Lt,bn=Pe[Pt.idx[Ot]];Je.push({score:Ft,action:bn})}}return Je},[Pe,Ie,Z])}const Vm=25;function _m(){const W=a.useRef();return W.current||(W.current=new Pd.A({intraMode:0,intraIns:0})),W.current}function zm(){const W=(0,Tt.of)(oc),{query:_,showing:Z,searchQuery:de}=(0,Ga.useKBar)(Dt=>({showing:Dt.visualState===Ga.VisualState.showing,searchQuery:Dt.searchQuery})),Pe=Km(de);(0,Ga.useRegisterActions)(Pe,[Pe]);const{searchResults:Ie,isFetchingSearchResults:Ve}=hd(de,Z),Je=(0,a.useRef)(null),{overlayProps:qe}=(0,Al.e)({isOpen:Z,onClose:()=>_.setVisualState(Ga.VisualState.animatingOut)},Je),{dialogProps:dt}=(0,dd.s)({},Je);return(0,a.useEffect)(()=>{Z&&(0,hr.rR)("command_palette_opened")},[Z]),Pe.length>0?a.createElement(Ga.KBarPortal,null,a.createElement(Ga.KBarPositioner,{className:W.positioner},a.createElement(Ga.KBarAnimator,{className:W.animator},a.createElement(ud.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{...qe,...dt},a.createElement("div",{className:W.searchContainer},a.createElement(us.I,{name:"search",size:"md"}),a.createElement(Ga.KBarSearch,{defaultPlaceholder:(0,Qa.t)("command-palette.search-box.placeholder","Search or jump to..."),className:W.search}),a.createElement("div",{className:W.loadingBarContainer},Ve&&a.createElement(Cm.G,{width:500,delay:0}))),a.createElement("div",{className:W.resultsContainer},a.createElement(km,{isFetchingSearchResults:Ve,searchResults:Ie}))))))):null}const km=({isFetchingSearchResults:W,searchResults:_})=>{const{results:Z,rootActionId:de}=Cd(),Pe=(0,Tt.of)(oc),Ie=(0,Qa.t)("command-palette.section.dashboard-search-results","Dashboards"),Ve=(0,Qa.t)("command-palette.section.folder-search-results","Folders"),Je=(0,a.useMemo)(()=>_.filter(Pt=>Pt.id.startsWith("go/dashboard")).map(Pt=>new Ga.ActionImpl(Pt,{store:{}})),[_]),qe=(0,a.useMemo)(()=>_.filter(Pt=>Pt.id.startsWith("go/folder")).map(Pt=>new Ga.ActionImpl(Pt,{store:{}})),[_]),dt=(0,a.useMemo)(()=>{const Pt=[...Z];return qe.length>0&&(Pt.push(Ve),Pt.push(...qe)),Je.length>0&&(Pt.push(Ie),Pt.push(...Je)),Pt},[Z,Ie,Je,Ve,qe]);return!W&&dt.length===0?a.createElement(Tm.p,{variant:"not-found",message:(0,Qa.t)("command-palette.empty-state.message","No results found")}):a.createElement(Mm,{items:dt,maxHeight:650,onRender:({item:Pt,active:$t})=>{const Lt=dt[0]===Pt;return typeof Pt=="string"?a.createElement("div",{className:(0,ot.cx)(Pe.sectionHeader,Lt&&Pe.sectionHeaderFirst)},Pt):a.createElement(fd,{action:Pt,active:$t,currentRootActionId:de})}})},oc=W=>({positioner:(0,ot.css)({zIndex:W.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:W.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,ot.css)({maxWidth:W.breakpoints.values.md,width:"100%",background:W.colors.background.primary,color:W.colors.text.primary,borderRadius:W.shape.radius.default,border:`1px solid ${W.colors.border.weak}`,overflow:"hidden",boxShadow:W.shadows.z3}),loadingBarContainer:(0,ot.css)({position:"absolute",left:0,right:0,bottom:0}),searchContainer:(0,ot.css)({alignItems:"center",background:W.components.input.background,borderBottom:`1px solid ${W.colors.border.weak}`,display:"flex",gap:W.spacing(1),padding:W.spacing(1,2),position:"relative"}),search:(0,ot.css)({fontSize:W.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:W.components.input.text}),spinner:(0,ot.css)({height:"22px"}),resultsContainer:(0,ot.css)({paddingBottom:W.spacing(1)}),sectionHeader:(0,ot.css)({padding:W.spacing(1.5,2,2,2),fontSize:W.typography.bodySmall.fontSize,fontWeight:W.typography.fontWeightMedium,color:W.colors.text.secondary,borderTop:`1px solid ${W.colors.border.weak}`,marginTop:W.spacing(1)}),sectionHeaderFirst:(0,ot.css)({paddingBottom:W.spacing(1),borderTop:"none",marginTop:0})});var ll=e(66588),Hm=e(40276),Td=e(78685),jm=e(8887),Fl=e(18759);const Sd=({children:W})=>{const _=(0,Tt.of)(Gm);return a.createElement(a.Fragment,null,W,a.createElement("span",{className:_.highlight}))},Gm=W=>({highlight:(0,ot.css)({backgroundColor:W.colors.success.main,borderRadius:W.shape.radius.circle,width:"6px",height:"6px",display:"inline-block;",position:"absolute",top:"50%",transform:"translateY(-50%)"})});var Qm=e(50720);function ic({children:W,isActive:_,onClick:Z,target:de,url:Pe}){const Ie=(0,Tt.$j)(),Ve=Md(Ie,_),Je=!de&&Pe.startsWith("/")?Qm.N:"a",qe=a.createElement("div",{className:Ve.linkContent},W,de==="_blank"&&a.createElement(us.I,{"data-testid":"external-link-icon",name:"external-link-alt"}));return a.createElement(Je,{"data-testid":Zs.Tp.components.NavMenu.item,className:(0,ot.cx)(Ve.container,{[Ve.containerActive]:_}),href:Pe,target:de,onClick:Z},qe)}ic.displayName="MegaMenuItemText";const Md=(W,_)=>({container:(0,ot.css)({alignItems:"center",color:_?W.colors.text.primary:W.colors.text.secondary,height:"100%",position:"relative",width:"100%","&:hover, &:focus-visible":{color:W.colors.text.primary,textDecoration:"underline"},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${W.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),containerActive:(0,ot.css)({backgroundColor:W.colors.background.secondary,borderTopRightRadius:W.shape.radius.default,borderBottomRightRadius:W.shape.radius.default,position:"relative","&::before":{backgroundImage:W.colors.gradients.brandVertical,borderRadius:W.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",transform:"translateX(-50%)",width:W.spacing(.5)}}),linkContent:(0,ot.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"})}),Wl=2;function Ym({link:W,activeItem:_,level:Z=0,onClick:de}){const{chrome:Pe}=(0,Er.Il)(),Ve=Pe.useState().megaMenuDocked,Je=(0,rr.zy)(),qe=W.highlightText?Sd:a.Fragment,dt=Bl(W,_),Dt=W===_||Z===Wl&&dt,[Pt,$t]=(0,Td.A)(`grafana.navigation.expanded[${W.text}]`,!!dt),Lt=Z<Wl&&!!(Od(W)||W.emptyMessage),Ot=(0,a.useRef)(null),Ft=(0,Tt.of)(xd);return(0,a.useEffect)(()=>{dt&&$t(!0)},[dt,Je,Ve,$t]),(0,a.useEffect)(()=>{Dt&&Ot.current&&Jm(Ot.current)&&Ot.current.scrollIntoView({block:"center"})},[Dt]),W.url?a.createElement("li",{ref:Ot,className:Ft.listItem},a.createElement("div",{className:(0,ot.cx)(Ft.menuItem,{[Ft.menuItemWithIcon]:!!(Z===0&&W.icon)})},Z!==0&&a.createElement(Fl.T,{level:Z===Wl?Z-1:Z,spacing:3}),Z===Wl&&a.createElement("div",{className:Ft.itemConnector}),a.createElement("div",{className:Ft.collapseButtonWrapper},Lt&&a.createElement(Ts.K,{"aria-label":`${Pt?"Collapse":"Expand"} section ${W.text}`,className:Ft.collapseButton,onClick:()=>$t(!Pt),name:Pt?"angle-down":"angle-right",size:"md",variant:"secondary"})),a.createElement("div",{className:Ft.collapsibleSectionWrapper},a.createElement(ic,{isActive:Dt,onClick:()=>{W.onClick?.(),de?.()},target:W.target,url:W.url},a.createElement("div",{className:(0,ot.cx)(Ft.labelWrapper,{[Ft.hasActiveChild]:dt,[Ft.labelWrapperWithIcon]:!!(Z===0&&W.icon)})},Z===0&&W.icon&&a.createElement(qe,null,a.createElement(us.I,{className:Ft.icon,name:(0,jm.Uo)(W.icon)??"link",size:"lg"})),a.createElement(wi.E,{truncate:!0},W.text))))),Lt&&Pt&&a.createElement("ul",{className:Ft.children},Od(W)?W.children.filter(bn=>!bn.isCreateAction).map(bn=>a.createElement(Ym,{key:`${W.text}-${bn.text}`,link:bn,activeItem:_,onClick:de,level:Z+1})):a.createElement("div",{className:Ft.emptyMessage,"aria-live":"polite"},W.emptyMessage))):null}const xd=W=>({icon:(0,ot.css)({width:W.spacing(3)}),listItem:(0,ot.css)({flex:1,maxWidth:"100%"}),menuItem:(0,ot.css)({display:"flex",alignItems:"center",gap:W.spacing(1),height:W.spacing(4),paddingLeft:W.spacing(.5),position:"relative"}),menuItemWithIcon:(0,ot.css)({paddingLeft:W.spacing(0)}),collapseButtonWrapper:(0,ot.css)({display:"flex",justifyContent:"center",width:W.spacing(3),flexShrink:0}),itemConnector:(0,ot.css)({position:"relative",height:"100%",width:W.spacing(1.5),"&::before":{borderLeft:`1px solid ${W.colors.border.medium}`,content:'""',height:"100%",right:0,position:"absolute",transform:"translateX(50%)"}}),collapseButton:(0,ot.css)({margin:0}),collapsibleSectionWrapper:(0,ot.css)({alignItems:"center",display:"flex",flex:1,height:"100%",minWidth:0}),labelWrapper:(0,ot.css)({display:"flex",alignItems:"center",gap:W.spacing(2),minWidth:0,paddingLeft:W.spacing(1)}),labelWrapperWithIcon:(0,ot.css)({paddingLeft:W.spacing(.5)}),hasActiveChild:(0,ot.css)({color:W.colors.text.primary}),children:(0,ot.css)({display:"flex",listStyleType:"none",flexDirection:"column"}),emptyMessage:(0,ot.css)({color:W.colors.text.secondary,fontStyle:"italic",padding:W.spacing(1,1.5,1,7)})});function Od(W){return!!(W.children&&W.children.length>0)}function Jm(W){const _=W.getBoundingClientRect();return _.bottom<0||_.top>=window.innerHeight}const Id="300px",bi=a.memo((0,a.forwardRef)(({onClose:W,..._},Z)=>{const de=(0,Bn.useSelector)(Pt=>Pt.navBarTree),Pe=(0,Tt.of)(Ad),Ie=(0,rr.zy)(),{chrome:Ve}=(0,Er.Il)(),Je=Ve.useState(),qe=de.filter(Pt=>Pt.id!=="profile"&&Pt.id!=="help").map(Pt=>sc(Pt,Je.megaMenuDocked)),dt=yd(qe,Ie.pathname),Dt=()=>{Ve.setMegaMenuDocked(!Je.megaMenuDocked),Je.megaMenuDocked&&Ve.setMegaMenuOpen(!1),setTimeout(()=>{document.getElementById(Je.megaMenuDocked?"mega-menu-toggle":"dock-menu-button")?.focus()})};return a.createElement("div",{"data-testid":Zs.Tp.components.NavMenu.Menu,ref:Z,..._},a.createElement("div",{className:Pe.mobileHeader},a.createElement(us.I,{name:"bars",size:"xl"}),a.createElement(Ts.K,{tooltip:(0,Qa.t)("navigation.megamenu.close","Close menu"),name:"times",onClick:W,size:"xl",variant:"secondary"})),a.createElement("nav",{className:Pe.content},a.createElement(Hm.E,{showScrollIndicators:!0,hideHorizontalTrack:!0},a.createElement("ul",{className:Pe.itemList,"aria-label":(0,Qa.t)("navigation.megamenu.list-label","Navigation")},qe.map((Pt,$t)=>a.createElement(xt.B,{key:Pt.text,direction:$t===0?"row-reverse":"row",alignItems:"center"},$t===0&&a.createElement(Ts.K,{id:"dock-menu-button",className:Pe.dockMenuButton,tooltip:Je.megaMenuDocked?(0,Qa.t)("navigation.megamenu.undock","Undock menu"):(0,Qa.t)("navigation.megamenu.dock","Dock menu"),name:"web-section-alt",onClick:Dt,variant:"secondary"}),a.createElement(Ym,{link:Pt,onClick:Je.megaMenuDocked?void 0:W,activeItem:dt})))))))}));bi.displayName="MegaMenu";const Ad=W=>({content:(0,ot.css)({display:"flex",flexDirection:"column",height:"100%",minHeight:0,position:"relative"}),mobileHeader:(0,ot.css)({display:"flex",justifyContent:"space-between",padding:W.spacing(1,1,1,2),borderBottom:`1px solid ${W.colors.border.weak}`,[W.breakpoints.up("md")]:{display:"none"}}),itemList:(0,ot.css)({boxSizing:"border-box",display:"flex",flexDirection:"column",listStyleType:"none",padding:W.spacing(1,1,2,1),[W.breakpoints.up("md")]:{width:Id}}),dockMenuButton:(0,ot.css)({display:"none",[W.breakpoints.up("xl")]:{display:"inline-flex"}})});var Kl=e(13390),Pi=e(27746),lc=e(28215);function Xm({href:W,isCurrent:_,text:Z,index:de,flexGrow:Pe}){const Ie=(0,Tt.of)(Zm),Ve=()=>{(0,hr.rR)("grafana_breadcrumb_clicked",{url:W})};return a.createElement("li",{className:Ie.breadcrumbWrapper,style:{flexGrow:Pe}},_?a.createElement("span",{"data-testid":Kl.X.Breadcrumbs.breadcrumb(Z),className:Ie.breadcrumb,"aria-current":"page",title:Z},Z):a.createElement(a.Fragment,null,a.createElement("a",{onClick:Ve,"data-testid":Kl.X.Breadcrumbs.breadcrumb(Z),className:(0,ot.cx)(Ie.breadcrumb,Ie.breadcrumbLink),title:Z,href:W},Z),a.createElement("div",{className:Ie.separator,"aria-hidden":!0},a.createElement(us.I,{name:"angle-right"}))))}const Zm=W=>({breadcrumb:(0,ot.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:W.spacing(0,.5),whiteSpace:"nowrap",color:W.colors.text.secondary}),breadcrumbLink:(0,ot.css)({color:W.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,ot.css)({alignItems:"center",color:W.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[W.breakpoints.down("sm")]:{display:"none","&:nth-last-child(2)":{display:"flex",minWidth:"40px"},"&:last-child":{display:"flex"}}}),separator:(0,ot.css)({color:W.colors.text.secondary})});function qm({breadcrumbs:W,className:_}){const Z=(0,Tt.of)(Rd);return a.createElement("nav",{"aria-label":"Breadcrumbs",className:_},a.createElement("ol",{className:Z.breadcrumbs},W.map((de,Pe)=>a.createElement(Xm,{...de,isCurrent:Pe===W.length-1,key:Pe,index:Pe,flexGrow:ef(Pe,W.length)}))))}function ef(W,_){return _<5&&W>0&&W<_-2||_>6&&W>1&&W<_-3?4:10}const Rd=W=>({breadcrumbs:(0,ot.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"})});var tf=e(3984),ai=e(57571),Ld=e(10804);const Bd="mega-menu-toggle";function nf({actions:W,searchBarHidden:_,sectionNav:Z,pageNav:de,onToggleMegaMenu:Pe,onToggleSearchBar:Ie,onToggleKioskMode:Ve}){const{chrome:Je}=(0,Er.Il)(),qe=Je.useState(),dt=(0,Bn.useSelector)($t=>$t.navIndex)[lc.Id],Dt=(0,Tt.of)(Ud),Pt=(0,tf.Z)(Z,de,dt);return a.createElement("div",{"data-testid":Kl.X.NavToolbar.container,className:Dt.pageToolbar},a.createElement("div",{className:Dt.menuButton},a.createElement(Ts.K,{id:Bd,name:"bars",tooltip:qe.megaMenuOpen?(0,Qa.t)("navigation.toolbar.close-menu","Close menu"):(0,Qa.t)("navigation.toolbar.open-menu","Open menu"),tooltipPlacement:"bottom",size:"xl",onClick:Pe,"data-testid":Kl.X.NavBar.Toggle.button})),a.createElement(qm,{breadcrumbs:Pt,className:Dt.breadcrumbsWrapper}),a.createElement("div",{className:Dt.actions},W,_&&a.createElement(Pi.I,{onClick:Ve,narrow:!0,title:(0,Qa.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),W&&a.createElement(Ld.K,null),a.createElement(Pi.I,{onClick:Ie,narrow:!0,title:(0,Qa.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},a.createElement(us.I,{name:_?"angle-down":"angle-up",size:"xl"}))))}const Ud=W=>({breadcrumbsWrapper:(0,ot.css)({display:"flex",overflow:"hidden",[W.breakpoints.down("sm")]:{minWidth:"50%"}}),pageToolbar:(0,ot.css)({height:ai.l,display:"flex",padding:W.spacing(0,1,0,2),alignItems:"center",borderBottom:`1px solid ${W.colors.border.weak}`}),menuButton:(0,ot.css)({display:"flex",alignItems:"center",marginRight:W.spacing(1)}),actions:(0,ot.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:W.spacing(1),flexGrow:1,gap:W.spacing(1),minWidth:0,".body-drawer-open &":{display:"none"}})});function Nd({}){const W=(0,Tt.$j)(),{chrome:_}=(0,Er.Il)(),Z=_.useState(),de=Z.searchBarHidden||Z.kioskMode===Bn.KioskMode.TV,Pe=(0,a.useRef)(null),Ie=(0,a.useRef)(null),Ve=W.transitions.duration.shortest,Je=(0,Tt.of)($l,Ve),qe=Z.megaMenuOpen&&!Z.megaMenuDocked,dt=()=>_.setMegaMenuOpen(!1),{overlayProps:Dt,underlayProps:Pt}=(0,Al.e)({isDismissable:!0,isOpen:!0,onClose:dt,shouldCloseOnInteractOutside:Ot=>!document.getElementById(Bd)?.contains(Ot)},Pe),{dialogProps:$t}=(0,dd.s)({},Pe),Lt=(0,Tt.of)(af,de);return a.createElement("div",{className:Lt.wrapper},a.createElement(Al.Sf,null,a.createElement(ll.A,{nodeRef:Pe,in:qe,unmountOnExit:!0,classNames:Je.overlay,timeout:{enter:Ve,exit:0}},a.createElement(ud.n1,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement(bi,{className:Lt.menu,onClose:dt,ref:Pe,...Dt,...$t}))),a.createElement(ll.A,{nodeRef:Ie,in:qe,unmountOnExit:!0,classNames:Je.backdrop,timeout:{enter:Ve,exit:0}},a.createElement("div",{ref:Ie,className:Lt.backdrop,...Pt}))))}const af=(W,_)=>{const Z=_?ai.l:ai.l*2;return{backdrop:(0,ot.css)({backdropFilter:"blur(1px)",backgroundColor:W.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:_?0:ai.l,zIndex:W.zIndex.modalBackdrop,[W.breakpoints.up("md")]:{top:Z}}),menu:(0,ot.css)({display:"flex",bottom:0,flexDirection:"column",left:0,right:0,zIndex:W.zIndex.modal,position:"fixed",top:_?0:ai.l,backgroundColor:W.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[W.breakpoints.up("md")]:{right:"unset",borderRight:`1px solid ${W.colors.border.weak}`,top:Z}}),wrapper:(0,ot.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:W.zIndex.sidemenu})}},$l=(W,_)=>{const Z={transitionDuration:`${_}ms`,transitionTimingFunction:W.transitions.easing.easeInOut,[W.breakpoints.down("md")]:{overflow:"hidden"}},de={...Z,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},Pe={...Z,transitionProperty:"opacity"},Ie={width:"100%",[W.breakpoints.up("md")]:{boxShadow:W.shadows.z3,width:Id}},Ve={boxShadow:"none",width:0},Je={opacity:1},qe={opacity:0};return{backdrop:{enter:(0,ot.css)(qe),enterActive:(0,ot.css)(Pe,Je),enterDone:(0,ot.css)(Je)},overlay:{enter:(0,ot.css)(Ve),enterActive:(0,ot.css)(de,Ie),enterDone:(0,ot.css)(Ie)}}};var sf=e(24120),Vl=e(49426);function wd(W,_){if(W===_)return!0;if(!(W instanceof Object)||!(_ instanceof Object))return!1;const Z=Object.keys(W),de=Z.length;for(let Pe=0;Pe<de;Pe++)if(!(Z[Pe]in _))return!1;for(let Pe=0;Pe<de;Pe++)if(W[Z[Pe]]!==_[Z[Pe]])return!1;return de===Object.keys(_).length}const cc="grafana.navigation.docked",dc="grafana.navigation.open";class rf{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.megaMenuDocked=!!(window.innerWidth>=G.$.theme2.breakpoints.values.xl&&Ho.A.getBool(cc,window.innerWidth>=G.$.theme2.breakpoints.values.xxl)),this.sessionStorageData=window.sessionStorage.getItem("returnToPrevious"),this.returnToPreviousData=this.sessionStorageData?JSON.parse(this.sessionStorageData):void 0,this.state=new Vl.t({chromeless:!0,sectionNav:{node:{text:(0,Qa.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:Ho.A.getBool(this.searchBarStorageKey,!1),megaMenuOpen:this.megaMenuDocked&&Ho.A.getBool(dc,!0),megaMenuDocked:this.megaMenuDocked,kioskMode:null,layout:vl.k.Canvas,returnToPrevious:this.returnToPreviousData}),this.setReturnToPrevious=_=>{if(!G.$.featureToggles.returnToPrevious)return;const de=this.state.getValue().returnToPrevious;(0,hr.rR)("grafana_return_to_previous_button_created",{page:_.href,previousPage:de?.href}),this.update({returnToPrevious:_}),window.sessionStorage.setItem("returnToPrevious",JSON.stringify(_))},this.clearReturnToPrevious=_=>{if(!G.$.featureToggles.returnToPrevious)return;const de=this.state.getValue().returnToPrevious;de&&(0,hr.rR)("grafana_return_to_previous_button_dismissed",{action:_,page:de.href}),this.update({returnToPrevious:void 0}),window.sessionStorage.removeItem("returnToPrevious")},this.setMegaMenuOpen=_=>{const{megaMenuDocked:Z}=this.state.getValue();Z&&Ho.A.set(dc,_),(0,hr.rR)("grafana_mega_menu_open",{state:_}),this.update({megaMenuOpen:_})},this.setMegaMenuDocked=(_,Z=!0)=>{Z&&Ho.A.set(cc,_),(0,hr.rR)("grafana_mega_menu_docked",{state:_}),this.update({megaMenuDocked:_})},this.onToggleSearchBar=()=>{const{searchBarHidden:_,kioskMode:Z}=this.state.getValue(),de=!_;Ho.A.set(this.searchBarStorageKey,de),Z&&S.Ny.partial({kiosk:null}),this.update({searchBarHidden:de,kioskMode:null})},this.onToggleKioskMode=()=>{const _=this.getNextKioskMode();this.update({kioskMode:_}),S.Ny.partial({kiosk:this.getKioskUrlValue(_)})}}setMatchedRoute(_){this.currentRoute!==_&&(this.currentRoute=_,this.routeChangeHandled=!1)}update(_){const Z=this.state.getValue(),de={...Z};this.routeChangeHandled||(de.actions=void 0,de.pageNav=void 0,de.sectionNav={node:{text:(0,Qa.t)("nav.home.title","Home")},main:{text:""}},de.chromeless=this.currentRoute?.chromeless,de.layout=vl.k.Standard,this.routeChangeHandled=!0),Object.assign(de,_),de.chromeless=de.kioskMode===Bn.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(de,Z)||this.state.next(de)}ignoreStateUpdate(_,Z){return!!(wd(_,Z)||(_.sectionNav!==Z.sectionNav||_.pageNav!==Z.pageNav)&&_.actions===Z.actions&&_.layout===Z.layout&&uc(_.sectionNav.node,Z.sectionNav.node)&&uc(_.pageNav,Z.pageNav))}useState(){return(0,sf.A)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),S.Ny.partial({kiosk:null})}setKioskModeFromUrl(_){let Z;switch(_){case"tv":Z=Bn.KioskMode.TV;break;case"1":case!0:Z=Bn.KioskMode.Full}Z&&Z!==this.state.getValue().kioskMode&&this.update({kioskMode:Z})}getKioskUrlValue(_){switch(_){case Bn.KioskMode.TV:return"tv";case Bn.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:_,searchBarHidden:Z}=this.state.getValue();return Z||_===Bn.KioskMode.TV?(lr.A.emit(ei.r1.alertSuccess,[(0,Qa.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),Bn.KioskMode.Full):_?null:Bn.KioskMode.TV}}function uc(W,_){if(W===_)return!0;const Z=W?.children?.find(Pe=>Pe.active),de=_?.children?.find(Pe=>Pe.active);return W?.text===_?.text&&W?.url===_?.url&&Z?.url===de?.url&&uc(W?.parentItem,_?.parentItem)}var of=e(19727);const yr=({label:W,onClick:_,onDismiss:Z})=>{const de=(0,Tt.of)(Fd);return a.createElement(of.e,{className:de.buttonGroup},a.createElement(oe.$n,{icon:"angle-left",size:"sm",variant:"primary",fill:"outline",onClick:_,title:W,className:de.mainDismissableButton,"data-testid":Zs.Tp.components.ReturnToPrevious.backButton},W),a.createElement(oe.$n,{icon:"times","aria-label":(0,Qa.t)("return-to-previous.dismissable-button","Close"),variant:"primary",fill:"outline",size:"sm",onClick:Z,"data-testid":Zs.Tp.components.ReturnToPrevious.dismissButton}))},Fd=W=>({mainDismissableButton:(0,ot.css)({width:"100%","> span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"270px",display:"inline-block"}}),buttonGroup:(0,ot.css)({width:"fit-content",backgroundColor:W.colors.background.secondary})});yr.displayName="DismissableButton";const lf=({href:W,title:_})=>{const Z=(0,Tt.of)(cl),{chrome:de}=(0,Er.Il)(),Pe=(0,a.useCallback)(()=>{S.Ny.push(W),de.clearReturnToPrevious("clicked")},[W,de]),Ie=(0,a.useCallback)(()=>{de.clearReturnToPrevious("dismissed")},[de]);return a.createElement("div",{className:Z.returnToPrevious,"data-testid":Zs.Tp.components.ReturnToPrevious.buttonGroup},a.createElement(yr,{label:(0,Qa.t)("return-to-previous.button.label","Back to {{title}}",{title:_}),onClick:Pe,onDismiss:Ie}))},cl=W=>({returnToPrevious:(0,ot.css)({label:"return-to-previous",display:"flex",justifyContent:"center",left:"50%",transform:"translateX(-50%)",zIndex:W.zIndex.tooltip,position:"fixed",bottom:W.spacing.x4,boxShadow:W.shadows.z3})});lf.displayName="ReturnToPrevious";var _l=e(40672),mc=e(83122),Wd=e(42941),cf=e(87978),df=e(62372),uf=e(49185),Vi=e(69386),mf=e(4172);function ff({feedUrl:W}){const _=(0,Tt.of)(gf),{state:Z,getNews:de}=(0,mf.n)(W),[Pe,Ie]=(0,uf.A)();return(0,a.useEffect)(()=>{de()},[de]),Z.error?a.createElement("div",{className:_.innerWrapper},Z.error&&Z.error.message):a.createElement("div",{ref:Pe},Z.loading?a.createElement(a.Fragment,null,a.createElement(Vi.K.Skeleton,{showImage:!0,width:Ie.width}),a.createElement(Vi.K.Skeleton,{showImage:!0,width:Ie.width}),a.createElement(Vi.K.Skeleton,{showImage:!0,width:Ie.width}),a.createElement(Vi.K.Skeleton,{showImage:!0,width:Ie.width}),a.createElement(Vi.K.Skeleton,{showImage:!0,width:Ie.width})):a.createElement(a.Fragment,null,Ie.width>0&&Z.value?.map((Ve,Je)=>a.createElement(Vi.K,{key:Je,index:Je,showImage:!0,width:Ie.width,data:Z.value}))),a.createElement("div",{className:_.grot},a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"}))))}const gf=W=>({innerWrapper:(0,ot.css)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),grot:(0,ot.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:W.spacing(5,0),img:{width:"186px",height:"186px"}})});function pf({className:W}){const[_,Z]=(0,Wd.A)(!1),de=(0,Tt.of)(hf);return a.createElement(a.Fragment,null,a.createElement(Pi.I,{className:W,onClick:Z,iconOnly:!0,icon:"rss","aria-label":"News"}),_&&a.createElement(cf._,{title:a.createElement("div",{className:de.title},a.createElement(wi.E,{element:"h3"},(0,Qa.t)("news.title","Latest from the blog")),a.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:de.grot},a.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),a.createElement("div",{className:de.actions},a.createElement(Ts.K,{name:"times",variant:"secondary",onClick:Z,"data-testid":Zs.Tp.components.Drawer.General.close,tooltip:(0,Qa.t)("news.drawer.close","Close Drawer")}))),onClose:Z,size:"md"},a.createElement(ff,{feedUrl:df.$})))}const hf=W=>({title:(0,ot.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:W.spacing(2),borderBottom:`1px solid ${W.colors.border.weak}`}),grot:(0,ot.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:W.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,ot.css)({position:"absolute",right:W.spacing(1),top:W.spacing(2)})});var Kd=e(32931);function vf({orgs:W,onSelectChange:_}){const Z=(0,Tt.of)(Ef);return a.createElement(hi.i,{"aria-label":"Change organization",variant:"secondary",buttonCss:Z.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:W.map(de=>({label:de.name,description:de.role,value:de})),onChange:_,icon:"building"})}const Ef=W=>({buttonCss:(0,ot.css)({color:W.colors.text.secondary,"&:hover":{color:W.colors.text.primary}})});function fc({orgs:W,onSelectChange:_}){const Z=(0,Tt.of)(yf),{orgName:de,orgId:Pe,orgRole:Ie}=Us.TP.user,[Ve,Je]=(0,a.useState)(()=>({label:de,value:{role:Ie,orgId:Pe,name:de},description:Ie})),qe=dt=>{Je(dt),_(dt)};return a.createElement(re.l6,{"aria-label":"Change organization",width:"auto",value:Ve,prefix:a.createElement(us.I,{className:"prefix-icon",name:"building"}),className:Z.select,options:W.map(dt=>({label:dt.name,description:dt.role,value:dt})),onChange:qe})}const yf=W=>({select:(0,ot.css)({border:"none",background:"none",color:W.colors.text.secondary,"&:hover":{color:W.colors.text.primary,"& .prefix-icon":(0,ot.css)({color:W.colors.text.primary})}})});function Df(){const W=(0,Tt.$j)(),_=(0,Bn.useDispatch)(),Z=(0,Bn.useSelector)(qe=>qe.organization.userOrgs),de=qe=>{qe.value&&((0,Kd.bA)(qe.value.orgId),S.Ny.push(`/?orgId=${qe.value.orgId}`),window.location.reload())};(0,a.useEffect)(()=>{Us.TP.isSignedIn&&_((0,Kd.wV)())},[_]);const Pe=W.breakpoints.values.sm,[Ie,Ve]=(0,a.useState)(!window.matchMedia(`(min-width: ${Pe}px)`).matches);if((0,rl.Y)({breakpoint:Pe,onChange:qe=>{Ve(!qe.matches)}}),Z?.length<=1)return null;const Je=Ie?vf:fc;return a.createElement(Je,{orgs:Z,onSelectChange:de})}var gc=e(38138);function $d(W){const _=[];for(const Z of W)Z.isCreateAction&&_.push(Z),Z.children&&_.push(...$d(Z.children));return _}const bf=({})=>{const W=(0,Tt.of)(Pf),_=(0,Tt.$j)(),Z=(0,Bn.useSelector)(Dt=>Dt.navBarTree),de=_.breakpoints.values.sm,[Pe,Ie]=(0,a.useState)(!1),[Ve,Je]=(0,a.useState)(!window.matchMedia(`(min-width: ${de}px)`).matches),qe=(0,a.useMemo)(()=>$d(Z),[Z]);(0,rl.Y)({breakpoint:de,onChange:Dt=>{Je(!Dt.matches)}});const dt=()=>a.createElement(gc.W,null,qe.map((Dt,Pt)=>a.createElement(gc.W.Item,{key:Pt,url:Dt.url,label:Dt.text,onClick:()=>(0,hr.rR)("grafana_menu_item_clicked",{url:Dt.url,from:"quickadd"})})));return qe.length>0?a.createElement(a.Fragment,null,a.createElement(mc.m,{overlay:dt,placement:"bottom-end",onVisibleChange:Ie},a.createElement(Pi.I,{iconOnly:!0,icon:Ve?"plus-circle":"plus",isOpen:Ve?void 0:Pe,"aria-label":"New"})),a.createElement(Ld.K,{className:W.separator})):null},Pf=W=>({buttonContent:(0,ot.css)({alignItems:"center",display:"flex"}),buttonText:(0,ot.css)({[W.breakpoints.down("md")]:{display:"none"}}),separator:(0,ot.css)({[W.breakpoints.down("sm")]:{display:"none"}})});function Cf(){const W=(0,rr.zy)(),_=(0,Tt.of)(Tf);let Z=_l.sQ.sanitizeUrl(T.I.getUrlForPartial(W,{forceLogin:"true"}));return Z.startsWith("//")&&(Z=Z.replace(/\/+/g,"/")),a.createElement("a",{className:_.link,href:Z,target:"_self"},"Sign in")}const Tf=W=>({link:(0,ot.css)({paddingRight:W.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Vd=e(64539);function zl({node:W}){const _=(0,Tt.of)(Sf),Z=sc((0,h.cloneDeep)(W),!1);return Z?a.createElement(gc.W,{header:a.createElement("div",{onClick:de=>de.stopPropagation(),className:_.header},a.createElement("div",null,Z.text),Z.subTitle&&a.createElement("div",{className:_.subTitle},Z.subTitle))},Z.children?.map(de=>de.url?a.createElement(Vd.D,{url:de.url,label:de.text,icon:de.icon,target:de.target,key:de.id}):a.createElement(Vd.D,{icon:de.icon,onClick:de.onClick,label:de.text,key:de.id}))):null}const Sf=W=>({header:(0,ot.css)({fontSize:W.typography.h5.fontSize,fontWeight:W.typography.h5.fontWeight,padding:W.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,ot.css)({color:W.colors.text.secondary,fontSize:W.typography.bodySmall.fontSize})});var Mf=e(16797),pc=e(63917);function _d(){const W=(0,Tt.$j)(),{query:_}=(0,Ga.useKBar)(Ve=>({kbarSearchQuery:Ve.searchQuery,kbarIsOpen:Ve.visualState===Ga.VisualState.showing})),Z=W.breakpoints.values.sm,[de,Pe]=(0,a.useState)(!window.matchMedia(`(min-width: ${Z}px)`).matches);(0,rl.Y)({breakpoint:Z,onChange:Ve=>{Pe(!Ve.matches)}});const Ie=()=>{_.toggle()};return de?a.createElement(Pi.I,{iconOnly:!0,icon:"search","aria-label":(0,Qa.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:Ie}):a.createElement(xf,{onClick:Ie})}function xf({onClick:W}){const _=(0,Tt.of)(hc),Z=(0,a.useMemo)(()=>(0,pc.gn)(),[]);return a.createElement("div",{className:_.wrapper},a.createElement("div",{className:_.inputWrapper},a.createElement("div",{className:_.prefix},a.createElement(us.I,{name:"search"})),a.createElement("button",{className:_.fakeInput,onClick:W},(0,Qa.t)("nav.search.placeholderCommandPalette","Search or jump to...")),a.createElement("div",{className:_.suffix},a.createElement(us.I,{name:"keyboard"}),a.createElement(wi.E,{variant:"bodySmall"},Z,"+k"))))}const hc=W=>{const _=(0,Me.n)({theme:W});return{wrapper:_.wrapper,inputWrapper:_.inputWrapper,prefix:_.prefix,suffix:(0,ot.css)([_.suffix,{display:"flex",gap:W.spacing(.5)}]),fakeInput:(0,ot.css)([_.input,{textAlign:"left",paddingLeft:28,color:W.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,ot.css)`
          ${(0,Mf.focusCss)(W)}
        `}]),button:(0,ot.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function vc({children:W,align:_="left"}){const Z=(0,Tt.of)(Of),Pe=(0,Tt.$j)().breakpoints.values.sm,[Ie,Ve]=(0,a.useState)(!window.matchMedia(`(min-width: ${Pe}px)`).matches);return(0,rl.Y)({breakpoint:Pe,onChange:Je=>{Ve(!Je.matches)}}),Ie?a.createElement(a.Fragment,null,W):a.createElement("div",{"data-testid":"wrapper",className:(0,ot.cx)(Z.wrapper,{[Z[_]]:_==="right"})},W)}const Of=W=>({wrapper:(0,ot.css)({display:"flex",gap:W.spacing(.5),alignItems:"center"}),right:(0,ot.css)({justifyContent:"flex-end"}),left:(0,ot.css)({}),center:(0,ot.css)({})}),zd=a.memo(function(){const _=(0,Tt.of)(If),Z=(0,Bn.useSelector)(qe=>qe.navIndex),de=(0,rr.zy)(),Pe=(0,h.cloneDeep)(Z.help),Ie=Pe?Ed(Pe):void 0,Ve=Z.profile;let Je=z.config.appSubUrl||"/";return!z.config.bootData.user.isSignedIn&&!z.config.anonymousEnabled&&(Je=_l.sQ.sanitizeUrl(T.I.getUrlForPartial(de,{forceLogin:"true"}))),a.createElement("div",{className:_.layout},a.createElement(vc,null,a.createElement("a",{className:_.logo,href:Je,title:"Go to home"},a.createElement(Wc.M.MenuLogo,{className:_.img})),a.createElement(Df,null)),a.createElement(vc,null,a.createElement(_d,null)),a.createElement(vc,{align:"right"},a.createElement(bf,null),Ie&&a.createElement(mc.m,{overlay:()=>a.createElement(zl,{node:Ie}),placement:"bottom-end"},a.createElement(Pi.I,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),z.config.newsFeedEnabled&&a.createElement(pf,null),!vs.TP.user.isSignedIn&&a.createElement(Cf,null),Ve&&a.createElement(mc.m,{overlay:()=>a.createElement(zl,{node:Ve}),placement:"bottom-end"},a.createElement(Pi.I,{className:_.profileButton,imgSrc:vs.TP.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),If=W=>({layout:(0,ot.css)({height:ai.l,display:"flex",gap:W.spacing(1),alignItems:"center",padding:W.spacing(0,1,0,2),borderBottom:`1px solid ${W.colors.border.weak}`,justifyContent:"space-between",[W.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,ot.css)({height:W.spacing(3),width:W.spacing(3)}),logo:(0,ot.css)({display:"flex"}),profileButton:(0,ot.css)({padding:W.spacing(0,.25),img:{borderRadius:W.shape.radius.circle,height:"24px",marginRight:0,width:"24px"}})});function Af({children:W}){const{chrome:_}=(0,Er.Il)(),Z=_.useState(),de=Z.searchBarHidden||Z.kioskMode===Bn.KioskMode.TV,Pe=(0,Tt.$j)(),Ie=(0,Tt.of)(Rf),Ve=Pe.breakpoints.values.xl,Je=Ho.A.getBool(cc,!0);(0,rl.Y)({breakpoint:Ve,onChange:Ot=>{Je&&(_.setMegaMenuDocked(Ot.matches,!1),_.setMegaMenuOpen(Ot.matches?Ho.A.getBool(dc,Z.megaMenuOpen):!1))}});const qe=(0,ot.cx)({[Ie.content]:!0,[Ie.contentNoSearchBar]:de,[Ie.contentChromeless]:Z.chromeless}),dt=()=>{_.setMegaMenuOpen(!Z.megaMenuOpen)},{pathname:Dt,search:Pt}=S.Ny.getLocation(),$t=Dt+Pt,Lt=z.Ay.featureToggles.returnToPrevious&&Z.returnToPrevious&&$t!==Z.returnToPrevious.href;return(0,a.useEffect)(()=>{Z.returnToPrevious&&$t===Z.returnToPrevious.href&&_.clearReturnToPrevious("auto_dismissed")},[_,$t]),(0,a.useEffect)(()=>{const Ot=(0,S.SE)(Pt);_.setKioskModeFromUrl(Ot.kiosk)},[_,Pt]),a.createElement("div",{className:Pm()("main-view",{"main-view--search-bar-hidden":de&&!Z.chromeless,"main-view--chrome-hidden":Z.chromeless})},!Z.chromeless&&a.createElement(a.Fragment,null,a.createElement(oe.z9,{className:Ie.skipLink,href:"#pageContent"},"Skip to main content"),a.createElement("header",{className:(0,ot.cx)(Ie.topNav)},!de&&a.createElement(zd,null),a.createElement(nf,{searchBarHidden:de,sectionNav:Z.sectionNav.node,pageNav:Z.pageNav,actions:Z.actions,onToggleSearchBar:_.onToggleSearchBar,onToggleMegaMenu:dt,onToggleKioskMode:_.onToggleKioskMode}))),a.createElement("div",{className:qe},a.createElement("div",{className:Ie.panes},!Z.chromeless&&Z.megaMenuDocked&&Z.megaMenuOpen&&a.createElement(bi,{className:Ie.dockedMegaMenu,onClose:()=>_.setMegaMenuOpen(!1)}),a.createElement("main",{className:Ie.pageContainer,id:"pageContent"},W))),!Z.chromeless&&!Z.megaMenuDocked&&a.createElement(Nd,null),!Z.chromeless&&a.createElement(zm,null),Lt&&Z.returnToPrevious&&a.createElement(lf,{href:Z.returnToPrevious.href,title:Z.returnToPrevious.title}))}const Rf=W=>({content:(0,ot.css)({display:"flex",flexDirection:"column",paddingTop:ai.l*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,ot.css)({paddingTop:ai.l}),contentChromeless:(0,ot.css)({paddingTop:0}),dockedMegaMenu:(0,ot.css)({background:W.colors.background.primary,borderRight:`1px solid ${W.colors.border.weak}`,display:"none",zIndex:W.zIndex.navbarFixed,[W.breakpoints.up("xl")]:{display:"block"}}),topNav:(0,ot.css)({display:"flex",position:"fixed",zIndex:W.zIndex.navbarFixed,left:0,right:0,background:W.colors.background.primary,flexDirection:"column"}),panes:(0,ot.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[W.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,ot.css)({label:"page-container",flexGrow:1,minHeight:0,minWidth:0,overflow:"auto","@media print":{overflow:"visible"},"@page":{margin:0,size:"auto",padding:0}}),skipLink:(0,ot.css)({position:"absolute",top:-1e3,":focus":{left:W.spacing(1),top:W.spacing(1),zIndex:W.zIndex.portal}})});var kl=e(82467),kd=e(16001),Hl=e(3169),Lf=e(94701);function Bf({appNotification:W,onClearNotification:_}){const Z=(0,Tt.of)(Uf);(0,Lf.A)(()=>{setTimeout(()=>{_(W.id)},Bn.timeoutMap[W.severity])});const de=W.component||W.text||W.traceId;return a.createElement(wt.F,{severity:W.severity,title:W.title,onRemove:()=>_(W.id),elevated:!0},de&&a.createElement("div",{className:Z.wrapper},a.createElement("span",null,W.component||W.text),W.traceId&&a.createElement("span",{className:Z.trace},"Trace ID: ",W.traceId)))}function Uf(W){return{wrapper:(0,ot.css)({display:"flex",flexDirection:"column"}),trace:(0,ot.css)({fontSize:W.typography.pxToRem(10)})}}function Nf(){const W=(0,Bn.useSelector)(Pe=>(0,kd.fX)(Pe.appNotifications)),_=(0,Bn.useDispatch)(),Z=(0,Tt.of)(wf);(0,a.useEffect)(()=>{lr.A.on(ei.r1.alertWarning,Pe=>_((0,kl.dx)((0,Hl.q8)(...Pe)))),lr.A.on(ei.r1.alertSuccess,Pe=>_((0,kl.dx)((0,Hl.tZ)(...Pe)))),lr.A.on(ei.r1.alertError,Pe=>_((0,kl.dx)((0,Hl.gi)(...Pe))))},[_]);const de=Pe=>{_((0,kl.Do)(Pe))};return a.createElement("div",{className:Z.wrapper},a.createElement(Zn.gW,null,W.map((Pe,Ie)=>a.createElement(Bf,{key:`${Pe.id}-${Ie}`,appNotification:Pe,onClearNotification:de}))))}function wf(W){return{wrapper:(0,ot.css)({label:"app-notifications-list",zIndex:W.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}function Ff(W){const[_,Z]=(0,a.useState)({component:null,props:{}}),de=(0,a.useMemo)(()=>{function Pe(Ve,Je){Z({component:Ve,props:Je})}function Ie(){Z({component:null,props:{}})}return{component:_.component,props:{..._.props,isOpen:!0,onDismiss:Ie},showModal:Pe,hideModal:Ie}},[_]);return(0,a.useEffect)(()=>{lr.A.subscribe(Ar.S8,({payload:Ie})=>{Z({component:Ie.component,props:Ie.props})}),lr.A.subscribe(Ar.bY,Ie=>{Wf(Ie,Z)});let Pe="";S.Ny.getHistory().listen(Ie=>{Ie.pathname!==Pe&&Z({component:null,props:{}}),Pe=Ie.pathname})},[]),a.createElement(Fc.wE.Provider,{value:de},W.children)}function Wf({payload:W},_){const{confirmText:Z,onConfirm:de=()=>{},onDismiss:Pe,text2:Ie,altActionText:Ve,onAltAction:Je,noText:qe,text:dt,text2htmlBind:Dt,yesText:Pt="Yes",icon:$t,title:Lt="Confirm",yesButtonVariant:Ot}=W,Ft=()=>_({component:null,props:{}}),bn={confirmText:Pt,confirmButtonVariant:Ot,confirmationText:Z,icon:$t,title:Lt,body:dt,description:Ie&&Dt?_l.sQ.sanitize(Ie):Ie,isOpen:!0,dismissText:qe,onConfirm:()=>{de(),Ft()},onDismiss:()=>{Pe?.(),Ft()},onAlternative:Je?()=>{Je(),Ft()}:void 0,alternativeText:Ve};_({component:bl.u,props:bn})}var Kf=e(66899),$f=e.n(Kf),Hd=e(52446);function Vf({error:W,errorInfo:_}){const Z=(0,rr.zy)(),de=W?.name==="ChunkLoadError",Pe=(0,Tt.of)(_f);return(0,a.useEffect)(()=>{de&&Z.search.indexOf("chunkNotFound")===-1&&(window.location.href=T.I.getUrlForPartial(Z,{chunkNotFound:!0}))},[Z,de]),a.createElement(Sr.Y,{navId:"error",layout:vl.k.Canvas},a.createElement("div",{className:Pe.container},de&&a.createElement("div",null,a.createElement("h2",null,"Unable to find application file"),a.createElement("br",null),a.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),a.createElement("br",null),a.createElement(oe.$n,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload"),a.createElement(Hd.D,{title:"Error details",error:W,errorInfo:_})),!de&&a.createElement(Hd.D,{title:"An unexpected error happened",error:W,errorInfo:_})))}const _f=W=>({container:(0,ot.css)({width:"500px",margin:W.spacing(8,"auto")})});function Fp(){const W=(0,Tt.of)(Vp);return a.createElement("div",{className:W.container,"aria-live":"polite",role:"status","aria-label":(0,Qa.t)("bouncing-loader.label","Loading")},a.createElement("div",{className:W.bounce},a.createElement("img",{alt:"",src:"public/img/grafana_icon.svg",className:W.logo})))}const Wp=(0,ot.keyframes)({"0%":{opacity:0,animationTimingFunction:"cubic-bezier(0, 0, 0.5, 1)"},"100%":{opacity:1}}),Kp=(0,ot.keyframes)({"from, to":{transform:"translateY(0px)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"50%":{transform:"translateY(-50px)",animationTimingFunction:"cubic-bezier(0.9, 0, 0.7, 1)"}}),$p=(0,ot.keyframes)({"0%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"15%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 0.75)"},"55%":{transform:"scaleX(1.05) scaleY(0.95)",animationTimingFunction:"cubic-bezier(0.9, 0, 1, 1)"},"95%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0, 1)"},"100%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 1)"}}),Vp=W=>({container:(0,ot.css)({opacity:0,animationName:Wp,animationIterationCount:1,animationDuration:"0.9s",animationDelay:"0.5s",animationFillMode:"forwards"}),bounce:(0,ot.css)({textAlign:"center",animationName:Kp,animationDuration:"0.9s",animationIterationCount:"infinite"}),logo:(0,ot.css)({display:"inline-block",animationName:$p,animationDuration:"0.9s",animationIterationCount:"infinite",width:"60px",height:"60px"})});function _p(){const W=(0,Tt.of)(zp);return a.createElement("div",{className:W.loadingPage},a.createElement(Fp,null))}const zp=W=>({loadingPage:(0,ot.css)({backgroundColor:W.colors.background.primary,height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function kp(W){const{chrome:_,keybindings:Z}=(0,Er.Il)();return _.setMatchedRoute(W.route),(0,a.useLayoutEffect)(()=>{Z.clearAndInitGlobalBindings(W.route)},[Z,W.route]),(0,a.useEffect)(()=>(zf(W.route),kf(),(0,S.Lc)("GrafanaRoute",!1,"Mounted",W.match),()=>{(0,S.Lc)("GrafanaRoute",!1,"Unmounted",W.route),zf(W.route,!0)}),[]),(0,a.useEffect)(()=>{kf(),(0,hr.Jy)(),(0,S.Lc)("GrafanaRoute",!1,"Updated",W)}),(0,S.Lc)("GrafanaRoute",!1,"Rendered",W.route),a.createElement(ro.tH,null,({error:de,errorInfo:Pe})=>de?a.createElement(Vf,{error:de,errorInfo:Pe}):a.createElement(a.Suspense,{fallback:a.createElement(_p,null)},a.createElement(W.route.component,{...W,queryParams:(0,S.SE)(W.location.search)})))}function Hp(W){return W.pageClass?W.pageClass.split(" "):[]}function zf(W,_=!1){for(const Z of Hp(W))_?document.body.classList.remove(Z):document.body.classList.add(Z)}function kf(){document.body.classList.remove("sidemenu-open--xs");const W=document.getElementById("tooltip");W?.parentElement?.removeChild(W);const _=document.querySelectorAll(".tooltip");for(let Z=0;Z<_.length;Z++){const de=_[Z];de.parentElement?.removeChild(de)}for(const Z of $f().drops)Z.destroy()}var jp=e(96378),jd=e(78731);class Gp extends a.PureComponent{constructor(){super(...arguments),this.styles=Qp(G.$.theme2),this.state={},this.initListener=()=>{const _=(0,jd.oF)();_&&(this.subscription=_.getConnectionState().subscribe({next:Z=>{this.setState({show:!Z})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:_}=this.state;return _?!Us.TP.isSignedIn||!G.$.liveEnabled||Us.TP.user.orgRole===Sl.X.None?null:a.createElement("div",{className:this.styles.foot},a.createElement(wt.F,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Qp=(0,El.N)(W=>({foot:(0,ot.css)`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:(0,ot.css)`
      max-width: 400px;
      margin: auto;
    `}));let Hf=[],jf=[];function Yh(W){Hf.push(W)}function Jh(W){jf.push(W)}class Yp extends a.Component{constructor(_){super(_),this.renderRoute=Z=>{const de=Z.roles?Z.roles():[];return a.createElement(wc.CompatRoute,{exact:Z.exact===void 0?!0:Z.exact,sensitive:Z.sensitive===void 0?!1:Z.sensitive,path:Z.path,key:Z.path,render:Pe=>de?.length&&!de.some(Ie=>Us.TP.hasRole(Ie))?a.createElement(rr.rd,{to:"/"}):a.createElement(kp,{...Pe,route:Z})})},this.state={}}async componentDidMount(){await Dm(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return a.createElement(rr.dO,null,pm().map(_=>this.renderRoute(_)))}render(){const{app:_}=this.props,{ready:Z}=this.state;(0,S.Lc)("AppWrapper",!1,"rendering");const de=Pe=>{(0,hr.rR)("command_palette_action_selected",{actionId:Pe.id,actionName:Pe.name})};return a.createElement(Zo.Provider,{store:Ms.M_},a.createElement(ro.Xw,{style:"page"},a.createElement(Er.YE.Provider,{value:_.context},a.createElement(jp.N,{value:G.$.theme2},a.createElement(Ga.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:de}}},a.createElement(rr.Ix,{history:S.Ny.getHistory()},a.createElement(wc.CompatRouter,null,a.createElement(Ff,null,a.createElement(or.k,null),a.createElement("div",{className:"grafana-app"},a.createElement(Af,null,jf.map((Pe,Ie)=>a.createElement(Pe,{key:Ie.toString()})),a.createElement(Il,null),a.createElement(Nf,null),Z&&this.renderRoutes(),Hf.map((Pe,Ie)=>a.createElement(Pe,{key:Ie.toString()})))),a.createElement(Gp,null),a.createElement(Fc.EO,null),a.createElement(Du.qB,null)))))))))}}var Gf=e(33919);function Jp({actions:W,children:_,info:Z,pageNav:de,layout:Pe,renderTitle:Ie,subTitle:Ve}){const Je=(0,a.useContext)(xl.A);return a.createElement(Sr.Y,{navModel:Je.sectionNav,pageNav:de,layout:Pe,actions:W,renderTitle:Ie,info:Z,subTitle:Ve},a.createElement(Sr.Y.Contents,null,_))}var Qf=e(8867),Ec=e(91324),jl=e(23227),Yf=e(83712),Jf=e(93455),Xf=e(99443),Zf=e(70699),qf=e(63997),eg=e(5798),tg=e(61061),ng=e(85346),ag=e(41731),Gd=e(36294),sg=e(62575),rg=e(27798),og=e(53392),ig=e(17694),lg=e(27743),cg=e(66509),dg=e(98368),ug=e(67341),mg=e(51472),fg=e(90517),Qd=e(78412),Xp=e(24548),Zp=e(41366),qp=e(63892),eh=e(22965),th=e(19336),nh=e(66163),ah=e(30259),sh=e(96725),rh=e(30283),gg=e(53141),pg=e(69382),hg=e(88790),vg=e(388),Eg=e(58689),Yd=e(29342),yg=e(27583),Dg=e(34153),bg=e(13852),dl=e(5614),Pg=e(34715),Cg=e(25853),ul=e(98020),yc=e(90088),Ci=e(79764),Tg=e(5422),Sg=e(61987),Mg=e(88225),xg=e(13896),Og=e(68018),Ig=e(63023),Jd=e(32437),Xd=e(99996),Ag=e(99641),Rg=e(70649),Lg=e(98828),Zd=e(79151),Bg=e(53663),si=e(27193),qd=e(53123),Ug=e(4458),Gl=e(28643),Ng=e(33311),wg=e(90841),Fg=e(49018),oh=e(63738),Dc=e(63263),Wg=e(29340),Io=e(45937),ml=e(29339),eu=e(6820),Kg=e(77444),$g=e(3327),bc=e(70794),ri=e(11273),tu=e(80641),Vg=e(28867),_g=e(11220),zg=e(23544),Pc=e(48339),nu=e(4240),kg=e(95224),Hg=e(82382),jg=e(87048),vo=e(53007),ih=e(12179),au=e(17226),Gg=e(42982),Qg=e(42806),Kr=e(50459),Wo=e(84879),su=e(52664),Yg=e(26868),Ql=e(72805),Jg=e(73575),Xg=e(56811),Zg=e(53896),qg=e(97918),ep=e(81422),tp=e(29130),np=e(45376),ap=e(73642),sp=e(83267),ru=e(80021),rp=e(41684),op=e(72215),ip=e(81656),lp=e(29424),cp=e(7682),fl=e(51764),Cc=e(76151),ou=e(30781),dp=e(65972),up=e(90756),mp=e(24289),fp=e(84472),jo=e(71533),gp=e(45298),pp=e(96906),hp=e(95311),Tc=e(82349),vp=e(43482),Ep=e(49935),Q=e(48761),ce=e(97231),he=e(13835),Ae=e(91381),Ke=e(52859),Qe=e(25928),tt=e(36714),gt=e(30815),yt=e(3465),bt=e(39012),It=e(94675),Rt=e(40051),Nt=e(4543),St=e(89579),Jt=e(82524),tn=e(31115),Yt=e(99003),Zt=e(95684),sn=e(1624),Tn=e(93644),cn=e(96619),ta=e(61748),Kn=e(57169),Qn=e(11769),va=e(26551),ca=e(40295),ma=e(38514),On=e(81312),$n=e(64298),Nn=e(70866),xa=e(30587),Wa=e(44850),ka=e(54556),ra=e(81615),da=e(82798),$a=e(8687),qa=e(77270),as=e(10742),fa=e(41404),Oa=e(72579),qn=e(39973),Sn=e(56963),oa=e(8807),Ea=e(24109),Pa=e(46255),Sa=e(68636),za=e(74305);let gs=!1;function Ht(W,_){Qf.cacheStore[_]={content:W,status:"loaded"}}function Ls(){let W="public/img/icons/";const _=typeof window<"u"&&window.__grafana_public_path__;return _&&(W=_+"img/icons/"),Z=>W+Z}function ea(){if(gs)return;gs=!0;const W=Ls();Ht(Ec,W("unicons/at.svg")),Ht(jl,W("unicons/adjust-circle.svg")),Ht(Yf,W("unicons/align-left.svg")),Ht(Jf,W("unicons/align-right.svg")),Ht(Xf,W("unicons/angle-double-down.svg")),Ht(Zf,W("unicons/angle-double-right.svg")),Ht(qf,W("unicons/angle-down.svg")),Ht(eg,W("unicons/angle-left.svg")),Ht(tg,W("unicons/angle-right.svg")),Ht(ng,W("unicons/angle-up.svg")),Ht(ag,W("unicons/apps.svg")),Ht(Gd,W("unicons/arrow.svg")),Ht(sg,W("unicons/arrow-down.svg")),Ht(rg,W("unicons/arrow-from-right.svg")),Ht(og,W("unicons/arrow-left.svg")),Ht(ig,W("unicons/arrow-random.svg")),Ht(lg,W("unicons/arrow-right.svg")),Ht(cg,W("unicons/arrow-to-right.svg")),Ht(dg,W("unicons/arrow-up.svg")),Ht(ug,W("unicons/arrows-h.svg")),Ht(mg,W("unicons/backward.svg")),Ht(fg,W("unicons/bars.svg")),Ht(Qd,W("unicons/bell.svg")),Ht(Xp,W("unicons/bell-slash.svg")),Ht(Zp,W("unicons/bolt.svg")),Ht(qp,W("unicons/book.svg")),Ht(eh,W("unicons/book-open.svg")),Ht(th,W("unicons/brackets-curly.svg")),Ht(nh,W("unicons/bug.svg")),Ht(ah,W("unicons/building.svg")),Ht(sh,W("unicons/calculator-alt.svg")),Ht(rh,W("unicons/calendar-alt.svg")),Ht(gg,W("unicons/calendar-slash.svg")),Ht(pg,W("unicons/camera.svg")),Ht(hg,W("unicons/channel-add.svg")),Ht(vg,W("unicons/chart-line.svg")),Ht(Eg,W("unicons/check.svg")),Ht(Yd,W("unicons/check-circle.svg")),Ht(yg,W("unicons/circle.svg")),Ht(Dg,W("unicons/clipboard-alt.svg")),Ht(bg,W("unicons/clock-nine.svg")),Ht(dl,W("unicons/cloud.svg")),Ht(Pg,W("unicons/cloud-download.svg")),Ht(Cg,W("unicons/code-branch.svg")),Ht(ul,W("unicons/cog.svg")),Ht(yc,W("unicons/columns.svg")),Ht(Ci,W("unicons/comment-alt.svg")),Ht(Tg,W("unicons/comment-alt-share.svg")),Ht(Sg,W("unicons/comments-alt.svg")),Ht(Mg,W("unicons/compass.svg")),Ht(xg,W("unicons/copy.svg")),Ht(Og,W("unicons/corner-down-right-alt.svg")),Ht(Ig,W("unicons/cube.svg")),Ht(Jd,W("unicons/dashboard.svg")),Ht(Xd,W("unicons/database.svg")),Ht(Ag,W("unicons/document-info.svg")),Ht(Rg,W("unicons/download-alt.svg")),Ht(Lg,W("unicons/draggabledots.svg")),Ht(Zd,W("unicons/edit.svg")),Ht(Bg,W("unicons/ellipsis-v.svg")),Ht(si,W("unicons/ellipsis-h.svg")),Ht(qd,W("unicons/envelope.svg")),Ht(Ug,W("unicons/exchange-alt.svg")),Ht(Gl,W("unicons/exclamation-circle.svg")),Ht(Ng,W("unicons/exclamation-triangle.svg")),Ht(wg,W("unicons/external-link-alt.svg")),Ht(Fg,W("unicons/eye.svg")),Ht(oh,W("unicons/eye-slash.svg")),Ht(Dc,W("unicons/file-alt.svg")),Ht(Wg,W("unicons/file-blank.svg")),Ht(Io,W("unicons/filter.svg")),Ht(ml,W("unicons/folder.svg")),Ht(eu,W("unicons/folder-open.svg")),Ht(Kg,W("unicons/folder-plus.svg")),Ht($g,W("unicons/folder-upload.svg")),Ht(bc,W("unicons/forward.svg")),Ht(ri,W("unicons/graph-bar.svg")),Ht(tu,W("unicons/history.svg")),Ht(Vg,W("unicons/history-alt.svg")),Ht(_g,W("unicons/home-alt.svg")),Ht(zg,W("unicons/import.svg")),Ht(Pc,W("unicons/info.svg")),Ht(nu,W("unicons/info-circle.svg")),Ht(kg,W("unicons/k6.svg")),Ht(Hg,W("unicons/key-skeleton-alt.svg")),Ht(jg,W("unicons/keyboard.svg")),Ht(vo,W("unicons/link.svg")),Ht(ih,W("unicons/list-ul.svg")),Ht(au,W("unicons/lock.svg")),Ht(Gg,W("unicons/minus.svg")),Ht(Qg,W("unicons/minus-circle.svg")),Ht(Kr,W("unicons/mobile-android.svg")),Ht(Wo,W("unicons/monitor.svg")),Ht(su,W("unicons/pause.svg")),Ht(Yg,W("unicons/pen.svg")),Ht(Ql,W("unicons/play.svg")),Ht(Jg,W("unicons/plug.svg")),Ht(Xg,W("unicons/plus.svg")),Ht(Zg,W("unicons/plus-circle.svg")),Ht(qg,W("unicons/power.svg")),Ht(ep,W("unicons/presentation-play.svg")),Ht(tp,W("unicons/process.svg")),Ht(np,W("unicons/question-circle.svg")),Ht(ap,W("unicons/repeat.svg")),Ht(sp,W("unicons/rocket.svg")),Ht(ru,W("unicons/rss.svg")),Ht(rp,W("unicons/save.svg")),Ht(op,W("unicons/search.svg")),Ht(ip,W("unicons/search-minus.svg")),Ht(lp,W("unicons/search-plus.svg")),Ht(cp,W("unicons/share-alt.svg")),Ht(fl,W("unicons/shield.svg")),Ht(Cc,W("unicons/signal.svg")),Ht(ou,W("unicons/signin.svg")),Ht(dp,W("unicons/signout.svg")),Ht(up,W("unicons/sitemap.svg")),Ht(mp,W("unicons/slack.svg")),Ht(fp,W("unicons/sliders-v-alt.svg")),Ht(jo,W("unicons/sort-amount-down.svg")),Ht(gp,W("unicons/sort-amount-up.svg")),Ht(pp,W("unicons/square-shape.svg")),Ht(hp,W("unicons/star.svg")),Ht(Tc,W("unicons/step-backward.svg")),Ht(vp,W("unicons/sync.svg")),Ht(Ep,W("unicons/stopwatch.svg")),Ht(Q,W("unicons/table.svg")),Ht(ce,W("unicons/tag-alt.svg")),Ht(he,W("unicons/times.svg")),Ht(Ae,W("unicons/trash-alt.svg")),Ht(Ke,W("unicons/unlock.svg")),Ht(Qe,W("unicons/upload.svg")),Ht(tt,W("unicons/user.svg")),Ht(gt,W("unicons/users-alt.svg")),Ht(yt,W("unicons/wrap-text.svg")),Ht(bt,W("unicons/cloud-upload.svg")),Ht(It,W("unicons/credit-card.svg")),Ht(Rt,W("unicons/file-copy-alt.svg")),Ht(Nt,W("unicons/fire.svg")),Ht(St,W("unicons/hourglass.svg")),Ht(Jt,W("unicons/layer-group.svg")),Ht(tn,W("unicons/layers-alt.svg")),Ht(Yt,W("unicons/line-alt.svg")),Ht(Zt,W("unicons/list-ui-alt.svg")),Ht(sn,W("unicons/message.svg")),Ht(Tn,W("unicons/palette.svg")),Ht(cn,W("unicons/percentage.svg")),Ht(ta,W("unicons/shield-exclamation.svg")),Ht(Kn,W("unicons/plus-square.svg")),Ht(Qn,W("unicons/x.svg")),Ht(va,W("unicons/capture.svg")),Ht(ca,W("custom/gf-grid.svg")),Ht(ma,W("custom/gf-landscape.svg")),Ht(On,W("custom/gf-layout-simple.svg")),Ht($n,W("custom/gf-portrait.svg")),Ht(Nn,W("custom/gf-show-context.svg")),Ht(xa,W("custom/gf-bar-alignment-after.svg")),Ht(Wa,W("custom/gf-bar-alignment-before.svg")),Ht(ka,W("custom/gf-bar-alignment-center.svg")),Ht(ra,W("custom/gf-interpolation-linear.svg")),Ht(da,W("custom/gf-interpolation-smooth.svg")),Ht($a,W("custom/gf-interpolation-step-after.svg")),Ht(qa,W("custom/gf-interpolation-step-before.svg")),Ht(as,W("custom/gf-logs.svg")),Ht(fa,W("custom/gf-movepane-left.svg")),Ht(Oa,W("custom/gf-movepane-right.svg")),Ht(qn,W("mono/favorite.svg")),Ht(Sn,W("mono/grafana.svg")),Ht(oa,W("mono/heart.svg")),Ht(Ea,W("mono/heart-break.svg")),Ht(Pa,W("mono/panel-add.svg")),Ht(Sa,W("mono/library-panel.svg")),Ht(za,W("unicons/record-audio.svg"))}function sa(){self.MonacoEnvironment={getWorker(W,_){const Z=D.l.getIfExists(_);return Z?Z.init():_==="json"?new Wr.c(new URL(e.p+e.u(1162),e.b)):_==="css"||_==="scss"||_==="less"?new Wr.c(new URL(e.p+e.u(9044),e.b)):_==="html"||_==="handlebars"||_==="razor"?new Wr.c(new URL(e.p+e.u(4064),e.b)):_==="typescript"||_==="javascript"?new Wr.c(new URL(e.p+e.u(2150),e.b)):new Wr.c(new URL(e.p+e.u(1821),e.b))}}}var ua=e(76885);function Na(W){const _=W.target instanceof Element&&Ka(W.target);if(!(W.ctrlKey||W.metaKey||W.defaultPrevented)&&_){let Z=_.getAttribute("href");const de=_.getAttribute("target");if(Z&&!de){const Pe=ua.kM.parseKeyValue(Z.split("?")[1]),Ie=Pe.orgId&&Number(Pe.orgId)!==z.config.bootData.user.orgId;if((0,S.Lc)("utils",!1,"intercepting link click",W),W.preventDefault(),Z=T.I.stripBaseFromUrl(Z),Z[0]!=="/"||Ie)if(Z.indexOf("://")>0||Z.indexOf("mailto:")===0||Ie){window.location.href=Z;return}else if(Z.indexOf("#")===0){window.location.hash=Z;return}else Z=`/${Z}`;S.Ny.push(Z)}}}function Ka(W){for(;W!==null&&W.tagName;){if(W.tagName.toUpperCase()==="A")return W;W=W.parentElement}return null}class ss{constructor(_){this.hasUpdates=!1,this.checked=Date.now(),this.prevLocationPath="",this.interval=_??1e3*60*5}start(){const _=(0,jd.oF)();_&&_.getConnectionState().subscribe(Z=>{Z&&this._checkForUpdates()}),S.Ny.getHistory().listen(this.locationUpdated.bind(this)),this.prevLocationPath=S.Ny.getLocation().pathname}locationUpdated(_){if(this.prevLocationPath===_.pathname)return;const Z=_.pathname.split("/");Z[1]==="/"&&this.prevLocationPath!=="/"?this.reloadIfUpdateDetected():Z[1]==="d"?this.reloadIfUpdateDetected():this.hasUpdates&&(0,hr.rR)("new_frontend_assets_reload_ignored",{newLocation:_.pathname,prevLocation:this.prevLocationPath}),this.prevLocationPath=_.pathname}async _checkForUpdates(){if(this.hasUpdates||Date.now()-this.checked<this.interval)return;this.checked=Date.now();const _=this.previous,Z=await(0,M.AI)().get("/api/frontend/assets");_&&!(0,h.isEqual)(_,Z)&&(this.hasUpdates=!0,(0,hr.rR)("new_frontend_assets_detected",{assets:_.assets!==Z.assets,plugins:_.plugins!==Z.plugins,version:_.version!==Z.version,flags:_.flags!==Z.flags})),this.previous=Z}reloadIfUpdateDetected(){this.hasUpdates&&((0,hr.rR)("new_frontend_assets_reload",{}),window.location.reload()),this._checkForUpdates()}}var Ya=e(27677),Vs=e(91040),Qr=e(40621);function Go(W,_=!1){return new Promise(Z=>{const de=document.createElement("script");de.onload=Z,de.src=W,de.async=_,document.head.appendChild(de)})}const oo=(0,Vs.h)("EchoSrv"),oi=oo.logger;(0,Qr.h)("echo",void 0,oo);class gl{constructor(_){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const Z of this.backends)Z.flush()},this.addBackend=Z=>{oi("Adding backend",!1,Z),this.backends.push(Z)},this.addEvent=(Z,de)=>{const Pe=this.getMeta(),Ie={...Z,meta:{...Pe,...de}};for(const Ve of this.backends)(Ve.supportedEvents.length===0||Ve.supportedEvents.indexOf(Ie.type)>-1)&&Ve.addEvent(Ie);oi(`${Z.type} event`,!1,{...Z.payload,meta:Ie.meta})},this.getMeta=()=>({sessionId:"",userId:Us.TP.user.id,userLogin:Us.TP.user.login,userSignedIn:Us.TP.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,..._},setInterval(this.flush,this.config.flushInterval)}}var Yl=e(42614);class Ao{constructor(_){this.options=_,this.buffer=[],this.supportedEvents=[K.on.Performance],this.addEvent=Z=>{this.buffer.push(Z.payload)},this.flush=()=>{this.buffer.length!==0&&(Ya.IB.post("/api/frontend-metrics",{events:this.buffer},{showErrorAlert:!1}).catch(()=>{}),this.buffer=[])}}}var Ro=e(61298);class _i{constructor(_){this.options=_,this.supportedEvents=[K.on.Pageview,K.on.Interaction],this.addEvent=Pe=>{window.applicationInsights&&((0,Ro.nB)(Pe)&&window.applicationInsights.trackPageView?.(),(0,Ro.fX)(Pe)&&window.applicationInsights.trackEvent?.({name:Pe.payload.interactionName,properties:Pe.payload.properties}))},this.flush=()=>{};const Z={config:{connectionString:_.connectionString,endpointUrl:_.endpointUrl}};System.import("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(Pe=>Pe.default?Pe.default:Pe).then(({ApplicationInsights:Pe})=>{const Ie=new Pe(Z);window.applicationInsights=Ie.loadAppInsights()})}}class Rr{constructor(_){this.options=_,this.supportedEvents=[K.on.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=Pe=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:Pe.payload.page})},this.flush=()=>{};const Z=`https://www.googletagmanager.com/gtag/js?id=${_.googleAnalyticsId}`;Go(Z,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const de={page_path:window.location.pathname};_.user&&(de.user_id=_.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=_.googleAnalytics4SendManualPageViews,window.gtag("config",_.googleAnalyticsId,de)}}class pl{constructor(_){this.options=_,this.supportedEvents=[K.on.Pageview],this.trackedUserId=null,this.addEvent=Pe=>{if(!window.ga)return;window.ga("set",{page:Pe.payload.page}),window.ga("send","pageview");const{userSignedIn:Ie,userId:Ve}=Pe.meta;Ie&&Ve!==this.trackedUserId&&(this.trackedUserId=Ve,window.ga("set","userId",Ve))},this.flush=()=>{};const Z=`https://www.google-analytics.com/analytics${_.debug?"_debug":""}.js`;Go(Z);const de=window.ga=window.ga||function(){(de.q=de.q||[]).push(arguments)};de.l=+new Date,de("create",_.googleAnalyticsId,"auto"),de("set","anonymizeIp",!0)}}class Sc{constructor(_){this.options=_,this.supportedEvents=[K.on.Pageview,K.on.Interaction,K.on.ExperimentView],this.addEvent=Ie=>{window.rudderanalytics&&((0,Ro.nB)(Ie)&&window.rudderanalytics.page?.(),(0,Ro.fX)(Ie)&&window.rudderanalytics.track?.(Ie.payload.interactionName,Ie.payload.properties),(0,Ro.p6)(Ie)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:Ie.payload.experimentId,experiment_group:Ie.payload.experimentGroup,experiment_variant:Ie.payload.experimentVariant}))},this.flush=()=>{};const Z=_.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";Go(Z);const de=window.rudderanalytics=[],Pe=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let Ie=0;Ie<Pe.length;Ie++){const Ve=Pe[Ie];de[Ve]=function(Je){return function(){de.push([Je].concat(Array.prototype.slice.call(arguments)))}}(Ve)}if(window.rudderanalytics?.load?.(_.writeKey,_.dataPlaneUrl,{configUrl:_.configUrl,destSDKBaseURL:_.integrationsUrl}),_.user){const{identifier:Ie,intercomIdentifier:Ve}=_.user.analytics,Je={};Ve&&(Je.Intercom={user_hash:Ve}),window.rudderanalytics?.identify?.(Ie,{email:_.user.email,orgId:_.user.orgId,language:_.user.language,version:_.buildInfo.version,edition:_.buildInfo.edition},Je)}}}var Xh=e(59143),Zh=e(97644),qh=e(74940),ev=e(36043),tv=e(8593),nv=e(25999),av=e(69008),sv=e(61002);class rv extends sv.j{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=G.$.buildInfo.version}send(_){(0,K.x$)().addEvent({type:K.on.GrafanaJavascriptAgent,payload:_})}isBatched(){return!0}getIgnoreUrls(){return[]}}class ov{constructor(_){this.options=_,this.supportedEvents=[K.on.GrafanaJavascriptAgent],this.addEvent=Ie=>{},this.flush=()=>{};const Z=[],de=[new rv];_.customEndpoint&&de.push(new Zh.m({url:_.customEndpoint,apiKey:_.apiKey})),_.errorInstrumentalizationEnabled&&Z.push(new qh.W),_.consoleInstrumentalizationEnabled&&Z.push(new ev._),_.webVitalsInstrumentalizationEnabled&&Z.push(new tv.I),Z.push(new nv.D);const Pe={globalObjectKey:_.globalObjectKey||"faro",preventGlobalExposure:_.preventGlobalExposure||!1,app:{version:_.buildInfo.version,environment:_.buildInfo.env},instrumentations:Z,transports:de,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],sessionTracking:{persistent:!0},batching:{sendTimeout:1e3},internalLoggerLevel:_.internalLoggerLevel||Xh.vI};this.faroInstance=(0,av.p)(Pe),_.user&&this.faroInstance.api.setUser({id:_.user.id,attributes:{orgId:String(_.user.orgId)||""}})}}var iv=e(6411),iu=e.n(iv),SD=e(45731),MD=e(9610),lv=e(87490),cv=e(70497),dv=e(1702);function uv(W){return()=>{const _=document.querySelectorAll(":hover");for(let Z=_.length-1;Z>0;Z--){const de=_[Z];de instanceof HTMLElement&&de.dataset?.panelid&&W(parseInt(de.dataset?.panelid,10))}}}class mv{constructor(_,Z){this.locationService=_,this.chromeService=Z}clearAndInitGlobalBindings(_){iu().reset(),_.chromeless||(this.bind(["?","mod+h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,Nl.O)(!1)),this.bind("c r",()=>(0,Nl.O)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const Z=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(Z&&Z instanceof HTMLElement&&(Z.nodeName==="INPUT"||Z.nodeName==="TEXTAREA"||Z.hasAttribute("data-slate-editor"))){Z.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}showHelpModal(){lr.A.publish(new Ar.S8({component:vd.N}))}exit(){const _=this.locationService.getSearchObject();if(_.editview){this.locationService.partial({editview:null,editIndex:null});return}if(_.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(_.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(_.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:Z}=this.chromeService.state.getValue();Z&&this.chromeService.exitKioskMode(),_.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(_,Z){iu().bind(_,de=>{de.preventDefault(),de.stopPropagation(),de.returnValue=!1,Z.call(this)},"keydown")}bindGlobal(_,Z){iu().bindGlobal(_,de=>{de.preventDefault(),de.stopPropagation(),de.returnValue=!1,Z.call(this)},"keydown")}unbind(_,Z){iu().unbind(_,Z)}bindWithPanelId(_,Z){this.bind(_,uv(Z))}setupTimeRangeBindings(_=!0){this.bind("t a",()=>{lr.A.publish(new Ar.Rh({updateUrl:_}))}),this.bind("t z",()=>{lr.A.publish(new Ar.U0({scale:2,updateUrl:_}))}),this.bind("ctrl+z",()=>{lr.A.publish(new Ar.U0({scale:2,updateUrl:_}))}),this.bind("t left",()=>{lr.A.publish(new Ar.Io({direction:Ar.xL.Left,updateUrl:_}))}),this.bind("t right",()=>{lr.A.publish(new Ar.Io({direction:Ar.xL.Right,updateUrl:_}))}),this.bind("t c",()=>{lr.A.publish(new Ar.Bt)}),this.bind("t v",()=>{lr.A.publish(new Ar.VZ({updateUrl:_}))})}setupDashboardBindings(_){this.bind("mod+o",()=>{_.graphTooltip=(_.graphTooltip+1)%3,_.events.publish(new ei.Tq),_.startRefresh()}),this.bind("mod+s",()=>{_.meta.canSave&&lr.A.publish(new Ar.S8({component:cv.$,props:{dashboard:_}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",Z=>{if(_.canEditPanelById(Z)){const de=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:de?null:Z})}}),this.bindWithPanelId("v",Z=>{const de=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:de?null:Z})}),this.bindWithPanelId("p l",Z=>{const de=_.getPanelById(Z),Pe={...de.options};Pe.legend.showLegend?Pe.legend.showLegend=!1:Pe.legend.showLegend=!0,de.updateOptions(Pe)}),this.bindWithPanelId("i",Z=>{this.locationService.partial({inspect:Z})}),vs.TP.hasAccessToExplore()&&this.bindWithPanelId("p x",async Z=>{const de=_.getPanelById(Z),Pe=await(0,lv.Xe)({queries:de.targets,dsRef:de.datasource,scopedVars:de.scopedVars,timeRange:(0,ti.jG)().timeRange()});if(Pe){const Ie=T.I.stripBaseFromUrl(Pe);Ie&&this.locationService.push(Ie)}}),this.bindWithPanelId("p r",Z=>{_.canEditPanelById(Z)&&!(_.panelInView||_.panelInEdit)&&lr.A.publish(new Ar.Vz(Z))}),this.bindWithPanelId("p d",Z=>{if(_.canEditPanelById(Z)){const de=_.getPanelInfoById(Z).index;_.duplicatePanel(_.panels[de])}}),this.bindWithPanelId("p s",Z=>{const de=_.getPanelInfoById(Z);lr.A.publish(new Ar.S8({component:dv.ShareModal,props:{dashboard:_,panel:de?.panel}}))}),this.bind("d l",()=>{_.toggleLegendsForAll()}),this.bind("d x",()=>{_.toggleExemplarsForAll()}),this.bind("d shift+c",()=>{_.collapseRows()}),this.bind("d shift+e",()=>{_.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{_.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const de=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+de})}}var Jl=e(78160);async function xD(){if(window.location.search.indexOf("why-render")!==-1){const{default:W}=await e.e(3718).then(e.t.bind(e,13718,23));W(React,{trackAllPureComponents:!0})}}var fv=e(20120),gv=e(57220);const pv=a.lazy(()=>e.e(192).then(e.bind(e,57029)));function hv(){const W=(0,er.Wd)(gv.hY);Us.TP.hasPermission(W.read)&&(0,fv.fP)({show:()=>G.$.unifiedAlertingEnabled,component:({dashboard:_})=>a.createElement(a.Suspense,{fallback:null,key:"alert-rules-button"},_&&a.createElement(pv,{dashboardUid:_.uid})),index:-2})}var vv=e(73399);function Ev(W){return a.createElement(yv,{...W})}const yv=a.lazy(async()=>{const{EmbeddedDashboard:W}=await e.e(2859).then(e.bind(e,13251));return{default:W}});var Dv=e(61582),bv=e(67027),Pv=e(97527),OD=e(99355),Mc=e(14590),Cv=e(19895),Tv=e(44838);const Sv=()=>new Wr.c(new URL(e.p+e.u(5358),e.b));var Mv=e(88483),lh=e(63720);const xv=W=>new Mv.c(_=>{const Z=W.subscribe(Mc.BX(de=>{_.next(de)}),Mc.BX(de=>{_.error(de)}),Mc.BX(()=>{_.complete()}));return{unsubscribe:()=>{Z.then(de=>de.unsubscribe())}}}),yp=W=>(0,_s.H)(W).pipe((0,lh.n)(_=>xv(_)));class Ov{constructor(_){this.getConnectionState=()=>yp(this.centrifugeWorker.getConnectionState()),this.getDataStream=Z=>yp(this.centrifugeWorker.getDataStream(Z)).pipe((0,Cv.Q)(Tv.E)),this.getQueryData=async Z=>{const de=JSON.parse(JSON.stringify(Z));return this.centrifugeWorker.getQueryData(de)},this.getPresence=Z=>this.centrifugeWorker.getPresence(Z),this.getStream=Z=>yp(this.centrifugeWorker.getStream(Z)),this.centrifugeWorker=Mc.LV(Sv()),this.centrifugeWorker.initialize(_,Mc.BX(_.dataStreamSubscriberReadiness))}}var ch=e(9631),Iv=e(55004),Av=e(47773),dh=e(26657),lu=e(47118);class Rv{constructor(_){this.deps=_,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=Z=>{let de;const Pe=Ie=>{const Ve=Ie.data[0];if(!de&&!(0,lu.ot)(Ve,lu._w.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${Ve?.type}`);return}switch(Ve.type){case lu._w.FullFrame:{de=ch.k9.deserialize(Ve.frame);return}case lu._w.NewValuesSameSchema:{de.pushNewValues(Ve.values);return}}};return this.deps.centrifugeSrv.getDataStream(Z).pipe((0,zt.T)(Ie=>(Pe(Ie),{...Ie,data:[de??ch.k9.empty()]})))},this.getStream=Z=>this.deps.centrifugeSrv.getStream(Z),this.getQueryData=Z=>(0,_s.H)(this.deps.centrifugeSrv.getQueryData(Z)).pipe((0,lh.n)(de=>{const Pe=(0,Av.bE)(de,Z.request.targets);return Pe.data?.length&&Pe.data.find(Ve=>Ve.meta?.channel)?(0,dh.x7)(Pe,Z.request,dh.ph):(0,Kt.of)(Pe)})),this.publish=async(Z,de)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,Iv.Qp)(Z),data:de}),this.getPresence=Z=>this.deps.centrifugeSrv.getPresence(Z)}}function Lv(){const W={appUrl:`${window.location.origin}${G.$.appSubUrl}`,orgId:Us.TP.user.orgId,orgRole:Us.TP.user.orgRole,liveEnabled:G.$.liveEnabled,dataStreamSubscriberReadiness:Dv.a.ok.asObservable(),grafanaAuthToken:(0,bv.r)()},_=G.$.featureToggles["live-service-web-worker"]?new Ov(W):new Pv.w(W);(0,jd.S8)(new Rv({centrifugeSrv:_,backendSrv:(0,M.AI)()}))}function ID(){return getGrafanaLiveSrv()}var Bv=e(17888),Uv=e(20726),cr=e(75462);function AD(W,_="extension is not a link extension"){if(!isPluginExtensionLink(W))throw new Error(_)}function RD(W,_="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(W))throw new Error(_)}function uh(W,_){if(!Wv(W,_))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${W}/" (currently: "${_}"). Skipping the extension.`)}function mh(W){if(!zv(W))throw new Error('Invalid component extension, the "component" property needs to be a valid React component.')}function Nv(W){if(!Kv(W))throw new Error(`Invalid extension "${W.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${W.extensionPointId}"). Skipping the extension.`)}function wv(W){if(!$v(W))throw new Error(`Invalid extension "${W.title}". The "configure" property must be a function. Skipping the extension.`)}function fh(W,_){for(const Z of _)if(!Vv(W[Z]))throw new Error(`Invalid extension "${W.title}". Property "${Z}" must be a string and cannot be empty. Skipping the extension.`)}function Fv(W,_="The provided value is a Promise."){if(gh(W))throw new Error(_)}function Wv(W,_){return!!(typeof _=="string"&&_.length>0&&_.startsWith(`/a/${W}/`))}function Kv(W){return!!(W.extensionPointId?.startsWith("grafana/")||W.extensionPointId?.startsWith("plugins/"))}function $v(W){return W.configure?typeof W.configure=="function":!0}function Vv(W){return typeof W=="string"&&W.length>0}function _v(W,_){try{if(fh(_,["title","description","extensionPointId"]),Nv(_),(0,cr.z1)(_)){if(wv(_),!_.path&&!_.onClick)return(0,cr.FF)(`Invalid extension "${_.title}". Either "path" or "onClick" is required.`),!1;_.path&&uh(W,_.path)}return(0,cr.yS)(_)&&mh(_.component),!0}catch(Z){return Z instanceof Error&&(0,cr.FF)(Z.message),!1}}function gh(W){return W instanceof Promise||typeof W=="object"&&W!==null&&"then"in W&&"catch"in W}function zv(W){const _=de=>typeof de=="object"&&de!==null&&"$$typeof"in de;return typeof W=="function"||(de=>_(de)&&de.$$typeof===Symbol.for("react.memo"))(W)}function kv(W){const _={};for(const{pluginId:Z,extensionConfigs:de,error:Pe}of W){if(Pe){(0,cr.FF)(`"${Z}" plugin failed to load, skip registering its extensions.`);continue}for(const Ie of de){const{extensionPointId:Ve}=Ie;if(!Ie||!_v(Z,Ie))continue;let Je={config:Ie,pluginId:Z};Array.isArray(_[Ve])?_[Ve].push(Je):_[Ve]=[Je]}}return(0,cr.ol)(_)}var ph=e(29436),Hv=e(23994),jv=e(11140),Gv=e(12881);function Qv(){try{return[(0,cr.io)({title:"Add to dashboard",description:"Use the query and panel from explore and create/add it to a dashboard",extensionPointId:il.S.ExploreToolbarAction,icon:"apps",category:"Dashboards",configure:()=>{if(vs.TP.hasPermission(Bn.AccessControlAction.DashboardsCreate)||vs.TP.hasPermission(Bn.AccessControlAction.DashboardsWrite))return{}},onClick:(W,{context:_,openModal:Z})=>{Z({title:(0,Gv.t)(),body:({onDismiss:de})=>a.createElement(jv.v,{onClose:de,exploreId:_?.exploreId})})}}),(0,cr.io)({title:"Add correlation",description:"Create a correlation from this query",extensionPointId:il.S.ExploreToolbarAction,icon:"link",configure:W=>W?.shouldShowAddCorrelation?{}:void 0,onClick:(W,{context:_})=>{(0,Ms.JD)((0,ph.am)({editorMode:!0})),(0,Ms.JD)((0,Hv.Od)({exploreId:_.exploreId}))}})]}catch(W){return(0,cr.FF)(`Could not configure extensions for Explore due to: "${W}"`),[]}}function Yv(){return[...Qv()]}const Jv=({context:W,extensionPointId:_,limitPerPlugin:Z,registry:de})=>{const Pe=W?(0,cr.$Y)(W):{},Ie=de[_]??[],Ve=[],Je={};for(const qe of Ie)try{const dt=qe.config,{pluginId:Dt}=qe;if(Z&&Je[Dt]>=Z)continue;if(Je[Dt]===void 0&&(Je[Dt]=0),(0,cr.z1)(dt)){const Pt=Xv(Dt,dt,Pe);if(dt.configure&&Pt===void 0)continue;const $t=Pt?.path||dt.path,Lt={id:(0,cr.yt)(Dt,dt),type:il.u.link,pluginId:Dt,onClick:Zv(Dt,dt,Pe),icon:Pt?.icon||dt.icon,title:Pt?.title||dt.title,description:Pt?.description||dt.description,path:(0,h.isString)($t)?qv(Dt,$t,dt):void 0,category:Pt?.category||dt.category};Ve.push(Lt),Je[Dt]+=1}if((0,cr.yS)(dt)){mh(dt.component);const Pt={id:(0,cr.yt)(qe.pluginId,dt),type:il.u.component,pluginId:qe.pluginId,title:dt.title,description:dt.description,component:(0,cr.nv)(Dt,dt.component)};Ve.push(Pt),Je[Dt]+=1}}catch(dt){dt instanceof Error&&(0,cr.FF)(dt.message)}return{extensions:Ve}};function Xv(W,_,Z){try{const de=_.configure?.(Z);if(de===void 0)return;let{title:Pe=_.title,description:Ie=_.description,path:Ve=_.path,icon:Je=_.icon,category:qe=_.category,...dt}=de;return Fv(de,`The configure() function for "${_.title}" returned a promise, skipping updates.`),Ve&&uh(W,Ve),fh({title:Pe,description:Ie},["title","description"]),Object.keys(dt).length>0&&(0,cr.FF)(`Extension "${_.title}", is trying to override restricted properties: ${Object.keys(dt).join(", ")} which will be ignored.`),{title:Pe,description:Ie,path:Ve,icon:Je,category:qe}}catch(de){de instanceof Error&&(0,cr.FF)(de.message);return}}function Zv(W,_,Z){const{onClick:de}=_;if(de)return function(Ie){try{(0,hr.rR)("ui_extension_link_clicked",{pluginId:W,extensionPointId:_.extensionPointId,title:_.title,category:_.category});const Ve=de(Ie,(0,cr.yb)(W,Z));gh(Ve)&&Ve.catch(Je=>{Je instanceof Error&&(0,cr.FF)(Je.message)})}catch(Ve){Ve instanceof Error&&(0,cr.FF)(Ve.message)}}}function qv(W,_,Z){return ua.kM.appendQueryToUrl(_,ua.kM.toUrlParams({uel_pid:W,uel_epid:Z.extensionPointId}))}var hh=e(15162);async function e0(W={}){(0,Jl.j)("frontend_plugins_preload");const _=Object.values(W).filter(de=>de.preload),Z=await Promise.all(_.map(t0));return(0,Jl.z)("frontend_plugins_preload"),Z}async function t0(W){const{path:_,version:Z,id:de}=W;try{(0,Jl.j)(`frontend_plugin_preload_${de}`);const{plugin:Pe}=await rd.j4({path:_,version:Z,isAngular:W.angular.detected,pluginId:de}),{extensionConfigs:Ie=[]}=Pe;return(0,sd.x)(de),{pluginId:de,extensionConfigs:Ie}}catch(Pe){return console.error(`[Plugins] Failed to preload plugin: ${_} (version: ${Z})`,Pe),{pluginId:de,extensionConfigs:[],error:Pe}}finally{(0,Jl.z)(`frontend_plugin_preload_${de}`)}}var n0=e(39741),a0=e(57532),vh=e(41987),Eh=e(65879),s0=e(80924),r0=e(72955),Dp=e(39374);class o0{constructor(){this.subject=new n0.m(1)}get(){return this.subject.asObservable()}run(_){const{queries:Z,timezone:de,datasource:Pe,panelId:Ie,app:Ve,dashboardUID:Je,timeRange:qe,timeInfo:dt,cacheTimeout:Dt,queryCachingTTL:Pt,maxDataPoints:$t,scopedVars:Lt,minInterval:Ot}=_;this.subscription&&this.subscription.unsubscribe();const Ft={app:Ve??vh.Jk.Unknown,requestId:(0,s0.S)(),timezone:de,panelId:Ie,dashboardUID:Je,range:qe,timeInfo:dt,interval:"",intervalMs:0,targets:(0,h.cloneDeep)(Z),maxDataPoints:$t,scopedVars:Lt||{},cacheTimeout:Dt,queryCachingTTL:Pt,startTime:Date.now()};Ft.rangeRaw=qe.raw,(0,_s.H)(i0(Pe,Ft.scopedVars)).pipe((0,a0.$)()).subscribe({next:bn=>{Ft.targets=Ft.targets.map(La=>(La.datasource||(La.datasource=bn.getRef()),La));const Ta=Ot?(0,ve.w)().replace(Ot,Ft.scopedVars):bn.interval,wa=Eh.calculateInterval(qe,$t,Ta);Ft.scopedVars=Object.assign({},Ft.scopedVars,{__interval:{text:wa.interval,value:wa.interval},__interval_ms:{text:wa.intervalMs.toString(),value:wa.intervalMs}}),Ft.interval=wa.interval,Ft.intervalMs=wa.intervalMs,this.subscription=(0,Dp.BN)(bn,Ft).subscribe({next:La=>{const Aa=(0,sr.N$)(La,this.lastResult);this.lastResult=(0,r0.B)(Aa,this.lastResult),this.subject.next(this.lastResult)}})},error:bn=>console.error("PanelQueryRunner Error",bn)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===vr.Gu.Loading&&this.subject.next({...this.lastResult,state:vr.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function i0(W,_){return W&&"query"in W?W:(0,i.tR)().get(W,_)}function l0(){window.grafanaRuntime={getDashboardSaveModel:()=>{const W=(0,u.UA)().getCurrent();if(W)return W.getSaveModelCloneOld()},getDashboardTimeRange:()=>{const W=(0,ti.jG)().timeRange();return{from:W.from.valueOf(),to:W.to.valueOf(),raw:W.raw}},getPanelData:()=>{const W=(0,u.UA)().getCurrent();if(W)return W.panels.reduce((_,Z)=>(_[Z.id]=Z.getQueryRunner().getLastResult(),_),{})}}}var c0=e(16757),xc=e(20601),Ca=e(75096),yh=e(22391),d0=e(27803),Ti=e(3843);function Dh(W){return W.extended&&"infoText"in W.extended?W.extended:null}function bh(W){return W.extended&&"dataSourceTypes"in W.extended?W.extended:null}function bp(W){return W.extended&&"dataSource"in W.extended?W.extended:null}var Ds=e(87421),Oc=e(26260);const u0=(W,_)=>{const{rootStateKey:Z}=_.variable;if(!Z)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:Dh(Ti.nS)};const{editor:de}=(0,Ds.nx)(Z,W);return{extended:Dh(de)}},m0={changeVariableDatasource:Oc.Iv},f0=(0,Zo.connect)(u0,m0);class g0 extends a.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=_=>{this.props.changeVariableDatasource((0,Ca.jX)(this.props.variable),(0,yh.p$)(_))}}componentDidMount(){const{rootStateKey:_}=this.props.variable;if(!_){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:_,extended:Z}=this.props;return a.createElement(d0.Q,{datasource:_.datasource??void 0,onDataSourceChange:this.onDatasourceChanged,infoText:Z?.infoText})}}const p0=f0(g0);var Ph=e(38401),Pp=e(83684);const Ch=90,Th=({datasource:W,onChange:_,disabled:Z,filterKey:de,allFilters:Pe})=>{const Ie=()=>Sh(W,de,Pe),Ve=()=>E0(W,de,Pe);return de===null?a.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},a.createElement(Pp.s,{disabled:Z,className:"query-segment-key",Component:v0,value:de,onChange:_,loadOptions:Ie,inputMinWidth:Ch})):a.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},a.createElement(Pp.s,{disabled:Z,className:"query-segment-key",value:de,onChange:_,loadOptions:Ve,inputMinWidth:Ch}))},cu="-- remove filter --",h0={label:cu,value:cu},v0=a.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},a.createElement(us.I,{name:"plus"})),Sh=async(W,_,Z)=>{const de=await(0,i.tR)().get(W);if(!de||!de.getTagKeys)return[];const Pe=Z.filter(Ve=>Ve.key!==_);return(await de.getTagKeys({filters:Pe})).map(Ve=>({label:Ve.text,value:Ve.text}))},E0=async(W,_,Z)=>{const de=await Sh(W,_,Z);return[h0,...de]},y0=({datasource:W,disabled:_,onChange:Z,filterKey:de,filterValue:Pe,placeHolder:Ie,allFilters:Ve})=>{const Je=(0,Tt.of)(b0),qe=()=>D0(W,de,Ve);return a.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},a.createElement(Pp.s,{className:Je.segment,disabled:_,placeholder:Ie,value:Pe,onChange:Z,loadOptions:qe}))},D0=async(W,_,Z)=>{const de=await(0,i.tR)().get(W);if(!de||!de.getTagValues)return[];const Pe=(0,ti.jG)().timeRange(),Ie=Z.filter(Je=>Je.key!==_);return(await de.getTagValues({key:_,filters:Ie,timeRange:Pe})).map(Je=>({label:Je.text,value:Je.text}))};function b0(){return{segment:(0,ot.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"500px"})}}const P0=["=","!=","<",">","=~","!~"].map(W=>({label:W,value:W})),C0=({value:W,disabled:_,onChange:Z})=>a.createElement(Ph.Y,{className:"query-segment-operator",value:W,disabled:_,options:P0,onChange:Z}),Mh=({datasource:W,filter:{key:_,operator:Z,value:de},onKeyChange:Pe,onOperatorChange:Ie,onValueChange:Ve,placeHolder:Je,allFilters:qe,disabled:dt})=>a.createElement(a.Fragment,null,a.createElement(Th,{disabled:dt,datasource:W,filterKey:_,onChange:Pe,allFilters:qe}),a.createElement("div",{className:"gf-form"},a.createElement(C0,{disabled:dt,value:Z,onChange:Ie})),a.createElement(y0,{disabled:dt,datasource:W,filterKey:_,filterValue:de,allFilters:qe,onChange:Ve,placeHolder:Je})),T0=({datasource:W,appendBefore:_,onCompleted:Z,allFilters:de})=>{const[Pe,Ie]=(0,a.useState)(null),[Ve,Je]=(0,a.useState)("="),qe=(0,a.useCallback)(Pt=>{if(Pt.value!==cu){Ie(Pt.value??"");return}Ie(null)},[Ie]),dt=(0,a.useCallback)(Pt=>Je(Pt.value??""),[Je]),Dt=(0,a.useCallback)(Pt=>{Z({value:Pt.value??"",operator:Ve,key:Pe}),Ie(null),Je("=")},[Z,Ve,Pe]);return Pe===null?a.createElement(Th,{datasource:W,filterKey:Pe,onChange:qe,allFilters:de}):a.createElement(a.Fragment,{key:"filter-builder"},_,a.createElement(Mh,{datasource:W,filter:{key:Pe,value:"",operator:Ve},placeHolder:(0,Qa.t)("variable.adhoc.placeholder","Select value"),onKeyChange:qe,onOperatorChange:dt,onValueChange:Dt,allFilters:de}))},xh=({label:W})=>a.createElement("div",{className:"gf-form"},a.createElement("span",{className:"gf-form-label query-keyword"},W));class S0 extends a.PureComponent{constructor(){super(...arguments),this.onChange=(_,Z)=>de=>{const{filters:Pe}=this.props,{value:Ie}=de;return de.value===cu?this.props.removeFilter(_):this.props.changeFilter(_,{...Pe[_],[Z]:Ie})},this.appendFilterToVariable=_=>{this.props.addFilter(_)}}render(){const{filters:_,disabled:Z}=this.props;return a.createElement("div",{className:"gf-form-inline"},this.renderFilters(_,Z),!Z&&a.createElement(T0,{datasource:this.props.datasource,appendBefore:_.length>0?a.createElement(xh,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()}))}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(_,Z){return _.length===0&&Z?a.createElement(Ph.Y,{disabled:Z,value:"No filters",options:[],onChange:()=>{}}):_.reduce((de,Pe,Ie)=>(de.length>0&&de.push(a.createElement(xh,{label:"AND",key:`condition-${Ie}`})),de.push(this.renderFilterSegments(Pe,Ie,Z)),de),[])}renderFilterSegments(_,Z,de){return a.createElement(a.Fragment,{key:`filter-${Z}`},a.createElement(Mh,{disabled:de,datasource:this.props.datasource,filter:_,onKeyChange:this.onChange(Z,"key"),onOperatorChange:this.onChange(Z,"operator"),onValueChange:this.onChange(Z,"value"),allFilters:this.getAllFilters()}))}}const M0={addFilter:Oc.U2,removeFilter:Oc.VT,changeFilter:Oc.$u},x0=(0,Zo.connect)(null,M0);class O0 extends a.PureComponent{constructor(){super(...arguments),this.addFilter=_=>{this.props.addFilter((0,Ca.jX)(this.props.variable),_)},this.removeFilter=_=>{this.props.removeFilter((0,Ca.jX)(this.props.variable),_)},this.changeFilter=(_,Z)=>{this.props.changeFilter((0,Ca.jX)(this.props.variable),{index:_,filter:Z})}}render(){const{filters:_,datasource:Z,baseFilters:de}=this.props.variable;return a.createElement(S0,{datasource:Z,filters:_,baseFilters:de,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Oh=x0(O0);Oh.displayName="AdHocPicker";var Ih=e(53699);const I0=W=>W.map(_=>B0(_).map(R0).join("|")),A0=W=>{if((0,h.isArray)(W))return W.map(Ah).filter(U0);const _=Ah(W);return _===null?[]:[_]};function R0(W){return W==null?"":/\|/g[Symbol.replace](W,"__gfp__")}function L0(W){return W==null?"":/__gfp__/g[Symbol.replace](W,"|")}function B0(W){return[W.key,W.operator,W.value]}function Ah(W){if(!(0,h.isString)(W)||W.length===0)return null;const _=W.split("|").map(L0);return{key:_[0],operator:_[1],value:_[2]}}function U0(W){return W!==null&&(0,h.isString)(W.value)}const Rh=async()=>{},N0=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Ih.MK,reducer:Ih.AA,picker:Oh,editor:p0,dependsOn:()=>!1,setValue:Rh,setValueFromUrl:async(W,_)=>{const Z=A0(_);await(0,Ms.JD)((0,Oc.D4)((0,Ca.jX)(W),Z))},updateOptions:Rh,getSaveModel:W=>{const{index:_,id:Z,state:de,global:Pe,rootStateKey:Ie,...Ve}=(0,h.cloneDeep)(W);return Ve},getValueForUrl:W=>{const _=W?.filters??[];return I0(_)}});var Ic=e(23546),w0=e(8866),$r=e(13344),Lr=e(24240),Cp=e(13752),Lh=e(13288),F0=e(44240),du=e(16126),W0=e(38975),K0=e(67791),$0=e(66847),V0=e(69850),_0=e(62938),dr=e(72401),xs=e(48594),Ac=e(83370),Lo=e(80484);const z0={...Lo.Vg,type:"query",datasource:null,query:"",regex:"",sort:Lo.ZG.disabled,refresh:Lo.CO.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},k0=(W,_)=>{if(_===Lo.ZG.disabled)return W;const Z=Math.ceil(_/2),de=_%2===0;return Z===1?W=(0,h.sortBy)(W,"text"):Z===2?W=(0,h.sortBy)(W,Pe=>{if(!Pe.text)return-1;const Ie=Pe.text.match(/.*?(\d+).*/);return!Ie||Ie.length<2?-1:parseInt(Ie[1],10)}):Z===3?W=(0,h.sortBy)(W,Pe=>(0,h.toLower)(Pe.text)):Z===4&&W.sort((Pe,Ie)=>Pe.text?Ie.text?Pe.text.localeCompare(Ie.text,void 0,{numeric:!0}):1:-1),de&&(W=W.reverse()),W},H0=(W,_)=>{const Z=[];let de=null;_.lastIndex=0;do de=_.exec(W),de&&Z.push(de);while(_.global&&de&&de[0]!==""&&de[0]!==void 0);return Z},j0=(W,_,Z)=>{let de,Pe=[];W&&(de=(0,_r.dO)(W));for(let Ie=0;Ie<Z.length;Ie++){const Ve=Z[Ie];let Je=Ve.text===void 0||Ve.text===null?Ve.value:Ve.text,qe=Ve.value===void 0||Ve.value===null?Ve.text:Ve.value;if((0,h.isNumber)(qe)&&(qe=qe.toString()),(0,h.isNumber)(Je)&&(Je=Je.toString()),de){const dt=H0(qe,de);if(!dt.length)continue;const Dt=dt.find(Ot=>Ot.groups&&Ot.groups.value),Pt=dt.find(Ot=>Ot.groups&&Ot.groups.text),$t=dt.find(Ot=>Ot.length>1),Lt=dt.length>1&&$t;if(Dt||Pt)qe=Dt?.groups?.value??Pt?.groups?.text,Je=Pt?.groups?.text??Dt?.groups?.value;else if(Lt){for(let Ot=0;Ot<dt.length;Ot++){const Ft=dt[Ot];Pe.push({text:Ft[1],value:Ft[1],selected:!1})}continue}else $t&&(Je=$t[1],qe=$t[1])}Pe.push({text:Je,value:qe,selected:!1})}return Pe=(0,h.uniqBy)(Pe,"value"),k0(Pe,_)},Bh=(0,xo.Z0)({name:"templating/query",initialState:Ac.j,reducers:{updateVariableOptions:(W,_)=>{const{results:Z,templatedRegex:de}=_.payload.data,Pe=(0,Ds.Fs)(W,_.payload.id);if(Pe.type!=="query")return;const{includeAll:Ie,sort:Ve}=Pe,Je=j0(de,Ve,Z);Ie&&Je.unshift({text:$r.Zm,value:$r.To,selected:!1}),Je.length||Je.push({text:$r.ou,value:$r.Ek,isNone:!0,selected:!1}),Pe.options=Je}}}),G0=Bh.reducer,{updateVariableOptions:Q0}=Bh.actions;function Y0(){return W=>W.pipe((0,zt.T)(J0))}function J0(W){const _=W.series;if(!_||!_.length)return[];if(q0(_))return _;const Z=(0,sr.Bt)(_),de=[];let Pe=-1,Ie=-1,Ve=-1,Je=-1;for(const qe of Z)for(let dt=0;dt<qe.fields.length;dt++){const Dt=qe.fields[dt],Pt=(0,me.Ct)(Dt,qe,_).toLowerCase();Dt.type===H.PU.string&&Ve===-1&&(Ve=dt),Pt==="text"&&Dt.type===H.PU.string&&Ie===-1&&(Ie=dt),Pt==="value"&&Dt.type===H.PU.string&&Pe===-1&&(Pe=dt),Pt==="expandable"&&(Dt.type===H.PU.boolean||Dt.type===H.PU.number)&&Je===-1&&(Je=dt)}if(Ve===-1)throw new Error("Couldn't find any field of type string in the results.");for(const qe of Z)for(let dt=0;dt<qe.length;dt++){const Dt=Je!==-1?qe.fields[Je].values[dt]:void 0,Pt=qe.fields[Ve].values[dt],$t=Ie!==-1?qe.fields[Ie].values[dt]:null,Lt=Pe!==-1?qe.fields[Pe].values[dt]:null;if(Pe===-1&&Ie===-1){de.push({text:Pt,value:Pt,expandable:Dt});continue}if(Pe===-1&&Ie!==-1){de.push({text:$t,value:$t,expandable:Dt});continue}if(Pe!==-1&&Ie===-1){de.push({text:Lt,value:Lt,expandable:Dt});continue}de.push({text:$t,value:Lt,expandable:Dt})}return de}function X0(W){return _=>_.pipe((0,zt.T)(Z=>{const{variable:de,dispatch:Pe,getTemplatedRegexFunc:Ie}=W;if(!de.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const Ve=Ie(de),Je=(0,Ca.qD)(de,{results:Z,templatedRegex:Ve});Pe((0,xs.kb)(de.rootStateKey,Q0(Je)))}))}function Z0(W){return _=>_.pipe((0,so.Z)(()=>{const{dispatch:Z,variable:de,searchFilter:Pe}=W;return Pe?(0,Kt.of)():(0,_s.H)(Z((0,dr.kl)((0,Ca.jX)(de))))}))}function q0(W){if(!W)return!1;if(!W.length)return!0;const _=W[0];if((0,sr.ci)(_))return!1;for(const Z in _){if(!_.hasOwnProperty(Z)||_[Z]!==null&&typeof _[Z]!="string"&&typeof _[Z]!="number")continue;const de=Z.toLowerCase();if(de==="text"||de==="value")return!0}return!1}var uu=e(29505),eE=e(43127);class tE{constructor(){this.runners=[new nE,new aE,new sE,new oE]}getRunnerForDatasource(_){const Z=this.runners.find(de=>de.canRun(_));if(Z)return Z;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class nE{constructor(){this.type=uu.Qz.Legacy}canRun(_){return(0,Lr.d5)(_)}getTarget({datasource:_,variable:Z}){if((0,Lr.d5)(_))return Z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:_,variable:Z,searchFilter:de,timeSrv:Pe},Ie){if(!(0,Lr.d5)(_))return Rc();const Ve=(0,Ca.iP)(Z,de,Pe,Ie.scopedVars);return(0,_s.H)(_.metricFindQuery(Z.query,Ve)).pipe((0,so.Z)(Je=>{if(!Je||!Je.length)return Rc();const qe=Je;return(0,Kt.of)({series:qe,state:vr.Gu.Done,timeRange:Ve.range})}))}}class aE{constructor(){this.type=uu.Qz.Standard}canRun(_){return(0,Lr.Hf)(_)}getTarget({datasource:_,variable:Z}){if((0,Lr.Hf)(_))return _.variables.toDataQuery(Z.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:_,runRequest:Z},de){return(0,Lr.Hf)(_)?_.variables.query?Z(_,de,_.variables.query.bind(_.variables)):Z(_,de):Rc()}}class sE{constructor(){this.type=uu.Qz.Custom}canRun(_){return(0,Lr.zs)(_)}getTarget({datasource:_,variable:Z}){if((0,Lr.zs)(_))return Z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:_,runRequest:Z},de){return(0,Lr.zs)(_)?Z(_,de,_.variables.query.bind(_.variables)):Rc()}}const rE="variable-query";class oE{constructor(){this.type=uu.Qz.Datasource}canRun(_){return(0,Lr.X3)(_)}getTarget({datasource:_,variable:Z}){if((0,Lr.X3)(_))return{...Z.query,refId:Z.query.refId??rE};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:_,runRequest:Z},de){return(0,Lr.X3)(_)?Z(_,de):Rc()}}function Rc(){return(0,Kt.of)({state:vr.Gu.Done,series:[],timeRange:(0,eE.E2)()})}class iE{constructor(_={dispatch:Ms.JD,getState:Ms.Gu,getVariable:Ds.dn,getTemplatedRegex:Ca.u7,getTimeSrv:ti.jG,queryRunners:new tE,runRequest:Dp.BN}){this.dependencies=_,this.updateOptionsRequests=new Cp.B,this.updateOptionsResults=new Cp.B,this.cancelRequests=new Cp.B,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(_){this.updateOptionsRequests.next(_)}getResponse(_){return this.updateOptionsResults.asObservable().pipe((0,du.p)(Z=>Z.identifier===_))}cancelRequest(_){this.cancelRequests.next({identifier:_})}destroy(){this.subscription.unsubscribe()}onNewRequest(_){const{datasource:Z,identifier:de,searchFilter:Pe}=_;try{const{dispatch:Ie,runRequest:Ve,getTemplatedRegex:Je,getVariable:qe,queryRunners:dt,getTimeSrv:Dt,getState:Pt}=this.dependencies,$t=(0,Ds.y7)(Pt());this.updateOptionsResults.next({identifier:de,state:vr.Gu.Loading});const Lt=qe(de,Pt());if(Lt.type!=="query")return;const Ot=Dt(),Ft={variable:Lt,datasource:Z,searchFilter:Pe,timeSrv:Ot,runRequest:Ve},bn=dt.getRunnerForDatasource(Z),Ta=bn.getTarget({datasource:Z,variable:Lt}),wa=this.getRequest(Lt,_,Ta);bn.runRequest(Ft,wa).pipe((0,du.p)(()=>{const La=(0,Ds.y7)(Pt());return $t===La}),(0,du.p)(La=>La.state===vr.Gu.Done||La.state===vr.Gu.Error),(0,W0.s)(1),(0,so.Z)(La=>La.state===vr.Gu.Error?(0,Lh.$)(()=>La.error):(0,Kt.of)(La)),Y0(),X0({variable:Lt,dispatch:Ie,getTemplatedRegexFunc:Je}),Z0({variable:Lt,dispatch:Ie,searchFilter:Pe}),(0,K0.Q)((0,F0.h)(this.updateOptionsRequests,this.cancelRequests).pipe((0,du.p)(La=>{let Aa=!1;return La.identifier.id===de.id&&(Aa=!0,this.updateOptionsResults.next({identifier:de,state:vr.Gu.Loading,cancelled:Aa})),Aa}))),(0,$0.W)(La=>La.cancelled?(0,Kt.of)({}):(this.updateOptionsResults.next({identifier:de,state:vr.Gu.Error,error:La}),(0,Lh.$)(()=>La))),(0,V0.j)(()=>{this.updateOptionsResults.next({identifier:de,state:vr.Gu.Done})})).subscribe()}catch(Ie){this.updateOptionsResults.next({identifier:de,state:vr.Gu.Error,error:Ie})}}getRequest(_,Z,de){const{searchFilter:Pe}=Z,Ie={variable:{text:_.current.text,value:_.current.value}},qe={...Pe?{searchFilter:{text:Pe,value:Pe}}:{},...Ie},dt=this.dependencies.getTimeSrv().timeRange();return{app:vh.Jk.Dashboard,requestId:(0,_0.A)(),timezone:"",range:dt,interval:"",intervalMs:0,targets:[de],scopedVars:qe,startTime:Date.now()}}}let Uh;function lE(W){Uh=W}function Tp(){return Uh}const cE=W=>{if(!dE(W))return W.name;const{current:_}=W;return Array.isArray(_.text)?_.text.join(" + "):_.text},dE=W=>Array.isArray(W?.options)||typeof W?.current=="object";var zi=(W=>(W[W.moveUp=38]="moveUp",W[W.moveDown=40]="moveDown",W[W.select=32]="select",W[W.cancel=27]="cancel",W[W.selectAndClose=13]="selectAndClose",W))(zi||{});class uE extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=_=>{if(zi[_.keyCode]&&_.keyCode!==zi.select){const Z=_.ctrlKey||_.metaKey||_.shiftKey;this.props.onNavigate(_.keyCode,Z),_.preventDefault()}},this.onChange=_=>{this.props.onChange(_.target.value)}}render(){const{value:_,id:Z,onNavigate:de,...Pe}=this.props;return a.createElement("input",{...Pe,ref:Ie=>{Ie&&(Ie.focus(),Ie.setAttribute("style",`width:${Math.max(Ie.width,150)}px`))},id:Z,type:"text",className:"gf-form-input",value:_??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Qa.t)("variable.dropdown.placeholder","Enter variable value")})}}var mE=e(89963);const fE=({loading:W,disabled:_,onClick:Z,text:de,onCancel:Pe,id:Ie})=>{const Ve=(0,Tt.of)(wh),Je=(0,a.useCallback)(qe=>{qe.stopPropagation(),qe.preventDefault(),Z()},[Z]);return W?a.createElement("div",{className:Ve.container,"data-testid":Zs.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${de}`),title:de,id:Ie},a.createElement(Nh,{text:de}),a.createElement(mE.I,{loading:!0,onCancel:Pe})):a.createElement("button",{onClick:Je,className:Ve.container,"data-testid":Zs.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${de}`),"aria-expanded":!1,"aria-controls":`options-${Ie}`,id:Ie,title:de,disabled:_},a.createElement(Nh,{text:de}),a.createElement(us.I,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},Nh=({text:W})=>{const _=(0,Tt.of)(wh);return a.createElement("span",{className:_.textAndTags},W===$r.Zm?(0,Qa.t)("variable.picker.link-all","All"):W)},wh=W=>({container:(0,ot.css)`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${W.spacing(1)};
    background-color: ${W.components.input.background};
    border: 1px solid ${W.components.input.borderColor};
    border-radius: ${W.shape.radius.default};
    display: flex;
    align-items: center;
    color: ${W.colors.text};
    height: ${W.spacing(W.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${W.colors.action.disabledBackground};
      color: ${W.colors.action.disabledText};
      border: 1px solid ${W.colors.action.disabledBackground};
    }
  `,textAndTags:(0,ot.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${W.spacing(.25)};
    user-select: none;
  `});class gE extends a.PureComponent{constructor(){super(...arguments),this.onToggle=_=>Z=>{const de=Z.shiftKey||Z.ctrlKey||Z.metaKey;this.handleEvent(Z),this.props.onToggle(_,de)},this.onToggleAll=_=>{this.handleEvent(_),this.props.onToggleAll()}}handleEvent(_){_.preventDefault(),_.stopPropagation()}render(){const{multi:_,values:Z,highlightIndex:de,selectedValues:Pe,onToggle:Ie,onToggleAll:Ve,theme:Je,...qe}=this.props,dt=Sp(Je);return a.createElement("div",{className:dt.variableValueDropdown},a.createElement("div",{className:dt.variableOptionsWrapper},a.createElement("ul",{className:dt.variableOptionsColumn,"aria-label":Zs.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...qe},this.renderMultiToggle(),Z.map((Dt,Pt)=>this.renderOption(Dt,Pt)))))}renderOption(_,Z){const{highlightIndex:de,multi:Pe,theme:Ie}=this.props,Ve=Sp(Ie),Je=_.value===$r.To;return a.createElement("li",{key:`${_.value}`},a.createElement("button",{"data-testid":Zs.Tp.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":_.selected,className:(0,ot.cx)((0,oe.my)(Ie),Ve.variableOption,{[Ve.highlighted]:Z===de,[Ve.variableAllOption]:Je},Ve.noStyledButton),onClick:this.onToggle(_)},a.createElement("span",{className:(0,ot.cx)(Ve.variableOptionIcon,{[Ve.variableOptionIconSelected]:_.selected,[Ve.hideVariableOptionIcon]:!Pe})}),a.createElement("span",{"data-testid":Zs.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${_.text}`)},Je?(0,Qa.t)("variable.picker.option-all","All"):_.text)))}renderMultiToggle(){const{multi:_,selectedValues:Z,theme:de,values:Pe}=this.props,Ie=Sp(de),Ve=Pe.some(qe=>qe.value===$r.To);if(!_)return null;const Je=()=>a.createElement(Qa.x6,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return a.createElement(Ni.m,{content:Je,placement:"top"},a.createElement("button",{className:(0,ot.cx)((0,oe.my)(de),Ie.variableOption,Ie.variableOptionColumnHeader,Ie.noStyledButton,{[Ie.noPaddingBotton]:Ve}),role:"checkbox","aria-checked":Z.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},a.createElement("span",{className:(0,ot.cx)(Ie.variableOptionIcon,{[Ie.variableOptionIconManySelected]:Z.length>1})}),a.createElement(Qa.x6,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",Z.length,")"))}}const Sp=(0,El.N)(W=>{const _=W.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,ot.css)({display:"none"}),highlighted:(0,ot.css)({backgroundColor:W.colors.action.hover}),noStyledButton:(0,ot.css)({width:"100%",textAlign:"left"}),variableOption:(0,ot.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px","&:hover":{backgroundColor:W.colors.action.hover}}),variableOptionColumnHeader:(0,ot.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,ot.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${_}) left top no-repeat`}),variableOptionIconManySelected:(0,ot.css)({background:`url(${_}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,ot.css)({background:`url(${_}) 0px -18px no-repeat`}),variableValueDropdown:(0,ot.css)({backgroundColor:W.colors.background.primary,border:`1px solid ${W.colors.border.weak}`,borderRadius:W.shape.borderRadius(2),boxShadow:W.shadows.z2,position:"absolute",top:W.spacing(W.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:W.zIndex.typeahead}),variableOptionsColumn:(0,ot.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,ot.css)({display:"table",width:"100%"}),variableAllOption:(0,ot.css)({borderBottom:`1px solid ${W.colors.border.weak}`,paddingBottom:W.spacing(1)}),noPaddingBotton:(0,ot.css)({paddingBottom:0})}}),pE=(0,Tt.cV)(gE);var hE=e(92053),Fh=e(92041),ki=e(56968),Qo=e(24300);const vE=(W,_,Z)=>async(de,Pe)=>{if(_===zi.cancel)return await de(mu(W));if(_===zi.select)return de(Mp(W,Z));if(_===zi.selectAndClose)return(0,Ds.nx)(W,Pe()).optionsPicker.multi?de(Mp(W,Z)):(de(Mp(W,Z,!0)),de(mu(W)));if(_===zi.moveDown)return de((0,xs.kb)(W,(0,Qo.O$)(1)));if(_===zi.moveUp)return de((0,xs.kb)(W,(0,Qo.O$)(-1)))},EE=(W,_="")=>async(Z,de)=>{const{rootStateKey:Pe}=W,{id:Ie,queryValue:Ve}=(0,Ds.nx)(Pe,de()).optionsPicker,Je={id:Ie,rootStateKey:Pe,type:"query"},qe=(0,Ds.dn)(Je,de());if(!("options"in qe)||(Z((0,xs.kb)(Pe,(0,Qo.S8)(_))),(0,h.trim)(Ve)===(0,h.trim)(_)))return;const{query:dt,options:Dt}=qe,Pt=typeof dt=="string"?dt:dt.target;return(0,hE.E)(Pt)?PE(Z,de,_,Pe):Z((0,xs.kb)(Pe,(0,Qo.fx)(Dt)))},yE=async W=>{if((0,Fh.R)(W.current))return;await xc.B.get(W.type).setValue(W,W.current,!0)},mu=(W,_)=>async(Z,de)=>{const Pe=(0,Ds.nx)(W,de()).optionsPicker,Ie={id:Pe.id,rootStateKey:W,type:"query"},Ve=(0,Ds.dn)(Ie,de());if(!(0,Lr.SP)(Ve))return;const Je={option:CE(Pe)},qe={propName:"queryValue",propValue:Pe.queryValue};Z((0,xs.kb)(W,(0,ki.dE)((0,Ca.qD)(Ve,Je)))),Z((0,xs.kb)(W,(0,ki.QP)((0,Ca.qD)(Ve,qe))));const dt=(0,Ds.dn)(Ie,de());if((0,Lr.SP)(dt)&&(Z((0,xs.kb)(W,(0,Qo.Fu)())),(0,Ca.Lz)(Ve)!==(0,Ca.Lz)(dt)))return _?_(dt):await yE(dt)},DE=(W,_)=>async(Z,de)=>{const{id:Pe,rootStateKey:Ie}=W,Ve=(0,Ds.nx)(Ie,de()).optionsPicker;Ve.id&&Ve.id!==Pe&&await Z(mu(Ie,_));const Je=(0,Ds.dn)(W,de());(0,Lr.SP)(Je)&&Z((0,xs.kb)(Ie,(0,Qo.MO)(Je)))},Mp=(W,_,Z=!1)=>(de,Pe)=>{const{highlightIndex:Ie,options:Ve}=(0,Ds.nx)(W,Pe()).optionsPicker,Je=Ve[Ie];de((0,xs.kb)(W,(0,Qo.U9)({option:Je,forceSelect:Z,clearOthers:_})))},bE=async(W,_,Z,de)=>{try{const{id:Pe}=(0,Ds.nx)(de,_()).optionsPicker,Ie={id:Pe,rootStateKey:de,type:"query"},Ve=(0,Ds.dn)(Ie,_());if(!(0,Lr.SP)(Ve))return;await xc.B.get(Ve.type).updateOptions(Ve,Z);const qe=(0,Ds.dn)(Ie,_());if(!(0,Lr.SP)(qe))return;W((0,xs.kb)(de,(0,Qo.qh)(qe.options)))}catch(Pe){console.error(Pe)}},PE=(0,h.debounce)(bE,500);function CE(W){const{options:_,selectedValues:Z,queryValue:de,multi:Pe}=W;if(_.length===0&&de&&de.length>0)return{text:de,value:de,selected:!1};if(!Pe)return Z.find(Je=>Je.selected);const Ie=[],Ve=[];for(const Je of Z)Je.selected&&(Ie.push(Je.text.toString()),Ve.push(Je.value.toString()));return{value:Ve,text:Ie,selected:!0}}const Lc=()=>{const W=Ie=>({...(0,Ic.bindActionCreators)({openOptions:DE,commitChangesToVariable:mu,navigateOptions:vE},Ie),filterOrSearchOptions:(Ve,Je="")=>{Ie(EE(Ve,Je))},toggleAllOptions:Ve=>Ie((0,xs.kb)(Ve.rootStateKey,(0,Qo.an)())),toggleOption:(Ve,Je,qe,dt)=>Ie((0,xs.kb)(Ve.rootStateKey,(0,Qo.U9)({option:Je,clearOthers:qe,forceSelect:dt})))}),_=(Ie,Ve)=>{const{rootStateKey:Je}=Ve.variable;return Je?{picker:(0,Ds.nx)(Je,Ie).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Qo.$z})},Z=(0,Zo.connect)(_,W);class de extends a.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,Ca.jX)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(Ve,Je)=>{((0,Lr.iv)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(Ve,Je)},this.onToggleSingleValueVariable=(Ve,Je)=>{this.props.toggleOption((0,Ca.jX)(this.props.variable),Ve,Je,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(Ve,Je)=>{this.props.toggleOption((0,Ca.jX)(this.props.variable),Ve,Je,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,Ca.jX)(this.props.variable))},this.onFilterOrSearchOptions=Ve=>{this.props.filterOrSearchOptions((0,Ca.jX)(this.props.variable),Ve)},this.onNavigate=(Ve,Je)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,Ve,Je)},this.onCancel=()=>{Tp().cancelRequest((0,Ca.jX)(this.props.variable))}}render(){const{variable:Ve,picker:Je}=this.props,qe=Je.id===Ve.id;return a.createElement("div",{className:"variable-link-wrapper"},qe?this.renderOptions(Je):this.renderLink(Ve))}renderLink(Ve){const Je=cE(Ve),qe=Ve.state===vr.Gu.Loading;return a.createElement(fE,{id:$r.qz+Ve.id,text:Je,onClick:this.onShowOptions,loading:qe,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(Ve){const{id:Je}=this.props.variable;return a.createElement(w0.N,{onClick:this.onHideOptions},a.createElement(uE,{id:$r.qz+Je,value:Ve.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Je}`}),a.createElement(pE,{values:Ve.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:Ve.highlightIndex,multi:Ve.multi,selectedValues:Ve.selectedValues,id:`options-${Je}`}))}}const Pe=Z(de);return Pe.displayName="OptionsPicker",Pe};var TE=e(95802);class SE extends a.PureComponent{constructor(){super(...arguments),this.onChange=_=>{this.props.onPropChange({propName:"query",propValue:_.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(TE.d,{constantValue:this.props.variable.query,onChange:this.onChange})}}const ME={...Lo.Vg,type:"constant",hide:Lo.zL.hideVariable,query:"",current:{},options:[]},Wh=(0,xo.Z0)({name:"templating/constant",initialState:Ac.j,reducers:{createConstantOptionsFromQuery:(W,_)=>{const Z=(0,Ds.Fs)(W,_.payload.id);Z.type==="constant"&&(Z.options=[{text:Z.query.trim(),value:Z.query.trim(),selected:!1}])}}}),xE=Wh.reducer,{createConstantOptionsFromQuery:OE}=Wh.actions,IE=W=>async _=>{const{rootStateKey:Z}=W;await _((0,xs.kb)(Z,OE((0,Ca.qD)(W)))),await _((0,dr.kl)(W))},AE=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:ME,reducer:xE,picker:Lc(),editor:SE,dependsOn:()=>!1,setValue:async(W,_,Z=!1)=>{await(0,Ms.JD)((0,dr.t9)((0,Ca.jX)(W),_,Z))},setValueFromUrl:async(W,_)=>{await(0,Ms.JD)((0,dr.x7)((0,Ca.jX)(W),_))},updateOptions:async W=>{await(0,Ms.JD)(IE((0,Ca.jX)(W)))},getSaveModel:W=>{const{index:_,id:Z,state:de,global:Pe,current:Ie,options:Ve,rootStateKey:Je,...qe}=(0,h.cloneDeep)(W);return qe},getValueForUrl:W=>W.current.value,beforeAdding:W=>{const{current:_,options:Z,query:de,...Pe}=(0,h.cloneDeep)(W),Ie={selected:!0,text:de,value:de};return{...Pe,current:Ie,options:[Ie],query:de}}});function RE(W,..._){const Z=(0,Zo.connect)(..._)(W);return de=>a.createElement(Z,{...de,store:Ms.M_})}function LD(W,..._){const Z=connect(..._)(W);return de=>React.createElement(Provider,{store},React.createElement(Z,{...de,store}))}var LE=e(58711);class BE extends a.PureComponent{constructor(){super(...arguments),this.onSelectionOptionsChange=async({propName:_,propValue:Z})=>{this.props.onPropChange({propName:_,propValue:Z,updateOptions:!0})},this.onQueryChange=_=>{this.props.onPropChange({propName:"query",propValue:_.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(LE.w,{query:this.props.variable.query,multi:this.props.variable.multi,allValue:this.props.variable.allValue,includeAll:this.props.variable.includeAll,onQueryChange:this.onQueryChange,onMultiChange:_=>this.onSelectionOptionsChange({propName:"multi",propValue:_.currentTarget.checked}),onIncludeAllChange:_=>this.onSelectionOptionsChange({propName:"includeAll",propValue:_.currentTarget.checked}),onAllValueChange:_=>this.onSelectionOptionsChange({propName:"allValue",propValue:_.currentTarget.value})})}}const UE=(W,_)=>({}),NE={changeVariableMultiValue:dr.TI},wE=RE(BE,UE,NE),FE={...Lo.Vg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},Kh=(0,xo.Z0)({name:"templating/custom",initialState:Ac.j,reducers:{createCustomOptionsFromQuery:(W,_)=>{const Z=(0,Ds.Fs)(W,_.payload.id);if(Z.type!=="custom")return;const{includeAll:de}=Z,Ve=(_.payload.data.match(/(?:\\,|[^,])+/g)??[]).map(Je=>{Je=Je.replace(/\\,/g,",");const qe=/^(.+)\s:\s(.+)$/g.exec(Je)??[];if(qe.length===3){const[,dt,Dt]=qe;return{text:dt.trim(),value:Dt.trim(),selected:!1}}else return{text:Je.trim(),value:Je.trim(),selected:!1}});de&&Ve.unshift({text:$r.Zm,value:$r.To,selected:!1}),Z.options=Ve}}}),WE=Kh.reducer,{createCustomOptionsFromQuery:KE}=Kh.actions,$E=W=>async(_,Z)=>{const{rootStateKey:de}=W,Pe=(0,Ds.dn)(W,Z());if(Pe.type!=="custom")return;const Ie=(0,ve.w)().replace(Pe.query);await _((0,xs.kb)(de,KE((0,Ca.qD)(W,Ie)))),await _((0,dr.kl)(W))},VE=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:FE,reducer:WE,picker:Lc(),editor:wE,dependsOn:(W,_)=>(0,Ca.wJ)(W.query,_.name),setValue:async(W,_,Z=!1)=>{await(0,Ms.JD)((0,dr.t9)((0,Ca.jX)(W),_,Z))},setValueFromUrl:async(W,_)=>{await(0,Ms.JD)((0,dr.x7)((0,Ca.jX)(W),_))},updateOptions:async W=>{await(0,Ms.JD)($E((0,Ca.jX)(W)))},getSaveModel:W=>{const{index:_,id:Z,state:de,global:Pe,rootStateKey:Ie,...Ve}=(0,h.cloneDeep)(W);return Ve},getValueForUrl:W=>(0,Ca.ML)(W)?$r.Zm:W.current.value});var _E=e(98917),zE=e(80147);const kE={...Lo.Vg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:Lo.CO.onDashboardLoad},$h=(0,xo.Z0)({name:"templating/datasource",initialState:Ac.j,reducers:{createDataSourceOptions:(W,_)=>{const{sources:Z,regex:de}=_.payload.data,Pe=[],Ie=(0,Ds.Fs)(W,_.payload.id);if(Ie.type==="datasource"){for(let Ve=0;Ve<Z.length;Ve++){const Je=Z[Ve];(0,zE._)(Ie.query,Je.meta)&&(HE(Je,de)&&Pe.push({text:Je.name,value:Je.uid,selected:!1}),jE(Je,de)&&Pe.push({text:"default",value:"default",selected:!1}))}Pe.length===0&&Pe.push({text:"No data sources found",value:"",selected:!1}),Ie.includeAll&&Pe.unshift({text:$r.Zm,value:$r.To,selected:!1}),Ie.options=Pe}}}});function HE(W,_){return _?_.exec(W.name):!0}function jE(W,_){return W.isDefault?_?_.exec("default"):!0:!1}const GE=$h.reducer,{createDataSourceOptions:QE}=$h.actions,YE=(W,_={getDatasourceSrv:i.tR})=>async(Z,de)=>{const{rootStateKey:Pe}=W,Ie=_.getDatasourceSrv().getList({metrics:!0,variables:!1}),Ve=(0,Ds.dn)(W,de());if(Ve.type!=="datasource")return;let Je;Ve.regex&&(Je=(0,ve.w)().replace(Ve.regex,void 0,"regex"),Je=(0,_r.dO)(Je)),Z((0,xs.kb)(Pe,QE((0,Ca.qD)(W,{sources:Ie,regex:Je})))),await Z((0,dr.kl)(W))},JE=(W,_={getDatasourceSrv:i.tR})=>Z=>{const de=_.getDatasourceSrv().getList({metrics:!0,variables:!0}),Pe=(0,h.chain)(de).uniqBy("meta.id").map(Ie=>({text:Ie.meta.name,value:Ie.meta.id})).value();Pe.unshift({text:"",value:""}),Z((0,xs.kb)(W,(0,Ti.BC)({dataSourceTypes:Pe})))},XE=(W,_)=>{const{variable:{rootStateKey:Z}}=_;if(!Z)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:bh(Ti.nS)};const{editor:de}=(0,Ds.nx)(Z,W);return{extended:bh(de)}},ZE={initDataSourceVariableEditor:JE,changeVariableMultiValue:dr.TI},qE=(0,Zo.connect)(XE,ZE);class ey extends a.PureComponent{constructor(){super(...arguments),this.onRegExBlur=_=>{this.props.onPropChange({propName:"regex",propValue:_.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:_,propName:Z})=>{this.props.onPropChange({propName:Z,propValue:_,updateOptions:!0})},this.onMultiChanged=_=>{this.props.changeVariableMultiValue((0,Ca.jX)(this.props.variable),_.currentTarget.checked)},this.onIncludeAllChanged=_=>{this.onSelectionOptionsChange({propName:"includeAll",propValue:_.currentTarget.checked})},this.onAllValueChanged=_=>{this.onSelectionOptionsChange({propName:"allValue",propValue:_.currentTarget.value})},this.getSelectedDataSourceTypeValue=()=>{const{extended:_}=this.props;if(!_?.dataSourceTypes.length)return"";const Z=_.dataSourceTypes.find(Pe=>Pe.value===this.props.variable.query);return(Z?Z.value:_.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=_=>{this.props.onPropChange({propName:"query",propValue:_.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:_}=this.props.variable;if(!_){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(_)}render(){const{variable:_,extended:Z}=this.props,de=Z?.dataSourceTypes?.length?Z.dataSourceTypes?.map(Pe=>({value:Pe.value??"",label:Pe.text})):[];return a.createElement(_E.y,{query:_.query,regex:_.regex,multi:_.multi,includeAll:_.includeAll,optionTypes:de,onChange:this.onDataSourceTypeChanged,onRegExBlur:this.onRegExBlur,onMultiChange:this.onMultiChanged,onIncludeAllChange:this.onIncludeAllChanged,onAllValueChange:this.onAllValueChanged})}}const ty=qE(ey),ny=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:kE,reducer:GE,picker:Lc(),editor:ty,dependsOn:(W,_)=>W.regex?(0,Ca.wJ)(W.regex,_.name):!1,setValue:async(W,_,Z=!1)=>{await(0,Ms.JD)((0,dr.t9)((0,Ca.jX)(W),_,Z))},setValueFromUrl:async(W,_)=>{await(0,Ms.JD)((0,dr.x7)((0,Ca.jX)(W),_))},updateOptions:async W=>{await(0,Ms.JD)(YE((0,Ca.jX)(W)))},getSaveModel:W=>{const{index:_,id:Z,state:de,global:Pe,rootStateKey:Ie,...Ve}=(0,h.cloneDeep)(W);return{...Ve,options:[]}},getValueForUrl:W=>(0,Ca.ML)(W)?$r.Zm:W.current.value});var ay=e(25304),sy=e(49317);const Vh=a.memo(({onPropChange:W,variable:_})=>{const Z=Ve=>{W({propName:"auto",propValue:Ve.target.checked,updateOptions:!0})},de=Ve=>{W({propName:"query",propValue:Ve.currentTarget.value,updateOptions:!0})},Pe=Ve=>{W({propName:"auto_count",propValue:Ve.value,updateOptions:!0})},Ie=Ve=>{W({propName:"auto_min",propValue:Ve.currentTarget.value,updateOptions:!0})};return a.createElement(sy.s,{intervals:_.query,autoStepCount:_.auto_count,autoEnabled:_.auto,onAutoCountChanged:Pe,onIntervalsChange:de,onAutoEnabledChange:Z,onAutoMinIntervalChanged:Ie,autoMinInterval:_.auto_min})});Vh.displayName="IntervalVariableEditor";var ry=e(23989),xp=e(81515);const oy=W=>async _=>{const{rootStateKey:Z}=W;await _((0,xs.kb)(Z,(0,xp.mn)((0,Ca.qD)(W)))),await _(Op(W)),await _((0,dr.kl)(W))},Op=(W,_={calculateInterval:Eh.calculateInterval,getTimeSrv:ti.jG,templateSrv:(0,ry.w)()})=>(Z,de)=>{const Pe=(0,Ds.dn)(W,de());if(Pe.type==="interval"&&Pe.auto){const Ie=_.calculateInterval(_.getTimeSrv().timeRange(),Pe.auto_count,Pe.auto_min);_.templateSrv.setGrafanaVariable("$__auto_interval_"+Pe.name,Ie.interval),_.templateSrv.setGrafanaVariable("$__auto_interval",Ie.interval)}},iy=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:xp.Ez,reducer:xp.E5,picker:Lc(),editor:Vh,dependsOn:()=>!1,setValue:async(W,_,Z=!1)=>{await(0,Ms.JD)(Op((0,Ca.jX)(W))),await(0,Ms.JD)((0,dr.t9)((0,Ca.jX)(W),_,Z))},setValueFromUrl:async(W,_)=>{await(0,Ms.JD)(Op((0,Ca.jX)(W))),await(0,Ms.JD)((0,dr.x7)((0,Ca.jX)(W),_))},updateOptions:async W=>{await(0,Ms.JD)(oy((0,Ca.jX)(W)))},getSaveModel:W=>{const{index:_,id:Z,state:de,global:Pe,rootStateKey:Ie,...Ve}=(0,h.cloneDeep)(W);return Ve},getValueForUrl:W=>W.current.value});var ly=e(44890),cy=e(64423),dy=e(12091),uy=e(70766);function my(W,_,Z){return{next:Pe=>{if(Pe.state===vr.Gu.Error){Z.unsubscribe(),_(Pe.error);return}if(Pe.state===vr.Gu.Done){Z.unsubscribe(),W();return}},error:Pe=>{Z.unsubscribe(),_(Pe)},complete:()=>{Z.unsubscribe(),W()}}}const fy=(W,_)=>async(Z,de)=>{try{const{rootStateKey:Pe}=W;if(!(0,Ca.sN)(Pe,de()))return;const Ie=(0,Ds.dn)(W,de());if(Ie.type!=="query")return;(0,Ds.nx)(Pe,de()).editor.id===Ie.id&&Z((0,xs.kb)(Pe,(0,Ti.Eo)({errorProp:"update"})));const Ve=await(0,B.l)().get(Ie.datasource??"");await new Promise((Je,qe)=>{const dt=new cy.yU,Dt=my(Je,qe,dt),Pt=Tp().getResponse(W).subscribe(Dt);dt.add(Pt),Tp().queueRequest({identifier:W,datasource:Ve,searchFilter:_})})}catch(Pe){if(Pe instanceof Error){const Ie=(0,dy.u)(Pe),{rootStateKey:Ve}=W;throw(0,Ds.nx)(Ve,de()).editor.id===W.id&&Z((0,xs.kb)(Ve,(0,Ti.NY)({errorProp:"update",errorText:Ie.message}))),Ie}}},gy=W=>async(_,Z)=>{const de=(0,Ds.dn)(W,Z());de.type==="query"&&await _(_h((0,Ca.jX)(de),de.datasource))},_h=(W,_)=>async(Z,de)=>{try{const{rootStateKey:Pe}=W,{editor:Ie}=(0,Ds.nx)(Pe,de()),Je=bp(Ie)?.dataSource,qe=await(0,B.l)().get(_??"");Je&&Je.type!==qe?.type&&Z((0,xs.kb)(Pe,(0,ki.QP)((0,Ca.qD)(W,{propName:"query",propValue:""}))));const dt=await(0,uy.y)(qe);Z((0,xs.kb)(Pe,(0,Ti.BC)({dataSource:qe,VariableQueryEditor:dt})))}catch(Pe){console.error(Pe)}},py=(W,_,Z)=>async(de,Pe)=>{const{rootStateKey:Ie}=W,Ve=(0,Ds.dn)(W,Pe());if(Ve.type==="query"){if(hy(Ve.name,_)){const Je="Query cannot contain a reference to itself. Variable: $"+Ve.name;de((0,xs.kb)(Ie,(0,Ti.NY)({errorProp:"query",errorText:Je})));return}de((0,xs.kb)(Ie,(0,Ti.Eo)({errorProp:"query"}))),de((0,xs.kb)(Ie,(0,ki.QP)((0,Ca.qD)(W,{propName:"query",propValue:_})))),Z!==void 0?de((0,xs.kb)(Ie,(0,ki.QP)((0,Ca.qD)(W,{propName:"definition",propValue:Z})))):typeof _=="string"&&de((0,xs.kb)(Ie,(0,ki.QP)((0,Ca.qD)(W,{propName:"definition",propValue:_})))),await de((0,dr.mZ)(W))}};function hy(W,_){if(typeof _=="string"&&_.match(new RegExp("\\$"+W+"(/| |$)")))return!0;const Z=zh(_);for(let de in Z)if(Z.hasOwnProperty(de)){const Pe=Z[de];if(typeof Pe=="string"&&Pe.match(new RegExp("\\$"+W+"(/| |$)")))return!0}return!1}function zh(W){return typeof W!="object"||W===null?{query:W}:Object.keys(W).reduce((de,Pe)=>{const Ie=W[Pe];if(typeof Ie!="object"||Ie===null)return de[Pe]=Ie,de;const Ve=zh(Ie);for(let Je in Ve)Ve.hasOwnProperty(Je)&&(de[`${Pe}_${Je}`]=Ve[Je]);return de},{})}const vy=(W,_)=>{const{rootStateKey:Z}=_.variable;if(!Z)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:bp(Ti.nS)};const{editor:de}=(0,Ds.nx)(Z,W);return{extended:bp(de)}},Ey={initQueryVariableEditor:gy,changeQueryVariableDataSource:_h,changeQueryVariableQuery:py,changeVariableMultiValue:dr.TI},yy=(0,Zo.connect)(vy,Ey);class Dy extends a.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=_=>{this.props.onPropChange({propName:"datasource",propValue:_.isDefault?null:(0,yh.p$)(_)})},this.onLegacyQueryChange=async(_,Z)=>{this.props.variable.query!==_&&this.props.changeQueryVariableQuery((0,Ca.jX)(this.props.variable),_,Z)},this.onQueryChange=async _=>{if(this.props.variable.query!==_){let Z="";_&&_.hasOwnProperty("query")&&typeof _.query=="string"&&(Z=_.query),this.props.changeQueryVariableQuery((0,Ca.jX)(this.props.variable),_,Z)}},this.onRegExBlur=async _=>{const Z=_.currentTarget.value;this.props.variable.regex!==Z&&this.props.onPropChange({propName:"regex",propValue:Z,updateOptions:!0})},this.onRefreshChange=_=>{this.props.onPropChange({propName:"refresh",propValue:_})},this.onSortChange=async _=>{this.props.onPropChange({propName:"sort",propValue:_.value,updateOptions:!0})},this.onMultiChange=_=>{this.props.onPropChange({propName:"multi",propValue:_.currentTarget.checked})},this.onIncludeAllChange=_=>{this.props.onPropChange({propName:"includeAll",propValue:_.currentTarget.checked})},this.onAllValueChange=_=>{this.props.onPropChange({propName:"allValue",propValue:_.currentTarget.value})}}async componentDidMount(){await this.props.initQueryVariableEditor((0,Ca.jX)(this.props.variable))}componentDidUpdate(_){_.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,Ca.jX)(this.props.variable),this.props.variable.datasource)}render(){const{extended:_,variable:Z}=this.props;if(!_||!_.dataSource||!_.VariableQueryEditor)return null;const de=(0,ti.jG)().timeRange();return a.createElement(ly.u,{datasource:Z.datasource??void 0,onDataSourceChange:this.onDataSourceChange,query:Z.query,onQueryChange:this.onQueryChange,onLegacyQueryChange:this.onLegacyQueryChange,timeRange:de,regex:Z.regex,onRegExChange:this.onRegExBlur,sort:Z.sort,onSortChange:this.onSortChange,refresh:Z.refresh,onRefreshChange:this.onRefreshChange,isMulti:Z.multi,includeAll:Z.includeAll,allValue:Z.allValue??"",onMultiChange:this.onMultiChange,onIncludeAllChange:this.onIncludeAllChange,onAllValueChange:this.onAllValueChange})}}const by=yy(Dy),Py=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:z0,reducer:G0,picker:Lc(),editor:by,dependsOn:(W,_)=>(0,Ca.wJ)(W.query,W.datasource?.uid,W.regex,_.name),setValue:async(W,_,Z=!1)=>{await(0,Ms.JD)((0,dr.t9)((0,Ca.jX)(W),_,Z))},setValueFromUrl:async(W,_)=>{await(0,Ms.JD)((0,dr.x7)((0,Ca.jX)(W),_))},updateOptions:async(W,_)=>{await(0,Ms.JD)(fy((0,Ca.jX)(W),_))},getSaveModel:W=>{const{index:_,id:Z,state:de,global:Pe,queryValue:Ie,rootStateKey:Ve,...Je}=(0,h.cloneDeep)(W);return W.refresh!==Lo.CO.never?{...Je,options:[]}:Je},getValueForUrl:W=>(0,Ca.ML)(W)?$r.Zm:W.current.value}),Cy=()=>({id:"system",description:"",name:"system",initialState:{...Lo.Vg,type:"system",hide:Lo.zL.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:vr.Gu.Done},reducer:W=>W,picker:null,editor:null,dependsOn:()=>!1,setValue:async(W,_,Z=!1)=>{},setValueFromUrl:async(W,_)=>{},updateOptions:async W=>{},getSaveModel:W=>({}),getValueForUrl:W=>""});var Ty=e(58975),Sy=e(14329);function My({onPropChange:W,variable:{query:_}}){const Z=(0,a.useCallback)((Ie,Ve)=>{Ie.preventDefault(),W({propName:"originalQuery",propValue:Ie.currentTarget.value,updateOptions:!1}),W({propName:"query",propValue:Ie.currentTarget.value,updateOptions:Ve})},[W]),de=(0,a.useCallback)(Ie=>Z(Ie,!1),[Z]),Pe=(0,a.useCallback)(Ie=>Z(Ie,!0),[Z]);return a.createElement(a.Fragment,null,a.createElement(Ty.Y,null,"Text options"),a.createElement(Sy._,{value:_,name:"Default value",placeholder:"default value, if any",onChange:de,onBlur:Pe,width:30,testId:Zs.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function xy({variable:W,onVariableChange:_,readOnly:Z}){const de=(0,Bn.useDispatch)(),[Pe,Ie]=(0,a.useState)(W.current.value);(0,a.useEffect)(()=>{Ie(W.current.value)},[W]);const Ve=(0,a.useCallback)(()=>{if(!W.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(W.current.value!==Pe){if(de((0,xs.kb)(W.rootStateKey,(0,ki.QP)((0,Ca.qD)({id:W.id,type:W.type},{propName:"query",propValue:Pe})))),_){_({...W,current:(0,Fh.R)(W.current)?{}:{...W.current,value:Pe}});return}xc.B.get(W.type).updateOptions(W)}},[W,Pe,de,_]),Je=(0,a.useCallback)(Dt=>Ie(Dt.target.value),[Ie]),qe=Dt=>Ve(),dt=Dt=>{Dt.keyCode===13&&(Dt.preventDefault(),Ve())};return a.createElement(Me.p,{type:"text",value:Pe,onChange:Je,onBlur:qe,disabled:Z,onKeyDown:dt,placeholder:(0,Qa.t)("variable.textbox.placeholder","Enter variable value"),id:$r.qz+W.id})}const Oy={...Lo.Vg,type:"textbox",query:"",current:{},options:[],originalQuery:null},kh=(0,xo.Z0)({name:"templating/textbox",initialState:Ac.j,reducers:{createTextBoxOptions:(W,_)=>{const Z=(0,Ds.Fs)(W,_.payload.id);if(Z.type!=="textbox")return;const de={text:Z.query.trim(),value:Z.query.trim(),selected:!1};Z.options=[de],Z.current=de}}}),Iy=kh.reducer,{createTextBoxOptions:Ay}=kh.actions,Ry=W=>async(_,Z)=>{const{rootStateKey:de,type:Pe}=W;_((0,xs.kb)(de,Ay((0,Ca.qD)(W))));const Ie=(0,Ds.dn)(W,Z());Ie.type==="textbox"&&await xc.B.get(Pe).setValue(Ie,Ie.options[0],!0)},Ly=(W,_)=>async(Z,de)=>{const{rootStateKey:Pe}=W,Ie=(0,Ds.dn)(W,de());if(Ie.type!=="textbox")return;const Ve=(0,Ca.QT)(_);Z((0,xs.kb)(Pe,(0,ki.QP)((0,Ca.qD)(Ie,{propName:"query",propValue:Ve})))),await Z((0,dr.x7)((0,Ca.jX)(Ie),Ve))},By=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Oy,reducer:Iy,picker:xy,editor:My,dependsOn:(W,_)=>!1,setValue:async(W,_,Z=!1)=>{await(0,Ms.JD)((0,dr.t9)((0,Ca.jX)(W),_,Z))},setValueFromUrl:async(W,_)=>{await(0,Ms.JD)(Ly((0,Ca.jX)(W),_))},updateOptions:async W=>{await(0,Ms.JD)(Ry((0,Ca.jX)(W)))},getSaveModel:(W,_)=>{const{index:Z,id:de,state:Pe,global:Ie,originalQuery:Ve,rootStateKey:Je,...qe}=(0,h.cloneDeep)(W);if(W.query!==Ve&&!_){const dt=Ve??"",Dt={selected:!1,text:dt,value:dt};return{...qe,query:dt,current:Dt,options:[Dt]}}return qe},getValueForUrl:W=>W.current.value,beforeAdding:W=>({...(0,h.cloneDeep)(W),originalQuery:W.query})});var Uy=e(51066),Ip=e(55314),Ap=e(72686),Rp=e(249),Ny=e(91219);const wy={navBarTree:Ny.I_,navIndex:lc._h,appNotifications:kd.g5};var Fy=e(44672),Br=e(88467),Ur=e(23770);const Wy=(0,Ic.combineReducers)({dataSources:(0,Br.Xw)("dataSources",Ur.DC,({rulesSourceName:W})=>W).reducer,promRules:(0,Br.Xw)("promRules",Ur.mB,({rulesSourceName:W})=>W).reducer,rulerRules:(0,Br.Xw)("rulerRules",Ur.eB,({rulesSourceName:W})=>W).reducer,silences:(0,Br.Xw)("silences",Ur.ly,W=>W).reducer,ruleForm:(0,Ic.combineReducers)({saveRule:(0,Br.J7)("saveRule",Ur._$).reducer,existingRule:(0,Br.J7)("existingRule",Ur.pT).reducer}),grafanaNotifiers:(0,Br.J7)("grafanaNotifiers",Ur.mF).reducer,saveAMConfig:(0,Br.J7)("saveAMConfig",Ur.RW).reducer,deleteAMConfig:(0,Br.J7)("deleteAMConfig",Ur.nO).reducer,updateSilence:(0,Br.J7)("updateSilence",Ur.a7).reducer,amAlerts:(0,Br.Xw)("amAlerts",Ur.El,W=>W).reducer,folders:(0,Br.Xw)("folders",Ur.Tp,W=>W).reducer,amAlertGroups:(0,Br.Xw)("amAlertGroups",Ur.D3,W=>W).reducer,testReceivers:(0,Br.J7)("testReceivers",Ur.bO).reducer,updateLotexNamespaceAndGroup:(0,Br.J7)("updateLotexNamespaceAndGroup",Ur.LU).reducer,externalAlertmanagers:(0,Ic.combineReducers)({alertmanagerConfig:(0,Br.J7)("alertmanagerConfig",Ur.ef).reducer,discoveredAlertmanagers:(0,Br.J7)("discoveredAlertmanagers",Ur.IX).reducer}),managedAlertStateHistory:(0,Br.J7)("managedAlertStateHistory",Ur.JH).reducer});var Ky=e(55907);const $y={items:[],searchQuery:"",isLoading:!1},Vy={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function _y(W,_){const Z=Ky.A.getStateDisplayModel(_),de={...W,stateText:Z.text,stateIcon:Z.iconClass,stateClass:Z.stateClass,stateAge:(0,g.KQ)(W.newStateDate).fromNow(!0)};return de.state!=="paused"&&(de.executionError&&(de.info="Execution Error: "+de.executionError),de.evalData&&de.evalData.noData&&(de.info="Query returned no data")),de}const Hh=(0,xo.Z0)({name:"alertRules",initialState:$y,reducers:{loadAlertRules:W=>({...W,isLoading:!0}),loadedAlertRules:(W,_)=>{const de=_.payload.map(Pe=>_y(Pe,Pe.state));return{...W,items:de,isLoading:!1}},setSearchQuery:(W,_)=>({...W,searchQuery:_.payload})}}),jh=(0,xo.Z0)({name:"notificationChannel",initialState:Vy,reducers:{setNotificationChannels:(W,_)=>({...W,notificationChannelTypes:Gy(_.payload),notifiers:_.payload}),notificationChannelLoaded:(W,_)=>{const Z=_.payload,Pe=W.notifiers.find(Ie=>Ie.type===Z.type).options.filter(Ie=>Ie.secure);return Pe.length>0&&Pe.some(Ie=>Z.settings[Ie.propertyName]!=="")?jy(W,_.payload,Pe):{...W,notificationChannel:Z}},resetSecureField:(W,_)=>({...W,notificationChannel:{...W.notificationChannel,secureFields:{...W.notificationChannel.secureFields,[_.payload]:!1}}})}}),{loadAlertRules:UD,loadedAlertRules:ND,setSearchQuery:wD}=Hh.actions,{setNotificationChannels:FD,notificationChannelLoaded:WD,resetSecureField:KD}=jh.actions,zy=Hh.reducer,ky=jh.reducer,Hy={alertRules:zy,notificationChannel:ky,unifiedAlerting:Wy};function jy(W,_,Z){const de={},Pe={};return Z.forEach(Ie=>{Pe[Ie.propertyName]=_.settings[Ie.propertyName],de[Ie.propertyName]=""}),{...W,notificationChannel:{..._,settings:{..._.settings,...de},secureSettings:{...Pe}}}}function Gy(W){return W.map(_=>({value:_.type,label:_.name,..._,typeName:_.type})).sort((_,Z)=>_.name>Z.name?1:-1)}var Qy=e(93584),Yy=e(20604),Jy=e(79763),Xy=e(53466),Zy=e(28601),qy=e(36227),eD=e(54650),tD=e(40823),nD=e(88264),aD=e(10943),sD=e(80095),rD=e(31326),oD=e(81862),iD=e(1936),lD=e(8212),cD=e(34655),dD=e(87617),Lp=e(49962),uD=e(97007);const mD={...wy,...Hy,...cD.Ay,...Qy.Ay,...eD.Ay,...Zy.Ay,...ph.Ay,...qy.Ay,...dD.Ay,...iD.Ay,...oD.Ay,...tD.Ay,...aD.Ay,...Jy.Ay,...Fy.Ay,...nD.Ay,...Xy.Ay,...sD.Ay,...xs.Ay,...lD.Ay,...Yy.Ay,plugins:rD.Ff,[Lp.H.reducerPath]:Lp.H.reducer,[Ap.Sm.reducerPath]:Ap.Sm.reducer,[Ip.cU.reducerPath]:Ip.cU.reducer,[Rp.AL.reducerPath]:Rp.AL.reducer},Gh={},$D=W=>{Object.assign(Gh,W)},fD=()=>{const W=(0,Ic.combineReducers)({...mD,...Gh});return(_,Z)=>{if(Z.type!==uD.N.type)return W(_,Z);const{cleanupAction:de}=Z.payload;return de(_),W(_,Z)}};function VD(W){addReducer(W)}const gD=(0,xo.Nc)();function pD(W){const _=(0,xo.U1)({reducer:fD(),middleware:Z=>Z({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(gD.middleware,Lp.H.middleware,Ap.Sm.middleware,Ip.cU.middleware,Rp.AL.middleware),devTools:!1,preloadedState:{navIndex:(0,lc.s2)(),...W}});return(0,Uy.$k)(_.dispatch),(0,Ms.k3)(_),_}y().move=J.b;const Qh=e(39572),fu=Qh.keys().map(W=>Qh(W));class hD{async init(){try{parent.postMessage("GrafanaAppInit","*");const _=(0,Qa.JL)(z.Ay.bootData.user.language);_.then(({language:Pt})=>(0,z._R)({language:Pt})),(0,M.u5)(Ya.IB),yD(),ea(),(0,Jl.j)("frontend_app_init"),z.Ay.featureToggles.betterPageScrolling||DD(),(0,g.xS)(z.Ay.bootData.user.locale),(0,g.$D)(z.Ay.bootData.user.weekStart),(0,L.Y)(Uv.m),(0,V.l)(Jp),(0,w.e)(Bv.a),(0,O.T)(S.Ny),(0,p.p)(Ev),(0,b.G)(()=>z.Ay.bootData.user.timezone),Lv(),(0,vv.initAuthConfig)(),(0,x.H8)(lr.A),await _,vD(),pD(),ED(),hv(),P.D.setInit(Gf.H),P.G.setInit(Gf.u),C.h.setInit(vu),xc.B.setInit(()=>[Py(),VE(),By(),AE(),ny(),iy(),N0(),Cy()]),D.l.setInit(yu),sa(),(0,A.HC)(()=>new o0),lE(new iE),(0,A.pC)(Dp.BN),(0,R.se)({importPanelPlugin:hh.TV,getPanelPluginFromCache:hh.PY}),T.I.initialize({config:z.Ay,getTimeRangeForUrl:(0,ti.jG)().timeRangeForUrl,getVariablesUrlParams:ay.z}),document.addEventListener("click",Na);const Z=new i.xq;Z.init(z.Ay.datasources,z.Ay.defaultDatasource),(0,B.h)(Z),l0();let de=[];Us.TP.user.orgRole!==""&&(de=await e0(z.Ay.apps));const Pe=kv([{pluginId:"grafana",extensionConfigs:Yv()},...de]),Ie=Pt=>Jv({...Pt,registry:Pe});(0,U.cE)(Ie);const Ve=S.Ny.getSearchObject(),Je=new rf,qe=new mv(S.Ny,Je),dt=new ss;dt.start(),Je.setKioskModeFromUrl(Ve.kiosk);try{(0,c0.W1)()}catch(Pt){console.warn("Failed to clean up old expanded folders",Pt)}this.context={backend:Ya.IB,location:S.Ny,chrome:Je,keybindings:qe,newAssetsChecker:dt,config:z.Ay},(0,F._)(Er.ni),(0,v.H)(document.getElementById("reactRoot")).render(a.createElement(Yp,{app:this}))}catch(_){console.error("Failed to start Grafana",_),window.__grafana_load_failed()}finally{(0,Jl.z)("frontend_app_init")}}}function vD(){fu.length>0&&fu[0].addExtensionReducers()}function ED(){fu.length>0&&fu[0].init()}function yD(){(0,K.H2)(new gl({debug:!1})),window.addEventListener("load",W=>{const _="frontend_boot_load_time_seconds";performance&&(performance.mark(_),Bc("first-paint","frontend_boot_","_time_seconds"),Bc("first-contentful-paint","frontend_boot_","_time_seconds"),Bc(_),Bc("frontend_boot_js_done_time_seconds"),Bc("frontend_boot_css_time_seconds"))}),Us.TP.user.orgRole!==""&&(0,K.pl)(new Ao({})),z.Ay.grafanaJavascriptAgent.enabled&&(0,K.pl)(new ov({...z.Ay.grafanaJavascriptAgent,app:{version:z.Ay.buildInfo.version,environment:z.Ay.buildInfo.env},buildInfo:z.Ay.buildInfo,user:{id:String(z.Ay.bootData.user?.id),email:z.Ay.bootData.user?.email}})),z.Ay.googleAnalyticsId&&(0,K.pl)(new pl({googleAnalyticsId:z.Ay.googleAnalyticsId})),z.Ay.googleAnalytics4Id&&(0,K.pl)(new Rr({googleAnalyticsId:z.Ay.googleAnalytics4Id,googleAnalytics4SendManualPageViews:z.Ay.googleAnalytics4SendManualPageViews})),z.Ay.rudderstackWriteKey&&z.Ay.rudderstackDataPlaneUrl&&(0,K.pl)(new Sc({writeKey:z.Ay.rudderstackWriteKey,dataPlaneUrl:z.Ay.rudderstackDataPlaneUrl,user:z.Ay.bootData.user,sdkUrl:z.Ay.rudderstackSdkUrl,configUrl:z.Ay.rudderstackConfigUrl,integrationsUrl:z.Ay.rudderstackIntegrationsUrl,buildInfo:z.Ay.buildInfo})),z.Ay.applicationInsightsConnectionString&&(0,K.pl)(new _i({connectionString:z.Ay.applicationInsightsConnectionString,endpointUrl:z.Ay.applicationInsightsEndpointUrl}))}function DD(){(0,N.X)()>0&&document.body.classList.add("no-overlay-scrollbar")}function Bc(W,_="",Z=""){const de=y().first(performance.getEntriesByName(W));if(de){const Pe=de.name.replace(/-/g,"_");(0,Yl.n)(`${_}${Pe}${Z}`,Math.round(de.startTime)/1e3)}}const bD=new hD;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,bD.init()},60021:(Y,I,e)=>{"use strict";e.d(I,{Or:()=>n,Oz:()=>o,RC:()=>t,ho:()=>r,nA:()=>s});var t=(m=>(m.Active="active",m.Expired="expired",m.Pending="pending",m))(t||{}),n=(m=>(m.Unprocessed="unprocessed",m.Active="active",m.Suppressed="suppressed",m))(n||{}),r=(m=>(m.equal="=",m.notEqual="!=",m.regex="=~",m.notRegex="!~",m))(r||{}),s=(m=>(m.Internal="internal",m.External="external",m.All="all",m))(s||{}),o=(m=>(m.cortex="cortex",m.mimir="mimir",m.prometheus="prometheus",m))(o||{})},91621:(Y,I,e)=>{"use strict";e.d(I,{Dw:()=>m,Rx:()=>r,_W:()=>o,d$:()=>n});const t={statistics:[]};var n=(i=>(i[i.Query=1]="Query",i[i.Search=0]="Search",i))(n||{}),r=(i=>(i[i.Builder=0]="Builder",i[i.Code=1]="Code",i))(r||{});const s={parameters:[]};var o=(i=>(i.And="and",i.Function="function",i.FunctionParameter="functionParameter",i.GroupBy="groupBy",i.Operator="operator",i.Or="or",i.Property="property",i))(o||{}),m=(i=>(i.String="string",i))(m||{});const l={logGroupNames:[],logGroups:[],statsGroups:[]}},25640:(Y,I,e)=>{"use strict";e.d(I,{Rx:()=>t.Rx,YZ:()=>n,b4:()=>r,d$:()=>t.d$});var t=e(91621),n=(s=>(s.Scheduled="Scheduled",s.Running="Running",s.Complete="Complete",s.Failed="Failed",s.Cancelled="Cancelled",s.Timeout="Timeout",s))(n||{}),r=(s=>(s.Regions="regions",s.Namespaces="namespaces",s.Metrics="metrics",s.DimensionKeys="dimensionKeys",s.DimensionValues="dimensionValues",s.EBSVolumeIDs="ebsVolumeIDs",s.EC2InstanceAttributes="ec2InstanceAttributes",s.ResourceArns="resourceARNs",s.Statistics="statistics",s.LogGroups="logGroups",s.Accounts="accounts",s))(r||{})},36666:(Y,I,e)=>{"use strict";e.d(I,{A:()=>O});var t=e(32196),n=e(16792),r=e(55127),s=e.n(r),o=e(96540),m=e(16817),l=e(52622),i=e(40845),c=e(67061),u=e(88575),f=e(88323),d=e(94354),E=e(15292),h=e(62930),y=e(2913),a=e(14792),v=e(63117),g=e(31193),b=e(65160),P=e(43854),C=e(45994);function D(p){return JSON.stringify(p)}function T(p,x){let A=x;return window.__grafanaSceneContext&&window.__grafanaSceneContext instanceof v.H$&&(A=window.__grafanaSceneContext.state.editPanel?.state.panelId),p===A}const M=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function O({data:p,query:x,onChange:A,onRunQuery:R}){const{value:B}=(0,m.A)(()=>(0,g.tR)().get()),U=(0,o.useMemo)(()=>(0,a.UA)().getCurrent()?.getPanelById(x.panelId??-124134),[x.panelId]),{value:F,loading:K}=(0,m.A)(async()=>{if(!U||!p)return[];const k=await(0,g.tR)().get(U.datasource);return Promise.all(U.targets.map(async ee=>{const X=ee.datasource?await(0,g.tR)().get(ee.datasource):k,j=X.getQueryDisplayText||D,ne=(0,b.E)(p,ee.refId)??p;return{refId:ee.refId,query:j(ee),name:X.name,img:X.meta.info.logos.small,data:ne.series,error:ne.error}}))},[p,U]),w=(0,o.useCallback)(k=>{A(k),R()},[A,R]),L=(0,o.useCallback)(k=>{w({...x,panelId:k})},[x,w]),V=(0,o.useCallback)(()=>{w({...x,withTransforms:!x.withTransforms})},[x,w]),N=(0,o.useCallback)(k=>{w({...x,topic:k?l.QR.Annotations:void 0})},[x,w]),z=(0,o.useCallback)(k=>{const ee=k.datasource??B,X=(0,g.tR)().getInstanceSettings(ee)?.name,j=k.targets.length;return`${j} ${s()("query",j)} to ${X}`},[B]),J=(0,a.UA)().getCurrent(),G=!!(x.withTransforms||U?.transformations?.length),H=(0,o.useMemo)(()=>J?.panels.filter(k=>y.Ay.panels[k.type]&&k.targets&&!T(k.id,J.panelInEdit?.id)&&k.datasource?.uid!==C.K).map(k=>({value:k.id,label:k.title??"Panel "+k.id,description:z(k),imgUrl:y.Ay.panels[k.type].info.logos.small}))??[],[J,z]),q=(0,i.of)(S),le=(0,n.Bi)();if(!J)return null;if(H.length<1)return o.createElement("p",{className:q.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const me=H.find(k=>k.value===x.panelId);return o.createElement(P.i,null,o.createElement(c.B,{direction:"column"},o.createElement(c.B,{gap:3},o.createElement(u.D,{label:"Source panel",description:"Use query results from another panel"},o.createElement(f.l6,{inputId:le,placeholder:"Choose panel",isSearchable:!0,options:H,value:me,onChange:k=>L(k.value)})),o.createElement(u.D,{label:"Data",description:"Use data or annotations from the panel"},o.createElement(d.z,{options:M,value:x.topic===l.QR.Annotations,onChange:N})),G&&o.createElement(u.D,{label:"Transform",description:"Apply transformations from the source panel"},o.createElement(E.K,{value:!!x.withTransforms,onChange:V}))),K?o.createElement(h.y,null):o.createElement(o.Fragment,null,F&&!!F.length&&o.createElement(u.D,{label:"Queries from panel"},o.createElement(c.B,{direction:"column"},F.map((k,ee)=>o.createElement(c.B,{key:ee,alignItems:"center",gap:1},o.createElement("div",null,k.refId),o.createElement("img",{src:k.img,alt:k.name,title:k.name,width:16}),o.createElement("div",null,k.query))))))))}function S(p){return{noQueriesText:(0,t.css)({padding:p.spacing(1.25)})}}},14348:(Y,I,e)=>{"use strict";e.d(I,{K:()=>l.K,kN:()=>i,mw:()=>c});var t=e(88483),n=e(52622),r=e(39070),s=e(43127),o=e(14792),m=e(34214),l=e(45994);function i(E){return E?typeof E=="string"?E===l.K:"meta"in E&&E.meta.name===l.K||E.uid===l.K:!1}function c(E,h){return new t.c(y=>{const a=(0,o.UA)().getCurrent(),v=u(E.queries);if(!v){y.next(f("Missing panel reference ID"));return}let g=a?.getPanelById(v,!0);if(g instanceof m.a||(g=new m.a(g)),!g){y.next(f("Unknown Panel: "+v));return}const b=g.getQueryRunner(),P=b.getData({withTransforms:!!h?.withTransforms,withFieldConfig:!1}).subscribe({next:C=>{h?.topic===n.QR.Annotations&&(C={...C,series:C.annotations??[],annotations:void 0}),y.next(C)}});if(!g.isInView&&g.refreshWhenInView||a?.otherPanelInFullscreen(g)){const{datasource:C,targets:D}=g,T={...E,datasource:C,panelId:v,queries:D};g.refreshWhenInView=!1,b.run(T)}return()=>{P.unsubscribe()}})}function u(E){if(!(!E||!E.length))return E[0].panelId}function f(E){return{state:r.Gu.Error,series:[],request:{},error:{message:E},timeRange:(0,s.E2)()}}var d=e(36666)},45994:(Y,I,e)=>{"use strict";e.d(I,{K:()=>t});const t="-- Dashboard --",n="dashboard"},90183:(Y,I,e)=>{"use strict";e.d(I,{i:()=>Be,o:()=>ve});var t=e(2543),n=e(65474),r=e(62467),s=e(44240),o=e(81160),m=e(89667),l=e(39070),i=e(55004),c=e(37471),u=e(78368),f=e(14236),d=e(26657),E=e(72574),h=e(78731),y=e(17172),a=e(19347),v=e(79056),g=e(14792),b=e(32196),P=e(96540),C=e(40845),D=e(84167),T=e(88575),M=e(88323),O=e(15292),S=e(99818),p=e(10154),x=e(68706),A=e(95093),R=e.n(A),B=e(91410),U=e(20333),F=e(55852),K=e(66864),w=e(17624),L=e(67459),V=e(79770),N=e(14578),z=e(87266),J=e(16797);const G="time-of-day-picker-panel",H=({minuteStep:Me=1,showHour:ke=!0,showSeconds:Se=!1,onChange:We,value:De,size:pe="auto",disabled:Ne,disabledHours:Le,disabledMinutes:He,disabledSeconds:je,placeholder:at,format:Ye="HH:mm",defaultValue:$e=void 0,allowEmpty:xe=!1,width:Fe})=>{const Ee=(0,C.of)(le),se=()=>Fe?(0,b.css)`
        width: ${Fe}px;
      `:(0,z.lH)()[pe];return P.createElement(V.A,{value:De,defaultValue:$e,onChange:ae=>We(ae),showHour:ke,showSecond:Se,format:Ye,allowEmpty:xe,className:(0,b.cx)(se(),Ee.input),popupClassName:(0,b.cx)(Ee.picker,G),minuteStep:Me,inputIcon:P.createElement(q,{wrapperStyle:Ee.caretWrapper}),disabled:Ne,disabledHours:Le,disabledMinutes:He,disabledSeconds:je,placeholder:at})},q=({wrapperStyle:Me=""})=>P.createElement("div",{className:Me},P.createElement(N.I,{name:"angle-down"})),le=Me=>{const ke=Me.components.input.background,Se=Me.v1.palette.black,We=Me.colors.background.secondary,De=Me.shape.radius.default,pe=Me.components.input.borderColor;return{caretWrapper:(0,b.css)`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${Me.colors.text.secondary};
    `,picker:(0,b.css)`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${ke};
        border-color: ${pe};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${Me.v1.palette.orange};
            border-radius: ${De};
          }

          &:hover {
            background: ${We};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${Me.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${Se};
        background-color: ${ke};
        border-color: ${pe};
        border-radius: ${De};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${ke};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:(0,b.css)`
      .rc-time-picker-input {
        background-color: ${ke};
        border-radius: ${De};
        border-color: ${pe};
        height: ${Me.spacing(4)};

        &:focus {
          ${(0,J.focusCss)(Me)}
        }

        &:disabled {
          background-color: ${Me.colors.action.disabledBackground};
          color: ${Me.colors.action.disabledText};
          border: 1px solid ${Me.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${Me.colors.text.secondary};
      }
    `}},me=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((Me,ke)=>({label:Me,value:ke+1})),k=({value:Me,onChange:ke})=>{const Se=(0,C.of)(ee),We=Date.now(),De=(0,B.QZ)(Me.timezone??"utc",We),pe=(0,g.UA)().getCurrent()?.getTimezone()===Me.timezone,[Ne,Le]=(0,P.useState)(!1),He=()=>{Le(!Ne)},je=ae=>{if(!ae)return;const fe=R()();if(ae){const Ce=ae.split(":");fe.set("hour",parseInt(Ce[0],10)),fe.set("minute",parseInt(Ce[1],10))}return fe},at=()=>{let ae="Everyday";return Me.fromDayOfWeek&&!Me.toDayOfWeek&&(ae=me[Me.fromDayOfWeek-1].label),ae},Ye=()=>{const ae=P.createElement(P.Fragment,null,P.createElement(L.U,{title:De?.name}),P.createElement(w.X,{timeZone:Me.timezone,timestamp:We}));return pe?P.createElement(P.Fragment,null,"Dashboard timezone (",ae,")"):ae},$e=(ae,fe)=>{const Ce=ae?ae.format("HH:mm"):void 0;ke(fe==="from"?{...Me,from:Ce}:{...Me,to:Ce})},xe=ae=>{ke({...Me,timezone:ae})},Fe=ae=>{const fe=ae?ae.value:void 0,Ce=ae?Me.toDayOfWeek:void 0;ke({...Me,fromDayOfWeek:fe,toDayOfWeek:Ce})},Ee=ae=>{ke({...Me,toDayOfWeek:ae?ae.value:void 0})},se=()=>Ne?P.createElement(U.U,{value:Me.timezone,includeInternal:!0,onChange:ae=>xe(ae),onBlur:()=>Le(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):P.createElement("div",{className:Se.timezoneContainer},P.createElement("div",{className:Se.timezone},Ye()),P.createElement(F.$n,{variant:"secondary",onClick:He,size:"sm"},"Change timezone"));return P.createElement(D.n,{className:Se.wrapper},P.createElement(T.D,{label:"From"},P.createElement(K.Gy,{spacing:"xs"},P.createElement(M.l6,{options:me,isClearable:!0,placeholder:"Everyday",value:Me.fromDayOfWeek??null,onChange:ae=>Fe(ae),width:20}),P.createElement(H,{value:je(Me.from),onChange:ae=>$e(ae,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),P.createElement(T.D,{label:"To"},P.createElement(K.Gy,{spacing:"xs"},(Me.fromDayOfWeek||Me.toDayOfWeek)&&P.createElement(M.l6,{options:me,isClearable:!0,placeholder:at(),value:Me.toDayOfWeek??null,onChange:ae=>Ee(ae),width:20}),P.createElement(H,{value:je(Me.to),onChange:ae=>$e(ae,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),P.createElement(T.D,{label:"Timezone"},se()))},ee=Me=>({wrapper:(0,b.css)({maxWidth:Me.spacing(60),marginBottom:Me.spacing(2)}),timezoneContainer:(0,b.css)`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:(0,b.css)`
      margin-right: 5px;
    `}),X="Enabling this returns annotations that match any of the tags specified below",j=P.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),ne=[{label:"Dashboard",value:x.St.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:x.St.Tags,description:"This will fetch any annotation events that match the tags filter"}],te=[{label:"Annotations & Alerts",value:x.nj.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:x.nj.TimeRegions,description:"Configure a repeating time region"}],oe=[10,50,100,200,300,500,1e3,2e3].map(Me=>({label:String(Me),value:Me}));function ie({query:Me,onChange:ke}){const Se=Me,{limit:We,matchAny:De,tags:pe,type:Ne,queryType:Le}=Se;let He=Le??x.nj.Annotations;const je=(0,P.useMemo)(()=>(0,g.UA)().dashboard?.getTimezone(),[]),at=(0,C.of)(ue),Ye=ae=>ke({...Se,type:ae.value}),$e=ae=>ke({...Se,limit:ae.value}),xe=ae=>ke({...Se,matchAny:ae.target.checked}),Fe=ae=>ke({...Se,tags:ae}),Ee=ae=>{const fe={...Se,queryType:ae.value};fe.queryType===x.nj.TimeRegions?fe.timeRegion||(fe.timeRegion={timezone:je}):delete fe.timeRegion,ke(fe)},se=ae=>{ke({...Se,timeRegion:ae})};return P.createElement(D.n,{className:at.container},P.createElement(T.D,{label:"Query type"},P.createElement(M.l6,{inputId:"grafana-annotations__query-type",options:te,value:He,onChange:Ee})),He===x.nj.Annotations&&P.createElement(P.Fragment,null,P.createElement(T.D,{label:"Filter by"},P.createElement(M.l6,{inputId:"grafana-annotations__filter-by",options:ne,value:Ne,onChange:Ye})),P.createElement(T.D,{label:"Max limit"},P.createElement(M.l6,{inputId:"grafana-annotations__limit",width:16,options:oe,value:We,onChange:$e})),Ne===x.St.Tags&&P.createElement(P.Fragment,null,P.createElement(T.D,{label:"Match any",description:X},P.createElement(O.d,{id:"grafana-annotations__match-any",value:De,onChange:xe})),P.createElement(T.D,{label:"Tags",description:j},P.createElement(S.$,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:Fe,tagOptions:p.vy,tags:pe??[]})))),He===x.nj.TimeRegions&&Se.timeRegion&&P.createElement(k,{value:Se.timeRegion,onChange:se}))}const ue=Me=>({container:(0,b.css)({maxWidth:Me.spacing(60),marginBottom:Me.spacing(2)})});var be=e(11261),ge=e(94515);function re(Me,ke,Se,We){if(!ke)return;const De=(0,ge.iU)(ke,Se);if(!De.length)return;const pe=[],Ne=[],Le=[],He=ke.timezone??We;for(const je of De){let at=je.from,Ye=je.to;const $e=(0,B.QZ)(He,at);if($e){const xe=$e.offsetInMins*60*1e3;at+=xe,Ye+=xe}pe.push(at),Ne.push(Ye),Le.push(Me)}return{fields:[{name:"time",type:be.PU.time,values:pe,config:{}},{name:"timeEnd",type:be.PU.time,values:Ne,config:{}},{name:"text",type:be.PU.string,values:Le,config:{}}],length:pe.length}}let ye=100;class Be extends d.iy{constructor(ke){super(ke),this.annotations={QueryEditor:ie,prepareAnnotation(Se){return Se.target=Se.target??{type:Se.type??x.St.Dashboard,limit:Se.limit??100,tags:Se.tags??[],matchAny:Se.matchAny??!1},Se},prepareQuery(Se){let We;if((0,t.isString)(Se.datasource)){const Ne=(0,v.og)(Se.datasource,{returnDefaultAsNull:!1});Ne&&(We=Ne)}else We=Se.datasource;const{filter:De,...pe}=Se;return{...pe,refId:Se.name,queryType:x.nj.Annotations,datasource:We}}}}getDefaultQuery(){return{queryType:x.nj.RandomWalk}}query(ke){const Se=[],We=[],De=(0,E.w)();for(const pe of ke.targets){if(pe.queryType===x.nj.Annotations)return(0,n.H)(this.getAnnotations({range:ke.range,rangeRaw:ke.range.raw,annotation:pe,dashboard:(0,g.UA)().getCurrent()}));if(!pe.hide){if(pe.queryType===x.nj.Snapshot){Se.push((0,r.of)({data:(pe.snapshot??[]).map(Ne=>(0,m.or)(Ne)),state:l.Gu.Done}));continue}if(pe.queryType===x.nj.TimeRegions){const Ne=re("",pe.timeRegion,ke.range,ke.timezone);Se.push((0,r.of)({data:Ne?[Ne]:[],state:l.Gu.Done}));continue}if(pe.queryType===x.nj.LiveMeasurements){let Ne=De.replace(pe.channel,ke.scopedVars);const{filter:Le}=pe,He=(0,i.DG)(Ne);if(!(0,i.aj)(He))continue;const je={maxLength:ke.maxDataPoints??500};pe.buffer?(je.maxDelta=pe.buffer,je.maxLength=je.maxLength*2):ke.rangeRaw?.to==="now"&&(je.maxDelta=ke.range.to.valueOf()-ke.range.from.valueOf()),Se.push((0,h.oF)().getDataStream({key:`${ke.requestId}.${ye++}`,addr:He,filter:Le,buffer:je}))}else pe.queryType||(pe.queryType=x.nj.RandomWalk),We.push(pe)}}return We.length&&Se.push(super.query({...ke,targets:We})),Se.length?Se.length===1?Se[0]:(0,s.h)(...Se):(0,r.of)()}listFiles(ke,Se){return this.query({targets:[{refId:"A",queryType:x.nj.List,path:ke}],maxDataPoints:Se}).pipe((0,o.T)(We=>{const De=We.data[0]??new c.k;return new u.R(De)}))}metricFindQuery(){return Promise.resolve([])}async getAnnotations(ke){const Se=ke.annotation.target;if(Se?.queryType===x.nj.TimeRegions){const Le=re(ke.annotation.name,Se.timeRegion,ke.range,(0,g.UA)().getCurrent()?.timezone);return Promise.resolve({data:Le?[Le]:[]})}const We=ke.annotation,De=We.target,pe={from:ke.range.from.valueOf(),to:ke.range.to.valueOf(),limit:De.limit,tags:De.tags,matchAny:De.matchAny};if(De.type===x.St.Dashboard){if(!ke.dashboard?.uid)return Promise.resolve({data:[]});pe.dashboardUID=ke.dashboard.uid,delete pe.tags}else{if(!Array.isArray(De.tags)||De.tags.length===0)return Promise.resolve({data:[]});const Le=(0,E.w)(),He="__delimiter__",je=[];for(const at of pe.tags){const Ye=Le.replace(at,{},$e=>typeof $e=="string"?$e:$e.join(He));for(const $e of Ye.split(He))je.push($e)}pe.tags=je}const Ne=await(0,y.AI)().get("/api/annotations",pe,`grafana-data-source-annotations-${We.name}-${ke.dashboard?.uid}`);return{data:[(0,f.Vc)(Ne)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function ve(){return await(0,a.l)().get("-- Grafana --")}},68706:(Y,I,e)=>{"use strict";e.d(I,{St:()=>s,dx:()=>r,nj:()=>t,uJ:()=>n});var t=(o=>(o.LiveMeasurements="measurements",o.Annotations="annotations",o.Snapshot="snapshot",o.TimeRegions="timeRegions",o.RandomWalk="randomWalk",o.List="list",o.Read="read",o.Search="search",o))(t||{});const n={refId:"A",queryType:"randomWalk"},r={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var s=(o=>(o.Dashboard="dashboard",o.Tags="tags",o))(s||{})},90478:(Y,I,e)=>{"use strict";e.d(I,{H:()=>l,j:()=>c});var t=e(89667),n=e(28138),r=e(57220),s=e(40489),o=e(28444),m=e(68706);function l(u,f){return new Promise(d=>{if(u.datasource?.uid===r.vv){i(f,u),d(!0);return}n.A.publish(new o.bY({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{i(f,u),d(!0)},onDismiss:()=>{d(!1)}}))})}function i(u,f){const d=u.map(h=>(0,t.Nw)(h)),E={refId:"A",queryType:m.nj.Snapshot,snapshot:d,datasource:{uid:r.vv}};f.updateQueries({dataSource:{uid:r.vv},queries:[E]}),f.refresh()}function c(u){return(f,d,E)=>{s.vI(f).subscribe(async h=>{const y=[];h.dataFrames.forEach(a=>{const v=(0,t.Nw)(a);y.push(v)}),u({...m.dx,snapshot:y,file:h.file},d)})}}},71713:(Y,I,e)=>{"use strict";e.d(I,{AW:()=>m,Ay:()=>i,RQ:()=>s,dZ:()=>t,fV:()=>o,vB:()=>l});const t=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],n=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],r=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],s=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],o=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],m=[...t,...s,...o],l={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...n,...r].map(c=>c.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${m.map(c=>c.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},i=l},43269:(Y,I,e)=>{"use strict";e.d(I,{HD:()=>m,ti:()=>s,U3:()=>n,ie:()=>l,Q$:()=>r});var t=(i=>(i.Builder="builder",i.Code="code",i))(t||{}),n=(i=>(i.Instant="instant",i.Range="range",i.Stream="stream",i))(n||{}),r=(i=>(i.DataSample="dataSample",i.InfiniteScroll="infiniteScroll",i.LogsSample="logsSample",i.LogsVolume="logsVolume",i))(r||{}),s=(i=>(i.Backward="backward",i.Forward="forward",i))(s||{}),o=(i=>(i.Stream="streams",i.Vector="vector",i.Matrix="matrix",i))(o||{}),m=(i=>(i.Indexed="I",i.StructuredMetadata="S",i.Parsed="P",i))(m||{}),l=(i=>(i[i.LabelNames=0]="LabelNames",i[i.LabelValues=1]="LabelValues",i))(l||{})},14678:(Y,I,e)=>{"use strict";e.d(I,{N8:()=>g,qM:()=>v,uv:()=>a});var t=e(2543),n=e.n(t),r=e(62467),s=e(65474),o=e(45650),m=e(69862),l=e(81160),i=e(9084),c=e(66847),u=e(93031),f=e(71030),d=e(40187),E=e(39070),h=e(19347),y=e(12091);const a="-- Mixed --",v=(P,C)=>`mixed-${P}-${C||""}`;class g extends d.mA{constructor(C){super(C)}query(C){const D=C.targets.filter(O=>O.datasource?.uid!==a);if(!D.length)return(0,r.of)({data:[]});const T=(0,t.groupBy)(D,"datasource.uid"),M=[];for(const O in T){const S=T[O];M.push({datasource:(0,h.l)().get(S[0].datasource,C.scopedVars),targets:S})}return M.length?this.batchQueries(M,C):(0,r.of)({data:[]})}batchQueries(C,D){const T=C.filter(this.isQueryable).map((M,O)=>(0,s.H)(M.datasource).pipe((0,m.Z)(S=>{const p=(0,t.cloneDeep)(D);return p.requestId=v(O,p.requestId),p.targets=M.targets,(0,s.H)(S.query(p)).pipe((0,l.T)(x=>({...x,data:x.data||[],state:E.Gu.Loading,key:v(O,x.key)})),(0,i.$)(),(0,c.W)(x=>(x=(0,y.u)(x),x.message=`${S.name}: ${x.message}`,(0,r.of)([{data:[],state:E.Gu.Error,error:x,key:v(O,p.requestId)}]))))})));return(0,o.p)(T).pipe(b(),(0,l.T)(this.finalizeResponses),(0,u.U)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(C){return C&&Array.isArray(C.targets)&&C.targets.length>0}finalizeResponses(C){const{length:D}=C;if(D===0)return C;const T=C.find(M=>M.state===E.Gu.Error);return T?C.push(T):C[D-1].state=E.Gu.Done,C}}function b(){return(0,f.T)((P,C)=>C.reduce((D,T)=>(D.push.apply(D,T),D),P),[])}},87324:(Y,I,e)=>{"use strict";e.d(I,{t:()=>s});var t=e(21489),n=e(47891),r=e(65405);function s(c,u,f,d="="){if(!u||!f)throw new Error("Need label to add to query.");const E=o(c);if(!E.length)return c;const h=m(u,f,d);return l(c,E,h)}function o(c){const u=t.K3.parse(c),f=[];return u.iterate({enter:({to:d,from:E,type:h})=>{if(h.id===t.Fb){const y=(0,r.u)(c.substring(E,d));return f.push({query:y.query,from:E,to:d}),!1}}}),f}function m(c,u,f){const d=u===1/0?"+Inf":u.toString();return{label:c,op:f,value:d}}function l(c,u,f){const d=new n.l;let E="",h=0;for(let y=0;y<u.length;y++){const a=u[y],v=y===u.length-1,g=c.substring(h,a.from),b=v?c.substring(a.to):"";i(a.query.labels,f)||a.query.labels.push(f);const P=d.renderQuery(a.query);E+=g+P+b,h=a.to}return E}function i(c,u){return c.find(f=>f.label===u.label&&f.value===u.value)}},60042:(Y,I,e)=>{"use strict";e.d(I,{A:()=>K});var t=e(32196),n=e(96540),r=e(14236),s=e(13544),o=e(14110),m=e(14578),l=e(55852),i=e(40845),c=e(61680);function u(w){return typeof w=="object"&&w!==null&&"isCanceled"in w}const f=w=>{let L=!1;return{promise:new Promise((N,z)=>{const J={isCanceled:!0};w.then(G=>L?z(J):N(G)),w.catch(G=>z(L?J:G))}),cancel(){L=!0}}};var d=e(45889),E=e(97222),h=e(3911),y=e(39558),a=e(66864),v=e(60029),g=e(10354),b=e(54438);const P="{}",C="__name__",D=25;function T(w){let L="";const V=[];for(const N of w)if((N.name===C||N.selected)&&N.values&&N.values.length>0){const z=N.values.filter(J=>J.selected).map(J=>J.name);z.length>1?V.push(`${N.name}=~"${z.map(d.Cs).join("|")}"`):z.length===1&&(N.name===C?L=z[0]:V.push(`${N.name}="${(0,d.Qn)(z[0])}"`))}return[L,"{",V.join(","),"}"].join("")}function M(w,L,V){return w.map(N=>{const z=L[N.name];if(z){let J;if(N.name===V&&N.values)J=N.values;else{const G=new Set(N.values?.filter(H=>H.selected).map(H=>H.name)||[]);J=z.map(H=>({name:H,selected:G.has(H)}))}return{...N,loading:!1,values:J,hidden:!z,facets:J.length}}return{...N,loading:!1,hidden:!z,values:void 0,facets:0}})}const O=(0,h.N)(w=>({wrapper:(0,t.css)`
    background-color: ${w.colors.background.secondary};
    padding: ${w.spacing(1)};
    width: 100%;
  `,list:(0,t.css)`
    margin-top: ${w.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
    align-content: flex-start;
  `,section:(0,t.css)`
    & + & {
      margin: ${w.spacing(2)} 0;
    }
    position: relative;
  `,selector:(0,t.css)`
    font-family: ${w.typography.fontFamilyMonospace};
    margin-bottom: ${w.spacing(1)};
  `,status:(0,t.css)`
    padding: ${w.spacing(.5)};
    color: ${w.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:(0,t.css)`
    opacity: 1;
  `,error:(0,t.css)`
    color: ${w.colors.error.main};
  `,valueList:(0,t.css)`
    margin-right: ${w.spacing(1)};
    resize: horizontal;
  `,valueListWrapper:(0,t.css)`
    border-left: 1px solid ${w.colors.border.medium};
    margin: ${w.spacing(1)} 0;
    padding: ${w.spacing(1)} 0 ${w.spacing(1)} ${w.spacing(1)};
  `,valueListArea:(0,t.css)`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${w.spacing(1)};
  `,valueTitle:(0,t.css)`
    margin-left: -${w.spacing(.5)};
    margin-bottom: ${w.spacing(1)};
  `,validationStatus:(0,t.css)`
    padding: ${w.spacing(.5)};
    margin-bottom: ${w.spacing(1)};
    color: ${w.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}));class S extends n.Component{constructor(){super(...arguments),this.valueListsRef=n.createRef(),this.state={labels:[],labelSearchTerm:"",metricSearchTerm:"",status:"Ready",error:"",validationStatus:"",valueSearchTerm:""},this.onChangeLabelSearch=L=>{this.setState({labelSearchTerm:L.target.value})},this.onChangeMetricSearch=L=>{this.setState({metricSearchTerm:L.target.value})},this.onChangeValueSearch=L=>{this.setState({valueSearchTerm:L.target.value})},this.onClickRunQuery=()=>{const L=T(this.state.labels);this.props.onChange(L)},this.onClickRunRateQuery=()=>{const V=`rate(${T(this.state.labels)}[$__rate_interval])`;this.props.onChange(V)},this.onClickClear=()=>{this.setState(L=>({labels:L.labels.map(N=>({...N,values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0})),labelSearchTerm:"",metricSearchTerm:"",status:"",error:"",validationStatus:"",valueSearchTerm:""})),this.props.deleteLastUsedLabels(),this.fetchValues(C,P)},this.onClickLabel=(L,V,N)=>{const z=this.state.labels.find(H=>H.name===L);if(!z)return;const J=!z.selected;let G={selected:J};if(z.values&&!J){const H=z.values.map(q=>({...q,selected:!1}));G={...G,facets:0,values:H}}this.setState({labelSearchTerm:""}),this.updateLabelState(L,G,"",()=>this.doFacettingForLabel(L))},this.onClickValue=(L,V,N)=>{const z=this.state.labels.find(G=>G.name===L);if(!z||!z.values)return;this.setState({labelSearchTerm:""});const J=z.values.map(G=>({...G,selected:G.name===V?!G.selected:G.selected}));this.updateLabelState(L,{values:J},"",()=>this.doFacetting(L))},this.onClickMetric=(L,V,N)=>{const z=this.state.labels.find(H=>H.name===L);if(!z||!z.values)return;this.setState({metricSearchTerm:""});const J=z.values.map(H=>({...H,selected:H.name===V||H.selected?!H.selected:H.selected})),G=J.some(H=>H.selected);this.updateLabelState(L,{selected:G,values:J},"",()=>this.doFacetting(L))},this.onClickValidate=()=>{const L=T(this.state.labels);this.validateSelector(L)},this.doFacetting=L=>{const V=T(this.state.labels);if(V===P){const N=this.state.labels.map(z=>({...z,facets:0,values:void 0,hidden:!1}));this.setState({labels:N},()=>{this.state.labels.forEach(z=>(z.selected||z.name===C)&&this.fetchValues(z.name,V))})}else this.fetchSeries(V,L)}}updateLabelState(L,V,N="",z){this.setState(J=>{const G=J.labels.map(q=>q.name===L?{...q,...V}:q),H=N?"":J.error;return{labels:G,status:N,error:H,validationStatus:""}},z)}componentDidMount(){const{languageProvider:L,lastUsedLabels:V}=this.props;if(L){const N=V;L.start(this.props.timeRange).then(()=>{let z=L.getLabelKeys();this.fetchValues(C,P);const J=z.map((G,H,q)=>({name:G,selected:N.includes(G),loading:!1}));this.setState({labels:J},()=>{this.state.labels.forEach(G=>{G.selected&&this.fetchValues(G.name,P)})})})}}doFacettingForLabel(L){const V=this.state.labels.find(z=>z.name===L);if(!V)return;const N=this.state.labels.filter(z=>z.selected).map(z=>z.name);this.props.storeLastUsedLabels(N),V.selected?V.values||this.fetchValues(L,T(this.state.labels)):this.doFacetting()}async fetchValues(L,V){const{languageProvider:N}=this.props;this.updateLabelState(L,{loading:!0},`Fetching values for ${L}`);try{let z=await N.getLabelValues(L);if(V!==T(this.state.labels)){this.updateLabelState(L,{loading:!1});return}const J=[],{metricsMetadata:G}=N;for(const H of z){const q={name:H};if(L===C&&G){const le=G[H];le&&(q.details=`(${le.type}) ${le.help}`)}J.push(q)}this.updateLabelState(L,{values:J,loading:!1})}catch(z){console.error(z)}}async fetchSeries(L,V){const{languageProvider:N}=this.props;V&&this.updateLabelState(V,{loading:!0},`Facetting labels for ${L}`);try{const z=await N.fetchSeriesLabels(L,!0);if(L!==T(this.state.labels)){V&&this.updateLabelState(V,{loading:!1});return}if(Object.keys(z).length===0){this.setState({error:`Empty results, no matching label for ${L}`});return}const J=M(this.state.labels,z,V);this.setState({labels:J,error:""}),V&&this.updateLabelState(V,{loading:!1})}catch(z){console.error(z)}}async validateSelector(L){const{languageProvider:V}=this.props;this.setState({validationStatus:`Validating selector ${L}`,error:""});const N=await V.fetchSeries(L);this.setState({validationStatus:`Selector is valid (${N.length} series found)`})}render(){const{theme:L}=this.props,{labels:V,labelSearchTerm:N,metricSearchTerm:z,status:J,error:G,validationStatus:H,valueSearchTerm:q}=this.state,le=O(L);if(V.length===0)return n.createElement("div",{className:le.wrapper},n.createElement(y._,{text:"Loading labels..."}));let me=V.find(te=>te.name===C);me&&z&&(me={...me,values:me.values?.filter(te=>te.selected||te.name.includes(z))});let k=V.filter(te=>!te.hidden&&te.name!==C);N&&(k=k.filter(te=>te.selected||te.name.includes(N)));let ee=k.filter(te=>te.selected&&te.values);q&&(ee=ee.map(te=>({...te,values:te.values?.filter(oe=>oe.selected||oe.name.includes(q))})));const X=T(this.state.labels),j=X===P,ne=me?.values?.length||0;return n.createElement("div",{className:le.wrapper},n.createElement(a.Gy,{align:"flex-start",spacing:"lg"},n.createElement("div",null,n.createElement("div",{className:le.section},n.createElement(v.J,{description:"Once a metric is selected only possible labels are shown."},"1. Select a metric"),n.createElement("div",null,n.createElement(g.p,{onChange:this.onChangeMetricSearch,"aria-label":"Filter expression for metric",value:z,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.selectMetric})),n.createElement("div",{role:"list",className:le.valueListWrapper,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.metricList},n.createElement(E.Y1,{height:Math.min(450,ne*D),itemCount:ne,itemSize:D,itemKey:te=>me.values[te].name,width:300,className:le.valueList},({index:te,style:oe})=>{const ie=me?.values?.[te];return ie?n.createElement("div",{style:oe},n.createElement(b.J,{name:me.name,value:ie?.name,title:ie.details,active:ie?.selected,onClick:this.onClickMetric,searchTerm:z})):null})))),n.createElement("div",null,n.createElement("div",{className:le.section},n.createElement(v.J,{description:"Once label values are selected, only possible label combinations are shown."},"2. Select labels to search in"),n.createElement("div",null,n.createElement(g.p,{onChange:this.onChangeLabelSearch,"aria-label":"Filter expression for label",value:N,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.labelNamesFilter})),n.createElement("div",{className:le.list,style:{height:120}},k.map(te=>n.createElement(b.J,{key:te.name,name:te.name,loading:te.loading,active:te.selected,hidden:te.hidden,facets:te.facets,onClick:this.onClickLabel,searchTerm:N})))),n.createElement("div",{className:le.section},n.createElement(v.J,{description:"Use the search field to find values across selected labels."},"3. Select (multiple) values for your labels"),n.createElement("div",null,n.createElement(g.p,{onChange:this.onChangeValueSearch,"aria-label":"Filter expression for label values",value:q,"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.labelValuesFilter})),n.createElement("div",{className:le.valueListArea,ref:this.valueListsRef},ee.map(te=>n.createElement("div",{role:"list",key:te.name,"aria-label":`Values for ${te.name}`,className:le.valueListWrapper},n.createElement("div",{className:le.valueTitle},n.createElement(b.J,{name:te.name,loading:te.loading,active:te.selected,hidden:te.hidden,facets:te.facets||te.values?.length,onClick:this.onClickLabel})),n.createElement(E.Y1,{height:Math.min(200,D*(te.values?.length||0)),itemCount:te.values?.length||0,itemSize:28,itemKey:oe=>te.values[oe].name,width:200,className:le.valueList},({index:oe,style:ie})=>{const ue=te.values?.[oe];return ue?n.createElement("div",{style:ie},n.createElement(b.J,{name:te.name,value:ue?.name,active:ue?.selected,onClick:this.onClickValue,searchTerm:q})):null}))))))),n.createElement("div",{className:le.section},n.createElement(v.J,null,"4. Resulting selector"),n.createElement("div",{"aria-label":"selector",className:le.selector},X),H&&n.createElement("div",{className:le.validationStatus},H),n.createElement(a.Gy,null,n.createElement(l.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.useQuery,"aria-label":"Use selector for query button",disabled:j,onClick:this.onClickRunQuery},"Use query"),n.createElement(l.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.useAsRateQuery,"aria-label":"Use selector as metrics button",variant:"secondary",disabled:j,onClick:this.onClickRunRateQuery},"Use as rate query"),n.createElement(l.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.validateSelector,"aria-label":"Validate submit button",variant:"secondary",disabled:j,onClick:this.onClickValidate},"Validate selector"),n.createElement(l.$n,{"data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.clear,"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear},"Clear"),n.createElement("div",{className:(0,t.cx)(le.status,(J||G)&&le.statusShowing)},n.createElement("span",{className:G?le.error:""},G||J)))))}}const p=(0,i.cV)(S),x=n.lazy(()=>e.e(8325).then(e.bind(e,79994))),A=w=>n.createElement(n.Suspense,{fallback:null},n.createElement(x,{...w})),R=w=>{const L=(0,n.useRef)(null),{onRunQuery:V,onChange:N,...z}=w,J=q=>{L.current=q,N(q),V()},G=q=>{N(q)},H=q=>{N(q)};return n.createElement(A,{onChange:H,onRunQuery:J,onBlur:G,...z})},B="grafana.datasources.prometheus.browser.labels";function U(w,L,V){return w?"(Disabled)":L?V?"Metrics browser":"(No metrics found)":"Loading metrics..."}class F extends n.PureComponent{constructor(L){super(L),this.refreshHint=()=>{const{datasource:V,query:N,data:z}=this.props,J=V.getInitHints(),G=J.length>0?J[0]:null;if(!z||z.series.length===0){this.setState({hint:G});return}const H=(0,r.ci)(z.series[0])?z.series.map(r.w3):z.series,q=V.getQueryHints(N,H);let le=q.length>0?q[0]:null;this.setState({hint:le??G})},this.refreshMetrics=async()=>{const{range:V,datasource:{languageProvider:N}}=this.props;this.languageProviderInitializationPromise=f(N.start(V));try{const z=await this.languageProviderInitializationPromise.promise;await Promise.all(z),this.onUpdateLanguage()}catch(z){if(!(u(z)&&z.isCanceled))throw z}},this.onChangeLabelBrowser=V=>{this.onChangeQuery(V,!0),this.setState({labelBrowserVisible:!1})},this.onChangeQuery=(V,N)=>{const{query:z,onChange:J,onRunQuery:G}=this.props;if(J){const H={...z,expr:V};J(H),N&&G&&G()}},this.onClickChooserButton=()=>{this.setState(V=>({labelBrowserVisible:!V.labelBrowserVisible})),(0,o.rR)("user_grafana_prometheus_metrics_browser_clicked",{editorMode:this.state.labelBrowserVisible?"metricViewClosed":"metricViewOpen",app:this.props?.app??""})},this.onClickHintFix=()=>{const{datasource:V,query:N,onChange:z,onRunQuery:J}=this.props,{hint:G}=this.state;G?.fix?.action&&z(V.modifyQuery(N,G.fix.action)),J()},this.onUpdateLanguage=()=>{const{datasource:{languageProvider:V}}=this.props,{metrics:N}=V;N&&this.setState({syntaxLoaded:!0})},this.state={labelBrowserVisible:!1,syntaxLoaded:!1,hint:null}}componentDidMount(){this.props.datasource.languageProvider&&this.refreshMetrics(),this.refreshHint()}componentWillUnmount(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()}componentDidUpdate(L){const{data:V,datasource:{languageProvider:N},range:z}=this.props;N!==L.datasource.languageProvider&&this.setState({syntaxLoaded:!1});const J=this.rangeChangedToRefresh(z,L.range);(N!==L.datasource.languageProvider||J)&&this.refreshMetrics(),V&&L.data&&L.data.series!==V.series&&this.refreshHint()}rangeChangedToRefresh(L,V){if(L&&V){const N=(0,d.eN)(L.from.valueOf())===(0,d.eN)(V.from.valueOf()),z=(0,d.eN)(L.to.valueOf())===(0,d.eN)(V.to.valueOf());return!(N&&z)}return!1}render(){const{datasource:L,datasource:{languageProvider:V},query:N,ExtraFieldElement:z,history:J=[],theme:G}=this.props,{labelBrowserVisible:H,syntaxLoaded:q,hint:le}=this.state,me=V.metrics.length>0,k=U(L.lookupsDisabled,q,me),ee=!(q&&me);return n.createElement(c.b,{storageKey:B,defaultValue:[]},(X,j,ne)=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"]},n.createElement("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:ee,type:"button","data-testid":s.Tp.components.DataSource.Prometheus.queryEditor.code.metricsBrowser.openButton},k,n.createElement(m.I,{name:H?"angle-down":"angle-right"})),n.createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},n.createElement(R,{languageProvider:V,history:J,onChange:this.onChangeQuery,onRunQuery:this.props.onRunQuery,initialValue:N.expr??"",placeholder:"Enter a PromQL query\u2026",datasource:L}))),H&&n.createElement("div",{className:"gf-form"},n.createElement(p,{languageProvider:V,onChange:this.onChangeLabelBrowser,lastUsedLabels:X||[],storeLastUsedLabels:j,deleteLastUsedLabels:ne,timeRange:this.props.range})),z,le?n.createElement("div",{className:"query-row-break"},n.createElement("div",{className:"prom-query-field-info text-warning"},le.label," ",le.fix?n.createElement("button",{type:"button",className:(0,t.cx)((0,l.my)(G),"text-link","muted"),onClick:this.onClickHintFix},le.fix.label):null)):null))}}const K=(0,i.cV)(F)},36117:(Y,I,e)=>{"use strict";e.d(I,{L:()=>a});var t=e(32196),n=e(96540),r=e(94701),s=e(32264),o=e(39268),m=e(14186),l=e(15292),i=e(10354),c=e(58881),u=e(48311),f=e(38894),d=e(88323),E=e(55852);const h=g=>{const{credentials:b,azureCloudOptions:P,onCredentialsChange:C,getSubscriptions:D,disabled:T,managedIdentityEnabled:M,workloadIdentityEnabled:O}=g,S=(0,c.wo)(b),[p,x]=(0,n.useState)([]),[A,R]=(0,n.useReducer)(G=>G+1,0),B=(0,n.useMemo)(()=>{let G=[{value:"clientsecret",label:"App Registration"}];return M&&G.push({value:"msi",label:"Managed Identity"}),O&&G.push({value:"workloadidentity",label:"Workload Identity"}),G},[M,O]);(0,n.useEffect)(()=>{if(!D||!S){U([]);return}let G=!1;return D().then(H=>{G||U(H,A)}),()=>{G=!0}},[A]);const U=(G,H=!1)=>{x(G),D&&(H&&!b.defaultSubscriptionId&&G.length>0?z(G[0]):b.defaultSubscriptionId&&(G.find(le=>le.value===b.defaultSubscriptionId)||z(void 0)))},F=G=>{x([]);const H=M?"msi":O?"workloadidentity":"clientsecret",q={...b,authType:G.value||H,defaultSubscriptionId:void 0};C(q)},K=G=>{if(b.authType==="clientsecret"){x([]);const H={...b,azureCloud:G.value,defaultSubscriptionId:void 0};C(H)}},w=G=>{if(b.authType==="clientsecret"){x([]);const H={...b,tenantId:G.target.value,defaultSubscriptionId:void 0};C(H)}},L=G=>{if(b.authType==="clientsecret"){x([]);const H={...b,clientId:G.target.value,defaultSubscriptionId:void 0};C(H)}},V=G=>{if(b.authType==="clientsecret"){x([]);const H={...b,clientSecret:G.target.value,defaultSubscriptionId:void 0};C(H)}},N=()=>{if(b.authType==="clientsecret"){x([]);const G={...b,clientSecret:"",defaultSubscriptionId:void 0};C(G)}},z=G=>{const H={...b,defaultSubscriptionId:G?.value};C(H)},J=s.$.featureToggles.prometheusConfigOverhaulAuth;return n.createElement("div",{className:"gf-form-group"},B.length>1&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(f.I,{className:"width-12",tooltip:"Choose the type of authentication to Azure services"},"Authentication"),n.createElement(d.l6,{className:"width-15",value:B.find(G=>G.value===b.authType),options:B,onChange:F,isDisabled:T}))),b.authType==="clientsecret"&&n.createElement(n.Fragment,null,P&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(f.I,{className:"width-12",tooltip:"Choose an Azure Cloud"},"Azure Cloud"),n.createElement(d.l6,{className:"width-15",value:P.find(G=>G.value===b.azureCloud),options:P,onChange:K,isDisabled:T}))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(f.I,{className:"width-12"},"Directory (tenant) ID"),n.createElement("div",{className:"width-15"},n.createElement(i.p,{className:(0,t.cx)(J?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:b.tenantId||"",onChange:w,disabled:T})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(f.I,{className:"width-12"},"Application (client) ID"),n.createElement("div",{className:"width-15"},n.createElement(i.p,{className:(0,t.cx)(J?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:b.clientId||"",onChange:L,disabled:T})))),typeof b.clientSecret=="symbol"?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(f.I,{htmlFor:"azure-client-secret",className:"width-12"},"Client Secret"),n.createElement(i.p,{id:"azure-client-secret",className:(0,t.cx)(J?"width-20":"width-25"),placeholder:"configured",disabled:!0})),!T&&n.createElement("div",{className:"gf-form"},n.createElement("div",{className:(0,t.cx)(J?"max-width-20 gf-form-inline":"max-width-30 gf-form-inline")},n.createElement(E.$n,{variant:"secondary",type:"button",onClick:N},"reset")))):n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(f.I,{className:"width-12"},"Client Secret"),n.createElement("div",{className:"width-15"},n.createElement(i.p,{className:(0,t.cx)(J?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:b.clientSecret||"",onChange:V,disabled:T}))))),D&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(f.I,{className:"width-12"},"Default Subscription"),n.createElement("div",{className:(0,t.cx)(J?"width-20":"width-25")},n.createElement(d.l6,{value:b.defaultSubscriptionId?p.find(G=>G.value===b.defaultSubscriptionId):void 0,options:p,onChange:z,isDisabled:T})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement("div",{className:"max-width-30 gf-form-inline"},n.createElement(E.$n,{variant:"secondary",size:"sm",type:"button",onClick:R,disabled:!S},"Load Subscriptions"))))))},y=null,a=g=>{const{dataSourceConfig:b,onChange:P}=g,[C,D]=(0,n.useState)(!!b.jsonData.azureEndpointResourceId),T=(0,n.useMemo)(()=>(0,u.pr)(b),[b]),M=A=>{P((0,u.yn)(b,A))},O=A=>{D(A.currentTarget.checked),A.currentTarget.checked||P({...b,jsonData:{...b.jsonData,azureEndpointResourceId:void 0}})},S=A=>{C&&P({...b,jsonData:{...b.jsonData,azureEndpointResourceId:A.currentTarget.value}})},p=s.$.featureToggles.prometheusConfigOverhaulAuth,x=p?24:26;return(0,r.A)(()=>{b.jsonData.authType||M(T)}),n.createElement(n.Fragment,null,n.createElement("h6",null,"Azure authentication"),n.createElement(h,{managedIdentityEnabled:s.$.azure.managedIdentityEnabled,workloadIdentityEnabled:s.$.azure.workloadIdentityEnabled,credentials:T,azureCloudOptions:c.hE,onCredentialsChange:M,disabled:b.readOnly}),n.createElement("h6",null,"Azure configuration"),n.createElement("div",{className:"gf-form-group"},n.createElement(o.C,null,n.createElement(m.I,{labelWidth:x,label:"Override AAD audience",disabled:b.readOnly},n.createElement(l.K,{value:C,onChange:O}))),C&&n.createElement(o.C,null,n.createElement(m.I,{labelWidth:x,label:"Resource ID",disabled:b.readOnly},n.createElement(i.p,{className:(0,t.cx)(p?"width-20":"width-30"),value:b.jsonData.azureEndpointResourceId||"",onChange:S})))))},v=null},58881:(Y,I,e)=>{"use strict";e.d(I,{RC:()=>t,hE:()=>n,wo:()=>r});var t=(s=>(s.Public="AzureCloud",s.China="AzureChinaCloud",s.USGovernment="AzureUSGovernment",s.None="",s))(t||{});const n=[{value:"AzureCloud",label:"Azure"},{value:"AzureChinaCloud",label:"Azure China"},{value:"AzureUSGovernment",label:"Azure US Government"}];function r(s){switch(s.authType){case"msi":case"workloadidentity":return!0;case"clientsecret":return!!(s.azureCloud&&s.tenantId&&s.clientId&&s.clientSecret)}}},48311:(Y,I,e)=>{"use strict";e.d(I,{Lk:()=>m,U_:()=>f,pr:()=>i,qP:()=>u,yn:()=>c});var t=e(32264),n=e(58881);const r=Symbol("Concealed client secret");function s(){return t.$.azure.cloud||n.RC.Public}function o(d){if(d.secureJsonFields.azureClientSecret)return r;{const E=d.secureJsonData?.azureClientSecret;return typeof E=="string"&&E.length>0?E:void 0}}function m(d){return!!d.jsonData.azureCredentials}function l(){return t.$.azure.managedIdentityEnabled?{authType:"msi"}:{authType:"clientsecret",azureCloud:s()}}function i(d){const E=d.jsonData.azureCredentials;if(!E)return l();switch(E.authType){case"msi":case"workloadidentity":return E.authType==="msi"&&t.$.azure.managedIdentityEnabled||E.authType==="workloadidentity"&&t.$.azure.workloadIdentityEnabled?{authType:E.authType}:{authType:"clientsecret",azureCloud:s()};case"clientsecret":return{authType:"clientsecret",azureCloud:E.azureCloud||s(),tenantId:E.tenantId,clientId:E.clientId,clientSecret:o(d)}}}function c(d,E){switch(E.authType){case"msi":case"workloadidentity":if(E.authType==="msi"&&!t.$.azure.managedIdentityEnabled)throw new Error("Managed Identity authentication is not enabled in Grafana config.");if(E.authType==="workloadidentity"&&!t.$.azure.workloadIdentityEnabled)throw new Error("Workload Identity authentication is not enabled in Grafana config.");return d={...d,jsonData:{...d.jsonData,azureAuthType:E.authType,azureCredentials:{authType:E.authType}}},d;case"clientsecret":return d={...d,jsonData:{...d.jsonData,azureCredentials:{authType:"clientsecret",azureCloud:E.azureCloud||s(),tenantId:E.tenantId,clientId:E.clientId}},secureJsonData:{...d.secureJsonData,azureClientSecret:typeof E.clientSecret=="string"&&E.clientSecret.length>0?E.clientSecret:void 0},secureJsonFields:{...d.secureJsonFields,azureClientSecret:typeof E.clientSecret=="symbol"}},d}}function u(d){return{jsonData:{...d.jsonData,azureCredentials:l()}}}function f(d){return{jsonData:{...d.jsonData,azureAuth:void 0,azureCredentials:void 0,azureEndpointResourceId:void 0}}}},29121:(Y,I,e)=>{"use strict";e.d(I,{_p:()=>ge,k1:()=>be,jW:()=>re,Zh:()=>Be,TT:()=>ye});var t=e(32196),n=e(96540),r=e(61765),s=e(68704),o=e(91062),m=e(40845),l=e(42418),i=e(91409),c=e(72093),u=e(2913),f=e(13544),d=e(29020),E=e(32264),h=e(14186),y=e(15292);function a({options:ve,onOptionsChange:Me}){const ke=(0,m.$j)(),Se=Be(ke),We=E.$.featureToggles.prometheusConfigOverhaulAuth;return n.createElement(d.I,{title:"Alerting",className:(0,t.cx)(Se.container,{[Se.alertingTop]:We})},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h.I,{labelWidth:30,label:"Manage alerts via Alerting UI",disabled:ve.readOnly,tooltip:n.createElement(n.Fragment,null,"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source. ",re()),interactive:!0,className:Se.switchField},n.createElement(y.d,{value:ve.jsonData.manageAlerts!==!1,onChange:De=>Me({...ve,jsonData:{...ve.jsonData,manageAlerts:De.currentTarget.checked}}),id:f.Tp.components.DataSource.Prometheus.configPage.manageAlerts}))))))}var v=e(36117),g=e(48311),b=e(66025),P=e(77657),C=e(17466),D=e(67861),T=e(17081);const M=ve=>{const{options:Me,onOptionsChange:ke,azureAuthSettings:Se,sigV4AuthToggleEnabled:We,renderSigV4Editor:De,secureSocksDSProxyEnabled:pe}=ve,Ne=(0,b.pe)({config:Me,onChange:ke}),Le=(0,m.$j)(),He=Be(Le);let je=[];const[at,Ye]=(0,n.useState)(Me.jsonData.sigV4Auth||!1),$e="custom-sigV4Id",xe={id:$e,label:"SigV4 auth",description:"This is SigV4 auth description",component:n.createElement(n.Fragment,null,De)};We&&je.push(xe);const Fe=Se?.azureAuthSupported&&Se.getAzureAuthEnabled(Me)||!1,[Ee,se]=(0,n.useState)(Fe),ae="custom-azureAuthId",fe={id:ae,label:"Azure auth",description:"This is Azure auth description",component:n.createElement(n.Fragment,null,Se.azureSettingsUI&&n.createElement(Se.azureSettingsUI,{dataSourceConfig:Me,onChange:ke}))};Se?.azureAuthSupported&&je.push(fe);function Ce(){return at?$e:Ee?ae:Ne.selectedMethod}let Re;switch(Me.access){case"direct":Re=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",re());break;case"proxy":Re=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",re());break;default:Re=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",re())}return n.createElement(n.Fragment,null,n.createElement(P.u,{urlPlaceholder:"http://localhost:9090",config:Me,onChange:ke,urlLabel:"Prometheus server URL",urlTooltip:Re}),n.createElement("hr",{className:`${He.hrTopSpace} ${He.hrBottomSpace}`}),n.createElement(C.N,{...Ne,customMethods:je,onAuthMethodSelect:Oe=>{We&&Ye(Oe===$e),Se?.azureAuthSupported&&(se(Oe===ae),Se.setAzureAuthEnabled(Me,Oe===ae)),ke({...Me,basicAuth:Oe===D.q.BasicAuth,withCredentials:Oe===D.q.CrossSiteCredentials,jsonData:{...Me.jsonData,sigV4Auth:Oe===$e,oauthPassThru:Oe===D.q.OAuthForward}})},selectedMethod:Ce()}),n.createElement("div",{className:He.sectionBottomPadding}),pe&&n.createElement(n.Fragment,null,n.createElement(T.Y,{options:Me,onOptionsChange:ke}),n.createElement("div",{className:He.sectionBottomPadding})))};var O=e(97716),S=e.n(O),p=e(22391),x=e(17172),A=e(10354),R=e(88323),B=e(85464),U=e(35146),F=e(30915),K=e(69120),w=e(55852),L=e(51612);function V({value:ve,onChange:Me,onDelete:ke,disabled:Se}){const[We,De]=(0,n.useState)(!!ve.datasourceUid),pe=(0,m.$j)(),Ne=Be(pe);return n.createElement("div",{className:"gf-form-group"},n.createElement(h.I,{label:"Internal link",labelWidth:be,disabled:Se,tooltip:n.createElement(n.Fragment,null,"Enable this option if you have an internal link. When enabled, this reveals the data source selector. Select the backend tracing data store for your exemplar data. ",re()),interactive:!0,className:Ne.switchField},n.createElement(n.Fragment,null,n.createElement(y.d,{value:We,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.internalLinkSwitch,onChange:Le=>De(Le.currentTarget.checked)}))),We?n.createElement(h.I,{label:"Data source",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"The data source the exemplar is going to navigate to. ",re()),disabled:Se,interactive:!0},n.createElement(L.s,{tracing:!0,current:ve.datasourceUid,noDefault:!0,width:40,onChange:Le=>Me({...ve,datasourceUid:Le.uid,url:void 0})})):n.createElement(h.I,{label:"URL",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"The URL of the trace backend the user would go to see its trace. ",re()),disabled:Se,interactive:!0},n.createElement(A.p,{placeholder:"https://example.com/${__value.raw}",spellCheck:!1,width:40,value:ve.url,onChange:Le=>Me({...ve,datasourceUid:void 0,url:Le.currentTarget.value})})),n.createElement(h.I,{label:"URL Label",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"Use to override the button label on the exemplar traceID field. ",re()),disabled:Se,interactive:!0},n.createElement(A.p,{placeholder:"Go to example.com",spellCheck:!1,width:40,value:ve.urlDisplayLabel,onChange:Le=>Me({...ve,urlDisplayLabel:Le.currentTarget.value})})),n.createElement(h.I,{label:"Label name",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"The name of the field in the labels object that should be used to get the traceID. ",re()),disabled:Se,interactive:!0},n.createElement(A.p,{placeholder:"traceID",spellCheck:!1,width:40,value:ve.name,onChange:Le=>Me({...ve,name:Le.currentTarget.value})})),!Se&&n.createElement(h.I,{label:"Remove exemplar link",labelWidth:be,disabled:Se},n.createElement(w.$n,{variant:"destructive",title:"Remove exemplar link",icon:"times",onClick:Le=>{Le.preventDefault(),ke()}})))}function N({options:ve,onChange:Me,disabled:ke}){const Se=(0,m.$j)(),We=Be(Se);return n.createElement("div",{className:We.sectionBottomPadding},n.createElement(d.I,{title:"Exemplars",className:We.container},ve&&ve.map((De,pe)=>n.createElement(V,{key:pe,value:De,onChange:Ne=>{const Le=[...ve];Le.splice(pe,1,Ne),Me(Le)},onDelete:()=>{const Ne=[...ve];Ne.splice(pe,1),Me(Ne)},disabled:ke})),!ke&&n.createElement(w.$n,{variant:"secondary","data-testid":f.Tp.components.DataSource.Prometheus.configPage.exemplarsAddButton,className:(0,t.css)`
              margin-bottom: 10px;
            `,icon:"plus",onClick:De=>{De.preventDefault();const pe=[...ve||[],{name:"traceID"}];Me(pe)}},"Add"),ke&&!ve&&n.createElement("i",null,"No exemplars configurations")))}const z={Prometheus:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"< 2.14.x"},{value:"2.14.0",label:"2.14.x"},{value:"2.15.0",label:"2.15.x"},{value:"2.16.0",label:"2.16.x"},{value:"2.17.0",label:"2.17.x"},{value:"2.18.0",label:"2.18.x"},{value:"2.19.0",label:"2.19.x"},{value:"2.20.0",label:"2.20.x"},{value:"2.21.0",label:"2.21.x"},{value:"2.22.0",label:"2.22.x"},{value:"2.23.0",label:"2.23.x"},{value:"2.24.0",label:"2.24.x"},{value:"2.25.0",label:"2.25.x"},{value:"2.26.0",label:"2.26.x"},{value:"2.27.0",label:"2.27.x"},{value:"2.28.0",label:"2.28.x"},{value:"2.29.0",label:"2.29.x"},{value:"2.30.0",label:"2.30.x"},{value:"2.31.0",label:"2.31.x"},{value:"2.32.0",label:"2.32.x"},{value:"2.33.0",label:"2.33.x"},{value:"2.34.0",label:"2.34.x"},{value:"2.35.0",label:"2.35.x"},{value:"2.36.0",label:"2.36.x"},{value:"2.37.0",label:"2.37.x"},{value:"2.38.0",label:"2.38.x"},{value:"2.39.0",label:"2.39.x"},{value:"2.40.0",label:"2.40.x"},{value:"2.41.0",label:"2.41.x"},{value:"2.42.0",label:"2.42.x"},{value:"2.43.0",label:"2.43.x"},{value:"2.44.0",label:"2.44.x"},{value:"2.45.0",label:"2.45.x"},{value:"2.46.0",label:"2.46.x"},{value:"2.47.0",label:"2.47.x"},{value:"2.48.0",label:"2.48.x"},{value:"2.49.0",label:"2.49.x"},{value:"2.50.0",label:"2.50.x"},{value:"2.50.1",label:"> 2.50.x"}],Mimir:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"2.0.x"},{value:"2.1.0",label:"2.1.x"},{value:"2.2.0",label:"2.2.x"},{value:"2.3.0",label:"2.3.x"},{value:"2.4.0",label:"2.4.x"},{value:"2.5.0",label:"2.5.x"},{value:"2.6.0",label:"2.6.x"},{value:"2.7.0",label:"2.7.x"},{value:"2.8.0",label:"2.8.x"},{value:"2.9.0",label:"2.9.x"},{value:"2.9.1",label:"> 2.9.x"}],Thanos:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 0.16.x"},{value:"0.16.0",label:"0.16.x"},{value:"0.17.0",label:"0.17.x"},{value:"0.18.0",label:"0.18.x"},{value:"0.19.0",label:"0.19.x"},{value:"0.20.0",label:"0.20.x"},{value:"0.21.0",label:"0.21.x"},{value:"0.22.0",label:"0.22.x"},{value:"0.23.0",label:"0.23.x"},{value:"0.24.0",label:"0.24.x"},{value:"0.25.0",label:"0.25.x"},{value:"0.26.0",label:"0.26.x"},{value:"0.27.0",label:"0.27.x"},{value:"0.28.0",label:"0.28.x"},{value:"0.29.0",label:"0.29.x"},{value:"0.30.0",label:"0.30.x"},{value:"0.31.0",label:"0.31.x"},{value:"0.31.1",label:"> 0.31.x"}],Cortex:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 1.0.0"},{value:"1.0.0",label:"1.0.0"},{value:"1.1.0",label:"1.1.x"},{value:"1.2.0",label:"1.2.x"},{value:"1.3.0",label:"1.3.x"},{value:"1.4.0",label:"1.4.x"},{value:"1.5.0",label:"1.5.x"},{value:"1.6.0",label:"1.6.x"},{value:"1.7.0",label:"1.7.x"},{value:"1.8.0",label:"1.8.x"},{value:"1.9.0",label:"1.9.x"},{value:"1.10.0",label:"1.10.x"},{value:"1.11.0",label:"1.11.x"},{value:"1.13.0",label:"1.13.x"},{value:"1.14.0",label:"> 1.13.x"}]},J=[{value:"POST",label:"POST"},{value:"GET",label:"GET"}],G=[{value:U.f.Builder,label:"Builder"},{value:U.f.Code,label:"Code"}],H=[{value:K.fD.Low,label:"Low"},{value:K.fD.Medium,label:"Medium"},{value:K.fD.High,label:"High"},{value:K.fD.None,label:"None"}],q=[{value:K.N1.Prometheus,label:K.N1.Prometheus},{value:K.N1.Cortex,label:K.N1.Cortex},{value:K.N1.Mimir,label:K.N1.Mimir},{value:K.N1.Thanos,label:K.N1.Thanos}],le=/^$|^\d+(ms|[Mwdhmsy])$/,me=/(\d+)(.+)/,k="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",ee=(ve,Me)=>{if(!Me||!z[Me])return;const Se=z[Me]?.filter(De=>!!De.value&&S().lte(De.value,ve)).map(De=>De.value),We=Se[Se.length-1];if(We){const De=S().diff(We,ve);if(["patch","prepatch","prerelease",null].includes(De))return We}},X=ve=>{console.warn("Error fetching version from buildinfo API, must manually select version!",ve)},j=(ve,Me,ke)=>{ke(ve).then(Se=>{(0,x.AI)().get(`/api/datasources/uid/${Se.uid}/resources/version-detect`).then(We=>{const De=We.data?.version??"";if(De&&S().valid(De)){const pe=ee(De,Se.jsonData.prometheusType);pe&&ke({...Se,jsonData:{...Se.jsonData,prometheusVersion:pe}}).then(Ne=>{Me(Ne)})}else X()})}).catch(Se=>{X(Se)})},ne=ve=>{const{options:Me,onOptionsChange:ke}=ve,Se=(0,B.k9)();Me.jsonData.httpMethod||(Me.jsonData.httpMethod="POST");const We=(0,m.$j)(),De=Be(We),[pe,Ne]=(0,n.useState)({timeInterval:"",queryTimeout:"",incrementalQueryOverlapWindow:""});return n.createElement(n.Fragment,null,n.createElement(d.I,{title:"Interval behaviour",className:De.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h.I,{label:"Scrape interval",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"This interval is how frequently Prometheus scrapes targets. Set this to the typical scrape and evaluation interval configured in your Prometheus config file. If you set this to a greater value than your Prometheus config file interval, Grafana will evaluate the data according to this interval and you will see less data points. Defaults to 15s. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(n.Fragment,null,n.createElement(A.p,{className:"width-20",value:Me.jsonData.timeInterval,spellCheck:!1,placeholder:"15s",onChange:oe("timeInterval",Me,ke),onBlur:Le=>Ne({...pe,timeInterval:Le.currentTarget.value}),"data-testid":f.Tp.components.DataSource.Prometheus.configPage.scrapeInterval}),ye(pe.timeInterval,le,k))))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h.I,{label:"Query timeout",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"Set the Prometheus query timeout. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(n.Fragment,null,n.createElement(A.p,{className:"width-20",value:Me.jsonData.queryTimeout,onChange:oe("queryTimeout",Me,ke),spellCheck:!1,placeholder:"60s",onBlur:Le=>Ne({...pe,queryTimeout:Le.currentTarget.value}),"data-testid":f.Tp.components.DataSource.Prometheus.configPage.queryTimeout}),ye(pe.queryTimeout,le,k))))))),n.createElement(d.I,{title:"Query editor",className:De.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(h.I,{label:"Default editor",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"Set default editor option for all users of this data source. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(R.l6,{"aria-label":"Default Editor (Code or Builder)",options:G,value:G.find(Le=>Le.value===Me.jsonData.defaultEditor)??G.find(Le=>Le.value===U.f.Builder),onChange:oe("defaultEditor",Me,ke),width:40,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.defaultEditor}))),n.createElement("div",{className:"gf-form"},n.createElement(h.I,{labelWidth:be,label:"Disable metrics lookup",tooltip:n.createElement(n.Fragment,null,"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances."," ",re()),interactive:!0,disabled:Me.readOnly,className:De.switchField},n.createElement(y.d,{value:Me.jsonData.disableMetricsLookup??!1,onChange:(0,p.EX)(ve,"disableMetricsLookup"),id:f.Tp.components.DataSource.Prometheus.configPage.disableMetricLookup}))))),n.createElement(d.I,{title:"Performance",className:De.container},!Me.jsonData.prometheusType&&!Me.jsonData.prometheusVersion&&Me.readOnly&&n.createElement("div",{className:De.versionMargin},"For more information on configuring prometheus type and version in data sources, see the"," ",n.createElement("a",{className:De.textUnderline,href:"https://grafana.com/docs/grafana/latest/administration/provisioning/"},"provisioning documentation"),"."),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h.I,{label:"Prometheus type",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"Set this to the type of your prometheus database, e.g. Prometheus, Cortex, Mimir or Thanos. Changing this field will save your current settings, and attempt to detect the version. Certain types of Prometheus supports or does not support various APIs. For example, some types support regex matching for label queries to improve performance. Some types have an API for metadata. If you set this incorrectly you may experience odd behavior when querying metrics and labels. Please check your Prometheus documentation to ensure you enter the correct type. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(R.l6,{"aria-label":"Prometheus type",options:q,value:q.find(Le=>Le.value===Me.jsonData.prometheusType),onChange:oe("prometheusType",{...Me,jsonData:{...Me.jsonData,prometheusVersion:void 0}},Le=>(j(Le,ke,Se),ke({...Le,jsonData:{...Le.jsonData,prometheusVersion:void 0}}))),width:40,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.prometheusType})))),n.createElement("div",{className:"gf-form-inline"},Me.jsonData.prometheusType&&n.createElement("div",{className:"gf-form"},n.createElement(h.I,{label:`${Me.jsonData.prometheusType} version`,labelWidth:be,tooltip:n.createElement(n.Fragment,null,"Use this to set the version of your ",Me.jsonData.prometheusType," instance if it is not automatically configured. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(R.l6,{"aria-label":`${Me.jsonData.prometheusType} type`,options:z[Me.jsonData.prometheusType],value:z[Me.jsonData.prometheusType]?.find(Le=>Le.value===Me.jsonData.prometheusVersion),onChange:oe("prometheusVersion",Me,ke),width:40,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.prometheusVersion})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h.I,{label:"Cache level",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"Sets the browser caching level for editor queries. Higher cache settings are recommended for high cardinality data sources."),interactive:!0,disabled:Me.readOnly},n.createElement(R.l6,{width:40,onChange:oe("cacheLevel",Me,ke),options:H,value:H.find(Le=>Le.value===Me.jsonData.cacheLevel)??K.fD.Low,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.cacheLevel})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h.I,{label:"Incremental querying (beta)",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"This feature will change the default behavior of relative queries to always request fresh data from the prometheus instance, instead query results will be cached, and only new records are requested. Turn this on to decrease database and network load."),interactive:!0,className:De.switchField,disabled:Me.readOnly},n.createElement(y.d,{value:Me.jsonData.incrementalQuerying??!1,onChange:(0,p.EX)(ve,"incrementalQuerying"),id:f.Tp.components.DataSource.Prometheus.configPage.incrementalQuerying})))),n.createElement("div",{className:"gf-form-inline"},Me.jsonData.incrementalQuerying&&n.createElement(h.I,{label:"Query overlap window",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"Set a duration like 10m or 120s or 0s. Default of 10 minutes. This duration will be added to the duration of each incremental request."),interactive:!0,disabled:Me.readOnly},n.createElement(n.Fragment,null,n.createElement(A.p,{onBlur:Le=>Ne({...pe,incrementalQueryOverlapWindow:Le.currentTarget.value}),className:"width-20",value:Me.jsonData.incrementalQueryOverlapWindow??F.Dr,onChange:oe("incrementalQueryOverlapWindow",Me,ke),spellCheck:!1,"data-testid":f.Tp.components.DataSource.Prometheus.configPage.queryOverlapWindow}),ye(pe.incrementalQueryOverlapWindow,me,k)))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h.I,{label:"Disable recording rules (beta)",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"This feature will disable recording rules. Turn this on to improve dashboard performance"),interactive:!0,className:De.switchField,disabled:Me.readOnly},n.createElement(y.d,{value:Me.jsonData.disableRecordingRules??!1,onChange:(0,p.EX)(ve,"disableRecordingRules"),id:f.Tp.components.DataSource.Prometheus.configPage.disableRecordingRules})))))),n.createElement(d.I,{title:"Other",className:De.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h.I,{label:"Custom query parameters",labelWidth:be,tooltip:n.createElement(n.Fragment,null,"Add custom parameters to the Prometheus query URL. For example timeout, partial_response, dedup, or max_source_resolution. Multiple parameters should be concatenated together with an \u2018&\u2019. ",re()),interactive:!0,disabled:Me.readOnly},n.createElement(A.p,{className:"width-20",value:Me.jsonData.customQueryParameters,onChange:oe("customQueryParameters",Me,ke),spellCheck:!1,placeholder:"Example: max_source_resolution=5m&timeout=10","data-testid":f.Tp.components.DataSource.Prometheus.configPage.customQueryParameters})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h.I,{labelWidth:be,tooltip:n.createElement(n.Fragment,null,"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network. ",re()),interactive:!0,label:"HTTP method",disabled:Me.readOnly},n.createElement(R.l6,{width:40,"aria-label":"Select HTTP method",options:J,value:J.find(Le=>Le.value===Me.jsonData.httpMethod),onChange:oe("httpMethod",Me,ke),"data-testid":f.Tp.components.DataSource.Prometheus.configPage.httpMethod})))))),n.createElement(N,{options:Me.jsonData.exemplarTraceIdDestinations,onChange:Le=>(0,p.lO)({onOptionsChange:ke,options:Me},"exemplarTraceIdDestinations",Le),disabled:Me.readOnly}))},te=ve=>ve?"currentTarget"in ve?ve.currentTarget.value:ve.value:"",oe=(ve,Me,ke)=>Se=>{ke({...Me,jsonData:{...Me.jsonData,[ve]:te(Se)}})};var ie=e(79924);const ue=({config:ve,onChange:Me,className:ke})=>{const Se=pe=>{Me({...ve,jsonData:{...ve.jsonData,keepCookies:pe}})},We=pe=>{Me({...ve,jsonData:{...ve.jsonData,timeout:parseInt(pe.currentTarget.value,10)}})},De={container:(0,t.css)({maxWidth:578})};return n.createElement(n.Fragment,null,n.createElement(d.I,{title:"Advanced HTTP settings",className:(0,t.cx)(De.container,ke)},n.createElement(h.I,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:be,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:ve.readOnly,grow:!0},n.createElement(ie.u,{className:"width-20",id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:ve.jsonData.keepCookies,onChange:Se})),n.createElement(h.I,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:be,tooltip:"HTTP request timeout in seconds",disabled:ve.readOnly,grow:!0},n.createElement(A.p,{className:"width-20",id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:ve.jsonData.timeout,onChange:We}))))},be=30,ge=ve=>{const{options:Me,onOptionsChange:ke}=ve,Se=u.config.featureToggles.prometheusConfigOverhaulAuth,We=(0,n.useRef)(ve.options.access==="direct"),De={azureAuthSupported:u.config.azureAuthEnabled,getAzureAuthEnabled:Le=>(0,g.Lk)(Le),setAzureAuthEnabled:(Le,He)=>He?(0,g.qP)(Le):(0,g.U_)(Le),azureSettingsUI:v.L},pe=(0,m.$j)(),Ne=Be(pe);return n.createElement(n.Fragment,null,Me.access==="direct"&&n.createElement(l.F,{title:"Error",severity:"error"},"Browser access mode in the Prometheus data source is no longer available. Switch to server access mode."),Se?n.createElement(n.Fragment,null,n.createElement(s.I,{dataSourceName:"Prometheus",docsLink:"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/"}),n.createElement("hr",{className:`${Ne.hrTopSpace} ${Ne.hrBottomSpace}`}),n.createElement(M,{options:Me,onOptionsChange:ke,azureAuthSettings:De,sigV4AuthToggleEnabled:u.config.sigV4AuthEnabled,renderSigV4Editor:n.createElement(r._r,{inExperimentalAuthComponent:!0,...ve}),secureSocksDSProxyEnabled:u.config.secureSocksDSProxyEnabled})):n.createElement(i.t,{defaultUrl:"http://localhost:9090",dataSourceConfig:Me,showAccessOptions:We.current,onChange:ke,sigV4AuthToggleEnabled:u.config.sigV4AuthEnabled,azureAuthSettings:De,renderSigV4Editor:n.createElement(r._r,{...ve}),secureSocksDSProxyEnabled:u.config.secureSocksDSProxyEnabled,urlLabel:"Prometheus server URL",urlDocs:re()}),Se?n.createElement(n.Fragment,null,n.createElement("hr",null),n.createElement(o.A,{className:Ne.advancedSettings,title:"Advanced settings",description:"Additional settings are optional settings that can be configured for more control over your data source."},n.createElement(ue,{className:Ne.advancedHTTPSettingsMargin,config:Me,onChange:ke}),n.createElement(a,{options:Me,onOptionsChange:ke}),n.createElement(ne,{options:Me,onOptionsChange:ke}))):n.createElement(n.Fragment,null,n.createElement("hr",{className:Ne.hrTopSpace}),n.createElement("h3",{className:Ne.sectionHeaderPadding},"Additional settings"),n.createElement("p",{className:`${Ne.secondaryGrey} ${Ne.subsectionText}`},"Additional settings are optional settings that can be configured for more control over your data source."),n.createElement(a,{options:Me,onOptionsChange:ke}),n.createElement(ne,{options:Me,onOptionsChange:ke})))};function re(ve){return n.createElement("a",{href:ve||"https://grafana.com/docs/grafana/latest/datasources/prometheus/#configure-the-data-source",target:"_blank",rel:"noopener noreferrer"},"Visit docs for more details here.")}const ye=(ve,Me,ke)=>{const Se="Value is not valid";return ve&&!ve.match(Me)?n.createElement(c.P,null,ke||Se):!0};function Be(ve){return{additionalSettings:(0,t.css)`
      margin-bottom: 25px;
    `,secondaryGrey:(0,t.css)`
      color: ${ve.colors.secondary.text};
      opacity: 65%;
    `,inlineError:(0,t.css)`
      margin: 0px 0px 4px 245px;
    `,switchField:(0,t.css)`
      align-items: center;
    `,sectionHeaderPadding:(0,t.css)`
      padding-top: 32px;
    `,sectionBottomPadding:(0,t.css)`
      padding-bottom: 28px;
    `,subsectionText:(0,t.css)`
      font-size: 12px;
    `,hrBottomSpace:(0,t.css)`
      margin-bottom: 56px;
    `,hrTopSpace:(0,t.css)`
      margin-top: 50px;
    `,textUnderline:(0,t.css)`
      text-decoration: underline;
    `,versionMargin:(0,t.css)`
      margin-bottom: 12px;
    `,advancedHTTPSettingsMargin:(0,t.css)`
      margin: 24px 0 8px 0;
    `,advancedSettings:(0,t.css)`
      padding-top: 32px;
    `,alertingTop:(0,t.css)`
      margin-top: 40px !important;
    `,overhaulPageHeading:(0,t.css)`
      font-weight: 400;
    `,container:(0,t.css)`
      maxwidth: 578;
    `}}},87066:(Y,I,e)=>{"use strict";e.d(I,{gs:()=>Ne,UD:()=>Le});var t=e(2543),n=e(13288),r=e(75505),s=e(81160),o=e(59099),m=e(97716),l=e.n(m),i=e(65879),c=e(43659),u=e(43127),f=e(47232),d=e(41987),E=e(26657),h=e(72574),y=e(47773),a=e(17172),v=e(32264),g=e(87324),b=e(96540),P=e(13544),C=e(71087),D=e(9e4),T=e(81580),M=e(79458),O=e(51440),S=e(68402),p=e(10354),x=e(63492);function A($e){const xe=$e.annotation,Fe=$e.onAnnotationChange,Ee={expr:xe.expr,refId:xe.name,interval:xe.step};return b.createElement(b.Fragment,null,b.createElement(C.D,null,b.createElement(x.$,{...$e,query:Ee,showExplain:!1,onChange:se=>{Fe({...xe,expr:se.expr})}}),b.createElement(D.U,null,b.createElement(T.c,{label:"Min step",tooltip:b.createElement(b.Fragment,null,"An additional lower limit for the step parameter of the Prometheus query and for the"," ",b.createElement("code",null,"$__interval")," and ",b.createElement("code",null,"$__rate_interval")," variables.")},b.createElement(O.D,{type:"text","aria-label":"Set lower limit for the step parameter",placeholder:"auto",minWidth:10,onCommitChange:se=>{Fe({...xe,step:se.currentTarget.value})},defaultValue:Ee.interval,id:P.Tp.components.DataSource.Prometheus.annotations.minStep})))),b.createElement(S.$,{v:.5}),b.createElement(D.U,null,b.createElement(T.c,{label:"Title",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},b.createElement(p.p,{type:"text",placeholder:"{{alertname}}",value:xe.titleFormat,onChange:se=>{Fe({...xe,titleFormat:se.currentTarget.value})},"data-testid":P.Tp.components.DataSource.Prometheus.annotations.title})),b.createElement(T.c,{label:"Tags"},b.createElement(p.p,{type:"text",placeholder:"label1,label2",value:xe.tagKeys,onChange:se=>{Fe({...xe,tagKeys:se.currentTarget.value})},"data-testid":P.Tp.components.DataSource.Prometheus.annotations.tags})),b.createElement(T.c,{label:"Text",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},b.createElement(p.p,{type:"text",placeholder:"{{instance}}",value:xe.textFormat,onChange:se=>{Fe({...xe,textFormat:se.currentTarget.value})},"data-testid":P.Tp.components.DataSource.Prometheus.annotations.text})),b.createElement(T.c,{label:"Series value as timestamp",tooltip:"The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000."},b.createElement(M.C,{value:xe.useValueForTime,onChange:se=>{Fe({...xe,useValueForTime:se.currentTarget.value})},"data-testid":P.Tp.components.DataSource.Prometheus.annotations.seriesValueAsTimestamp}))))}var R=e(32799),B=e(45889),U=e(47891),F=e(65405),K=e(69120);const w=/^label_names\(\)\s*$/,L=/^label_values\((?:(.+),\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\)\s*$/,V=/^metrics\((.+)\)\s*$/,N=/^query_result\((.+)\)\s*$/,z=/^label_names\((.+)\)\s*$/;function J($e){if(typeof $e!="string")return $e;const xe={refId:"PrometheusDatasource-VariableQuery",qryType:K.B4.LabelNames},Fe=$e.match(z);if(Fe)return{...xe,qryType:K.B4.LabelNames,match:Fe[1]};const Ee=$e.match(w);if(Ee)return{...xe,qryType:K.B4.LabelNames};const se=$e.match(/^label_values\(/);if(se){const Ce=$e.match(L),Re=Ce?Ce[2]:"",Oe=Ce?Ce[1]:"";if(Oe){const ze=(0,F.u)(Oe);return{...xe,qryType:K.B4.LabelValues,label:Re,metric:ze.query.metric,labelFilters:ze.query.labels}}else return{...xe,qryType:K.B4.LabelValues,label:Re}}const ae=$e.match(/^metrics\(/);if(ae){const Ce=$e.match(V),Re=Ce?Ce[1]:"";return{...xe,qryType:K.B4.MetricNames,metric:Re}}const fe=$e.match(/^query_result\(/);if(fe){const Ce=$e.match(N),Re=Ce?Ce[1]:"";return{...xe,qryType:K.B4.VarQueryResult,varQuery:Re}}return!Ee&&!se&&!ae&&!fe?{...xe,qryType:K.B4.SeriesQuery,seriesQuery:$e}:xe}function G($e){switch($e.qryType){case K.B4.LabelNames:return $e.match?`label_names(${$e.match})`:"label_names()";case K.B4.LabelValues:if($e.metric||$e.labelFilters&&$e.labelFilters.length!==0){const Fe={metric:$e.metric,labels:$e.labelFilters??[],operations:[]};return`label_values(${U.z.renderQuery(Fe)},${$e.label})`}else return`label_values(${$e.label})`;case K.B4.MetricNames:return`metrics(${$e.metric})`;case K.B4.VarQueryResult:return`query_result(${H($e.varQuery)})`;case K.B4.SeriesQuery:return $e.seriesQuery??"";case K.B4.ClassicQuery:return $e.classicQuery??""}return""}function H($e){return $e?$e.replace(/[\r\n]+/gm,""):""}class q{constructor(xe,Fe){this.datasource=xe,this.query=Fe,this.datasource=xe,this.query=Fe,this.range=(0,u.E2)()}process(xe){this.range=xe;const Fe=w,Ee=z,se=/^label_values\((?:(.+),\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\)\s*$/,ae=V,fe=N,Ce=this.query.match(Fe),Re=this.query.match(Ee);if(Re){const et=`{__name__=~".*${Re[1]}.*"}`;return this.datasource.languageProvider.getSeriesLabels(et,[]).then(nt=>nt.map(lt=>({text:lt})))}if(Ce)return this.datasource.getTagKeys({filters:[],timeRange:xe});const Oe=this.query.match(se);if(Oe){const et=Oe[1],nt=Oe[2];return le(et)?this.labelValuesQuery(nt,et):this.labelValuesQuery(nt)}const ze=this.query.match(ae);if(ze)return this.metricNameQuery(ze[1]);const Xe=this.query.match(fe);return Xe?this.queryResultQuery(Xe[1]):["label_values()","metrics()","query_result()"].includes(this.query)?Promise.resolve([]):this.metricNameAndLabelsQuery(this.query)}labelValuesQuery(xe,Fe){const Ee=(0,B.mv)(this.range.from,!1),se=(0,B.mv)(this.range.to,!0),ae={...Fe&&{"match[]":Fe},start:Ee.toString(),end:se.toString()};if(!Fe||this.datasource.hasLabelsMatchAPISupport()){const fe=`/api/v1/label/${xe}/values`;return this.datasource.metadataRequest(fe,ae).then(Ce=>(0,t.map)(Ce.data.data,Re=>({text:Re})))}else return this.datasource.metadataRequest("/api/v1/series",ae).then(Ce=>{const Re=(0,t.map)(Ce.data.data,Oe=>Oe[xe]||"").filter(Oe=>Oe!=="");return(0,t.uniq)(Re).map(Oe=>({text:Oe,expandable:!0}))})}metricNameQuery(xe){const Fe=(0,B.mv)(this.range.from,!1),Ee=(0,B.mv)(this.range.to,!0),se={start:Fe.toString(),end:Ee.toString()};return this.datasource.metadataRequest("/api/v1/label/__name__/values",se).then(fe=>(0,t.chain)(fe.data.data).filter(Ce=>new RegExp(xe).test(Ce)).map(Ce=>({text:Ce,expandable:!0})).value())}queryResultQuery(xe){const Fe="/api/v1/query",Ee={query:xe,time:(0,B.mv)(this.range.to,!0).toString()};return this.datasource.metadataRequest(Fe,Ee).then(se=>{switch(se.data.data.resultType){case"scalar":case"string":return[{text:se.data.data.result[1]||"",expandable:!1}];case"vector":return(0,t.map)(se.data.data.result,ae=>{let fe=ae.metric.__name__||"";return delete ae.metric.__name__,fe+="{"+(0,t.map)(ae.metric,(Ce,Re)=>Re+'="'+Ce+'"').join(",")+"}",fe+=" "+ae.value[1]+" "+ae.value[0]*1e3,{text:fe,expandable:!0}});default:throw Error(`Unknown/Unhandled result type: [${se.data.data.resultType}]`)}})}metricNameAndLabelsQuery(xe){const Fe=(0,B.mv)(this.range.from,!1),Ee=(0,B.mv)(this.range.to,!0),se={"match[]":xe,start:Fe.toString(),end:Ee.toString()},ae="/api/v1/series",fe=this;return this.datasource.metadataRequest(ae,se).then(Ce=>(0,t.map)(Ce.data.data,Re=>({text:fe.datasource.getOriginalMetricName(Re),expandable:!0})))}}function le($e){return $e&&$e.split(" ").join("")!=="{}"}const me=20;function k($e,xe,Fe){const Ee=[];if($e.trim().match(/^\w+_bucket$|^\w+_bucket{.*}$/)&&Ee.push({type:"HISTOGRAM_QUANTILE",label:"Selected metric has buckets.",fix:{label:"Consider calculating aggregated quantile by adding histogram_quantile().",action:{type:"ADD_HISTOGRAM_QUANTILE",query:$e}}}),$e.indexOf("rate(")===-1&&$e.indexOf("increase(")===-1){const ae=$e.match(/\b((?<!:)\w+_(total|sum|count)(?!:))\b/);let fe=ae?ae[1]:"";const Ce=Fe?.languageProvider?.metricsMetadata;let Re=!1;if(Ce&&(fe=Array.from($e.matchAll(/\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g)).map(([ze])=>ze).filter(ze=>!ze.startsWith("$")).flatMap(ze=>ze.split(":")).find(ze=>{const Xe=Ce[ze];return Xe&&Xe.type.toLowerCase()==="counter"?(Re=!0,!0):!1})??""),fe){const Oe=$e.trim().match(/^\w+$|^\w+{.*}$/);let Xe=`Selected metric ${Re?"is":"looks like"} a counter.`,Ze;Oe?Ze={label:"Consider calculating rate of counter by adding rate().",action:{type:"ADD_RATE",query:$e}}:Xe=`${Xe} Consider calculating rate of counter by adding rate().`,Ee.push({type:"APPLY_RATE",label:Xe,fix:Ze})}}if(Fe&&Fe.ruleMappings){const ae=Fe.ruleMappings,fe=Object.keys(ae).reduce((Ce,Re)=>$e.search(Re)>-1?{...Ce,[Re]:ae[Re]}:Ce,{});(0,t.size)(fe)>0&&Ee.push({type:"EXPAND_RULES",label:"Query contains recording rules.",fix:{label:"Expand rules",action:{type:"EXPAND_RULES",query:$e,options:fe}}})}return xe&&xe.length>=me&&$e.trim().match(/^\w+$/)&&Ee.push({type:"ADD_SUM",label:"Many time series results returned.",fix:{label:"Consider aggregating with sum().",action:{type:"ADD_SUM",query:$e,preventSubmit:!0}}}),Ee}function ee($e){const xe=[];return $e.lookupsDisabled&&xe.push({label:"Labels and metrics lookup was disabled in data source settings.",type:"INFO"}),xe}var X=e(30915),j=e(39132),ne=e(14110);function te($e,xe,Fe){const{app:Ee,targets:se}=xe;if(!(Ee===d.Jk.Dashboard||Ee===d.Jk.PanelViewer))for(const ae of se)(0,ne.rR)("grafana_prometheus_query_executed",{app:Ee,grafana_version:v.$.buildInfo.version,has_data:$e.data.some(fe=>fe.length>0),has_error:$e.error!==void 0,expr:ae.expr,format:ae.format,instant:ae.instant,range:ae.range,exemplar:ae.exemplar,hinting:ae.hinting,interval:ae.interval,intervalFactor:ae.intervalFactor,utcOffsetSec:ae.utcOffsetSec,legend:ae.legendFormat,valueWithRefId:ae.valueWithRefId,requestId:xe.requestId,showingGraph:ae.showingGraph,showingTable:ae.showingTable,editor_mode:ae.editorMode,simultaneously_sent_query_count:se.length,time_range_from:xe?.range?.from?.toISOString(),time_range_to:xe?.range?.to?.toISOString(),time_taken:Date.now()-Fe.getTime()})}var oe=e(62467),ie=e(65474),ue=e(29505),be=e(39268),ge=e(14186),re=e(88323),ye=e(21744),Be=e(46777);const ve=[{label:"Label names",value:K.B4.LabelNames},{label:"Label values",value:K.B4.LabelValues},{label:"Metrics",value:K.B4.MetricNames},{label:"Query result",value:K.B4.VarQueryResult},{label:"Series query",value:K.B4.SeriesQuery},{label:"Classic query",value:K.B4.ClassicQuery}],Me="PrometheusVariableQueryEditor-VariableQuery",ke=({onChange:$e,query:xe,datasource:Fe,range:Ee})=>{const[se,ae]=(0,b.useState)(void 0),[fe,Ce]=(0,b.useState)(""),[Re,Oe]=(0,b.useState)(""),[ze,Xe]=(0,b.useState)(""),[Ze,et]=(0,b.useState)(""),[nt,lt]=(0,b.useState)(""),[rt,ut]=(0,b.useState)(""),[Et,Ct]=(0,b.useState)([]),[Ut,Gt]=(0,b.useState)([]);(0,b.useEffect)(()=>{Fe.languageProvider.start(Ee)},[]),(0,b.useEffect)(()=>{if(xe)if(xe.qryType===K.B4.ClassicQuery)ae(xe.qryType),ut(xe.query??"");else{const Xt=Se(xe);Oe(Xt.match??""),ae(Xt.qryType),Ce(Xt.label??""),Xe(Xt.metric??""),Gt(Xt.labelFilters??[]),et(Xt.varQuery??""),lt(Xt.seriesQuery??""),ut(Xt.classicQuery??"")}},[xe]),(0,b.useEffect)(()=>{if(se!==K.B4.LabelValues)return;const Xt=Fe.getVariables().map(En=>({label:En,value:En}));if(!ze)Fe.getTagKeys({filters:[]}).then(En=>{const Vn=En.map(({text:Wn})=>({label:Wn,value:Wn}));Ct([...Xt,...Vn])});else{const En=[{label:"__name__",op:"=",value:ze}],Vn=U.z.renderLabels(En);Fe.languageProvider.fetchLabelsWithMatch(Vn).then(Wn=>{const Bt=Object.keys(Wn).map(ln=>({label:ln,value:ln}));Ct([...Xt,...Bt])})}},[Fe,se,ze]);const Wt=(Xt,En)=>{const na={...{qryType:se,label:fe,metric:ze,match:Re,varQuery:Ze,seriesQuery:nt,classicQuery:rt,refId:"PrometheusVariableQueryEditor-VariableQuery"},...Xt,...En?{labelFilters:En}:{labelFilters:Ut}},Bt=G(na);$e({query:Bt,qryType:na.qryType,refId:Me})},ot=Xt=>{ae(Xt.value),Xt.value!==K.B4.SeriesQuery&&Wt({qryType:Xt.value??0})},Tt=Xt=>{const En=Xt&&Xt.value?Xt.value:"";Ce(En),se===K.B4.LabelValues&&En&&Wt({label:En})},Pn=Xt=>{Xe(Xt.metric),Gt(Xt.labels);const En=Xt.metric,Vn=Xt.labels??[];se===K.B4.LabelValues&&fe&&(En||Vn)&&Wt({qryType:se,metric:En},Vn)},ft=Xt=>{se===K.B4.LabelNames&&Wt({qryType:se,match:Xt})},Mt=Xt=>{se===K.B4.MetricNames&&Xt&&Wt({metric:Xt})},_t=Xt=>{et(Xt.currentTarget.value)},nn=Xt=>{lt(Xt.currentTarget.value)},dn=Xt=>{ut(Xt.currentTarget.value)},en=(0,b.useCallback)(()=>({metric:ze,labels:Ut,operations:[]}),[ze,Ut]);return b.createElement(b.Fragment,null,b.createElement(be.C,null,b.createElement(ge.I,{label:"Query type",labelWidth:20,tooltip:b.createElement("div",null,"The Prometheus data source plugin provides the following query types for template variables.")},b.createElement(re.l6,{placeholder:"Select query type","aria-label":"Query type",onChange:ot,value:se,options:ve,width:25,"data-testid":P.Tp.components.DataSource.Prometheus.variableQueryEditor.queryType}))),se===K.B4.LabelValues&&b.createElement(b.Fragment,null,b.createElement(be.C,null,b.createElement(ge.I,{label:"Label",labelWidth:20,required:!0,"aria-labelledby":"label-select",tooltip:b.createElement("div",null,"Returns a list of label values for the label name in all metrics unless the metric is specified.")},b.createElement(re.l6,{"aria-label":"label-select",onChange:Tt,value:fe,options:Et,width:25,allowCustomValue:!0,isClearable:!0,"data-testid":P.Tp.components.DataSource.Prometheus.variableQueryEditor.labelValues.labelSelect}))),b.createElement(Be.I,{query:en(),datasource:Fe,onChange:Pn,variableEditor:!0})),se===K.B4.LabelNames&&b.createElement(be.C,null,b.createElement(ge.I,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric regex",tooltip:b.createElement("div",null,"Returns a list of label names, optionally filtering by specified metric regex.")},b.createElement(p.p,{type:"text","aria-label":"Metric regex",placeholder:"Metric regex",value:Re,onBlur:Xt=>{Oe(Xt.currentTarget.value),ft(Xt.currentTarget.value)},onChange:Xt=>{Oe(Xt.currentTarget.value)},width:25,"data-testid":P.Tp.components.DataSource.Prometheus.variableQueryEditor.labelnames.metricRegex}))),se===K.B4.MetricNames&&b.createElement(be.C,null,b.createElement(ge.I,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric selector",tooltip:b.createElement("div",null,"Returns a list of metrics matching the specified metric regex.")},b.createElement(p.p,{type:"text","aria-label":"Metric selector",placeholder:"Metric regex",value:ze,onChange:Xt=>{Xe(Xt.currentTarget.value)},onBlur:Xt=>{Xe(Xt.currentTarget.value),Mt(Xt.currentTarget.value)},width:25,"data-testid":P.Tp.components.DataSource.Prometheus.variableQueryEditor.metricNames.metricRegex}))),se===K.B4.VarQueryResult&&b.createElement(be.C,null,b.createElement(ge.I,{label:"Query",labelWidth:20,tooltip:b.createElement("div",null,"Returns a list of Prometheus query results for the query. This can include Prometheus functions, i.e. sum(go_goroutines).")},b.createElement(ye.f,{type:"text","aria-label":"Prometheus Query",placeholder:"Prometheus Query",value:Ze,onChange:_t,onBlur:()=>{se===K.B4.VarQueryResult&&Ze&&Wt({qryType:se})},cols:100,"data-testid":P.Tp.components.DataSource.Prometheus.variableQueryEditor.varQueryResult}))),se===K.B4.SeriesQuery&&b.createElement(be.C,null,b.createElement(ge.I,{label:"Series Query",labelWidth:20,tooltip:b.createElement("div",null,'Enter enter a metric with labels, only a metric or only labels, i.e. go_goroutines{instance="localhost:9090"}, go_goroutines, or {instance="localhost:9090"}. Returns a list of time series associated with the entered data.')},b.createElement(p.p,{type:"text","aria-label":"Series Query",placeholder:"Series Query",value:nt,onChange:nn,onBlur:()=>{se===K.B4.SeriesQuery&&nt&&Wt({qryType:se})},width:100,"data-testid":P.Tp.components.DataSource.Prometheus.variableQueryEditor.seriesQuery}))),se===K.B4.ClassicQuery&&b.createElement(be.C,null,b.createElement(ge.I,{label:"Classic Query",labelWidth:20,tooltip:b.createElement("div",null,"The original implemetation of the Prometheus variable query editor. Enter a string with the correct query type and parameters as described in these docs. For example, label_values(label, metric).")},b.createElement(p.p,{type:"text","aria-label":"Classic Query",placeholder:"Classic Query",value:rt,onChange:dn,onBlur:()=>{se===K.B4.ClassicQuery&&rt&&Wt({qryType:se})},width:100,"data-testid":P.Tp.components.DataSource.Prometheus.variableQueryEditor.classicQuery}))))};function Se($e){return typeof $e=="string"?J($e):$e.query?J($e.query):$e}class We extends ue.f5{constructor(xe,Fe=(0,h.w)()){super(),this.datasource=xe,this.templateSrv=Fe,this.editor=ke}query(xe){let Fe;if(typeof xe.targets[0]=="string"?Fe=xe.targets[0]:Fe=xe.targets[0].query,!Fe)return(0,oe.of)({data:[]});const Ee={...xe.scopedVars,__interval:{text:this.datasource.interval,value:this.datasource.interval},__interval_ms:{text:i.intervalToMs(this.datasource.interval),value:i.intervalToMs(this.datasource.interval)},...this.datasource.getRangeScopedVars(xe.range)},se=this.templateSrv.replace(Fe,Ee,this.datasource.interpolateQueryExpr),ae=new q(this.datasource,se);return(0,ie.H)(ae.process(xe.range)).pipe((0,s.T)(Ce=>({data:Ce})))}}const De="60s",pe=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels"],Ne="-Instant";class Le extends E.iy{constructor(xe,Fe=(0,h.w)(),Ee){super(xe),this.templateSrv=Fe,this.init=async()=>{this.disableRecordingRules||this.loadRules(),this.exemplarsAvailable=await this.areExemplarsAvailable()},this.processAnnotationResponse=(se,ae)=>{const fe=(0,y.bE)({data:ae}).data;if(!fe||!fe.length)return[];const Ce=se.annotation,{tagKeys:Re="",titleFormat:Oe="",textFormat:ze=""}=Ce,Xe=i.intervalToSeconds(Ce.step||De)*1e3,Ze=Re.split(","),et=[];for(const nt of fe){if(nt.fields.length===0)continue;const lt=nt.fields[0],rt=nt.fields[1],ut=rt?.labels||{},Et=Object.keys(ut).filter(Tt=>Ze.includes(Tt)).map(Tt=>ut[Tt]),Ct=[];let Ut=0;rt.values.forEach(Tt=>{let Pn,ft;const Mt=lt.values[Ut];se.annotation.useValueForTime?(Pn=Math.floor(parseFloat(Tt)),ft=1):(Pn=Math.floor(parseFloat(Mt)),ft=parseFloat(Tt)),Ut++,Ct.push([Pn,ft])});const Wt=Ct.filter(Tt=>Tt[1]>0).map(Tt=>Tt[0]);let ot=null;for(const Tt of Wt){if(ot&&(ot.timeEnd??0)+Xe>=Tt){ot.timeEnd=Tt;continue}ot&&et.push(ot),ot={time:Tt,timeEnd:Tt,annotation:Ce,title:(0,c.j)(Oe,ut),tags:Et,text:(0,c.j)(ze,ut)}}ot&&(ot.timeEnd=Wt[Wt.length-1],et.push(ot))}return et},this.type="prometheus",this.id=xe.id,this.url=xe.url,this.access=xe.access,this.basicAuth=xe.basicAuth,this.withCredentials=xe.withCredentials,this.interval=xe.jsonData.timeInterval||"15s",this.queryTimeout=xe.jsonData.queryTimeout,this.httpMethod=xe.jsonData.httpMethod||"GET",this.exemplarTraceIdDestinations=xe.jsonData.exemplarTraceIdDestinations,this.hasIncrementalQuery=xe.jsonData.incrementalQuerying??!1,this.ruleMappings={},this.languageProvider=Ee??new R.Ay(this),this.lookupsDisabled=xe.jsonData.disableMetricsLookup??!1,this.customQueryParameters=new URLSearchParams(xe.jsonData.customQueryParameters),this.datasourceConfigurationPrometheusFlavor=xe.jsonData.prometheusType,this.datasourceConfigurationPrometheusVersion=xe.jsonData.prometheusVersion,this.defaultEditor=xe.jsonData.defaultEditor,this.disableRecordingRules=xe.jsonData.disableRecordingRules??!1,this.variables=new We(this,this.templateSrv),this.exemplarsAvailable=!0,this.cacheLevel=xe.jsonData.cacheLevel??K.fD.Low,this.cache=new X.$i({getTargetSignature:this.getPrometheusTargetSignature.bind(this),overlapString:xe.jsonData.incrementalQueryOverlapWindow??X.Dr,profileFunction:this.getPrometheusProfileData.bind(this)}),this.annotations={QueryEditor:A}}getQueryDisplayText(xe){return xe.expr}getPrometheusProfileData(xe,Fe){return{interval:Fe.interval??xe.interval,expr:this.interpolateString(Fe.expr),datasource:"Prometheus"}}getPrometheusTargetSignature(xe,Fe){return`${this.interpolateString(Fe.expr)}|${Fe.interval??xe.interval}|${JSON.stringify(xe.rangeRaw??"")}|${Fe.exemplar}`}hasLabelsMatchAPISupport(){return this._isDatasourceVersionGreaterOrEqualTo("2.24.0",K.N1.Prometheus)||this._isDatasourceVersionGreaterOrEqualTo("2.0.0",K.N1.Mimir)||this._isDatasourceVersionGreaterOrEqualTo("1.11.0",K.N1.Cortex)||this._isDatasourceVersionGreaterOrEqualTo("0.18.0",K.N1.Thanos)}_isDatasourceVersionGreaterOrEqualTo(xe,Fe){return!this.datasourceConfigurationPrometheusVersion||!this.datasourceConfigurationPrometheusFlavor?!0:Fe!==this.datasourceConfigurationPrometheusFlavor?!1:l().gte(this.datasourceConfigurationPrometheusVersion,xe)}_addTracingHeaders(xe,Fe){xe.headers={},this.access==="proxy"&&(xe.headers["X-Dashboard-UID"]=Fe.dashboardUID,xe.headers["X-Panel-Id"]=Fe.panelId)}directAccessError(){return(0,n.$)(()=>new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode."))}_request(xe,Fe,Ee={}){if(this.access==="direct")return this.directAccessError();Fe=Fe||{};for(const[fe,Ce]of this.customQueryParameters)Fe[fe]==null&&(Fe[fe]=Ce);let se=this.url+xe;xe.startsWith(`/api/datasources/uid/${this.uid}`)&&(se=xe);const ae=(0,t.defaults)(Ee,{url:se,method:this.httpMethod,headers:{}});return ae.method==="GET"?Fe&&Object.keys(Fe).length&&(ae.url=ae.url+(ae.url.search(/\?/)>=0?"&":"?")+Object.entries(Fe).map(([fe,Ce])=>`${encodeURIComponent(fe)}=${encodeURIComponent(Ce)}`).join("&")):(ae.headers["Content-Type"]="application/x-www-form-urlencoded",ae.data=Fe),(this.basicAuth||this.withCredentials)&&(ae.withCredentials=!0),this.basicAuth&&(ae.headers.Authorization=this.basicAuth),(0,a.AI)().fetch(ae)}async importFromAbstractQueries(xe){return xe.map(Fe=>this.languageProvider.importFromAbstractQuery(Fe))}async exportToAbstractQueries(xe){return xe.map(Fe=>this.languageProvider.exportToAbstractQuery(Fe))}async metadataRequest(xe,Fe={},Ee){if(pe.some(se=>xe.includes(se)))try{return await(0,r.s)(this._request(`/api/datasources/uid/${this.uid}/resources${xe}`,Fe,{method:this.httpMethod,hideFromInspector:!0,showErrorAlert:!1,...Ee}))}catch(se){if(this.httpMethod==="POST"&&(0,a.NF)(se)&&(se.status===405||se.status===400))console.warn("Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.");else throw se}return await(0,r.s)(this._request(`/api/datasources/uid/${this.uid}/resources${xe}`,Fe,{method:"GET",hideFromInspector:!0,...Ee}))}interpolateQueryExpr(xe=[],Fe){if(!Fe.multi&&!Fe.includeAll)return at(xe);if(typeof xe=="string")return Ye(xe);const Ee=xe.map(se=>Ye(se));return Ee.length===1?Ee[0]:"("+Ee.join("|")+")"}targetContainsTemplate(xe){return this.templateSrv.containsTemplate(xe.expr)}shouldRunExemplarQuery(xe,Fe){if(xe.exemplar){const Ee=this.languageProvider.histogramMetrics.find(fe=>xe.expr.includes(fe)),se=Fe.targets.findIndex(fe=>fe.refId===xe.refId),ae=Fe.targets.slice(0,se).filter(fe=>!fe.hide);return!!(!Ee||Ee&&!ae.some(fe=>fe.expr.includes(Ee)))}return!1}processTargetV2(xe,Fe){const Ee=[],se={...xe,exemplar:this.shouldRunExemplarQuery(xe,Fe),requestId:Fe.panelId+xe.refId,utcOffsetSec:Fe.range.to.utcOffset()*60};return v.$.featureToggles.promQLScope&&(se.scope=Fe.scope),xe.instant&&xe.range?Ee.push({...se,refId:se.refId,instant:!1},{...se,refId:se.refId+Ne,range:!1}):Ee.push(se),Ee}query(xe){if(this.access==="direct")return this.directAccessError();let Fe,Ee;const se=xe.targets.some(Ce=>Ce.instant);this.hasIncrementalQuery&&!se?(Ee=this.cache.requestInfo(xe),Fe=Ee.requests[0]):Fe=xe;const ae=Fe.targets.map(Ce=>this.processTargetV2(Ce,Fe)),fe=new Date;return super.query({...Fe,targets:ae.flat()}).pipe((0,s.T)(Ce=>{const Re={...Ce,data:this.cache.procFrames(xe,Ee,Ce.data)};return(0,j.J3)(Re,xe,{exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})}),(0,o.M)(Ce=>{te(Ce,xe,fe)}))}createQuery(xe,Fe,Ee,se){const ae={hinting:xe.hinting,instant:xe.instant,exemplar:xe.exemplar,step:0,expr:"",refId:xe.refId,start:0,end:0},fe=Math.ceil(se-Ee);let Ce=i.intervalToSeconds(Fe.interval);const Re=i.intervalToSeconds(this.templateSrv.replace(xe.interval||Fe.interval,Fe.scopedVars)),Oe=xe.interval?i.intervalToSeconds(this.templateSrv.replace(xe.interval,Fe.scopedVars)):i.intervalToSeconds(this.interval),ze=xe.intervalFactor||1,Xe=this.adjustInterval(Ce,Re,fe,ze);let Ze={...Fe.scopedVars,...this.getRangeScopedVars(Fe.range),...this.getRateIntervalScopedVariable(Xe,Oe)};Ce!==Xe&&(Ce=Xe,Ze=Object.assign({},Fe.scopedVars,{__interval:{text:Ce+"s",value:Ce+"s"},__interval_ms:{text:Ce*1e3,value:Ce*1e3},...this.getRateIntervalScopedVariable(Ce,Oe),...this.getRangeScopedVars(Fe.range)})),ae.step=Ce;let et=xe.expr;et=this.enhanceExprWithAdHocFilters(Fe.filters,et),ae.expr=this.templateSrv.replace(et,Ze,this.interpolateQueryExpr);const nt=He(Ee,se,ae.step,Fe.range.to.utcOffset()*60);return ae.start=nt.start,ae.end=nt.end,this._addTracingHeaders(ae,Fe),ae}getRateIntervalScopedVariable(xe,Fe){Fe===0&&(Fe=15);const Ee=Math.max(xe+Fe,4*Fe);return{__rate_interval:{text:Ee+"s",value:Ee+"s"}}}adjustInterval(xe,Fe,Ee,se){let ae=Ee/11e3;return ae>1&&(ae=Math.ceil(ae)),Math.max(xe*se,Fe,ae)}metricFindQuery(xe,Fe){if(!xe)return Promise.resolve([]);const Ee={__interval:{text:this.interval,value:this.interval},__interval_ms:{text:i.intervalToMs(this.interval),value:i.intervalToMs(this.interval)},...this.getRangeScopedVars(Fe?.range??(0,u.E2)())},se=this.templateSrv.replace(xe,Ee,this.interpolateQueryExpr);return new q(this,se).process(Fe?.range??(0,u.E2)())}getRangeScopedVars(xe){const Fe=xe.to.diff(xe.from),Ee=Math.round(Fe/1e3);return{__range_ms:{text:Fe,value:Fe},__range_s:{text:Ee,value:Ee},__range:{text:Ee+"s",value:Ee+"s"}}}async annotationQuery(xe){if(this.access==="direct"){const fe=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return Promise.reject(fe)}const Fe=xe.annotation,{expr:Ee=""}=Fe;if(!Ee)return Promise.resolve([]);const se=xe.annotation.step||De,ae={expr:Ee,range:!0,instant:!1,exemplar:!1,interval:se,refId:"X",datasource:this.getRef()};return await(0,r.s)((0,a.AI)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:((0,B.mv)(xe.range.from,!1)*1e3).toString(),to:((0,B.mv)(xe.range.to,!0)*1e3).toString(),queries:[this.applyTemplateVariables(ae,{})]},requestId:`prom-query-${Fe.name}`}).pipe((0,s.T)(fe=>this.processAnnotationResponse(xe,fe.data))))}async getTagKeys(xe){if(!xe||xe.filters.length===0)return await this.languageProvider.fetchLabels(xe.timeRange),this.languageProvider.getLabelKeys().map(ae=>({value:ae,text:ae}));const Fe=xe.filters.map(ae=>({label:ae.key,value:ae.value,op:ae.operator})),Ee=U.z.renderLabels(Fe);let se=await this.languageProvider.fetchLabelsWithMatch(Ee);return Object.keys(se).filter(ae=>!xe.filters.find(fe=>fe.key===ae)).map(ae=>({value:ae,text:ae}))}async getTagValues(xe){const Fe=xe.filters.map(fe=>({label:fe.key,value:fe.value,op:fe.operator})),Ee=U.z.renderLabels(Fe);if(this.hasLabelsMatchAPISupport())return(await this.languageProvider.fetchSeriesValuesWithMatch(xe.key,Ee,xe.timeRange)).map(fe=>({value:fe,text:fe}));const se=this.getTimeRangeParams(xe.timeRange??(0,u.E2)());return(await this.metadataRequest(`/api/v1/label/${xe.key}/values`,se))?.data?.data?.map(fe=>({text:fe}))??[]}interpolateVariablesInQueries(xe,Fe,Ee){let se=xe;return xe&&xe.length&&(se=xe.map(ae=>{const fe=this.templateSrv.replace(ae.expr,Fe,this.interpolateQueryExpr),Ce=this.enhanceExprWithAdHocFilters(Ee,fe);return{...ae,datasource:this.getRef(),expr:Ce,interval:this.templateSrv.replace(ae.interval,Fe)}})),se}getQueryHints(xe,Fe){return k(xe.expr??"",Fe,this)}getInitHints(){return ee(this)}async loadRules(){try{const Fe=(await this.metadataRequest("/api/v1/rules",{},{showErrorAlert:!1})).data?.data?.groups;Fe&&(this.ruleMappings=je(Fe))}catch(xe){console.log("Rules API is experimental. Ignore next error."),console.error(xe)}}async areExemplarsAvailable(){try{return(await this.metadataRequest("/api/v1/query_exemplars",{query:"test",start:(0,f.KQ)().subtract(30,"minutes").valueOf().toString(),end:(0,f.KQ)().valueOf().toString()},{showErrorAlert:!1})).data.status==="success"}catch{return!1}}modifyQuery(xe,Fe){let Ee=xe.expr??"";switch(Fe.type){case"ADD_FILTER":{const{key:se,value:ae}=Fe.options??{};se&&ae&&(Ee=(0,g.t)(Ee,se,ae));break}case"ADD_FILTER_OUT":{const{key:se,value:ae}=Fe.options??{};se&&ae&&(Ee=(0,g.t)(Ee,se,ae,"!="));break}case"ADD_HISTOGRAM_QUANTILE":{Ee=`histogram_quantile(0.95, sum(rate(${Ee}[$__rate_interval])) by (le))`;break}case"ADD_RATE":{Ee=`rate(${Ee}[$__rate_interval])`;break}case"ADD_SUM":{Ee=`sum(${Ee.trim()}) by ($1)`;break}case"EXPAND_RULES":{Fe.options&&(Ee=(0,B.P_)(Ee,Fe.options));break}default:break}return{...xe,expr:Ee}}getAdjustedInterval(xe){return(0,B.Xd)(this.cacheLevel,xe)}getTimeRangeParams(xe){return{start:(0,B.mv)(xe.from,!1).toString(),end:(0,B.mv)(xe.to,!0).toString()}}getOriginalMetricName(xe){return(0,j.hF)(xe)}enhanceExprWithAdHocFilters(xe,Fe){return!xe||xe.length===0?Fe:xe.reduce((se,ae)=>{const{key:fe,operator:Ce}=ae;let{value:Re}=ae;return(Ce==="=~"||Ce==="!~")&&(Re=at(Re)),(0,g.t)(se,fe,Re,Ce)},Fe)}filterQuery(xe){return!(xe.hide||!xe.expr)}applyTemplateVariables(xe,Fe,Ee){const se={...Fe};se.__interval={value:"$__interval"},se.__interval_ms={value:"$__interval_ms"};const ae=this.templateSrv.replace(xe.expr,se,this.interpolateQueryExpr),fe=this.enhanceExprWithAdHocFilters(Ee,ae);return{...xe,expr:fe,interval:this.templateSrv.replace(xe.interval,se),legendFormat:this.templateSrv.replace(xe.legendFormat,se)}}getVariables(){return this.templateSrv.getVariables().map(xe=>`$${xe.name}`)}interpolateString(xe,Fe){return this.templateSrv.replace(xe,Fe,this.interpolateQueryExpr)}getDebounceTimeInMilliseconds(){switch(this.cacheLevel){case K.fD.Medium:return 600;case K.fD.High:return 1200;default:return 350}}getDaysToCacheMetadata(){switch(this.cacheLevel){case K.fD.Medium:return 7;case K.fD.High:return 30;default:return 1}}getCacheDurationInMinutes(){return(0,B.u3)(this.cacheLevel)}getDefaultQuery(xe){const Fe={refId:"A",expr:"",range:!0,instant:!1};return xe===d.Jk.UnifiedAlerting?{...Fe,instant:!0,range:!1}:xe===d.Jk.Explore?{...Fe,instant:!0,range:!0}:Fe}}function He($e,xe,Fe,Ee){const se=Math.floor((xe+Ee)/Fe)*Fe-Ee,ae=Math.floor(($e+Ee)/Fe)*Fe-Ee;return{end:se,start:ae}}function je($e){return $e.reduce((xe,Fe)=>Fe.rules.filter(Ee=>Ee.type==="recording").reduce((Ee,se)=>({...Ee,[se.name]:se.query}),xe),{})}function at($e){return typeof $e=="string"?$e.replace(/\\/g,"\\\\").replace(/'/g,"\\\\'"):$e}function Ye($e){return typeof $e=="string"?$e.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]\'+?.()|]/g,"\\\\$&"):$e}},32799:(Y,I,e)=>{"use strict";e.d(I,{AU:()=>v,Ay:()=>P,OP:()=>E,pK:()=>a,xB:()=>y});var t=e(2543),n=e.n(t),r=e(28848),s=e.n(r),o=e(40187),m=e(43127),l=e(73372),i=e(45889),c=e(69470),u=e(69120);const f=["job","instance"],d="{}",E=1e4,h=D=>({headers:{"X-Grafana-Cache":`private, max-age=${D}`}});function y(D,T){if(!T[D])return;const{type:M,help:O}=T[D];return`${M.toUpperCase()}: ${O}`}function a(D,T){if(T[D])return T[D].help}function v(D,T){if(T[D])return T[D].type}const g=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/,b=86400;class P extends o.Is{constructor(T,M){super(),this.labelKeys=[],this.request=async(O,S,p={},x)=>{try{return(await this.datasource.metadataRequest(O,p,x)).data.data}catch(A){console.error(A)}return S},this.start=async O=>(this.timeRange=O??(0,m.E2)(),this.datasource.lookupsDisabled?[]:(this.metrics=await this.fetchLabelValues("__name__")||[],this.histogramMetrics=(0,i.Rg)(this.metrics).sort(),Promise.all([this.loadMetricsMetadata(),this.fetchLabels()]))),this.fetchLabelValues=async O=>{const S=this.datasource.getAdjustedInterval(this.timeRange),x=`/api/v1/label/${this.datasource.interpolateString(O)}/values`;return await this.request(x,[],S,this.getDefaultCacheHeaders())??[]},this.getSeriesValues=async(O,S)=>this.datasource.hasLabelsMatchAPISupport()?await this.fetchSeriesValuesWithMatch(O,S):(await this.getSeries(S))[O]??[],this.fetchSeriesValuesWithMatch=async(O,S,p=this.timeRange)=>{const x=O?this.datasource.interpolateString(O):null,A=S?this.datasource.interpolateString(S):null,B={...this.datasource.getAdjustedInterval(p),...A&&{"match[]":A}};return await this.request(`/api/v1/label/${x}/values`,[],B,this.getDefaultCacheHeaders())??[]},this.getSeriesLabels=async(O,S)=>{let p,x;this.datasource.hasLabelsMatchAPISupport()?(S.push({name:"__name__",value:"",op:"!="}),x=await this.fetchSeriesLabelsMatch(O),p=Object.keys(x)):(x=await this.getSeries(O),p=Object.keys(x));const A=new Set(S.map(R=>R.name));return p.filter(R=>!A.has(R))},this.fetchLabelsWithMatch=async(O,S)=>this.datasource.hasLabelsMatchAPISupport()?this.fetchSeriesLabelsMatch(O,S):this.fetchSeriesLabels(O,S),this.fetchSeriesLabels=async(O,S)=>{const p=this.datasource.interpolateString(O),A={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":p},B=await this.request("/api/v1/series",[],A,this.getDefaultCacheHeaders()),{values:U}=(0,i.P7)(B,S);return U},this.fetchSeriesLabelsMatch=async(O,S)=>{const p=this.datasource.interpolateString(O),A={...this.datasource.getAdjustedInterval(this.timeRange),"match[]":p};return(await this.request("/api/v1/labels",[],A,this.getDefaultCacheHeaders())).reduce((U,F)=>({...U,[F]:""}),{})},this.fetchSeries=async O=>{const S="/api/v1/series",x={...this.datasource.getTimeRangeParams(this.timeRange),"match[]":O};return await this.request(S,{},x,this.getDefaultCacheHeaders())},this.fetchDefaultSeries=(0,t.once)(async()=>{const O=await Promise.all(f.map(S=>this.fetchLabelValues(S)));return f.reduce((S,p,x)=>({...S,[p]:O[x]}),{})}),this.datasource=T,this.histogramMetrics=[],this.timeRange=(0,m.E2)(),this.metrics=[],Object.assign(this,M)}getDefaultCacheHeaders(){if(this.datasource.cacheLevel!==u.fD.None)return h(this.datasource.getCacheDurationInMinutes()*60)}cleanText(T){return T.split(g).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return c.Ay}async loadMetricsMetadata(){const T=h(this.datasource.getDaysToCacheMetadata()*b);this.metricsMetadata=(0,i.DX)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1,...T}))}getLabelKeys(){return this.labelKeys}importFromAbstractQuery(T){return(0,i.pt)(T)}exportToAbstractQuery(T){const M=T.expr;if(!M||M.length===0)return{refId:T.refId,labelMatchers:[]};const O=s().tokenize(M,c.Ay),S=(0,i.VH)(O),p=C(M,O);return p&&p.length>0&&S.push({name:"__name__",operator:l.D_.Equal,value:p}),{refId:T.refId,labelMatchers:S}}async getSeries(T,M){if(this.datasource.lookupsDisabled)return{};try{return T===d?await this.fetchDefaultSeries():await this.fetchSeriesLabels(T,M)}catch(O){return console.error(O),{}}}async getLabelValues(T){return await this.fetchLabelValues(T)}async fetchLabels(T){T&&(this.timeRange=T);const M="/api/v1/labels",O=this.datasource.getAdjustedInterval(this.timeRange);this.labelFetchTs=Date.now().valueOf();const S=await this.request(M,[],O,this.getDefaultCacheHeaders());return Array.isArray(S)&&(this.labelKeys=S.slice().sort()),[]}}function C(D,T){let M="";for(const O of T)if(typeof O=="string"){M=O;break}return M}},45889:(Y,I,e)=>{"use strict";e.d(I,{Cs:()=>x,DX:()=>b,P7:()=>E,P_:()=>v,Qn:()=>p,Rg:()=>d,VH:()=>K,Xd:()=>w,eN:()=>P,ky:()=>N,mv:()=>V,pt:()=>U,u3:()=>L});var t=e(2543),n=e.n(t),r=e(28848),s=e.n(r),o=e(73372),m=e(77678),l=e(85858),i=e(87324),c=e(32799),u=e(95842),f=e(69120);const d=z=>{const J=new Set,G=new RegExp("_bucket($|:)");for(let H=0;H<z.length;H++){const q=z[H];G.test(q)&&J.add(q)}return[...J]};function E(z,J=!1){const G={};z.forEach(q=>{const{__name__:le,...me}=q;J&&(G.__name__=G.__name__||new Set,G.__name__.has(le)||G.__name__.add(le)),Object.keys(me).forEach(k=>{G[k]||(G[k]=new Set),G[k].has(me[k])||G[k].add(me[k])})});const H={};return T(Object.keys(G)).forEach(q=>{H[q]=T(Array.from(G[q]))}),{values:H,keys:Object.keys(H)}}const h=/\{[^}]*?(\}|$)/,y=/\b(\w+)(!?=~?)("[^"\n]*?")(,)?(\s*)?/g;function a(z,J=1){if(!z.match(h)){if(z.match(/^[A-Za-z:][\w:]*$/))return{selector:`{__name__="${z}"}`,labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+z)}const G=z.slice(0,J),H=G.lastIndexOf("{"),q=G.lastIndexOf("}");if(H===-1)throw new Error("Not inside selector, missing open brace: "+G);if(q>-1&&q>H)throw new Error("Not inside selector, previous selector already closed: "+G);const le=z.slice(J),k=le.indexOf("}")+J,ee=le.indexOf("{"),X=ee+J;if(k===-1)throw new Error("Not inside selector, missing closing brace in suffix: "+le);if(ee>-1&&X<k)throw new Error("Not inside selector, next selector opens before this one closed: "+le);const j=z.slice(H,k),ne={};j.replace(y,(ge,re,ye,Be)=>{const ve=z.indexOf(ge),Me=ve+re.length+ye.length+1,ke=ve+re.length+ye.length+Be.length-1;return(J<Me||J>ke)&&(ne[re]={value:Be,operator:ye}),""});const oe=z.slice(0,H).match(/[A-Za-z:][\w:]*$/);oe&&(ne.__name__={value:`"${oe[0]}"`,operator:"="});const ie=Object.keys(ne).sort(),be=["{",ie.map(ge=>`${ge}${ne[ge].operator}${ne[ge].value}`).join(","),"}"].join("");return{labelKeys:ie,selector:be}}function v(z,J){const G=me=>new RegExp(`(\\s|\\(|^)(${me})(\\s|$|\\(|\\[|\\{)`,"ig"),H=Object.keys(J).reduce((me,k)=>{let ee=[],X=[],j=[];return me.filter(Boolean).forEach((ne,te)=>{ne.match(G(k))&&(ee=ne.split(k),ee.length===2?(j.push(te),X.push(...[ee[0],k,ee[1]].filter(Boolean))):ee.length>2&&(j.push(te),ee=ee.map(ie=>ie===""?k:ie),X.push(...ee)))}),j.forEach(ne=>me[ne]=""),me=me.filter(Boolean),me.push(...X),me},[z]);let q=!1;return H.map((me,k)=>{if(q)return q=!1,"";if(J[me]){const ee=J[me];if(k+1!==H.length&&H[k+1].match(y)){q=!0;const X=H[k+1],j=/(\)\{|\}\{|\]\{)/;return g(ee+X,j)}else return ee}return me}).filter(Boolean).join("")}function g(z,J){const G=z.match(J);if(!G)return z;const H=G.index??0,q=z.slice(0,H+1),le=z.slice(H+1),me=[];le.replace(y,(j,ne,te,oe,ie,ue)=>(me.push({key:ne,operator:te,value:oe,comma:ie,space:ue}),""));let k=q;me.filter(Boolean).forEach(j=>{const ne=j.value.slice(1,-1);k=(0,i.t)(k,j.key,ne,j.operator)});let ee=me.reduce((j,ne)=>(j+=`${ne.key}${ne.operator}${ne.value}${ne.comma??""}${ne.space??""}`,j),"");ee="{"+ee+"}";const X=le.replace(ee,"");return k+X}function b(z){if(!z)return z;const J={},G={};for(const q in z){const le=z[q][0];J[q]=le,le.type==="histogram"&&(G[`${q}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${le.help})`},G[`${q}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${le.help})`},G[`${q}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${le.help})`}),le.type==="summary"&&(G[`${q}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${le.help})`},G[`${q}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${le.help})`})}const H={};return H.ALERTS={type:"counter",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."},{...J,...G,...H}}function P(z){return C(z/1e3)}function C(z){return Math.floor(z/60)}function D(z,J=1){return Math.ceil(z/60)-Math.ceil(z/60)%J}function T(z){return z.slice(0,c.OP)}function M(z){return z&&z.length>=SUGGESTIONS_LIMIT?`, limited to the first ${SUGGESTIONS_LIMIT} received items`:""}const O=/[*+?()|\\.\[\]{}^$]/g;function S(z){return z.replace(O,"\\$&")}function p(z){return z.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function x(z){return p(S(z))}const A={"=":o.D_.Equal,"!=":o.D_.NotEqual,"=~":o.D_.EqualRegEx,"!~":o.D_.NotEqualRegEx},R=(0,t.invert)(A);function B(z){const J=z.labelMatchers.map(G=>{const H=R[G.operator];return H?`${G.name}${H}"${G.value}"`:""}).filter(G=>G!=="").join(", ");return J?`{${J}}`:""}function U(z){return{refId:z.refId,expr:B(z),range:!0}}function F(z){return typeof z.content=="string"?z.content:""}function K(z){const J=[];for(const G of z)if(G instanceof r.Token&&G.type==="context-labels"){let H="",q="",le="";const me=Array.isArray(G.content)?G.content:[G.content];for(let k of me)if(typeof k=="string"){let ee;ee=k,(ee==="="||ee==="!="||ee==="=~"||ee==="!~")&&(le=ee)}else if(k instanceof r.Token)switch(k.type){case"label-key":H=F(k);break;case"label-value":q=F(k),q=q.substring(1,q.length-1);const ee=A[le];ee&&J.push({name:H,operator:ee,value:q});break}}return J}function w(z,J){if(z===f.fD.None)return{start:V(J.from,!1).toString(),end:V(J.to,!0).toString()};const G=V(J.from,!1),H=(0,m.rs)(G,L(z)*60),q=V(J.to,!0),le=D(q,L(z))*60;if(H===le){const ee=le+L(z)*60;return{start:H.toString(),end:ee.toString()}}const me=H.toString(),k=le.toString();return{start:me,end:k}}function L(z){switch(z){case f.fD.Medium:return 10;case f.fD.High:return 60;default:return 1}}function V(z,J){return typeof z=="string"&&(z=l.parse(z,J)),Math.ceil(z.valueOf()/1e3)}function N(z,J){return J===void 0&&(J=u.o6),z.length=Math.min(z.length,J),z}},69470:(Y,I,e)=>{"use strict";e.d(I,{AW:()=>m,Ay:()=>c});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],r=null,s=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],m=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...s,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],l=m.map(u=>u.label),c={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${m.map(u=>u.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},47891:(Y,I,e)=>{"use strict";e.d(I,{l:()=>P,z:()=>C});var t=e(69470),n=e(56823),r=e(25378),s=e(41598),o=e(65820);function m(){return[{id:o.jN.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:o.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},{id:o.jN.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:o.Ag.Functions,defaultParams:["","$1","","(.*)"],renderer:n.kf,addOperationHandler:n.iZ},{id:o.jN.Ln,name:"Ln",params:[],defaultParams:[],category:o.Ag.Functions,renderer:n.jY,addOperationHandler:n.iZ},i(o.jN.Changes),i(o.jN.Rate,!0),i(o.jN.Irate),i(o.jN.Increase,!0),i(o.jN.Idelta),i(o.jN.Delta),l({id:o.jN.HoltWinters,params:[(0,n.z2)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:f,changeTypeHandler:c}),l({id:o.jN.PredictLinear,params:[(0,n.z2)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:n.nU,addOperationHandler:f,changeTypeHandler:c}),l({id:o.jN.QuantileOverTime,params:[(0,n.z2)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:n.Kl,addOperationHandler:f,changeTypeHandler:c}),...r.Iu,{id:o.jN.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:o.Ag.BinaryOps,renderer:(T,M,O)=>O,addOperationHandler:d},l({id:o.jN.Abs}),l({id:o.jN.Absent}),l({id:o.jN.Acos,category:o.Ag.Trigonometric}),l({id:o.jN.Acosh,category:o.Ag.Trigonometric}),l({id:o.jN.Asin,category:o.Ag.Trigonometric}),l({id:o.jN.Asinh,category:o.Ag.Trigonometric}),l({id:o.jN.Atan,category:o.Ag.Trigonometric}),l({id:o.jN.Atanh,category:o.Ag.Trigonometric}),l({id:o.jN.Ceil}),l({id:o.jN.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),l({id:o.jN.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),l({id:o.jN.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),l({id:o.jN.Cos,category:o.Ag.Trigonometric}),l({id:o.jN.Cosh,category:o.Ag.Trigonometric}),l({id:o.jN.DayOfMonth,category:o.Ag.Time}),l({id:o.jN.DayOfWeek,category:o.Ag.Time}),l({id:o.jN.DayOfYear,category:o.Ag.Time}),l({id:o.jN.DaysInMonth,category:o.Ag.Time}),l({id:o.jN.Deg}),i(o.jN.Deriv),l({id:o.jN.Exp}),l({id:o.jN.Floor}),l({id:o.jN.Group}),l({id:o.jN.Hour}),l({id:o.jN.LabelJoin,params:[{name:"Destination Label",type:"string",editor:s.r},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:s.r}],defaultParams:["",",",""],renderer:E,addOperationHandler:h}),l({id:o.jN.Log10}),l({id:o.jN.Log2}),l({id:o.jN.Minute}),l({id:o.jN.Month}),l({id:o.jN.Pi,renderer:T=>`${T.id}()`}),l({id:o.jN.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:n.jY}),l({id:o.jN.Rad}),i(o.jN.Resets),l({id:o.jN.Round,category:o.Ag.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),l({id:o.jN.Scalar}),l({id:o.jN.Sgn}),l({id:o.jN.Sin,category:o.Ag.Trigonometric}),l({id:o.jN.Sinh,category:o.Ag.Trigonometric}),l({id:o.jN.Sort}),l({id:o.jN.SortDesc}),l({id:o.jN.Sqrt}),l({id:o.jN.Stddev}),l({id:o.jN.Tan,category:o.Ag.Trigonometric}),l({id:o.jN.Tanh,category:o.Ag.Trigonometric}),l({id:o.jN.Time,renderer:T=>`${T.id}()`}),l({id:o.jN.Timestamp}),l({id:o.jN.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:T=>`${T.id}(${T.params[0]})`}),l({id:o.jN.Year})]}function l(D){return{...D,id:D.id,name:D.name??(0,n.DQ)(D.id),params:D.params??[],defaultParams:D.defaultParams??[],category:D.category??o.Ag.Functions,renderer:D.renderer??(D.params?n.kf:n.jY),addOperationHandler:D.addOperationHandler??n.iZ}}function i(D,T=!1){return{id:D,name:(0,n.DQ)(D),params:[(0,n.z2)(T)],defaultParams:[T?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:o.Ag.RangeFunctions,renderer:u,addOperationHandler:f,changeTypeHandler:c}}function c(D,T){return(D.params[0]==="$__rate_interval"&&T.defaultParams[0]!=="$__rate_interval"||D.params[0]==="$__interval"&&T.defaultParams[0]!=="$__interval")&&(D.params=T.defaultParams),D}function u(D,T,M){let O=(D.params??[])[0]??"5m";return`${T.id}(${M}[${O}])`}function f(D,T,M){const O={id:D.id,params:D.defaultParams};return T.operations.length>0&&M.getOperationDef(T.operations[0].id).addOperationHandler===f?{...T,operations:[O,...T.operations.slice(1)]}:{...T,operations:[O,...T.operations]}}function d(D,T){return{...T,binaryQueries:[...T.binaryQueries??[],{operator:"/",query:T}]}}function E(D,T,M){if(typeof D.params[1]!="string")throw"The separator must be a string";const O=`"${D.params[1]}"`;return`${D.id}(${M}, "${D.params[0]}", ${O}, "${D.params.slice(2).join(O)}")`}function h(D,T){const M={id:D.id,params:D.defaultParams};return{...T,operations:[...T.operations,M]}}function y(){return[...(0,n.G3)(o.jN.Sum),...(0,n.G3)(o.jN.Avg),...(0,n.G3)(o.jN.Min),...(0,n.G3)(o.jN.Max),...(0,n.G3)(o.jN.Count),...(0,n.jC)(o.jN.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(o.jN.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,n.jC)(o.jN.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),a(o.jN.SumOverTime),a(o.jN.AvgOverTime),a(o.jN.MinOverTime),a(o.jN.MaxOverTime),a(o.jN.CountOverTime),a(o.jN.LastOverTime),a(o.jN.PresentOverTime),a(o.jN.AbsentOverTime),a(o.jN.StddevOverTime)]}function a(D){return{id:D,name:(0,n.DQ)(D),params:[(0,n.z2)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:o.Ag.RangeFunctions,renderer:v,addOperationHandler:f}}function v(D,T,M){let O=(D.params??[])[0]??"$__interval";return`${T.id}(${M}[${O}])`}var g=e(83077);class b{constructor(T){this.categories=[],this.operationsRegistry=new g.O(T)}setOperationCategories(T){this.categories=T}getOperationsForCategory(T){return this.operationsRegistry.list().filter(M=>M.category===T&&!M.hideFromList)}getAlternativeOperations(T){return this.operationsRegistry.list().filter(M=>M.alternativesKey&&M.alternativesKey===T)}getCategories(){return this.categories}getOperationDef(T){return this.operationsRegistry.getIfExists(T)}renderOperations(T,M){for(const O of M){const S=this.operationsRegistry.getIfExists(O.id);if(!S)throw new Error(`Could not find operation ${O.id} in the registry`);T=S.renderer(O,S,T)}return T}renderBinaryQueries(T,M){if(M)for(const O of M)T=`${this.renderBinaryQuery(T,O)}`;return T}renderBinaryQuery(T,M){let O=T+` ${M.operator} `;return M.vectorMatches&&(O+=`${M.vectorMatchesType}(${M.vectorMatches}) `),O+this.renderQuery(M.query,!0)}renderLabels(T){if(T.length===0)return"";let M="{";for(const O of T)M!=="{"&&(M+=", "),M+=`${O.label}${O.op}"${O.value}"`;return M+"}"}renderQuery(T,M){let O=`${T.metric??""}${this.renderLabels(T.labels)}`;return O=this.renderOperations(O,T.operations),!M&&this.hasBinaryOp(T)&&T.binaryQueries?.length&&(O=`(${O})`),O=this.renderBinaryQueries(O,T.binaryQueries),M&&(this.hasBinaryOp(T)||T.binaryQueries?.length)&&(O=`(${O})`),O}hasBinaryOp(T){return T.operations.find(M=>this.getOperationDef(M.id)?.category===o.Ag.BinaryOps)!==void 0}}class P extends b{constructor(){super(()=>{const T=[...m(),...y()];for(const M of T){const O=t.AW.find(S=>S.insertText===M.id);O&&(M.documentation=O.documentation)}return T}),this.setOperationCategories([o.Ag.Aggregations,o.Ag.RangeFunctions,o.Ag.Functions,o.Ag.BinaryOps,o.Ag.Trigonometric,o.Ag.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:o.n5.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:o.n5.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:o.n5.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:o.n5.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const C=new P},25378:(Y,I,e)=>{"use strict";e.d(I,{AE:()=>s,C8:()=>r,Iu:()=>o});var t=e(56823),n=e(65820);const r=[{id:n.jN.Addition,name:"Add scalar",sign:"+"},{id:n.jN.Subtraction,name:"Subtract scalar",sign:"-"},{id:n.jN.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:n.jN.DivideBy,name:"Divide by scalar",sign:"/"},{id:n.jN.Modulo,name:"Modulo by scalar",sign:"%"},{id:n.jN.Exponent,name:"Exponent",sign:"^"},{id:n.jN.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:n.jN.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:n.jN.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:n.jN.LessThan,name:"Less than",sign:"<",comparison:!0},{id:n.jN.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:n.jN.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],s=r.reduce((l,i)=>(l[i.sign]={id:i.id,comparison:i.comparison},l),{}),o=r.map(l=>{const i=[{name:"Value",type:"number"}],c=[2];return l.comparison&&(i.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),c.push(!1)),{id:l.id,name:l.name,params:i,defaultParams:c,alternativesKey:"binary scalar operations",category:n.Ag.BinaryOps,renderer:m(l.sign),addOperationHandler:t.iZ}});function m(l){return function(c,u,f){let d=c.params[0],E="";return c.params.length===2&&(E=c.params[1]?" bool":""),`${f} ${l}${E} ${d}`}}},41598:(Y,I,e)=>{"use strict";e.d(I,{r:()=>m});var t=e(96540),n=e(50877),r=e(88323),s=e(47891),o=e(56823);function m({onChange:i,index:c,operationId:u,value:f,query:d,datasource:E}){const[h,y]=(0,t.useState)({});return t.createElement(r.l6,{inputId:(0,o.OS)(u,c),autoFocus:f===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{y({isLoading:!0});const a=await l(d,E);y({options:a,isLoading:void 0})},isLoading:h.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:h.options,value:(0,n.z)(f),onChange:a=>i(c,a.value)})}async function l(i,c){let u=i.labels;c.type==="prometheus"&&(u=[{label:"__name__",op:"=",value:i.metric},...i.labels]);const f=s.z.renderLabels(u),d=await c.languageProvider.fetchLabelsWithMatch(f);return Object.keys(d).map(E=>({label:E,value:E}))}},95842:(Y,I,e)=>{"use strict";e.d(I,{dm:()=>ae,o6:()=>se});var t=e(32196),n=e(76459),r=e.n(n),s=e(96540),o=e(23257),m=e.n(o),l=e(50877),i=e(13544),c=e(97801),u=e(81580),f=e(32264),d=e(40845),E=e(55852),h=e(14578),y=e(88824),a=e(40276),v=e(88323),g=e(39268),b=e(14186),P=e(12681),C=e(45889),D=e(71440),T=e(37390),M=e(10354),O=e(62930),S=e(60782),p=e(19727),x=e(19384),A=e(15292),R=e(56034),B=e(14110),U=e(32799),F=e(13567);const{setFilteredMetricCount:K}=F.Ow.actions;async function w(Oe,ze,Xe){let Ze=!0;const et=Oe.languageProvider.metricsMetadata;et&&Object.keys(et).length===0&&(Ze=!1);let nt={},lt={},rt;return rt=Xe?.map(ut=>{const Et=L(ut,Oe),Ct=`${ut}\xA6${Et.description}`;return nt[ut]=Et,lt[Ct]=Et,Et}),{isLoading:!1,hasMetadata:Ze,metrics:rt??[],metaHaystackDictionary:lt,nameHaystackDictionary:nt,totalMetricCount:rt?.length??0,filteredMetricCount:rt?.length??0}}function L(Oe,ze){let Xe=(0,U.AU)(Oe,ze.languageProvider.metricsMetadata);const Ze=(0,U.pK)(Oe,ze.languageProvider.metricsMetadata);return["histogram","summary"].forEach(nt=>{Ze?.toLowerCase().includes(nt)&&Xe!==nt&&(Xe+=` (${nt})`)}),{value:Oe,type:Xe,description:Ze}}function V(Oe,ze){const Xe=N(Oe);return!Oe.isLoading&&Oe.filteredMetricCount!==Xe.length&&ze(K(Xe.length)),J(Xe,Oe.pageNum,Oe.resultsPerPage)}function N(Oe){let ze=Oe.metrics;return Oe.fuzzySearchQuery&&!Oe.useBackend&&(Oe.fullMetaSearch?ze=Oe.metaHaystackOrder.map(Xe=>Oe.metaHaystackDictionary[Xe]):ze=Oe.nameHaystackOrder.map(Xe=>Oe.nameHaystackDictionary[Xe])),Oe.selectedTypes.length>0&&(ze=ze.filter((Xe,Ze)=>Oe.selectedTypes.some(nt=>Xe.type&&nt.value?Xe.type.includes(nt.value):!Xe.type&&nt.value==="no type"))),Oe.includeNullMetadata||(ze=ze.filter(Xe=>Xe.type!==void 0&&Xe.description!==void 0)),ze}function z(Oe){if(!Oe.metrics.length)return[];const ze=Oe.resultsPerPage===0?1:Oe.resultsPerPage,Xe=Math.floor(N(Oe).length/ze)+1;return[...Array(Xe).keys()].map(Ze=>Ze+1)}function J(Oe,ze,Xe){const Ze=Xe===0?1:Xe,et=ze===1?0:(ze-1)*Ze,nt=et+Ze;return Oe.slice(et,nt)}const G=(Oe,ze,Xe)=>Oe<1?1:Oe>Xe?Xe:Oe??ze;async function H(Oe,ze,Xe){const Ze=(0,D.b4)(Oe),et=ze.map(rt=>`,${rt.label}="${rt.value}"`),nt=`label_values({__name__=~".*${Ze}"${ze?et.join():""}},__name__)`;return await Xe.metricFindQuery(nt).then(rt=>rt.map(ut=>L(ut.text,Xe)))}function q(Oe,ze,Xe,Ze){switch(Oe){case"grafana_prom_metric_encycopedia_tracking":(0,B.rR)(Oe,{metric:Xe,hasMetadata:ze?.hasMetadata,totalMetricCount:ze?.totalMetricCount,fuzzySearchQuery:ze?.fuzzySearchQuery,fullMetaSearch:ze?.fullMetaSearch,selectedTypes:ze?.selectedTypes,useRegexSearch:ze?.useBackend,includeResultsWithoutMetadata:ze?.includeNullMetadata});case"grafana_prom_metric_encycopedia_disable_text_wrap_interaction":(0,B.rR)(Oe,{disableTextWrap:ze?.disableTextWrap});case"grafana_prometheus_metric_encyclopedia_open":(0,B.rR)(Oe,{query:Ze})}}const le=[{value:"counter",description:"A cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."},{value:"gauge",description:"A metric that represents a single numerical value that can arbitrarily go up and down."},{value:"histogram",description:"A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets."},{value:"summary",description:"A summary samples observations (usually things like request durations and response sizes) and can calculate configurable quantiles over a sliding time window."},{value:"unknown",description:"These metrics have been given the type unknown in the metadata."},{value:"no type",description:"These metrics have no defined type in the metadata."}],me={browse:"Search metrics by name",metadataSearchSwitch:"Include description in search",type:"Filter by type",includeNullMetadata:"Include results with no metadata",setUseBackend:"Enable regex search"};function k(Oe){const{state:ze,onChangeFullMetaSearch:Xe,onChangeIncludeNullMetadata:Ze,onChangeDisableTextWrap:et,onChangeUseBackend:nt}=Oe,lt=(0,d.$j)(),rt=ee(lt);return s.createElement(s.Fragment,null,s.createElement("div",{className:rt.selectItem},s.createElement(A.d,{"data-testid":Fe.searchWithMetadata,value:ze.fullMetaSearch,disabled:ze.useBackend||!ze.hasMetadata,onChange:()=>Xe()}),s.createElement("div",{className:rt.selectItemLabel},me.metadataSearchSwitch)),s.createElement("div",{className:rt.selectItem},s.createElement(A.d,{value:ze.includeNullMetadata,disabled:!ze.hasMetadata,onChange:()=>Ze()}),s.createElement("div",{className:rt.selectItemLabel},me.includeNullMetadata)),s.createElement("div",{className:rt.selectItem},s.createElement(A.d,{value:ze.disableTextWrap,onChange:()=>et()}),s.createElement("div",{className:rt.selectItemLabel},"Disable text wrap")),s.createElement("div",{className:rt.selectItem},s.createElement(A.d,{"data-testid":Fe.setUseBackend,value:ze.useBackend,onChange:()=>nt()}),s.createElement("div",{className:rt.selectItemLabel},me.setUseBackend,"\xA0"),s.createElement(R.m,{content:"Filter metric names by regex search, using an additional call on the Prometheus API.",placement:"bottom-end"},s.createElement(h.I,{name:"info-circle",size:"xs",className:rt.settingsIcon}))))}function ee(Oe){return{settingsIcon:(0,t.css)`
      color: ${Oe.colors.text.secondary};
    `,selectItem:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 4px 0;
    `,selectItemLabel:(0,t.css)`
      margin: 0 0 0 ${Oe.spacing(1)};
      align-self: center;
      color: ${Oe.colors.text.secondary};
      font-size: 12px;
    `}}var X=e(67061);function j({feedbackUrl:Oe}){const ze=(0,d.of)(ne);return s.createElement(X.B,null,s.createElement("a",{href:Oe,className:ze.link,title:"The metrics explorer is new, please let us know how we can improve it",target:"_blank",rel:"noreferrer noopener"},s.createElement(h.I,{name:"comment-alt-message"})," Give feedback"))}function ne(Oe){return{link:(0,t.css)({color:Oe.colors.text.secondary,fontSize:Oe.typography.bodySmall.fontSize,":hover":{color:Oe.colors.text.link},margin:"-25px 0 30px 0"})}}var te=e(29121);function oe(Oe){const{metrics:ze,onChange:Xe,onClose:Ze,query:et,state:nt,disableTextWrap:lt}=Oe,rt=(0,d.$j)(),ut=ie(rt,lt);function Et(Tt){Tt.value&&(Xe({...et,metric:Tt.value}),q("grafana_prom_metric_encycopedia_tracking",nt,Tt.value),Ze())}function Ct(Tt){return nt.fullMetaSearch&&Tt?s.createElement(s.Fragment,null,s.createElement("td",null,Gt(Tt.type??"")),s.createElement("td",null,s.createElement(m(),{textToHighlight:Tt.description??"",searchWords:nt.metaHaystackMatches,autoEscape:!0,highlightClassName:ut.matchHighLight}))):s.createElement(s.Fragment,null,s.createElement("td",null,Gt(Tt.type??"")),s.createElement("td",null,Tt.description??""))}function Ut(Tt,Pn,ft){return s.createElement(s.Fragment,null,Tt,s.createElement("span",{className:ut.tooltipSpace},s.createElement(R.m,{content:s.createElement(s.Fragment,null,"When creating a ",Pn,", Prometheus exposes multiple series with the type counter."," ",(0,te.jW)(ft)),placement:"bottom-start",interactive:!0},s.createElement(h.I,{name:"info-circle",size:"xs"}))))}function Gt(Tt){return Tt?Tt.includes("(summary)")?Ut(Tt,"summary","https://prometheus.io/docs/concepts/metric_types/#summary"):Tt.includes("(histogram)")?Ut(Tt,"histogram","https://prometheus.io/docs/concepts/metric_types/#histogram"):Tt:""}function Wt(){let Tt;return nt.fuzzySearchQuery||(Tt="There are no metrics found in the data source."),et.labels.length>0&&(Tt="There are no metrics found. Try to expand your label filters."),(nt.fuzzySearchQuery||nt.selectedTypes.length>0)&&(Tt="There are no metrics found. Try to expand your search and filters."),s.createElement("tr",{className:ut.noResults},s.createElement("td",{colSpan:3},Tt))}function ot(Tt){return Tt.useBackend?[Tt.fuzzySearchQuery]:Tt.fullMetaSearch?Tt.metaHaystackMatches:Tt.nameHaystackMatches}return s.createElement("table",{className:ut.table},s.createElement("thead",{className:ut.stickyHeader},s.createElement("tr",null,s.createElement("th",{className:`${ut.nameWidth} ${ut.tableHeaderPadding}`},"Name"),nt.hasMetadata&&s.createElement(s.Fragment,null,s.createElement("th",{className:`${ut.typeWidth} ${ut.tableHeaderPadding}`},"Type"),s.createElement("th",{className:`${ut.descriptionWidth} ${ut.tableHeaderPadding}`},"Description")),s.createElement("th",{className:ut.selectButtonWidth}," "))),s.createElement("tbody",null,s.createElement(s.Fragment,null,ze.length>0&&ze.map((Tt,Pn)=>s.createElement("tr",{key:Tt?.value??Pn,className:ut.row},s.createElement("td",{className:ut.nameOverflow},s.createElement(m(),{textToHighlight:Tt?.value??"",searchWords:ot(nt),autoEscape:!0,highlightClassName:ut.matchHighLight})),nt.hasMetadata&&Ct(Tt),s.createElement("td",null,s.createElement(E.$n,{size:"md",variant:"secondary",onClick:()=>Et(Tt),className:ut.centerButton},"Select")))),ze.length===0&&!nt.isLoading&&Wt())))}const ie=(Oe,ze)=>({table:(0,t.css)`
      ${ze?"":"table-layout: fixed;"}
      border-radius: ${Oe.shape.radius.default};
      width: 100%;
      white-space: ${ze?"nowrap":"normal"};
      td {
        padding: ${Oe.spacing(1)};
      }

      td,
      th {
        min-width: ${Oe.spacing(3)};
        border-bottom: 1px solid ${Oe.colors.border.weak};
      }
    `,row:(0,t.css)`
      label: row;
      border-bottom: 1px solid ${Oe.colors.border.weak}
      &:last-child {
        border-bottom: 0;
      }
    `,tableHeaderPadding:(0,t.css)`
      padding: 8px;
    `,matchHighLight:(0,t.css)`
      background: inherit;
      color: ${Oe.components.textHighlight.text};
      background-color: ${Oe.components.textHighlight.background};
    `,nameWidth:(0,t.css)`
      ${ze?"":"width: 37.5%;"}
    `,nameOverflow:(0,t.css)`
      ${ze?"":"overflow-wrap: anywhere;"}
    `,typeWidth:(0,t.css)`
      ${ze?"":"width: 15%;"}
    `,descriptionWidth:(0,t.css)`
      ${ze?"":"width: 35%;"}
    `,selectButtonWidth:(0,t.css)`
      ${ze?"":"width: 12.5%;"}
    `,stickyHeader:(0,t.css)`
      position: sticky;
      top: 0;
      background-color: ${Oe.colors.background.primary};
    `,noResults:(0,t.css)`
      text-align: center;
      color: ${Oe.colors.text.secondary};
    `,tooltipSpace:(0,t.css)`
      margin-left: 4px;
    `,centerButton:(0,t.css)`
      display: block;
      margin: auto;
      border: none;
    `}),ue=(Oe,ze)=>({modal:(0,t.css)`
      width: 85vw;
      ${Oe.breakpoints.down("md")} {
        width: 100%;
      }
      ${Oe.breakpoints.up("xl")} {
        width: 60%;
      }
    `,inputWrapper:(0,t.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    `,inputItemFirst:(0,t.css)`
      flex-basis: 40%;
      padding-right: 16px;
      ${Oe.breakpoints.down("md")} {
        padding-right: 0px;
        padding-bottom: 16px;
      }
    `,inputItem:(0,t.css)`
      flex-grow: 1;
      flex-basis: 20%;
      ${Oe.breakpoints.down("md")} {
        min-width: 100%;
      }
    `,selectWrapper:(0,t.css)`
      margin-bottom: ${Oe.spacing(1)};
    `,resultsAmount:(0,t.css)`
      color: ${Oe.colors.text.secondary};
      font-size: 0.85rem;
      padding: 0 0 4px 0;
    `,resultsData:(0,t.css)`
      margin: 4px 0 ${Oe.spacing(2)} 0;
    `,resultsDataCount:(0,t.css)`
      margin: 0;
    `,resultsDataFiltered:(0,t.css)`
      color: ${Oe.colors.text.secondary};
      text-align: center;
      border: solid 1px rgba(204, 204, 220, 0.25);
      padding: 7px;
    `,resultsDataFilteredText:(0,t.css)`
      display: inline;
      vertical-align: text-top;
    `,results:(0,t.css)`
      height: calc(80vh - 310px);
      overflow-y: scroll;
    `,resultsFooter:(0,t.css)`
      margin-top: 24px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      position: sticky;
    `,currentlySelected:(0,t.css)`
      color: grey;
      opacity: 75%;
      font-size: 0.75rem;
    `,loadingSpinner:(0,t.css)`
      visibility: hidden;
    `,visible:(0,t.css)`
      visibility: visible;
    `,settingsBtn:(0,t.css)`
      float: right;
    `,noBorder:(0,t.css)`
      border: none;
    `,resultsPerPageLabel:(0,t.css)`
      color: ${Oe.colors.text.secondary};
      opacity: 75%;
      padding-top: 5px;
      font-size: 0.85rem;
      margin-right: 8px;
    `,resultsPerPageWrapper:(0,t.css)`
      display: flex;
    `});var be=e(53076),ge=e(2543);const re=new be.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function ye(Oe,ze,Xe){const[Ze,et,nt]=re.search(Oe,ze,0,1e5);let lt=[],rt=new Set;if(Ze&&nt){const ut=(Et,Ct)=>{Ct&&rt.add(Et)};for(let Et=0;Et<nt.length;Et++){let Ct=nt[Et];be.A.highlight(Oe[et.idx[Ct]],et.ranges[Ct],ut),lt.push(Oe[et.idx[Ct]])}Xe([lt,[...rt]])}else ze||Xe([[],[]])}const Be=(0,ge.debounce)(ye,300),{setIsLoading:ve,buildMetrics:Me,filterMetricsBackend:ke,setResultsPerPage:Se,setPageNum:We,setFuzzySearchQuery:De,setNameHaystack:pe,setMetaHaystack:Ne,setFullMetaSearch:Le,setIncludeNullMetadata:He,setSelectedTypes:je,setUseBackend:at,setDisableTextWrap:Ye,showAdditionalSettings:$e}=F.Ow.actions,xe=Oe=>{const{datasource:ze,isOpen:Xe,onClose:Ze,onChange:et,query:nt,initialMetrics:lt}=Oe,[rt,ut]=(0,s.useReducer)(F.Ow.reducer,(0,F.ue)(nt)),Et=(0,d.$j)(),Ct=ue(Et,rt.disableTextWrap),Ut=(0,s.useCallback)(async()=>{ut(ve(!0));const Mt=await w(ze,nt,lt);ut(Me({isLoading:!1,hasMetadata:Mt.hasMetadata,metrics:Mt.metrics,metaHaystackDictionary:Mt.metaHaystackDictionary,nameHaystackDictionary:Mt.nameHaystackDictionary,totalMetricCount:Mt.metrics.length,filteredMetricCount:Mt.metrics.length}))},[nt,ze,lt]);(0,s.useEffect)(()=>{Ut()},[Ut]);const Gt=le.map(Mt=>({value:Mt.value,label:Mt.value,description:Mt.description})),Wt=(0,s.useMemo)(()=>r()(async Mt=>{ut(ve(!0));const _t=await H(Mt,nt.labels,ze);ut(ke({metrics:_t,filteredMetricCount:_t.length,isLoading:!1}))},ze.getDebounceTimeInMilliseconds()),[ze,nt]);function ot(Mt){ut(pe(Mt))}function Tt(Mt){ut(Ne(Mt))}function Pn(Mt,_t){rt.useBackend&&Mt===""?Ut():rt.useBackend?Wt(Mt):_t?Be(Object.keys(rt.metaHaystackDictionary),Mt,Tt):Be(Object.keys(rt.nameHaystackDictionary),Mt,ot)}const ft=s.createElement(k,{state:rt,onChangeFullMetaSearch:()=>{const Mt=!rt.fullMetaSearch;ut(Le(Mt)),et({...nt,fullMetaSearch:Mt}),Pn(rt.fuzzySearchQuery,Mt)},onChangeIncludeNullMetadata:()=>{ut(He(!rt.includeNullMetadata)),et({...nt,includeNullMetadata:!rt.includeNullMetadata})},onChangeDisableTextWrap:()=>{ut(Ye()),et({...nt,disableTextWrap:!rt.disableTextWrap}),q("grafana_prom_metric_encycopedia_disable_text_wrap_interaction",rt,"")},onChangeUseBackend:()=>{const Mt=!rt.useBackend;ut(at(Mt)),et({...nt,useBackend:Mt}),Mt===!1?Ut():rt.fuzzySearchQuery!==""&&Wt(rt.fuzzySearchQuery)}});return s.createElement(T.a,{"data-testid":Fe.metricModal,isOpen:Xe,title:"Metrics explorer",onDismiss:Ze,"aria-label":"Browse metrics",className:Ct.modal},s.createElement(j,{feedbackUrl:"https://forms.gle/DEMAJHoAMpe3e54CA"}),s.createElement("div",{className:Ct.inputWrapper,"data-testid":i.Tp.components.DataSource.Prometheus.queryEditor.builder.metricsExplorer},s.createElement("div",{className:(0,t.cx)(Ct.inputItem,Ct.inputItemFirst)},s.createElement(M.p,{autoFocus:!0,"data-testid":Fe.searchMetric,placeholder:me.browse,value:rt.fuzzySearchQuery,onInput:Mt=>{const _t=Mt.currentTarget.value??"";ut(De(_t)),Pn(_t,rt.fullMetaSearch)}})),rt.hasMetadata&&s.createElement("div",{className:Ct.inputItem},s.createElement(v.KF,{"data-testid":Fe.selectType,inputId:"my-select",options:Gt,value:rt.selectedTypes,placeholder:me.type,onChange:Mt=>ut(je(Mt))})),s.createElement("div",null,s.createElement(O.y,{className:`${Ct.loadingSpinner} ${rt.isLoading?Ct.visible:""}`})),s.createElement("div",{className:Ct.inputItem},s.createElement(S.G,{"aria-label":"Additional settings",content:ft,placement:"bottom-end",closeButton:!1},s.createElement(p.e,{className:Ct.settingsBtn},s.createElement(E.$n,{variant:"secondary",size:"md",onClick:()=>ut($e()),"data-testid":Fe.showAdditionalSettings,className:Ct.noBorder},"Additional Settings"),s.createElement(E.$n,{className:Ct.noBorder,variant:"secondary",icon:rt.showAdditionalSettings?"angle-up":"angle-down"}))))),s.createElement("div",{className:Ct.resultsData},nt.metric&&s.createElement("i",{className:Ct.currentlySelected},"Currently selected: ",nt.metric),nt.labels.length>0&&s.createElement("div",{className:Ct.resultsDataFiltered},s.createElement(h.I,{name:"info-circle",size:"sm"}),s.createElement("div",{className:Ct.resultsDataFilteredText},"\xA0These metrics have been pre-filtered by labels chosen in the label filters."))),s.createElement("div",{className:Ct.results},rt.metrics&&s.createElement(oe,{metrics:V(rt,ut),onChange:et,onClose:Ze,query:nt,state:rt,disableTextWrap:rt.disableTextWrap})),s.createElement("div",{className:Ct.resultsFooter},s.createElement("div",{className:Ct.resultsAmount},"Showing ",rt.filteredMetricCount," of ",rt.totalMetricCount," results"),s.createElement(x.d,{currentPage:rt.pageNum??1,numberOfPages:z(rt).length,onNavigate:Mt=>{ut(We(Mt??1))}}),s.createElement("div",{className:Ct.resultsPerPageWrapper},s.createElement("p",{className:Ct.resultsPerPageLabel},"# Results per page\xA0"),s.createElement(M.p,{"data-testid":Fe.resultsPerPage,value:G(rt.resultsPerPage,F.J3,F.yH),placeholder:"results per page",width:10,title:"The maximum results per page is "+F.yH,type:"number",onInput:Mt=>{const _t=+Mt.currentTarget.value;isNaN(_t)||_t>=F.yH||ut(Se(_t))}}))))},Fe={metricModal:"metric-modal",searchMetric:"search-metric",searchWithMetadata:"search-with-metadata",selectType:"select-type",metricCard:"metric-card",useMetric:"use-metric",searchPage:"search-page",resultsPerPage:"results-per-page",setUseBackend:"set-use-backend",showAdditionalSettings:"show-additional-settings"},Ee=" ",se=1e3;function ae({datasource:Oe,query:ze,onChange:Xe,onGetMetrics:Ze,labelsFilters:et,metricLookupDisabled:nt,onBlur:lt,variableEditor:rt}){const ut=(0,d.of)(fe),[Et,Ct]=(0,s.useState)({}),Ut=f.$.featureToggles.prometheusMetricEncyclopedia,Gt=[{value:"BrowseMetrics",label:"Metrics explorer",description:"Browse and filter all metrics and metadata with a fuzzy search"}],Wt=(0,s.useCallback)((en,Xt)=>{const En=en.label??en.value;return En?En.toLowerCase?Xt.split(Ee).reduce((Wn,na)=>{const Bt=En.toLowerCase().includes(na.toLowerCase());let ln=!1;return Ut&&(ln=En==="Metrics explorer"),Wn&&(Bt||ln)},!0):!0:!1},[Ut]),ot=(0,s.useCallback)((en,Xt)=>en.__isNew__?en.label:s.createElement(m(),{searchWords:Xt.inputValue.split(Ee),textToHighlight:en.label??"",highlightClassName:ut.highlight}),[ut.highlight]),Tt=(en,Xt)=>{const En=(0,D.b4)(en);return Ce(En,Xt)},Pn=en=>Oe.metricFindQuery(Tt(en,et)).then(En=>{const Vn=En.length;(0,C.ky)(En),Vn>En.length?Ct({...Et,resultsTruncated:!0}):Ct({...Et,resultsTruncated:!1});const Wn=En.map(na=>({label:na.text,value:na.text}));return Ut?[...Gt,...Wn]:Wn}),ft=()=>Promise.resolve([]),Mt=r()(en=>Pn(en),Oe.getDebounceTimeInMilliseconds()),_t=en=>{const Xt=en.data;if(Xt.value==="BrowseMetrics"){const En=en.isFocused?ut.focus:"";return s.createElement("div",{...en.innerProps,ref:en.innerRef,className:`${ut.customOptionWidth} metric-encyclopedia-open`,"aria-label":"Select option",onKeyDown:Vn=>{Vn.code==="Enter"&&Ct({...Et,metricsModalOpen:!0})}},s.createElement("div",{className:`${ut.customOption} ${En} metric-encyclopedia-open`},s.createElement("div",null,s.createElement("div",{className:"metric-encyclopedia-open"},Xt.label),s.createElement("div",{className:`${ut.customOptionDesc} metric-encyclopedia-open`},Xt.description)),s.createElement(E.$n,{fill:"text",size:"sm",variant:"secondary",onClick:()=>Ct({...Et,metricsModalOpen:!0}),className:"metric-encyclopedia-open"},"Open",s.createElement(h.I,{name:"arrow-right"}))))}return(0,P.o5)(en)},nn=({children:en,maxHeight:Xt,innerRef:En,innerProps:Vn})=>{const Wn=(0,d.$j)(),na=(0,y.J)(Wn),Bt=!s.isValidElement(en)&&Et.resultsTruncated;return s.createElement("div",{...Vn,className:`${na.menu} ${ut.customMenuContainer}`,style:{maxHeight:Xt},"aria-label":"Select options menu"},s.createElement(a.E,{scrollRefCallback:En,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},en),Bt&&s.createElement("div",{className:ut.customMenuFooter},s.createElement("div",null,"Only the top 1000 metrics are displayed in the metric select. Use the metrics explorer to view all metrics.")))},dn=()=>s.createElement(v.DW,{"data-testid":i.Tp.components.DataSource.Prometheus.queryEditor.builder.metricSelect,isClearable:!!rt,inputId:"prometheus-metric-select",className:ut.select,value:ze.metric?(0,l.z)(ze.metric):void 0,placeholder:"Select metric",allowCustomValue:!0,formatOptionLabel:ot,filterOption:Wt,onOpenMenu:async()=>{if(nt)return;Ct({isLoading:!0});const en=await Ze(),Xt=en.map(Vn=>Vn.value),En=en.length;en.length>se&&(0,C.ky)(en),Ct(Ut?{metrics:[...Gt,...en],isLoading:void 0,initialMetrics:Xt,resultsTruncated:En>en.length}:{metrics:en,isLoading:void 0,resultsTruncated:En>en.length})},loadOptions:nt?ft:Mt,isLoading:Et.isLoading,defaultOptions:Et.metrics,onChange:en=>{const Xt=en?.value;Xt?Ut&&Xt==="BrowseMetrics"?(q("grafana_prometheus_metric_encyclopedia_open",null,"",ze),Ct({...Et,metricsModalOpen:!0})):Xe({...ze,metric:Xt}):Xe({...ze,metric:""})},components:Ut?{Option:_t,MenuList:nn}:{MenuList:nn},onBlur:lt||(()=>{})});return s.createElement(s.Fragment,null,Ut&&!Oe.lookupsDisabled&&Et.metricsModalOpen&&s.createElement(xe,{datasource:Oe,isOpen:Et.metricsModalOpen,onClose:()=>Ct({...Et,metricsModalOpen:!1}),query:ze,onChange:Xe,initialMetrics:Et.initialMetrics??[]}),rt?s.createElement(g.C,null,s.createElement(b.I,{label:"Metric",labelWidth:20,tooltip:s.createElement("div",null,"Optional: returns a list of label values for the label name in the specified metric.")},dn())):s.createElement(c.B,null,s.createElement(u.c,{label:"Metric"},dn())))}const fe=Oe=>({select:(0,t.css)`
    min-width: 125px;
  `,highlight:(0,t.css)`
    label: select__match-highlight;
    background: inherit;
    padding: inherit;
    color: ${Oe.colors.warning.contrastText};
    background-color: ${Oe.colors.warning.main};
  `,customOption:(0,t.css)`
    padding: 8px;
    display: flex;
    justify-content: space-between;
    cursor: pointer;
    :hover {
      background-color: ${Oe.colors.emphasize(Oe.colors.background.primary,.1)};
    }
  `,customOptionlabel:(0,t.css)`
    color: ${Oe.colors.text.primary};
  `,customOptionDesc:(0,t.css)`
    color: ${Oe.colors.text.secondary};
    font-size: ${Oe.typography.size.xs};
    opacity: 50%;
  `,focus:(0,t.css)`
    background-color: ${Oe.colors.emphasize(Oe.colors.background.primary,.1)};
  `,customOptionWidth:(0,t.css)`
    min-width: 400px;
  `,customMenuFooter:(0,t.css)`
    flex: 0;
    display: flex;
    justify-content: space-between;
    padding: ${Oe.spacing(1.5)};
    border-top: 1px solid ${Oe.colors.border.weak};
    color: ${Oe.colors.text.secondary};
  `,customMenuContainer:(0,t.css)`
    display: flex;
    flex-direction: column;
    background: ${Oe.colors.background.primary};
    box-shadow: ${Oe.shadows.z3};
  `}),Ce=(Oe,ze)=>{const Xe=ze?Re(ze):[];return`label_values({__name__=~".*${Oe}"${Xe?Xe.join(""):""}},__name__)`},Re=Oe=>Oe.map(ze=>`,${ze.label}="${ze.value}"`)},46777:(Y,I,e)=>{"use strict";e.d(I,{I:()=>O});var t=e(96540),n=e(32799),r=e(45889),s=e(47891),o=e(71440),m=e(32196),l=e(2543),i=e(7650),c=e(97801),u=e(81580),f=e(39268),d=e(76892),E=e(76459),h=e.n(E),y=e(50877),a=e(13544),v=e(81392),g=e(3721),b=e(88323);function P({item:p,defaultOp:x,onChange:A,onDelete:R,onGetLabelNames:B,onGetLabelValues:U,invalidLabel:F,invalidValue:K,getLabelValuesAutofillSuggestions:w,debounceDuration:L}){const[V,N]=(0,t.useState)({}),[z,J]=(0,t.useState)(!1),[G,H]=(0,t.useState)(!1),q=(ee=p.op)=>C.find(X=>X.label===ee)?.isMultiValue,le=ee=>{if(ee){const X=/\(([^)]+)\)/,j=ee?.match(X);return j&&j[0].indexOf("|")>0?[ee]:ee.indexOf("|")>0?ee.split("|"):[ee]}return[]},me=h()(ee=>w(ee,p.label),L),k=p?.value??"";return t.createElement("div",{key:k,"data-testid":"prometheus-dimensions-filter-item"},t.createElement(v.M,null,t.createElement(b.l6,{placeholder:"Select label","data-testid":a.Tp.components.QueryBuilder.labelSelect,inputId:"prometheus-dimensions-filter-item-key",width:"auto",value:p.label?(0,y.z)(p.label):null,allowCustomValue:!0,onOpenMenu:async()=>{N({isLoadingLabelNames:!0});const ee=await B(p);J(!0),N({labelNames:ee,isLoadingLabelNames:void 0})},onCloseMenu:()=>{J(!1)},isOpen:z,isLoading:V.isLoadingLabelNames??!1,options:V.labelNames,onChange:ee=>{ee.label&&A({...p,op:p.op??x,label:ee.label})},invalid:F}),t.createElement(b.l6,{"data-testid":a.Tp.components.QueryBuilder.matchOperatorSelect,className:"query-segment-operator",value:(0,y.z)(p.op??x),options:C,width:"auto",onChange:ee=>{ee.value!=null&&A({...p,op:ee.value,value:q(ee.value)?p.value:le(p?.value)[0]})}}),t.createElement(b.DW,{placeholder:"Select value","data-testid":a.Tp.components.QueryBuilder.valueSelect,inputId:"prometheus-dimensions-filter-item-value",width:"auto",value:q()?le(k).map(y.z):le(k).map(y.z)[0],allowCustomValue:!0,onOpenMenu:async()=>{N({isLoadingLabelValues:!0});const ee=await U(p);(0,r.ky)(ee),H(!0),N({...V,labelValues:ee,isLoadingLabelValues:void 0})},onCloseMenu:()=>{H(!1)},isOpen:G,defaultOptions:V.labelValues,isMulti:q(),isLoading:V.isLoadingLabelValues,loadOptions:me,onChange:ee=>{if(ee.value)A({...p,value:ee.value,op:p.op??x});else{const X=ee.map(j=>j.label).join("|");A({...p,value:X,op:p.op??x})}},invalid:K}),t.createElement(g.Z,{"aria-label":`remove-${p.label}`,icon:"times",variant:"secondary",onClick:R})))}const C=[{label:"=",value:"=",isMultiValue:!1},{label:"!=",value:"!=",isMultiValue:!1},{label:"=~",value:"=~",isMultiValue:!0},{label:"!~",value:"!~",isMultiValue:!0}],D="Select at least 1 label filter (label and value)";function T({labelsFilters:p,onChange:x,onGetLabelNames:A,onGetLabelValues:R,labelFilterRequired:B,getLabelValuesAutofillSuggestions:U,debounceDuration:F,variableEditor:K}){const w="=",[L,V]=(0,t.useState)([{op:w}]);(0,t.useEffect)(()=>{p.length>0?V(p):V([{op:w}])},[p]);const N=G=>{V(G);const H=G.filter(q=>q.label!=null&&q.value!=null);(0,l.isEqual)(H,p)||x(H)},z=L.some(G=>G.label&&G.value),J=()=>t.createElement(i.o,{items:L,onChange:N,renderItem:(G,H,q)=>t.createElement(P,{debounceDuration:F,item:G,defaultOp:w,onChange:H,onDelete:q,onGetLabelNames:A,onGetLabelValues:R,invalidLabel:B&&!G.label,invalidValue:B&&!G.value,getLabelValuesAutofillSuggestions:U})});return t.createElement(t.Fragment,null,K?t.createElement(f.C,null,t.createElement("div",{className:(0,m.cx)((0,m.css)`
              display: flex;
            `)},t.createElement(d.c,{width:20,tooltip:t.createElement("div",null,"Optional: used to filter the metric select for this query type.")},"Label filters"),J())):t.createElement(c.B,null,t.createElement(u.c,{label:"Label filters",error:D,invalid:B&&!z},J())))}var M=e(95842);function O({datasource:p,query:x,onChange:A,onBlur:R,variableEditor:B}){const U=J=>{A({...x,labels:J})},F=(0,t.useCallback)(async J=>{const G=p.getVariables(),H=await J;return[...G.map(q=>({label:q,value:q})),...H.map(q=>({label:q.value,value:q.value,title:q.description}))]},[p]),K=async J=>{if(!x.metric)return await p.languageProvider.fetchLabels(),p.languageProvider.getLabelKeys().map(le=>({value:le}));const G=x.labels.filter(le=>le!==J);G.push({label:"__name__",op:"=",value:x.metric});const H=s.z.renderLabels(G);let q=await p.languageProvider.fetchLabelsWithMatch(H);return Object.keys(q).filter(le=>!G.find(me=>me.label===le)).map(le=>({value:le}))},w=(J,G)=>{const H={label:G??"__name__",op:"=~",value:(0,o.b4)(`.*${J}`)},q=x.labels.filter(ee=>ee.label!==H.label);q.push(H),x.metric&&q.push({label:"__name__",op:"=",value:x.metric});const le=q.map(ee=>({...ee,label:p.interpolateString(ee.label),value:p.interpolateString(ee.value)})),me=s.z.renderLabels(le);let k;return p.hasLabelsMatchAPISupport()?k=V(H,me):k=L(H,me),k.then(ee=>((0,r.ky)(ee),ee))},L=(J,G)=>{if(!J.label)return Promise.resolve([]);const H=p.languageProvider.fetchSeries(G),q=p.interpolateString(J.label);return H.then(le=>{const me=new Set;return le.forEach(k=>{const ee=k[q];me.add(ee)}),Array.from(me).map(k=>({label:k,value:k}))})},V=(J,G)=>J.label?p.languageProvider.fetchSeriesValuesWithMatch(J.label,G).then(H=>H.map(q=>({value:q,label:q}))):Promise.resolve([]),N=async J=>{if(!J.label)return[];if(!x.metric)return(await p.languageProvider.getLabelValues(J.label)).map(le=>({value:le}));const G=x.labels.filter(le=>le!==J);G.push({label:"__name__",op:"=",value:x.metric});const H=G.map(le=>({...le,label:p.interpolateString(le.label),value:p.interpolateString(le.value)})),q=s.z.renderLabels(H);return p.hasLabelsMatchAPISupport()?V(J,q):L(J,q)},z=(0,t.useCallback)(()=>F(S(p,x)),[p,x,F]);return t.createElement(t.Fragment,null,t.createElement(M.dm,{query:x,onChange:A,onGetMetrics:z,datasource:p,labelsFilters:x.labels,metricLookupDisabled:p.lookupsDisabled,onBlur:R||(()=>{}),variableEditor:B}),t.createElement(T,{debounceDuration:p.getDebounceTimeInMilliseconds(),getLabelValuesAutofillSuggestions:w,labelsFilters:x.labels,onChange:U,onGetLabelNames:J=>F(K(J)),onGetLabelValues:J=>F(N(J)),variableEditor:B}))}async function S(p,x){p.languageProvider.metricsMetadata||await p.languageProvider.loadMetricsMetadata(),p.languageProvider.metricsMetadata||(p.languageProvider.metricsMetadata={});let A;if(x.labels.length>0){const R=s.z.renderLabels(x.labels);A=(await p.languageProvider.getSeries(R,!0)).__name__??[]}else A=await p.languageProvider.getLabelValues("__name__")??[];return A.map(R=>({value:R,description:(0,n.xB)(R,p.languageProvider.metricsMetadata)}))}},52005:(Y,I,e)=>{"use strict";e.d(I,{W:()=>c,i:()=>u});var t=e(96540),n=e(67061),r=e(69470),s=e(47891),o=e(65405),m=e(30683),l=e(55698),i=e(44339);const c="Fetch all series matching metric name and label filters.",u=t.memo(({query:f})=>{const d=(0,o.u)(f||"").query,E={grammar:r.Ay,name:"promql"};return t.createElement(n.B,{gap:.5,direction:"column"},t.createElement(m.r,{stepNumber:1,title:t.createElement(i.Z,{query:`${d.metric} ${s.z.renderLabels(d.labels)}`,lang:E})},c),t.createElement(l.k,{stepNumber:2,queryModeller:s.z,query:d,lang:E}))});u.displayName="PromQueryBuilderExplained"},63492:(Y,I,e)=>{"use strict";e.d(I,{$:()=>l});var t=e(32196),n=e(96540),r=e(13544),s=e(40845),o=e(60042),m=e(52005);function l(c){const{query:u,datasource:f,range:d,onRunQuery:E,onChange:h,data:y,app:a,showExplain:v}=c,g=(0,s.of)(i);return n.createElement("div",{"data-testid":r.Tp.components.DataSource.Prometheus.queryEditor.code.queryField,className:g.wrapper},n.createElement(o.A,{datasource:f,query:u,range:d,onRunQuery:E,onChange:h,history:[],data:y,app:a}),v&&n.createElement(m.i,{query:u.expr}))}const i=c=>({wrapper:(0,t.css)`
      .gf-form {
        margin-bottom: 0;
      }
    `})},13567:(Y,I,e)=>{"use strict";e.d(I,{J3:()=>n,Ow:()=>s,mt:()=>m,ue:()=>o,yH:()=>r});var t=e(30038);const n=100,r=1e3,s=(0,t.Z0)({name:"metrics-modal-state",initialState:o(),reducers:{filterMetricsBackend:(l,i)=>{l.metrics=i.payload.metrics,l.filteredMetricCount=i.payload.filteredMetricCount,l.isLoading=i.payload.isLoading},buildMetrics:(l,i)=>{l.isLoading=i.payload.isLoading,l.metrics=i.payload.metrics,l.hasMetadata=i.payload.hasMetadata,l.metaHaystackDictionary=i.payload.metaHaystackDictionary,l.nameHaystackDictionary=i.payload.nameHaystackDictionary,l.totalMetricCount=i.payload.totalMetricCount,l.filteredMetricCount=i.payload.filteredMetricCount},setIsLoading:(l,i)=>{l.isLoading=i.payload},setFilteredMetricCount:(l,i)=>{l.filteredMetricCount=i.payload},setResultsPerPage:(l,i)=>{l.resultsPerPage=i.payload},setPageNum:(l,i)=>{l.pageNum=i.payload},setFuzzySearchQuery:(l,i)=>{l.fuzzySearchQuery=i.payload,l.pageNum=1},setNameHaystack:(l,i)=>{l.nameHaystackOrder=i.payload[0],l.nameHaystackMatches=i.payload[1]},setMetaHaystack:(l,i)=>{l.metaHaystackOrder=i.payload[0],l.metaHaystackMatches=i.payload[1]},setFullMetaSearch:(l,i)=>{l.fullMetaSearch=i.payload,l.pageNum=1},setIncludeNullMetadata:(l,i)=>{l.includeNullMetadata=i.payload,l.pageNum=1},setSelectedTypes:(l,i)=>{l.selectedTypes=i.payload,l.pageNum=1},setUseBackend:(l,i)=>{l.useBackend=i.payload,l.fullMetaSearch=!1,l.pageNum=1},setDisableTextWrap:l=>{l.disableTextWrap=!l.disableTextWrap},showAdditionalSettings:l=>{l.showAdditionalSettings=!l.showAdditionalSettings}}});function o(l){return{isLoading:!0,metrics:[],hasMetadata:!0,metaHaystackDictionary:{},metaHaystackMatches:[],metaHaystackOrder:[],nameHaystackDictionary:{},nameHaystackOrder:[],nameHaystackMatches:[],totalMetricCount:0,filteredMetricCount:null,resultsPerPage:n,pageNum:1,fuzzySearchQuery:"",fullMetaSearch:l?.fullMetaSearch??!1,includeNullMetadata:l?.includeNullMetadata??!0,selectedTypes:[],useBackend:l?.useBackend??!1,disableTextWrap:l?.disableTextWrap??!1,showAdditionalSettings:!1}}function m(l){return{useBackend:l?.useBackend??!1,disableTextWrap:l?.disableTextWrap??!1,fullMetaSearch:l?.fullMetaSearch??!1,includeNullMetadata:l.includeNullMetadata??!1}}},56823:(Y,I,e)=>{"use strict";e.d(I,{DQ:()=>h,G3:()=>v,Kl:()=>f,OS:()=>y,iZ:()=>E,jC:()=>g,jY:()=>l,kf:()=>i,nU:()=>u,z2:()=>a});var t=e(2543),n=e.n(t),r=e(55127),s=e.n(r),o=e(41598),m=e(65820);function l(S,p,x){const A=d(S,p,x),R=S.id+"(";return x&&A.push(x),R+A.join(", ")+")"}function i(S,p,x){const A=d(S,p,x),R=S.id+"(";return x&&A.unshift(x),R+A.join(", ")+")"}function c(S,p,x,A){if(p.params.length<2)throw`Cannot render a function with params of length [${p.params.length}]`;let R=(S.params??[])[0]??"5m";const B=d({...S,params:S.params.slice(1)},{...p,params:p.params.slice(1),defaultParams:p.defaultParams.slice(1)},x),U=S.id+"(";return x&&(A?B.push(`${x}[${R}]`):B.unshift(`${x}[${R}]`)),U+B.join(", ")+")"}function u(S,p,x){return c(S,p,x,!1)}function f(S,p,x){return c(S,p,x,!0)}function d(S,p,x){return(S.params??[]).map((A,R)=>p.params[R].type==="string"?'"'+A+'"':A)}function E(S,p){const x={id:S.id,params:S.defaultParams};return{...p,operations:[...p.operations,x]}}function h(S){return(0,t.capitalize)(S.replace(/_/g," "))}function y(S,p){return`operations.${S}.param.${p}`}function a(S=!1){const p={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return S&&p.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),p}function v(S,p={}){return[{id:S,name:h(S),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:m.Ag.Aggregations,renderer:l,paramChangedHandler:M(`__${S}_by`),explainHandler:C(S,""),addOperationHandler:E,...p},{id:`__${S}_by`,name:`${h(S)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.r}],defaultParams:[""],alternativesKey:"aggregations by",category:m.Ag.Aggregations,renderer:b(S),paramChangedHandler:T(S),explainHandler:C(S,"by"),addOperationHandler:E,hideFromList:!0,...p},{id:`__${S}_without`,name:`${h(S)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:o.r}],defaultParams:[""],alternativesKey:"aggregations by",category:m.Ag.Aggregations,renderer:P(S),paramChangedHandler:T(S),explainHandler:C(S,"without"),addOperationHandler:E,hideFromList:!0,...p}]}function g(S,p,x={}){const A=v(S,x);return A[0].params.unshift(...p.params),A[1].params.unshift(...p.params),A[2].params.unshift(...p.params),A[0].defaultParams=p.defaultParams,A[1].defaultParams=[...p.defaultParams,""],A[2].defaultParams=[...p.defaultParams,""],A[1].renderer=D(S),A[2].renderer=D(S),A}function b(S){return function(x,A,R){return`${S} by(${x.params.join(", ")}) (${R})`}}function P(S){return function(x,A,R){return`${S} without(${x.params.join(", ")}) (${R})`}}function C(S,p){return function(A){const R=A.params.map(U=>`\`${U}\``).join(" and "),B=s()("label",A.params.length);switch(p){case"by":return`Calculates ${S} over dimensions while preserving ${B} ${R}.`;case"without":return`Calculates ${S} over the dimensions ${R}. All other labels are preserved.`;default:return`Calculates ${S} over the dimensions.`}}}function D(S){return function(x,A,R){const B=A.params.findIndex(K=>K.restParam),U=x.params.slice(0,B),F=x.params.slice(B);return`${S} by(${F.join(", ")}) (${U.map((K,w)=>A.params[w].type==="string"?`"${K}"`:K).join(", ")}, ${R})`}}function T(S){return function(x,A,R){return A.params.length<R.params.length?{...A,id:S}:A}}function M(S){return function(x,A,R){return A.params.length===R.params.length?{...A,id:S}:A}}function O(S,p){if(!S.label||!S.op||!S.value||p.length<2)return!1;const x=S.op.toString().startsWith("!");return p.filter(B=>B.label===S.label&&B.value===S.value&&B.op!==S.op).some(B=>!!(x&&B?.op?.toString().startsWith("!")===!1||x===!1&&B?.op?.toString().startsWith("!")))}},65405:(Y,I,e)=>{"use strict";e.d(I,{u:()=>s});var t=e(21489),n=e(25378),r=e(71440);function s(a){const v=(0,r.qk)(a),b=t.K3.parse(v).topNode,C={query:{metric:"",labels:[],operations:[]},errors:[]};try{m(v,b,C)}catch(D){console.error(D),D instanceof Error&&C.errors.push({text:D.message})}return y(C.query)&&(C.errors=[]),o(a)&&(C.errors=[]),C}function o(a){const v={query:{metric:"",labels:[],operations:[]},errors:[]};a=a.replace(/\$__interval/g,"1s"),a=a.replace(/\$__interval_ms/g,"1000"),a=a.replace(/\$__rate_interval/g,"1s"),a=a.replace(/\$__range_ms/g,"1000"),a=a.replace(/\$__range_s/g,"1"),a=a.replace(/\$__range/g,"1s");const b=t.K3.parse(a).topNode;try{m(a,b,v)}catch{return!1}return v.errors.length===0}function m(a,v,g){const b=g.query;switch(v.type.id){case t.iP:{b.metric=(0,r.AA)(a,v);break}case t.BG:{b.labels.push(i(a,v));const P=v.getChild(r.Ql);P&&g.errors.push((0,r.xz)(a,P));break}case t.R6:{u(a,v,g);break}case t.Fn:{f(a,v,g);break}case t.df:{E(a,v,g);break}case r.Ql:{if(l(v))break;g.errors.push((0,r.xz)(a,v));break}default:{v.type.id===t.ek&&g.errors.push((0,r.xz)(a,v));let P=v.firstChild;for(;P;)m(a,P,g),P=P.nextSibling}}}function l(a){return a.prevSibling?.type.id===t.GN&&a.prevSibling?.firstChild?.type.id===t.Fb}function i(a,v){const g=(0,r.AA)(a,v.getChild(t.IC)),b=(0,r.AA)(a,v.getChild(t.Lf)),P=(0,r.AA)(a,v.getChild(t.LW)).replace(/"/g,"");return{label:g,op:b,value:P}}const c=["changes","rate","irate","increase","delta"];function u(a,v,g){const b=g.query,P=v.getChild(t.m3),C=(0,r.AA)(a,P),T=v.getChild(t.Dh).getChild(t.qI),M=[];let O="";if(c.includes(C)||C.endsWith("_over_time")){let p=(0,r.AA)(a,v).match(/\[(.+)\]/);p?.[1]&&(O=p[1],M.push(p[1]))}const S={id:C,params:M};if(b.operations.unshift(S),T){if((0,r.AA)(a,T)===O+"]")return;d(a,T,g,S)}}function f(a,v,g){const b=g.query,P=v.getChild(t.xb);let C=(0,r.AA)(a,P);const D=v.getChild(t.hI),T=[];D&&(D.getChild("By")&&C&&(C=`__${C}_by`),D.getChild(t.xB)&&(C=`__${C}_without`),T.push(...(0,r.R1)(a,D,t._p)));const O=v.getChild(t.Dh).getChild(t.qI),p=O?.getChild(t.GN)?.getChild(t.df);p&&g.errors.push({text:"Query parsing is ambiguous.",from:p.from,to:p.to});const x={id:C,params:[]};b.operations.unshift(x),d(a,O,g,x),x.params.push(...T)}function d(a,v,g,b){if(v)switch(v.type.id){case t.GN:case t.qI:{let P=v.firstChild;for(;P;){const D=P.getChild(t.GN)?.getChild(t.df);D&&g.errors.push({text:"Query parsing is ambiguous.",from:D.from,to:D.to}),d(a,P,g,b),P=P.nextSibling}break}case t.Po:{b.params.push(parseFloat((0,r.AA)(a,v)));break}case t.LW:{b.params.push((0,r.AA)(a,v).replace(/"/g,""));break}default:m(a,v,g)}}function E(a,v,g){const b=g.query,P=v.firstChild,C=(0,r.AA)(a,P.nextSibling),D=h(a,v.getChild(t.Wy)),T=v.lastChild,M=n.AE[C],O=P.getChild(t.Po),S=T.getChild(t.Po),p=T.getChild(t.df);if(O||m(a,P,g),S)b.operations.push((0,r.rq)(M,a,T,!!D?.isBool));else if(p){const x=(0,r.z9)(T);x?.type.id===t.Po&&b.operations.push((0,r.rq)(M,a,x,!!D?.isBool)),m(a,T,g)}else{b.binaryQueries=b.binaryQueries||[];const x={operator:C,query:{metric:"",labels:[],operations:[]}};D?.isMatcher&&(x.vectorMatchesType=D.matchType,x.vectorMatches=D.matches),b.binaryQueries.push(x),m(a,T,{query:x.query,errors:g.errors})}}function h(a,v){if(v){if(v.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const g=v.getChild(t.UX);return g?{isMatcher:!0,isBool:!1,matches:(0,r.AA)(a,g.getChild(t.x$)?.getChild(t.qJ)),matchType:g.getChild(t.On)?"on":"ignoring"}:void 0}}}function y(a){return a.labels.length===0&&a.operations.length===0&&!a.metric}},71440:(Y,I,e)=>{"use strict";e.d(I,{AA:()=>i,Ql:()=>t,R1:()=>u,b4:()=>f,qk:()=>o,rq:()=>c,xz:()=>r,z9:()=>n});const t=0;function n(d){return d.firstChild?n(d.firstChild):d}function r(d,E){return{text:i(d,E),from:E.from,to:E.to,parentType:E.parent?.name}}const s=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function o(d){return d.replace(s,(E,h,y,a,v,g,b)=>{const P=a||b;let C=h,D="0";return y&&(C=y,D="1"),v&&(C=v,D="2"),`__V_${D}__`+C+"__V__"+(P?"__F__"+P+"__F__":"")})}const m=[(d,E)=>`$${d}`,(d,E)=>`[[${d}${E?`:${E}`:""}]]`,(d,E)=>`\${${d}${E?`:${E}`:""}}`];function l(d){return d.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(E,h,y,a)=>m[parseInt(h,10)](y,a))}function i(d,E){return E?l(d.substring(E.from,E.to)):""}function c(d,E,h,y){const a=[parseFloat(i(E,h))];return d.comparison&&a.push(y),{id:d.id,params:a}}function u(d,E,h){if(E.type.id===h||E.name===h)return[i(d,E)];const y=[];let a=0,v=E.childAfter(a);for(;v;)y.push(...u(d,v,h)),a=v.to,v=E.childAfter(a);return y}const f=d=>d.split(" ").map(h=>`${h}.*`).join("")},30683:(Y,I,e)=>{"use strict";e.d(I,{r:()=>o});var t=e(32196),n=e(96540),r=e(36663),s=e(40845);function o({title:l,stepNumber:i,markdown:c,children:u}){const f=(0,s.of)(m);return n.createElement("div",{className:f.box},i!==void 0&&n.createElement("div",{className:f.stepNumber},i),n.createElement("div",{className:f.boxInner},l&&n.createElement("div",{className:f.header},n.createElement("span",null,l)),n.createElement("div",{className:f.body},c&&n.createElement("div",{dangerouslySetInnerHTML:{__html:(0,r.G)(c)}}),u)))}const m=l=>({box:(0,t.css)({background:l.colors.background.secondary,padding:l.spacing(1),borderRadius:l.shape.radius.default,position:"relative"}),boxInner:(0,t.css)({marginLeft:l.spacing(4)}),stepNumber:(0,t.css)({fontWeight:l.typography.fontWeightMedium,background:l.colors.secondary.main,width:"20px",height:"20px",borderRadius:l.shape.radius.circle,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:l.typography.bodySmall.fontSize}),header:(0,t.css)({paddingBottom:l.spacing(.5),display:"flex",alignItems:"center",fontFamily:l.typography.fontFamilyMonospace}),body:(0,t.css)({color:l.colors.text.secondary,"p:last-child":{margin:0},a:{color:l.colors.text.link,textDecoration:"underline"}})})},55698:(Y,I,e)=>{"use strict";e.d(I,{k:()=>s});var t=e(96540),n=e(30683),r=e(44339);function s({query:o,queryModeller:m,stepNumber:l,lang:i,onMouseEnter:c,onMouseLeave:u}){return t.createElement(t.Fragment,null,o.operations.map((f,d)=>{const E=m.getOperationDef(f.id);if(!E)return`Operation ${f.id} not found`;const h=E.renderer(f,E,"<expr>"),y=E.explainHandler?E.explainHandler(f,E):E.documentation??"no docs";return t.createElement("div",{key:d,onMouseEnter:()=>c?.(f,d),onMouseLeave:()=>u?.(f,d)},t.createElement(n.r,{stepNumber:d+l,title:t.createElement(r.Z,{query:h,lang:i}),markdown:y}))}))}},43854:(Y,I,e)=>{"use strict";e.d(I,{i:()=>o});var t=e(32196),n=e(96540),r=e(40845),s=e(67061);function o({children:l}){const i=(0,r.of)(m);return n.createElement("div",{className:i.root},n.createElement(s.B,{gap:1},l))}const m=l=>({root:(0,t.css)({padding:l.spacing(1,1,0,1),backgroundColor:l.colors.background.secondary,borderRadius:l.shape.radius.default})})},44339:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>m});var t=e(32196),n=e(28848),r=e.n(n),s=e(96540),o=e(40845);function m({query:i,lang:c,className:u}){const f=(0,o.$j)(),d=l(f),E=r().highlight(i,c.grammar,c.name);return s.createElement("div",{className:(0,t.cx)(d.editorField,"prism-syntax-highlight",u),"aria-label":"selector",dangerouslySetInnerHTML:{__html:E}})}const l=i=>({editorField:(0,t.css)({fontFamily:i.typography.fontFamilyMonospace,fontSize:i.typography.bodySmall.fontSize})})},35146:(Y,I,e)=>{"use strict";e.d(I,{f:()=>t});var t=(n=>(n.Code="code",n.Builder="builder",n))(t||{})},65820:(Y,I,e)=>{"use strict";e.d(I,{Ag:()=>t,jN:()=>n,n5:()=>r});var t=(s=>(s.Aggregations="Aggregations",s.RangeFunctions="Range functions",s.Functions="Functions",s.BinaryOps="Binary operations",s.Trigonometric="Trigonometric",s.Time="Time Functions",s))(t||{}),n=(s=>(s.Abs="abs",s.Absent="absent",s.AbsentOverTime="absent_over_time",s.Acos="acos",s.Acosh="acosh",s.Asin="asin",s.Asinh="asinh",s.Atan="atan",s.Atanh="atanh",s.Avg="avg",s.AvgOverTime="avg_over_time",s.BottomK="bottomk",s.Ceil="ceil",s.Changes="changes",s.Clamp="clamp",s.ClampMax="clamp_max",s.ClampMin="clamp_min",s.Cos="cos",s.Cosh="cosh",s.Count="count",s.CountOverTime="count_over_time",s.CountScalar="count_scalar",s.CountValues="count_values",s.DayOfMonth="day_of_month",s.DayOfWeek="day_of_week",s.DayOfYear="day_of_year",s.DaysInMonth="days_in_month",s.Deg="deg",s.Delta="delta",s.Deriv="deriv",s.DropCommonLabels="drop_common_labels",s.Exp="exp",s.Floor="floor",s.Group="group",s.HistogramQuantile="histogram_quantile",s.HoltWinters="holt_winters",s.Hour="hour",s.Idelta="idelta",s.Increase="increase",s.Irate="irate",s.LabelJoin="label_join",s.LabelReplace="label_replace",s.Last="last",s.LastOverTime="last_over_time",s.Ln="ln",s.Log10="log10",s.Log2="log2",s.Max="max",s.MaxOverTime="max_over_time",s.Min="min",s.MinOverTime="min_over_time",s.Minute="minute",s.Month="month",s.Pi="pi",s.PredictLinear="predict_linear",s.Present="present",s.PresentOverTime="present_over_time",s.Quantile="quantile",s.QuantileOverTime="quantile_over_time",s.Rad="rad",s.Rate="rate",s.Resets="resets",s.Round="round",s.Scalar="scalar",s.Sgn="sgn",s.Sin="sin",s.Sinh="sinh",s.Sort="sort",s.SortDesc="sort_desc",s.Sqrt="sqrt",s.Stddev="stddev",s.StddevOverTime="stddev_over_time",s.Sum="sum",s.SumOverTime="sum_over_time",s.Tan="tan",s.Tanh="tanh",s.Time="time",s.Timestamp="timestamp",s.TopK="topk",s.Vector="vector",s.Year="year",s.Addition="__addition",s.Subtraction="__subtraction",s.MultiplyBy="__multiply_by",s.DivideBy="__divide_by",s.Modulo="__modulo",s.Exponent="__exponent",s.NestedQuery="__nested_query",s.EqualTo="__equal_to",s.NotEqualTo="__not_equal_to",s.GreaterThan="__greater_than",s.LessThan="__less_than",s.GreaterOrEqual="__greater_or_equal",s.LessOrEqual="__less_or_equal",s))(n||{}),r=(s=>(s.Rate="rate",s.Histogram="histogram",s.Binary="binary",s))(r||{})},30915:(Y,I,e)=>{"use strict";e.d(I,{$i:()=>d,Dr:()=>u});var t=e(70416),n=e(47232),r=e(77678),s=e(50138),o=e(32264),m=e(14110),l=e(9631);function i(E,h){let[y]=E,[a]=h,v=y.length,g=y[0],b=y[v-1],P=a.length,C=a[0],D=a[P-1],T;if(v)if(P){if(C>b)T=E.map((M,O)=>E[O].concat(h[O]));else if(D<g)T=h.map((M,O)=>h[O].concat(E[O]));else if(C<=g&&D>=b)T=h;else if(!(C>g&&D<b)){if(C>=g){let M=(0,l.Ls)(C,y);M=y[M]<C?M-1:M,T=E.map((O,S)=>E[S].slice(0,M).concat(h[S]))}else if(D>=g){let M=(0,l.Ls)(D,y);M=y[M]<D?M:M+1,T=h.map((O,S)=>h[S].concat(E[S].slice(M)))}}}else T=E;else P?T=h:T=[[]];return T}function c(E,h,y){let[a,...v]=E,g,b;return a[0]<h&&(g=(0,l.Ls)(h,a),a[g]<h&&g++),a[a.length-1]>y&&(b=(0,l.Ls)(y,a),a[b]>y&&b--),(g!=null||b!=null)&&(a=a.slice(g??0,b),v=v.map(P=>P.slice(g??0,b))),[a,...v]}const u="10m",f=E=>`${E.type}|${E.name}|${JSON.stringify(E.labels??"")}`;class d{constructor(h){this.sendEventsInterval=6e4*10,this.pendingRequestIdsToTargSigs=new Map,this.pendingAccumulatedEvents=new Map,this.cache=new Map,this.sendPendingTrackingEvents=()=>{const a=this.pendingAccumulatedEvents.entries();for(let[v,g]of a)if(!g.sent){const b={datasource:g.datasource.toString(),requestCount:g.requestCount.toString(),savedBytesTotal:g.savedBytesTotal.toString(),initialRequestSize:g.initialRequestSize.toString(),lastRequestSize:g.lastRequestSize.toString(),panelId:g.panelId.toString(),dashId:g.dashId.toString(),expr:g.expr.toString(),refreshIntervalMs:g.refreshIntervalMs.toString(),from:g.from.toString(),queryRangeSeconds:g.queryRangeSeconds.toString()};o.$.featureToggles.prometheusIncrementalQueryInstrumentation?(0,m.rR)("grafana_incremental_queries_profile",b):s.P.api.pushEvent&&s.P.api.pushEvent("incremental query response size",b,"no-interaction",{skipDedupe:!0}),this.pendingAccumulatedEvents.set(v,{...g,sent:!0,requestCount:0,savedBytesTotal:0,initialRequestSize:0,lastRequestSize:0})}};const y=h.overlapString;if((0,t.di)(y)){const a=(0,t.E9)(y);this.overlapWindowMs=(0,t.WT)(a)}else{const a=(0,t.E9)(u);this.overlapWindowMs=(0,t.WT)(a)}(o.$.grafanaJavascriptAgent.enabled||o.$.featureToggles?.prometheusIncrementalQueryInstrumentation)&&h.profileFunction!==void 0?(this.profile(),this.shouldProfile=!0):this.shouldProfile=!1,this.getProfileData=h.profileFunction,this.getTargetSignature=h.getTargetSignature}profile(){typeof PerformanceObserver=="function"&&(this.perfObeserver=new PerformanceObserver(h=>{h.getEntries().forEach(y=>{const a=y,v=typeof a?.transferSize=="number";if(a?.initiatorType==="fetch"&&v){let g=a.name;if(g.includes("/api/ds/query")){let b=g.match(/requestId=([a-z\d]+)/i);if(b){let P=b[1];const C=Math.round(a.transferSize),D=this.pendingRequestIdsToTargSigs.get(P);if(D){const T=this.pendingRequestIdsToTargSigs.entries();for(let[,M]of T)if(M.identity===D.identity&&M.bytes!==null){const O=this.pendingAccumulatedEvents.get(M.identity),S=M.bytes-C;this.pendingAccumulatedEvents.set(M.identity,{datasource:M.datasource??"N/A",requestCount:(O?.requestCount??0)+1,savedBytesTotal:(O?.savedBytesTotal??0)+S,initialRequestSize:M.bytes,lastRequestSize:C,panelId:D.panelId?.toString()??"",dashId:D.dashboardUID??"",expr:D.expr??"",refreshIntervalMs:D.refreshIntervalMs??0,sent:!1,from:D.from??"",queryRangeSeconds:D.queryRangeSeconds??0}),this.pendingRequestIdsToTargSigs.delete(P);return}this.pendingRequestIdsToTargSigs.set(P,{...D,bytes:C})}}}}})}),this.perfObeserver.observe({type:"resource",buffered:!1}),setInterval(this.sendPendingTrackingEvents,this.sendEventsInterval),window.addEventListener("beforeunload",this.sendPendingTrackingEvents))}requestInfo(h){const y=h.range.from.valueOf(),a=h.range.to.valueOf(),v=h.rangeRaw?.to?.toString()==="now";let g=v,b;const P=h.intervalMs,C=new Map;h.targets.forEach(D=>{let T=`${h.dashboardUID}|${h.panelId}|${D.refId}`,M=this.getTargetSignature(h,D);this.shouldProfile&&this.getProfileData&&this.pendingRequestIdsToTargSigs.set(h.requestId,{...this.getProfileData(h,D),identity:T+"|"+M,bytes:null,panelId:h.panelId,dashboardUID:h.dashboardUID??"",from:h.rangeRaw?.from.toString()??"",queryRangeSeconds:h.range.to.diff(h.range.from,"seconds")??"",refreshIntervalMs:P??0}),C.set(T,M)});for(const[D,T]of C){let M=this.cache.get(D);if(M?.sig!==T?g=!1:(b=M?.prevTo??1/0,g=a>b&&y<=b),!g)break}if(g&&b){let D=Math.max(b-this.overlapWindowMs,y);const T=(0,n.KQ)(a),M=(0,n.KQ)((0,r.rs)(D,h.intervalMs));h={...h,range:{...h.range,from:M,to:T}}}else C.forEach((D,T)=>{this.cache.delete(T)});return{requests:[h],targSigs:C,shouldCache:v}}procFrames(h,y,a){if(y?.shouldCache){const v=h.range.from.valueOf(),g=h.range.to.valueOf(),b=new Map;a.forEach(C=>{let D=`${h.dashboardUID}|${h.panelId}|${C.refId}`,T=b.get(D);T||(T=[],b.set(D,T)),T.push(C)});let P=[];b.forEach((C,D)=>{let T=(D?this.cache.get(D)?.frames:null)??[];C.forEach(O=>{if(O.length===0||O.fields.length===0)return;let S=f(O.fields[1]),p=T.find(x=>f(x.fields[1])===S);if(!p)T.push(O);else{let x=p.fields.map(B=>B.values),A=O.fields.map(B=>B.values),R=i(x,A);if(R){for(let B=0;B<R.length;B++)p.fields[B].values=R[B];p.length=p.fields[0].values.length}}});let M=[];T.forEach(O=>{let S=O.fields.map(x=>x.values),p=c(S,v,g);if(p[0].length>0){for(let x=0;x<p.length;x++)O.fields[x].values=p[x];M.push(O)}}),this.cache.set(D,{sig:y.targSigs.get(D),frames:M,prevTo:g}),P.push(...M)}),a=P.map(C=>({...C,fields:C.fields.map(D=>({...D,config:{...D.config},values:D.values.slice()}))}))}return a}}},39132:(Y,I,e)=>{"use strict";e.d(I,{Bm:()=>O,J3:()=>h,L:()=>S,hF:()=>D});var t=e(2543),n=e.n(t),r=e(41987),s=e(41260),o=e(11261),m=e(28240),l=e(52622),i=e(57875),c=e(32264),u=e(19347);const f=/^[+-]?inf(?:inity)?$/i,d=(p,x)=>x.app===r.Jk.Explore&&(p.meta?.custom?.resultType==="vector"||p.meta?.custom?.resultType==="scalar")?!0:x.targets.find(R=>R.refId===p.refId)?.format==="table",E=(p,x)=>p.meta?.type===s.m.HeatmapCells?!1:x.targets.find(R=>R.refId===p.refId)?.format==="heatmap";function h(p,x,A){c.$.featureToggles.prometheusDataplane&&p.data.forEach(q=>{const le=x.targets.find(me=>me.refId===q.refId);le&&le.legendFormat==="__auto"&&q.fields.forEach(me=>{if(me.labels?.__name__&&me.labels?.__name__===me.name){const k={...me,name:o.Bc};me.config.displayNameFromDS=(0,m.Ct)(k,q,p.data)}})});const[R,B]=(0,t.partition)(p.data,q=>d(q,x)),U=a(R),[F,K]=(0,t.partition)(B,q=>q.meta?.custom?.resultType==="exemplar"),{exemplarTraceIdDestinations:w}=A,L=F.map(q=>{if(w?.length)for(const le of w){const me=q.fields.find(k=>k.name===le.name);if(me){const k=g(le);me.config.links=me.config.links?.length?[...me.config.links,...k]:k}}return{...q,meta:{...q.meta,dataTopic:l.QR.Annotations}}}),[V,N]=(0,t.partition)(K,q=>E(q,x));V.forEach(q=>{if(q.name==null){let le=q.fields.find(me=>me.type===o.PU.number);if(le){let me=le.labels?.le;me&&(q.name=me,le.config.displayNameFromDS=me)}}});const z=(0,t.groupBy)(V,q=>q.refId);let J=[];for(const q in z){const le=z[q],me=(0,t.groupBy)(le,k=>{const ee=k.fields.find(X=>X.type===o.PU.number);if(ee?.labels&&y in ee.labels){const{le:X,...j}=ee?.labels;return Object.values(j).join()}return Object.values(ee?.labels??[]).join()});(0,t.forOwn)(me,(k,ee)=>{const X=k.sort(O);J.push(T(M(X)))})}const G=N.map(q=>({...q,meta:{...q.meta,preferredVisualisationType:"graph"}})),H=(0,t.flatten)(J);return{...p,data:[...G,...U,...H,...L]}}const y="le";function a(p){if(p.length===0||p.length===1&&p[0].length===0)return p;const x=(0,t.groupBy)(p,"refId"),A=Object.keys(x);return A.map(B=>{const U=v(A.length,B),F=C({data:[],valueName:U}),K=P([]),w=[];x[B].forEach(V=>{const z=V.fields[1]?.labels??{};Object.keys(z).sort().forEach(J=>{if(!w.some(G=>G.name===J)){const G=J===y;w.push({name:J,config:{filterable:!0},type:G?o.PU.number:o.PU.string,values:[]})}})}),x[B].forEach(V=>{const N=V.fields[0]?.values??[],z=V.fields[1]?.values??[];N.forEach(J=>K.values.push(J)),z.forEach(J=>{F.values.push(S(J));const G=V.fields[1].labels??{};w.forEach(H=>H.values.push(b(G,H.name)))})});const L=[K,...w,F];return{refId:B,fields:L,meta:{...x[B][0].meta,preferredVisualisationType:"rawPrometheus"},length:K.values.length}})}function v(p,x=""){return p>1?`Value #${x}`:"Value"}function g(p){const x=[];if(p.datasourceUid){const R=(0,u.l)().getInstanceSettings(p.datasourceUid);R&&x.push({title:p.urlDisplayLabel||`Query with ${R?.name}`,url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:p.datasourceUid,datasourceName:R?.name??"Data source not found"}})}return p.url&&x.push({title:p.urlDisplayLabel||`Go to ${p.url}`,url:p.url,targetBlank:!0}),x}function b(p,x){return p.hasOwnProperty(x)?x===y?S(p[x]):p[x]:""}function P(p,x=!1){return{name:o.LE,type:o.PU.time,config:{},values:p.map(A=>x?A[0]:A[0]*1e3)}}function C({data:p,valueName:x=o.Bc,parseValue:A=!0,labels:R,displayNameFromDS:B}){return{name:x,type:o.PU.number,display:(0,i.J)(),config:{displayNameFromDS:B},labels:R,values:p.map(U=>A?S(U[1]):U[1])}}function D(p){const x=p.__name__||"";delete p.__name__;const A=Object.entries(p).map(R=>`${R[0]}="${R[1]}"`).join(",");return`${x}{${A}}`}function T(p){if(p.length===0||p.length===1&&p[0].length===0)return[];const x=p[0].fields.find(R=>R.type===o.PU.time),A=p.map(R=>{let B=R.fields.find(U=>U.type===o.PU.number);return{...B,name:B.config.displayNameFromDS}});return[{...p[0],meta:{...p[0].meta,type:s.m.HeatmapRows},fields:[x,...A]}]}function M(p){for(let x=p.length-1;x>0;x--){const A=p[x].fields.find(B=>B.type===o.PU.number),R=p[x-1].fields.find(B=>B.type===o.PU.number);if(!A||!R)throw new Error("Prometheus heatmap transform error: data should be a time series");for(let B=0;B<A.values.length;B++){const U=R.values[B]||[0];A.values[B]-=U,A.values[B]<1e-9&&(A.values[B]=0)}}return p}function O(p,x){let A,R;try{A=S(p.fields[1].state?.displayName??p.name??p.fields[1].name),R=S(x.fields[1].state?.displayName??x.name??x.fields[1].name)}catch(B){return console.error(B),0}return A>R?1:A<R?-1:0}function S(p){return f.test(p)?p[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:parseFloat(p)}},69120:(Y,I,e)=>{"use strict";e.d(I,{B4:()=>s,N1:()=>n,fD:()=>t,m_:()=>r});var t=(o=>(o.Low="Low",o.Medium="Medium",o.High="High",o.None="None",o))(t||{}),n=(o=>(o.Cortex="Cortex",o.Mimir="Mimir",o.Prometheus="Prometheus",o.Thanos="Thanos",o))(n||{}),r=(o=>(o.Auto="__auto",o.Verbose="__verbose",o.Custom="__custom",o))(r||{}),s=(o=>(o[o.LabelNames=0]="LabelNames",o[o.LabelValues=1]="LabelValues",o[o.MetricNames=2]="MetricNames",o[o.VarQueryResult=3]="VarQueryResult",o[o.SeriesQuery=4]="SeriesQuery",o[o.ClassicQuery=5]="ClassicQuery",o))(s||{})},19071:(Y,I,e)=>{"use strict";e.d(I,{cd:()=>z,xw:()=>U});var t=e(37471),n=e(11261);const r={filters:[],groupBy:[]};var s=(te=>(te.Done="done",te.Error="error",te.Pending="pending",te.Streaming="streaming",te))(s||{}),o=(te=>(te.Spans="spans",te.Traces="traces",te))(o||{}),m=(te=>(te.Intrinsic="intrinsic",te.Resource="resource",te.Span="span",te.Unscoped="unscoped",te))(m||{});function l(te){const{nodes:oe,edges:ie}=i(te),[ue,be]=makeFrames();for(const ge of oe)ue.add(ge);for(const ge of ie)be.add(ge);return[ue,be]}function i(te){const oe=[],ie=[],ue=new DataFrameView(te),be=c(ue),ge=makeSpanMap(re=>{if(re>=te.length)return;const ye=ue.get(re);return{span:{...ye},id:ye.spanID,parentIds:ye.parentSpanID?[ye.parentSpanID]:[]}});for(let re=0;re<ue.length;re++){const ye=ue.get(re),Be=ge[ye.spanID].children.map(Se=>{const We=ge[Se].span;return[We.startTime,We.startTime+We.duration]}),ve=getNonOverlappingDuration(Be),Me=ye.duration-ve,ke=getStats(ye.duration,be,Me);oe.push({[Fields.id]:ye.spanID,[Fields.title]:ye.serviceName??"",[Fields.subTitle]:ye.operationName,[Fields.mainStat]:ke.main,[Fields.secondaryStat]:ke.secondary,[Fields.color]:Me/be}),ye.parentSpanID&&ge[ye.parentSpanID].span&&ie.push({[Fields.id]:ye.parentSpanID+"--"+ye.spanID,[Fields.target]:ye.spanID,[Fields.source]:ye.parentSpanID})}return{nodes:oe,edges:ie}}function c(te){let oe=0,ie=1/0;for(let ue=0;ue<te.length;ue++){const be=te.get(ue);be.startTime<ie&&(ie=be.startTime),be.startTime+be.duration>oe&&(oe=be.startTime+be.duration)}return oe-ie}const u="traces_service_graph_request_server_seconds_sum",f="traces_service_graph_request_total",d="traces_service_graph_request_failed_total",E="traces_service_graph_request_server_seconds_bucket",h={expr:"sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name)",topk:5,params:[]},y={expr:"sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name)",topk:5,params:['status_code="STATUS_CODE_ERROR"']},a={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},v='span_kind="SPAN_KIND_SERVER"',g=[u,f,d,E];function b(te,oe){const ie=C(te),ue={},be={};return T(ie[f],"total",f,ue,be),T(ie[u],"seconds",u,ue,be),T(ie[d],"failed",d,ue,be),M(ue,be,oe)}function P(){function te(ue,be){return new MutableDataFrame({name:ue,fields:be,meta:{preferredVisualisationType:"nodeGraph"}})}const oe=te("Nodes",[{name:Fields.id,type:FieldType.string,values:[]},{name:Fields.title,type:FieldType.string,config:{displayName:"Service name"},values:[]},{name:Fields.subTitle,type:FieldType.string,config:{displayName:"Service namespace"},values:[]},{name:Fields.mainStat,type:FieldType.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:Fields.secondaryStat,type:FieldType.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]},{name:Fields.arc+"success",type:FieldType.number,config:{displayName:"Success",color:{fixedColor:"green",mode:FieldColorModeId.Fixed}},values:[]},{name:Fields.arc+"failed",type:FieldType.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:FieldColorModeId.Fixed}},values:[]}]),ie=te("Edges",[{name:Fields.id,type:FieldType.string,values:[]},{name:Fields.source,type:FieldType.string,values:[]},{name:"sourceName",type:FieldType.string,values:[]},{name:"sourceNamespace",type:FieldType.string,values:[]},{name:Fields.target,type:FieldType.string,values:[]},{name:"targetName",type:FieldType.string,values:[]},{name:"targetNamespace",type:FieldType.string,values:[]},{name:Fields.mainStat,type:FieldType.number,config:{unit:"ms/r",displayName:"Average response time"},values:[]},{name:Fields.secondaryStat,type:FieldType.number,config:{unit:"r/sec",displayName:"Requests per second"},values:[]}]);return[oe,ie]}function C(te){return(te[0]?.data||[]).reduce((oe,ie)=>{const ue=toDataFrame(ie);return oe[ue.refId??"A"]=new DataFrameView(ue),oe},{})}var D=(te=>(te.sourceName="sourceName",te.sourceNamespace="sourceNamespace",te.targetName="targetName",te.targetNamespace="targetNamespace",te))(D||{});function T(te,oe,ie,ue,be){if(!te)return;const ge=`Value #${ie}`;for(let re=0;re<te.length;re++){const ye=te.get(re),Be=ye.server_service_namespace?`${ye.server_service_namespace}/${ye.server}`:ye.server,ve=ye.client_service_namespace?`${ye.client_service_namespace}/${ye.client}`:ye.client,Me=`${ve}_${Be}`;be[Me]?be[Me][oe]=(be[Me][oe]||0)+ye[ge]:be[Me]={target:Be,targetName:ye.server,targetNamespace:ye.server_service_namespace,source:ve,sourceName:ye.client,sourceNamespace:ye.client_service_namespace,[oe]:ye[ge]},ue[Be]?ue[Be][oe]=(ue[Be][oe]||0)+ye[ge]:ue[Be]={name:ye.server,namespace:ye.server_service_namespace,[oe]:ye[ge]},ue[ve]||(ue[ve]={name:ye.client,namespace:ye.client_service_namespace,[oe]:0})}}function M(te,oe,ie){const[ue,be]=P();for(const ge of Object.keys(te)){const re=te[ge];ue.add({[Fields.id]:ge,[Fields.title]:re.name,[Fields.subTitle]:re.namespace,[Fields.mainStat]:re.total?re.seconds/re.total*1e3:Number.NaN,[Fields.secondaryStat]:re.total?Math.round(re.total*100)/100:Number.NaN,[Fields.arc+"success"]:re.total?(re.total-Math.min(re.failed||0,re.total))/re.total:1,[Fields.arc+"failed"]:re.total?Math.min(re.failed||0,re.total)/re.total:0})}for(const ge of Object.keys(oe)){const re=oe[ge];be.add({[Fields.id]:ge,[Fields.source]:re.source,sourceName:re.sourceName,sourceNamespace:re.sourceNamespace,[Fields.target]:re.target,targetName:re.targetName,targetNamespace:re.targetNamespace,[Fields.mainStat]:re.total?re.seconds/re.total*1e3:Number.NaN,[Fields.secondaryStat]:re.total?Math.round(re.total*100)/100:Number.NaN})}return{nodes:ue,edges:be}}function O(te){if(te.stringValue)return te.stringValue;if(te.boolValue!==void 0)return!!te.boolValue;if(te.intValue!==void 0)return Number.parseInt(te.intValue,10);if(te.doubleValue)return Number.parseFloat(te.doubleValue);if(te.arrayValue){const oe=[];for(const ie of te.arrayValue.values)oe.push(O(ie));return oe}return""}function S(te){const oe=[];let ie="OTLPResourceNoServiceName";if(!te)return{serviceName:ie,serviceTags:oe};for(const ue of te.attributes)ue.key===SemanticResourceAttributes.SERVICE_NAME&&(ie=ue.value.stringValue||ie),oe.push({key:ue.key,value:O(ue.value)});return{serviceName:ie,serviceTags:oe}}function p(te){const oe=[];if(te.attributes)for(const ie of te.attributes)oe.push({key:ie.key,value:O(ie.value)});return oe}function x(te){let oe;if(te.kind){const ie=te.kind.toString().toLowerCase().split("_");oe=ie.length?ie[ie.length-1]:te.kind.toString()}return oe}function A(te){const oe=[];if(te.links)for(const ie of te.links){const{traceId:ue,spanId:be}=ie,ge=[];if(ie.attributes)for(const re of ie.attributes)ge.push({key:re.key,value:O(re.value)});oe.push({traceID:ue,spanID:be,tags:ge})}return oe}function R(te){const oe=[];if(te.events)for(const ie of te.events){const ue=[];if(ie.attributes)for(const be of ie.attributes)ue.push({key:be.key,value:O(be.value)});oe.push({fields:ue,timestamp:ie.timeUnixNano/1e6})}return oe}function B(te,oe=!1){const ie=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,values:[]},{name:"spanID",type:FieldType.string,values:[]},{name:"parentSpanID",type:FieldType.string,values:[]},{name:"operationName",type:FieldType.string,values:[]},{name:"serviceName",type:FieldType.string,values:[]},{name:"kind",type:FieldType.string,values:[]},{name:"statusCode",type:FieldType.number,values:[]},{name:"statusMessage",type:FieldType.string,values:[]},{name:"instrumentationLibraryName",type:FieldType.string,values:[]},{name:"instrumentationLibraryVersion",type:FieldType.string,values:[]},{name:"traceState",type:FieldType.string,values:[]},{name:"serviceTags",type:FieldType.other,values:[]},{name:"startTime",type:FieldType.number,values:[]},{name:"duration",type:FieldType.number,values:[]},{name:"logs",type:FieldType.other,values:[]},{name:"references",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const be of te){const{serviceName:ge,serviceTags:re}=S(be.resource);for(const ye of be.instrumentationLibrarySpans)for(const Be of ye.spans)ie.add({traceID:Be.traceId.length>16?Be.traceId.slice(16):Be.traceId,spanID:Be.spanId,parentSpanID:Be.parentSpanId||"",operationName:Be.name||"",serviceName:ge,kind:x(Be),statusCode:Be.status?.code,statusMessage:Be.status?.message,instrumentationLibraryName:ye.instrumentationLibrary?.name,instrumentationLibraryVersion:ye.instrumentationLibrary?.version,traceState:Be.traceState,serviceTags:re,startTime:Be.startTimeUnixNano/1e6,duration:(Be.endTimeUnixNano-Be.startTimeUnixNano)/1e6,tags:p(Be),logs:R(Be),references:A(Be)})}}catch(be){return console.error(be),{error:{message:"JSON is not valid OpenTelemetry format: "+be},data:[]}}let ue=[ie];return oe&&ue.push(...createGraphFrames(ie)),{data:ue}}function U(te){let oe={batches:[]},ie={};for(let ue=0;ue<te.length;ue++){const be=te.get(ue);ie[be.serviceName]||(ie[be.serviceName]=oe.batches.length,oe.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let ge=ie[be.serviceName];oe.batches[ge].resource.attributes.length===0&&(oe.batches[ge].resource.attributes=K(be.serviceTags)),oe.batches[ge].instrumentationLibrarySpans[0].instrumentationLibrary||be.instrumentationLibraryName&&(oe.batches[ge].instrumentationLibrarySpans[0].instrumentationLibrary={name:be.instrumentationLibraryName,version:be.instrumentationLibraryVersion?be.instrumentationLibraryVersion:""}),oe.batches[ge].instrumentationLibrarySpans[0].spans.push({traceId:be.traceID.padStart(32,"0"),spanId:be.spanID,parentSpanId:be.parentSpanID||"",traceState:be.traceState||"",name:be.operationName,kind:F(be.kind),startTimeUnixNano:be.startTime*1e6,endTimeUnixNano:(be.startTime+be.duration)*1e6,attributes:be.tags?K(be.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:L(be),events:V(be.logs),links:N(be.references)})}return oe}function F(te){let oe;if(te)switch(te){case"server":oe="SPAN_KIND_SERVER";break;case"client":oe="SPAN_KIND_CLIENT";break;case"producer":oe="SPAN_KIND_PRODUCER";break;case"consumer":oe="SPAN_KIND_CONSUMER";break;case"internal":oe="SPAN_KIND_INTERNAL";break}return oe}function K(te){return te.reduce((oe,ie)=>[...oe,{key:ie.key,value:w(ie)}],[])}function w(te){if(typeof te.value=="string")return{stringValue:te.value};if(typeof te.value=="boolean")return{boolValue:te.value};if(typeof te.value=="number")return te.value%1===0?{intValue:te.value}:{doubleValue:te.value};if(typeof te.value=="object"&&Array.isArray(te.value)){const oe=[];for(const ie of te.value)oe.push(w(ie));return{arrayValue:{values:oe}}}return{stringValue:te.value}}function L(te){let oe;return te.statusCode!==void 0&&(oe={code:te.statusCode,message:te.statusMessage?te.statusMessage:""}),oe}function V(te){if(!te||!te.length)return;let oe=[];for(const ie of te){let ue={timeUnixNano:ie.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const be of ie.fields)ue.attributes.push({key:be.key,value:w(be)});oe.push(ue)}return oe}function N(te){if(!te||!te.length)return;let oe=[];for(const ie of te){let ue={traceId:ie.traceID,spanId:ie.spanID,attributes:[],droppedAttributesCount:0};if(ie.tags?.length)for(const be of ie.tags)ue.attributes?.push({key:be.key,value:w(be)});oe.push(ue)}return oe}const z="Related profiles";function J(te,oe,ie=!1){const ue=te.data[0];if(!ue)return ne;const ge=oe?.jsonData?.tracesToProfiles;let re;if(ge?.datasourceUid&&(re=getDataSourceSrv().getInstanceSettings(ge.datasourceUid)),ge&&re){const Be=ge.customQuery?ge.query:void 0,ve={title:z,url:"",internal:{datasourceUid:re.uid,datasourceName:re.name,query:{labelSelector:Be||"{${__tags}}",groupBy:[],profileTypeId:ge.profileTypeId??"",queryType:"profile",spanSelector:['${__span.tags["pyroscope.profile.id"]}'],refId:"profile"}},origin:DataLinkConfigOrigin.Datasource};ue.fields.forEach(Me=>{Me.name==="tags"&&(Me.config.links=[ve])})}let ye=[...te.data];return ie&&ye.push(...createGraphFrames(toDataFrame(ue))),{...te,data:ye}}function G(te){return{traceID:te.traceID,startTime:parseInt(te.startTimeUnixNano,10)/1e6,traceDuration:te.durationMs||"<1ms",traceService:te.rootServiceName||"",traceName:te.rootTraceName||""}}const H=te=>te.stringValue?`"${te.stringValue}"`:""+(te.intValue||te.doubleValue||te.boolValue||'""');function q(te,oe){return oe.series.map((ue,be)=>{const ge={};ue.labels?.forEach(ye=>{ge[ye.key]=H(ye.value)});let re=oe.series.length===1?te:"";return ue.labels&&(ue.labels.length===1?re=H(ue.labels[0].value):re=`{${ue.labels.map(ye=>`${ye.key}=${H(ye.value)}`).join(", ")}}`),createDataFrame({refId:re||`A${be}`,fields:[{name:"time",type:FieldType.time,values:ue.samples.map(ye=>parseInt(ye.timestampMs,10))},{name:re,labels:ge,type:FieldType.number,values:ue.samples.map(ye=>ye.value),config:{displayNameFromDS:re}}],meta:{preferredVisualisationType:"graph"}})})}function le(te,oe,ie){return ie===SearchTableType.Spans?k(te,oe):me(te,oe)}function me(te,oe){const ie=createDataFrame({name:"Traces",refId:"traces",fields:[{name:"traceID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:oe.uid,datasourceName:oe.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:FieldType.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceService",type:FieldType.string,config:{displayNameFromDS:"Service"}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}},{name:"nested",type:FieldType.nestedFrames}],meta:{preferredVisualisationType:"table",uniqueRowIdFields:[0]}});return te?.length?(ie.length=te.length,te.sort((ue,be)=>parseInt(be?.startTimeUnixNano,10)/1e6-parseInt(ue?.startTimeUnixNano,10)/1e6).forEach(ue=>{const be=G(ue);ie.fields[0].values.push(be.traceID),ie.fields[1].values.push(be.startTime),ie.fields[2].values.push(be.traceService),ie.fields[3].values.push(be.traceName),ie.fields[4].values.push(be.traceDuration),ue.spanSets?ie.fields[5].values.push(ue.spanSets.map(ge=>X(ue,ge,oe))):ue.spanSet&&ie.fields[5].values.push([X(ue,ue.spanSet,oe)])}),[ie]):[ie]}function k(te,oe){const ie={};let ue=!1;te?.forEach(ge=>ee(ge).forEach(re=>{re.attributes?.forEach(ye=>{ie[ye.key]={name:ye.key,type:FieldType.string,config:{displayNameFromDS:ye.key}}}),re.spans.forEach(ye=>{ye.name&&(ue=!0),ye.attributes?.forEach(Be=>{ie[Be.key]={name:Be.key,type:FieldType.string,config:{displayNameFromDS:Be.key}}})})}));const be=new MutableDataFrame({name:"Spans",refId:"traces",fields:[{name:"traceIdHidden",type:FieldType.string,config:{custom:{hidden:!0}}},{name:"traceService",type:FieldType.string,config:{displayNameFromDS:"Trace Service",custom:{width:200}}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Trace Name",custom:{width:200}}},{name:"spanID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:oe.uid,datasourceName:oe.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:FieldType.time,config:{displayNameFromDS:"Start time"}},{name:"name",type:FieldType.string,config:{displayNameFromDS:"Name",custom:{hidden:!ue}}},...Object.values(ie).sort((ge,re)=>ge.name.localeCompare(re.name)),{name:"duration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});return!te||!te.length?[be]:(te.sort((ge,re)=>parseInt(re?.startTimeUnixNano,10)/1e6-parseInt(ge?.startTimeUnixNano,10)/1e6).forEach(ge=>{ee(ge).forEach(re=>{re.spans.forEach(ye=>{be.add(j(ye,re,ge))})})}),[be])}const ee=te=>te.spanSets||(te.spanSet?[te.spanSet]:[]),X=(te,oe,ie)=>{const ue={};let be=!1;oe.attributes?.map(ye=>{ue[ye.key]={name:ye.key,type:FieldType.string,config:{displayNameFromDS:ye.key},values:[]}}),oe.spans.forEach(ye=>{ye.name&&(be=!0),ye.attributes?.forEach(Be=>{ue[Be.key]={name:Be.key,type:FieldType.string,config:{displayNameFromDS:Be.key},values:[]}})});const ge=new MutableDataFrame({fields:[{name:"traceIdHidden",type:FieldType.string,config:{custom:{hidden:!0}},values:[]},{name:"spanID",type:FieldType.string,values:[],config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:ie.uid,datasourceName:ie.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:FieldType.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:FieldType.string,values:[],config:{displayNameFromDS:"Name",custom:{hidden:!be}}},...Object.values(ue).sort((ye,Be)=>ye.name.localeCompare(Be.name)),{name:"duration",type:FieldType.number,values:[],config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}}),re=createTheme();for(const ye of ge.fields)ye.display=getDisplayProcessor({field:ye,theme:re});return oe.spans.forEach(ye=>{ge.add(j(ye,oe,te))}),ge};function j(te,oe,ie){const ue=parseInt(te.startTimeUnixNano,10)/1e6,be={traceIdHidden:ie.traceID,traceService:ie.rootServiceName||"",traceName:ie.rootTraceName||"",spanID:te.spanID,time:ue,duration:parseInt(te.durationNanos,10),name:te.name};let ge=[];return oe.attributes&&(ge=ge.concat(oe.attributes)),te.attributes&&(ge=ge.concat(te.attributes)),ge.forEach(re=>{(re.value.boolValue||re.value.Value?.bool_value)&&(be[re.key]=re.value.boolValue||re.value.Value?.bool_value),(re.value.doubleValue||re.value.Value?.double_value)&&(be[re.key]=re.value.doubleValue||re.value.Value?.double_value),(re.value.intValue||re.value.Value?.int_value)&&(be[re.key]=re.value.intValue||re.value.Value?.int_value),(re.value.stringValue||re.value.Value?.string_value)&&(be[re.key]=re.value.stringValue||re.value.Value?.string_value)}),be}const ne={data:[new t.k({fields:[{name:"trace",type:n.PU.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},64861:(Y,I,e)=>{"use strict";e.d(I,{nE:()=>s,r6:()=>r,xB:()=>t});var t=(o=>(o[o.AlphaAsc=1]="AlphaAsc",o[o.AlphaDesc=2]="AlphaDesc",o[o.Importance=3]="Importance",o[o.TimeAsc=4]="TimeAsc",o[o.TimeDesc=5]="TimeDesc",o))(t||{}),n=(o=>(o.Current="current",o.RecentChanges="changes",o))(n||{}),r=(o=>(o.Default="default",o.Custom="custom",o))(r||{}),s=(o=>(o.List="list",o.Stat="stat",o))(s||{})},39758:(Y,I,e)=>{"use strict";e.d(I,{mn:()=>m,ur:()=>n});var t=e(97706);const n=1,r=2,s=3,o=(l,i,c,u)=>(0,t.h)(i+l*(c+u),6);function m(l,i,c,u,f){let d=1-i,E=c===n?d/(l-1):c===r?d/l:c===s?d/(l+1):0;(isNaN(E)||E===1/0)&&(E=0);let h=c===n?0:c===r?E/2:c===s?E:0,y=i/l,a=(0,t.h)(y,6);if(u==null)for(let v=0;v<l;v++)f(v,o(v,h,y,E),a);else f(u,o(u,h,y,E),a)}},4134:(Y,I,e)=>{"use strict";e.d(I,{C$:()=>m,HY:()=>o,Tr:()=>s,ur:()=>r});const t=10,n=4;function r(l,i,c,u,f,d){return l>=c&&l<=f&&i>=u&&i<=d}function s(l,i,c){let u=[];if(l.o.length&&u.push(...l.o.filter(f=>(i==null||f.sidx===i)&&(c==null||f.didx===c))),l.q)for(let f=0;f<l.q.length;f++)u.push(...s(l.q[f],i,c));return u}function o(l,i){return l.x<=i.x+i.w&&l.x+l.w>=i.x&&l.y+l.h>=i.y&&l.y<=i.y+i.h}class m{constructor(i,c,u,f,d=0){this.x=i,this.y=c,this.w=u,this.h=f,this.l=d,this.o=[],this.q=null}split(){let i=this,c=i.x,u=i.y,f=i.w/2,d=i.h/2,E=i.l+1;i.q=[new m(c+f,u,f,d,E),new m(c,u,f,d,E),new m(c,u+d,f,d,E),new m(c+f,u+d,f,d,E)]}quads(i,c,u,f,d){let E=this,h=E.q,y=E.x+E.w/2,a=E.y+E.h/2,v=c<a,g=i<y,b=i+u>y,P=c+f>a;v&&b&&d(h[0]),g&&v&&d(h[1]),g&&P&&d(h[2]),b&&P&&d(h[3])}add(i){let c=this;if(c.q!=null)c.quads(i.x,i.y,i.w,i.h,u=>{u.add(i)});else{let u=c.o;if(u.push(i),u.length>t&&c.l<n){c.split();for(let f=0;f<u.length;f++){let d=u[f];c.quads(d.x,d.y,d.w,d.h,E=>{E.add(d)})}c.o.length=0}}}get(i,c,u,f,d){let E=this,h=E.o;for(let y=0;y<h.length;y++)d(h[y]);E.q!=null&&E.quads(i,c,u,f,y=>{y.get(i,c,u,f,d)})}clear(){this.o.length=0,this.q=null}}},58384:(Y,I,e)=>{"use strict";e.d(I,{d:()=>d,l:()=>E});var t=e(2543),n=e.n(t),r=e(96540),s=e(47070),o=e(56323),m=e(52622),l=e(97696),i=e(59796),c=e(12509),u=e(2913),f=e(17516);class d extends r.PureComponent{constructor(){super(...arguments),this.renderComponent=(y,a)=>{const{options:v,fieldConfig:g}=this.props,{value:b,alignmentFactors:P,orientation:C,width:D,height:T,count:M}=y,{field:O,display:S,view:p,colIndex:x}=b,{openMenu:A,targetClassName:R}=a;let B;return p&&(0,t.isNumber)(x)&&(B=p.getFieldDisplayProcessor(x)),r.createElement(l.xE,{value:E(M,g.defaults,S),width:D,height:T,orientation:C,field:O,text:v.text,display:B,theme:u.config.theme2,itemSpacing:this.getItemSpacing(),displayMode:v.displayMode,onClick:A,className:R,alignmentFactors:M>1?P:void 0,showUnfilled:v.showUnfilled,valueDisplayMode:v.valueMode,namePlacement:v.namePlacement})},this.renderValue=y=>{const{value:a,orientation:v}=y,{hasLinks:g,getLinks:b}=a;return g&&b?r.createElement("div",{style:{width:"100%",display:v===s.wV.Vertical?"flex":"initial"}},r.createElement(i.e,{style:{height:"100%"},links:b},P=>this.renderComponent(y,P))):this.renderComponent(y,{})},this.getValues=()=>{const{data:y,options:a,replaceVariables:v,fieldConfig:g,timeZone:b}=this.props;return(0,o.PI)({fieldConfig:g,reduceOptions:a.reduceOptions,replaceVariables:v,theme:u.config.theme2,data:y.series,timeZone:b})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}getOrientation(){const{options:y,width:a,height:v}=this.props,{orientation:g}=y;return g===s.wV.Auto?a>v?s.wV.Vertical:s.wV.Horizontal:g}calcBarSize(){const{options:y}=this.props,a=this.getOrientation(),v=y.sizing===m.T6.Manual,g=a===s.wV.Vertical,b=a===s.wV.Horizontal,P=v&&g?y.minVizWidth:f.K.minVizWidth,C=v&&b?y.minVizHeight:f.K.minVizHeight,D=v&&b?y.maxVizHeight:f.K.maxVizHeight;return{minVizWidth:P,minVizHeight:C,maxVizHeight:D}}render(){const{height:y,width:a,options:v,data:g,renderCounter:b}=this.props,{minVizWidth:P,minVizHeight:C,maxVizHeight:D}=this.calcBarSize();return r.createElement(c.S,{source:g,getAlignmentFactors:o.XS,getValues:this.getValues,renderValue:this.renderValue,renderCounter:b,width:a,height:y,maxVizHeight:D,minVizWidth:P,minVizHeight:C,itemSpacing:this.getItemSpacing(),orientation:v.orientation})}}function E(h,y,a){return h===1&&!y.displayName?{...a,title:void 0}:a}},17516:(Y,I,e)=>{"use strict";e.d(I,{K:()=>n});var t=e(52622);const n={displayMode:t.eX.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:t.TZ.Auto,showUnfilled:!0,sizing:t.T6.Auto,valueMode:t.$l.Color}},14738:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{plugin:()=>C});var t=e(65158),n=e(52622),r=e(71242),s=e(23799),o=e(63250);const m=D=>(0,o._$)(D),l=(D,T,M)=>{const O=(0,o.gl)(D,T,M);if(T==="singlestat"&&M.angular){const S=M.angular.gauge;S&&(O.showThresholdMarkers=S.thresholdMarkers,O.showThresholdLabels=S.thresholdLabels)}return O};var i=e(96540),c=e(57875),u=e(56323),f=e(95164),d=e(59796),E=e(12509),h=e(2913),y=e(58384);const a={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:n.T6.Auto};class v extends i.PureComponent{constructor(){super(...arguments),this.renderComponent=(T,M)=>{const{options:O,fieldConfig:S}=this.props,{width:p,height:x,count:A,value:R}=T,{field:B,display:U}=R,{openMenu:F,targetClassName:K}=M;return i.createElement(f._,{value:(0,y.l)(A,S.defaults,U),width:p,height:x,field:B,text:O.text,showThresholdLabels:O.showThresholdLabels,showThresholdMarkers:O.showThresholdMarkers,theme:h.config.theme2,onClick:F,className:K,orientation:O.orientation})},this.renderValue=T=>{const{value:M}=T,{getLinks:O,hasLinks:S}=M;return S&&O?i.createElement(d.e,{links:O,style:{flexGrow:1}},p=>this.renderComponent(T,p)):this.renderComponent(T,{})},this.getValues=()=>{const{data:T,options:M,replaceVariables:O,fieldConfig:S,timeZone:p}=this.props;for(let x of T.series)for(let A of x.fields)if(A.config.unit==="percent"||A.config.unit==="percentunit"){const R=A.config.min??0,B=A.config.max??(A.config.unit==="percent"?100:1);A.state=A.state??{},A.state.range={min:R,max:B,delta:B-R},A.display=(0,c.J)({field:A,theme:h.config.theme2})}return(0,u.PI)({fieldConfig:S,reduceOptions:M.reduceOptions,replaceVariables:O,theme:h.config.theme2,data:T.series,timeZone:p})},this.calculateGaugeSize=()=>{const{options:T}=this.props,M=T.orientation,O=T.sizing===n.T6.Manual,S=M===n.wV.Vertical,p=M===n.wV.Horizontal,x=O&&S?T.minVizWidth:a.minVizWidth,A=O&&p?T.minVizHeight:a.minVizHeight;return{minVizWidth:x,minVizHeight:A}}}render(){const{height:T,width:M,data:O,renderCounter:S,options:p}=this.props,{minVizHeight:x,minVizWidth:A}=this.calculateGaugeSize();return i.createElement(E.S,{getValues:this.getValues,renderValue:this.renderValue,width:M,height:T,source:O,autoGrid:!0,renderCounter:S,orientation:p.orientation,minVizHeight:x,minVizWidth:A})}}var g=e(50082),b=e(38824);class P{getSuggestionsForData(T){const{dataSummary:M}=T;if(!M.hasData||!M.hasNumberField||M.numberFieldCount>=50)return;const O=T.getListAppender({name:b.m.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:g.O.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:S=>{S.options.reduceOptions.values&&(S.options.reduceOptions.limit=2)}}});M.hasStringField&&M.frameCount===1&&M.rowCountTotal<10?(O.append({name:b.m.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),O.append({name:b.m.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(O.append({name:b.m.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),O.append({name:b.m.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const C=new t.m(v).useFieldConfig({useCustomConfig:D=>{D.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(D=>{(0,s.L)(D),(0,s.h)(D),D.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:a.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:a.showThresholdMarkers}).addRadio({path:"sizing",name:"Gauge size",settings:{options:[{value:n.T6.Auto,label:"Auto"},{value:n.T6.Manual,label:"Manual"}]},defaultValue:a.sizing,showIf:T=>T.orientation!==n.wV.Auto}).addSliderInput({path:"minVizWidth",name:"Min width",description:"Minimum column width (vertical orientation)",defaultValue:a.minVizWidth,settings:{min:0,max:600,step:1},showIf:T=>T.sizing===n.T6.Manual&&T.orientation===n.wV.Vertical}).addSliderInput({path:"minVizHeight",name:"Min height",description:"Minimum row height (horizontal orientation)",defaultValue:a.minVizHeight,settings:{min:0,max:600,step:1},showIf:T=>T.sizing===n.T6.Manual&&T.orientation===n.wV.Horizontal}),r.I(D)}).setPanelChangeHandler(l).setSuggestionsSupplier(new P).setMigrationHandler(m)},19743:(Y,I,e)=>{"use strict";e.d(I,{x:()=>s});var t=e(96540),n=e(1173),r=e(74668);const s=({value:o,context:m,onChange:l})=>{const i=(0,t.useCallback)(c=>{l(c?.length?{id:n.jR.byRefId,options:c}:void 0)},[l]);return t.createElement(r.X,{value:o?.options,onChange:i,data:m.data,placeholder:"Change filter"})}},33744:(Y,I,e)=>{"use strict";e.d(I,{DY:()=>s,G4:()=>l,Sq:()=>c,T5:()=>i,W_:()=>n,_7:()=>r,fX:()=>o,wq:()=>m,yQ:()=>u,yu:()=>f});var t=e(52622),n=(d=>(d.Point="point",d.Line="line",d.Polygon="polygon",d.Any="*any*",d))(n||{});const r=5;var s=(d=>(d.Left="left",d.Center="center",d.Right="right",d))(s||{}),o=(d=>(d.Top="top",d.Middle="middle",d.Bottom="bottom",d))(o||{}),m=(d=>(d.Left="left",d.Center="center",d.Right="right",d))(m||{}),l=(d=>(d.Top="top",d.Center="center",d.Bottom="bottom",d))(l||{});const i=Object.freeze({size:{fixed:r,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:t.q_.Fixed,fixed:"img/icons/marker/circle.svg"},symbolAlign:{horizontal:"center",vertical:"center"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:t.WQ.Mod,min:-360,max:360}});var c=(d=>(d.color="fill",d.opacity="fill-opacity",d.lineWidth="stroke-width",d))(c||{}),u=(d=>(d.color="marker-color",d.size="marker-size",d))(u||{}),f=(d=>(d.color="stroke",d.lineWidth="stroke-width",d))(f||{})},61994:(Y,I,e)=>{"use strict";e.d(I,{A:()=>s});var t=e(32196),n=e(96540),r=e(5636);const s=o=>(0,r.gU)(o)?n.createElement("a",{href:o,target:"_blank",className:(0,t.cx)("external-link"),rel:"noreferrer"},o):o},5636:(Y,I,e)=>{"use strict";e.d(I,{Bz:()=>d,G_:()=>i,cA:()=>f,gU:()=>y,o3:()=>h,q:()=>E,rd:()=>u,ue:()=>m});var t=e(92347),n=e(40239),r=e(63577),s=e(90183),o=e(33744);function m(a,v,g,b){const P={};return b&&Object.keys(b).length?(P.color=(0,r.getColorDimension)(a,b.color??o.T5.color,g),P.size=(0,r.getScaledDimension)(a,b.size??o.T5.size),P.rotation=(0,r.getScalarDimension)(a,b.rotation??o.T5.rotation),b.text&&(b.text.field||b.text.fixed)&&(P.text=(0,r.getTextDimension)(a,b.text))):v.fields&&(v.fields.color&&(P.color=(0,r.getColorDimension)(a,v.config.color??o.T5.color,g)),v.fields.size&&(P.size=(0,r.getScaledDimension)(a,v.config.size??o.T5.size)),v.fields.text&&(P.text=(0,r.getTextDimension)(a,v.config.text)),v.fields.rotation&&(P.rotation=(0,r.getScalarDimension)(a,v.config.rotation??o.T5.rotation))),P}let l;function i(){return l||(l=[],c()),l}async function c(){const a=await(0,s.o)();for(let v of["maps","gazetteer"])a.listFiles(v).subscribe({next:g=>{g.forEach(b=>{if(b.name.endsWith(".geojson")){const P=`public/${v}/${b.name}`;l.push({value:P,label:P})}})}})}const u=(a,v,g)=>{const b=a.initMapView(v.view);return a.map=new t.A({view:b,pixelRatio:1,layers:[],controls:[],target:g,interactions:(0,n.N)({mouseWheelZoom:!1})})},f=(a,v)=>{a.initControls(v.controls),a.forceUpdate()},d=(a,v,g)=>{a.panelContext&&a.panelContext.onInstanceStateChange&&a.panelContext.onInstanceStateChange({map:a.map,layers:v,selected:g,actions:a.actions})},E=a=>{let v=a.layers.length;for(;v<100;){const g=`Layer ${v++}`;if(!a.byName.has(g))return g}return`Layer ${Date.now()}`};function h(a,v,g,b){const P=a.getPixelFromCoordinate(g),C=a.getPixelFromCoordinate(b),D=Math.abs(P[0]-C[0]),T=Math.abs(P[1]-C[1]);return D>v||T>v}const y=a=>{try{return new URL(a).protocol.includes("http")}catch{return!1}}},86106:(Y,I,e)=>{"use strict";e.d(I,{d:()=>r});var t=e(96540),n=e(25469);function r(s){const o={position:"relative",top:"auto",right:"auto",marginRight:0};return t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},t.createElement(n.J,{onClick:s.onClick,style:s.style??o}))}},52995:(Y,I,e)=>{"use strict";e.d(I,{P7:()=>n,uM:()=>r,KQ:()=>o});var t=e(52622),n=(m=>(m.Opacity="opacity",m.Scheme="scheme",m))(n||{}),r=(m=>(m.Exponential="exponential",m.Linear="linear",m))(r||{});const s={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:t.yL.Auto,tooltip:{mode:t.$N.Single,yHistogram:!1,showColorScale:!1}},o={...s,color:{...s.color,mode:n.Scheme,scale:r.Exponential},yAxis:{...s.yAxis,axisPlacement:t.vM.Left},rowsFrame:{...s.rowsFrame,layout:t.D7.auto}}},69386:(Y,I,e)=>{"use strict";e.d(I,{K:()=>u});var t=e(32196),n=e(96540),r=e(70255),s=e(40672),o=e(72724),m=e(40845),l=e(72129);function i({width:d,showImage:E,data:h,index:y}){const a=(0,m.of)(f),v=d>600,g=h.get(y),b=encodeURI(g.title);return n.createElement("article",{"aria-labelledby":b,className:(0,t.cx)(a.item,v&&a.itemWide)},E&&g.ogImage&&n.createElement("a",{tabIndex:-1,href:s.sQ.sanitizeUrl(g.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(a.socialImage,v&&a.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:g.ogImage,alt:g.title})),n.createElement("div",{className:a.body},n.createElement("time",{className:a.date,dateTime:(0,o.LE)(g.date,{format:"MMM DD"})},(0,o.LE)(g.date,{format:"MMM DD"})," "),n.createElement("a",{className:a.link,href:s.sQ.sanitizeUrl(g.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:a.title,id:b},g.title)),n.createElement("div",{className:a.content,dangerouslySetInnerHTML:{__html:s.sQ.sanitize(g.content)}})))}const c=({width:d,showImage:E,rootProps:h})=>{const y=(0,m.of)(f),a=d>600;return n.createElement("div",{className:(0,t.cx)(y.item,a&&y.itemWide),...h},E&&n.createElement(r.A,{containerClassName:(0,t.cx)(y.socialImage,a&&y.socialImageWide),width:a?"250px":"100%",height:a?"150px":d*.5}),n.createElement("div",{className:y.body},n.createElement(r.A,{containerClassName:y.date,width:60}),n.createElement(r.A,{containerClassName:y.title,width:250}),n.createElement(r.A,{containerClassName:y.content,width:"100%",count:6})))},u=(0,l.j)(i,c),f=d=>({container:(0,t.css)({height:"100%"}),item:(0,t.css)({display:"flex",padding:d.spacing(1),position:"relative",marginBottom:d.spacing(.5),marginRight:d.spacing(1),borderBottom:`2px solid ${d.colors.border.weak}`,background:d.colors.background.primary,flexDirection:"column",flexShrink:0}),itemWide:(0,t.css)({flexDirection:"row"}),body:(0,t.css)({display:"flex",flexDirection:"column",flex:1}),socialImage:(0,t.css)({display:"flex",alignItems:"center",marginBottom:d.spacing(1),"> img":{width:"100%",borderRadius:`${d.shape.radius.default} ${d.shape.radius.default} 0 0`}}),socialImageWide:(0,t.css)({marginRight:d.spacing(2),marginBottom:0,"> img":{width:"250px",borderRadius:d.shape.radius.default}}),link:(0,t.css)({color:d.colors.text.link,display:"inline-block","&:hover":{color:d.colors.text.link,textDecoration:"underline"}}),title:(0,t.css)({fontSize:"16px",marginBottom:d.spacing(.5)}),content:(0,t.css)({p:{marginBottom:d.spacing(.5),color:d.colors.text.primary}}),date:(0,t.css)({marginBottom:d.spacing(.5),fontWeight:500,borderRadius:`0 0 0 ${d.shape.radius.default}`,color:d.colors.text.secondary})})},62372:(Y,I,e)=>{"use strict";e.d(I,{$:()=>t});const t="https://grafana.com/blog/news.xml"},4172:(Y,I,e)=>{"use strict";e.d(I,{n:()=>d});var t=e(41053),n=e(78368);function r(E){const y=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(y.querySelectorAll("entry")).map(v=>({title:l(v,"title"),link:v.querySelector("link")?.getAttribute("href")??"",content:l(v,"content"),pubDate:l(v,"published"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(E){const y=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(y.querySelectorAll("item")).map(v=>({title:l(v,"title"),link:l(v,"link"),content:l(v,"description"),pubDate:l(v,"pubDate"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function o(E){return await(await fetch(E)).text()}function m(E){return new DOMParser().parseFromString(E,"text/xml").querySelector("feed")!==null}function l(E,h){return E.querySelector(h)?.textContent??""}async function i(E){const h=await o(E);return m(h)?r(h):s(h)}var c=e(47232),u=e(11261);function f(E){const h=[],y=[],a=[],v=[],g=[];for(const b of E.items){const P=(0,c.KQ)(b.pubDate);try{if(h.push(P.valueOf()),y.push(b.title),a.push(b.link),g.push(b.ogImage),b.content){const C=b.content.replace(/<\/?[^>]+(>|$)/g,"");v.push(C)}}catch(C){console.warn("Error reading news item:",C,b)}}return{fields:[{name:"date",type:u.PU.time,config:{displayName:"Date"},values:h},{name:"title",type:u.PU.string,config:{},values:y},{name:"link",type:u.PU.string,config:{},values:a},{name:"content",type:u.PU.string,config:{},values:v},{name:"ogImage",type:u.PU.string,config:{},values:g}],length:h.length}}function d(E){const[h,y]=(0,t.A)(async()=>{const a=await i(E),v=f(a);return new n.R(v)},[E],{loading:!0});return{state:h,getNews:y}}},23799:(Y,I,e)=>{"use strict";e.d(I,{L:()=>m,h:()=>l});var t=e(69550),n=e(75059),r=e(28240),s=e(54479),o=e(52622);function m(i,c=!0){const u=["Value options"];i.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:u,defaultValue:!1}),i.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:u,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:f=>f.reduceOptions.values===!0}),i.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:u,editor:t.D.get("stats-picker").editor,defaultValue:[n.gy.lastNotNull],showIf:f=>f.reduceOptions.values===!1}),c&&i.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:u,settings:{allowCustomValue:!0,options:[],getOptions:async f=>{const d=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(f&&f.data)for(const E of f.data)for(const h of E.fields){const y=(0,r.Ct)(h,E,f.data),a=`/^${(0,s.jD)(y)}$/`;d.push({value:a,label:y})}return Promise.resolve(d)}},defaultValue:""})}function l(i,c){i.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:c,settings:{options:[{value:o.wV.Auto,label:"Auto"},{value:o.wV.Horizontal,label:"Horizontal"},{value:o.wV.Vertical,label:"Vertical"}]},defaultValue:o.wV.Auto})}},36373:(Y,I,e)=>{"use strict";e.r(I),e.d(I,{plugin:()=>C});var t=e(65158),n=e(52622),r=e(71242),s=e(63250),o=e(24293);const m=(D,T,M)=>{const O=(0,s.gl)(D,T,M);if(M.angular&&(T==="singlestat"||T==="grafana-singlestat-panel")){const S=M.angular;if(O.graphMode=n.$p.None,S.sparkline&&S.sparkline.show&&(O.graphMode=n.$p.Area),S.colorBackground)O.colorMode=n.yp.Background;else if(S.colorValue)O.colorMode=n.yp.Value;else if(O.colorMode=n.yp.None,S.sparkline?.lineColor&&O.graphMode===n.$p.Area){const p=D.fieldConfig??{};p.defaults.color={mode:o.Y.Fixed,fixedColor:S.sparkline.lineColor},D.fieldConfig=p}S.valueName==="name"&&(O.textMode=n.SV.Name)}return O};var l=e(2543),i=e(96540),c=e(11261),u=e(56323),f=e(90708),d=e(37494),E=e(59796),h=e(12509),y=e(2913);class a extends i.PureComponent{constructor(){super(...arguments),this.renderComponent=(T,M)=>{const{timeRange:O,options:S}=this.props,{value:p,alignmentFactors:x,width:A,height:R,count:B}=T,{openMenu:U,targetClassName:F}=M;let K=p.sparkline;return K&&(K.timeRange=O),i.createElement(d.yV,{value:p.display,count:B,sparkline:K,colorMode:S.colorMode,graphMode:S.graphMode,justifyMode:S.justifyMode,textMode:this.getTextMode(),alignmentFactors:x,text:S.text,width:A,height:R,theme:y.config.theme2,onClick:U,className:F,disableWideLayout:!S.wideLayout})},this.renderValue=T=>{const{value:M}=T,{getLinks:O,hasLinks:S}=M;return S&&O?i.createElement(E.e,{links:O},p=>this.renderComponent(T,p)):this.renderComponent(T,{})},this.getValues=()=>{const{data:T,options:M,replaceVariables:O,fieldConfig:S,timeZone:p}=this.props;let x;for(let A of T.series)for(let R of A.fields){let{config:B}=R;if(R.type===c.PU.number){if(R.state?.range)continue;!x&&(!(0,l.isNumber)(B.min)||!(0,l.isNumber)(B.max))&&(x=(0,f.nJ)(T.series));const U=B.min??x.min,F=B.max??x.max;R.state=R.state??{},R.state.range={min:U,max:F,delta:F-U}}}return(0,u.PI)({fieldConfig:S,reduceOptions:M.reduceOptions,replaceVariables:O,theme:y.config.theme2,data:T.series,sparkline:M.graphMode!==n.$p.None,percentChange:M.showPercentChange,timeZone:p})}}getTextMode(){const{options:T,fieldConfig:M,title:O}=this.props;return T.textMode===n.SV.Auto&&(M.defaults.displayName||!O)?n.SV.ValueAndName:T.textMode}render(){const{height:T,options:M,width:O,data:S,renderCounter:p}=this.props;return i.createElement(h.S,{getValues:this.getValues,getAlignmentFactors:u.XS,renderValue:this.renderValue,width:O,height:T,source:S,itemSpacing:3,renderCounter:p,autoGrid:!0,orientation:M.orientation})}}var v=e(23799);const g={colorMode:n.yp.Value,graphMode:n.$p.Area,justifyMode:n.F8.Auto,showPercentChange:!1,textMode:n.SV.Auto,wideLayout:!0};var b=e(38824);class P{getSuggestionsForData(T){const{dataSummary:M}=T;if(!M.hasData)return;const O=T.getListAppender({name:b.m.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:S=>{S.options.reduceOptions.values&&(S.options.reduceOptions.limit=1)}}});M.hasStringField&&M.hasNumberField&&M.frameCount===1&&M.rowCountTotal<10&&(O.append({name:b.m.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),O.append({name:b.m.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.yp.Background}})),M.stringFieldCount===1&&M.frameCount===1&&M.rowCountTotal<10&&M.fieldCount===1&&O.append({name:b.m.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.yp.None}}),M.hasNumberField&&M.hasTimeField&&(O.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),O.append({name:b.m.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.$p.None,colorMode:n.yp.Background}}))}}const C=new t.m(a).useFieldConfig().setPanelOptions(D=>{const T=["Stat styles"];(0,v.L)(D),(0,v.h)(D,T),r.I(D),D.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:T,settings:{options:[{value:n.SV.Auto,label:"Auto"},{value:n.SV.Value,label:"Value"},{value:n.SV.ValueAndName,label:"Value and name"},{value:n.SV.Name,label:"Name"},{value:n.SV.None,label:"None"}]},defaultValue:g.textMode}).addRadio({path:"wideLayout",name:"Wide layout",category:T,settings:{options:[{value:!0,label:"On"},{value:!1,label:"Off"}]},defaultValue:g.wideLayout,showIf:M=>M.textMode===n.SV.ValueAndName}),D.addSelect({path:"colorMode",name:"Color mode",defaultValue:n.yp.Value,category:T,settings:{options:[{value:n.yp.None,label:"None"},{value:n.yp.Value,label:"Value"},{value:n.yp.Background,label:"Background Gradient"},{value:n.yp.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:T,defaultValue:g.graphMode,settings:{options:[{value:n.$p.None,label:"None"},{value:n.$p.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:g.justifyMode,category:T,settings:{options:[{value:n.F8.Auto,label:"Auto"},{value:n.F8.Center,label:"Center"}]}}).addBooleanSwitch({path:"showPercentChange",name:"Show percent change",defaultValue:g.showPercentChange,category:T,showIf:M=>!M.reduceOptions.values})}).setNoPadding().setPanelChangeHandler(m).setSuggestionsSupplier(new P).setMigrationHandler(s._$)},21164:(Y,I,e)=>{"use strict";e.d(I,{u:()=>t});const t=(n,r)=>{const s=[],o=new Set;if((n.config.links?.length??0)>0&&n.getLinks!=null){const m=n.values[r],l=n.display?n.display(m):{text:`${m}`,numeric:+m};n.getLinks({calculatedValue:l,valueRowIndex:r}).forEach(i=>{const c=`${i.title}/${i.href}`;o.has(c)||(s.push(i),o.add(c))})}return s}},65885:(Y,I,e)=>{"use strict";e.d(I,{S5:()=>a,fq:()=>m,gy:()=>v,l1:()=>h});var t=e(2543),n=e.n(t),r=e(1173),s=e(50082),o=e(11261);const m=g=>(!g.pluginVersion&&"columns"in g&&console.log("Was angular table",g),g.options),l={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},i={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},c={cell:"color-background",row:"color-background",value:"color-text"},u=(g,b)=>[-1/0,...g].map((P,C)=>({color:b[C],value:(0,t.isNumber)(P)?P:parseInt(P,10)})),f=(g,b)=>{const P=g.transformations??[];if(Object.keys(l).includes(b.transform)){const C={reducers:[]};b.transform==="timeseries_aggregations"&&(C.includeTimeField=!1,C.reducers=b.columns.map(D=>i[D.value])),P.push({id:l[b.transform],options:C})}return P},d=g=>{const P={matcher:{id:/^\/.*\/$/.test(g.pattern)?r.Ct.byRegexp:r.Ct.byName,options:g.pattern},properties:[]};return g.alias&&P.properties.push({id:"displayName",value:g.alias}),g.unit&&P.properties.push({id:"unit",value:g.unit}),g.decimals&&P.properties.push({id:"decimals",value:g.decimals}),g.type==="date"&&P.properties.push({id:"unit",value:`time: ${g.dateFormat}`}),g.type==="hidden"&&P.properties.push({id:"custom.hidden",value:!0}),g.link&&P.properties.push({id:"links",value:[{title:(0,t.defaultTo)(g.linkTooltip,""),url:(0,t.defaultTo)(g.linkUrl,""),targetBlank:(0,t.defaultTo)(g.linkTargetBlank,!1)}]}),g.colorMode&&P.properties.push({id:"custom.cellOptions",value:{type:c[g.colorMode]}}),g.align&&P.properties.push({id:"custom.align",value:g.align==="auto"?null:g.align}),g.thresholds?.length&&P.properties.push({id:"thresholds",value:{mode:s.O.Absolute,steps:u(g.thresholds,g.colors)}}),P},E=g=>{let b={custom:{}};if(g){if(b=(0,t.omitBy)({unit:g.unit,decimals:g.decimals,displayName:g.alias,custom:{align:g.align==="auto"?null:g.align}},t.isNil),g.thresholds.length){const P={mode:s.O.Absolute,steps:u(g.thresholds,g.colors)};b.thresholds=P}g.colorMode&&(b.custom.cellOptions={type:c[g.colorMode]})}return b},h=(g,b,P)=>{if(b==="table-old"&&P.angular){const C=P.angular,D=f(g,C),T=C.styles.find(S=>S.pattern==="/.*/"),M=E(T),O=C.styles.filter(S=>S.pattern!=="/.*/").map(d);g.transformations=D,g.fieldConfig={defaults:M,overrides:O}}return{}},y=g=>g?.filter(b=>b.meta?.custom?.parentRowIndex===void 0)||[g?.[0]],a=g=>{const b=[];return y(g).filter(C=>!!C&&C.length!==0)?.forEach(C=>{const D=g?.filter(S=>C.refId===S.refId&&S.meta?.custom?.parentRowIndex!==void 0),T=(0,t.groupBy)(D,S=>S.meta?.custom?.parentRowIndex),M=Object.keys(T).map(S=>T[S]),O={...C};D&&D.length>0&&O.fields.push({name:"nested",type:o.PU.nestedFrames,config:{},values:M}),b.push(O)}),b},v=g=>g?.some(b=>b.meta?.custom?.parentRowIndex!==void 0)},11082:(Y,I,e)=>{"use strict";e.d(I,{Z:()=>m});var t=e(96540),n=e(66864),r=e(94354),s=e(51275);const o=[{label:"Never",value:!1},{label:"Threshold",value:36e5}],m=({value:l,onChange:i,item:c})=>{const u=typeof l=="number";return o[1].value=u?l:36e5,t.createElement(n.Gy,null,t.createElement(r.z,{value:l,options:o,onChange:i}),u&&t.createElement(s.g,{value:l,onChange:i,inputPrefix:s.F.GreaterThan,isTime:c.settings?.isTime??!1}))}},43228:(Y,I,e)=>{"use strict";e.d(I,{F:()=>c});var t=e(96540),n=e(66864),r=e(94354),s=e(88323),o=e(29158);const m=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],l=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(f=>({label:f,value:f})),i=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(f=>({label:f,value:f})),c=({value:f,onChange:d})=>{const E=(0,t.useMemo)(()=>f?.fill==="dash"?l:i,[f]),h=(0,t.useMemo)(()=>{if(!f?.dash?.length)return E[0];const y=f.dash?.join(", "),a=E.find(v=>v.value===y);return a||{label:y,value:y}},[f,E]);return t.createElement(n.Gy,null,t.createElement(r.z,{value:f?.fill||"solid",options:m,onChange:y=>{let a;y==="dot"?a=u(i[0].value):y==="dash"&&(a=u(l[0].value)),d({...f,fill:y,dash:a})}}),f?.fill&&f?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.l6,{allowCustomValue:!0,options:E,value:h,width:20,onChange:y=>{d({...f,dash:u(y.value??"")})},formatCreateLabel:y=>`Segments: ${u(y).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(o.K,{name:"question-circle",tooltip:"Help"})))))};function u(f){const d=[];for(const E of f.split(/(?:,| )+/)){const h=Number.parseInt(E,10);isNaN(h)||d.push(h)}return d}},51275:(Y,I,e)=>{"use strict";e.d(I,{F:()=>s,g:()=>o});var t=e(96540),n=e(65879),r=e(10354),s=(m=>(m.LessThan="lessthan",m.GreaterThan="greaterthan",m))(s||{});const o=({value:m,onChange:l,inputPrefix:i,isTime:c})=>{let u=n.secondsToHms(m/1e3);c||(u="10");const f=y=>{let a=!1;if(y)try{c&&n.isValidTimeSpan(y)?a=n.intervalToMs(y):a=Number(y)}catch(v){console.warn("ERROR",v)}l(a)},d=y=>{y.key==="Enter"&&f(y.currentTarget.value)},E=y=>{f(y.currentTarget.value)},h=i==="greaterthan"?t.createElement("div",null,">"):i==="lessthan"?t.createElement("div",null,"<"):null;return t.createElement(r.p,{autoFocus:!1,placeholder:"never",width:10,defaultValue:u,onKeyDown:d,onBlur:E,prefix:h,spellCheck:!1})}},34163:(Y,I,e)=>{"use strict";e.d(I,{e:()=>m});var t=e(96540),n=e(66864),r=e(94354),s=e(51275);const o=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],m=({value:l,onChange:i,item:c})=>{const u=typeof l=="number";return o[2].value=u?l:36e5,t.createElement(n.Gy,null,t.createElement(r.z,{value:l,options:o,onChange:i}),u&&t.createElement(s.g,{value:l,onChange:i,inputPrefix:s.F.LessThan,isTime:c.settings?.isTime??!1}))}},24882:(Y,I,e)=>{"use strict";e.d(I,{D:()=>r});var t=e(96540),n=e(88323);const r=({item:s,value:o,onChange:m,id:l})=>{const i=(0,t.useCallback)(c=>{m({mode:c.value})},[m]);return t.createElement(n.l6,{inputId:l,value:o.mode,options:s.settings?.options??[],onChange:i})}},22731:(Y,I,e)=>{"use strict";e.d(I,{$:()=>E,k:()=>d});var t=e(32196),n=e(96540),r=e(11261),s=e(28240),o=e(52622),m=e(40845),l=e(11389),i=e(58749),c=e(52415),u=e(10875),f=e(21164);const d=({frames:h,seriesFrame:y,dataIdxs:a,seriesIdx:v,mode:g=o.$N.Single,sortOrder:b=o.xB.None,scrollable:P=!1,isPinned:C,annotate:D})=>{const T=(0,m.of)(E),M=y.fields[0],O=M.display(M.values[a[0]]).text,S=(0,u.cp)(y.fields,M,a,v,g,b,A=>A.type===r.PU.number||A.type===r.PU.enum);let p;if(C&&v!=null){const A=y.fields[v],R=a[v],B=(0,f.u)(A,R);p=n.createElement(i.S,{dataLinks:B,annotate:D})}const x={label:M.type===r.PU.time?"":(0,s.Ct)(M,y,h),value:O};return n.createElement("div",{className:T.wrapper},n.createElement(c.A,{item:x,isPinned:C}),n.createElement(l.o,{items:S,isPinned:C,scrollable:P}),p)},E=()=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column"})})},41706:(Y,I,e)=>{"use strict";e.d(I,{S:()=>h,V:()=>a});var t=e(37055),n=e(24293),r=e(11261),s=e(27310),o=e(52622),m=e(52198),l=e(56675),i=e(38248),c=e(11404),u=e(11082),f=e(43228),d=e(34163),E=e(24882);const h={drawStyle:o.GR.Line,lineInterpolation:o.dx.Linear,lineWidth:1,fillOpacity:0,gradientMode:o.on.None,barAlignment:o.Nj.Center,stacking:{mode:o.gs.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1,axisBorderShow:!1},y=["Graph styles"];function a(v,g=!0){return{standardOptions:{[t.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.Y.PaletteClassic}}},useCustomConfig:b=>{b.addRadio({path:"drawStyle",name:"Style",category:y,defaultValue:v.drawStyle,settings:{options:m.t.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:y,defaultValue:v.lineInterpolation,settings:{options:m.t.lineInterpolation},showIf:P=>P.drawStyle===o.GR.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:y,defaultValue:v.barAlignment,settings:{options:m.t.barAlignment},showIf:P=>P.drawStyle===o.GR.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:y,defaultValue:v.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:P=>P.drawStyle!==o.GR.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:y,defaultValue:v.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:P=>P.drawStyle!==o.GR.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:y,defaultValue:m.t.fillGradient[0].value,settings:{options:m.t.fillGradient},showIf:P=>P.drawStyle!==o.GR.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:y,hideFromDefaults:!0,settings:{filter:P=>P.type===r.PU.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:y,showIf:P=>P.drawStyle===o.GR.Line,editor:f.F,override:f.F,process:s.hS,shouldApply:P=>P.type===r.PU.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:y,defaultValue:!1,editor:d.e,override:d.e,showIf:P=>P.drawStyle===o.GR.Line,shouldApply:P=>P.type!==r.PU.time,process:s.hS,settings:{isTime:g}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",category:y,defaultValue:!1,editor:u.Z,override:u.Z,showIf:P=>P.drawStyle===o.GR.Line,shouldApply:P=>P.type!==r.PU.time,process:s.hS,settings:{isTime:g}}).addRadio({path:"showPoints",name:"Show points",category:y,defaultValue:m.t.showPoints[0].value,settings:{options:m.t.showPoints},showIf:P=>P.drawStyle!==o.GR.Points}).addSliderInput({path:"pointSize",name:"Point size",category:y,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:P=>P.showPoints!==o.yL.Never||P.drawStyle===o.GR.Points}),l.I(b,v.stacking,y),b.addSelect({category:y,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:o.NU.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:o.NU.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),i.r(b,v),c.e(b),b.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:o.Ly.Off},settings:{options:m.t.thresholdsDisplayModes},editor:E.D,override:E.D,process:s.hS,shouldApply:()=>!0})}}}},62567:(Y,I,e)=>{"use strict";e.d(I,{W:()=>le});var t=e(32196),n=e(96540),r=e(40961),s=e(84140),o=e(33948),m=e(52622),l=e(23596),i=e(24284),c=e(17464),u=e(40845),f=e(18491),d=e(36376),E=e(49785),h=e(29647),y=e(41053),a=e(72724),v=e(42994),g=e(79041),b=e(67061),P=e(88575),C=e(21744),D=e(55852),T=e(72235),M=e(99818),O=e(10154);const S=({annoVals:k,annoIdx:ee,dismiss:X,timeZone:j,...ne})=>{const te=(0,u.of)(p),{onAnnotationCreate:oe,onAnnotationUpdate:ie}=(0,g.d2)(),ue=(0,n.useRef)(null);(0,h.A)(ue,X);const[be,ge]=(0,y.A)(async pe=>{const Ne=await oe(pe);return X(),Ne}),[re,ye]=(0,y.A)(async pe=>{const Ne=await ie(pe);return X(),Ne}),Be=pe=>(0,a.LE)(pe,{format:v.WC.fullDate,timeZone:j}),ve=k.id?.[ee]!=null,Me=k.isRegion?.[ee],ke=ve?ye:ge,Se=ve?re:be,We=Me?`${Be(k.time[ee])} - ${Be(k.timeEnd[ee])}`:Be(k.time[ee]),De=({tags:pe,description:Ne})=>{ke({id:k.id?.[ee]??void 0,tags:pe,description:Ne,from:Math.round(k.time[ee]),to:Math.round(k.timeEnd?.[ee]??k.time[ee])})};return n.createElement("div",{ref:ue,className:te.editor,...ne},n.createElement("div",{className:te.header},n.createElement(b.B,{justifyContent:"space-between",alignItems:"center"},n.createElement("div",null,ve?"Edit annotation":"Add annotation"),n.createElement("div",null,We))),n.createElement(T.l,{onSubmit:De,defaultValues:{description:k.text?.[ee],tags:k.tags?.[ee]||[]}},({register:pe,errors:Ne,control:Le})=>n.createElement(n.Fragment,null,n.createElement("div",{className:te.content},n.createElement(P.D,{label:"Description",invalid:!!Ne.description,error:Ne?.description?.message},n.createElement(C.f,{className:te.textarea,...pe("description",{required:"Annotation description is required"})})),n.createElement(P.D,{label:"Tags"},n.createElement(E.xI,{control:Le,name:"tags",render:({field:{ref:He,onChange:je,...at}})=>n.createElement(M.$,{allowCustomValue:!0,placeholder:"Add tags",onChange:je,tagOptions:O.vy,tags:at.value})}))),n.createElement("div",{className:te.footer},n.createElement(b.B,{justifyContent:"flex-end"},n.createElement(D.$n,{size:"sm",variant:"secondary",onClick:X,fill:"outline"},"Cancel"),n.createElement(D.$n,{size:"sm",type:"submit",disabled:Se?.loading},Se?.loading?"Saving":"Save"))))))},p=k=>({editor:(0,t.css)({background:k.colors.background.primary,border:`1px solid ${k.colors.border.weak}`,borderRadius:k.shape.radius.default,boxShadow:k.shadows.z3,userSelect:"text",width:"460px"}),content:(0,t.css)({padding:k.spacing(1)}),header:(0,t.css)({borderBottom:`1px solid ${k.colors.border.weak}`,padding:k.spacing(.5,1),fontWeight:k.typography.fontWeightBold,fontSize:k.typography.fontSize,color:k.colors.text.primary}),footer:(0,t.css)({borderTop:`1px solid ${k.colors.border.weak}`,padding:k.spacing(1,1)}),textarea:(0,t.css)({color:k.colors.text.secondary,fontSize:k.typography.bodySmall.fontSize})});var x=e(40672),A=e(66864),R=e(29158),B=e(78369),U=e(55907);const F=()=>!1,K=({annoVals:k,annoIdx:ee,timeZone:X,onEdit:j})=>{const ne=k.id?.[ee],te=(0,u.of)(w),{canEditAnnotations:oe=F,canDeleteAnnotations:ie=F,onAnnotationDelete:ue}=(0,g.d2)(),be=k.dashboardUID?.[ee],ge=oe(be),re=ie(be)&&ue!=null,ye=We=>(0,a.LE)(We,{format:v.WC.fullDate,timeZone:X});let Be=ye(k.time[ee]),ve=k.text?.[ee]??"";k.isRegion?.[ee]&&(Be+=" - "+ye(k.timeEnd[ee]));let Me;k.login?.[ee]&&k.avatarUrl?.[ee]&&(Me=n.createElement("img",{className:te.avatar,alt:"Annotation avatar",src:k.avatarUrl[ee]}));let ke=null,Se="";if(k.alertId?.[ee]!==void 0&&k.newState?.[ee]){const We=U.A.getStateDisplayModel(k.newState[ee]);ke=n.createElement("div",{className:te.alertState},n.createElement("i",{className:We.stateClass},We.text)),Se=k.data?.[ee]?U.A.getAlertAnnotationText(k.data[ee]):""}else k.title?.[ee]&&(ve=k.title[ee]+(ve?`<br />${ve}`:""));return n.createElement("div",{className:te.wrapper},n.createElement("div",{className:te.header},n.createElement(A.Gy,{justify:"space-between",align:"center",spacing:"md"},n.createElement("div",{className:te.meta},n.createElement("span",null,Me,ke),Be),(ge||re)&&n.createElement("div",{className:te.editControls},ge&&n.createElement(R.K,{name:"pen",size:"sm",onClick:j,tooltip:"Edit"}),re&&n.createElement(R.K,{name:"trash-alt",size:"sm",onClick:()=>ue(ne),tooltip:"Delete"})))),n.createElement("div",{className:te.body},ve&&n.createElement("div",{className:te.text,dangerouslySetInnerHTML:{__html:x.sQ.sanitize(ve)}}),Se,n.createElement("div",null,n.createElement(A.Gy,{spacing:"xs",wrap:!0},k.tags?.[ee]?.map((We,De)=>n.createElement(B.v,{name:We,key:`${We}-${De}`}))))))},w=k=>({wrapper:(0,t.css)({zIndex:k.zIndex.tooltip,whiteSpace:"initial",borderRadius:k.shape.radius.default,background:k.colors.background.primary,border:`1px solid ${k.colors.border.weak}`,boxShadow:k.shadows.z2,userSelect:"text"}),header:(0,t.css)({padding:k.spacing(.5,1),borderBottom:`1px solid ${k.colors.border.weak}`,fontWeight:k.typography.fontWeightBold,fontSize:k.typography.fontSize,color:k.colors.text.primary,display:"flex"}),meta:(0,t.css)({display:"flex",justifyContent:"space-between",color:k.colors.text.primary,fontWeight:400}),editControls:(0,t.css)({display:"flex",alignItems:"center","> :last-child":{marginLeft:0}}),body:(0,t.css)({padding:k.spacing(1),fontSize:k.typography.bodySmall.fontSize,color:k.colors.text.secondary,fontWeight:400,a:{color:k.colors.text.link,"&:hover":{textDecoration:"underline"}}}),text:(0,t.css)({paddingBottom:k.spacing(1)}),avatar:(0,t.css)({borderRadius:k.shape.radius.circle,width:16,height:16,marginRight:k.spacing(1)}),alertState:(0,t.css)({paddingRight:k.spacing(1),fontWeight:k.typography.fontWeightMedium})}),L=0,V=1,N=2,z=({annoVals:k,annoIdx:ee,className:X,style:j,exitWipEdit:ne,timeZone:te,portalRoot:oe})=>{const ie=(0,u.of)(J),[ue,be]=(0,n.useState)(ne!=null?V:L),{refs:ge,floatingStyles:re}=(0,d.we)({open:!0,placement:"bottom",middleware:[(0,f.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,f.BN)()],whileElementsMounted:f.ll,strategy:"fixed"}),ye=ue===N?n.createElement(K,{annoIdx:ee,annoVals:k,timeZone:te,onEdit:()=>be(V)}):ue===V?n.createElement(S,{annoIdx:ee,annoVals:k,timeZone:te,dismiss:()=>{ne?.(),be(L)}}):null;return n.createElement("div",{ref:ge.setReference,className:X,style:j,onMouseEnter:()=>ue!==V&&be(N),onMouseLeave:()=>ue!==V&&be(L)},ye&&(0,r.createPortal)(n.createElement("div",{ref:ge.setFloating,className:ie.annoBox,style:re},ye),oe))},J=k=>({annoBox:(0,t.css)({top:0,left:0,zIndex:k.zIndex.tooltip,borderRadius:k.shape.radius.default,position:"absolute",background:k.colors.background.primary,border:`1px solid ${k.colors.border.weak}`,boxShadow:k.shadows.z2,userSelect:"text",minWidth:"300px"})}),G=(k,ee,X,j,ne)=>{k.beginPath(),k.moveTo(j,ee),k.lineTo(j,X),k.strokeStyle=ne,k.stroke()},H=(0,s.A)(i.Mk).toHex8String();function q(k){let ee={};return k.fields.forEach(X=>{ee[X.name]=X.values}),ee}const le=({annotations:k,timeZone:ee,config:X,newRange:j,setNewRange:ne,canvasRegionRendering:te=!0})=>{const[oe,ie]=(0,n.useState)(),[ue]=(0,n.useState)(()=>(0,c.gF)()),be=(0,u.of)(me),ge=(0,u.$j)().visualization.getColorByName,[re,ye]=(0,n.useReducer)(We=>We+1,0),Be=(0,n.useMemo)(()=>{let We=k.filter(De=>De.name!=="exemplar"&&De.length>0&&De.fields.some(pe=>pe.name==="time"));if(j){let De=j.to>j.from;const pe=(0,o.I)([{time:j.from,timeEnd:De?j.to:null,isRegion:De,color:H}]);pe.meta={dataTopic:m.QR.Annotations,custom:{isWip:!0}},We.push(pe)}return We},[k,j]),ve=(0,n.useCallback)(()=>{ne(null)},[ne]),Me=(0,n.useRef)(Be);Me.current=Be;const ke=(0,n.useRef)(j);ke.current=j;const Se=(0,n.useRef)();if((0,n.useLayoutEffect)(()=>{X.addHook("ready",We=>{let De=We.root.querySelector(".u-axis");Se.current=De,ie(We)}),X.addHook("draw",We=>{let De=Me.current;const pe=We.ctx;let Ne=We.bbox.top,Le=Ne+We.bbox.height;pe.save(),pe.beginPath(),pe.rect(We.bbox.left,We.bbox.top,We.bbox.width,We.bbox.height),pe.clip(),pe.lineWidth=2,pe.setLineDash([5,5]),De.forEach(He=>{let je=q(He);for(let at=0;at<je.time.length;at++){let Ye=ge(je.color?.[at]||H),$e=We.valToPos(je.time[at],"x",!0);if(!je.isRegion?.[at])G(pe,Ne,Le,$e,Ye);else if(te){G(pe,Ne,Le,$e,Ye);let xe=We.valToPos(je.timeEnd[at],"x",!0);G(pe,Ne,Le,xe,Ye),pe.fillStyle=l.alpha(Ye,.1),pe.fillRect($e,Ne,xe-$e,We.bbox.height)}}}),pe.restore()})},[X,te,ge]),(0,n.useEffect)(()=>{oe&&(oe.redraw(),setTimeout(()=>{ye()},0))},[Be,oe]),oe){let We=Be.flatMap((De,pe)=>{let Ne=q(De),Le=[];for(let He=0;He<Ne.time.length;He++){let je=ge(Ne.color?.[He]||i.Mk),at=oe.valToPos(Ne.time[He],"x"),Ye=null,$e="",xe=!0;if(Ne.isRegion?.[He]){let Fe=oe.valToPos(Ne.timeEnd?.[He],"x");if(xe=at<oe.rect.width&&Fe>0,xe){let Ee=Math.max(0,at),se=Math.min(oe.rect.width,Fe);Ye={left:Ee,background:je,width:se-Ee},$e=be.annoRegion}}else xe=at>0&&at<=oe.rect.width,xe&&(Ye={left:at,borderBottomColor:je},$e=be.annoMarker);if(xe){let Fe=De.meta?.custom?.isWip;Le.push(n.createElement(z,{annoIdx:He,annoVals:Ne,className:$e,style:Ye,timeZone:ee,key:`${pe}:${He}`,exitWipEdit:Fe?ve:null,portalRoot:ue}))}}return Le});return(0,r.createPortal)(We,Se.current)}return null},me=()=>({annoMarker:(0,t.css)({position:"absolute",width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottomWidth:"5px",borderBottomStyle:"solid",transform:"translateX(-50%)",cursor:"pointer",zIndex:1}),annoRegion:(0,t.css)({position:"absolute",height:"5px",cursor:"pointer",zIndex:1})})},99140:(Y,I,e)=>{"use strict";e.d(I,{Gu:()=>s,JD:()=>o,M_:()=>n,k3:()=>r});var t=e(48594);let n;function r(m){n=m}function s(){return!n||!n.getState?{templating:{...t.L1,lastKey:"key"}}:n.getState()}function o(m){if(!(!n||!n.getState))return n.dispatch(m)}},24897:(Y,I,e)=>{"use strict";e.d(I,{RG:()=>r,Vz:()=>s,XT:()=>t.X,Xe:()=>n});var t=e(62625),n=(o=>(o[o.Admin=4]="Admin",o[o.Editor=2]="Editor",o[o.Member=0]="Member",o[o.Viewer=1]="Viewer",o))(n||{}),r=(o=>(o.View="View",o.Edit="Edit",o.Admin="Admin",o))(r||{}),s=(o=>(o.Folder="dash-folder",o.Dashboard="dash-db",o.AlertFolder="dash-folder-alerting",o))(s||{})},50271:()=>{"use strict"},18625:()=>{"use strict"},14276:()=>{"use strict"},95425:(Y,I,e)=>{"use strict";e.d(I,{Z4:()=>t,_g:()=>n,d9:()=>r});var t=(s=>(s.Home="home-dashboard",s.New="new-dashboard",s.Normal="normal-dashboard",s.Path="path-dashboard",s.Scripted="scripted-dashboard",s.Public="public-dashboard",s.Embedded="embedded-dashboard",s.Report="report-dashboard",s))(t||{}),n=(s=>(s.NotStarted="Not started",s.Fetching="Fetching",s.Services="Services",s.Failed="Failed",s.Completed="Completed",s))(n||{}),r=(s=>(s.TV="tv",s.Full="full",s))(r||{})},62543:()=>{"use strict"},28444:(Y,I,e)=>{"use strict";e.d(I,{Bt:()=>g,Cf:()=>d,Eu:()=>S,Io:()=>v,JI:()=>c,PR:()=>u,Ps:()=>D,Q$:()=>f,Rh:()=>P,S8:()=>M,U0:()=>y,VZ:()=>b,Vz:()=>C,XM:()=>h,Yn:()=>m,aP:()=>O,bG:()=>o,bY:()=>T,i0:()=>R,sL:()=>A,u4:()=>l,vk:()=>E,xL:()=>a,xc:()=>p,yj:()=>x,zq:()=>i});var t=e(89550),n=e(65463);const r=(0,t.R)("ds-request-response"),s=(0,t.R)("ds-request-error"),o=(0,t.R)("template-variable-value-updated"),m=(0,t.R)("graph-click"),l=(0,t.R)("threshold-changed");class i extends n.a{static{this.type="panel-queries-changed"}}class c extends n.a{static{this.type="panel-transformations-changed"}}class u extends n.a{static{this.type="panels-options-changed"}}class f extends n.a{static{this.type="dashboard-panels-changed"}}class d extends n.a{static{this.type="dashboard-meta-changed"}}class E extends n.a{static{this.type="panel-directive-ready"}}class h extends n.a{static{this.type="render"}}class y extends n.x{static{this.type="zoom-out"}}var a=(B=>(B[B.Left=-1]="Left",B[B.Right=1]="Right",B))(a||{});class v extends n.x{static{this.type="shift-time"}}class g extends n.a{static{this.type="copy-time"}}class b extends n.x{static{this.type="paste-time"}}class P extends n.x{static{this.type="absolute-time"}}class C extends n.x{static{this.type="remove-panel"}}class D extends n.x{static{this.type="show-modal"}}class T extends n.x{static{this.type="show-confirm-modal"}}class M extends n.x{static{this.type="show-react-modal"}}class O extends n.a{static{this.type="hide-modal"}}class S extends n.a{static{this.type="dashboard-saved"}}class p extends n.x{static{this.type="annotation-query-started"}}class x extends n.x{static{this.type="annotation-query-finished"}}class A extends n.x{static{this.type="panel-edit-started"}}class R extends n.x{static{this.type="panel-edit-finished"}}},76698:(Y,I,e)=>{"use strict";e.d(I,{IW:()=>t,aA:()=>r,jH:()=>s,sG:()=>n});var t=(o=>(o[o.CLOSE_PANE=0]="CLOSE_PANE",o[o.CHANGE_DATASOURCE=1]="CHANGE_DATASOURCE",o[o.CLOSE_EDITOR=2]="CLOSE_EDITOR",o))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var r=(o=>(o.table="table",o.raw="raw",o))(r||{});const s=["table","raw"]},8904:()=>{"use strict"},31678:(Y,I,e)=>{"use strict";e.d(I,{AccessControlAction:()=>P,AppNotificationSeverity:()=>d,CORRELATION_EDITOR_POST_CONFIRM_ACTION:()=>y.IW,CoreEvents:()=>C,DashboardInitPhase:()=>s._g,DashboardRoutes:()=>s.Z4,EXPLORE_GRAPH_STYLES:()=>y.sG,KioskMode:()=>s.d9,OrgRole:()=>o.XT,PermissionLevelString:()=>o.RG,SearchQueryType:()=>o.Vz,ServiceAccountStateFilter:()=>i,TABLE_RESULTS_STYLE:()=>y.aA,TeamPermissionLevel:()=>o.Xe,addListener:()=>a.ch,createAsyncThunk:()=>a.zD,timeoutMap:()=>h,useDispatch:()=>a.wA,useSelector:()=>a.d4});var t=e(50271),n=e(54034),r=e(8904),s=e(95425),o=e(24897),m=e(18625),l=e(64998),i=(D=>(D.All="All",D.WithExpiredTokens="WithExpiredTokens",D.External="External",D.Disabled="Disabled",D))(i||{}),c=e(62543),u=e(77237),f=e(75330),d=(D=>(D.Success="success",D.Warning="warning",D.Error="error",D.Info="info",D))(d||{}),E=(D=>(D[D.Success=3e3]="Success",D[D.Warning=5e3]="Warning",D[D.Error=7e3]="Error",D))(E||{});const h={success:3e3,warning:5e3,error:7e3,info:3e3};var y=e(76698),a=e(64756),v=e(13868),g=e(14276),b=e(90697),P=(D=>(D.UsersRead="users:read",D.UsersWrite="users:write",D.UsersAuthTokenList="users.authtoken:read",D.UsersAuthTokenUpdate="users.authtoken:write",D.UsersPasswordUpdate="users.password:write",D.UsersDelete="users:delete",D.UsersCreate="users:create",D.UsersEnable="users:enable",D.UsersDisable="users:disable",D.UsersPermissionsUpdate="users.permissions:write",D.UsersLogout="users:logout",D.UsersQuotasList="users.quotas:read",D.UsersQuotasUpdate="users.quotas:write",D.ServiceAccountsRead="serviceaccounts:read",D.ServiceAccountsCreate="serviceaccounts:create",D.ServiceAccountsWrite="serviceaccounts:write",D.ServiceAccountsDelete="serviceaccounts:delete",D.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",D.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",D.OrgsRead="orgs:read",D.OrgsPreferencesRead="orgs.preferences:read",D.OrgsWrite="orgs:write",D.OrgsPreferencesWrite="orgs.preferences:write",D.OrgsCreate="orgs:create",D.OrgsDelete="orgs:delete",D.OrgUsersRead="org.users:read",D.OrgUsersAdd="org.users:add",D.OrgUsersRemove="org.users:remove",D.OrgUsersWrite="org.users:write",D.LDAPUsersRead="ldap.user:read",D.LDAPUsersSync="ldap.user:sync",D.LDAPStatusRead="ldap.status:read",D.DataSourcesExplore="datasources:explore",D.DataSourcesRead="datasources:read",D.DataSourcesCreate="datasources:create",D.DataSourcesWrite="datasources:write",D.DataSourcesDelete="datasources:delete",D.DataSourcesPermissionsRead="datasources.permissions:read",D.DataSourcesCachingRead="datasources.caching:read",D.DataSourcesInsightsRead="datasources.insights:read",D.ActionServerStatsRead="server.stats:read",D.ActionTeamsCreate="teams:create",D.ActionTeamsDelete="teams:delete",D.ActionTeamsRead="teams:read",D.ActionTeamsWrite="teams:write",D.ActionTeamsPermissionsRead="teams.permissions:read",D.ActionTeamsPermissionsWrite="teams.permissions:write",D.ActionRolesList="roles:read",D.ActionTeamsRolesList="teams.roles:read",D.ActionTeamsRolesAdd="teams.roles:add",D.ActionTeamsRolesRemove="teams.roles:remove",D.ActionUserRolesList="users.roles:read",D.ActionUserRolesAdd="users.roles:add",D.ActionUserRolesRemove="users.roles:remove",D.DashboardsRead="dashboards:read",D.DashboardsWrite="dashboards:write",D.DashboardsDelete="dashboards:delete",D.DashboardsCreate="dashboards:create",D.DashboardsPermissionsRead="dashboards.permissions:read",D.DashboardsPermissionsWrite="dashboards.permissions:write",D.DashboardsPublicWrite="dashboards.public:write",D.FoldersRead="folders:read",D.FoldersWrite="folders:write",D.FoldersDelete="folders:delete",D.FoldersCreate="folders:create",D.FoldersPermissionsRead="folders.permissions:read",D.FoldersPermissionsWrite="folders.permissions:write",D.ActionSupportBundlesCreate="support.bundles:create",D.ActionSupportBundlesRead="support.bundles:read",D.ActionSupportBundlesDelete="support.bundles:delete",D.AlertingRuleCreate="alert.rules:create",D.AlertingRuleRead="alert.rules:read",D.AlertingRuleUpdate="alert.rules:write",D.AlertingRuleDelete="alert.rules:delete",D.AlertingInstanceCreate="alert.instances:create",D.AlertingInstanceUpdate="alert.instances:write",D.AlertingInstanceRead="alert.instances:read",D.AlertingNotificationsRead="alert.notifications:read",D.AlertingNotificationsWrite="alert.notifications:write",D.AlertingRuleExternalWrite="alert.rules.external:write",D.AlertingRuleExternalRead="alert.rules.external:read",D.AlertingInstancesExternalWrite="alert.instances.external:write",D.AlertingInstancesExternalRead="alert.instances.external:read",D.AlertingNotificationsExternalWrite="alert.notifications.external:write",D.AlertingNotificationsExternalRead="alert.notifications.external:read",D.AlertingProvisioningReadSecrets="alert.provisioning.secrets:read",D.AlertingProvisioningRead="alert.provisioning:read",D.AlertingProvisioningWrite="alert.provisioning:write",D.ActionAPIKeysRead="apikeys:read",D.ActionAPIKeysCreate="apikeys:create",D.ActionAPIKeysDelete="apikeys:delete",D.PluginsInstall="plugins:install",D.PluginsWrite="plugins:write",D.SettingsRead="settings:read",D.SettingsWrite="settings:write",D))(P||{}),C=e(28444)},13868:()=>{"use strict"},54034:()=>{"use strict"},75330:()=>{"use strict"},77237:()=>{"use strict"},90697:()=>{"use strict"},64756:(Y,I,e)=>{"use strict";e.d(I,{ch:()=>m,d4:()=>s,wA:()=>r,zD:()=>o});var t=e(30038),n=e(63329);const r=n.useDispatch,s=n.useSelector,o=(l,i,c)=>(0,t.zD)(l,i,c),m=t.ch},38824:(Y,I,e)=>{"use strict";e.d(I,{m:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n.FlameGraph="Flame graph",n.Trace="Trace",n.NodeGraph="Node graph",n))(t||{})},94822:(Y,I,e)=>{"use strict";e.d(I,{Gi:()=>n,JS:()=>l,N1:()=>i,Q8:()=>c,Si:()=>r,cF:()=>t,lh:()=>m,s1:()=>s});var t=(u=>(u.Firing="firing",u.Inactive="inactive",u.Pending="pending",u))(t||{}),n=(u=>(u.Normal="Normal",u.Alerting="Alerting",u.Pending="Pending",u.NoData="NoData",u.Error="Error",u))(n||{});function r(u){return Object.values(t).includes(u)}function s(u){return Object.values(n).some(f=>f===u)}function o(u){const f=Object.values(t);return u!=null&&!f.includes(u)}function m(u){return o(u)?u.split(" ")[0]:u}var l=(u=>(u.Alerting="alerting",u.Recording="recording",u))(l||{}),i=(u=>(u.Cortex="Cortex",u.Mimir="Mimir",u.Prometheus="Prometheus",u.Thanos="Thanos",u))(i||{}),c=(u=>(u.Alerting="Alerting",u.NoData="NoData",u.KeepLast="KeepLast",u.OK="OK",u.Error="Error",u))(c||{})},54317:(Y,I,e)=>{"use strict";e.d(I,{$:()=>s,S:()=>n});var t=e(94822);function n(o,m){return(0,t.lh)(o.state)===m}var r=(o=>(o.Firing="firing",o))(r||{}),s=(o=>(o.Alerting="alerting",o.Pending="pending",o.Normal="inactive",o.NoData="nodata",o.Error="error",o))(s||{})},64998:()=>{"use strict"},72834:Y=>{const I="    ";function e(s){let o="";return s&&Object.keys(s).forEach(function(m){o+=m+":"+s[m]+";"}),o}function t(s){function o(l){return'class="'+l+'"'}function m(l){return'style="'+e(s["."+l])+'"'}return s?m:o}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function r(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Y.exports=function(s,o){let m="";const l=t(o);let i=function(u,f,d,E){if(!u.length)return f+" "+d;let h=f+`
`;return m+=I,u.forEach(function(y,a){h+=m+E(y)+(a<u.length-1?",":"")+`
`}),m=m.slice(0,-I.length),h+m+d};function c(u){if(u===void 0)return"";switch(n(u)){case"boolean":return"<span "+l("json-markup-bool")+">"+u+"</span>";case"number":return"<span "+l("json-markup-number")+">"+u+"</span>";case"date":return'<span class="json-markup-string">"'+r(u.toISOString())+'"</span>';case"null":return"<span "+l("json-markup-null")+">null</span>";case"string":return"<span "+l("json-markup-string")+'>"'+r(u.replace(/\n/g,`
`+m))+'"</span>';case"link":return"<span "+l("json-markup-string")+'>"<a href="'+encodeURI(u)+'">'+r(u)+'</a>"</span>';case"array":return i(u,"[","]",c);case"object":const f=Object.keys(u).filter(function(d){return u[d]!==void 0});return i(f,"{","}",function(d){return"<span "+l("json-markup-key")+'>"'+r(d)+'":</span> '+c(u[d])})}return""}return"<div "+l("json-markup")+">"+c(s)+"</div>"}},13609:()=>{(function(Y){"use strict";Y(function(){Y.support.transition=function(){var I=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==void 0)return t[n]}();return I&&{end:I}}()})})(window.jQuery),function(Y){"use strict";var I="[data-toggle=dropdown]",e=function(s){var o=Y(s).on("click.dropdown.data-api",this.toggle);Y("html").on("click.dropdown.data-api",function(){o.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(s){var o=Y(this),m,l;if(!o.is(".disabled, :disabled"))return m=n(o),l=m.hasClass("open"),t(),l||("ontouchstart"in document.documentElement&&Y('<div class="dropdown-backdrop"/>').insertBefore(Y(this)).on("click",t),m.toggleClass("open")),o.focus(),!1},keydown:function(s){var o,m,l,i,c,u;if(/(38|40|27)/.test(s.keyCode)&&(o=Y(this),s.preventDefault(),s.stopPropagation(),!o.is(".disabled, :disabled"))){if(i=n(o),c=i.hasClass("open"),!c||c&&s.keyCode==27)return s.which==27&&i.find(I).focus(),o.click();m=Y("[role=menu] li:not(.divider):visible a",i),m.length&&(u=m.index(m.filter(":focus")),s.keyCode==38&&u>0&&u--,s.keyCode==40&&u<m.length-1&&u++,~u||(u=0),m.eq(u).focus())}}};function t(){Y(".dropdown-backdrop").remove(),Y(I).each(function(){n(Y(this)).removeClass("open")})}function n(s){var o=s.attr("data-target"),m;return o||(o=s.attr("href"),o=o&&/#[A-Za-z]/.test(o)&&o.replace(/.*(?=#[^\s]*$)/,"")),m=o&&Y.find(o),(!m||!m.length)&&(m=s.parent()),m}var r=Y.fn.dropdown;Y.fn.dropdown=function(s){return this.each(function(){var o=Y(this),m=o.data("dropdown");m||o.data("dropdown",m=new e(this)),typeof s=="string"&&m[s].call(o)})},Y.fn.dropdown.Constructor=e,Y.fn.dropdown.noConflict=function(){return Y.fn.dropdown=r,this},Y(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(s){s.stopPropagation()}).on("click.dropdown.data-api",I,e.prototype.toggle).on("keydown.dropdown.data-api",I+", [role=menu]",e.prototype.keydown)}(window.jQuery),function(Y){"use strict";var I=function(t,n){this.options=n,this.$element=Y(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",Y.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};I.prototype={constructor:I,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=Y.Event("show");this.$element.trigger(n),!(this.isShown||n.isDefaultPrevented())&&(this.isShown=!0,this.escape(),this.backdrop(function(){var r=Y.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),r&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),r?t.$element.one(Y.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();var n=this;t=Y.Event("hide"),this.$element.trigger(t),!(!this.isShown||t.isDefaultPrevented())&&(this.isShown=!1,this.escape(),Y(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),Y.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;Y(document).on("focusin.modal",function(n){t.$element[0]!==n.target&&!t.$element.has(n.target).length&&t.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(n){n.which==27&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(Y.support.transition.end),t.hideModal()},500);this.$element.one(Y.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=Y.support.transition&&r;if(this.$backdrop=Y('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?Y.proxy(this.$element[0].focus,this.$element[0]):Y.proxy(this.hide,this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one(Y.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),Y.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(Y.support.transition.end,t):t()):t&&t()}};var e=Y.fn.modal;Y.fn.modal=function(t){return this.each(function(){var n=Y(this),r=n.data("modal"),s=Y.extend({},Y.fn.modal.defaults,n.data(),typeof t=="object"&&t);r||n.data("modal",r=new I(this,s)),typeof t=="string"?r[t]():s.show&&r.show()})},Y.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},Y.fn.modal.Constructor=I,Y.fn.modal.noConflict=function(){return Y.fn.modal=e,this},Y(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=Y(this),r=n.attr("href"),s=Y.find(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("modal")?"toggle":Y.extend({remote:!/#/.test(r)&&r},s.data(),n.data());t.preventDefault(),s.modal(o).one("hide",function(){n.focus()})})}(window.jQuery),function(Y){"use strict";var I=function(t,n){this.init("tooltip",t,n)};I.prototype={constructor:I,init:function(t,n,r){var s,o,m,l,i;for(this.type=t,this.$element=Y(n),this.options=this.getOptions(r),this.enabled=!0,m=this.options.trigger.split(" "),i=m.length;i--;)l=m[i],l=="click"?this.$element.on("click."+this.type,this.options.selector,Y.proxy(this.toggle,this)):l!="manual"&&(s=l=="hover"?"mouseenter":"focus",o=l=="hover"?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,Y.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,Y.proxy(this.leave,this)));this.options.selector?this._options=Y.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=Y.extend({},Y.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=Y.fn[this.type].defaults,r={},s;if(this._options&&Y.each(this._options,function(o,m){n[o]!=m&&(r[o]=m)},this),s=Y(t.currentTarget)[this.type](r).data(this.type),!s.options.delay||!s.options.delay.show)return s.show();clearTimeout(this.timeout),s.hoverState="in",this.timeout=setTimeout(function(){s.hoverState=="in"&&s.show()},s.options.delay.show)},leave:function(t){var n=Y(t.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,s,o,m,l=Y.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(l),l.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(Y.find(this.options.container)):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,s=t[0].offsetHeight,o){case"bottom":m={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":m={top:n.top-s,left:n.left+n.width/2-r/2};break;case"left":m={top:n.top+n.height/2-s/2,left:n.left-r};break;case"right":m={top:n.top+n.height/2-s/2,left:n.left+n.width};break;case"topLeft":m={top:n.top-s,left:n.left+n.width/2-r*.1};break;case"topRight":m={top:n.top-s,left:n.left+n.width/2-r*.9};break;case"rightTop":m={top:n.top+n.height/2-s*.1,left:n.left+n.width};break;case"rightBottom":m={top:n.top+n.height/2-s*.9,left:n.left+n.width};break;case"bottomLeft":m={top:n.top+n.height,left:n.left+n.width/2-r*.1};break;case"bottomRight":m={top:n.top+n.height,left:n.left+n.width/2-r*.9};break;case"leftTop":m={top:n.top+n.height/2-s*.1,left:n.left-r};break;case"leftBottom":m={top:n.top+n.height/2-s*.9,left:n.left-r};break}this.applyPlacement(m,o),this.$element.trigger("shown")}},applyPlacement:function(t,n){var r=this.tip(),s=r[0].offsetWidth,o=r[0].offsetHeight,m,l,i,c;r.offset(t).addClass(n).addClass("in"),m=r[0].offsetWidth,l=r[0].offsetHeight,n=="top"&&l!=o&&(t.top=t.top+o-l,c=!0),n=="bottom"||n=="top"?(i=0,t.left<0&&(i=t.left*-2,t.left=0,r.offset(t),m=r[0].offsetWidth,l=r[0].offsetHeight),this.replaceArrow(i-s+m,m,"left")):this.replaceArrow(l-o,l,"top"),c&&r.offset(t)},replaceArrow:function(t,n,r){this.arrow().css(r,t?50*(1-t/n)+"%":"")},setContent:function(){var t=this.tip(),n=this.getTitle();t.find(".tooltip-inner").text(n),t.removeClass("fade in top bottom left right")},hide:function(){var t=this,n=this.tip(),r=Y.Event("hide");if(this.$element.trigger(r),r.isDefaultPrevented())return;n.removeClass("in");function s(){var o=setTimeout(function(){n.off(Y.support.transition.end).detach()},500);n.one(Y.support.transition.end,function(){clearTimeout(o),n.detach()})}return Y.support.transition&&this.$tip.hasClass("fade")?s():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var t=this.$element;(t.attr("title")||typeof t.attr("data-original-title")!="string")&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return Y.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var t,n=this.$element,r=this.options;return t=n.attr("data-original-title")||(typeof r.title=="function"?r.title.call(n[0]):r.title),t},tip:function(){return this.$tip=this.$tip||Y(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?Y(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var e=Y.fn.tooltip;Y.fn.tooltip=function(t){return this.each(function(){var n=Y(this),r=n.data("tooltip"),s=typeof t=="object"&&t;r||n.data("tooltip",r=new I(this,s)),typeof t=="string"&&r[t]()})},Y.fn.tooltip.Constructor=I,Y.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Y.fn.tooltip.noConflict=function(){return Y.fn.tooltip=e,this}}(window.jQuery),function(Y){"use strict";var I=function(t){this.element=Y(t)};I.prototype={constructor:I,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),s,o,m;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")&&(s=n.find(".active:last a")[0],m=Y.Event("show",{relatedTarget:s}),t.trigger(m),!m.isDefaultPrevented()&&(o=Y.find(r),this.activate(t.parent("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown",relatedTarget:s})})))},activate:function(t,n,r){var s=n.find("> .active"),o=r&&Y.support.transition&&s.hasClass("fade");function m(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}o?s.one(Y.support.transition.end,m):m(),s.removeClass("in")}};var e=Y.fn.tab;Y.fn.tab=function(t){return this.each(function(){var n=Y(this),r=n.data("tab");r||n.data("tab",r=new I(this)),typeof t=="string"&&r[t]()})},Y.fn.tab.Constructor=I,Y.fn.tab.noConflict=function(){return Y.fn.tab=e,this},Y(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),Y(this).tab("show")})}(window.jQuery),function(Y){"use strict";var I=function(t,n){this.$element=Y(t),this.options=Y.extend({},Y.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=Y(this.options.menu),this.shown=!1,this.listen()};I.prototype={constructor:I,select:function(){var t=this.$menu.find(".active").attr("data-value")||this.$element.val();return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var t=Y.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=Y.isFunction(this.source)?this.source(this.query,Y.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=Y.grep(t,function(r){return n.matcher(r)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var n=[],r=[],s=[],o;o=t.shift();)o.toLowerCase().indexOf(this.query.toLowerCase())?~o.indexOf(this.query)?r.push(o):s.push(o):n.push(o);return n.concat(r,s)},highlighter:function(t){var n=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n?t.replace(new RegExp("("+n+")","ig"),function(r,s){return"<strong>"+s+"</strong>"}):t},render:function(t){var n=this;return t=Y(t).map(function(r,s){return r=Y(n.options.item).attr("data-value",s),r.find("a").html(n.highlighter(s)),r[0]}),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=Y(this.$menu.find("li")[0])),r.addClass("active")},prev:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.prev();r.length||(r=this.$menu.find("li").last()),r.addClass("active")},listen:function(){this.$element.on("focus",Y.proxy(this.focus,this)).on("blur",Y.proxy(this.blur,this)).on("keypress",Y.proxy(this.keypress,this)).on("keyup",Y.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",Y.proxy(this.keydown,this)),this.$menu.on("click",Y.proxy(this.click,this)).on("mouseenter","li",Y.proxy(this.mouseenter,this)).on("mouseleave","li",Y.proxy(this.mouseleave,this))},destroy:function(){this.$element.off().removeData("typeahead"),this.$menu.off()},eventSupported:function(t){var n=t in this.$element;return n||(this.$element.setAttribute(t,"return;"),n=typeof this.$element[t]=="function"),n},move:function(t){if(this.shown&&!(t.shiftKey&&t.keyCode===40)){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next();break}t.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~Y.inArray(t.keyCode,[40,38,9,13,27,57]),this.move(t)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.keyCode===13&&typeof this.$menu.find(".active").attr("data-value")>"u"?this.$element.submit():(t.stopPropagation(),t.preventDefault())},focus:function(t){this.focused=!0},blur:function(t){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),Y(t.currentTarget).addClass("active")},mouseleave:function(t){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var e=Y.fn.typeahead;Y.fn.typeahead=function(t){return this.each(function(){var n=Y(this),r=n.data("typeahead"),s=typeof t=="object"&&t;r||n.data("typeahead",r=new I(this,s)),typeof t=="string"&&r[t]()})},Y.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},Y.fn.typeahead.Constructor=I,Y.fn.typeahead.noConflict=function(){return Y.fn.typeahead=e,this},Y(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=Y(this);n.data("typeahead")||n.typeahead(n.data())})}(window.jQuery),function(Y){"use strict";var I=function(t,n){this.options=Y.extend({},Y.fn.affix.defaults,n),this.$window=Y(window).on("scroll.affix.data-api",Y.proxy(this.checkPosition,this)).on("click.affix.data-api",Y.proxy(function(){setTimeout(Y.proxy(this.checkPosition,this),1)},this)),this.$element=Y(t),this.checkPosition()};I.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=Y(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),s=this.options.offset,o=s.bottom,m=s.top,l="affix affix-top affix-bottom",i;typeof s!="object"&&(o=m=s),typeof m=="function"&&(m=s.top()),typeof o=="function"&&(o=s.bottom()),i=this.unpin!=null&&n+this.unpin<=r.top?!1:o!=null&&r.top+this.$element.height()>=t-o?"bottom":m!=null&&n<=m?"top":!1,this.affixed!==i&&(this.affixed=i,this.unpin=i=="bottom"?r.top-n:null,this.$element.removeClass(l).addClass("affix"+(i?"-"+i:"")))}};var e=Y.fn.affix;Y.fn.affix=function(t){return this.each(function(){var n=Y(this),r=n.data("affix"),s=typeof t=="object"&&t;r||n.data("affix",r=new I(this,s)),typeof t=="string"&&r[t]()})},Y.fn.affix.Constructor=I,Y.fn.affix.defaults={offset:0},Y.fn.affix.noConflict=function(){return Y.fn.affix=e,this},Y(window).on("load",function(){Y('[data-spy="affix"]').each(function(){var t=Y(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery)},82013:()=>{(function(Y){var I={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(m){if(!m)n.x=-1;else{var l=t.p2c(m);n.x=Math.max(0,Math.min(l.left,t.width())),n.y=Math.max(0,Math.min(l.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(m){m&&t.setCrosshair(m),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function r(o){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(o){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var m=t.offset();n.x=Math.max(0,Math.min(o.pageX-m.left,t.width())),n.y=Math.max(0,Math.min(o.pageY-m.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(o,m){o.getOptions().crosshair.mode&&(m.mouseout(r),m.mousemove(s))}),t.hooks.drawOverlay.push(function(o,m){var l=o.getOptions().crosshair;if(l.mode){var i=o.getPlotOffset();if(m.save(),m.translate(i.left,i.top),n.x!=-1){var c=o.getOptions().crosshair.lineWidth%2?.5:0;if(m.strokeStyle=l.color,m.lineWidth=l.lineWidth,m.lineJoin="round",m.beginPath(),l.mode.indexOf("x")!=-1){var u=Math.floor(n.x)+c;m.moveTo(u,0),m.lineTo(u,o.height())}if(l.mode.indexOf("y")!=-1){var f=Math.floor(n.y)+c;m.moveTo(0,f),m.lineTo(o.width(),f)}m.stroke()}m.restore()}}),t.hooks.shutdown.push(function(o,m){m.unbind("mouseout",r),m.unbind("mousemove",s)})}Y.plot.plugins.push({init:e,options:I,name:"crosshair",version:"1.0"})})(jQuery)},2341:()=>{(function(Y){function I(e){e.hooks.processDatapoints.push(function(t,n,r){n.dashes.show&&t.hooks.draw.push(function(s,o){var m=s.getPlotOffset(),l=n.xaxis,i=n.yaxis;function c(E,h){var y=r.points,a=r.pointsize,v=null,g=null,b=0,P=!0,C,D;n.dashes.dashLength[0]?(C=n.dashes.dashLength[0],n.dashes.dashLength[1]?D=n.dashes.dashLength[1]:D=C):D=C=n.dashes.dashLength,o.beginPath();for(var T=a;T<y.length;T+=a){let K=function(w){var L=Math.sqrt(Math.pow(R-x,2)+Math.pow(B-A,2));if(L<=w)return{deltaX:R-x,deltaY:B-A,distance:L,remainder:w-L};var V=R>x?1:-1,N=B>A?1:-1;return{deltaX:V*Math.sqrt(Math.pow(w,2)/(1+Math.pow((B-A)/(R-x),2))),deltaY:N*Math.sqrt(Math.pow(w,2)-Math.pow(w,2)/(1+Math.pow((B-A)/(R-x),2))),distance:w,remainder:0}};var F=K,M=y[T-a],O=y[T-a+1],S=y[T],p=y[T+1];if(!(M==null||S==null)){if(O<=p&&O<i.min){if(p<i.min)continue;M=(i.min-O)/(p-O)*(S-M)+M,O=i.min}else if(p<=O&&p<i.min){if(O<i.min)continue;S=(i.min-O)/(p-O)*(S-M)+M,p=i.min}if(O>=p&&O>i.max){if(p>i.max)continue;M=(i.max-O)/(p-O)*(S-M)+M,O=i.max}else if(p>=O&&p>i.max){if(O>i.max)continue;S=(i.max-O)/(p-O)*(S-M)+M,p=i.max}if(M<=S&&M<l.min){if(S<l.min)continue;O=(l.min-M)/(S-M)*(p-O)+O,M=l.min}else if(S<=M&&S<l.min){if(M<l.min)continue;p=(l.min-M)/(S-M)*(p-O)+O,S=l.min}if(M>=S&&M>l.max){if(S>l.max)continue;O=(l.max-M)/(S-M)*(p-O)+O,M=l.max}else if(S>=M&&S>l.max){if(M>l.max)continue;p=(l.max-M)/(S-M)*(p-O)+O,S=l.max}(M!=v||O!=g)&&o.moveTo(l.p2c(M)+E,i.p2c(O)+h);var x=l.p2c(M)+E,A=i.p2c(O)+h,R=l.p2c(S)+E,B=i.p2c(p)+h,U;do U=K(b>0?b:P?C:D),(U.deltaX!=0||U.deltaY!=0)&&(P?o.lineTo(x+U.deltaX,A+U.deltaY):o.moveTo(x+U.deltaX,A+U.deltaY)),P=!P,b=U.remainder,x+=U.deltaX,A+=U.deltaY;while(U.distance>0);v=S,g=p}}o.stroke()}o.save(),o.translate(m.left,m.top),o.lineJoin="round";var u=n.dashes.lineWidth,f=n.shadowSize;if(u>0&&f>0){o.lineWidth=f,o.strokeStyle="rgba(0,0,0,0.1)";var d=Math.PI/18;c(Math.sin(d)*(u/2+f/2),Math.cos(d)*(u/2+f/2)),o.lineWidth=f/2,c(Math.sin(d)*(u/2+f/4),Math.cos(d)*(u/2+f/4))}o.lineWidth=u,o.strokeStyle=n.color,u>0&&c(0,0),o.restore()})})}Y.plot.plugins.push({init:I,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},92275:()=>{(function(Y){"use strict";var I={series:{fillBelowTo:null}};function e(t){function n(o,m){var l;for(l=0;l<m.length;++l)if(m[l].id===o.fillBelowTo)return m[l];return null}function r(o,m,l,i,c,u,f,d){var E,h,y,a,v,g;return E=l-o,h=i-m,y=f-c,a=d-u,v=(-h*(o-c)+E*(m-u))/(-y*h+E*a),g=(y*(m-u)-a*(o-c))/(-y*h+E*a),v>=0&&v<=1&&g>=0&&g<=1?[o+g*E,m+g*h]:null}function s(o,m,l){if(l.fillBelowTo===null)return;var i,c,u,f,d,E,h;function y(D,T){m.beginPath(),m.moveTo(l.xaxis.p2c(D)+E.left,l.yaxis.p2c(T)+E.top)}function a(){m.closePath(),m.fill()}function v(){if(u.length/c!==d.length/f)return console.error("Refusing to graph inconsistent number of points"),!1;var D;for(D=0;D<u.length/c;D++)if(u[D*c]!==null&&d[D*f]!==null&&u[D*c]!==d[D*f])return console.error("Refusing to graph points without matching value"),!1;return!0}function g(D,T){console.assert(T>D,"expects the end index to be greater than the start index");var M=D===0||u[D-1]===null||d[D-1]===null,O=!1,S,p;for(S=D;S<T;S++)if(u[S*c+1]===null||d[S*c+1]===null)O=!1,M=!0;else if(u[S*c+1]===d[S*f+1])O=!0,M=!1;else if(u[S*c+1]>d[S*f+1]){M?y(u[S*c],u[S*c+1]):O?y(u[(S-1)*c],u[(S-1)*c+1]):(p=b(S),y(p[0],p[1])),C(S,T);return}else M=!1,O=!1}function b(D){console.assert(D>0,"expects the second point in the series line segment");var T,M;for(T=1;T<d.length/f;T++)if(M=r(u[(D-1)*c],u[(D-1)*c+1],u[D*c],u[D*c+1],d[(T-1)*f],d[(T-1)*f+1],d[T*f],d[T*f+1]),M!==null)return M;console.error("intersectionPoint() should only be called when an intersection happens")}function P(D,T){console.assert(D>=T,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M;for(M=D;M>=T;M--)m.lineTo(i.xaxis.p2c(d[M*f])+E.left,i.yaxis.p2c(d[M*f+1])+E.top);a()}function C(D,T){console.assert(D<=T,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M,O;for(M=D;M<T;M++)if(u[M*c+1]===null&&M>D){P(M-1,D),g(M,T);return}else if(u[M*c+1]===d[M*f+1]){P(M,D),g(M,T);return}else if(u[M*c+1]<d[M*f+1]){O=b(M),m.lineTo(l.xaxis.p2c(O[0])+E.left,l.yaxis.p2c(O[1])+E.top),P(M,D),g(M,T);return}else m.lineTo(l.xaxis.p2c(u[M*c])+E.left,l.yaxis.p2c(u[M*c+1])+E.top);P(T,D)}i=n(l,o.getData()),i&&(c=l.datapoints.pointsize,u=l.datapoints.points,f=i.datapoints.pointsize,d=i.datapoints.points,E=o.getPlotOffset(),v()&&(h=Y.color.parse(l.color),h.a=.4,h.normalize(),m.fillStyle=h.toString(),g(0,u.length/c)))}t.hooks.drawSeries.push(s)}Y.plot.plugins.push({init:e,options:I,name:"fillbelow",version:"0.1.0"})})(jQuery)},19538:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(Y){var I=function(){var l,i,c,u,f,d,E=function(D,T){l=T,i=D.getPlaceholder(),c=D.getOptions(),u=c.series.gauges,f=D.getData(),d=e(u.debug)};E.prototype.calculateLayout=function(){var D=i.width(),T=i.height(),M=Math.min(f.length,u.layout.columns),O=Math.ceil(f.length/M),S=u.layout.margin,p=u.layout.hMargin,x=u.layout.vMargin,A=(D-S*2-p*(M-1))/M,R=(T-S*2-x*(O-1))/O;if(u.layout.square){var B=Math.min(A,R);A=B,R=B}h(u,A);var U=u.cell.margin,F=0,K=0;u.label.show&&(F=u.label.margin,K=u.label.font.size);var w=0,L=0;u.value.show&&(w=u.value.margin,L=u.value.font.size);var V=0;u.threshold.show&&(V=u.threshold.width);var N=0,z=0;u.threshold.label.show&&(N=u.threshold.label.margin,z=u.threshold.label.font.size);for(var J=A/2-U-V-N*2-z,G=u.gauge.startAngle,H=u.gauge.endAngle,q=(H-G)/100,le=-1,me=G;me<H;me+=q)le=Math.max(le,Math.sin(r(me)));le=Math.max(le,Math.sin(r(H)));var k=(R-U*2-F*2-K)/(1+le);k*le<w+L/2&&(k=R-U*2-F*2-K-w-L/2);var ee=k-N*2-z-V,X=Math.min(J,ee),j=u.gauge.width;j>=X&&(j=Math.max(3,X/3));var ne=N*2+z+V+X,te=Math.max(ne*(1+le),ne+w+L/2);return{canvasWidth:D,canvasHeight:T,margin:S,hMargin:p,vMargin:x,columns:M,rows:O,cellWidth:A,cellHeight:R,cellMargin:U,labelMargin:F,labelFontSize:K,valueMargin:w,valueFontSize:L,width:j,radius:X,thresholdWidth:V,thresholdLabelMargin:N,thresholdLabelFontSize:z,gaugeOuterHeight:te}};function h(D,T){D.gauge.width==="auto"&&(D.gauge.width=Math.max(5,T/8)),D.label.margin==="auto"&&(D.label.margin=Math.max(1,T/20)),D.label.font.size==="auto"&&(D.label.font.size=Math.max(5,T/8)),D.value.margin==="auto"&&(D.value.margin=Math.max(1,T/30)),D.value.font.size==="auto"&&(D.value.font.size=Math.max(5,T/9)),D.threshold.width==="auto"&&(D.threshold.width=Math.max(3,T/100)),D.threshold.label.margin==="auto"&&(D.threshold.label.margin=Math.max(3,T/40)),D.threshold.label.font.size==="auto"&&(D.threshold.label.font.size=Math.max(5,T/15))}E.prototype.calculateAutoValues=h,E.prototype.calculateCellLayout=function(D,T,M){var O=t(T.columns,M),S=n(T.columns,M),p=T.margin+(T.cellWidth+T.hMargin)*O,x=T.margin+(T.cellHeight+T.vMargin)*S,A=p+T.cellWidth/2,R=x+T.cellMargin+T.labelMargin*2+T.labelFontSize+T.thresholdWidth+T.thresholdLabelFontSize+T.thresholdLabelMargin*2+T.radius,B=T.cellHeight-T.cellMargin*2-T.labelMargin*2-T.labelFontSize-T.gaugeOuterHeight,U=0;return D.cell.vAlign==="middle"?U=B/2:D.cell.vAlign==="bottom"&&(U=B),R+=U,{col:O,row:S,x:p,y:x,offsetY:U,cellWidth:T.cellWidth,cellHeight:T.cellHeight,cellMargin:T.cellMargin,cx:A,cy:R}},E.prototype.drawBackground=function(D){u.frame.show&&(l.save(),l.strokeStyle=c.grid.borderColor,l.lineWidth=c.grid.borderWidth,l.strokeRect(0,0,D.canvasWidth,D.canvasHeight),c.grid.backgroundColor&&(l.fillStyle=c.grid.backgroundColor,l.fillRect(0,0,D.canvasWidth,D.canvasHeight)),l.restore())},E.prototype.drawCellBackground=function(D,T){l.save(),D.cell.border&&D.cell.border.show&&D.cell.border.color&&D.cell.border.width&&(l.strokeStyle=D.cell.border.color,l.lineWidth=D.cell.border.width,l.strokeRect(T.x,T.y,T.cellWidth,T.cellHeight)),D.cell.background&&D.cell.background.color&&(l.fillStyle=D.cell.background.color,l.fillRect(T.x,T.y,T.cellWidth,T.cellHeight)),l.restore()},E.prototype.drawGauge=function(D,T,M,O,S){var p=D.gauge.shadow.show?D.gauge.shadow.blur:0,x=v(D,S),A=y(D,T,S);b(M.cx,M.cy,T.radius,T.width,r(D.gauge.startAngle),r(D.gauge.endAngle),D.gauge.border.color,D.gauge.border.width,D.gauge.background.color,p),b(M.cx,M.cy,T.radius-1,T.width-2,r(A.a1),r(A.a2),x,1,x,p),D.gauge.neutralValue!=null&&a(D,T,M,x)};function y(D,T,M){let O={};var S=D.gauge.neutralValue;return S!=null?M<S?(O.a1=g(D,T,M),O.a2=g(D,T,S)):(O.a1=g(D,T,S),O.a2=g(D,T,M)):(O.a1=D.gauge.startAngle,O.a2=g(D,T,M)),O}function a(D,T,M,O){var S=(D.gauge.max-D.gauge.min)/600;s(l,M.cx,M.cy,T.radius-2,T.width-4,r(g(D,T,D.gauge.neutralValue-S)),r(g(D,T,D.gauge.neutralValue+S)),O,2,D.gauge.background.color)}function v(D,T){for(var M,O=0;O<D.threshold.values.length;O++){var S=D.threshold.values[O];if(M=S.color,T<S.value)break}return M}function g(D,T,M){var O=D.gauge.startAngle+(D.gauge.endAngle-D.gauge.startAngle)*((M-D.gauge.min)/(D.gauge.max-D.gauge.min));return O<D.gauge.startAngle?O=D.gauge.startAngle:O>D.gauge.endAngle&&(O=D.gauge.endAngle),O}E.prototype.drawThreshold=function(D,T,M){for(var O=D.gauge.startAngle,S=0;S<D.threshold.values.length;S++){var p=D.threshold.values[S];c1=p.color,a2=g(D,T,p.value),s(l,M.cx,M.cy,T.radius+T.thresholdWidth,T.thresholdWidth-2,r(O),r(a2),c1,1,c1),O=a2}};function b(D,T,M,O,S,p,x,A,R,B){S!==p&&(l.save(),s(l,D,T,M,O,S,p,x,A,R),B&&(s(l,D,T,M,O,S,p),l.clip(),l.shadowOffsetX=0,l.shadowOffsetY=0,l.shadowBlur=10,l.shadowColor="gray",s(l,D,T,M+1,O+2,S,p,x,1)),l.restore())}E.prototype.drawLable=function(D,T,M,O,S){C(M.cx,M.y+M.cellMargin+T.labelMargin+M.offsetY,"flotGaugeLabel"+O,D.label.formatter?D.label.formatter(S.label,S.data[0][1]):text,D.label)},E.prototype.drawValue=function(D,T,M,O,S){C(M.cx,M.cy-D.value.font.size/2,"flotGaugeValue"+O,D.value.formatter?D.value.formatter(S.label,S.data[0][1]):text,D.value)},E.prototype.drawThresholdValues=function(D,T,M,O){P(D,T,M,"Min"+O,D.gauge.min,D.gauge.startAngle),P(D,T,M,"Max"+O,D.gauge.max,D.gauge.endAngle);for(var S=0;S<D.threshold.values.length;S++){var p=D.threshold.values[S];if(p.value>D.gauge.min&&p.value<D.gauge.max){var x=g(D,T,p.value);P(D,T,M,O+"_"+S,p.value,x)}}var A=D.gauge.neutralValue;A!=null&&A>D.gauge.min&&A<D.gauge.max&&P(D,T,M,"Neutral"+O,A,g(D,T,A))};function P(D,T,M,O,S,p){C(M.cx+(T.thresholdLabelMargin+T.thresholdLabelFontSize/2+T.radius)*Math.cos(r(p)),M.cy+(T.thresholdLabelMargin+T.thresholdLabelFontSize/2+T.radius)*Math.sin(r(p)),"flotGaugeThresholdValue"+O,D.threshold.label.formatter?D.threshold.label.formatter(S):S,D.threshold.label,p)}function C(D,T,M,O,S,p){var x=Y(i).find("#"+M),A=x.length;A||(x=Y("<span></span>"),x.attr("id",M),x.attr("class","flot-temp-elem"),i.append(x)),x.css("position","absolute"),x.css("top",T+"px"),x.css("white-space","nowrap"),S.font.size&&x.css("font-size",S.font.size+"px"),S.font.family&&x.css("font-family",S.font.family),S.color&&x.css("color",S.color),S.background.color&&x.css("background-color",S.background.color),S.background.opacity&&x.css("opacity",S.background.opacity),x.text(O),x.css("left",D+"px"),x.css("left",parseInt(x.css("left"))-x.width()/2+"px"),!A&&p&&(x.css("top",parseInt(x.css("top"))-x.height()/2+"px"),x.css("transform","rotate("+(180*p+90)+"deg)"))}return E}();function e(l){return typeof Logger<"u"?new Logger(l):null}function t(l,i){return i%l}function n(l,i){return Math.floor(i/l)}function r(l){return l*Math.PI}function s(l,i,c,u,f,d,E,h,y,a){if(d!==E){var v=!1;l.save(),l.beginPath(),l.arc(i,c,u,d,E,v),l.lineTo(i+(u-f)*Math.cos(E),c+(u-f)*Math.sin(E)),l.arc(i,c,u-f,E,d,!v),l.closePath(),y&&(l.lineWidth=y),h&&(l.strokeStyle=h,l.stroke()),a&&(l.fillStyle=a,l.fill()),l.restore()}}function o(l){l.hooks.processOptions.push(function(i,c){var u=e(c.series.gauges.debug);c.series.gauges.show&&(c.grid.show=!1,c.legend.show=!1);var f=c.series.gauges.threshold.values;f.sort(function(d,E){return d.value<E.value?-1:d.value>E.value?1:0})}),l.hooks.draw.push(function(i,c){var u=i.getOptions(),f=u.series.gauges,d=e(f.debug);if(f.show){var E=i.getData();if(!(!E||!E.length)){var h=new I(i,c),y=h.calculateLayout();f.debug.layout,h.drawBackground(y);for(var a=0;a<E.length;a++){var v=E[a],g=Y.extend({},f,v.gauges);v.gauges&&h.calculateAutoValues(g,y.cellWidth);var b=h.calculateCellLayout(g,y,a);h.drawCellBackground(g,b),g.debug.layout,g.label.show&&h.drawLable(g,y,b,a,v),h.drawGauge(g,y,b,v.label,v.data[0][1]),g.threshold.show&&h.drawThreshold(g,y,b),g.threshold.label.show&&h.drawThresholdValues(g,y,b,a),g.value.show&&h.drawValue(g,y,b,a,v)}}}})}var m={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(l,i){return l}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(l,i){return parseInt(i)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(l){return l}},values:[]}}}};Y.plot.plugins.push({init:o,options:m,name:"gauge",version:"1.1.0"})})(jQuery)},54087:()=>{(function(Y){Y.color={},Y.color.make=function(e,t,n,r){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=r??1,s.add=function(o,m){for(var l=0;l<o.length;++l)s[o.charAt(l)]+=m;return s.normalize()},s.scale=function(o,m){for(var l=0;l<o.length;++l)s[o.charAt(l)]*=m;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function o(m,l,i){return l<m?m:l>i?i:l}return s.r=o(0,parseInt(s.r),255),s.g=o(0,parseInt(s.g),255),s.b=o(0,parseInt(s.b),255),s.a=o(0,s.a,1),s},s.clone=function(){return Y.color.make(s.r,s.b,s.g,s.a)},s.normalize()},Y.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!Y.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),Y.color.parse(n)},Y.color.parse=function(e){var t,n=Y.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var r=Y.trim(e).toLowerCase();return r=="transparent"?n(255,255,255,0):(t=I[r]||[0,0,0],n(t[0],t[1],t[2]))};var I={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(Y){var I=Object.prototype.hasOwnProperty;Y.fn.detach||(Y.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(r,s){var o=s.children("."+r)[0];if(o==null&&(o=document.createElement("canvas"),o.className=r,Y(o).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!o.getContext))if(window.G_vmlCanvasManager)o=window.G_vmlCanvasManager.initElement(o);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=o;var m=this.context=o.getContext("2d"),l=window.devicePixelRatio||1,i=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;this.pixelRatio=l/i,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(r,s){if(r<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+r+", height = "+s);var o=this.element,m=this.context,l=this.pixelRatio;this.width!=r&&(o.width=r*l,o.style.width=r+"px",this.width=r),this.height!=s&&(o.height=s*l,o.style.height=s+"px",this.height=s),m.restore(),m.save(),m.scale(l,l)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var r=this._textCache;for(var s in r)if(I.call(r,s)){var o=this.getTextLayer(s),m=r[s];o.hide();for(var l in m)if(I.call(m,l)){var i=m[l];for(var c in i)if(I.call(i,c)){for(var u=i[c].positions,f=0,d;d=u[f];f++)d.active?d.rendered||(o.append(d.element),d.rendered=!0):(u.splice(f--,1),d.rendered&&d.element.detach());u.length==0&&delete i[c]}}o.show()}},e.prototype.getTextLayer=function(r){var s=this.text[r];return s==null&&(this.textContainer==null&&(this.textContainer=Y("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[r]=Y("<div></div>").addClass(r).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(r,s,o,m,l){var i,c,u,f;if(s=""+s,typeof o=="object"?i=o.style+" "+o.variant+" "+o.weight+" "+o.size+"px/"+o.lineHeight+"px "+o.family:i=o,c=this._textCache[r],c==null&&(c=this._textCache[r]={}),u=c[i],u==null&&(u=c[i]={}),f=u[s],f==null){var d=Y("<div></div>").html(s).css({position:"absolute","max-width":l,top:-9999}).appendTo(this.getTextLayer(r));typeof o=="object"?d.css({font:i,color:o.color}):typeof o=="string"&&d.addClass(o),f=u[s]={element:d,positions:[]};var E=this._textSizeCache[s];E?(f.width=E.width,f.height=E.height):(f.width=d.outerWidth(!0),f.height=d.outerHeight(!0),this._textSizeCache[s]={width:f.width,height:f.height}),d.detach()}return f},e.prototype.addText=function(r,s,o,m,l,i,c,u,f){var d=this.getTextInfo(r,m,l,i,c),E=d.positions;u=="center"?s-=d.width/2:u=="right"&&(s-=d.width),f=="middle"?o-=d.height/2:f=="bottom"&&(o-=d.height);for(var h=0,y;y=E[h];h++)if(y.x==s&&y.y==o){y.active=!0;return}y={active:!0,rendered:!1,element:E.length?d.element.clone():d.element,x:s,y:o},E.push(y),y.element.css({top:Math.round(o),left:Math.round(s),"text-align":u})},e.prototype.removeText=function(r,s,o,m,l,i){if(m==null){var c=this._textCache[r];if(c!=null){for(var u in c)if(I.call(c,u)){var f=c[u];for(var d in f)if(I.call(f,d))for(var E=f[d].positions,h=0,y;y=E[h];h++)y.active=!1}}}else for(var E=this.getTextInfo(r,m,l,i).positions,h=0,y;y=E[h];h++)y.x==s&&y.y==o&&(y.active=!1)};function t(r,s,o,m){var l=[],i={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},c=null,u=null,f=null,d=null,E=null,h=[],y=[],a={left:0,right:0,top:0,bottom:0},v=0,g=0,b={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},P=this;P.setData=M,P.setupGrid=G,P.draw=ee,P.getPlaceholder=function(){return r},P.getCanvas=function(){return c.element},P.getPlotOffset=function(){return a},P.width=function(){return v},P.height=function(){return g},P.offset=function(){var se=f.offset();return se.left+=a.left,se.top+=a.top,se},P.getData=function(){return l},P.getAxes=function(){var se={},ae;return Y.each(h.concat(y),function(fe,Ce){Ce&&(se[Ce.direction+(Ce.n!=1?Ce.n:"")+"axis"]=Ce)}),se},P.getXAxes=function(){return h},P.getYAxes=function(){return y},P.c2p=x,P.p2c=A,P.getOptions=function(){return i},P.highlight=at,P.unhighlight=Ye,P.triggerRedrawOverlay=He,P.pointOffset=function(se){return{left:parseInt(h[S(se,"x")-1].p2c(+se.x)+a.left,10),top:parseInt(y[S(se,"y")-1].p2c(+se.y)+a.top,10)}},P.shutdown=w,P.destroy=function(){w(),r.removeData("plot").empty(),l=[],i=null,c=null,u=null,f=null,d=null,E=null,h=[],y=[],b=null,ve=[],P=null},P.resize=function(){var se=r.width(),ae=r.height();c.resize(se,ae),u.resize(se,ae)},P.hooks=b,D(P),T(o),F(),M(s),G(),ee(),K();function C(se,ae){ae=[P].concat(ae);for(var fe=0;fe<se.length;++fe)se[fe].apply(this,ae)}function D(){for(var se={Canvas:e},ae=0;ae<m.length;++ae){var fe=m[ae];fe.init(P,se),fe.options&&Y.extend(!0,i,fe.options)}}function T(se){Y.extend(!0,i,se),se&&se.colors&&(i.colors=se.colors),i.xaxis.color==null&&(i.xaxis.color=Y.color.parse(i.grid.color).scale("a",.22).toString()),i.yaxis.color==null&&(i.yaxis.color=Y.color.parse(i.grid.color).scale("a",.22).toString()),i.xaxis.tickColor==null&&(i.xaxis.tickColor=i.grid.tickColor||i.xaxis.color),i.yaxis.tickColor==null&&(i.yaxis.tickColor=i.grid.tickColor||i.yaxis.color),i.grid.borderColor==null&&(i.grid.borderColor=i.grid.color),i.grid.tickColor==null&&(i.grid.tickColor=Y.color.parse(i.grid.color).scale("a",.22).toString());var ae,fe,Ce,Re=r.css("font-size"),Oe=Re?+Re.replace("px",""):13,ze={style:r.css("font-style"),size:Math.round(.8*Oe),variant:r.css("font-variant"),weight:r.css("font-weight"),family:r.css("font-family")};for(Ce=i.xaxes.length||1,ae=0;ae<Ce;++ae)fe=i.xaxes[ae],fe&&!fe.tickColor&&(fe.tickColor=fe.color),fe=Y.extend(!0,{},i.xaxis,fe),i.xaxes[ae]=fe,fe.font&&(fe.font=Y.extend({},ze,fe.font),fe.font.color||(fe.font.color=fe.color),fe.font.lineHeight||(fe.font.lineHeight=Math.round(fe.font.size*1.15)));for(Ce=i.yaxes.length||1,ae=0;ae<Ce;++ae)fe=i.yaxes[ae],fe&&!fe.tickColor&&(fe.tickColor=fe.color),fe=Y.extend(!0,{},i.yaxis,fe),i.yaxes[ae]=fe,fe.font&&(fe.font=Y.extend({},ze,fe.font),fe.font.color||(fe.font.color=fe.color),fe.font.lineHeight||(fe.font.lineHeight=Math.round(fe.font.size*1.15)));for(i.xaxis.noTicks&&i.xaxis.ticks==null&&(i.xaxis.ticks=i.xaxis.noTicks),i.yaxis.noTicks&&i.yaxis.ticks==null&&(i.yaxis.ticks=i.yaxis.noTicks),i.x2axis&&(i.xaxes[1]=Y.extend(!0,{},i.xaxis,i.x2axis),i.xaxes[1].position="top",i.x2axis.min==null&&(i.xaxes[1].min=null),i.x2axis.max==null&&(i.xaxes[1].max=null)),i.y2axis&&(i.yaxes[1]=Y.extend(!0,{},i.yaxis,i.y2axis),i.yaxes[1].position="right",i.y2axis.min==null&&(i.yaxes[1].min=null),i.y2axis.max==null&&(i.yaxes[1].max=null)),i.grid.coloredAreas&&(i.grid.markings=i.grid.coloredAreas),i.grid.coloredAreasColor&&(i.grid.markingsColor=i.grid.coloredAreasColor),i.lines&&Y.extend(!0,i.series.lines,i.lines),i.points&&Y.extend(!0,i.series.points,i.points),i.bars&&Y.extend(!0,i.series.bars,i.bars),i.shadowSize!=null&&(i.series.shadowSize=i.shadowSize),i.highlightColor!=null&&(i.series.highlightColor=i.highlightColor),ae=0;ae<i.xaxes.length;++ae)R(h,ae+1).options=i.xaxes[ae];for(ae=0;ae<i.yaxes.length;++ae)R(y,ae+1).options=i.yaxes[ae];for(var Xe in b)i.hooks[Xe]&&i.hooks[Xe].length&&(b[Xe]=b[Xe].concat(i.hooks[Xe]));C(b.processOptions,[i])}function M(se){l=O(se),B(),U()}function O(se){for(var ae=[],fe=0;fe<se.length;++fe){var Ce=Y.extend(!0,{},i.series);se[fe].data!=null?(Ce.data=se[fe].data,delete se[fe].data,Y.extend(!0,Ce,se[fe]),se[fe].data=Ce.data):Ce.data=se[fe],ae.push(Ce)}return ae}function S(se,ae){var fe=se[ae+"axis"];return typeof fe=="object"&&(fe=fe.n),typeof fe!="number"&&(fe=1),fe}function p(){return Y.grep(h.concat(y),function(se){return se})}function x(se){var ae={},fe,Ce;for(fe=0;fe<h.length;++fe)Ce=h[fe],Ce&&(ae["x"+Ce.n]=Ce.c2p(se.left));for(fe=0;fe<y.length;++fe)Ce=y[fe],Ce&&(ae["y"+Ce.n]=Ce.c2p(se.top));return ae.x1!==void 0&&(ae.x=ae.x1),ae.y1!==void 0&&(ae.y=ae.y1),ae}function A(se){var ae={},fe,Ce,Re;for(fe=0;fe<h.length;++fe)if(Ce=h[fe],Ce&&Ce.used&&(Re="x"+Ce.n,se[Re]==null&&Ce.n==1&&(Re="x"),se[Re]!=null)){ae.left=Ce.p2c(se[Re]);break}for(fe=0;fe<y.length;++fe)if(Ce=y[fe],Ce&&Ce.used&&(Re="y"+Ce.n,se[Re]==null&&Ce.n==1&&(Re="y"),se[Re]!=null)){ae.top=Ce.p2c(se[Re]);break}return ae}function R(se,ae){return se[ae-1]||(se[ae-1]={n:ae,direction:se==h?"x":"y",options:Y.extend(!0,{},se==h?i.xaxis:i.yaxis)}),se[ae-1]}function B(){var se=l.length,ae=-1,fe;for(fe=0;fe<l.length;++fe){var Ce=l[fe].color;Ce!=null&&(se--,typeof Ce=="number"&&Ce>ae&&(ae=Ce))}se<=ae&&(se=ae+1);var Re,Oe=[],ze=i.colors,Xe=ze.length,Ze=0;for(fe=0;fe<se;fe++)Re=Y.color.parse(ze[fe%Xe]||"#666"),fe%Xe==0&&fe&&(Ze>=0?Ze<.5?Ze=-Ze-.2:Ze=0:Ze=-Ze),Oe[fe]=Re.scale("rgb",1+Ze);var et=0,nt;for(fe=0;fe<l.length;++fe){if(nt=l[fe],nt.color==null?(nt.color=Oe[et].toString(),++et):typeof nt.color=="number"&&(nt.color=Oe[nt.color].toString()),nt.lines.show==null){var lt,rt=!0;for(lt in nt)if(nt[lt]&&nt[lt].show){rt=!1;break}rt&&(nt.lines.show=!0)}nt.lines.zero==null&&(nt.lines.zero=!!nt.lines.fill),nt.xaxis=R(h,S(nt,"x")),nt.yaxis=R(y,S(nt,"y"))}}function U(){var se=Number.POSITIVE_INFINITY,ae=Number.NEGATIVE_INFINITY,fe=Number.MAX_VALUE,Ce,Re,Oe,ze,Xe,Ze,et,nt,lt,rt,ut,Et,Ct,Ut,Gt,Wt;function ot(Xt,En,Vn){En<Xt.datamin&&En!=-fe&&(Xt.datamin=En),Vn>Xt.datamax&&Vn!=fe&&(Xt.datamax=Vn)}for(Y.each(p(),function(Xt,En){En.datamin=se,En.datamax=ae,En.used=!1}),Ce=0;Ce<l.length;++Ce)Ze=l[Ce],Ze.datapoints={points:[]},C(b.processRawData,[Ze,Ze.data,Ze.datapoints]);for(Ce=0;Ce<l.length;++Ce){if(Ze=l[Ce],Gt=Ze.data,Wt=Ze.datapoints.format,!Wt){if(Wt=[],Wt.push({x:!0,number:!0,required:!0}),Wt.push({y:!0,number:!0,required:!0}),Ze.stack||Ze.bars.show||Ze.lines.show&&Ze.lines.fill){var Tt=!!(Ze.bars.show&&Ze.bars.zero||Ze.lines.show&&Ze.lines.zero);Wt.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:Tt}),Ze.bars.horizontal&&(delete Wt[Wt.length-1].y,Wt[Wt.length-1].x=!0)}Ze.datapoints.format=Wt}if(Ze.datapoints.pointsize==null){Ze.datapoints.pointsize=Wt.length,nt=Ze.datapoints.pointsize,et=Ze.datapoints.points;var Pn=Ze.lines.show&&Ze.lines.steps;for(Ze.xaxis.used=Ze.yaxis.used=!0,Re=Oe=0;Re<Gt.length;++Re,Oe+=nt){Ut=Gt[Re];var ft=Ut==null;if(!ft)for(ze=0;ze<nt;++ze)Et=Ut[ze],Ct=Wt[ze],Ct&&(Ct.number&&Et!=null&&(Et=+Et,isNaN(Et)?Et=null:Et==1/0?Et=fe:Et==-1/0&&(Et=-fe)),Et==null&&(Ct.required&&(ft=!0),Ct.defaultValue!=null&&(Et=Ct.defaultValue))),et[Oe+ze]=Et;if(ft)for(ze=0;ze<nt;++ze)Et=et[Oe+ze],Et!=null&&(Ct=Wt[ze],Ct.autoscale!==!1&&(Ct.x&&ot(Ze.xaxis,Et,Et),Ct.y&&ot(Ze.yaxis,Et,Et))),et[Oe+ze]=null;if(Pn&&Oe>0&&(!ft||et[Oe-nt]!=null)){for(ze=0;ze<nt;++ze)et[Oe+nt+ze]=et[Oe+ze];et[Oe+1]=et[Oe-nt+1]||0,ft&&(et[Oe]=Ut[0]),Oe+=nt}}}}for(Ce=0;Ce<l.length;++Ce){if(Ze=l[Ce],et=Ze.datapoints.points,nt=Ze.datapoints.pointsize,Ze.transform==="negative-Y")for(Re=0;Re<et.length;Re+=nt)et[Re]!=null&&(Et=et[Re+1],et[Re+1]=-Et);C(b.processDatapoints,[Ze,Ze.datapoints])}for(Ce=0;Ce<l.length;++Ce){Ze=l[Ce],et=Ze.datapoints.points,nt=Ze.datapoints.pointsize,Wt=Ze.datapoints.format;var Mt=se,_t=se,nn=ae,dn=ae;for(Re=0;Re<et.length;Re+=nt)if(et[Re]!=null)for(ze=0;ze<nt;++ze)Et=et[Re+ze],Ct=Wt[ze],!(!Ct||Ct.autoscale===!1||Et==fe||Et==-fe)&&(Ct.x&&(Et<Mt&&(Mt=Et),Et>nn&&(nn=Et)),Ct.y&&(Et<_t&&(_t=Et),Et>dn&&(dn=Et)));if(Ze.bars.show){var en;switch(Ze.bars.align){case"left":en=0;break;case"right":en=-Ze.bars.barWidth;break;default:en=-Ze.bars.barWidth/2}Ze.bars.horizontal?(_t+=en,dn+=en+Ze.bars.barWidth):(Mt+=en,nn+=en+Ze.bars.barWidth)}ot(Ze.xaxis,Mt,nn),ot(Ze.yaxis,_t,dn)}Y.each(p(),function(Xt,En){En.datamin==se&&(En.datamin=null),En.datamax==ae&&(En.datamax=null)})}function F(){r.find(".flot-temp-elem").remove(),r.css("position")=="static"&&r.css("position","relative"),c=new e("flot-base",r),u=new e("flot-overlay",r),d=c.context,E=u.context,f=Y(u.element).unbind();var se=r.data("plot");se&&(se.shutdown(),u.clear()),r.data("plot",P)}function K(){i.grid.hoverable&&(f.mousemove(Se),f.bind("mouseleave",We),Y(document).bind("touchend",pe)),i.grid.clickable&&f.click(De),C(b.bindEvents,[f])}function w(){Me&&clearTimeout(Me),f.unbind("mousemove",Se),f.unbind("mouseleave",We),f.unbind("click",De),Y(document).unbind("touchend",pe),C(b.shutdown,[f])}function L(se){function ae(ze){return ze}var fe,Ce,Re=se.options.transform||ae,Oe=se.options.inverseTransform;se.direction=="x"?(fe=se.scale=v/Math.abs(Re(se.max)-Re(se.min)),Ce=Math.min(Re(se.max),Re(se.min))):(fe=se.scale=g/Math.abs(Re(se.max)-Re(se.min)),fe=-fe,Ce=Math.max(Re(se.max),Re(se.min))),Re==ae?se.p2c=function(ze){return(ze-Ce)*fe}:se.p2c=function(ze){return(Re(ze)-Ce)*fe},Oe?se.c2p=function(ze){return Oe(Ce+ze/fe)}:se.c2p=function(ze){return Ce+ze/fe}}function V(se){for(var ae=se.options,fe=se.ticks||[],Ce=ae.labelWidth||0,Re=ae.labelHeight||0,Oe=Ce||(se.direction=="x"?Math.floor(c.width/(fe.length||1)):null),ze=se.direction+"Axis "+se.direction+se.n+"Axis",Xe="flot-"+se.direction+"-axis flot-"+se.direction+se.n+"-axis "+ze,Ze=ae.font||"flot-tick-label tickLabel",et=0;et<fe.length;++et){var nt=fe[et];if(nt.label){var lt=c.getTextInfo(Xe,nt.label,Ze,null,Oe);Ce=Math.max(Ce,lt.width+1),Re=Math.max(Re,lt.height)}}se.labelWidth=ae.labelWidth||Ce,se.labelHeight=ae.labelHeight||Re}function N(se){var ae=se.labelWidth,fe=se.labelHeight,Ce=se.options.position,Re=se.direction==="x",Oe=se.options.tickLength,ze=i.grid.axisMargin,Xe=i.grid.labelMargin,Ze=i.grid.eventSectionHeight,et=!0,nt=!0,lt=!0,rt=!1;Y.each(Re?h:y,function(ut,Et){Et&&(Et.show||Et.reserveSpace)&&(Et===se?rt=!0:Et.options.position===Ce&&(rt?nt=!1:et=!1),rt||(lt=!1))}),nt&&(ze=0),Oe==null&&(Oe=lt?"full":5),isNaN(+Oe)||(Xe+=+Oe),Re?(fe+=Xe,fe+=Ze,Ce=="bottom"?(a.bottom+=fe+ze,se.box={top:c.height-a.bottom,height:fe}):(se.box={top:a.top+ze,height:fe},a.top+=fe+ze)):(ae+=Xe,Ce=="left"?(se.box={left:a.left+ze,width:ae},a.left+=ae+ze):(a.right+=ae+ze,se.box={left:c.width-a.right,width:ae})),se.position=Ce,se.tickLength=Oe,se.box.padding=Xe,se.box.eventSectionPadding=Ze,se.innermost=et}function z(se){se.direction=="x"?(se.box.left=a.left-se.labelWidth/2,se.box.width=c.width-a.left-a.right+se.labelWidth):(se.box.top=a.top-se.labelHeight/2,se.box.height=c.height-a.bottom-a.top+se.labelHeight)}function J(){var se=i.grid.minBorderMargin,ae,fe;if(se==null)for(se=0,fe=0;fe<l.length;++fe)se=Math.max(se,2*(l[fe].points.radius+l[fe].points.lineWidth/2));var Ce={left:se,right:se,top:se,bottom:se};Y.each(p(),function(Re,Oe){Oe.reserveSpace&&Oe.ticks&&Oe.ticks.length&&(Oe.direction==="x"?(Ce.left=Math.max(Ce.left,Oe.labelWidth/2),Ce.right=Math.max(Ce.right,Oe.labelWidth/2)):(Ce.bottom=Math.max(Ce.bottom,Oe.labelHeight/2),Ce.top=Math.max(Ce.top,Oe.labelHeight/2)))}),a.left=Math.ceil(Math.max(Ce.left,a.left)),a.right=Math.ceil(Math.max(Ce.right,a.right)),a.top=Math.ceil(Math.max(Ce.top,a.top)),a.bottom=Math.ceil(Math.max(Ce.bottom,a.bottom))}function G(){var se,ae=p(),fe=i.grid.show;for(var Ce in a){var Re=i.grid.margin||0;a[Ce]=typeof Re=="number"?Re:Re[Ce]||0}C(b.processOffset,[a]);for(var Ce in a)typeof i.grid.borderWidth=="object"?a[Ce]+=fe?i.grid.borderWidth[Ce]:0:a[Ce]+=fe?i.grid.borderWidth:0;if(Y.each(ae,function(Xe,Ze){var et=Ze.options;Ze.show=et.show==null?Ze.used:et.show,Ze.reserveSpace=et.reserveSpace==null?Ze.show:et.reserveSpace,H(Ze)}),C(b.processRange,[]),fe){for(var Oe=Y.grep(ae,function(Xe){return Xe.show||Xe.reserveSpace}),ze=!1,se=0;se<2&&(Y.each(Oe,function(Ze,et){le(et),me(et),ze=k(et,et.ticks)||ze,V(et)}),ze&&b.processRange.length>0);se++)C(b.processRange,[]),ze=!1;for(se=Oe.length-1;se>=0;--se)N(Oe[se]);J(),Y.each(Oe,function(Xe,Ze){z(Ze)})}v=c.width-a.left-a.right,g=c.height-a.bottom-a.top,Y.each(ae,function(Xe,Ze){L(Ze)}),fe&&te(),Be()}function H(se){var ae=se.options,fe=+(ae.min!=null?ae.min:se.datamin),Ce=+(ae.max!=null?ae.max:se.datamax),Re=Ce-fe;if(Re==0){var Oe=.25,ze=Math.abs(Ce==0?1:Ce*Oe);ae.min==null&&(fe-=ze),(ae.max==null||ae.min!=null)&&(Ce+=ze)}else{var Xe=ae.autoscaleMargin;Xe!=null&&(ae.min==null&&(fe-=Re*Xe,fe<0&&se.datamin!=null&&se.datamin>=0&&(fe=0)),ae.max==null&&(Ce+=Re*Xe,Ce>0&&se.datamax!=null&&se.datamax<=0&&(Ce=0)))}se.min=fe,se.max=Ce}function q(se){if(se=Math.abs(String(se).replace(".","")),se==0)return 0;for(;se!=0&&se%10==0;)se/=10;return Math.floor(Math.log(se)/Math.LN10)+1}function le(se){var ae=se.options,fe;typeof ae.ticks=="number"&&ae.ticks>0?fe=ae.ticks:fe=.3*Math.sqrt(se.direction=="x"?c.width:c.height);var Ce=(se.max-se.min)/fe,Re=-Math.floor(Math.log(Ce)/Math.LN10),Oe=ae.tickDecimals;Oe!=null&&Re>Oe&&(Re=Oe);var ze=Math.pow(10,-Re),Xe=Ce/ze,Ze;if(Xe<1.5?Ze=1:Xe<3?(Ze=2,Xe>2.25&&(Oe==null||Re+1<=Oe)&&(Ze=2.5,++Re)):Xe<7.5?Ze=5:Ze=10,Ze*=ze,ae.minTickSize!=null&&Ze<ae.minTickSize&&(Ze=ae.minTickSize),se.delta=Ce,se.tickDecimals=Math.max(0,Oe??Re),se.tickSize=ae.tickSize||Ze,ae.mode=="time"&&!se.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(se.tickGenerator||(se.tickGenerator=function(ut){var Et=[],Ct=n(ut.min,ut.tickSize),Ut=0,Gt=Number.NaN,Wt;do Wt=Gt,Gt=Ct+Ut*ut.tickSize,Et.push(Gt),++Ut;while(Gt<ut.max&&Gt!=Wt);return Et},se.tickFormatter=function(ut,Et){var Ct=Et.tickDecimals?Math.pow(10,Et.tickDecimals):1,Ut=""+Math.round(ut*Ct)/Ct;if(Et.tickDecimals!=null){var Gt=Ut.indexOf("."),Wt=Gt==-1?0:Ut.length-Gt-1;if(Wt<Et.tickDecimals)return(Wt?Ut:Ut+".")+(""+Ct).substr(1,Et.tickDecimals-Wt)}return Ut}),Y.isFunction(ae.tickFormatter)&&(se.tickFormatter=function(ut,Et){return""+ae.tickFormatter(ut,Et)}),ae.alignTicksWithAxis!=null){var et=(se.direction=="x"?h:y)[ae.alignTicksWithAxis-1];if(et&&et.used&&et!=se){var nt=se.tickGenerator(se);if(nt.length>0&&(ae.min==null&&(se.min=Math.min(se.min,nt[0])),ae.max==null&&nt.length>1&&(se.max=Math.max(se.max,nt[nt.length-1]))),se.tickGenerator=function(ut){var Et=[],Ct,Ut;for(Ut=0;Ut<et.ticks.length;++Ut)Ct=(et.ticks[Ut].v-et.min)/(et.max-et.min),Ct=ut.min+Ct*(ut.max-ut.min),Et.push(Ct);return Et},!se.mode&&ae.tickDecimals==null){var lt=Math.max(0,-Math.floor(Math.log(se.delta)/Math.LN10)+1),rt=se.tickGenerator(se);rt.length>1&&/\..*0$/.test((rt[1]-rt[0]).toFixed(lt))||(se.tickDecimals=lt)}}}}function me(se){var ae=se.options.ticks,fe=[];ae==null||typeof ae=="number"&&ae>0?fe=se.tickGenerator(se):ae&&(Y.isFunction(ae)?fe=ae(se):fe=ae);var Ce,Re;for(se.ticks=[],Ce=0;Ce<fe.length;++Ce){var Oe=null,ze=fe[Ce];typeof ze=="object"?(Re=+ze[0],ze.length>1&&(Oe=ze[1])):Re=+ze,Oe==null&&(Oe=se.tickFormatter(Re,se)),isNaN(Re)||se.ticks.push({v:Re,label:Oe})}}function k(se,ae){var fe=!1;return se.options.autoscaleMargin&&ae.length>0&&(se.options.min==null&&(se.min=Math.min(se.min,ae[0].v),fe=!0),se.options.max==null&&ae.length>1&&(se.max=Math.max(se.max,ae[ae.length-1].v),fe=!0)),fe}function ee(){c.clear(),C(b.drawBackground,[d]);var se=i.grid;se.show&&se.backgroundColor&&j(),se.show&&!se.aboveData&&ne();for(var ae=0;ae<l.length;++ae)C(b.drawSeries,[d,l[ae]]),ie(l[ae]);C(b.draw,[d]),se.show&&se.aboveData&&ne(),c.render(),He()}function X(se,ae){for(var fe,Ce,Re,Oe,ze=p(),Xe=0;Xe<ze.length;++Xe)if(fe=ze[Xe],fe.direction==ae&&(Oe=ae+fe.n+"axis",!se[Oe]&&fe.n==1&&(Oe=ae+"axis"),se[Oe])){Ce=se[Oe].from,Re=se[Oe].to;break}if(se[Oe]||(fe=ae=="x"?h[0]:y[0],Ce=se[ae+"1"],Re=se[ae+"2"]),Ce!=null&&Re!=null&&Ce>Re){var Ze=Ce;Ce=Re,Re=Ze}return{from:Ce,to:Re,axis:fe}}function j(){d.save(),d.translate(a.left,a.top),d.fillStyle=Ee(i.grid.backgroundColor,g,0,"rgba(255, 255, 255, 0)"),d.fillRect(0,0,v,g),d.restore()}function ne(){var se,ae,fe,Ce;d.save(),d.translate(a.left,a.top);var Re=i.grid.markings;if(Re)for(Y.isFunction(Re)&&(ae=P.getAxes(),ae.xmin=ae.xaxis.min,ae.xmax=ae.xaxis.max,ae.ymin=ae.yaxis.min,ae.ymax=ae.yaxis.max,Re=Re(ae)),se=0;se<Re.length;++se){var Oe=Re[se],ze=X(Oe,"x"),Xe=X(Oe,"y");if(ze.from==null&&(ze.from=ze.axis.min),ze.to==null&&(ze.to=ze.axis.max),Xe.from==null&&(Xe.from=Xe.axis.min),Xe.to==null&&(Xe.to=Xe.axis.max),!(ze.to<ze.axis.min||ze.from>ze.axis.max||Xe.to<Xe.axis.min||Xe.from>Xe.axis.max)){ze.from=Math.max(ze.from,ze.axis.min),ze.to=Math.min(ze.to,ze.axis.max),Xe.from=Math.max(Xe.from,Xe.axis.min),Xe.to=Math.min(Xe.to,Xe.axis.max);var Ze=ze.from===ze.to,et=Xe.from===Xe.to;if(!(Ze&&et))if(ze.from=Math.floor(ze.axis.p2c(ze.from)),ze.to=Math.floor(ze.axis.p2c(ze.to)),Xe.from=Math.floor(Xe.axis.p2c(Xe.from)),Xe.to=Math.floor(Xe.axis.p2c(Xe.to)),Ze||et){var nt=Oe.lineWidth||i.grid.markingsLineWidth,lt=nt%2?.5:0;d.beginPath(),d.strokeStyle=Oe.color||i.grid.markingsColor,d.lineWidth=nt,Ze?(d.moveTo(ze.to+lt,Xe.from),d.lineTo(ze.to+lt,Xe.to)):(d.moveTo(ze.from,Xe.to+lt),d.lineTo(ze.to,Xe.to+lt)),d.stroke()}else d.fillStyle=Oe.color||i.grid.markingsColor,d.fillRect(ze.from,Xe.to,ze.to-ze.from,Xe.from-Xe.to)}}ae=p(),fe=i.grid.borderWidth;for(var rt=0;rt<ae.length;++rt){var ut=ae[rt],Et=ut.box,Ct=ut.tickLength,Ut,Gt,Wt,ot;if(!(!ut.show||ut.ticks.length==0)){for(d.lineWidth=1,ut.direction=="x"?(Ut=0,Ct=="full"?Gt=ut.position=="top"?0:g:Gt=Et.top-a.top+(ut.position=="top"?Et.height:0)):(Gt=0,Ct=="full"?Ut=ut.position=="left"?0:v:Ut=Et.left-a.left+(ut.position=="left"?Et.width:0)),ut.innermost||(d.strokeStyle=ut.options.color,d.beginPath(),Wt=ot=0,ut.direction=="x"?Wt=v+1:ot=g+1,d.lineWidth==1&&(ut.direction=="x"?Gt=Math.floor(Gt)+.5:Ut=Math.floor(Ut)+.5),d.moveTo(Ut,Gt),d.lineTo(Ut+Wt,Gt+ot),d.stroke()),d.strokeStyle=ut.options.tickColor,d.beginPath(),se=0;se<ut.ticks.length;++se){var Tt=ut.ticks[se].v;Wt=ot=0,!(isNaN(Tt)||Tt<ut.min||Tt>ut.max||Ct=="full"&&(typeof fe=="object"&&fe[ut.position]>0||fe>0)&&(Tt==ut.min||Tt==ut.max))&&(ut.direction=="x"?(Ut=ut.p2c(Tt),ot=Ct=="full"?-g:Ct,ut.position=="top"&&(ot=-ot)):(Gt=ut.p2c(Tt),Wt=Ct=="full"?-v:Ct,ut.position=="left"&&(Wt=-Wt)),d.lineWidth==1&&(ut.direction=="x"?Ut=Math.floor(Ut)+.5:Gt=Math.floor(Gt)+.5),d.moveTo(Ut,Gt),d.lineTo(Ut+Wt,Gt+ot))}d.stroke()}}fe&&(Ce=i.grid.borderColor,typeof fe=="object"||typeof Ce=="object"?(typeof fe!="object"&&(fe={top:fe,right:fe,bottom:fe,left:fe}),typeof Ce!="object"&&(Ce={top:Ce,right:Ce,bottom:Ce,left:Ce}),fe.top>0&&(d.strokeStyle=Ce.top,d.lineWidth=fe.top,d.beginPath(),d.moveTo(0-fe.left,0-fe.top/2),d.lineTo(v,0-fe.top/2),d.stroke()),fe.right>0&&(d.strokeStyle=Ce.right,d.lineWidth=fe.right,d.beginPath(),d.moveTo(v+fe.right/2,0-fe.top),d.lineTo(v+fe.right/2,g),d.stroke()),fe.bottom>0&&(d.strokeStyle=Ce.bottom,d.lineWidth=fe.bottom,d.beginPath(),d.moveTo(v+fe.right,g+fe.bottom/2),d.lineTo(0,g+fe.bottom/2),d.stroke()),fe.left>0&&(d.strokeStyle=Ce.left,d.lineWidth=fe.left,d.beginPath(),d.moveTo(0-fe.left/2,g+fe.bottom),d.lineTo(0-fe.left/2,0),d.stroke())):(d.lineWidth=fe,d.strokeStyle=i.grid.borderColor,d.strokeRect(-fe/2,-fe/2,v+fe,g+fe))),d.restore()}function te(){Y.each(p(),function(se,ae){var fe=ae.box,Ce=ae.direction+"Axis "+ae.direction+ae.n+"Axis",Re="flot-"+ae.direction+"-axis flot-"+ae.direction+ae.n+"-axis "+Ce,Oe=ae.options.font||"flot-tick-label tickLabel",ze,Xe,Ze,et,nt;if(c.removeText(Re),!(!ae.show||ae.ticks.length==0))for(var lt=0;lt<ae.ticks.length;++lt)ze=ae.ticks[lt],!(!ze.label||ze.v<ae.min||ze.v>ae.max)&&(ae.direction=="x"?(et="center",Xe=a.left+ae.p2c(ze.v),ae.position=="bottom"?Ze=fe.top+fe.padding+fe.eventSectionPadding:(Ze=fe.top+fe.height-fe.padding,nt="bottom")):(nt="middle",Ze=a.top+ae.p2c(ze.v),ae.position=="left"?(Xe=fe.left+fe.width-fe.padding,et="right"):Xe=fe.left+fe.padding),c.addText(Re,Xe,Ze,ze.label,Oe,null,null,et,nt))})}function oe(se){for(var ae=[],fe=null,Ce=null,Re=se.datapoints,Oe=[],ze=0;ze<Re.pointsize-2;ze++)Oe.push(0);for(var Xe=0;Xe<Re.points.length;Xe+=Re.pointsize){var Ze=Re.points[Xe],et=Re.points[Xe+1];Xe===Re.points.length-Re.pointsize?Ce=null:Ce=Re.points[Xe+Re.pointsize],Ze!==null&&et!==null&&fe===null&&Ce===null&&(ae.push(Ze),ae.push(et),ae.push.apply(ae,Oe)),fe=Ze}var nt=Re.points;Re.points=ae,se.points.radius=se.lines.lineWidth/2,be(se),Re.points=nt}function ie(se){se.lines.show&&(ue(se),!se.points.show&&!se.bars.show&&oe(se)),se.bars.show&&re(se),se.points.show&&be(se)}function ue(se){function ae(Xe,Ze,et,nt,lt){var rt=Xe.points,ut=Xe.pointsize,Et=null,Ct=null;d.beginPath();for(var Ut=ut;Ut<rt.length;Ut+=ut){var Gt=rt[Ut-ut],Wt=rt[Ut-ut+1],ot=rt[Ut],Tt=rt[Ut+1];if(!(Gt==null||ot==null)){if(Wt<=Tt&&Wt<lt.min){if(Tt<lt.min)continue;Gt=(lt.min-Wt)/(Tt-Wt)*(ot-Gt)+Gt,Wt=lt.min}else if(Tt<=Wt&&Tt<lt.min){if(Wt<lt.min)continue;ot=(lt.min-Wt)/(Tt-Wt)*(ot-Gt)+Gt,Tt=lt.min}if(Wt>=Tt&&Wt>lt.max){if(Tt>lt.max)continue;Gt=(lt.max-Wt)/(Tt-Wt)*(ot-Gt)+Gt,Wt=lt.max}else if(Tt>=Wt&&Tt>lt.max){if(Wt>lt.max)continue;ot=(lt.max-Wt)/(Tt-Wt)*(ot-Gt)+Gt,Tt=lt.max}if(Gt<=ot&&Gt<nt.min){if(ot<nt.min)continue;Wt=(nt.min-Gt)/(ot-Gt)*(Tt-Wt)+Wt,Gt=nt.min}else if(ot<=Gt&&ot<nt.min){if(Gt<nt.min)continue;Tt=(nt.min-Gt)/(ot-Gt)*(Tt-Wt)+Wt,ot=nt.min}if(Gt>=ot&&Gt>nt.max){if(ot>nt.max)continue;Wt=(nt.max-Gt)/(ot-Gt)*(Tt-Wt)+Wt,Gt=nt.max}else if(ot>=Gt&&ot>nt.max){if(Gt>nt.max)continue;Tt=(nt.max-Gt)/(ot-Gt)*(Tt-Wt)+Wt,ot=nt.max}(Gt!=Et||Wt!=Ct)&&d.moveTo(nt.p2c(Gt)+Ze,lt.p2c(Wt)+et),Et=ot,Ct=Tt,d.lineTo(nt.p2c(ot)+Ze,lt.p2c(Tt)+et)}}d.stroke()}function fe(Xe,Ze,et){for(var nt=Xe.points,lt=Xe.pointsize,rt=Math.min(Math.max(0,et.min),et.max),ut=0,Et,Ct=!1,Ut=1,Gt=0,Wt=0;!(lt>0&&ut>nt.length+lt);){ut+=lt;var ot=nt[ut-lt],Tt=nt[ut-lt+Ut],Pn=nt[ut],ft=nt[ut+Ut];if(Ct){if(lt>0&&ot!=null&&Pn==null){Wt=ut,lt=-lt,Ut=2;continue}if(lt<0&&ut==Gt+lt){d.fill(),Ct=!1,lt=-lt,Ut=1,ut=Gt=Wt+lt;continue}}if(!(ot==null||Pn==null)){if(ot<=Pn&&ot<Ze.min){if(Pn<Ze.min)continue;Tt=(Ze.min-ot)/(Pn-ot)*(ft-Tt)+Tt,ot=Ze.min}else if(Pn<=ot&&Pn<Ze.min){if(ot<Ze.min)continue;ft=(Ze.min-ot)/(Pn-ot)*(ft-Tt)+Tt,Pn=Ze.min}if(ot>=Pn&&ot>Ze.max){if(Pn>Ze.max)continue;Tt=(Ze.max-ot)/(Pn-ot)*(ft-Tt)+Tt,ot=Ze.max}else if(Pn>=ot&&Pn>Ze.max){if(ot>Ze.max)continue;ft=(Ze.max-ot)/(Pn-ot)*(ft-Tt)+Tt,Pn=Ze.max}if(Ct||(d.beginPath(),d.moveTo(Ze.p2c(ot),et.p2c(rt)),Ct=!0),Tt>=et.max&&ft>=et.max){d.lineTo(Ze.p2c(ot),et.p2c(et.max)),d.lineTo(Ze.p2c(Pn),et.p2c(et.max));continue}else if(Tt<=et.min&&ft<=et.min){d.lineTo(Ze.p2c(ot),et.p2c(et.min)),d.lineTo(Ze.p2c(Pn),et.p2c(et.min));continue}var Mt=ot,_t=Pn;Tt<=ft&&Tt<et.min&&ft>=et.min?(ot=(et.min-Tt)/(ft-Tt)*(Pn-ot)+ot,Tt=et.min):ft<=Tt&&ft<et.min&&Tt>=et.min&&(Pn=(et.min-Tt)/(ft-Tt)*(Pn-ot)+ot,ft=et.min),Tt>=ft&&Tt>et.max&&ft<=et.max?(ot=(et.max-Tt)/(ft-Tt)*(Pn-ot)+ot,Tt=et.max):ft>=Tt&&ft>et.max&&Tt<=et.max&&(Pn=(et.max-Tt)/(ft-Tt)*(Pn-ot)+ot,ft=et.max),ot!=Mt&&d.lineTo(Ze.p2c(Mt),et.p2c(Tt)),d.lineTo(Ze.p2c(ot),et.p2c(Tt)),d.lineTo(Ze.p2c(Pn),et.p2c(ft)),Pn!=_t&&(d.lineTo(Ze.p2c(Pn),et.p2c(ft)),d.lineTo(Ze.p2c(_t),et.p2c(ft)))}}}d.save(),d.translate(a.left,a.top),d.lineJoin="round";var Ce=se.lines.lineWidth,Re=se.shadowSize;if(Ce>0&&Re>0){d.lineWidth=Re,d.strokeStyle="rgba(0,0,0,0.1)";var Oe=Math.PI/18;ae(se.datapoints,Math.sin(Oe)*(Ce/2+Re/2),Math.cos(Oe)*(Ce/2+Re/2),se.xaxis,se.yaxis),d.lineWidth=Re/2,ae(se.datapoints,Math.sin(Oe)*(Ce/2+Re/4),Math.cos(Oe)*(Ce/2+Re/4),se.xaxis,se.yaxis)}d.lineWidth=Ce,d.strokeStyle=se.color;var ze=ye(se.lines,se.color,0,g);ze&&(d.fillStyle=ze,fe(se.datapoints,se.xaxis,se.yaxis)),Ce>0&&ae(se.datapoints,0,0,se.xaxis,se.yaxis),d.restore()}function be(se){function ae(Xe,Ze,et,nt,lt,rt,ut,Et){for(var Ct=Xe.points,Ut=Xe.pointsize,Gt=0;Gt<Ct.length;Gt+=Ut){var Wt=Ct[Gt],ot=Ct[Gt+1];Wt==null||Wt<rt.min||Wt>rt.max||ot<ut.min||ot>ut.max||(d.beginPath(),Wt=rt.p2c(Wt),ot=ut.p2c(ot)+nt,Et=="circle"?d.arc(Wt,ot,Ze,0,lt?Math.PI:Math.PI*2,!1):Et(d,Wt,ot,Ze,lt),d.closePath(),et&&(d.fillStyle=et,d.fill()),d.stroke())}}d.save(),d.translate(a.left,a.top);var fe=se.points.lineWidth,Ce=se.shadowSize,Re=se.points.radius,Oe=se.points.symbol;if(fe==0&&(fe=1e-4),fe>0&&Ce>0){var ze=Ce/2;d.lineWidth=ze,d.strokeStyle="rgba(0,0,0,0.1)",ae(se.datapoints,Re,null,ze+ze/2,!0,se.xaxis,se.yaxis,Oe),d.strokeStyle="rgba(0,0,0,0.2)",ae(se.datapoints,Re,null,ze/2,!0,se.xaxis,se.yaxis,Oe)}d.lineWidth=fe,d.strokeStyle=se.color,ae(se.datapoints,Re,ye(se.points,se.color),0,!1,se.xaxis,se.yaxis,Oe),d.restore()}function ge(se,ae,fe,Ce,Re,Oe,ze,Xe,Ze,et,nt){var lt,rt,ut,Et,Ct,Ut,Gt,Wt,ot;et?(Wt=Ut=Gt=!0,Ct=!1,lt=fe,rt=se,Et=ae+Ce,ut=ae+Re,rt<lt&&(ot=rt,rt=lt,lt=ot,Ct=!0,Ut=!1)):(Ct=Ut=Gt=!0,Wt=!1,lt=se+Ce,rt=se+Re,ut=fe,Et=ae,Et<ut&&(ot=Et,Et=ut,ut=ot,Wt=!0,Gt=!1)),!(rt<ze.min||lt>ze.max||Et<Xe.min||ut>Xe.max)&&(lt<ze.min&&(lt=ze.min,Ct=!1),rt>ze.max&&(rt=ze.max,Ut=!1),ut<Xe.min&&(ut=Xe.min,Wt=!1),Et>Xe.max&&(Et=Xe.max,Gt=!1),lt=ze.p2c(lt),ut=Xe.p2c(ut),rt=ze.p2c(rt),Et=Xe.p2c(Et),Oe&&(Ze.fillStyle=Oe(ut,Et),Ze.fillRect(lt,Et,rt-lt,ut-Et)),nt>0&&(Ct||Ut||Gt||Wt)&&(Ze.beginPath(),Ze.moveTo(lt,ut),Ct?Ze.lineTo(lt,Et):Ze.moveTo(lt,Et),Gt?Ze.lineTo(rt,Et):Ze.moveTo(rt,Et),Ut?Ze.lineTo(rt,ut):Ze.moveTo(rt,ut),Wt?Ze.lineTo(lt,ut):Ze.moveTo(lt,ut),Ze.stroke()))}function re(se){function ae(Re,Oe,ze,Xe,Ze,et){for(var nt=Re.points,lt=Re.pointsize,rt=0;rt<nt.length;rt+=lt)nt[rt]!=null&&ge(nt[rt],nt[rt+1],nt[rt+2],Oe,ze,Xe,Ze,et,d,se.bars.horizontal,se.bars.lineWidth)}d.save(),d.translate(a.left,a.top),d.lineWidth=se.bars.lineWidth,d.strokeStyle=se.color;var fe;switch(se.bars.align){case"left":fe=0;break;case"right":fe=-se.bars.barWidth;break;default:fe=-se.bars.barWidth/2}var Ce=se.bars.fill?function(Re,Oe){return ye(se.bars,se.color,Re,Oe)}:null;ae(se.datapoints,fe,fe+se.bars.barWidth,Ce,se.xaxis,se.yaxis),d.restore()}function ye(se,ae,fe,Ce){var Re=se.fill;if(!Re)return null;if(se.fillColor)return Ee(se.fillColor,fe,Ce,ae);var Oe=Y.color.parse(ae);return Oe.a=typeof Re=="number"?Re:.4,Oe.normalize(),Oe.toString()}function Be(){if(i.legend.container!=null?Y.find(i.legend.container).html(""):r.find(".legend").remove(),!!i.legend.show){for(var se=[],ae=[],fe=!1,Ce=i.legend.labelFormatter,Re,Oe,ze=0;ze<l.length;++ze)Re=l[ze],Re.label&&(Oe=Ce?Ce(Re.label,Re):Re.label,Oe&&ae.push({label:Oe,color:Re.color}));if(i.legend.sorted)if(Y.isFunction(i.legend.sorted))ae.sort(i.legend.sorted);else if(i.legend.sorted=="reverse")ae.reverse();else{var Xe=i.legend.sorted!="descending";ae.sort(function(Ut,Gt){return Ut.label==Gt.label?0:Ut.label<Gt.label!=Xe?1:-1})}for(var ze=0;ze<ae.length;++ze){var Ze=ae[ze];ze%i.legend.noColumns==0&&(fe&&se.push("</tr>"),se.push("<tr>"),fe=!0),se.push('<td class="legendColorBox"><div style="border:1px solid '+i.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+Ze.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+Ze.label+"</td>")}if(fe&&se.push("</tr>"),se.length!=0){var et='<table style="font-size:smaller;color:'+i.grid.color+'">'+se.join("")+"</table>";if(i.legend.container!=null)Y(i.legend.container).html(et);else{var nt="",lt=i.legend.position,rt=i.legend.margin;rt[0]==null&&(rt=[rt,rt]),lt.charAt(0)=="n"?nt+="top:"+(rt[1]+a.top)+"px;":lt.charAt(0)=="s"&&(nt+="bottom:"+(rt[1]+a.bottom)+"px;"),lt.charAt(1)=="e"?nt+="right:"+(rt[0]+a.right)+"px;":lt.charAt(1)=="w"&&(nt+="left:"+(rt[0]+a.left)+"px;");var ut=Y('<div class="legend">'+et.replace('style="','style="position:absolute;'+nt+";")+"</div>").appendTo(r);if(i.legend.backgroundOpacity!=0){var Et=i.legend.backgroundColor;Et==null&&(Et=i.grid.backgroundColor,Et&&typeof Et=="string"?Et=Y.color.parse(Et):Et=Y.color.extract(ut,"background-color"),Et.a=1,Et=Et.toString());var Ct=ut.children();Y('<div style="position:absolute;width:'+Ct.width()+"px;height:"+Ct.height()+"px;"+nt+"background-color:"+Et+';"> </div>').prependTo(ut).css("opacity",i.legend.backgroundOpacity)}}}}}var ve=[],Me=null;function ke(se,ae,fe){var Ce=i.grid.mouseActiveRadius,Re=Ce*Ce+1,Oe=null,ze=!1,Xe,Ze,et;for(Xe=l.length-1;Xe>=0;--Xe)if(fe(l[Xe])){var nt=l[Xe],lt=nt.xaxis,rt=nt.yaxis,ut=nt.datapoints.points,Et=lt.c2p(se),Ct=rt.c2p(ae),Ut=Ce/lt.scale,Gt=Ce/rt.scale;if(et=nt.datapoints.pointsize,lt.options.inverseTransform&&(Ut=Number.MAX_VALUE),rt.options.inverseTransform&&(Gt=Number.MAX_VALUE),nt.lines.show||nt.points.show)for(Ze=0;Ze<ut.length;Ze+=et){var Wt=ut[Ze],ot=ut[Ze+1];if(Wt!=null&&!(Wt-Et>Ut||Wt-Et<-Ut||ot-Ct>Gt||ot-Ct<-Gt)){var Tt=Math.abs(lt.p2c(Wt)-se),Pn=Math.abs(rt.p2c(ot)-ae),ft=Tt*Tt+Pn*Pn;ft<Re&&(Re=ft,Oe=[Xe,Ze/et])}}if(nt.bars.show&&!Oe){var Mt,_t;switch(nt.bars.align){case"left":Mt=0;break;case"right":Mt=-nt.bars.barWidth;break;default:Mt=-nt.bars.barWidth/2}for(_t=Mt+nt.bars.barWidth,Ze=0;Ze<ut.length;Ze+=et){var Wt=ut[Ze],ot=ut[Ze+1],nn=ut[Ze+2];Wt!=null&&(l[Xe].bars.horizontal?Et<=Math.max(nn,Wt)&&Et>=Math.min(nn,Wt)&&Ct>=ot+Mt&&Ct<=ot+_t:Et>=Wt+Mt&&Et<=Wt+_t&&Ct>=Math.min(nn,ot)&&Ct<=Math.max(nn,ot))&&(Oe=[Xe,Ze/et])}}}return Oe?(Xe=Oe[0],Ze=Oe[1],et=l[Xe].datapoints.pointsize,{datapoint:l[Xe].datapoints.points.slice(Ze*et,(Ze+1)*et),dataIndex:Ze,series:l[Xe],seriesIndex:Xe}):null}function Se(se){i.grid.hoverable&&Le("plothover",se,function(ae){return ae.hoverable!=!1})}function We(se){i.grid.hoverable&&Le("plothover",se,function(ae){return!1})}function De(se){P.isSelecting||Le("plotclick",se,function(ae){return ae.clickable!=!1})}function pe(se){if(se.cancelable){if(!f.is(se.target)&&f.has(se.target).length===0){Le("plotleave",se,function(ae){});return}Se(Ne(se)),se.preventDefault()}}function Ne(se){if(!se||!se.originalEvent||se.pageX&&se.pageY)return se;var ae=se.originalEvent;if(ae.changedTouches.length===0)return se;var fe=ae.changedTouches[0];return se.pageX=fe.pageX,se.pageY=fe.pageY,se}function Le(se,ae,fe){var Ce=f.offset(),Re=ae.pageX-Ce.left-a.left,Oe=ae.pageY-Ce.top-a.top,ze=x({left:Re,top:Oe});ze.pageX=ae.pageX,ze.pageY=ae.pageY,ze.ctrlKey=ae.ctrlKey,ze.metaKey=ae.metaKey;var Xe=ke(Re,Oe,fe);if(Xe&&(Xe.pageX=parseInt(Xe.series.xaxis.p2c(Xe.datapoint[0])+Ce.left+a.left,10),Xe.pageY=parseInt(Xe.series.yaxis.p2c(Xe.datapoint[1])+Ce.top+a.top,10)),i.grid.autoHighlight){for(var Ze=0;Ze<ve.length;++Ze){var et=ve[Ze];et.auto==se&&!(Xe&&et.series==Xe.series&&et.point[0]==Xe.datapoint[0]&&et.point[1]==Xe.datapoint[1])&&Ye(et.series,et.point)}Xe&&at(Xe.series,Xe.datapoint,se)}r.trigger(se,[ze,Xe])}function He(){var se=i.interaction.redrawOverlayInterval;if(se==-1){je();return}Me||(Me=setTimeout(je,se))}function je(){Me=null,E.save(),u.clear(),E.translate(a.left,a.top);var se,ae;for(se=0;se<ve.length;++se)ae=ve[se],ae.series.bars.show?Fe(ae.series,ae.point):xe(ae.series,ae.point);E.restore(),C(b.drawOverlay,[E])}function at(se,ae,fe){if(typeof se=="number"&&(se=l[se]),typeof ae=="number"){var Ce=se.datapoints.pointsize;ae=se.datapoints.points.slice(Ce*ae,Ce*(ae+1))}var Re=$e(se,ae);Re==-1?(ve.push({series:se,point:ae,auto:fe}),He()):fe||(ve[Re].auto=!1)}function Ye(se,ae){if(se==null&&ae==null){ve=[],He();return}if(typeof se=="number"&&(se=l[se]),typeof ae=="number"){var fe=se.datapoints.pointsize;ae=se.datapoints.points.slice(fe*ae,fe*(ae+1))}var Ce=$e(se,ae);Ce!=-1&&(ve.splice(Ce,1),He())}function $e(se,ae){for(var fe=0;fe<ve.length;++fe){var Ce=ve[fe];if(Ce.series==se&&Ce.point[0]==ae[0]&&Ce.point[1]==ae[1])return fe}return-1}function xe(se,ae){var fe=ae[0],Ce=ae[1],Re=se.xaxis,Oe=se.yaxis,ze=typeof se.highlightColor=="string"?se.highlightColor:Y.color.parse(se.color).scale("a",.5).toString();if(!(fe<Re.min||fe>Re.max||Ce<Oe.min||Ce>Oe.max)){var Xe=se.points.radius+se.points.lineWidth/2;E.lineWidth=Xe,E.strokeStyle=ze;var Ze=1.5*Xe;fe=Re.p2c(fe),Ce=Oe.p2c(Ce),E.beginPath(),se.points.symbol=="circle"?E.arc(fe,Ce,Ze,0,2*Math.PI,!1):se.points.symbol(E,fe,Ce,Ze,!1),E.closePath(),E.stroke()}}function Fe(se,ae){var fe=typeof se.highlightColor=="string"?se.highlightColor:Y.color.parse(se.color).scale("a",.5).toString(),Ce=fe,Re;switch(se.bars.align){case"left":Re=0;break;case"right":Re=-se.bars.barWidth;break;default:Re=-se.bars.barWidth/2}E.lineWidth=se.bars.lineWidth,E.strokeStyle=fe,ge(ae[0],ae[1],ae[2]||0,Re,Re+se.bars.barWidth,function(){return Ce},se.xaxis,se.yaxis,E,se.bars.horizontal,se.bars.lineWidth)}function Ee(se,ae,fe,Ce){if(typeof se=="string")return se;for(var Re=d.createLinearGradient(0,fe,0,ae),Oe=0,ze=se.colors.length;Oe<ze;++Oe){var Xe=se.colors[Oe];if(typeof Xe!="string"){var Ze=Y.color.parse(Ce);Xe.brightness!=null&&(Ze=Ze.scale("rgb",Xe.brightness)),Xe.opacity!=null&&(Ze.a*=Xe.opacity),Xe=Ze.toString()}Re.addColorStop(Oe/(ze-1),Xe)}return Re}}Y.plot=function(r,s,o){var m=new t(Y(r),s,o,Y.plot.plugins);return m},Y.plot.version="0.8.3",Y.plot.plugins=[],Y.fn.plot=function(r,s){return this.each(function(){Y.plot(this,r,s)})};function n(r,s){return s*Math.floor(r/s)}}(jQuery)},80851:()=>{(function(Y){function I(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},r=null;function s(a){t.active&&(f(a),e.getPlaceholder().trigger("plotselecting",[l()]))}function o(a){a.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),u(t.first,a),t.active=!0,r=function(v){m(v)},Y(document).one("mouseup",r))}function m(a){return r=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,f(a),y()?i(a):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function l(){if(!y()||!t.show)return null;var a={},v=t.first,g=t.second,b=e.getAxes(),P=!0;return Y.each(b,function(C,D){D.used&&(anyUsed=!1)}),Y.each(b,function(C,D){if(D.used||P){var T=D.c2p(v[D.direction]),M=D.c2p(g[D.direction]);a[C]={from:Math.min(T,M),to:Math.max(T,M)}}}),a}function i(a){var v=l();v.ctrlKey=a.ctrlKey,v.metaKey=a.metaKey,e.getPlaceholder().trigger("plotselected",[v]),v.xaxis&&v.yaxis&&e.getPlaceholder().trigger("selected",[{x1:v.xaxis.from,y1:v.yaxis.from,x2:v.xaxis.to,y2:v.yaxis.to}])}function c(a,v,g){return v<a?a:v>g?g:v}function u(a,v){var g=e.getOptions(),b=e.getPlaceholder().offset(),P=e.getPlotOffset();a.x=c(0,v.pageX-b.left-P.left,e.width()),a.y=c(0,v.pageY-b.top-P.top,e.height()),g.selection.mode=="y"&&(a.x=a==t.first?0:e.width()),g.selection.mode=="x"&&(a.y=a==t.first?0:e.height())}function f(a){a.pageX!=null&&(u(t.second,a),y()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):d(!0))}function d(a){t.show&&(t.show=!1,e.triggerRedrawOverlay(),a||e.getPlaceholder().trigger("plotunselected",[]))}function E(a,v){var g,b,P,C,D=e.getAxes();for(var T in D)if(g=D[T],g.direction==v&&(C=v+g.n+"axis",!a[C]&&g.n==1&&(C=v+"axis"),a[C])){b=a[C].from,P=a[C].to;break}if(a[C]||(g=v=="x"?e.getXAxes()[0]:e.getYAxes()[0],b=a[v+"1"],P=a[v+"2"]),b!=null&&P!=null&&b>P){var M=b;b=P,P=M}return{from:b,to:P,axis:g}}function h(a,v){var g,b,P=e.getOptions();P.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(b=E(a,"x"),t.first.x=b.axis.p2c(b.from),t.second.x=b.axis.p2c(b.to)),P.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(b=E(a,"y"),t.first.y=b.axis.p2c(b.from),t.second.y=b.axis.p2c(b.to)),t.show=!0,e.triggerRedrawOverlay(),!v&&y()&&i()}function y(){var a=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=a&&Math.abs(t.second.y-t.first.y)>=a}e.clearSelection=d,e.setSelection=h,e.getSelection=l,e.hooks.bindEvents.push(function(a,v){var g=a.getOptions();g.selection.mode!=null&&(v.mousemove(s),v.mousedown(o))}),e.hooks.drawOverlay.push(function(a,v){if(t.show&&y()){var g=a.getPlotOffset(),b=a.getOptions();v.save(),v.translate(g.left,g.top);var P=Y.color.parse(b.selection.color);v.strokeStyle=P.scale("a",.8).toString(),v.lineWidth=1,v.lineJoin=b.selection.shape,v.fillStyle=P.scale("a",.4).toString();var C=Math.min(t.first.x,t.second.x)+.5,D=Math.min(t.first.y,t.second.y)+.5,T=Math.abs(t.second.x-t.first.x)-1,M=Math.abs(t.second.y-t.first.y)-1;v.fillRect(C,D,T,M),v.strokeRect(C,D,T,M),v.restore()}}),e.hooks.shutdown.push(function(a,v){v.unbind("mousemove",s),v.unbind("mousedown",o),r&&(Y(document).unbind("mouseup",r),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}Y.plot.plugins.push({init:I,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},31221:()=>{(function(Y){var I={series:{stack:null}};function e(t){function n(s,o){for(var m=null,l=0;l<o.length&&s!=o[l];++l)o[l].stack==s.stack&&(m=o[l]);return m}function r(s,o,m){if(!(o.stack==null||o.stack===!1)){var l=n(o,s.getData());if(l){for(var i=m.pointsize,c=m.points,u=l.datapoints.pointsize,f=l.datapoints.points,d=[],E,h,y,a,v,g,b=o.lines.show,P=o.bars.horizontal,C=i>2&&(P?m.format[2].x:m.format[2].y),D=b&&o.lines.steps,T=P?1:0,M=P?0:1,O=0,S=0,p,x;!(O>=c.length&&S>=f.length);){if(p=d.length,O<c.length&&c[O]==null){for(x=0;x<i;++x)d.push(c[O+x]);O+=i}else if(O>=c.length){for(x=0;x<i;++x)d.push(f[S+x]);C&&(d[p+2]=f[S+M]),S+=u}else if(S>=f.length){for(x=0;x<i;++x)d.push(c[O+x]);O+=i}else if(S<f.length&&f[S]==null)S+=u;else{if(E=c[O+T],h=c[O+M],a=f[S+T],v=f[S+M],g=0,E==a){for(x=0;x<i;++x)d.push(c[O+x]);d[p+M]+=v,g=v,O+=i,S+=u}else if(E>a){if(O==0){for(x=0;x<i;++x)d.push(f[S+x]);g=v}if(O>0&&c[O-i]!=null){for(y=0,d.push(a),d.push(y+v),x=2;x<i;++x)d.push(c[O+x]);g=v}S+=u}else{for(x=0;x<i;++x)d.push(c[O+x]);S>0&&f[S-u]!=null&&(g=0),d[p+M]+=g,O+=i}fromgap=!1,p!=d.length&&C&&(d[p+2]=g)}if(D&&p!=d.length&&p>0&&d[p]!=null&&d[p]!=d[p-i]&&d[p+1]!=d[p-i+1]){for(x=0;x<i;++x)d[p+i+x]=d[p+x];d[p+1]=d[p-i+1]}}m.points=d}}}t.hooks.processDatapoints.push(r)}Y.plot.plugins.push({init:e,options:I,name:"stack",version:"1.2"})})(jQuery)},91520:()=>{(function(Y){var I={series:{stackpercent:null}};function e(t){var n={},r=!1,s={};function o(i,c,u,f){if(r||(r=!0,s=m(i.getData())),c.stackpercent==!0){var d=u.length;c.percents=[];var E=0,h=1;c.bars&&c.bars.horizontal&&c.bars.horizontal===!0&&(E=1,h=0);for(var y=0;y<d;y++){var a=s[u[y][E]+""];a>0?c.percents.push(u[y][h]*100/a):c.percents.push(0)}}}function m(i){var c=i.length,u={};if(c>0){for(var f=0;f<c;f++)if(i[f].stackpercent){var d=0,E=1;i[f].bars&&i[f].bars.horizontal&&i[f].bars.horizontal===!0&&(d=1,E=0);for(var h=i[f].data.length,y=0;y<h;y++){var a=0;i[f].data[y][1]!=null&&(a=i[f].data[y][E]),u[i[f].data[y][d]+""]?u[i[f].data[y][d]+""]+=a:u[i[f].data[y][d]+""]=a}}}return u}function l(i,c,u){if(c.stackpercent){r||(s=m(i.getData()));var f=[],d=0,E=1;c.bars&&c.bars.horizontal&&c.bars.horizontal===!0&&(d=1,E=0);for(var h=0;h<u.points.length;h+=3)n[u.points[h+d]]||(n[u.points[h+d]]=0),f[h+d]=u.points[h+d],f[h+E]=u.points[h+E]+n[u.points[h+d]],f[h+2]=n[u.points[h+d]],n[u.points[h+d]]+=u.points[h+E],s[f[h+d]+""]>0?(f[h+E]=f[h+E]*100/s[f[h+d]+""],f[h+2]=f[h+2]*100/s[f[h+d]+""]):(f[h+E]=0,f[h+2]=0);u.points=f}}t.hooks.processRawData.push(o),t.hooks.processDatapoints.push(l)}Y.plot.plugins.push({init:e,options:I,name:"stackpercent",version:"0.1"})})(jQuery)},32176:()=>{(function(Y){var I={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(c,u){return u*Math.floor(c/u)}function t(c,u,f,d){if(typeof c.strftime=="function")return c.strftime(u);var E=function(C,D){return C=""+C,D=""+(D??"0"),C.length==1?D+C:C},h=[],y=!1,a=c.getHours(),v=a<12;f==null&&(f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),d==null&&(d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var g;a>12?g=a-12:a==0?g=12:g=a;for(var b=0;b<u.length;++b){var P=u.charAt(b);if(y){switch(P){case"a":P=""+d[c.getDay()];break;case"b":P=""+f[c.getMonth()];break;case"d":P=E(c.getDate(),"");break;case"e":P=E(c.getDate()," ");break;case"h":case"H":P=E(a);break;case"I":P=E(g);break;case"l":P=E(g," ");break;case"m":P=E(c.getMonth()+1,"");break;case"M":P=E(c.getMinutes());break;case"q":P=""+(Math.floor(c.getMonth()/3)+1);break;case"S":P=E(c.getSeconds());break;case"y":P=E(c.getFullYear()%100);break;case"Y":P=""+c.getFullYear();break;case"p":P=v?"am":"pm";break;case"P":P=v?"AM":"PM";break;case"w":P=""+c.getDay();break}h.push(P),y=!1}else P=="%"?y=!0:h.push(P)}return h.join("")}function n(c){function u(h,y,a,v){h[y]=function(){return a[v].apply(a,arguments)}}var f={date:c};c.strftime!=null&&u(f,"strftime",c,"strftime"),u(f,"getTime",c,"getTime"),u(f,"setTime",c,"setTime");for(var d=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],E=0;E<d.length;E++)u(f,"get"+d[E],c,"getUTC"+d[E]),u(f,"set"+d[E],c,"setUTC"+d[E]);return f}function r(c,u){if(u.timezone=="browser")return new Date(c);if(!u.timezone||u.timezone=="utc")return n(new Date(c));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var f=new timezoneJS.Date;return f.setTimezone(u.timezone),f.setTime(c),f}else return n(new Date(c))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],m=o.concat([[3,"month"],[6,"month"],[1,"year"]]),l=o.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function i(c){c.hooks.processOptions.push(function(u,f){Y.each(u.getAxes(),function(d,E){var h=E.options;h.mode=="time"&&(E.tickGenerator=function(y){var a=[],v=r(y.min,h),g=0,b=h.tickSize&&h.tickSize[1]==="quarter"||h.minTickSize&&h.minTickSize[1]==="quarter"?l:m;h.minTickSize!=null&&(typeof h.tickSize=="number"?g=h.tickSize:g=h.minTickSize[0]*s[h.minTickSize[1]]);for(var P=0;P<b.length-1&&!(y.delta<(b[P][0]*s[b[P][1]]+b[P+1][0]*s[b[P+1][1]])/2&&b[P][0]*s[b[P][1]]>=g);++P);var C=b[P][0],D=b[P][1];if(D=="year"){if(h.minTickSize!=null&&h.minTickSize[1]=="year")C=Math.floor(h.minTickSize[0]);else{var T=Math.pow(10,Math.floor(Math.log(y.delta/s.year)/Math.LN10)),M=y.delta/s.year/T;M<1.5?C=1:M<3?C=2:M<7.5?C=5:C=10,C*=T}C<1&&(C=1)}y.tickSize=h.tickSize||[C,D];var O=y.tickSize[0];D=y.tickSize[1];var S=O*s[D];D=="second"?v.setSeconds(e(v.getSeconds(),O)):D=="minute"?v.setMinutes(e(v.getMinutes(),O)):D=="hour"?v.setHours(e(v.getHours(),O)):D=="month"?v.setMonth(e(v.getMonth(),O)):D=="quarter"?v.setMonth(3*e(v.getMonth()/3,O)):D=="year"&&v.setFullYear(e(v.getFullYear(),O)),v.setMilliseconds(0),S>=s.minute&&v.setSeconds(0),S>=s.hour&&v.setMinutes(0),S>=s.day&&v.setHours(0),S>=s.day*4&&v.setDate(1),S>=s.month*2&&v.setMonth(e(v.getMonth(),3)),S>=s.quarter*2&&v.setMonth(e(v.getMonth(),6)),S>=s.year&&v.setMonth(0);var p=0,x=Number.NaN,A;do if(A=x,x=v.getTime(),a.push(x),D=="month"||D=="quarter")if(O<1){v.setDate(1);var R=v.getTime();v.setMonth(v.getMonth()+(D=="quarter"?3:1));var B=v.getTime();v.setTime(x+p*s.hour+(B-R)*O),p=v.getHours(),v.setHours(0)}else v.setMonth(v.getMonth()+O*(D=="quarter"?3:1));else D=="year"?v.setFullYear(v.getFullYear()+O):v.setTime(x+S);while(x<y.max&&x!=A);return a},E.tickFormatter=function(y,a){var v=r(y,a.options);if(h.timeformat!=null)return t(v,h.timeformat,h.monthNames,h.dayNames);var g=a.options.tickSize&&a.options.tickSize[1]=="quarter"||a.options.minTickSize&&a.options.minTickSize[1]=="quarter",b=a.tickSize[0]*s[a.tickSize[1]],P=a.max-a.min,C=h.twelveHourClock?" %p":"",D=h.twelveHourClock?"%I":"%H",T;b<s.minute?T=D+":%M:%S"+C:b<s.day?P<2*s.day?T=D+":%M"+C:T="%b %d "+D+":%M"+C:b<s.month?T="%b %d":g&&b<s.quarter||!g&&b<s.year?P<s.year?T="%b":T="%b %Y":g&&b<s.year?P<s.year?T="Q%q":T="Q%q %Y":T="%Y";var M=t(v,T,h.monthNames,h.dayNames);return M})})})}Y.plot.plugins.push({init:i,options:I,name:"time",version:"1.0"}),Y.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=4570.662412df437585556b08.js.map