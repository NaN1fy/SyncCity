{
    "apiVersion": 1,
    "groups": [
        {
            "orgId": 1,
            "name": "heat_index_above_40",
            "folder": "heat_index_alert_folder",
            "interval": "1m",
            "rules": [
                {
                    "uid": "adrfx6fmrmjnkf",
                    "title": "Heat Index in Padua, Italy",
                    "condition": "treshold",
                    "data": [
                        {
                            "refId": "temp",
                            "queryType": "timeseries",
                            "relativeTimeRange": {
                                "from": 300,
                                "to": 0
                            },
                            "datasourceUid": "PDEE91DDB90597936",
                            "model": {
                                "builderOptions": {
                                    "aggregates": [],
                                    "columns": [
                                        {
                                            "custom": false,
                                            "name": "readings",
                                            "type": "Float64"
                                        },
                                        {
                                            "hint": "time",
                                            "name": "gather_time",
                                            "type": "DateTime64(3)"
                                        }
                                    ],
                                    "database": "sc_database",
                                    "filters": [
                                        {
                                            "condition": "AND",
                                            "filterType": "custom",
                                            "hint": "time",
                                            "key": "",
                                            "operator": "WITH IN DASHBOARD TIME RANGE",
                                            "type": "datetime"
                                        }
                                    ],
                                    "groupBy": [],
                                    "limit": 0,
                                    "meta": {},
                                    "mode": "aggregate",
                                    "orderBy": [
                                        {
                                            "default": true,
                                            "dir": "ASC",
                                            "hint": "time",
                                            "name": ""
                                        }
                                    ],
                                    "queryType": "timeseries",
                                    "table": "temperature"
                                },
                                "datasource": {
                                    "type": "grafana-clickhouse-datasource",
                                    "uid": "PDEE91DDB90597936"
                                },
                                "editorType": "sql",
                                "format": 0,
                                "intervalMs": 1000,
                                "maxDataPoints": 43200,
                                "meta": {
                                    "builderOptions": {
                                        "aggregates": [],
                                        "columns": [
                                            {
                                                "custom": false,
                                                "name": "readings",
                                                "type": "Float64"
                                            },
                                            {
                                                "hint": "time",
                                                "name": "gather_time",
                                                "type": "DateTime64(3)"
                                            }
                                        ],
                                        "database": "sc_database",
                                        "filters": [
                                            {
                                                "condition": "AND",
                                                "filterType": "custom",
                                                "hint": "time",
                                                "key": "",
                                                "operator": "WITH IN DASHBOARD TIME RANGE",
                                                "type": "datetime"
                                            }
                                        ],
                                        "groupBy": [],
                                        "limit": 0,
                                        "meta": {},
                                        "mode": "aggregate",
                                        "orderBy": [
                                            {
                                                "default": true,
                                                "dir": "ASC",
                                                "hint": "time",
                                                "name": ""
                                            }
                                        ],
                                        "queryType": "timeseries",
                                        "table": "temperature"
                                    }
                                },
                                "pluginVersion": "4.3.0",
                                "queryType": "timeseries",
                                "rawSql": "SELECT gather_time as time, readings, sensor_name FROM \"sc_database\".\"temperature\" WHERE ( time >= $__fromTime AND time <= $__toTime) ORDER BY time ASC",
                                "refId": "temp"
                            }
                        },
                        {
                            "refId": "hum",
                            "queryType": "timeseries",
                            "relativeTimeRange": {
                                "from": 300,
                                "to": 0
                            },
                            "datasourceUid": "PDEE91DDB90597936",
                            "model": {
                                "builderOptions": {
                                    "aggregates": [],
                                    "columns": [
                                        {
                                            "custom": false,
                                            "name": "readings",
                                            "type": "Int32"
                                        },
                                        {
                                            "hint": "time",
                                            "name": "gather_time",
                                            "type": "DateTime64(3)"
                                        }
                                    ],
                                    "database": "sc_database",
                                    "filters": [
                                        {
                                            "condition": "AND",
                                            "filterType": "custom",
                                            "hint": "time",
                                            "key": "",
                                            "operator": "WITH IN DASHBOARD TIME RANGE",
                                            "type": "datetime"
                                        }
                                    ],
                                    "groupBy": [],
                                    "limit": 0,
                                    "meta": {},
                                    "mode": "aggregate",
                                    "orderBy": [
                                        {
                                            "default": true,
                                            "dir": "ASC",
                                            "hint": "time",
                                            "name": ""
                                        }
                                    ],
                                    "queryType": "timeseries",
                                    "table": "humidity"
                                },
                                "datasource": {
                                    "type": "grafana-clickhouse-datasource",
                                    "uid": "PDEE91DDB90597936"
                                },
                                "editorType": "sql",
                                "format": 0,
                                "intervalMs": 1000,
                                "maxDataPoints": 43200,
                                "meta": {
                                    "builderOptions": {
                                        "aggregates": [],
                                        "columns": [
                                            {
                                                "custom": false,
                                                "name": "readings",
                                                "type": "Int32"
                                            },
                                            {
                                                "hint": "time",
                                                "name": "gather_time",
                                                "type": "DateTime64(3)"
                                            }
                                        ],
                                        "database": "sc_database",
                                        "filters": [
                                            {
                                                "condition": "AND",
                                                "filterType": "custom",
                                                "hint": "time",
                                                "key": "",
                                                "operator": "WITH IN DASHBOARD TIME RANGE",
                                                "type": "datetime"
                                            }
                                        ],
                                        "groupBy": [],
                                        "limit": 0,
                                        "meta": {},
                                        "mode": "aggregate",
                                        "orderBy": [
                                            {
                                                "default": true,
                                                "dir": "ASC",
                                                "hint": "time",
                                                "name": ""
                                            }
                                        ],
                                        "queryType": "timeseries",
                                        "table": "humidity"
                                    }
                                },
                                "pluginVersion": "4.3.0",
                                "queryType": "timeseries",
                                "rawSql": "SELECT gather_time as time, readings, sensor_name FROM \"sc_database\".\"humidity\" WHERE ( time >= $__fromTime AND time <= $__toTime) ORDER BY time ASC",
                                "refId": "hum"
                            }
                        },
                        {
                            "refId": "heat_index",
                            "relativeTimeRange": {
                                "from": 600,
                                "to": 0
                            },
                            "datasourceUid": "__expr__",
                            "model": {
                                "datasource": {
                                    "name": "Expression",
                                    "type": "__expr__",
                                    "uid": "__expr__"
                                },
                                "expression": "(-8.78469475556)+((1.61139411)*${temp})+((2.338548839)*${hum})+((-0.146116050)*${temp}*${hum})+((-0.012308094)*(${temp}**2))+((-0.0164248277778)*(${hum}**2))+((0.002211732)*(${temp}**2)*${hum})+((0.00072546)*${temp}*(${hum}**2))+((-0.000003582)*(${temp}**2)*(${hum}**2))",
                                "intervalMs": 1000,
                                "maxDataPoints": 43200,
                                "refId": "heat_index",
                                "type": "math",
                                "window": ""
                            }
                        },
                        {
                            "refId": "avg",
                            "relativeTimeRange": {
                                "from": 0,
                                "to": 0
                            },
                            "datasourceUid": "__expr__",
                            "model": {
                                "conditions": [
                                    {
                                        "evaluator": {
                                            "params": [
                                                0,
                                                0
                                            ],
                                            "type": "gt"
                                        },
                                        "operator": {
                                            "type": "and"
                                        },
                                        "query": {
                                            "params": []
                                        },
                                        "reducer": {
                                            "params": [],
                                            "type": "avg"
                                        },
                                        "type": "query"
                                    }
                                ],
                                "datasource": {
                                    "name": "Expression",
                                    "type": "__expr__",
                                    "uid": "__expr__"
                                },
                                "expression": "heat_index",
                                "intervalMs": 1000,
                                "maxDataPoints": 43200,
                                "reducer": "mean",
                                "refId": "avg",
                                "settings": {
                                    "mode": "dropNN"
                                },
                                "type": "reduce"
                            }
                        },
                        {
                            "refId": "treshold",
                            "relativeTimeRange": {
                                "from": 0,
                                "to": 0
                            },
                            "datasourceUid": "__expr__",
                            "model": {
                                "conditions": [
                                    {
                                        "evaluator": {
                                            "params": [
                                                40,
                                                0
                                            ],
                                            "type": "gt"
                                        },
                                        "operator": {
                                            "type": "and"
                                        },
                                        "query": {
                                            "params": []
                                        },
                                        "reducer": {
                                            "params": [],
                                            "type": "avg"
                                        },
                                        "type": "query"
                                    }
                                ],
                                "datasource": {
                                    "name": "Expression",
                                    "type": "__expr__",
                                    "uid": "__expr__"
                                },
                                "expression": "avg",
                                "intervalMs": 1000,
                                "maxDataPoints": 43200,
                                "refId": "treshold",
                                "type": "threshold"
                            }
                        }
                    ],
                    "dasboardUid": "cdn2oqslg9a80d",
                    "panelId": 4,
                    "noDataState": "NoData",
                    "execErrState": "Error",
                    "for": "1m",
                    "annotations": {
                        "__dashboardUid__": "cdn2oqslg9a80d",
                        "__panelId__": "4"
                    },
                    "isPaused": false,
                    "notification_settings": {
                        "receiver": "grafana-nan1fy-discord"
                    }
                }
            ]
        }
    ]
}